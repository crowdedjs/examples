var bootWorker = (function () {
  'use strict';

  (function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.crowded = {}));
  }(undefined, (function (exports) {
    function _classCallCheck(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }

    function _defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    function _createClass(Constructor, protoProps, staticProps) {
      if (protoProps) _defineProperties(Constructor.prototype, protoProps);
      if (staticProps) _defineProperties(Constructor, staticProps);
      return Constructor;
    }

    function _defineProperty(obj, key, value) {
      if (key in obj) {
        Object.defineProperty(obj, key, {
          value: value,
          enumerable: true,
          configurable: true,
          writable: true
        });
      } else {
        obj[key] = value;
      }

      return obj;
    }

    function _slicedToArray(arr, i) {
      return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
    }

    function _toConsumableArray(arr) {
      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
    }

    function _arrayWithoutHoles(arr) {
      if (Array.isArray(arr)) return _arrayLikeToArray(arr);
    }

    function _arrayWithHoles(arr) {
      if (Array.isArray(arr)) return arr;
    }

    function _iterableToArray(iter) {
      if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
    }

    function _iterableToArrayLimit(arr, i) {
      if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return;
      var _arr = [];
      var _n = true;
      var _d = false;
      var _e = undefined;

      try {
        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
          _arr.push(_s.value);

          if (i && _arr.length === i) break;
        }
      } catch (err) {
        _d = true;
        _e = err;
      } finally {
        try {
          if (!_n && _i["return"] != null) _i["return"]();
        } finally {
          if (_d) throw _e;
        }
      }

      return _arr;
    }

    function _unsupportedIterableToArray(o, minLen) {
      if (!o) return;
      if (typeof o === "string") return _arrayLikeToArray(o, minLen);
      var n = Object.prototype.toString.call(o).slice(8, -1);
      if (n === "Object" && o.constructor) n = o.constructor.name;
      if (n === "Map" || n === "Set") return Array.from(o);
      if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
    }

    function _arrayLikeToArray(arr, len) {
      if (len == null || len > arr.length) len = arr.length;

      for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];

      return arr2;
    }

    function _nonIterableSpread() {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function _nonIterableRest() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }

    function _createForOfIteratorHelper(o, allowArrayLike) {
      var it;

      if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) {
        if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
          if (it) o = it;
          var i = 0;

          var F = function () {};

          return {
            s: F,
            n: function () {
              if (i >= o.length) return {
                done: true
              };
              return {
                done: false,
                value: o[i++]
              };
            },
            e: function (e) {
              throw e;
            },
            f: F
          };
        }

        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
      }

      var normalCompletion = true,
          didErr = false,
          err;
      return {
        s: function () {
          it = o[Symbol.iterator]();
        },
        n: function () {
          var step = it.next();
          normalCompletion = step.done;
          return step;
        },
        e: function (e) {
          didErr = true;
          err = e;
        },
        f: function () {
          try {
            if (!normalCompletion && it.return != null) it.return();
          } finally {
            if (didErr) throw err;
          }
        }
      };
    }

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    /// Configuration parameters for a crowd agent.
    /// @ingroup crowd
    var CrowdAgentParams = function CrowdAgentParams() {
      _classCallCheck(this, CrowdAgentParams);

      _defineProperty(this, "radius", 0);

      _defineProperty(this, "height", 0);

      _defineProperty(this, "maxAcceleration", 0);

      _defineProperty(this, "maxSpeed", 0);

      _defineProperty(this, "collisionQueryRange", 0);

      _defineProperty(this, "pathOptimizationRange", 0);

      _defineProperty(this, "separationWeight", 0);

      _defineProperty(this, "updateFlags", 0);

      _defineProperty(this, "obstacleAvoidanceType", 0);

      _defineProperty(this, "queryFilterType", 0);

      _defineProperty(this, "userData", null);
    };

    _defineProperty(CrowdAgentParams, "DT_CROWD_ANTICIPATE_TURNS", 1);

    _defineProperty(CrowdAgentParams, "DT_CROWD_OBSTACLE_AVOIDANCE", 2);

    _defineProperty(CrowdAgentParams, "DT_CROWD_SEPARATION", 4);

    _defineProperty(CrowdAgentParams, "DT_CROWD_OPTIMIZE_VIS", 8);

    _defineProperty(CrowdAgentParams, "DT_CROWD_OPTIMIZE_TOPO", 16);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**
     *  Configuration parameters used to define multi-tile navigation meshes.
     *  The values are used to allocate space during the initialization of a navigation mesh.
     *  @see NavMesh
     */
    var NavMeshParams = function NavMeshParams() {
      _classCallCheck(this, NavMeshParams);

      _defineProperty(this, "orig", new Array(3));

      _defineProperty(this, "tileWidth", 0);

      _defineProperty(this, "tileHeight", 0);

      _defineProperty(this, "maxTiles", 0);

      _defineProperty(this, "maxPolys", 0);
    };

    var IntersectResult = function IntersectResult() {
      _classCallCheck(this, IntersectResult);

      _defineProperty(this, "intersects", false);

      _defineProperty(this, "tmin", 0);

      _defineProperty(this, "tmax", 1);

      _defineProperty(this, "segMin", -1);

      _defineProperty(this, "segMax", -1);
    };

    /*
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**
     * Wrapper for 3-element pieces (3D vectors) of a bigger  array.
     *
     */
    var VectorPtr$1 = /*#__PURE__*/function () {
      // constructor( array) {
      // 		this(array, 0);
      // 	}
      function VectorPtr(array) {
        var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

        _classCallCheck(this, VectorPtr);

        _defineProperty(this, "array", void 0);

        _defineProperty(this, "index", void 0);

        this.array = array;
        this.index = index;
      }

      _createClass(VectorPtr, [{
        key: "get",
        value: function get(offset) {
          return array[index + offset];
        }
      }]);

      return VectorPtr;
    }();

    var DetourCommon = /*#__PURE__*/function () {
      function DetourCommon() {
        _classCallCheck(this, DetourCommon);
      }

      _createClass(DetourCommon, null, [{
        key: "vMad",
        /// Performs a scaled vector addition. (@p v1 + (@p v2 * @p s))
        /// @param[out] dest The result vector. [(x, y, z)]
        /// @param[_in] v1 The base vector. [(x, y, z)]
        /// @param[_in] v2 The vector to scale and add to @p v1. [(x, y, z)]
        /// @param[_in] s The amount to scale @p v2 by before adding to @p v1.
        value: function vMad(v1, v2, s) {
          var dest = new Array(3);
          dest[0] = v1[0] + v2[0] * s;
          dest[1] = v1[1] + v2[1] * s;
          dest[2] = v1[2] + v2[2] * s;
          return dest;
        } /// Performs a linear interpolation between two vectors. (@p v1 toward @p
        /// v2)
        /// @param[out] dest The result vector. [(x, y, x)]
        /// @param[_in] v1 The starting vector.
        /// @param[_in] v2 The destination vector.
        /// @param[_in] t The interpolation factor. [Limits: 0 <= value <= 1.0]

      }, {
        key: "vLerp4",
        value: function vLerp4(verts, v1, v2, t) {
          var dest = new Array(3);
          dest[0] = verts[v1 + 0] + (verts[v2 + 0] - verts[v1 + 0]) * t;
          dest[1] = verts[v1 + 1] + (verts[v2 + 1] - verts[v1 + 1]) * t;
          dest[2] = verts[v1 + 2] + (verts[v2 + 2] - verts[v1 + 2]) * t;
          return dest;
        }
      }, {
        key: "vLerp3",
        value: function vLerp3(v1, v2, t) {
          var dest = new Array(3);
          dest[0] = v1[0] + (v2[0] - v1[0]) * t;
          dest[1] = v1[1] + (v2[1] - v1[1]) * t;
          dest[2] = v1[2] + (v2[2] - v1[2]) * t;
          return dest;
        }
      }, {
        key: "vSub",
        value: function vSub(v1, v2) {
          var dest = new Array(3);
          dest[0] = v1[0] - v2[0];
          dest[1] = v1[1] - v2[1];
          dest[2] = v1[2] - v2[2];
          return dest;
        } // static vSub(v1, v2) {
        // 	let dest = new Array(3);
        // 	dest[0] = v1[0] - v2[0];
        // 	dest[1] = v1[1] - v2[1];
        // 	dest[2] = v1[2] - v2[2];
        // 	return dest;
        // }

      }, {
        key: "vAdd",
        value: function vAdd(v1, v2) {
          var dest = new Array(3);
          dest[0] = v1[0] + v2[0];
          dest[1] = v1[1] + v2[1];
          dest[2] = v1[2] + v2[2];
          return dest;
        }
      }, {
        key: "vCopy_return",
        value: function vCopy_return(i) {
          var out = new Array(3);
          out[0] = i[0];
          out[1] = i[1];
          out[2] = i[2];
          return out;
        }
      }, {
        key: "vSet",
        value: function vSet(out, a, b, c) {
          out[0] = a;
          out[1] = b;
          out[2] = c;
        } // static vCopy(out, i) {
        // 	out[0] = i[0];
        // 	out[1] = i[1];
        // 	out[2] = i[2];
        // }
        //See vCopy_return for the 1 parameter version

      }, {
        key: "vCopy",
        value: function vCopy(out, _in) {
          var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
          out[0] = _in[i];
          out[1] = _in[i + 1];
          out[2] = _in[i + 2];
        }
      }, {
        key: "vMin",
        value: function vMin(out, _in, i) {
          out[0] = Math.min(out[0], _in[i]);
          out[1] = Math.min(out[1], _in[i + 1]);
          out[2] = Math.min(out[2], _in[i + 2]);
        }
      }, {
        key: "vMax",
        value: function vMax(out, _in, i) {
          out[0] = Math.max(out[0], _in[i]);
          out[1] = Math.max(out[1], _in[i + 1]);
          out[2] = Math.max(out[2], _in[i + 2]);
        } /// Returns the distance between two points.
        /// @param[_in] v1 A point. [(x, y, z)]
        /// @param[_in] v2 A point. [(x, y, z)]
        /// @return The distance between the two points.

      }, {
        key: "vDist2",
        value: function vDist2(v1, v2) {
          var dx = v2[0] - v1[0];
          var dy = v2[1] - v1[1];
          var dz = v2[2] - v1[2];
          return Math.sqrt(dx * dx + dy * dy + dz * dz);
        } /// Returns the distance between two points.
        /// @param[_in] v1 A point. [(x, y, z)]
        /// @param[_in] v2 A point. [(x, y, z)]
        /// @return The distance between the two points.

      }, {
        key: "vDistSqr",
        value: function vDistSqr(v1, v2) {
          var dx = v2[0] - v1[0];
          var dy = v2[1] - v1[1];
          var dz = v2[2] - v1[2];
          return dx * dx + dy * dy + dz * dz;
        }
      }, {
        key: "sqr",
        value: function sqr(a) {
          return a * a;
        } /// Derives the square of the scalar length of the vector. (len * len)
        /// @param[_in] v The vector. [(x, y, z)]
        /// @return The square of the scalar length of the vector.

      }, {
        key: "vLenSqr",
        value: function vLenSqr(v) {
          return v[0] * v[0] + v[1] * v[1] + v[2] * v[2];
        }
      }, {
        key: "vLen",
        value: function vLen(v) {
          return Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);
        }
      }, {
        key: "vDist3",
        value: function vDist3(v1, verts, i) {
          var dx = verts[i] - v1[0];
          var dy = verts[i + 1] - v1[1];
          var dz = verts[i + 2] - v1[2];
          return Math.sqrt(dx * dx + dy * dy + dz * dz);
        }
      }, {
        key: "clamp",
        value: function clamp(v, min, max) {
          return Math.max(Math.min(v, max), min);
        }
      }, {
        key: "clamp",
        value: function clamp(v, min, max) {
          return Math.max(Math.min(v, max), min);
        } /// Derives the distance between the specified points on the xz-plane.
        /// @param[_in] v1 A point. [(x, y, z)]
        /// @param[_in] v2 A point. [(x, y, z)]
        /// @return The distance between the poPoly on the xz-plane.
        ///
        /// The vectors are projected onto the xz-plane, so the y-values are
        /// ignored.

      }, {
        key: "vDist2D",
        value: function vDist2D(v1, v2) {
          var dx = v2[0] - v1[0];
          var dz = v2[2] - v1[2];
          return Math.sqrt(dx * dx + dz * dz);
        }
      }, {
        key: "vDist2DSqr",
        value: function vDist2DSqr(v1, v2) {
          var dx = v2[0] - v1[0];
          var dz = v2[2] - v1[2];
          return dx * dx + dz * dz;
        } /// Normalizes the vector.
        /// @param[_in,out] v The vector to normalize. [(x, y, z)]

      }, {
        key: "vNormalize",
        value: function vNormalize(v) {
          var d = 1.0 / Math.sqrt(DetourCommon.sqr(v[0]) + DetourCommon.sqr(v[1]) + DetourCommon.sqr(v[2]));

          if (d != 0) {
            v[0] *= d;
            v[1] *= d;
            v[2] *= d;
          }
        }
      }, {
        key: "vEqual",
        /// Performs a 'sloppy' colocation check of the specified points.
        /// @param[_in] p0 A point. [(x, y, z)]
        /// @param[_in] p1 A point. [(x, y, z)]
        /// @return True if the points are considered to be at the same location.
        ///
        /// Basically, this function will return true if the specified points are
        /// close enough to eachother to be considered colocated.
        value: function vEqual(p0, p1) {
          var d = DetourCommon.vDistSqr(p0, p1);
          return d < DetourCommon.thr;
        } /// Derives the dot product of two vectors on the xz-plane. (@p u . @p v)
        /// @param[_in] u A vector [(x, y, z)]
        /// @param[_in] v A vector [(x, y, z)]
        /// @return The dot product on the xz-plane.
        ///
        /// The vectors are projected onto the xz-plane, so the y-values are
        /// ignored.
        // static DetourCommon.vDot2D(u, v) {
        // 	return u[0] * v[0] + u[2] * v[2];
        // }

      }, {
        key: "vDot2D",
        value: function vDot2D(u, v) {
          var vi = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
          return u[0] * v[vi] + u[2] * v[vi + 2];
        } /// Derives the xz-plane 2D perp product of the two vectors. (uz*vx - ux*vz)
        /// @param[_in] u The LHV vector [(x, y, z)]
        /// @param[_in] v The RHV vector [(x, y, z)]
        /// @return The dot product on the xz-plane.
        ///
        /// The vectors are projected onto the xz-plane, so the y-values are
        /// ignored.

      }, {
        key: "vPerp2D",
        value: function vPerp2D(u, v) {
          return u[2] * v[0] - u[0] * v[2];
        } /// @}
        /// @name Computational geometry helper functions.
        /// @{
        /// Derives the signed xz-plane area of the triangle ABC, or the
        /// relationship of line AB to poPoly C.
        /// @param[_in] a Vertex A. [(x, y, z)]
        /// @param[_in] b Vertex B. [(x, y, z)]
        /// @param[_in] c Vertex C. [(x, y, z)]
        /// @return The signed xz-plane area of the triangle.

      }, {
        key: "triArea2D4",
        value: function triArea2D4(verts, a, b, c) {
          abx = verts[b] - verts[a];
          abz = verts[b + 2] - verts[a + 2];
          acx = verts[c] - verts[a];
          acz = verts[c + 2] - verts[a + 2];
          return acx * abz - abx * acz;
        }
      }, {
        key: "triArea2D3",
        value: function triArea2D3(a, b, c) {
          var abx = b[0] - a[0];
          var abz = b[2] - a[2];
          var acx = c[0] - a[0];
          var acz = c[2] - a[2];
          return acx * abz - abx * acz;
        } /// Determines if two axis-aligned bounding boxes overlap.
        /// @param[_in] amin Minimum bounds of box A. [(x, y, z)]
        /// @param[_in] amax Maximum bounds of box A. [(x, y, z)]
        /// @param[_in] bmin Minimum bounds of box B. [(x, y, z)]
        /// @param[_in] bmax Maximum bounds of box B. [(x, y, z)]
        /// @return True if the two AABB's overlap.
        /// @see dtOverlapBounds

      }, {
        key: "overlapQuantBounds",
        value: function overlapQuantBounds(amin, amax, bmin, bmax) {
          var overlap = true;
          overlap = amin[0] > bmax[0] || amax[0] < bmin[0] ? false : overlap;
          overlap = amin[1] > bmax[1] || amax[1] < bmin[1] ? false : overlap;
          overlap = amin[2] > bmax[2] || amax[2] < bmin[2] ? false : overlap;
          return overlap;
        } /// Determines if two axis-aligned bounding boxes overlap.
        /// @param[_in] amin Minimum bounds of box A. [(x, y, z)]
        /// @param[_in] amax Maximum bounds of box A. [(x, y, z)]
        /// @param[_in] bmin Minimum bounds of box B. [(x, y, z)]
        /// @param[_in] bmax Maximum bounds of box B. [(x, y, z)]
        /// @return True if the two AABB's overlap.
        /// @see dtOverlapQuantBounds
        // static overlapBounds(amin, amax, bmin, bmax) {
        // 	let overlap = true;
        // 	overlap = (amin[0] > bmax[0] || amax[0] < bmin[0]) ? false : overlap;
        // 	overlap = (amin[1] > bmax[1] || amax[1] < bmin[1]) ? false : overlap;
        // 	overlap = (amin[2] > bmax[2] || amax[2] < bmin[2]) ? false : overlap;
        // 	return overlap;
        // }

      }, {
        key: "distancePtSegSqr2D3",
        value: function distancePtSegSqr2D3(pt, p, q) {
          var pqx = q[0] - p[0];
          var pqz = q[2] - p[2];
          var dx = pt[0] - p[0];
          var dz = pt[2] - p[2];
          var d = pqx * pqx + pqz * pqz;
          var t = pqx * dx + pqz * dz;
          if (d > 0) t /= d;
          if (t < 0) t = 0;else if (t > 1) t = 1;
          dx = p[0] + t * pqx - pt[0];
          dz = p[2] + t * pqz - pt[2];
          return [dx * dx + dz * dz, t];
        }
      }, {
        key: "closestHeightPointTriangle",
        value: function closestHeightPointTriangle(p, a, b, c) {
          var v0 = DetourCommon.vSub(c, a);
          var v1 = DetourCommon.vSub(b, a);
          var v2 = DetourCommon.vSub(p, a);
          var dot00 = DetourCommon.vDot2D(v0, v0);
          var dot01 = DetourCommon.vDot2D(v0, v1);
          var dot02 = DetourCommon.vDot2D(v0, v2);
          var dot11 = DetourCommon.vDot2D(v1, v1);
          var dot12 = DetourCommon.vDot2D(v1, v2); // Compute barycentric coordinates

          var invDenom = 1.0 / (dot00 * dot11 - dot01 * dot01);
          var u = (dot11 * dot02 - dot01 * dot12) * invDenom;
          var v = (dot00 * dot12 - dot01 * dot02) * invDenom; // The (sloppy) epsilon is needed to allow to get height of points which
          // are interpolated aPoly the edges of the triangles.
          // If point lies inside the triangle, return interpolated ycoord.

          if (u >= -DetourCommon.EPS && v >= -DetourCommon.EPS && u + v <= 1 + DetourCommon.EPS) {
            var h = a[1] + v0[1] * u + v1[1] * v;
            return [true, h];
          }

          return [false, null];
        } /// @par
        ///
        /// All points are projected onto the xz-plane, so the y-values are ignored.

      }, {
        key: "pointInPolygon",
        value: function pointInPolygon(pt, verts, nverts) {
          var c = false;

          for (var _i = 0, _j = nverts - 1; _i < nverts; _j = _i++) {
            var vi = _i * 3;
            var vj = _j * 3;
            if (verts[vi + 2] > pt[2] != verts[vj + 2] > pt[2] && pt[0] < (verts[vj + 0] - verts[vi + 0]) * (pt[2] - verts[vi + 2]) / (verts[vj + 2] - verts[vi + 2]) + verts[vi + 0]) c = !c;
          }

          return c;
        }
      }, {
        key: "distancePtPolyEdgesSqr",
        value: function distancePtPolyEdgesSqr(pt, verts, nverts, ed, et) {
          var c = false;

          for (var _i2 = 0, _j2 = nverts - 1; _i2 < nverts; _j2 = _i2++) {
            var vi = _i2 * 3;
            var vj = _j2 * 3;
            if (verts[vi + 2] > pt[2] != verts[vj + 2] > pt[2] && pt[0] < (verts[vj + 0] - verts[vi + 0]) * (pt[2] - verts[vi + 2]) / (verts[vj + 2] - verts[vi + 2]) + verts[vi + 0]) c = !c;
            var edet = DetourCommon.distancePtSegSqr2D4(pt, verts, vj, vi);
            ed[_j2] = edet[0];
            et[_j2] = edet[1];
          }

          return c;
        }
      }, {
        key: "projectPoly",
        value: function projectPoly(axis, poly, npoly) {
          var rmin;
          var rmax;
          rmin = rmax = DetourCommon.vDot2D(axis, poly, 0);

          for (var i = 1; i < npoly; ++i) {
            var _d = DetourCommon.vDot2D(axis, poly, i * 3);

            rmin = Math.min(rmin, _d);
            rmax = Math.max(rmax, _d);
          }

          return [rmin, rmax];
        }
      }, {
        key: "overlapRange",
        value: function overlapRange(amin, amax, bmin, bmax, eps) {
          return amin + eps > bmax || amax - eps < bmin ? false : true;
        }
      }, {
        key: "overlapPolyPoly2D",
        /// @par
        ///
        /// All vertices are projected onto the xz-plane, so the y-values are ignored.
        value: function overlapPolyPoly2D(polya, npolya, polyb, npolyb) {
          for (var i = 0, j = npolya - 1; i < npolya; j = i++) {
            var va = j * 3;
            var vb = i * 3;
            var n = [polya[vb + 2] - polya[va + 2], 0, -(polya[vb + 0] - polya[va + 0])];
            var aminmax = DetourCommon.projectPoly(n, polya, npolya);
            var bminmax = DetourCommon.projectPoly(n, polyb, npolyb);

            if (!DetourCommon.overlapRange(aminmax[0], aminmax[1], bminmax[0], bminmax[1], DetourCommon.eps)) {
              // Found separating axis
              return false;
            }
          }

          for (var _i3 = 0, _j3 = npolyb - 1; _i3 < npolyb; _j3 = _i3++) {
            var _va = _j3 * 3;

            var _vb = _i3 * 3;

            var _n = [polyb[_vb + 2] - polyb[_va + 2], 0, -(polyb[_vb + 0] - polyb[_va + 0])];

            var _aminmax = DetourCommon.projectPoly(_n, polya, npolya);

            var _bminmax = DetourCommon.projectPoly(_n, polyb, npolyb);

            if (!DetourCommon.overlapRange(_aminmax[0], _aminmax[1], _bminmax[0], _bminmax[1], DetourCommon.eps)) {
              // Found separating axis
              return false;
            }
          }

          return true;
        } // Returns a random poPoly _in a convex polygon.
        // Adapted from Graphics Gems article.

      }, {
        key: "randomPointInConvexPoly",
        value: function randomPointInConvexPoly(pts, npts, areas, s, t) {
          // Calc triangle araes
          areasum = 0.0;

          for (var i = 2; i < npts; i++) {
            areas[i] = DetourCommon.triArea2D4(pts, 0, (i - 1) * 3, i * 3);
            areasum += Math.max(0.001, areas[i]);
          } // Find sub triangle weighted by area.


          thr = s * areasum;
          acc = 0.0;
          u = 1.0;
          var tri = npts - 1;

          for (var _i4 = 2; _i4 < npts; _i4++) {
            dacc = areas[_i4];

            if (thr >= acc && thr < acc + dacc) {
              u = (thr - acc) / dacc;
              tri = _i4;
              break;
            }

            acc += dacc;
          }

          v = Math.sqrt(t);
          a = 1 - v;
          b = (1 - u) * v;
          c = u * v;
          var pa = 0;
          var pb = (tri - 1) * 3;
          var pc = tri * 3;
          return [a * pts[pa] + b * pts[pb] + c * pts[pc], a * pts[pa + 1] + b * pts[pb + 1] + c * pts[pc + 1], a * pts[pa + 2] + b * pts[pb + 2] + c * pts[pc + 2]];
        }
      }, {
        key: "nextPow2",
        value: function nextPow2(v) {
          v--;
          v |= v >> 1;
          v |= v >> 2;
          v |= v >> 4;
          v |= v >> 8;
          v |= v >> 16;
          v++;
          return v;
        }
      }, {
        key: "ilog2",
        value: function ilog2(v) {
          var r;
          var shift;
          r = (v > 0xffff ? 1 : 0) << 4;
          v >>= r;
          shift = (v > 0xff ? 1 : 0) << 3;
          v >>= shift;
          r |= shift;
          shift = (v > 0xf ? 1 : 0) << 2;
          v >>= shift;
          r |= shift;
          shift = (v > 0x3 ? 1 : 0) << 1;
          v >>= shift;
          r |= shift;
          r |= v >> 1;
          return r;
        }
      }, {
        key: "intersectSegmentPoly2D",
        value: function intersectSegmentPoly2D(p0, p1, verts, nverts) {
          var result = new IntersectResult();
          var EPS = 0.00000001;
          var dir = DetourCommon.vSub(p1, p0);
          var p0v = new VectorPtr$1(p0);

          for (var i = 0, j = nverts - 1; i < nverts; j = i++) {
            var vpj = new VectorPtr$1(verts, j * 3);
            var edge = DetourCommon.vSub(new VectorPtr$1(verts, i * 3), vpj);
            var diff = DetourCommon.vSub(p0v, vpj);
            var n = DetourCommon.vPerp2D(edge, diff);

            var _d2 = DetourCommon.vPerp2D(dir, edge);

            if (Math.abs(_d2) < EPS) {
              // S is nearly parallel to this edge
              if (n < 0) return result;else continue;
            }

            var _t = n / _d2;

            if (_d2 < 0) {
              // segment S is entering across this edge
              if (_t > result.tmin) {
                result.tmin = _t;
                result.segMin = j; // S enters after leaving polygon

                if (result.tmin > result.tmax) return result;
              }
            } else {
              // segment S is leaving across this edge
              if (_t < result.tmax) {
                result.tmax = _t;
                result.segMax = j; // S leaves before entering polygon

                if (result.tmax < result.tmin) return result;
              }
            }
          }

          result.intersects = true;
          return result;
        }
      }, {
        key: "distancePtSegSqr2D4",
        value: function distancePtSegSqr2D4(pt, verts, p, q) {
          var pqx = verts[q + 0] - verts[p + 0];
          var pqz = verts[q + 2] - verts[p + 2];
          var dx = pt[0] - verts[p + 0];
          var dz = pt[2] - verts[p + 2];
          var d = pqx * pqx + pqz * pqz;
          var t = pqx * dx + pqz * dz;
          if (d > 0) t /= d;
          if (t < 0) t = 0;else if (t > 1) t = 1;
          dx = verts[p + 0] + t * pqx - pt[0];
          dz = verts[p + 2] + t * pqz - pt[2];
          return [dx * dx + dz * dz, t];
        }
      }, {
        key: "oppositeTile",
        value: function oppositeTile(side) {
          return side + 4 & 0x7;
        }
      }, {
        key: "vperpXZ",
        value: function vperpXZ(a, b) {
          return a[0] * b[2] - a[2] * b[0];
        }
      }, {
        key: "intersectSegSeg2D",
        value: function intersectSegSeg2D(ap, aq, bp, bq) {
          var u = DetourCommon.vSub(aq, ap);
          var v = DetourCommon.vSub(bq, bp);
          var w = DetourCommon.vSub(ap, bp);
          d = DetourCommon.vperpXZ(u, v);
          if (Math.abs(d) < 1e-6) return [false, 0, 0];
          s = DetourCommon.vperpXZ(v, w) / d;
          t = DetourCommon.vperpXZ(u, w) / d;
          return [true, s, t];
        }
      }, {
        key: "vScale",
        value: function vScale(_in, scale) {
          var out = new Array(3);
          out[0] = _in[0] * scale;
          out[1] = _in[1] * scale;
          out[2] = _in[2] * scale;
          return out;
        }
      }]);

      return DetourCommon;
    }();

    _defineProperty(DetourCommon, "EPS", 1e-4);

    _defineProperty(DetourCommon, "thr", DetourCommon.sqr(1.0 / 16384.0));

    _defineProperty(DetourCommon, "eps", 1e-4);

    /**
     * Defines a navigation mesh tile.
     */

    var MeshTile =
    /** Counter describing modifications to the tile. */

    /** The tile data. */

    /** The tile links. */

    /** Index to the next free link. */

    /** Tile flags. (See: #dtTileFlags) */

    /** The next free tile, or the next tile in the spatial grid. */
    function MeshTile(index) {
      _classCallCheck(this, MeshTile);

      _defineProperty(this, "index", 0);

      _defineProperty(this, "salt", 0);

      _defineProperty(this, "data", null);

      _defineProperty(this, "links", []);

      _defineProperty(this, "linksFreeList", NavMesh.DT_NULL_LINK);

      _defineProperty(this, "flags", 0);

      _defineProperty(this, "next", null);

      this.index = index;
    };

    /** Defines a polyogn within a dtPoly object. */

    var Poly = /*#__PURE__*/function () {
      /** The polygon is a standard convex polygon that is part of the surface of the mesh. */

      /** The polygon is an off-mesh connection consisting of two vertices. */

      /** Index to first link in linked list. (Or #DT_NULL_LINK if there is no link.) */

      /** The indices of the polygon's vertices. The actual vertices are located in MeshTile::verts. */

      /** Packed data representing neighbor polygons references and flags for each edge. */

      /** The user defined polygon flags. */

      /** The number of vertices in the polygon. */

      /**
       * The bit packed area id and polygon type.
       * 
       * @note Use the structure's set and get methods to access this value.
       */
      function Poly(index, maxVertsPerPoly) {
        _classCallCheck(this, Poly);

        _defineProperty(this, "index", void 0);

        _defineProperty(this, "firstLink", 0);

        _defineProperty(this, "verts", []);

        _defineProperty(this, "neis", []);

        _defineProperty(this, "flags", 0);

        _defineProperty(this, "vertCount", 0);

        _defineProperty(this, "areaAndtype", void 0);

        this.index = index;
        this.firstLink = NavMesh.DT_NULL_LINK;
        this.verts = new Array(maxVertsPerPoly);
        this.neis = new Array(maxVertsPerPoly);

        for (var i = 0; i < this.verts.length; i++) {
          this.verts[i] = 0;
        }

        for (var _i = 0; _i < this.neis.length; _i++) {
          this.neis[_i] = 0;
        }
      }

      _createClass(Poly, [{
        key: "and",
        value: function and(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 & hi2;
          var l = low1 & low2;
          return h * hi + l;
        }
      }, {
        key: "or",
        value: function or(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 | hi2;
          var l = low1 | low2;
          return h * hi + l;
        }
        /** Sets the user defined area id. [Limit: < #DT_MAX_AREAS] */

      }, {
        key: "setArea",
        value: function setArea(a) {
          this.areaAndtype = this.or(this.and(this.areaAndtype, 0xc0), this.and(a, 0x3f));
        }
        /** Sets the polygon type. (See: #dtPolyTypes.) */

      }, {
        key: "setType",
        value: function setType(t) {
          this.areaAndtype = this.or(this.and(this.areaAndtype, 0x3f) | t << 6);
        }
        /** Gets the user defined area id. */

      }, {
        key: "getArea",
        value: function getArea() {
          return this.areaAndtype & 0x3;
        }
        /** Gets the polygon type. (See: #dtPolyTypes) */

      }, {
        key: "getType",
        value: function getType() {
          return this.areaAndtype >> 6;
        }
      }]);

      return Poly;
    }();

    _defineProperty(Poly, "DT_POLYTYPE_GROUND", 0);

    _defineProperty(Poly, "DT_POLYTYPE_OFFMESH_CONNECTION", 1);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**
     * Defines a link between polygons.
     * 
     * @note This structure is rarely if ever used by the end user.
     * @see MeshTile
     */
    var Link = function Link() {
      _classCallCheck(this, Link);

      _defineProperty(this, "ref", 0);

      _defineProperty(this, "next", 0);

      _defineProperty(this, "edge", 0);

      _defineProperty(this, "side", 0);

      _defineProperty(this, "bmin", 0);

      _defineProperty(this, "bmax", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var ClosestPointOnPolyResult = /*#__PURE__*/function () {
      function ClosestPointOnPolyResult(posOverPoly, closest) {
        _classCallCheck(this, ClosestPointOnPolyResult);

        _defineProperty(this, "posOverPoly", false);

        _defineProperty(this, "closest", []);

        this.posOverPoly = posOverPoly;
        this.closest = closest;
      }
      /** Returns true if the position is over the polygon. */


      _createClass(ClosestPointOnPolyResult, [{
        key: "isPosOverPoly",
        value: function isPosOverPoly() {
          return this.posOverPoly;
        }
        /** Returns the closest poPoly on the polygon. [(x, y, z)] */

      }, {
        key: "getClosest",
        value: function getClosest() {
          return this.closest;
        }
      }]);

      return ClosestPointOnPolyResult;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var FindNearestPolyResult = /*#__PURE__*/function () {
      function FindNearestPolyResult(nearestRef, nearestPos) {
        _classCallCheck(this, FindNearestPolyResult);

        _defineProperty(this, "nearestRef", 0);

        _defineProperty(this, "nearestPos", []);

        this.nearestRef = nearestRef;
        this.nearestPos = nearestPos;
      }
      /** Returns the reference id of the nearest polygon. */


      _createClass(FindNearestPolyResult, [{
        key: "getNearestRef",
        value: function getNearestRef() {
          return this.nearestRef;
        }
        /** Returns the nearest poPoly on the polygon. [opt] [(x, y, z)] */

      }, {
        key: "getNearestPos",
        value: function getNearestPos() {
          return this.nearestPos;
        }
      }]);

      return FindNearestPolyResult;
    }();

    function arraycopy(one, oneStart, two, twoStart, len) {
      for (var i = 0; i < len; i++) {
        two[twoStart + i] = one[oneStart + i];
      }
    }

    var NavMesh = /*#__PURE__*/function () {
      _createClass(NavMesh, [{
        key: "getMaxTiles",
        /// A flag that indicates that an entity links to an external entity.
        /// (E.g. A polygon edge is a portal that links to another polygon.)
        /// A value that indicates the entity does not link to anything.
        // static DT_NULL_LINK = 0xffffffff;
        /// A flag that indicates that an off-mesh connection can be traversed in
        /// both directions. (Is bidirectional.)
        /// The maximum number of user defined area ids.
        /// Limit raycasting during any angle pahfinding
        /// The limit is given as a multiple of the character radius
        /// < Current initialization params. TODO: do not store this info twice.
        /// < Origin of the tile (0,0)
        //  m_orig[3]; ///< Origin of the tile (0,0)
        /// < Dimensions of each tile.
        /// < Max number of tiles.
        /// < Tile hash lookup size (must be pot).
        /// < Tile hash lookup mask.
        /// < Tile hash lookup.
        /// < Freelist of tiles.
        /// < List of tiles.

        /** The maximum number of vertices per navigation polygon. */

        /**
         * The maximum number of tiles supported by the navigation mesh.
         * 
         * @return The maximum number of tiles supported by the navigation mesh.
         */
        value: function getMaxTiles() {
          return this.m_maxTiles;
        }
        /**
         * Returns tile in the tile array.
         */

      }, {
        key: "getTile",
        value: function getTile(i) {
          return this.m_tiles[i];
        }
        /**
         * Gets the polygon reference for the tile's base polygon.
         * 
         * @param tile
         *            The tile.
         * @return The polygon reference for the base polygon in the specified tile.
         */

      }, {
        key: "getPolyRefBase",
        value: function getPolyRefBase(tile) {
          if (tile == null) return 0;
          var it = tile.index;
          return NavMesh.encodePolyId(tile.salt, it, 0);
        }
        /**
         * Derives a standard polygon reference.
         * 
         * @note This function is generally meant for internal use only.
         * @param salt
         *            The tile's salt value.
         * @param it
         *            The index of the tile.
         * @param ip
         *            The index of the polygon within the tile.
         * @return encoded polygon reference
         */
        //https://stackoverflow.com/a/337572/10047920

      }, {
        key: "allocLink",
        value: function allocLink(tile) {
          if (tile.linksFreeList == NavMesh.DT_NULL_LINK) {
            var _link = new Link();

            _link.next = NavMesh.DT_NULL_LINK;
            tile.links.push(_link);
            return tile.links.length - 1;
          }

          var link = tile.linksFreeList;
          tile.linksFreeList = tile.links[link].next;
          return link;
        }
      }, {
        key: "freeLink",
        value: function freeLink(tile, link) {
          tile.links[link].next = tile.linksFreeList;
          tile.linksFreeList = link;
        }
        /**
         * Calculates the tile grid location for the specified world position.
         * 
         * @param pos
         *            The world position for the query. [(x, y, z)]
         * @return 2-element let array with (tx,ty) tile location
         */

      }, {
        key: "calcTileLoc",
        value: function calcTileLoc(pos) {
          var tx = Math.floor((pos[0] - this.m_orig[0]) / this.m_tileWidth);
          var ty = Math.floor((pos[2] - this.m_orig[2]) / this.m_tileHeight);
          return [tx, ty];
        }
      }, {
        key: "getTileAndPolyByRef",
        value: function getTileAndPolyByRef(ref) {
          if (ref == 0) {
            throw new IllegalArgumentException("ref = 0");
          }

          var saltitip = NavMesh.decodePolyId(ref);
          var salt = saltitip[0];
          var it = saltitip[1];
          var ip = saltitip[2];
          if (it >= this.m_maxTiles) throw new IllegalArgumentException("tile > m_maxTiles");
          if (this.m_tiles[it].salt != salt || this.m_tiles[it].data.header == null) throw new IllegalArgumentException("Invalid salt or header");
          if (ip >= this.m_tiles[it].data.header.polyCount) throw new IllegalArgumentException("poly > polyCount");
          return [this.m_tiles[it], this.m_tiles[it].data.polys[ip]];
        } /// @par
        ///
        /// @warning Only use this function if it is known that the provided polygon
        /// reference is valid. This function is faster than #getTileAndPolyByRef,
        /// but
        /// it does not validate the reference.

      }, {
        key: "getTileAndPolyByRefUnsafe",
        value: function getTileAndPolyByRefUnsafe(ref) {
          var saltitip = NavMesh.decodePolyId(ref);
          var it = saltitip[1];
          var ip = saltitip[2];
          return [this.m_tiles[it], this.m_tiles[it].data.polys[ip]];
        }
      }, {
        key: "isValidPolyRef",
        value: function isValidPolyRef(ref) {
          if (ref == 0) return false;
          var saltitip = NavMesh.decodePolyId(ref);
          var salt = saltitip[0];
          var it = saltitip[1];
          var ip = saltitip[2];
          if (it >= this.m_maxTiles) return false;
          if (this.m_tiles[it].salt != salt || this.m_tiles[it].data == null) return false;
          if (ip >= this.m_tiles[it].data.header.polyCount) return false;
          return true;
        }
      }, {
        key: "getParams",
        value: function getParams() {
          return this.m_params;
        }
      }], [{
        key: "lshift",
        value: function lshift(num, bits) {
          return num * Math.pow(2, bits);
        }
      }, {
        key: "rshift",
        value: function rshift(num, bits) {
          return Math.floor(num / Math.pow(2, bits));
        } //https://stackoverflow.com/a/43666199/10047920

      }, {
        key: "and",
        value: function and(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 & hi2;
          var l = low1 & low2;
          return h * hi + l;
        }
      }, {
        key: "or",
        value: function or(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 | hi2;
          var l = low1 | low2;
          return h * hi + l;
        }
      }, {
        key: "encodePolyId",
        value: function encodePolyId(salt, it, ip) {
          var a = NavMesh.lshift(salt, NavMesh.DT_POLY_BITS + NavMesh.DT_TILE_BITS);
          var b = NavMesh.lshift(it, NavMesh.DT_POLY_BITS);
          return NavMesh.or(NavMesh.or(a, b), ip);
        } /// Decodes a standard polygon reference.
        /// @note This function is generally meant for internal use only.
        /// @param[in] ref The polygon reference to decode.
        /// @param[out] salt The tile's salt value.
        /// @param[out] it The index of the tile.
        /// @param[out] ip The index of the polygon within the tile.
        /// @see #encodePolyId

      }, {
        key: "decodePolyId",
        value: function decodePolyId(ref) {
          var salt;
          var it;
          var ip;
          var saltMask = NavMesh.lshift(1, NavMesh.DT_SALT_BITS) - 1;
          var tileMask = NavMesh.lshift(1, NavMesh.DT_TILE_BITS) - 1;
          var polyMask = NavMesh.lshift(1, NavMesh.DT_POLY_BITS) - 1;
          salt = Math.floor(NavMesh.and(NavMesh.rshift(ref, NavMesh.DT_POLY_BITS + NavMesh.DT_TILE_BITS), saltMask));
          it = Math.floor(NavMesh.and(NavMesh.rshift(ref, NavMesh.DT_POLY_BITS), tileMask));
          ip = Math.floor(NavMesh.and(ref, polyMask));
          return [salt, it, ip];
        } /// Extracts a tile's salt value from the specified polygon reference.
        /// @note This function is generally meant for internal use only.
        /// @param[in] ref The polygon reference.
        /// @see #encodePolyId

      }, {
        key: "decodePolyIdSalt",
        value: function decodePolyIdSalt(ref) {
          var saltMask = (1 << NavMesh.DT_SALT_BITS) - 1;
          return Math.floor(ref >> NavMesh.DT_POLY_BITS + NavMesh.DT_TILE_BITS & saltMask);
        } /// Extracts the tile's index from the specified polygon reference.
        /// @note This function is generally meant for internal use only.
        /// @param[in] ref The polygon reference.
        /// @see #encodePolyId

      }, {
        key: "decodePolyIdTile",
        value: function decodePolyIdTile(ref) {
          var tileMask = (1 << NavMesh.DT_TILE_BITS) - 1;
          return Math.floor(ref >> NavMesh.DT_POLY_BITS & tileMask);
        } /// Extracts the polygon's index (within its tile) from the specified
        /// polygon reference.
        /// @note This function is generally meant for internal use only.
        /// @param[in] ref The polygon reference.
        /// @see #encodePolyId

      }, {
        key: "decodePolyIdPoly",
        value: function decodePolyIdPoly(ref) {
          var polyMask = (1 << NavMesh.DT_POLY_BITS) - 1;
          return Math.floor(ref & polyMask);
        }
      }]);

      function NavMesh(one, maxVertsPerPoly, flags) {
        _classCallCheck(this, NavMesh);

        _defineProperty(this, "m_params", null);

        _defineProperty(this, "m_orig", []);

        _defineProperty(this, "m_tileWidth", 0);

        _defineProperty(this, "m_tileHeight", 0);

        _defineProperty(this, "m_maxTiles", 0);

        _defineProperty(this, "m_tileLutSize", 0);

        _defineProperty(this, "m_tileLutMask", 0);

        _defineProperty(this, "m_posLookup", []);

        _defineProperty(this, "m_nextFree", null);

        _defineProperty(this, "m_tiles", []);

        _defineProperty(this, "m_maxVertPerPoly", 0);

        _defineProperty(this, "m_tileCount", 0);

        if (flags || flags == 0) {
          this._constructor(NavMesh.getNavMeshParams(one), maxVertsPerPoly);

          this.addTile(one, flags, 0);
        } else {
          this._constructor(one, maxVertsPerPoly);
        }
      }

      _createClass(NavMesh, [{
        key: "_constructor",
        value: function _constructor(params, maxVertsPerPoly) {
          this.m_params = params;
          this.m_orig = params.orig;
          this.m_tileWidth = params.tileWidth;
          this.m_tileHeight = params.tileHeight; // Init tiles

          this.m_maxTiles = params.maxTiles;
          this.m_maxVertPerPoly = maxVertsPerPoly;
          var lutsize = DetourCommon.nextPow2(params.maxTiles / 4);
          if (lutsize == 0) lutsize = 1;
          this.m_tileLutSize = lutsize;
          this.m_tileLutMask = this.m_tileLutSize - 1;
          this.m_tiles = new Array(this.m_maxTiles);
          this.m_posLookup = new Array(this.m_tileLutSize);
          this.m_nextFree = null;

          for (var i = this.m_maxTiles - 1; i >= 0; --i) {
            this.m_tiles[i] = new MeshTile(i);
            this.m_tiles[i].salt = 1;
            this.m_tiles[i].next = this.m_nextFree;
            this.m_nextFree = this.m_tiles[i];
          }
        }
      }, {
        key: "queryPolygonsInTile",
        // TODO: These methods are duplicates from dtNavMeshQuery, but are needed
        // for off-mesh connection finding.
        value: function queryPolygonsInTile(tile, qmin, qmax) {
          var polys = [];

          if (tile.data.bvTree != null) {
            var nodeIndex = 0;
            var tbmin = tile.data.header.bmin;
            var tbmax = tile.data.header.bmax;
            var qfac = tile.data.header.bvQuantFactor; // Calculate quantized box

            var _bmin = new Array(3);

            var _bmax = new Array(3); // dtClamp query box to world box.


            var _minx = DetourCommon.clamp(qmin[0], tbmin[0], tbmax[0]) - tbmin[0];

            var miny = DetourCommon.clamp(qmin[1], tbmin[1], tbmax[1]) - tbmin[1];
            var minz = DetourCommon.clamp(qmin[2], tbmin[2], tbmax[2]) - tbmin[2];

            var _maxx = DetourCommon.clamp(qmax[0], tbmin[0], tbmax[0]) - tbmin[0];

            var maxy = DetourCommon.clamp(qmax[1], tbmin[1], tbmax[1]) - tbmin[1];
            var maxz = DetourCommon.clamp(qmax[2], tbmin[2], tbmax[2]) - tbmin[2]; // Quantize

            _bmin[0] = NavMesh.and(Math.floor(qfac * _minx), 0xfffe);
            _bmin[1] = NavMesh.and(Math.floor(qfac * miny), 0xfffe);
            _bmin[2] = NavMesh.and(Math.floor(qfac * minz), 0xfffe);
            _bmax[0] = NavMesh.or(Math.floor(qfac * _maxx + 1), 1);
            _bmax[1] = NavMesh.or(Math.floor(qfac * maxy + 1), 1);
            _bmax[2] = NavMesh.or(Math.floor(qfac * maxz + 1), 1); // Traverse tree

            var base = this.getPolyRefBase(tile);
            var end = tile.data.header.bvNodeCount;

            while (nodeIndex < end) {
              var node = tile.data.bvTree[nodeIndex];
              var overlap = DetourCommon.overlapQuantBounds(_bmin, _bmax, node.bmin, node.bmax);
              var isLeafNode = node.i >= 0;

              if (isLeafNode && overlap) {
                polys.push(NavMesh.or(base, node.i));
              }

              if (overlap || isLeafNode) nodeIndex++;else {
                var escapeIndex = -node.i;
                nodeIndex += escapeIndex;
              }
            }

            return polys;
          } else {
            bmin = [null, null, null];
            bmax = [null, null, null];

            var _base = this.getPolyRefBase(tile);

            for (var i = 0; i < tile.data.header.polyCount; ++i) {
              var p = tile.data.polys[i]; // Do not return off-mesh connection polygons.

              if (p.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) continue; // Calc polygon bounds.

              var v = p.verts[0] * 3;
              DetourCommon.vCopy(bmin, tile.data.verts, v);
              DetourCommon.vCopy(bmax, tile.data.verts, v);

              for (var j = 1; j < p.vertCount; ++j) {
                v = p.verts[j] * 3;
                DetourCommon.vMin(bmin, tile.data.verts, v);
                DetourCommon.vMax(bmax, tile.data.verts, v);
              }

              if (overlapBounds(qmin, qmax, bmin, bmax)) {
                polys.push(NavMesh.or(_base, i));
              }
            }

            return polys;
          }
        } /// Adds a tile to the navigation mesh.
        /// @param[in] data Data for the new tile mesh. (See: #dtCreateNavMeshData)
        /// @param[in] dataSize Data size of the new tile mesh.
        /// @param[in] flags Tile flags. (See: #dtTileFlags)
        /// @param[in] lastRef The desired reference for the tile. (When reloading a
        /// tile.) [opt] [Default: 0]
        /// @param[out] result The tile reference. (If the tile was succesfully
        /// added.) [opt]
        /// @return The status flags for the operation.
        /// @par
        ///
        /// The add operation will fail if the data is in the wrong format, the
        /// allocated tile
        /// space is full, or there is a tile already at the specified reference.
        ///
        /// The lastRef parameter is used to restore a tile with the same tile
        /// reference it had previously used. In this case the #dtPolyRef's for the
        /// tile will be restored to the same values they were before the tile was
        /// removed.
        ///
        /// The nav mesh assumes exclusive access to the data passed and will make
        /// changes to the dynamic portion of the data. For that reason the data
        /// should not be reused in other nav meshes until the tile has been successfully
        /// removed from this nav mesh.
        ///
        /// @see dtCreateNavMeshData, #removeTile

      }, {
        key: "addTile",
        value: function addTile(data, flags, lastRef) {
          // Make sure the data is in right format.
          var header = data.header; // Make sure the location is free.

          if (this.getTileAt(header.x, header.y, header.layer) != null) throw new RuntimeException("Tile already exists"); // Allocate a tile.

          var tile = null;

          if (lastRef == 0) {
            if (this.m_nextFree != null) {
              tile = this.m_nextFree;
              this.m_nextFree = tile.next;
              tile.next = null;
              this.m_tileCount++;
            }
          } else {
            // Try to relocate the tile to specific index with same salt.
            var tileIndex = decodePolyIdTile(lastRef);
            if (tileIndex >= this.m_maxTiles) throw new RuntimeException("Tile index too high"); // Try to find the specific tile id from the free list.

            var target = this.m_tiles[tileIndex];
            var prev = null;
            tile = this.m_nextFree;

            while (tile != null && tile != target) {
              prev = tile;
              tile = tile.next;
            } // Could not find the correct location.


            if (tile != target) throw new RuntimeException("Could not find tile"); // Remove from freelist

            if (prev == null) this.m_nextFree = tile.next;else prev.next = tile.next; // Restore salt.

            tile.salt = decodePolyIdSalt(lastRef);
          } // Make sure we could allocate a tile.


          if (tile == null) throw new RuntimeException("Could not allocate a tile");
          tile.data = data;
          tile.flags = flags;
          tile.links = []; // Insert tile into the position lut.

          var h = NavMesh.computeTileHash(header.x, header.y, this.m_tileLutMask);
          tile.next = this.m_posLookup[h];
          this.m_posLookup[h] = tile; // Patch header pointers.
          // If there are no items in the bvtree, reset the tree pointer.

          if (tile.data.bvTree != null && tile.data.bvTree.length == 0) tile.data.bvTree = null; // Init tile.

          this.connectIntLinks(tile); // Base off-mesh connections to their starting polygons and connect connections inside the tile.

          this.baseOffMeshLinks(tile);
          this.connectExtOffMeshLinks(tile, tile, -1); // Connect with layers in current tile.

          var neis = this.getTilesAt(header.x, header.y);

          for (var j = 0; j < neis.length; ++j) {
            if (neis[j] == tile) {
              continue;
            }

            connectExtLinks(tile, neis[j], -1);
            connectExtLinks(neis[j], tile, -1);
            this.connectExtOffMeshLinks(tile, neis[j], -1);
            this.connectExtOffMeshLinks(neis[j], tile, -1);
          } // Connect with neighbour tiles.


          for (var i = 0; i < 8; ++i) {
            neis = this.getNeighbourTilesAt(header.x, header.y, i);

            for (var _j = 0; _j < neis.length; ++_j) {
              connectExtLinks(tile, neis[_j], i);
              connectExtLinks(neis[_j], tile, DetourCommon.oppositeTile(i));
              this.connectExtOffMeshLinks(tile, neis[_j], i);
              this.connectExtOffMeshLinks(neis[_j], tile, DetourCommon.oppositeTile(i));
            }
          }

          return this.getTileRef(tile);
        } /// Removes the specified tile from the navigation mesh.
        /// @param[in] ref The reference of the tile to remove.
        /// @param[out] data Data associated with deleted tile.
        /// @param[out] dataSize Size of the data associated with deleted tile.
        /// @return The status flags for the operation.
        // dtStatus removeTile(dtTileRef ref, char** data, int* dataSize);
        /// @par
        ///
        /// This function returns the data for the tile so that, if desired,
        /// it can be added back to the navigation mesh at a later point.
        ///
        /// @see #addTile

      }, {
        key: "removeTile",
        value: function removeTile(ref) {
          if (ref == 0) {
            return null;
          }

          var tileIndex = decodePolyIdTile(ref);
          var tileSalt = decodePolyIdSalt(ref);
          if (tileIndex >= this.m_maxTiles) throw new RuntimeException("Invalid tile index");
          var tile = this.m_tiles[tileIndex];
          if (tile.salt != tileSalt) throw new RuntimeException("Invalid tile salt"); // Remove tile from hash lookup.

          var h = NavMesh.computeTileHash(tile.data.header.x, tile.data.header.y, this.m_tileLutMask);
          var prev = null;
          var cur = this.m_posLookup[h];

          while (cur != null) {
            if (cur == tile) {
              if (prev != null) prev.next = cur.next;else this.m_posLookup[h] = cur.next;
              break;
            }

            prev = cur;
            cur = cur.next;
          } // Remove connections to neighbour tiles.
          // Create connections with neighbour tiles.
          // Disconnect from other layers in current tile.


          nneis = this.getTilesAt(tile.data.header.x, tile.data.header.y);

          var _iterator = _createForOfIteratorHelper(nneis),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var _j2 = _step.value;
              if (_j2 == tile) continue;
              unconnectLinks(_j2, tile);
            } // Disconnect from neighbour tiles.

          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          for (var i = 0; i < 8; ++i) {
            nneis = this.getNeighbourTilesAt(tile.data.header.x, tile.data.header.y, i);

            var _iterator2 = _createForOfIteratorHelper(nneis),
                _step2;

            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var j = _step2.value;
                unconnectLinks(j, tile);
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }

          var data = tile.data; // Reset tile.

          tile.data = null;
          tile.flags = 0;
          tile.links = []; // Update salt, salt should never be zero.

          tile.salt = tile.salt + 1 & (1 << NavMesh.DT_SALT_BITS) - 1;
          if (tile.salt == 0) tile.salt++; // Add to free list.

          tile.next = this.m_nextFree;
          this.m_nextFree = tile;
          this.m_tileCount--;
          return data;
        } /// Builds internal polygons links for a tile.

      }, {
        key: "connectIntLinks",
        value: function connectIntLinks(tile) {
          if (tile == null) return;
          var base = this.getPolyRefBase(tile);

          for (var i = 0; i < tile.data.header.polyCount; ++i) {
            var poly = tile.data.polys[i];
            poly.firstLink = NavMesh.DT_NULL_LINK;
            if (poly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) continue; // Build edge links backwards so that the links will be
            // in the linked list from lowest index to highest.

            for (var j = poly.vertCount - 1; j >= 0; --j) {
              // Skip hard and non-internal edges.
              if (poly.neis[j] == 0 || (poly.neis[j] & NavMesh.DT_EXT_LINK) != 0) continue;
              var idx = this.allocLink(tile);
              var link = tile.links[idx];
              link.ref = NavMesh.or(base, poly.neis[j] - 1);
              link.edge = j;
              link.side = 0xff;
              link.bmin = link.bmax = 0; // Add to linked list.

              link.next = poly.firstLink;
              poly.firstLink = idx;
            }
          }
        }
      }, {
        key: "unconnectLinks",
        value: function unconnectLinks(tile, target) {
          if (tile == null || target == null) return;
          var targetNum = decodePolyIdTile(this.getTileRef(target));

          for (var i = 0; i < tile.data.header.polyCount; ++i) {
            var poly = tile.data.polys[i];
            var j = poly.firstLink;
            var pj = NavMesh.DT_NULL_LINK;

            while (j != NavMesh.DT_NULL_LINK) {
              if (decodePolyIdTile(tile.links[j].ref) == targetNum) {
                // Remove link.
                var nj = tile.links[j].next;
                if (pj == NavMesh.DT_NULL_LINK) poly.firstLink = nj;else tile.links[pj].next = nj;
                freeLink(tile, j);
                j = nj;
              } else {
                // Advance
                pj = j;
                j = tile.links[j].next;
              }
            }
          }
        }
      }, {
        key: "connectExtLinks",
        value: function connectExtLinks(tile, target, side) {
          if (tile == null) return; // Connect border links.

          for (var i = 0; i < tile.data.header.polyCount; ++i) {
            var poly = tile.data.polys[i]; // Create new links.
            // short m = NavMesh.DT_EXT_LINK | (short)side;

            var nv = poly.vertCount;

            for (var j = 0; j < nv; ++j) {
              // Skip non-portal edges.
              if ((poly.neis[j] & NavMesh.DT_EXT_LINK) == 0) continue;
              var dir = poly.neis[j] & 0xff;
              if (side != -1 && dir != side) continue; // Create new links

              var va = poly.verts[j] * 3;
              var vb = poly.verts[(j + 1) % nv] * 3;
              connectedPolys = findConnectingPolys(tile.data.verts, va, vb, target, DetourCommon.oppositeTile(dir), 4);
              nei = connectedPolys[0];
              neia = connectedPolys[1];
              var nnei = connectedPolys.third;

              for (var k = 0; k < nnei; ++k) {
                var idx = this.allocLink(tile);
                var link = tile.links[idx];
                link.ref = nei[k];
                link.edge = j;
                link.side = dir;
                link.next = poly.firstLink;
                poly.firstLink = idx; // Compress portal limits to a byte value.

                if (dir == 0 || dir == 4) {
                  tmin = (neia[k * 2 + 0] - tile.data.verts[va + 2]) / (tile.data.verts[vb + 2] - tile.data.verts[va + 2]);
                  tmax = (neia[k * 2 + 1] - tile.data.verts[va + 2]) / (tile.data.verts[vb + 2] - tile.data.verts[va + 2]);

                  if (tmin > tmax) {
                    temp = tmin;
                    tmin = tmax;
                    tmax = temp;
                  }

                  link.bmin = Math.floor(DetourCommon.clamp(tmin, 0.0, 1.0) * 255.0);
                  link.bmax = Math.floor(DetourCommon.clamp(tmax, 0.0, 1.0) * 255.0);
                } else if (dir == 2 || dir == 6) {
                  tmin = (neia[k * 2 + 0] - tile.data.verts[va]) / (tile.data.verts[vb] - tile.data.verts[va]);
                  tmax = (neia[k * 2 + 1] - tile.data.verts[va]) / (tile.data.verts[vb] - tile.data.verts[va]);

                  if (tmin > tmax) {
                    temp = tmin;
                    tmin = tmax;
                    tmax = temp;
                  }

                  link.bmin = Math.floor(DetourCommon.clamp(tmin, 0.0, 1.0) * 255.0);
                  link.bmax = Math.floor(DetourCommon.clamp(tmax, 0.0, 1.0) * 255.0);
                }
              }
            }
          }
        }
      }, {
        key: "connectExtOffMeshLinks",
        value: function connectExtOffMeshLinks(tile, target, side) {
          if (tile == null) return; // Connect off-mesh links.
          // We are interested on links which land from target tile to this tile.

          var oppositeSide = side == -1 ? 0xff : DetourCommon.oppositeTile(side);

          for (var i = 0; i < target.data.header.offMeshConCount; ++i) {
            var targetCon = target.data.offMeshCons[i];
            if (targetCon.side != oppositeSide) continue;
            var targetPoly = target.data.polys[targetCon.poly]; // Skip off-mesh connections which start location could not be
            // connected at all.

            if (targetPoly.firstLink == NavMesh.DT_NULL_LINK) continue;
            var ext = [targetCon.rad, target.data.header.walkableClimb, targetCon.rad]; // Find polygon to connect to.

            var p = new Array(3);
            p[0] = targetCon.pos[3];
            p[1] = targetCon.pos[4];
            p[2] = targetCon.pos[5];
            var nearest = this.findNearestPolyInTile(tile, p, ext);
            var ref = nearest.getNearestRef();
            if (ref == 0) continue;
            var nearestPt = nearest.getNearestPos(); // findNearestPoly may return too optimistic results, further check
            // to make sure.

            if (DetourCommon.sqr(nearestPt[0] - p[0]) + DetourCommon.sqr(nearestPt[2] - p[2]) > DetourCommon.sqr(targetCon.rad)) continue; // Make sure the location is on curren mesh.

            target.data.verts[targetPoly.verts[1] * 3] = nearestPt[0];
            target.data.verts[targetPoly.verts[1] * 3 + 1] = nearestPt[1];
            target.data.verts[targetPoly.verts[1] * 3 + 2] = nearestPt[2]; // let off-mesh connection to target poly.

            var idx = this.allocLink(target);
            var link = target.links[idx];
            link.ref = ref;
            link.edge = 1;
            link.side = oppositeSide;
            link.bmin = link.bmax = 0; // Add to linked list.

            link.next = targetPoly.firstLink;
            targetPoly.firstLink = idx; // let target poly to off-mesh connection.

            if ((targetCon.flags & NavMesh.DT_OFFMESH_CON_BIDIR) != 0) {
              var tidx = this.allocLink(tile);
              var landPolyIdx = NavMesh.decodePolyIdPoly(ref);
              var landPoly = tile.data.polys[landPolyIdx];
              link = tile.links[tidx];
              link.ref = NavMesh.or(this.getPolyRefBase(target), targetCon.poly);
              link.edge = 0xff;
              link.side = side == -1 ? 0xff : side;
              link.bmin = link.bmax = 0; // Add to linked list.

              link.next = landPoly.firstLink;
              landPoly.firstLink = tidx;
            }
          }
        }
      }, {
        key: "findConnectingPolys",
        value: function findConnectingPolys(verts, va, vb, tile, side, maxcon) {
          if (tile == null) return [null, null, 0];
          var con = new Array(maxcon);
          var conarea = new Array(maxcon * 2);
          var amin = new Array(2);
          var amax = new Array(2);
          calcSlabEndPoints(verts, va, vb, amin, amax, side);
          apos = getSlabCoord(verts, va, side); // Remove links pointing to 'side' and compact the links array.

          var bmin = new Array(2);
          var bmax = new Array(2);
          var m = NavMesh.or(NavMesh.DT_EXT_LINK, side);
          var n = 0;
          var base = this.getPolyRefBase(tile);

          for (var i = 0; i < tile.data.header.polyCount; ++i) {
            var poly = tile.data.polys[i];
            var nv = poly.vertCount;

            for (var j = 0; j < nv; ++j) {
              // Skip edges which do not poPoly to the right side.
              if (poly.neis[j] != m) continue;
              var vc = poly.verts[j] * 3;
              var vd = poly.verts[(j + 1) % nv] * 3;
              bpos = getSlabCoord(tile.data.verts, vc, side); // Segments are not close enough.

              if (Math.abs(apos - bpos) > 0.01) continue; // Check if the segments touch.

              calcSlabEndPoints(tile.data.verts, vc, vd, bmin, bmax, side);
              if (!overlapSlabs(amin, amax, bmin, bmax, 0.01, tile.data.header.walkableClimb)) continue; // Add return value.

              if (n < maxcon) {
                conarea[n * 2 + 0] = Math.max(amin[0], bmin[0]);
                conarea[n * 2 + 1] = Math.min(amax[0], bmax[0]);
                con[n] = NavMesh.or(base, i);
                n++;
              }

              break;
            }
          }

          return [con, conarea, n];
        }
      }, {
        key: "overlapSlabs",
        value: function overlapSlabs(amin, amax, bmin, bmax, px, py) {
          // Check for horizontal overlap.
          // The segment is shrunken a little so that slabs which touch
          // at end points are not connected.
          minx = Math.max(amin[0] + px, bmin[0] + px);
          maxx = Math.min(amax[0] - px, bmax[0] - px);
          if (minx > maxx) return false; // Check vertical overlap.

          ad = (amax[1] - amin[1]) / (amax[0] - amin[0]);
          ak = amin[1] - ad * amin[0];
          bd = (bmax[1] - bmin[1]) / (bmax[0] - bmin[0]);
          bk = bmin[1] - bd * bmin[0];
          aminy = ad * minx + ak;
          amaxy = ad * maxx + ak;
          bminy = bd * minx + bk;
          bmaxy = bd * maxx + bk;
          dmin = bminy - aminy;
          dmax = bmaxy - amaxy; // Crossing segments always overlap.

          if (dmin * dmax < 0) return true; // Check for overlap at endpoints.

          thr = py * 2 * (py * 2);
          if (dmin * dmin <= thr || dmax * dmax <= thr) return true;
          return false;
        }
        /**
         * Builds internal polygons links for a tile.
         * 
         * @param tile
         */

      }, {
        key: "baseOffMeshLinks",
        value: function baseOffMeshLinks(tile) {
          if (tile == null) return;
          var base = this.getPolyRefBase(tile); // Base off-mesh connection start points.

          for (var i = 0; i < tile.data.header.offMeshConCount; ++i) {
            var con = tile.data.offMeshCons[i];
            var poly = tile.data.polys[con.poly];
            var ext = [con.rad, tile.data.header.walkableClimb, con.rad]; // Find polygon to connect to.

            var nearestPoly = this.findNearestPolyInTile(tile, con.pos, ext);
            var ref = nearestPoly.getNearestRef();
            if (ref == 0) continue;
            var p = con.pos; // First vertex

            var nearestPt = nearestPoly.getNearestPos(); // findNearestPoly may return too optimistic results, further check
            // to make sure.

            if (DetourCommon.sqr(nearestPt[0] - p[0]) + DetourCommon.sqr(nearestPt[2] - p[2]) > DetourCommon.sqr(con.rad)) continue; // Make sure the location is on current mesh.

            tile.data.verts[poly.verts[0] * 3] = nearestPt[0];
            tile.data.verts[poly.verts[0] * 3 + 1] = nearestPt[1];
            tile.data.verts[poly.verts[0] * 3 + 2] = nearestPt[2]; // let off-mesh connection to target poly.

            var idx = this.allocLink(tile);
            var link = tile.links[idx];
            link.ref = ref;
            link.edge = 0;
            link.side = 0xff;
            link.bmin = link.bmax = 0; // Add to linked list.

            link.next = poly.firstLink;
            poly.firstLink = idx; // Start end-poPoly is always connect back to off-mesh connection.

            var tidx = this.allocLink(tile);
            var landPolyIdx = NavMesh.decodePolyIdPoly(ref);
            var landPoly = tile.data.polys[landPolyIdx];
            link = tile.links[tidx];
            link.ref = NavMesh.or(base, con.poly);
            link.edge = 0xff;
            link.side = 0xff;
            link.bmin = link.bmax = 0; // Add to linked list.

            link.next = landPoly.firstLink;
            landPoly.firstLink = tidx;
          }
        }
        /**
         * Returns closest poPoly on polygon.
         * 
         * @param ref
         * @param pos
         * @return
         */

      }, {
        key: "closestPointOnPoly",
        value: function closestPointOnPoly(ref, pos) {
          var tileAndPoly = this.getTileAndPolyByRefUnsafe(ref);
          var tile = tileAndPoly[0];
          var poly = tileAndPoly[1]; // Off-mesh connections don't have detail polygons.

          if (poly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) {
            var v0 = poly.verts[0] * 3;
            var v1 = poly.verts[1] * 3;
            var d0 = DetourCommon.vDist3(pos, tile.data.verts, v0);
            var d1 = DetourCommon.vDist3(pos, tile.data.verts, v1);
            var u = d0 / (d0 + d1);

            var _closest = DetourCommon.vLerp4(tile.data.verts, v0, v1, u);

            return new ClosestPointOnPolyResult(false, _closest);
          } // Clamp poPoly to be inside the polygon.


          var verts = new Array(this.m_maxVertPerPoly * 3);
          var edged = new Array(this.m_maxVertPerPoly);
          var edget = new Array(this.m_maxVertPerPoly);
          var nv = poly.vertCount;

          for (var i = 0; i < nv; ++i) {
            arraycopy(tile.data.verts, poly.verts[i] * 3, verts, i * 3, 3);
          }

          var posOverPoly = false;
          var closest = new Array(3);
          DetourCommon.vCopy(closest, pos);

          if (!DetourCommon.distancePtPolyEdgesSqr(pos, verts, nv, edged, edget)) {
            // PoPoly is outside the polygon, dtClamp to nearest edge.
            var _dmin = edged[0];
            var imin = 0;

            for (var _i = 1; _i < nv; ++_i) {
              if (edged[_i] < _dmin) {
                _dmin = edged[_i];
                imin = _i;
              }
            }

            var va = imin * 3;
            var vb = (imin + 1) % nv * 3;
            closest = DetourCommon.vLerp4(verts, va, vb, edget[imin]);
            posOverPoly = false;
          } else {
            posOverPoly = true;
          } // Find height at the location.


          var ip = poly.index;

          if (tile.data.detailMeshes != null && tile.data.detailMeshes.length > ip) {
            var pd = tile.data.detailMeshes[ip];

            for (var j = 0; j < pd.triCount; ++j) {
              var t = (pd.triBase + j) * 4;
              var v = []; //Was [3][]

              for (var k = 0; k < 3; ++k) {
                if (tile.data.detailTris[t + k] < poly.vertCount) {
                  var index = poly.verts[tile.data.detailTris[t + k]] * 3;
                  v[k] = [tile.data.verts[index], tile.data.verts[index + 1], tile.data.verts[index + 2]];
                } else {
                  var _index = (pd.vertBase + (tile.data.detailTris[t + k] - poly.vertCount)) * 3;

                  v[k] = [tile.data.detailVerts[_index], tile.data.detailVerts[_index + 1], tile.data.detailVerts[_index + 2]];
                }
              }

              var heightResult = DetourCommon.closestHeightPointTriangle(closest, v[0], v[1], v[2]);

              if (heightResult[0]) {
                closest[1] = heightResult[1];
                break;
              }
            }
          }

          return new ClosestPointOnPolyResult(posOverPoly, closest);
        }
      }, {
        key: "findNearestPolyInTile",
        value: function findNearestPolyInTile(tile, center, extents) {
          var nearestPt = null;
          var bmin = DetourCommon.vSub(center, extents);
          var bmax = DetourCommon.vAdd(center, extents); // Get nearby polygons from proximity grid.

          var polys = this.queryPolygonsInTile(tile, bmin, bmax); // Find nearest polygon amongst the nearby polygons.

          var nearest = 0;
          var nearestDistanceSqr = Number.MAX_VALUE;

          for (var i = 0; i < polys.length; ++i) {
            var ref = polys[i];
            var d = 0;
            var cpp = this.closestPointOnPoly(ref, center);
            var posOverPoly = cpp.isPosOverPoly();
            var closestPtPoly = cpp.getClosest(); // If a poPoly is directly over a polygon and closer than
            // climb height, favor that instead of straight line nearest point.

            var diff = DetourCommon.vSub(center, closestPtPoly);

            if (posOverPoly) {
              d = Math.abs(diff[1]) - tile.data.header.walkableClimb;
              d = d > 0 ? d * d : 0;
            } else {
              d = DetourCommon.vLenSqr(diff);
            }

            if (d < nearestDistanceSqr) {
              nearestPt = closestPtPoly;
              nearestDistanceSqr = d;
              nearest = ref;
            }
          }

          return new FindNearestPolyResult(nearest, nearestPt);
        }
      }, {
        key: "getTileAt",
        value: function getTileAt(x, y, layer) {
          // Find tile based on hash.
          var h = NavMesh.computeTileHash(x, y, this.m_tileLutMask);
          var tile = this.m_posLookup[h];

          while (tile != null) {
            if (tile.data.header != null && tile.data.header.x == x && tile.data.header.y == y && tile.data.header.layer == layer) {
              return tile;
            }

            tile = tile.next;
          }

          return null;
        }
      }, {
        key: "getNeighbourTilesAt",
        value: function getNeighbourTilesAt(x, y, side) {
          var nx = x,
              ny = y;

          switch (side) {
            case 0:
              nx++;
              break;

            case 1:
              nx++;
              ny++;
              break;

            case 2:
              ny++;
              break;

            case 3:
              nx--;
              ny++;
              break;

            case 4:
              nx--;
              break;

            case 5:
              nx--;
              ny--;
              break;

            case 6:
              ny--;
              break;

            case 7:
              nx++;
              ny--;
              break;
          }

          return this.getTilesAt(nx, ny);
        }
      }, {
        key: "getTilesAt",
        value: function getTilesAt(x, y) {
          var tiles = []; // Find tile based on hash.

          var h = NavMesh.computeTileHash(x, y, this.m_tileLutMask);
          var tile = this.m_posLookup[h];

          while (tile != null) {
            if (tile.data.header != null && tile.data.header.x == x && tile.data.header.y == y) {
              tiles.push(tile);
            }

            tile = tile.next;
          }

          return tiles;
        }
      }, {
        key: "getTileRefAt",
        value: function getTileRefAt(x, y, layer) {
          // Find tile based on hash.
          var h = NavMesh.computeTileHash(x, y, this.m_tileLutMask);
          var tile = this.m_posLookup[h];

          while (tile != null) {
            if (tile.data.header != null && tile.data.header.x == x && tile.data.header.y == y && tile.data.header.layer == layer) {
              return this.getTileRef(tile);
            }

            tile = tile.next;
          }

          return 0;
        }
      }, {
        key: "getTileByRef",
        value: function getTileByRef(ref) {
          if (ref == 0) return null;
          var tileIndex = decodePolyIdTile(ref);
          var tileSalt = decodePolyIdSalt(ref);
          if (tileIndex >= this.m_maxTiles) return null;
          var tile = this.m_tiles[tileIndex];
          if (tile.salt != tileSalt) return null;
          return tile;
        }
      }, {
        key: "getTileRef",
        value: function getTileRef(tile) {
          if (tile == null) return 0;
          var it = tile.index;
          return NavMesh.encodePolyId(tile.salt, it, 0);
        }
      }, {
        key: "getOffMeshConnectionPolyEndPoints",
        /// @par
        ///
        /// Off-mesh connections are stored in the navigation mesh as special
        /// 2-vertex
        /// polygons with a single edge. At least one of the vertices is expected to
        /// be
        /// inside a normal polygon. So an off-mesh connection is "entered" from a
        /// normal polygon at one of its endpoints. This is the polygon identified
        /// by
        /// the prevRef parameter.
        value: function getOffMeshConnectionPolyEndPoints(prevRef, polyRef) {
          if (polyRef == 0) throw new IllegalArgumentException("polyRef = 0"); // Get current polygon

          var saltitip = NavMesh.decodePolyId(polyRef);
          var salt = saltitip[0];
          var it = saltitip[1];
          var ip = saltitip[2];

          if (it >= this.m_maxTiles) {
            throw new IllegalArgumentException("Invalid tile ID > max tiles");
          }

          if (this.m_tiles[it].salt != salt || this.m_tiles[it].data.header == null) {
            throw new IllegalArgumentException("Invalid salt or missing tile header");
          }

          var tile = this.m_tiles[it];

          if (ip >= tile.data.header.polyCount) {
            throw new IllegalArgumentException("Invalid poly ID > poly count");
          }

          var poly = tile.data.polys[ip]; // Make sure that the current poly is indeed off-mesh link.

          if (poly.getType() != Poly.DT_POLYTYPE_OFFMESH_CONNECTION) throw new IllegalArgumentException("Invalid poly type"); // Figure out which way to hand out the vertices.

          var idx0 = 0,
              idx1 = 1; // Find link that points to first vertex.

          for (var i = poly.firstLink; i != NavMesh.DT_NULL_LINK; i = tile.links[i].next) {
            if (tile.links[i].edge == 0) {
              if (tile.links[i].ref != prevRef) {
                idx0 = 1;
                idx1 = 0;
              }

              break;
            }
          }

          var startPos = new Array(3);
          var endPos = new Array(3);
          DetourCommon.vCopy(startPos, tile.data.verts, poly.verts[idx0] * 3);
          DetourCommon.vCopy(endPos, tile.data.verts, poly.verts[idx1] * 3);
          return [startPos, endPos];
        }
      }, {
        key: "getMaxVertsPerPoly",
        value: function getMaxVertsPerPoly() {
          return this.m_maxVertPerPoly;
        }
      }, {
        key: "getTileCount",
        value: function getTileCount() {
          return this.m_tileCount;
        }
      }], [{
        key: "getNavMeshParams",
        value: function getNavMeshParams(data) {
          var params = new NavMeshParams();
          DetourCommon.vCopy(params.orig, data.header.bmin);
          params.tileWidth = data.header.bmax[0] - data.header.bmin[0];
          params.tileHeight = data.header.bmax[2] - data.header.bmin[2];
          params.maxTiles = 1;
          params.maxPolys = data.header.polyCount;
          return params;
        }
      }, {
        key: "getSlabCoord",
        value: function getSlabCoord(verts, va, side) {
          if (side == 0 || side == 4) return verts[va];else if (side == 2 || side == 6) return verts[va + 2];
          return 0;
        }
      }, {
        key: "calcSlabEndPoints",
        value: function calcSlabEndPoints(verts, va, vb, bmin, bmax, side) {
          if (side == 0 || side == 4) {
            if (verts[va + 2] < verts[vb + 2]) {
              bmin[0] = verts[va + 2];
              bmin[1] = verts[va + 1];
              bmax[0] = verts[vb + 2];
              bmax[1] = verts[vb + 1];
            } else {
              bmin[0] = verts[vb + 2];
              bmin[1] = verts[vb + 1];
              bmax[0] = verts[va + 2];
              bmax[1] = verts[va + 1];
            }
          } else if (side == 2 || side == 6) {
            if (verts[va + 0] < verts[vb + 0]) {
              bmin[0] = verts[va + 0];
              bmin[1] = verts[va + 1];
              bmax[0] = verts[vb + 0];
              bmax[1] = verts[vb + 1];
            } else {
              bmin[0] = verts[vb + 0];
              bmin[1] = verts[vb + 1];
              bmax[0] = verts[va + 0];
              bmax[1] = verts[va + 1];
            }
          }
        }
      }, {
        key: "computeTileHash",
        value: function computeTileHash(x, y, mask) {
          var h1 = 0x8da6b343; // Large multiplicative constants;

          var h2 = 0xd8163841; // here arbitrarily chosen primes

          var n = h1 * x + h2 * y;
          return n & mask;
        }
      }]);

      return NavMesh;
    }();

    _defineProperty(NavMesh, "DT_SALT_BITS", 16);

    _defineProperty(NavMesh, "DT_TILE_BITS", 28);

    _defineProperty(NavMesh, "DT_POLY_BITS", 20);

    _defineProperty(NavMesh, "DT_EXT_LINK", 0x8000);

    _defineProperty(NavMesh, "DT_NULL_LINK", -1);

    _defineProperty(NavMesh, "DT_OFFMESH_CON_BIDIR", 1);

    _defineProperty(NavMesh, "DT_MAX_AREAS", 64);

    _defineProperty(NavMesh, "DT_RAY_CAST_LIMIT_PROPORTIONS", 50.0);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     _in a product, an acknowledgment _in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var RecastVectors$1 = /*#__PURE__*/function () {
      function RecastVectors() {
        _classCallCheck(this, RecastVectors);
      }

      _createClass(RecastVectors, null, [{
        key: "min",
        value: function min(a, b, i) {
          a[0] = Math.min(a[0], b[i + 0]);
          a[1] = Math.min(a[1], b[i + 1]);
          a[2] = Math.min(a[2], b[i + 2]);
        }
      }, {
        key: "max",
        value: function max(a, b, i) {
          a[0] = Math.max(a[0], b[i + 0]);
          a[1] = Math.max(a[1], b[i + 1]);
          a[2] = Math.max(a[2], b[i + 2]);
        }
      }, {
        key: "copy3",
        value: function copy3(out, _in, i) {
          RecastVectors.copy4(out, 0, _in, i);
        }
      }, {
        key: "copy2",
        value: function copy2(out, _in) {
          RecastVectors.copy4(out, 0, _in, 0);
        }
      }, {
        key: "copy4",
        value: function copy4(out, n, _in, m) {
          out[n] = _in[m];
          out[n + 1] = _in[m + 1];
          out[n + 2] = _in[m + 2];
        }
      }, {
        key: "add",
        value: function add(e0, a, verts, i) {
          e0[0] = a[0] + verts[i];
          e0[1] = a[1] + verts[i + 1];
          e0[2] = a[2] + verts[i + 2];
        }
      }, {
        key: "subA",
        value: function subA(e0, verts, i, j) {
          e0[0] = verts[i] - verts[j];
          e0[1] = verts[i + 1] - verts[j + 1];
          e0[2] = verts[i + 2] - verts[j + 2];
        }
      }, {
        key: "subB",
        value: function subB(e0, i, verts, j) {
          e0[0] = i[0] - verts[j];
          e0[1] = i[1] - verts[j + 1];
          e0[2] = i[2] - verts[j + 2];
        }
      }, {
        key: "cross",
        value: function cross(dest, v1, v2) {
          dest[0] = v1[1] * v2[2] - v1[2] * v2[1];
          dest[1] = v1[2] * v2[0] - v1[0] * v2[2];
          dest[2] = v1[0] * v2[1] - v1[1] * v2[0];
        }
      }, {
        key: "normalize",
        value: function normalize(v) {
          var d = 1.0 / Math.sqrt(v[0] * v[0] + v[1] * v[1] + v[2] * v[2]);
          v[0] *= d;
          v[1] *= d;
          v[2] *= d;
        }
      }]);

      return RecastVectors;
    }();

    var _temp, _temp2;

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var ChunkyTriMesh = /*#__PURE__*/function () {
      _createClass(ChunkyTriMesh, [{
        key: "calcExtends",
        value: function calcExtends(items, imin, imax, bmin, bmax) {
          bmin[0] = items[imin].bmin[0];
          bmin[1] = items[imin].bmin[1];
          bmax[0] = items[imin].bmax[0];
          bmax[1] = items[imin].bmax[1];

          for (var i = imin + 1; i < imax; ++i) {
            var it = items[i];

            if (it.bmin[0] < bmin[0]) {
              bmin[0] = it.bmin[0];
            }

            if (it.bmin[1] < bmin[1]) {
              bmin[1] = it.bmin[1];
            }

            if (it.bmax[0] > bmax[0]) {
              bmax[0] = it.bmax[0];
            }

            if (it.bmax[1] > bmax[1]) {
              bmax[1] = it.bmax[1];
            }
          }
        }
      }, {
        key: "longestAxis",
        value: function longestAxis(x, y) {
          return y > x ? 1 : 0;
        } // https://stackoverflow.com/a/45245772/10047920

      }, {
        key: "partialSort",
        value: function partialSort(arr, start, end, sortFx) {
          var preSorted = arr.slice(0, start),
              postSorted = arr.slice(end);
          var sorted = arr.slice(start, end).sort(sortFx);
          arr.length = 0;
          arr.push.apply(arr, preSorted.concat(sorted).concat(postSorted));
          return arr;
        }
      }, {
        key: "subdivide",
        value: function subdivide(items, imin, imax, trisPerChunk, nodes, inTris) {
          var _this = this;

          var inum = imax - imin;
          var node = new ChunkyTriMesh.ChunkyTriMeshNode();
          nodes.push(node);

          if (inum <= trisPerChunk) {
            // Leaf
            this.calcExtends(items, imin, imax, node.bmin, node.bmax); // Copy triangles.

            node.i = nodes.length;
            node.tris = new Array(inum * 3);
            var dst = 0;

            for (var i = imin; i < imax; ++i) {
              var src = items[i].i * 3;
              node.tris[dst++] = inTris[src];
              node.tris[dst++] = inTris[src + 1];
              node.tris[dst++] = inTris[src + 2];
            }
          } else {
            // Split
            this.calcExtends(items, imin, imax, node.bmin, node.bmax);
            var axis = this.longestAxis(node.bmax[0] - node.bmin[0], node.bmax[1] - node.bmin[1]);

            if (axis == 0) {
              //Arrays.sort(items, imin, imax, new CompareItemX());
              this.partialSort(items, imin, imax, function (a, b) {
                return _this.CompareItemX(a, b);
              }); // let subarray = items.slice(imin, imax);
              // subarray.sort((a, b) => (this.CompareItemX(a, b)))
              // // let newitems = items.slice(0, imin);
              // // newitems.push(...subarray)
              // // newitems.push(...items.slice(imax, items.length));
              // for (let i = imin; i < imax; i++) {
              //     items[i].bmin[0] = subarray[i].bmin[0];
              //     items[i].bmin[1] = subarray[i].bmin[1];
              //     items[i].bmax[0] = subarray[i].bmax[0];
              //     items[i].bmax[1] = subarray[i].bmax[1];
              // }
              //items = newitems;
              // Sort aPoly x-axis
            } else if (axis == 1) {
              // Arrays.sort(items, imin, imax, new CompareItemY());
              // Sort aPoly y-axis
              this.partialSort(items, imin, imax, function (a, b) {
                return _this.CompareItemY(a, b);
              }); // let subarray = items.slice(imin, imax);
              // subarray.sort((a, b) => (this.CompareItemY(a, b)))
              // // let newitems = items.slice(0, imin);
              // // newitems.push(...subarray)
              // // newitems.push(...items.slice(imax, items.length));
              // for (let i = imin; i < imax; i++) {
              //     items[i].bmin[0] = subarray[i].bmin[0];
              //     items[i].bmin[1] = subarray[i].bmin[1];
              //     items[i].bmax[0] = subarray[i].bmax[0];
              //     items[i].bmax[1] = subarray[i].bmax[1];
              // }
              //items = newitems;
            }

            var isplit = Math.floor(imin + Math.floor(inum / 2));
            var s = "";

            for (var _i = 0; _i < items.length; _i++) {
              var item = items[_i];
              s += "" + _i + " " + item.bmin[0] + " " + item.bmin[1] + "\n";
              s += "" + _i + " " + item.bmax[0] + " " + item.bmax[1] + "\n";
            } // fs.writeFileSync("items_" + imin + "_" + imax + ".txt", s);
            // console.log("done")
            // Left
            // console.log("Before left " + imin + " " + isplit);
            // console.log(items[279].bmin[1])


            this.subdivide(items, imin, isplit, trisPerChunk, nodes, inTris); // console.log("Done left " + imin + " " + isplit);
            // console.log(items[279].bmin[1])
            // Right
            // console.log("Before right " + isplit + " " + imax);
            // console.log(items[279].bmin[1])

            this.subdivide(items, isplit, imax, trisPerChunk, nodes, inTris); // console.log("Done right " + isplit + " " + imax);
            // console.log(items[279].bmin[1])
            // Negative index means escape.

            node.i = -nodes.length;
          }
        }
      }]);

      function ChunkyTriMesh(verts, tris, ntris, trisPerChunk) {
        _classCallCheck(this, ChunkyTriMesh);

        _defineProperty(this, "CompareItemX", function compare(a, b) {
          if (a.bmin[0] < b.bmin[0]) {
            return -1;
          }

          if (a.bmin[0] > b.bmin[0]) {
            return 1;
          }

          return 0;
        });

        _defineProperty(this, "CompareItemY", function compare(a, b) {
          if (a.bmin[1] < b.bmin[1]) {
            return -1;
          }

          if (a.bmin[1] > b.bmin[1]) {
            return 1;
          }

          return 0;
        });

        _defineProperty(this, "nodes", []);

        _defineProperty(this, "ntris", void 0);

        _defineProperty(this, "maxTrisPerChunk", void 0);
        this.nodes = [];
        this.ntris = ntris; // Build tree

        var items = []; //new Array(ntris);

        for (var i = 0; i < ntris; i++) {
          var t = i * 3;
          var it = items[i] = new ChunkyTriMesh.BoundsItem();
          it.i = i; // Calc triangle XZ bounds.

          it.bmin[0] = it.bmax[0] = verts[tris[t] * 3 + 0];
          it.bmin[1] = it.bmax[1] = verts[tris[t] * 3 + 2];

          for (var j = 1; j < 3; ++j) {
            var v = tris[t + j] * 3;

            if (verts[v] < it.bmin[0]) {
              it.bmin[0] = verts[v];
            }

            if (verts[v + 2] < it.bmin[1]) {
              it.bmin[1] = verts[v + 2];
            }

            if (verts[v] > it.bmax[0]) {
              it.bmax[0] = verts[v];
            }

            if (verts[v + 2] > it.bmax[1]) {
              it.bmax[1] = verts[v + 2];
            }
          }
        }

        this.subdivide(items, 0, ntris, trisPerChunk, this.nodes, tris); // Calc max tris per node.

        this.maxTrisPerChunk = 0;

        var _iterator = _createForOfIteratorHelper(this.nodes),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var _node = _step.value;
            var isLeaf = _node.i >= 0;

            if (!isLeaf) {
              continue;
            }

            if (_node.tris.length / 3 > this.maxTrisPerChunk) {
              this.maxTrisPerChunk = _node.tris.length / 3;
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }

      _createClass(ChunkyTriMesh, [{
        key: "checkOverlapRect",
        value: function checkOverlapRect(amin, amax, bmin, bmax) {
          var overlap = true;
          overlap = amin[0] > bmax[0] || amax[0] < bmin[0] ? false : overlap;
          overlap = amin[1] > bmax[1] || amax[1] < bmin[1] ? false : overlap;
          return overlap;
        }
      }, {
        key: "getChunksOverlappingRect",
        value: function getChunksOverlappingRect(bmin, bmax) {
          // Traverse tree
          ids = [];
          var i = 0;

          while (i < nodes.length) {
            node = nodes[i];
            var overlap = checkOverlapRect(bmin, bmax, node.bmin, node.bmax);
            var isLeafNode = node.i >= 0;

            if (isLeafNode && overlap) {
              ids.push(node);
            }

            if (overlap || isLeafNode) {
              i++;
            } else {
              i = -node.i;
            }
          }

          return ids;
        }
      }]);

      return ChunkyTriMesh;
    }();

    _defineProperty(ChunkyTriMesh, "BoundsItem", (_temp = function BoundsItem() {
      _classCallCheck(this, BoundsItem);

      _defineProperty(this, "bmin", new Array(2));

      _defineProperty(this, "bmax", new Array(2));

      _defineProperty(this, "i", void 0);
    }, _temp));

    _defineProperty(ChunkyTriMesh, "ChunkyTriMeshNode", (_temp2 = function ChunkyTriMeshNode() {
      _classCallCheck(this, ChunkyTriMeshNode);

      _defineProperty(this, "bmin", new Array(2));

      _defineProperty(this, "bmax", new Array(2));

      _defineProperty(this, "i", void 0);

      _defineProperty(this, "tris", []);
    }, _temp2));

    var TriMesh = /*#__PURE__*/function () {
      function TriMesh(vertices, faces) {
        _classCallCheck(this, TriMesh);

        _defineProperty(this, "vertices", void 0);

        _defineProperty(this, "faces", void 0);

        _defineProperty(this, "chunkyTriMesh", void 0);

        this.vertices = vertices;
        this.faces = faces;
        this.chunkyTriMesh = new ChunkyTriMesh(vertices, faces, faces.length / 3, 256);
      }

      _createClass(TriMesh, [{
        key: "getTris",
        value: function getTris() {
          return this.faces;
        }
      }, {
        key: "getVerts",
        value: function getVerts() {
          return this.vertices;
        }
      }, {
        key: "getChunksOverlappingRect",
        value: function getChunksOverlappingRect(bmin, bmax) {
          return chunkyTriMesh.getChunksOverlappingRect(bmin, bmax);
        }
      }]);

      return TriMesh;
    }();

    var SimpleInputGeomProvider
    /*extends InputGeomProvider*/
    = /*#__PURE__*/function () {
      _createClass(SimpleInputGeomProvider, null, [{
        key: "mapFaces",
        value: function mapFaces(meshFaces) {
          var faces = new Array(meshFaces.length);

          for (var i = 0; i < faces.length; i++) {
            faces[i] = meshFaces[i];
          }

          return faces;
        }
      }, {
        key: "mapVertices",
        value: function mapVertices(vertexPositions) {
          var vertices = new Array(vertexPositions.length);

          for (var i = 0; i < vertices.length; i++) {
            vertices[i] = vertexPositions[i];
          }

          return vertices;
        }
      }]);

      function SimpleInputGeomProvider(vertices, faces) {
        _classCallCheck(this, SimpleInputGeomProvider);

        _defineProperty(this, "vertices", void 0);

        _defineProperty(this, "faces", void 0);

        _defineProperty(this, "bmin", void 0);

        _defineProperty(this, "bmax", void 0);

        _defineProperty(this, "volumes", []);

        this.vertices = vertices;
        this.faces = faces;
        this.bmin = new Array(3);
        this.bmax = new Array(3);
        RecastVectors$1.copy3(this.bmin, vertices, 0);
        RecastVectors$1.copy3(this.bmax, vertices, 0);

        for (var i = 1; i < vertices.length / 3; i++) {
          RecastVectors$1.min(this.bmin, vertices, i * 3);
          RecastVectors$1.max(this.bmax, vertices, i * 3);
        }
      }

      _createClass(SimpleInputGeomProvider, [{
        key: "getMeshBoundsMin",
        value: function getMeshBoundsMin() {
          return this.bmin;
        }
      }, {
        key: "getMeshBoundsMax",
        value: function getMeshBoundsMax() {
          return this.bmax;
        }
      }, {
        key: "getConvexVolumes",
        value: function getConvexVolumes() {
          return [];
        }
      }, {
        key: "addConvexVolume",
        value: function addConvexVolume(verts, minh, maxh, areaMod) {
          var vol = new ConvexVolume();
          vol.hmin = minh;
          vol.hmax = maxh;
          vol.verts = verts;
          vol.areaMod = areaMod;
          this.volumes.push(vol);
        }
      }, {
        key: "meshes",
        value: function meshes() {
          // return Collections.singPolyonList(new TriMesh(vertices, faces));
          return [new TriMesh(this.vertices, this.faces)];
        }
      }]);

      return SimpleInputGeomProvider;
    }();

    _defineProperty(SimpleInputGeomProvider, "fromIndeces", function (vertexPositions, meshFaces) {
      return new SimpleInputGeomProvider(this.mapVertices(vertexPositions), this.mapFaces(meshFaces));
    });

    var ObjImporterContext = function ObjImporterContext() {
      _classCallCheck(this, ObjImporterContext);

      _defineProperty(this, "vertexPositions", []);

      _defineProperty(this, "meshFaces", []);
    };

    var ObjImporter = /*#__PURE__*/function () {
      function ObjImporter() {
        _classCallCheck(this, ObjImporter);
      }

      _createClass(ObjImporter, [{
        key: "load",
        // OBJImporterContext = 
        value: function load(is) {
          var context = new ObjImporterContext();

          try {
            var slurp = is;
            var lines = slurp.split(/\r?\n/);

            for (var i = 0; i < lines.length; i++) {
              var line = lines[i];
              this.readLine(line, context);
            } // reader = new BufferedReader(new InputStreamReader(is));
            // let line;
            // while ((line = reader.readLine()) != null) {
            //     line = line.trim();
            //     readLine(line, context);
            // }

          } catch (e) {
            throw e;
          } finally {
          }

          return SimpleInputGeomProvider.fromIndeces(context.vertexPositions, context.meshFaces);
        }
      }, {
        key: "readLine",
        value: function readLine(line, context) {
          if (line.startsWith("v")) {
            this.readVertex(line, context);
          } else if (line.startsWith("f")) {
            this.readFace(line, context);
          }
        }
      }, {
        key: "readVertex",
        value: function readVertex(line, context) {
          if (line.startsWith("v ")) {
            var vert = this.readVector3f(line);

            var _iterator = _createForOfIteratorHelper(vert),
                _step;

            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var vp = _step.value;
                context.vertexPositions.push(vp);
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
          }
        }
      }, {
        key: "readVector3f",
        value: function readVector3f(line) {
          var v = line.split(/\s+/);

          if (v.length < 4) {
            throw new RuntimeException("Invalid vector, expected 3 coordinates, found " + (v.length - 1));
          }

          return [parseFloat(v[1]), parseFloat(v[2]), parseFloat(v[3])];
        }
      }, {
        key: "readFace",
        value: function readFace(line, context) {
          var v = line.split(/\s+/);

          if (v.length < 4) {
            throw new RuntimeException("Invalid number of face vertices: 3 coordinates expected, found " + v.length);
          }

          for (var j = 0; j < v.length - 3; j++) {
            context.meshFaces.push(this.readFaceVertex(v[1], context));

            for (var i = 0; i < 2; i++) {
              context.meshFaces.push(this.readFaceVertex(v[2 + j + i], context));
            }
          }
        }
      }, {
        key: "readFaceVertex",
        value: function readFaceVertex(face, context) {
          var v = face.split(/\//);
          return this.getIndex(parseInt(v[0]), context.vertexPositions.length);
        }
      }, {
        key: "getIndex",
        value: function getIndex(posi, size) {
          if (posi > 0) {
            posi--;
          } else if (posi < 0) {
            posi = size + posi;
          } else {
            throw new RuntimeException("0 vertex index");
          }

          return posi;
        }
      }]);

      return ObjImporter;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015-2018 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var RecastConstants = function RecastConstants() {
      _classCallCheck(this, RecastConstants);
    };

    _defineProperty(RecastConstants, "RC_NULL_AREA", 0);

    _defineProperty(RecastConstants, "RC_NOT_CONNECTED", 0x3f);

    _defineProperty(RecastConstants, "RC_WALKABLE_AREA", 63);

    _defineProperty(RecastConstants, "RC_SPAN_HEIGHT_BITS", 13);

    _defineProperty(RecastConstants, "RC_SPAN_MAX_HEIGHT", (1 << RecastConstants.RC_SPAN_HEIGHT_BITS) - 1);

    _defineProperty(RecastConstants, "RC_BORDER_REG", 0x8000);

    _defineProperty(RecastConstants, "RC_MULTIPLE_REGS", 0);

    _defineProperty(RecastConstants, "RC_BORDER_VERTEX", 0x10000);

    _defineProperty(RecastConstants, "RC_AREA_BORDER", 0x20000);

    _defineProperty(RecastConstants, "RC_CONTOUR_REG_MASK", 0xffff);

    _defineProperty(RecastConstants, "RC_MESH_NULL_IDX", 0xffff);

    _defineProperty(RecastConstants, "RC_CONTOUR_TESS_WALL_EDGES", 0x01);

    _defineProperty(RecastConstants, "RC_CONTOUR_TESS_AREA_EDGES", 0x02);

    _defineProperty(RecastConstants, "WATERSHED", 10);

    _defineProperty(RecastConstants, "MONOTONE", 20);

    _defineProperty(RecastConstants, "LAYERS", 30);

    _defineProperty(RecastConstants, "RC_LOG_WARNING", 1);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var RecastConfig =
    /** The width/height size of tile's on the xz-plane. [Limit: >= 0] [Units: vx] **/

    /** The xz-plane cell size to use for fields. [Limit: > 0] [Units: wu] **/

    /** The y-axis cell size to use for fields. [Limit: > 0] [Units: wu] **/

    /** The maximum slope that is considered walkable. [Limits: 0 <= value < 90] [Units: Degrees] **/

    /**
     * Minimum floor to 'ceiling' height that will still allow the floor area to be considered walkable. [Limit: >= 3]
     * [Units: vx]
     **/

    /** Maximum ledge height that is considered to still be traversable. [Limit: >=0] [Units: vx] **/

    /**
     * The distance to erode/shrink the walkable area of the heightfield away from obstructions. [Limit: >=0] [Units:
     * vx]
     **/

    /** The maximum allowed length for contour edges aPoly the border of the mesh. [Limit: >=0] [Units: vx] **/

    /**
     * The maximum distance a simplfied contour's border edges should deviate the original raw contour. [Limit: >=0]
     * [Units: vx]
     **/

    /** The minimum number of cells allowed to form isolated island areas. [Limit: >=0] [Units: vx] **/

    /**
     * Any regions with a span count smaller than this value will, if possible, be merged with larger regions. [Limit:
     * >=0] [Units: vx]
     **/

    /**
     * The maximum number of vertices allowed for polygons generated during the contour to polygon conversion process.
     * [Limit: >= 3]
     **/

    /**
     * Sets the sampling distance to use when generating the detail mesh. (For height detail only.) [Limits: 0 or >=
     * 0.9] [Units: wu]
     **/

    /**
     * The maximum distance the detail mesh surface should deviate from heightfield data. (For height detail only.)
     * [Limit: >=0] [Units: wu]
     **/
    function RecastConfig(partitionType, cellSize, cellHeight, agentHeight, agentRadius, agentMaxClimb, agentMaxSlope, regionMinSize, regionMergeSize, edgeMaxLen, edgeMaxError, vertsPerPoly, detailSampleDist, detailSampleMaxError, tileSize, walkableAreaMod) {
      _classCallCheck(this, RecastConfig);

      _defineProperty(this, "partitionType", null);

      _defineProperty(this, "tileSize", void 0);

      _defineProperty(this, "cs", void 0);

      _defineProperty(this, "ch", void 0);

      _defineProperty(this, "walkableSlopeAngle", void 0);

      _defineProperty(this, "walkableHeight", void 0);

      _defineProperty(this, "walkableClimb", void 0);

      _defineProperty(this, "walkableRadius", void 0);

      _defineProperty(this, "maxEdgeLen", void 0);

      _defineProperty(this, "maxSimplificationError", void 0);

      _defineProperty(this, "minRegionArea", void 0);

      _defineProperty(this, "mergeRegionArea", void 0);

      _defineProperty(this, "maxVertsPerPoly", 0);

      _defineProperty(this, "detailSampleDist", void 0);

      _defineProperty(this, "detailSampleMaxError", void 0);

      _defineProperty(this, "walkableAreaMod", void 0);

      this.partitionType = partitionType;
      this.cs = cellSize;
      this.ch = cellHeight;
      this.walkableSlopeAngle = agentMaxSlope;
      this.walkableHeight = Math.ceil(agentHeight / this.ch);
      this.walkableClimb = Math.floor(agentMaxClimb / this.ch);
      this.walkableRadius = Math.ceil(agentRadius / this.cs);
      this.maxEdgeLen = Math.floor(edgeMaxLen / cellSize);
      this.maxSimplificationError = edgeMaxError;
      this.minRegionArea = regionMinSize * regionMinSize; // Note: area = size*size

      this.mergeRegionArea = regionMergeSize * regionMergeSize; // Note: area = size*size

      this.maxVertsPerPoly = vertsPerPoly;
      this.detailSampleDist = detailSampleDist < 0.9 ? 0 : cellSize * detailSampleDist;
      this.detailSampleMaxError = cellHeight * detailSampleMaxError;
      this.tileSize = tileSize;
      this.walkableAreaMod = walkableAreaMod;
    };

    var AreaModification = /*#__PURE__*/function () {
      /**
       * Mask is set to all available bits, which means value is fully applied
       * 
       * @param value
       *            The area id to apply. [Limit: <= #RC_AREA_FLAGS_MASK]
       */
      // constructor(value) {
      // 		this.value = value;
      // 		this.mask = AreaModification.RC_AREA_FLAGS_MASK;
      // 	}

      /**
       * 
       * @param value
       *            The area id to apply. [Limit: <= #RC_AREA_FLAGS_MASK]
       * @param mask
       *            Bitwise mask used when applying value. [Limit: <= #RC_AREA_FLAGS_MASK]
       */
      function AreaModification(value) {
        var mask = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : AreaModification.RC_AREA_FLAGS_MASK;

        _classCallCheck(this, AreaModification);

        _defineProperty(this, "value", void 0);

        _defineProperty(this, "mask", void 0);

        this.value = value;
        this.mask = mask;
      }

      _createClass(AreaModification, [{
        key: "getMaskedValue",
        value: function getMaskedValue() {
          return this.value & this.mask;
        }
      }, {
        key: "apply",
        value: function apply(area) {
          return this.value & this.mask | area & ~this.mask;
        }
      }]);

      return AreaModification;
    }();

    _defineProperty(AreaModification, "RC_AREA_FLAGS_MASK", 0x3F);

    _defineProperty(AreaModification, "clone", function (other) {
      return new AreaModification(other.value, other.mask); // this.value = other.value;
      // this.mask = other.mask;
    });

    var SampleAreaModifications = function SampleAreaModifications() {
      _classCallCheck(this, SampleAreaModifications);
    };

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_MASK", 0x07);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_GROUND", 0x1);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_WATER", 0x2);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_ROAD", 0x3);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_DOOR", 0x4);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_GRASS", 0x5);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYAREA_TYPE_JUMP", 0x6);

    _defineProperty(SampleAreaModifications, "SAMPLE_AREAMOD_GROUND", new AreaModification(SampleAreaModifications.SAMPLE_POLYAREA_TYPE_GROUND, SampleAreaModifications.SAMPLE_POLYAREA_TYPE_MASK));

    _defineProperty(SampleAreaModifications, "SAMPLE_AREAMOD_WATER", new AreaModification(SampleAreaModifications.SAMPLE_POLYAREA_TYPE_WATER, SampleAreaModifications.SAMPLE_POLYAREA_TYPE_MASK));

    _defineProperty(SampleAreaModifications, "SAMPLE_AREAMOD_ROAD", new AreaModification(SampleAreaModifications.SAMPLE_POLYAREA_TYPE_ROAD, SampleAreaModifications.SAMPLE_POLYAREA_TYPE_MASK));

    _defineProperty(SampleAreaModifications, "SAMPLE_AREAMOD_GRASS", new AreaModification(SampleAreaModifications.SAMPLE_POLYAREA_TYPE_GRASS, SampleAreaModifications.SAMPLE_POLYAREA_TYPE_MASK));

    _defineProperty(SampleAreaModifications, "SAMPLE_AREAMOD_DOOR", new AreaModification(SampleAreaModifications.SAMPLE_POLYAREA_TYPE_DOOR, SampleAreaModifications.SAMPLE_POLYAREA_TYPE_DOOR));

    _defineProperty(SampleAreaModifications, "SAMPLE_AREAMOD_JUMP", new AreaModification(SampleAreaModifications.SAMPLE_POLYAREA_TYPE_JUMP, SampleAreaModifications.SAMPLE_POLYAREA_TYPE_JUMP));

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYFLAGS_WALK", 0x01);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYFLAGS_SWIM", 0x02);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYFLAGS_DOOR", 0x04);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYFLAGS_JUMP", 0x08);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYFLAGS_DISABLED", 0x10);

    _defineProperty(SampleAreaModifications, "SAMPLE_POLYFLAGS_ALL", 0xfff);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** A compact, static heightfield representing unobstructed space. */
    var CompactHeightfield = function CompactHeightfield() {
      _classCallCheck(this, CompactHeightfield);

      _defineProperty(this, "width", 0);

      _defineProperty(this, "height", 0);

      _defineProperty(this, "spanCount", 0);

      _defineProperty(this, "walkableHeight", 0);

      _defineProperty(this, "walkableClimb", 0);

      _defineProperty(this, "borderSize", 0);

      _defineProperty(this, "maxDistance", 0);

      _defineProperty(this, "maxRegions", void 0);

      _defineProperty(this, "bmin", new Array(3));

      _defineProperty(this, "bmax", new Array(3));

      _defineProperty(this, "cs", 0);

      _defineProperty(this, "ch", 0);

      _defineProperty(this, "cells", []);

      _defineProperty(this, "spans", []);

      _defineProperty(this, "dist", []);

      _defineProperty(this, "areas", []);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Provides information on the content of a cell column in a compact heightfield. */
    var CompactCell = function CompactCell() {
      _classCallCheck(this, CompactCell);

      _defineProperty(this, "index", 0);

      _defineProperty(this, "count", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**  Represents a span of unobstructed space within a compact heightfield. */
    var CompactSpan = function CompactSpan() {
      _classCallCheck(this, CompactSpan);

      _defineProperty(this, "y", 0);

      _defineProperty(this, "reg", 0);

      _defineProperty(this, "con", 0);

      _defineProperty(this, "h", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var RecastCommon = function RecastCommon() {
      _classCallCheck(this, RecastCommon);
    };

    _defineProperty(RecastCommon, "GetCon", function (s, dir) {
      var shift = dir * 6;
      return s.con >> shift & 0x3f;
    });

    _defineProperty(RecastCommon, "GetDirOffsetX", function (dir) {
      var offset = [-1, 0, 1, 0];
      return offset[dir & 0x03];
    });

    _defineProperty(RecastCommon, "GetDirOffsetY", function (dir) {
      var offset = [0, 1, 0, -1];
      return offset[dir & 0x03];
    });

    _defineProperty(RecastCommon, "rcGetDirForOffset", function (x, y) {
      var dirs = [3, 0, -1, 2, 1];
      return dirs[(y + 1 << 1) + x];
    });

    _defineProperty(RecastCommon, "SetCon", function (s, dir, i) {
      var shift = dir * 6;
      var con = s.con;
      s.con = con & ~(0x3f << shift) | (i & 0x3f) << shift;
    });

    _defineProperty(RecastCommon, "clamp", function (v, min, max) {
      return Math.max(Math.min(max, v), min);
    });

    var Recast = /*#__PURE__*/function () {
      function Recast() {
        _classCallCheck(this, Recast);
      }

      _createClass(Recast, [{
        key: "calcBounds",
        value: function calcBounds(verts, nv, bmin, bmax) {
          for (var i = 0; i < 3; i++) {
            bmin[i] = verts[i];
            bmax[i] = verts[i];
          }

          for (var _i = 1; _i < nv; ++_i) {
            for (var j = 0; j < 3; j++) {
              bmin[j] = Math.min(bmin[j], verts[_i * 3 + j]);
              bmax[j] = Math.max(bmax[j], verts[_i * 3 + j]);
            }
          } // Calculate bounding box.

        }
      }, {
        key: "clearUnwalkableTriangles",
        /// @par
        ///
        /// Only sets the area id's for the unwalkable triangles. Does not alter the
        /// area id's for walkable triangles.
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// @see rcHeightfield, rcClearUnwalkableTriangles, rcRasterizeTriangles
        value: function clearUnwalkableTriangles(ctx, walkableSlopeAngle, verts, nv, tris, nt, areas) {
          walkableThr = Math.cos(walkableSlopeAngle / 180.0 * Math.PI);
          norm = new Array(3);

          for (var i = 0; i < nt; ++i) {
            var tri = i * 3;
            calcTriNormal(verts, tris[tri], tris[tri + 1], tris[tri + 2], norm); // Check if the face is walkable.

            if (norm[1] <= walkableThr) areas[i] = RecastConstants.RC_NULL_AREA;
          }
        }
      }], [{
        key: "calcGridSize",
        value: function calcGridSize(bmin, bmax, cs) {
          return [Math.floor((bmax[0] - bmin[0]) / cs + 0.5), Math.floor((bmax[2] - bmin[2]) / cs + 0.5)];
        }
      }, {
        key: "calcTileCount",
        value: function calcTileCount(bmin, bmax, cs, tileSize) {
          var gwh = Recast.calcGridSize(bmin, bmax, cs);
          var gw = gwh[0];
          var gh = gwh[1];
          var ts = tileSize;
          var tw = (gw + ts - 1) / ts;
          var th = (gh + ts - 1) / ts;
          return [tw, th];
        } /// @par
        ///
        /// Modifies the area id of all triangles with a slope below the specified value.
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// @see rcHeightfield, rcClearUnwalkableTriangles, rcRasterizeTriangles

      }, {
        key: "markWalkableTriangles",
        value: function markWalkableTriangles(ctx, walkableSlopeAngle, verts, tris, nt, areaMod) {
          var areas = new Array(nt).fill(0);
          var walkableThr = Math.cos(walkableSlopeAngle / 180.0 * Math.PI);
          var norm = new Array(3).fill(0);

          for (var i = 0; i < nt; ++i) {
            var tri = i * 3;
            Recast.calcTriNormal(verts, tris[tri], tris[tri + 1], tris[tri + 2], norm); // Check if the face is walkable.

            if (norm[1] > walkableThr) areas[i] = areaMod.apply(areas[i]);
          }

          return areas;
        }
      }, {
        key: "calcTriNormal",
        value: function calcTriNormal(verts, v0, v1, v2, norm) {
          var e0 = new Array(3);
          var e1 = new Array(3);
          RecastVectors$1.subA(e0, verts, v1 * 3, v0 * 3);
          RecastVectors$1.subA(e1, verts, v2 * 3, v0 * 3);
          RecastVectors$1.cross(norm, e0, e1);
          RecastVectors$1.normalize(norm);
        }
      }, {
        key: "getHeightFieldSpanCount",
        value: function getHeightFieldSpanCount(ctx, hf) {
          var w = hf.width;
          var h = hf.height;
          var spanCount = 0;

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              for (var s = hf.spans[x + y * w]; s != null; s = s.next) {
                if (s.area != RecastConstants.RC_NULL_AREA) spanCount++;
              }
            }
          }

          return spanCount;
        } /// @par
        ///
        /// This is just the beginning of the process of fully building a compact heightfield.
        /// Various filters may be applied, then the distance field and regions built.
        /// E.g: #rcBuildDistanceField and #rcBuildRegions
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// @see rcAllocCompactHeightfield, rcHeightfield, rcCompactHeightfield, rcConfig

      }, {
        key: "buildCompactHeightfield",
        value: function buildCompactHeightfield(ctx, walkableHeight, walkableClimb, hf) {
          ctx.startTimer("BUILD_COMPACTHEIGHTFIELD");
          var chf = new CompactHeightfield();
          var w = hf.width;
          var h = hf.height;
          var spanCount = this.getHeightFieldSpanCount(ctx, hf); // Fill in header.

          chf.width = w;
          chf.height = h;
          chf.spanCount = spanCount;
          chf.walkableHeight = walkableHeight;
          chf.walkableClimb = walkableClimb;
          chf.maxRegions = 0;
          RecastVectors$1.copy2(chf.bmin, hf.bmin);
          RecastVectors$1.copy2(chf.bmax, hf.bmax);
          chf.bmax[1] += walkableHeight * hf.ch;
          chf.cs = hf.cs;
          chf.ch = hf.ch; // let bigSize = w*h;

          chf.cells = new Array(Math.floor(w) * Math.floor(h));
          chf.spans = new Array(spanCount);
          chf.areas = new Array(spanCount);
          var MAX_HEIGHT = 0xffff;

          for (var i = 0; i < chf.cells.length; i++) {
            chf.cells[i] = new CompactCell();
          }

          for (var _i2 = 0; _i2 < chf.spans.length; _i2++) {
            chf.spans[_i2] = new CompactSpan();
          } // Fill in cells and spans.


          var idx = 0;

          for (var _y = 0; _y < h; ++_y) {
            for (var _x = 0; _x < w; ++_x) {
              var s = hf.spans[_x + _y * w]; // If there are no spans at this cell, just leave the data to index=0, count=0.

              if (s == null) continue;
              var c = chf.cells[_x + _y * w];
              c.index = idx;
              c.count = 0;

              while (s != null) {
                if (s.area != RecastConstants.RC_NULL_AREA) {
                  var bot = s.smax;
                  var top = s.next != null ? Math.floor(s.next.smin) : MAX_HEIGHT;
                  chf.spans[idx].y = RecastCommon.clamp(bot, 0, 0xffff);
                  chf.spans[idx].h = RecastCommon.clamp(top - bot, 0, 0xff);
                  chf.areas[idx] = s.area;
                  idx++; // if(idx == 450240)
                  // 	console.log("here")

                  c.count++;
                }

                s = s.next;
              }
            }
          } // Find neighbour connections.


          var MAX_LAYERS = RecastConstants.RC_NOT_CONNECTED - 1;
          var tooHighNeighbour = 0;

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              var _c = chf.cells[x + y * w];

              for (var _i3 = _c.index, ni = _c.index + _c.count; _i3 < ni; ++_i3) {
                // if(i == 450240)
                // 	console.log("stop")
                var _s = chf.spans[_i3];

                for (var dir = 0; dir < 4; ++dir) {
                  RecastCommon.SetCon(_s, dir, RecastConstants.RC_NOT_CONNECTED);
                  var nx = x + RecastCommon.GetDirOffsetX(dir);
                  var ny = y + RecastCommon.GetDirOffsetY(dir); // First check that the neighbour cell is in bounds.

                  if (nx < 0 || ny < 0 || nx >= w || ny >= h) continue; // Iterate over all neighbour spans and check if any of the is
                  // accessible from current cell.

                  var nc = chf.cells[nx + ny * w];

                  for (var k = nc.index, nk = nc.index + nc.count; k < nk; ++k) {
                    var ns = chf.spans[k];

                    var _bot = Math.max(_s.y, ns.y);

                    var _top = Math.min(_s.y + _s.h, ns.y + ns.h); // Check that the gap between the spans is walkable,
                    // and that the climb height between the gaps is not too high.


                    if (_top - _bot >= walkableHeight && Math.abs(ns.y - _s.y) <= walkableClimb) {
                      // Mark direction as walkable.
                      var lidx = k - nc.index;

                      if (lidx < 0 || lidx > MAX_LAYERS) {
                        tooHighNeighbour = Math.max(tooHighNeighbour, lidx);
                        continue;
                      }

                      RecastCommon.SetCon(_s, dir, lidx);
                      break;
                    }
                  }
                }
              }
            }
          }

          if (tooHighNeighbour > MAX_LAYERS) {
            throw new RuntimeException("rcBuildCompactHeightfield: Heightfield has too many layers " + tooHighNeighbour + " (max: " + MAX_LAYERS + ")");
          }

          ctx.stopTimer("BUILD_COMPACTHEIGHTFIELD");
          return chf;
        }
      }]);

      return Recast;
    }();

    var RecastBuilderConfig$1 =
    /** The width of the field aPoly the x-axis. [Limit: >= 0] [Units: vx] **/

    /** The height of the field aPoly the z-axis. [Limit: >= 0] [Units: vx] **/

    /** The minimum bounds of the field's AABB. [(x, y, z)] [Units: wu] **/

    /** The maximum bounds of the field's AABB. [(x, y, z)] [Units: wu] **/

    /** The size of the non-navigable border around the heightfield. [Limit: >=0] [Units: vx] **/

    /** Set to true for tiled build **/

    /** Set to false to disable building detailed mesh **/
    // RecastBuilderConfig(RecastConfig cfg, bmin, bmax) {
    //         this(cfg, bmin, bmax, 0, 0, false);
    //     }
    // RecastBuilderConfig(RecastConfig cfg, bmin, bmax,  tx,  ty,  tiled) {
    //         this(cfg, bmin, bmax, tx, ty, tiled, true);
    //     }
    function RecastBuilderConfig(cfg, bmin, bmax) {
      var tx = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
      var ty = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;
      var tiled = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;
      var buildMeshDetail = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;

      _classCallCheck(this, RecastBuilderConfig);

      _defineProperty(this, "cfg", null);

      _defineProperty(this, "width", 0);

      _defineProperty(this, "height", 0);

      _defineProperty(this, "bmin", new Array(3));

      _defineProperty(this, "bmax", new Array(3));

      _defineProperty(this, "borderSize", 0);

      _defineProperty(this, "tiled", 0);

      _defineProperty(this, "buildMeshDetail", false);

      this.cfg = cfg;
      this.tiled = tiled;
      this.buildMeshDetail = buildMeshDetail;
      RecastVectors$1.copy2(this.bmin, bmin);
      RecastVectors$1.copy2(this.bmax, bmax);

      if (tiled) {
        ts = cfg.tileSize * cfg.cs;
        this.bmin[0] += tx * ts;
        this.bmin[2] += ty * ts;
        this.bmax[0] = this.bmin[0] + ts;
        this.bmax[2] = this.bmin[2] + ts; // Expand the heighfield bounding box by border size to find the extents of geometry we need to build this
        // tile.
        //
        // This is done in order to make sure that the navmesh tiles connect correctly at the borders,
        // and the obstacles close to the border work correctly with the dilation process.
        // No polygons (or contours) will be created on the border area.
        //
        // IMPORTANT!
        //
        // :''''''''':
        // : +-----+ :
        // : | | :
        // : | |<--- tile to build
        // : | | :
        // : +-----+ :<-- geometry needed
        // :.........:
        //
        // You should use this bounding box to query your input geometry.
        //
        // For example if you build a navmesh for terrain, and want the navmesh tiles to match the terrain tile size
        // you will need to pass in data from neighbour terrain tiles too! In a simple case, just pass in all the 8
        // neighbours,
        // or use the bounding box below to only pass in a sliver of each of the 8 neighbours.

        this.borderSize = cfg.walkableRadius + 3; // Reserve enough padding.

        this.bmin[0] -= this.borderSize * cfg.cs;
        this.bmin[2] -= this.borderSize * cfg.cs;
        this.bmax[0] += this.borderSize * cfg.cs;
        this.bmax[2] += this.borderSize * cfg.cs;
        this.width = cfg.tileSize + this.borderSize * 2;
        this.height = cfg.tileSize + this.borderSize * 2;
      } else {
        var wh = Recast.calcGridSize(this.bmin, this.bmax, cfg.cs);
        this.width = wh[0];
        this.height = wh[1];
        this.borderSize = 0;
      } //ADDED:


      this.width = Math.floor(this.width);
      this.height = Math.floor(this.height);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var Context = /*#__PURE__*/function () {
      function Context() {
        _classCallCheck(this, Context);
      }

      _createClass(Context, [{
        key: "startTimer",
        value: function startTimer(string) {// TODO Auto-generated method stub
        }
      }, {
        key: "stopTimer",
        value: function stopTimer(string) {// TODO Auto-generated method stub
        }
      }, {
        key: "warn",
        value: function warn(string) {
          console.log(string);
        }
      }]);

      return Context;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Represents a heightfield layer within a layer set. */
    var Heightfield =
    /** The width of the heightfield. (APoly the x-axis in cell units.) */

    /** The height of the heightfield. (APoly the z-axis in cell units.) */

    /** The minimum bounds in world space. [(x, y, z)] */

    /** The maximum bounds in world space. [(x, y, z)] */

    /** The size of each cell. (On the xz-plane.) */

    /** The height of each cell. (The minimum increment aPoly the y-axis.) */

    /** Heightfield of spans (width*height). */
    function Heightfield(width, height, bmin, bmax, cs, ch) {
      _classCallCheck(this, Heightfield);

      _defineProperty(this, "width", 0);

      _defineProperty(this, "height", 0);

      _defineProperty(this, "bmin", void 0);

      _defineProperty(this, "bmax", void 0);

      _defineProperty(this, "cs", void 0);

      _defineProperty(this, "ch", void 0);

      _defineProperty(this, "spans", []);

      this.width = width;
      this.height = height;
      this.bmin = bmin;
      this.bmax = bmax;
      this.cs = cs;
      this.ch = ch;
      this.spans = new Array(width * height);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Represents a span in a heightfield. */
    var Span = function Span() {
      _classCallCheck(this, Span);

      _defineProperty(this, "smin", 0);

      _defineProperty(this, "smax", 0);

      _defineProperty(this, "area", 0);

      _defineProperty(this, "next", null);
    };

    var RecastRasterization = /*#__PURE__*/function () {
      function RecastRasterization() {
        _classCallCheck(this, RecastRasterization);
      }

      _createClass(RecastRasterization, null, [{
        key: "overlapBounds",
        value: function overlapBounds(amin, amax, bmin, bmax) {
          var overlap = true;
          overlap = amin[0] > bmax[0] || amax[0] < bmin[0] ? false : overlap;
          overlap = amin[1] > bmax[1] || amax[1] < bmin[1] ? false : overlap;
          overlap = amin[2] > bmax[2] || amax[2] < bmin[2] ? false : overlap;
          return overlap;
        }
        /**
         * The span addition can be set to favor flags. If the span is merged to another span and the new 'smax' is
         * within 'flagMergeThr' units from the existing span, the span flags are merged.
         * 
         * @see Heightfield, Span.
         */

      }, {
        key: "addSpan",
        value: function addSpan(hf, x, y, smin, smax, area, flagMergeThr) {
          var idx = x + y * hf.width;
          var s = new Span();
          s.smin = smin;
          s.smax = smax;
          s.area = area;
          s.next = null; // Empty cell, add the first span.

          if (hf.spans[idx] == null) {
            hf.spans[idx] = s;
            return;
          }

          var prev = null;
          var cur = hf.spans[idx]; // Insert and merge spans.

          while (cur != null) {
            if (cur.smin > s.smax) {
              // Current span is further than the new span, break.
              break;
            } else if (cur.smax < s.smin) {
              // Current span is before the new span advance.
              prev = cur;
              cur = cur.next;
            } else {
              // Merge spans.
              if (cur.smin < s.smin) s.smin = cur.smin;
              if (cur.smax > s.smax) s.smax = cur.smax; // Merge flags.

              if (Math.abs(s.smax - cur.smax) <= flagMergeThr) s.area = Math.max(s.area, cur.area); // Remove current span.

              var next = cur.next;
              if (prev != null) prev.next = next;else hf.spans[idx] = next;
              cur = next;
            }
          } // Insert new span.


          if (prev != null) {
            s.next = prev.next;
            prev.next = s;
          } else {
            s.next = hf.spans[idx];
            hf.spans[idx] = s;
          }
        } //divides a convex polygons into two convex polygons on both sides of a line

      }, {
        key: "dividePoly",
        value: function dividePoly(buf, _in, nin, out1, out2, x, axis) {
          var d = new Array(12);

          for (var i = 0; i < nin; ++i) {
            d[i] = x - buf[_in + i * 3 + axis];
          }

          var m = 0,
              n = 0;

          for (var _i = 0, j = nin - 1; _i < nin; j = _i, ++_i) {
            var ina = d[j] >= 0;
            var inb = d[_i] >= 0;

            if (ina != inb) {
              var s = d[j] / (d[j] - d[_i]);
              buf[out1 + m * 3 + 0] = buf[_in + j * 3 + 0] + (buf[_in + _i * 3 + 0] - buf[_in + j * 3 + 0]) * s;
              buf[out1 + m * 3 + 1] = buf[_in + j * 3 + 1] + (buf[_in + _i * 3 + 1] - buf[_in + j * 3 + 1]) * s;
              buf[out1 + m * 3 + 2] = buf[_in + j * 3 + 2] + (buf[_in + _i * 3 + 2] - buf[_in + j * 3 + 2]) * s;
              RecastVectors$1.copy4(buf, out2 + n * 3, buf, out1 + m * 3);
              m++;
              n++; // add the i'th poPoly to the right polygon. Do NOT add points that are on the dividing line
              // since these were already added above

              if (d[_i] > 0) {
                RecastVectors$1.copy4(buf, out1 + m * 3, buf, _in + _i * 3);
                m++;
              } else if (d[_i] < 0) {
                RecastVectors$1.copy4(buf, out2 + n * 3, buf, _in + _i * 3);
                n++;
              }
            } else // same side
              {
                // add the i'th poPoly to the right polygon. Addition is done even for points on the dividing line
                if (d[_i] >= 0) {
                  RecastVectors$1.copy4(buf, out1 + m * 3, buf, _in + _i * 3);
                  m++;
                  if (d[_i] != 0) continue;
                }

                RecastVectors$1.copy4(buf, out2 + n * 3, buf, _in + _i * 3);
                n++;
              }
          }

          return [m, n];
        }
      }, {
        key: "rasterizeTri",
        value: function rasterizeTri(verts, v0, v1, v2, area, hf, bmin, bmax, cs, ics, ich, flagMergeThr) {
          var w = hf.width;
          var h = hf.height;
          var tmin = new Array(3);
          var tmax = new Array(3);
          var by = bmax[1] - bmin[1]; // Calculate the bounding box of the triangle.

          RecastVectors$1.copy3(tmin, verts, v0 * 3);
          RecastVectors$1.copy3(tmax, verts, v0 * 3);
          RecastVectors$1.min(tmin, verts, v1 * 3);
          RecastVectors$1.min(tmin, verts, v2 * 3);
          RecastVectors$1.max(tmax, verts, v1 * 3);
          RecastVectors$1.max(tmax, verts, v2 * 3); // If the triangle does not touch the bbox of the heightfield, skip the triagle.

          if (!RecastRasterization.overlapBounds(bmin, bmax, tmin, tmax)) return; // Calculate the footprPoly of the triangle on the grid's y-axis

          var y0 = Math.floor((tmin[2] - bmin[2]) * ics);
          var y1 = Math.floor((tmax[2] - bmin[2]) * ics);
          y0 = RecastCommon.clamp(y0, 0, h - 1);
          y1 = RecastCommon.clamp(y1, 0, h - 1); // Clip the triangle into all grid cells it touches.

          var buf = new Array(7 * 3 * 4).fill(0);
          var _in = 0;
          var inrow = 7 * 3;
          var p1 = inrow + 7 * 3;
          var p2 = p1 + 7 * 3;
          RecastVectors$1.copy4(buf, 0, verts, v0 * 3);
          RecastVectors$1.copy4(buf, 3, verts, v1 * 3);
          RecastVectors$1.copy4(buf, 6, verts, v2 * 3);
          var nvrow,
              nvIn = 3;

          for (var y = y0; y <= y1; ++y) {
            // Clip polygon to row. Store the remaining polygon as well
            var cz = bmin[2] + y * cs;
            var nvrowin = RecastRasterization.dividePoly(buf, _in, nvIn, inrow, p1, cz + cs, 2);
            nvrow = nvrowin[0];
            nvIn = nvrowin[1];
            {
              var temp = _in;
              _in = p1;
              p1 = temp;
            }
            if (nvrow < 3) continue; // find the horizontal bounds _in the row

            var minX = buf[inrow];
            var maxX = buf[inrow];

            for (var i = 1; i < nvrow; ++i) {
              if (minX > buf[inrow + i * 3]) minX = buf[inrow + i * 3];
              if (maxX < buf[inrow + i * 3]) maxX = buf[inrow + i * 3];
            }

            var x0 = Math.floor((minX - bmin[0]) * ics);
            var x1 = Math.floor((maxX - bmin[0]) * ics);
            x0 = RecastCommon.clamp(x0, 0, w - 1);
            x1 = RecastCommon.clamp(x1, 0, w - 1);
            var nv = void 0,
                nv2 = nvrow;

            for (var x = x0; x <= x1; ++x) {
              // Clip polygon to column. store the remaining polygon as well
              var cx = bmin[0] + x * cs;
              var nvnv2 = RecastRasterization.dividePoly(buf, inrow, nv2, p1, p2, cx + cs, 0);
              nv = nvnv2[0];
              nv2 = nvnv2[1];
              {
                var _temp = inrow;
                inrow = p2;
                p2 = _temp;
              }
              if (nv < 3) continue; // Calculate min and max of the span.

              var smin = buf[p1 + 1];
              var smax = buf[p1 + 1];

              for (var _i2 = 1; _i2 < nv; ++_i2) {
                smin = Math.min(smin, buf[p1 + _i2 * 3 + 1]);
                smax = Math.max(smax, buf[p1 + _i2 * 3 + 1]);
              }

              smin -= bmin[1];
              smax -= bmin[1]; // Skip the span if it is outside the heightfield bbox

              if (smax < 0.0) continue;
              if (smin > by) continue; // Clamp the span to the heightfield bbox.

              if (smin < 0.0) smin = 0;
              if (smax > by) smax = by; // Snap the span to the heightfield height grid.

              var ismin = RecastCommon.clamp(Math.floor(smin * ich), 0, RecastConstants.RC_SPAN_MAX_HEIGHT);
              var ismax = RecastCommon.clamp(Math.ceil(smax * ich), ismin + 1, RecastConstants.RC_SPAN_MAX_HEIGHT);
              RecastRasterization.addSpan(hf, x, y, ismin, ismax, area, flagMergeThr);
            }
          }
        }
        /**
         * No spans will be added if the triangle does not overlap the heightfield grid.
         * 
         * @see Heightfield
         */

      }, {
        key: "rasterizeTriangle",
        value: function rasterizeTriangle(ctx, verts, v0, v1, v2, area, solid, flagMergeThr) {
          ctx.startTimer("RASTERIZE_TRIANGLES");
          ics = 1.0 / solid.cs;
          ich = 1.0 / solid.ch;
          rasterizeTri(verts, v0, v1, v2, area, solid, solid.bmin, solid.bmax, solid.cs, ics, ich, flagMergeThr);
          ctx.stopTimer("RASTERIZE_TRIANGLES");
        }
        /**
         * Spans will only be added for triangles that overlap the heightfield grid.
         * 
         * @see Heightfield
         */

      }, {
        key: "rasterizeTrianglesA",
        value: function rasterizeTrianglesA(ctx, verts, tris, areas, nt, solid, flagMergeThr) {
          ctx.startTimer("RASTERIZE_TRIANGLES");
          var ics = 1.0 / solid.cs;
          var ich = 1.0 / solid.ch; // Rasterize triangles.

          for (var i = 0; i < nt; ++i) {
            var v0 = tris[i * 3 + 0];
            var v1 = tris[i * 3 + 1];
            var v2 = tris[i * 3 + 2]; // Rasterize.

            RecastRasterization.rasterizeTri(verts, v0, v1, v2, areas[i], solid, solid.bmin, solid.bmax, solid.cs, ics, ich, flagMergeThr);
          }

          ctx.stopTimer("RASTERIZE_TRIANGLES");
        }
        /**
         * Spans will only be added for triangles that overlap the heightfield grid.
         * 
         * @see Heightfield
         */

      }, {
        key: "rasterizeTrianglesB",
        value: function rasterizeTrianglesB(ctx, verts, areas, nt, solid, flagMergeThr) {
          ctx.startTimer("RASTERIZE_TRIANGLES");
          var ics = 1.0 / solid.cs;
          var ich = 1.0 / solid.ch; // Rasterize triangles.

          for (var i = 0; i < nt; ++i) {
            var v0 = i * 3 + 0;
            var v1 = i * 3 + 1;
            var v2 = i * 3 + 2; // Rasterize.

            RecastRasterization.rasterizeTri(verts, v0, v1, v2, areas[i], solid, solid.bmin, solid.bmax, solid.cs, ics, ich, flagMergeThr);
          }

          ctx.stopTimer("RASTERIZE_TRIANGLES");
        }
      }]);

      return RecastRasterization;
    }();

    var RecastFilter = /*#__PURE__*/function () {
      function RecastFilter() {
        _classCallCheck(this, RecastFilter);
      }

      _createClass(RecastFilter, null, [{
        key: "filterLowHangingWalkableObstacles",
        /// @par
        ///
        /// Allows the formation of walkable regions that will flow over low lying 
        /// objects such as curbs, and up structures such as stairways. 
        /// 
        /// Two neighboring spans are walkable if: <tt>rcAbs(currentSpan.smax - neighborSpan.smax) < waklableClimb</tt>
        /// 
        /// @warning Will override the effect of #rcFilterLedgeSpans.  So if both filters are used, call
        /// #rcFilterLedgeSpans after calling this filter. 
        ///
        /// @see rcHeightfield, rcConfig
        value: function filterLowHangingWalkableObstacles(ctx, walkableClimb, solid) {
          ctx.startTimer("FILTER_LOW_OBSTACLES");
          var w = solid.width;
          var h = solid.height;

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              var ps = null;
              var previousWalkable = false;
              var previousArea = RecastConstants.RC_NULL_AREA;

              for (var s = solid.spans[x + y * w]; s != null; ps = s, s = s.next) {
                var walkable = s.area != RecastConstants.RC_NULL_AREA; // If current span is not walkable, but there is walkable
                // span just below it, mark the span above it walkable too.

                if (!walkable && previousWalkable) {
                  if (Math.abs(s.smax - ps.smax) <= walkableClimb) s.area = previousArea;
                } // Copy walkable flag so that it cannot propagate
                // past multiple non-walkable objects.


                previousWalkable = walkable;
                previousArea = s.area;
              }
            }
          }

          ctx.stopTimer("FILTER_LOW_OBSTACLES");
        } /// @par
        ///
        /// A ledge is a span with one or more neighbors whose maximum is further away than @p walkableClimb
        /// from the current span's maximum.
        /// This method removes the impact of the overestimation of conservative voxelization 
        /// so the resulting mesh will not have regions hanging in the air over ledges.
        /// 
        /// A span is a ledge if: <tt>rcAbs(currentSpan.smax - neighborSpan.smax) > walkableClimb</tt>
        /// 
        /// @see rcHeightfield, rcConfig

      }, {
        key: "filterLedgeSpans",
        value: function filterLedgeSpans(ctx, walkableHeight, walkableClimb, solid) {
          ctx.startTimer("FILTER_BORDER");
          var w = solid.width;
          var h = solid.height;
          var MAX_HEIGHT = 0xfff; // Mark border spans.

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              for (var s = solid.spans[x + y * w]; s != null; s = s.next) {
                // Skip non walkable spans.
                if (s.area == RecastConstants.RC_NULL_AREA) continue;
                var bot = s.smax;
                var top = s.next != null ? s.next.smin : MAX_HEIGHT; // Find neighbours minimum height.

                var minh = MAX_HEIGHT; // Min and max height of accessible neighbours.

                var asmin = s.smax;
                var asmax = s.smax;

                for (var dir = 0; dir < 4; ++dir) {
                  var dx = x + RecastCommon.GetDirOffsetX(dir);
                  var dy = y + RecastCommon.GetDirOffsetY(dir); // Skip neighbours which are out of bounds.

                  if (dx < 0 || dy < 0 || dx >= w || dy >= h) {
                    minh = Math.min(minh, -walkableClimb - bot);
                    continue;
                  } // From minus infinity to the first span.


                  var ns = solid.spans[dx + dy * w];
                  var nbot = -walkableClimb;
                  var ntop = ns != null ? ns.smin : MAX_HEIGHT; // Skip neightbour if the gap between the spans is too small.

                  if (Math.min(top, ntop) - Math.max(bot, nbot) > walkableHeight) minh = Math.min(minh, nbot - bot); // Rest of the spans.

                  for (var _ns = solid.spans[dx + dy * w]; _ns != null; _ns = _ns.next) {
                    nbot = _ns.smax;
                    ntop = _ns.next != null ? _ns.next.smin : MAX_HEIGHT; // Skip neightbour if the gap between the spans is too small.

                    if (Math.min(top, ntop) - Math.max(bot, nbot) > walkableHeight) {
                      minh = Math.min(minh, nbot - bot); // Find min/max accessible neighbour height. 

                      if (Math.abs(nbot - bot) <= walkableClimb) {
                        if (nbot < asmin) asmin = nbot;
                        if (nbot > asmax) asmax = nbot;
                      }
                    }
                  }
                } // The current span is close to a ledge if the drop to any
                // neighbour span is less than the walkableClimb.


                if (minh < -walkableClimb) s.area = RecastConstants.RC_NULL_AREA; // If the difference between all neighbours is too large,
                // we are at steep slope, mark the span as ledge.

                if (asmax - asmin > walkableClimb) {
                  s.area = RecastConstants.RC_NULL_AREA;
                }
              }
            }
          }

          ctx.stopTimer("FILTER_BORDER");
        } /// @par
        ///
        /// For this filter, the clearance above the span is the distance from the span's 
        /// maximum to the next higher span's minimum. (Same grid column.)
        /// 
        /// @see rcHeightfield, rcConfig

      }, {
        key: "filterWalkableLowHeightSpans",
        value: function filterWalkableLowHeightSpans(ctx, walkableHeight, solid) {
          ctx.startTimer("FILTER_WALKABLE");
          var w = solid.width;
          var h = solid.height;
          var MAX_HEIGHT = 0xfff; // Remove walkable flag from spans which do not have enough
          // space above them for the agent to stand there.

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              for (var s = solid.spans[x + y * w]; s != null; s = s.next) {
                var bot = s.smax;
                var top = s.next != null ? s.next.smin : MAX_HEIGHT;
                if (top - bot <= walkableHeight) s.area = RecastConstants.RC_NULL_AREA;
              }
            }
          }

          ctx.stopTimer("FILTER_WALKABLE");
        }
      }]);

      return RecastFilter;
    }();

    var RecastArea = /*#__PURE__*/function () {
      function RecastArea() {
        _classCallCheck(this, RecastArea);
      }

      _createClass(RecastArea, [{
        key: "medianFilterWalkableArea",
        /// @par
        ///
        /// This filter is usually applied after applying area id's using functions
        /// such as #rcMarkBoxArea, #rcMarkConvexPolyArea, and #rcMarkCylinderArea.
        ///
        /// @see rcCompactHeightfield
        value: function medianFilterWalkableArea(ctx, chf) {
          var w = chf.width;
          var h = chf.height;
          ctx.startTimer("MEDIAN_AREA");
          var areas = new Array(chf.spanCount);

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              var c = chf.cells[x + y * w];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                s = chf.spans[i];

                if (chf.areas[i] == RecastConstants.RC_NULL_AREA) {
                  areas[i] = chf.areas[i];
                  continue;
                }

                nei = new Array(9);

                for (var j = 0; j < 9; ++j) {
                  nei[j] = chf.areas[i];
                }

                for (var dir = 0; dir < 4; ++dir) {
                  if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                    var ax = x + RecastCommon.GetDirOffsetX(dir);
                    var ay = y + RecastCommon.GetDirOffsetY(dir);
                    var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, dir);
                    if (chf.areas[ai] != RecastConstants.RC_NULL_AREA) nei[dir * 2 + 0] = chf.areas[ai];
                    var as = chf.spans[ai];
                    var dir2 = dir + 1 & 0x3;

                    if (RecastCommon.GetCon(as, dir2) != RecastConstants.RC_NOT_CONNECTED) {
                      var ax2 = ax + RecastCommon.GetDirOffsetX(dir2);
                      var ay2 = ay + RecastCommon.GetDirOffsetY(dir2);
                      var ai2 = chf.cells[ax2 + ay2 * w].index + RecastCommon.GetCon(as, dir2);
                      if (chf.areas[ai2] != RecastConstants.RC_NULL_AREA) nei[dir * 2 + 1] = chf.areas[ai2];
                    }
                  }
                }

                Arrays.sort(nei);
                areas[i] = nei[4];
              }
            }
          }

          chf.areas = areas;
          ctx.stopTimer("MEDIAN_AREA");
          return true;
        } /// @par
        ///
        /// The value of spacial parameters are in world units.
        ///
        /// @see rcCompactHeightfield, rcMedianFilterWalkableArea

      }, {
        key: "markBoxArea",
        value: function markBoxArea(ctx, bmin, bmax, areaMod, chf) {
          ctx.startTimer("MARK_BOX_AREA");
          var minx = Math.floor((bmin[0] - chf.bmin[0]) / chf.cs);
          var miny = Math.floor((bmin[1] - chf.bmin[1]) / chf.ch);
          var minz = Math.floor((bmin[2] - chf.bmin[2]) / chf.cs);
          var maxx = Math.floor((bmax[0] - chf.bmin[0]) / chf.cs);
          var maxy = Math.floor((bmax[1] - chf.bmin[1]) / chf.ch);
          var maxz = Math.floor((bmax[2] - chf.bmin[2]) / chf.cs);
          if (maxx < 0) return;
          if (minx >= chf.width) return;
          if (maxz < 0) return;
          if (minz >= chf.height) return;
          if (minx < 0) minx = 0;
          if (maxx >= chf.width) maxx = chf.width - 1;
          if (minz < 0) minz = 0;
          if (maxz >= chf.height) maxz = chf.height - 1;

          for (var z = minz; z <= maxz; ++z) {
            for (var x = minx; x <= maxx; ++x) {
              var c = chf.cells[x + z * chf.width];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                var _s = chf.spans[i];

                if (_s.y >= miny && _s.y <= maxy) {
                  if (chf.areas[i] != RecastConstants.RC_NULL_AREA) chf.areas[i] = areaMod.apply(chf.areas[i]);
                }
              }
            }
          }

          ctx.stopTimer("MARK_BOX_AREA");
        }
      }, {
        key: "offsetPoly",
        value: function offsetPoly(verts, nverts, offset, outVerts, maxOutVerts) {
          MITER_LIMIT = 1.20;
          var n = 0;

          for (var i = 0; i < nverts; i++) {
            var a = (i + nverts - 1) % nverts;
            var b = i;
            var c = (i + 1) % nverts;
            var va = a * 3;
            var vb = b * 3;
            var vc = c * 3;
            dx0 = verts[vb] - verts[va];
            dy0 = verts[vb + 2] - verts[va + 2];
            d0 = dx0 * dx0 + dy0 * dy0;

            if (d0 > 1e-6) {
              d0 = 1.0 / Math.sqrt(d0);
              dx0 *= d0;
              dy0 *= d0;
            }

            dx1 = verts[vc] - verts[vb];
            dy1 = verts[vc + 2] - verts[vb + 2];
            d1 = dx1 * dx1 + dy1 * dy1;

            if (d1 > 1e-6) {
              d1 = 1.0 / Math.sqrt(d1);
              dx1 *= d1;
              dy1 *= d1;
            }

            dlx0 = -dy0;
            dly0 = dx0;
            dlx1 = -dy1;
            dly1 = dx1;
            cross = dx1 * dy0 - dx0 * dy1;
            dmx = (dlx0 + dlx1) * 0.5;
            dmy = (dly0 + dly1) * 0.5;
            dmr2 = dmx * dmx + dmy * dmy;
            var bevel = dmr2 * MITER_LIMIT * MITER_LIMIT < 1.0;

            if (dmr2 > 1e-6) {
              scale = 1.0 / dmr2;
              dmx *= scale;
              dmy *= scale;
            }

            if (bevel && cross < 0.0) {
              if (n + 2 >= maxOutVerts) return 0;
              d = (1.0 - (dx0 * dx1 + dy0 * dy1)) * 0.5;
              outVerts[n * 3 + 0] = verts[vb] + (-dlx0 + dx0 * d) * offset;
              outVerts[n * 3 + 1] = verts[vb + 1];
              outVerts[n * 3 + 2] = verts[vb + 2] + (-dly0 + dy0 * d) * offset;
              n++;
              outVerts[n * 3 + 0] = verts[vb] + (-dlx1 - dx1 * d) * offset;
              outVerts[n * 3 + 1] = verts[vb + 1];
              outVerts[n * 3 + 2] = verts[vb + 2] + (-dly1 - dy1 * d) * offset;
              n++;
            } else {
              if (n + 1 >= maxOutVerts) return 0;
              outVerts[n * 3 + 0] = verts[vb] - dmx * offset;
              outVerts[n * 3 + 1] = verts[vb + 1];
              outVerts[n * 3 + 2] = verts[vb + 2] - dmy * offset;
              n++;
            }
          }

          return n;
        } /// @par
        ///
        /// The value of spacial parameters are in world units.
        ///
        /// @see rcCompactHeightfield, rcMedianFilterWalkableArea

      }, {
        key: "markCylinderArea",
        value: function markCylinderArea(ctx, pos, r, h, areaMod, chf) {
          ctx.startTimer("MARK_CYLINDER_AREA");
          bmin = new Array(3);
          bmax = new Array(3);
          bmin[0] = pos[0] - r;
          bmin[1] = pos[1];
          bmin[2] = pos[2] - r;
          bmax[0] = pos[0] + r;
          bmax[1] = pos[1] + h;
          bmax[2] = pos[2] + r;
          r2 = r * r;
          var minx = Math.floor((bmin[0] - chf.bmin[0]) / chf.cs);
          var miny = Math.floor((bmin[1] - chf.bmin[1]) / chf.ch);
          var minz = Math.floor((bmin[2] - chf.bmin[2]) / chf.cs);
          var maxx = Math.floor((bmax[0] - chf.bmin[0]) / chf.cs);
          var maxy = Math.floor((bmax[1] - chf.bmin[1]) / chf.ch);
          var maxz = Math.floor((bmax[2] - chf.bmin[2]) / chf.cs);
          if (maxx < 0) return;
          if (minx >= chf.width) return;
          if (maxz < 0) return;
          if (minz >= chf.height) return;
          if (minx < 0) minx = 0;
          if (maxx >= chf.width) maxx = chf.width - 1;
          if (minz < 0) minz = 0;
          if (maxz >= chf.height) maxz = chf.height - 1;

          for (var z = minz; z <= maxz; ++z) {
            for (var x = minx; x <= maxx; ++x) {
              var c = chf.cells[x + z * chf.width];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                var _s2 = chf.spans[i];
                if (chf.areas[i] == RecastConstants.RC_NULL_AREA) continue;

                if (_s2.y >= miny && _s2.y <= maxy) {
                  sx = chf.bmin[0] + (x + 0.5) * chf.cs;
                  sz = chf.bmin[2] + (z + 0.5) * chf.cs;
                  dx = sx - pos[0];
                  dz = sz - pos[2];

                  if (dx * dx + dz * dz < r2) {
                    chf.areas[i] = areaMod.apply(chf.areas[i]);
                  }
                }
              }
            }
          }

          ctx.stopTimer("MARK_CYLINDER_AREA");
        }
      }], [{
        key: "erodeWalkableArea",
        /// @par
        ///
        /// Basically, any spans that are closer to a boundary or obstruction than the specified radius
        /// are marked as unwalkable.
        ///
        /// This method is usually called immediately after the heightfield has been built.
        ///
        /// @see rcCompactHeightfield, rcBuildCompactHeightfield, rcConfig::walkableRadius
        value: function erodeWalkableArea(ctx, radius, chf) {
          var w = chf.width;
          var h = chf.height;
          ctx.startTimer("ERODE_AREA");
          var dist = new Array(chf.spanCount).fill(255); // Arrays.fill(dist, 255);
          // Mark boundary cells.

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              var c = chf.cells[x + y * w];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                if (chf.areas[i] == RecastConstants.RC_NULL_AREA) {
                  dist[i] = 0;
                } else {
                  var _s3 = chf.spans[i];
                  var nc = 0;

                  for (var dir = 0; dir < 4; ++dir) {
                    if (RecastCommon.GetCon(_s3, dir) != RecastConstants.RC_NOT_CONNECTED) {
                      var nx = x + RecastCommon.GetDirOffsetX(dir);
                      var ny = y + RecastCommon.GetDirOffsetY(dir);
                      var nidx = chf.cells[nx + ny * w].index + RecastCommon.GetCon(_s3, dir);

                      if (chf.areas[nidx] != RecastConstants.RC_NULL_AREA) {
                        nc++;
                      }
                    }
                  } // At least one missing neighbour.


                  if (nc != 4) dist[i] = 0;
                }
              }
            }
          }

          var nd; // console.log(chf.spans[450240]);
          // Pass 1

          for (var _y = 0; _y < h; ++_y) {
            for (var _x = 0; _x < w; ++_x) {
              var _c = chf.cells[_x + _y * w];

              for (var _i = _c.index, _ni = _c.index + _c.count; _i < _ni; ++_i) {
                var _s4 = chf.spans[_i];

                if (RecastCommon.GetCon(_s4, 0) != RecastConstants.RC_NOT_CONNECTED) {
                  // (-1,0)
                  var ax = _x + RecastCommon.GetDirOffsetX(0);

                  var ay = _y + RecastCommon.GetDirOffsetY(0);

                  var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(_s4, 0);
                  var as = chf.spans[ai];
                  nd = Math.min(dist[ai] + 2, 255);
                  if (nd < dist[_i]) dist[_i] = nd; // (-1,-1)

                  if (RecastCommon.GetCon(as, 3) != RecastConstants.RC_NOT_CONNECTED) {
                    var aax = ax + RecastCommon.GetDirOffsetX(3);
                    var aay = ay + RecastCommon.GetDirOffsetY(3);
                    var aai = chf.cells[aax + aay * w].index + RecastCommon.GetCon(as, 3);
                    nd = Math.min(dist[aai] + 3, 255);
                    if (nd < dist[_i]) dist[_i] = nd;
                  }
                }

                if (RecastCommon.GetCon(_s4, 3) != RecastConstants.RC_NOT_CONNECTED) {
                  // (0,-1)
                  var _ax = _x + RecastCommon.GetDirOffsetX(3);

                  var _ay = _y + RecastCommon.GetDirOffsetY(3);

                  var _ai = chf.cells[_ax + _ay * w].index + RecastCommon.GetCon(_s4, 3);

                  var _as = chf.spans[_ai];
                  nd = Math.min(dist[_ai] + 2, 255);
                  if (nd < dist[_i]) dist[_i] = nd; // (1,-1)

                  if (RecastCommon.GetCon(_as, 2) != RecastConstants.RC_NOT_CONNECTED) {
                    var _aax = _ax + RecastCommon.GetDirOffsetX(2);

                    var _aay = _ay + RecastCommon.GetDirOffsetY(2);

                    var _aai = chf.cells[_aax + _aay * w].index + RecastCommon.GetCon(_as, 2);

                    nd = Math.min(dist[_aai] + 3, 255);
                    if (nd < dist[_i]) dist[_i] = nd;
                  }
                }
              }
            }
          } // Pass 2


          for (var _y2 = h - 1; _y2 >= 0; --_y2) {
            for (var _x2 = w - 1; _x2 >= 0; --_x2) {
              // if(y == 671&& x == 671)
              // 	console.log("There")
              var _c2 = chf.cells[_x2 + _y2 * w];

              for (var _i2 = _c2.index, _ni2 = _c2.index + _c2.count; _i2 < _ni2; ++_i2) {
                var _s5 = chf.spans[_i2];

                if (RecastCommon.GetCon(_s5, 2) != RecastConstants.RC_NOT_CONNECTED) {
                  // (1,0)
                  var _ax2 = _x2 + RecastCommon.GetDirOffsetX(2);

                  var _ay2 = _y2 + RecastCommon.GetDirOffsetY(2);

                  var _ai2 = chf.cells[_ax2 + _ay2 * w].index + RecastCommon.GetCon(_s5, 2);

                  if (_ai2 == 450241) console.log("Here");
                  var _as2 = chf.spans[_ai2];
                  nd = Math.min(dist[_ai2] + 2, 255);
                  if (nd < dist[_i2]) dist[_i2] = nd; // (1,1)

                  if (RecastCommon.GetCon(_as2, 1) != RecastConstants.RC_NOT_CONNECTED) {
                    var _aax2 = _ax2 + RecastCommon.GetDirOffsetX(1);

                    var _aay2 = _ay2 + RecastCommon.GetDirOffsetY(1);

                    var _aai2 = chf.cells[_aax2 + _aay2 * w].index + RecastCommon.GetCon(_as2, 1);

                    nd = Math.min(dist[_aai2] + 3, 255);
                    if (nd < dist[_i2]) dist[_i2] = nd;
                  }
                }

                if (RecastCommon.GetCon(_s5, 1) != RecastConstants.RC_NOT_CONNECTED) {
                  // (0,1)
                  var _ax3 = _x2 + RecastCommon.GetDirOffsetX(1);

                  var _ay3 = _y2 + RecastCommon.GetDirOffsetY(1);

                  var _ai3 = chf.cells[_ax3 + _ay3 * w].index + RecastCommon.GetCon(_s5, 1);

                  var _as3 = chf.spans[_ai3];
                  nd = Math.min(dist[_ai3] + 2, 255);
                  if (nd < dist[_i2]) dist[_i2] = nd; // (-1,1)

                  if (RecastCommon.GetCon(_as3, 0) != RecastConstants.RC_NOT_CONNECTED) {
                    var _aax3 = _ax3 + RecastCommon.GetDirOffsetX(0);

                    var _aay3 = _ay3 + RecastCommon.GetDirOffsetY(0);

                    var _aai3 = chf.cells[_aax3 + _aay3 * w].index + RecastCommon.GetCon(_as3, 0);

                    nd = Math.min(dist[_aai3] + 3, 255);
                    if (nd < dist[_i2]) dist[_i2] = nd;
                  }
                }
              }
            }
          }

          var thr = radius * 2;

          for (var _i3 = 0; _i3 < chf.spanCount; ++_i3) {
            if (dist[_i3] < thr) chf.areas[_i3] = RecastConstants.RC_NULL_AREA;
          }

          ctx.stopTimer("ERODE_AREA");
        }
      }, {
        key: "pointInPoly",
        value: function pointInPoly(verts, p) {
          var c = false;

          for (var _i4 = 0, _j = verts.length - 1; _i4 < verts.length; _j = _i4++) {
            var vi = _i4 * 3;
            var vj = _j * 3;
            if (verts[vi + 2] > p[2] != verts[vj + 2] > p[2] && p[0] < (verts[vj] - verts[vi]) * (p[2] - verts[vi + 2]) / (verts[vj + 2] - verts[vi + 2]) + verts[vi]) c = !c;
          }

          return c;
        } /// @par
        ///
        /// The value of spacial parameters are in world units.
        ///
        /// The y-values of the polygon vertices are ignored. So the polygon is effectively
        /// projected onto the xz-plane at @p hmin, then extruded to @p hmax.
        ///
        /// @see rcCompactHeightfield, rcMedianFilterWalkableArea

      }, {
        key: "markConvexPolyArea",
        value: function markConvexPolyArea(ctx, verts, hmin, hmax, areaMod, chf) {
          ctx.startTimer("MARK_CONVEXPOLY_AREA");
          bmin = new Array(3);
          max = new Array(3);
          RecastVectors.copy(bmin, verts, 0);
          RecastVectors.copy(bmax, verts, 0);

          for (var i = 1; i < verts.length; ++i) {
            RecastVectors.min(bmin, verts, i * 3);
            RecastVectors.max(bmax, verts, i * 3);
          }

          bmin[1] = hmin;
          bmax[1] = hmax;
          var minx = Math.floor((bmin[0] - chf.bmin[0]) / chf.cs);
          var miny = Math.floor((bmin[1] - chf.bmin[1]) / chf.ch);
          var minz = Math.floor((bmin[2] - chf.bmin[2]) / chf.cs);
          var maxx = Math.floor((bmax[0] - chf.bmin[0]) / chf.cs);
          var maxy = Math.floor((bmax[1] - chf.bmin[1]) / chf.ch);
          var maxz = Math.floor((bmax[2] - chf.bmin[2]) / chf.cs);
          if (maxx < 0) return;
          if (minx >= chf.width) return;
          if (maxz < 0) return;
          if (minz >= chf.height) return;
          if (minx < 0) minx = 0;
          if (maxx >= chf.width) maxx = chf.width - 1;
          if (minz < 0) minz = 0;
          if (maxz >= chf.height) maxz = chf.height - 1; // TODO: Optimize.

          for (var z = minz; z <= maxz; ++z) {
            for (var x = minx; x <= maxx; ++x) {
              var c = chf.cells[x + z * chf.width];

              for (var _i5 = c.index, ni = c.index + c.count; _i5 < ni; ++_i5) {
                var _s6 = chf.spans[_i5];
                if (chf.areas[_i5] == RecastConstants.RC_NULL_AREA) continue;

                if (_s6.y >= miny && _s6.y <= maxy) {
                  p = new Array(3);
                  p[0] = chf.bmin[0] + (x + 0.5) * chf.cs;
                  p[1] = 0;
                  p[2] = chf.bmin[2] + (z + 0.5) * chf.cs;

                  if (pointInPoly(verts, p)) {
                    chf.areas[_i5] = areaMod.apply(chf.areas[_i5]);
                  }
                }
              }
            }
          }

          ctx.stopTimer("MARK_CONVEXPOLY_AREA");
        }
      }]);

      return RecastArea;
    }();

    var _temp$1, _temp2$1;

    var RecastRegion = /*#__PURE__*/function () {
      function RecastRegion() {
        _classCallCheck(this, RecastRegion);
      }

      _createClass(RecastRegion, null, [{
        key: "calculateDistanceField",
        value: function calculateDistanceField(chf, src) {
          var maxDist;
          var w = chf.width;
          var h = chf.height; // Init distance and points.

          for (var i = 0; i < chf.spanCount; ++i) {
            src[i] = 0xffff;
          } // Mark boundary cells.


          for (var y = 0; y < h; ++y) {
            for (var _x = 0; _x < w; ++_x) {
              var c = chf.cells[_x + y * w];

              for (var _i = c.index, ni = c.index + c.count; _i < ni; ++_i) {
                var s = chf.spans[_i];
                var area = chf.areas[_i];
                var nc = 0;

                for (var dir = 0; dir < 4; ++dir) {
                  if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                    var ax = _x + RecastCommon.GetDirOffsetX(dir);

                    var ay = y + RecastCommon.GetDirOffsetY(dir);
                    var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, dir);

                    if (area == chf.areas[ai]) {
                      nc++;
                    }
                  }
                }

                if (nc != 4) {
                  src[_i] = 0;
                }
              }
            }
          } // Pass 1


          for (var _y = 0; _y < h; ++_y) {
            for (var _x2 = 0; _x2 < w; ++_x2) {
              var _c = chf.cells[_x2 + _y * w];

              for (var _i2 = _c.index, _ni = _c.index + _c.count; _i2 < _ni; ++_i2) {
                var _s = chf.spans[_i2];

                if (RecastCommon.GetCon(_s, 0) != RecastConstants.RC_NOT_CONNECTED) {
                  // (-1,0)
                  var _ax = _x2 + RecastCommon.GetDirOffsetX(0);

                  var _ay = _y + RecastCommon.GetDirOffsetY(0);

                  var _ai = chf.cells[_ax + _ay * w].index + RecastCommon.GetCon(_s, 0);

                  var as = chf.spans[_ai];

                  if (src[_ai] + 2 < src[_i2]) {
                    src[_i2] = src[_ai] + 2;
                  } // (-1,-1)


                  if (RecastCommon.GetCon(as, 3) != RecastConstants.RC_NOT_CONNECTED) {
                    var aax = _ax + RecastCommon.GetDirOffsetX(3);

                    var aay = _ay + RecastCommon.GetDirOffsetY(3);

                    var aai = chf.cells[aax + aay * w].index + RecastCommon.GetCon(as, 3);

                    if (src[aai] + 3 < src[_i2]) {
                      src[_i2] = src[aai] + 3;
                    }
                  }
                }

                if (RecastCommon.GetCon(_s, 3) != RecastConstants.RC_NOT_CONNECTED) {
                  // (0,-1)
                  var _ax2 = _x2 + RecastCommon.GetDirOffsetX(3);

                  var _ay2 = _y + RecastCommon.GetDirOffsetY(3);

                  var _ai2 = chf.cells[_ax2 + _ay2 * w].index + RecastCommon.GetCon(_s, 3);

                  var _as = chf.spans[_ai2];

                  if (src[_ai2] + 2 < src[_i2]) {
                    src[_i2] = src[_ai2] + 2;
                  } // (1,-1)


                  if (RecastCommon.GetCon(_as, 2) != RecastConstants.RC_NOT_CONNECTED) {
                    var _aax = _ax2 + RecastCommon.GetDirOffsetX(2);

                    var _aay = _ay2 + RecastCommon.GetDirOffsetY(2);

                    var _aai = chf.cells[_aax + _aay * w].index + RecastCommon.GetCon(_as, 2);

                    if (src[_aai] + 3 < src[_i2]) {
                      src[_i2] = src[_aai] + 3;
                    }
                  }
                }
              }
            }
          } // Pass 2


          for (var _y2 = h - 1; _y2 >= 0; --_y2) {
            for (var _x3 = w - 1; _x3 >= 0; --_x3) {
              var _c2 = chf.cells[_x3 + _y2 * w];

              for (var _i3 = _c2.index, _ni2 = _c2.index + _c2.count; _i3 < _ni2; ++_i3) {
                var _s2 = chf.spans[_i3];

                if (RecastCommon.GetCon(_s2, 2) != RecastConstants.RC_NOT_CONNECTED) {
                  // (1,0)
                  var _ax3 = _x3 + RecastCommon.GetDirOffsetX(2);

                  var _ay3 = _y2 + RecastCommon.GetDirOffsetY(2);

                  var _ai3 = chf.cells[_ax3 + _ay3 * w].index + RecastCommon.GetCon(_s2, 2);

                  var _as2 = chf.spans[_ai3];

                  if (src[_ai3] + 2 < src[_i3]) {
                    src[_i3] = src[_ai3] + 2;
                  } // (1,1)


                  if (RecastCommon.GetCon(_as2, 1) != RecastConstants.RC_NOT_CONNECTED) {
                    var _aax2 = _ax3 + RecastCommon.GetDirOffsetX(1);

                    var _aay2 = _ay3 + RecastCommon.GetDirOffsetY(1);

                    var _aai2 = chf.cells[_aax2 + _aay2 * w].index + RecastCommon.GetCon(_as2, 1);

                    if (src[_aai2] + 3 < src[_i3]) {
                      src[_i3] = src[_aai2] + 3;
                    }
                  }
                }

                if (RecastCommon.GetCon(_s2, 1) != RecastConstants.RC_NOT_CONNECTED) {
                  // (0,1)
                  var _ax4 = _x3 + RecastCommon.GetDirOffsetX(1);

                  var _ay4 = _y2 + RecastCommon.GetDirOffsetY(1);

                  var _ai4 = chf.cells[_ax4 + _ay4 * w].index + RecastCommon.GetCon(_s2, 1);

                  var _as3 = chf.spans[_ai4];

                  if (src[_ai4] + 2 < src[_i3]) {
                    src[_i3] = src[_ai4] + 2;
                  } // (-1,1)


                  if (RecastCommon.GetCon(_as3, 0) != RecastConstants.RC_NOT_CONNECTED) {
                    var _aax3 = _ax4 + RecastCommon.GetDirOffsetX(0);

                    var _aay3 = _ay4 + RecastCommon.GetDirOffsetY(0);

                    var _aai3 = chf.cells[_aax3 + _aay3 * w].index + RecastCommon.GetCon(_as3, 0);

                    if (src[_aai3] + 3 < src[_i3]) {
                      src[_i3] = src[_aai3] + 3;
                    }
                  }
                }
              }
            }
          }

          maxDist = 0;

          for (var _i4 = 0; _i4 < chf.spanCount; ++_i4) {
            maxDist = Math.max(src[_i4], maxDist);
          }

          return maxDist;
        }
      }, {
        key: "boxBlur",
        value: function boxBlur(chf, thr, src) {
          var w = chf.width;
          var h = chf.height;
          var dst = new Array(chf.spanCount);
          thr *= 2;

          for (var y = 0; y < h; ++y) {
            for (var _x4 = 0; _x4 < w; ++_x4) {
              var c = chf.cells[_x4 + y * w];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                var s = chf.spans[i];
                var cd = src[i];

                if (cd <= thr) {
                  dst[i] = cd;
                  continue;
                }

                var d = cd;

                for (var dir = 0; dir < 4; ++dir) {
                  if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                    var ax = _x4 + RecastCommon.GetDirOffsetX(dir);

                    var ay = y + RecastCommon.GetDirOffsetY(dir);
                    var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, dir);
                    d += src[ai];
                    var as = chf.spans[ai];
                    var dir2 = dir + 1 & 0x3;

                    if (RecastCommon.GetCon(as, dir2) != RecastConstants.RC_NOT_CONNECTED) {
                      var ax2 = ax + RecastCommon.GetDirOffsetX(dir2);
                      var ay2 = ay + RecastCommon.GetDirOffsetY(dir2);
                      var ai2 = chf.cells[ax2 + ay2 * w].index + RecastCommon.GetCon(as, dir2);
                      d += src[ai2];
                    } else {
                      d += cd;
                    }
                  } else {
                    d += cd * 2;
                  }
                }

                dst[i] = Math.floor((d + 5) / 9);
              }
            }
          }

          return dst;
        }
      }, {
        key: "floodRegion",
        value: function floodRegion(x, y, i, level, r, chf, srcReg, srcDist, stack) {
          var w = chf.width;
          var area = chf.areas[i]; // Flood fill mark region.

          stack = [];
          stack.push(x);
          stack.push(y);
          stack.push(i);
          srcReg[i] = r;
          srcDist[i] = 0;
          var lev = level >= 2 ? level - 2 : 0;
          var count = 0;

          while (stack.length > 0) {
            var ci = stack.splice(stack.length - 1, 1)[0];
            var cy = stack.splice(stack.length - 1, 1)[0];
            var cx = stack.splice(stack.length - 1, 1)[0];
            var cs = chf.spans[ci]; // Check if any of the neighbours already have a valid region set.

            var ar = 0;

            for (var dir = 0; dir < 4; ++dir) {
              // 8 connected
              if (RecastCommon.GetCon(cs, dir) != RecastConstants.RC_NOT_CONNECTED) {
                var ax = cx + RecastCommon.GetDirOffsetX(dir);
                var ay = cy + RecastCommon.GetDirOffsetY(dir);
                var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(cs, dir);

                if (chf.areas[ai] != area) {
                  continue;
                }

                var nr = srcReg[ai];

                if ((nr & RecastConstants.RC_BORDER_REG) != 0) {
                  continue;
                }

                if (nr != 0 && nr != r) {
                  ar = nr;
                  break;
                }

                var as = chf.spans[ai];
                var dir2 = dir + 1 & 0x3;

                if (RecastCommon.GetCon(as, dir2) != RecastConstants.RC_NOT_CONNECTED) {
                  var ax2 = ax + RecastCommon.GetDirOffsetX(dir2);
                  var ay2 = ay + RecastCommon.GetDirOffsetY(dir2);
                  var ai2 = chf.cells[ax2 + ay2 * w].index + RecastCommon.GetCon(as, dir2);

                  if (chf.areas[ai2] != area) {
                    continue;
                  }

                  var nr2 = srcReg[ai2];

                  if (nr2 != 0 && nr2 != r) {
                    ar = nr2;
                    break;
                  }
                }
              }
            }

            if (ar != 0) {
              srcReg[ci] = 0;
              continue;
            }

            count++; // Expand neighbours.

            for (var _dir = 0; _dir < 4; ++_dir) {
              if (RecastCommon.GetCon(cs, _dir) != RecastConstants.RC_NOT_CONNECTED) {
                var _ax5 = cx + RecastCommon.GetDirOffsetX(_dir);

                var _ay5 = cy + RecastCommon.GetDirOffsetY(_dir);

                var _ai5 = chf.cells[_ax5 + _ay5 * w].index + RecastCommon.GetCon(cs, _dir);

                if (chf.areas[_ai5] != area) {
                  continue;
                }

                if (chf.dist[_ai5] >= lev && srcReg[_ai5] == 0) {
                  srcReg[_ai5] = r;
                  srcDist[_ai5] = 0;
                  stack.push(_ax5);
                  stack.push(_ay5);
                  stack.push(_ai5);
                }
              }
            }
          }

          return count > 0;
        }
      }, {
        key: "expandRegions",
        value: function expandRegions(maxIter, level, chf, srcReg, srcDist, stack, fillStack) {
          var w = chf.width;
          var h = chf.height;

          if (fillStack) {
            // Find cells revealed by the raised level.
            //stack = [];
            stack = [];

            for (var y = 0; y < h; ++y) {
              for (var _x5 = 0; _x5 < w; ++_x5) {
                var c = chf.cells[_x5 + y * w];

                for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                  if (chf.dist[i] >= level && srcReg[i] == 0 && chf.areas[i] != RecastConstants.RC_NULL_AREA) {
                    stack.push(_x5);
                    stack.push(y);
                    stack.push(i);
                  }
                }
              }
            }
          } else // use cells in the input stack
            {
              // mark all cells which already have a region
              for (var j = 0; j < stack.length; j += 3) {
                var _i5 = stack[j + 2];

                if (srcReg[_i5] != 0) {
                  stack[j + 2] = -1;
                }
              }
            }

          var dirtyEntries = [];
          var iter = 0;

          while (stack.length > 0) {
            var failed = 0; // dirtyEntries = [];

            dirtyEntries = [];

            for (var _j = 0; _j < stack.length; _j += 3) {
              var _x6 = stack[_j + 0];
              var _y3 = stack[_j + 1];
              var _i6 = stack[_j + 2];

              if (_i6 < 0) {
                failed++;
                continue;
              }

              var r = srcReg[_i6];
              var d2 = 0xfff;
              var area = chf.areas[_i6];
              var s = chf.spans[_i6];

              for (var dir = 0; dir < 4; ++dir) {
                if (RecastCommon.GetCon(s, dir) == RecastConstants.RC_NOT_CONNECTED) {
                  continue;
                }

                var ax = _x6 + RecastCommon.GetDirOffsetX(dir);

                var ay = _y3 + RecastCommon.GetDirOffsetY(dir);

                var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, dir);

                if (chf.areas[ai] != area) {
                  continue;
                }

                if (srcReg[ai] > 0 && (srcReg[ai] & RecastConstants.RC_BORDER_REG) == 0) {
                  if (srcDist[ai] + 2 < d2) {
                    r = srcReg[ai];
                    d2 = srcDist[ai] + 2;
                  }
                }
              }

              if (r != 0) {
                stack[_j + 2] = -1; // mark as used

                dirtyEntries.push(_i6);
                dirtyEntries.push(r);
                dirtyEntries.push(d2);
              } else {
                failed++;
              }
            } // Copy entries that differ between src and dst to keep them in sync.


            for (var _i7 = 0; _i7 < dirtyEntries.length; _i7 += 3) {
              var idx = dirtyEntries[_i7]; // if (idx == 1344)
              //     console.log("dirty")

              srcReg[idx] = dirtyEntries[_i7 + 1];
              srcDist[idx] = dirtyEntries[_i7 + 2];
            }

            if (failed * 3 == stack.length) {
              break;
            }

            if (level > 0) {
              ++iter;

              if (iter >= maxIter) {
                break;
              }
            }
          }

          return srcReg;
        }
      }, {
        key: "sortCellsByLevel",
        value: function sortCellsByLevel(startLevel, chf, srcReg, nbStacks, stacks, loglevelsPerStack) // the levels per stack (2 in our case) as a bit shift
        {
          var w = chf.width;
          var h = chf.height;
          startLevel = startLevel >> loglevelsPerStack;

          for (var j = 0; j < nbStacks; ++j) {
            // stacks[j] = new Array(1024);
            // stacks[j] = [];
            stacks[j] = [];
          }

          for (var y = 0; y < h; ++y) {
            for (var _x7 = 0; _x7 < w; ++_x7) {
              var c = chf.cells[_x7 + y * w];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                if (chf.areas[i] == RecastConstants.RC_NULL_AREA || srcReg[i] != 0) {
                  continue;
                }

                var level = chf.dist[i] >> loglevelsPerStack;
                var sId = startLevel - level;

                if (sId >= nbStacks) {
                  continue;
                }

                if (sId < 0) {
                  sId = 0;
                }

                stacks[sId].push(_x7);
                stacks[sId].push(y);
                stacks[sId].push(i);
              }
            }
          }
        }
      }, {
        key: "appendStacks",
        value: function appendStacks(srcStack, dstStack, srcReg) {
          for (var j = 0; j < srcStack.length; j += 3) {
            var i = srcStack[j + 2];

            if (i < 0 || srcReg[i] != 0) {
              continue;
            }

            dstStack.push(srcStack[j]);
            dstStack.push(srcStack[j + 1]);
            dstStack.push(srcStack[j + 2]);
          }
        }
      }, {
        key: "removeAdjacentNeighbours",
        value: function removeAdjacentNeighbours(reg) {
          // Remove adjacent duplicates.
          for (var i = 0; i < reg.connections.length && reg.connections.length > 1;) {
            var ni = (i + 1) % reg.connections.length;

            if (reg.connections[i] == reg.connections[ni] && reg.connections[i] >= -128 && reg.connections[i] <= 127) {
              reg.connections.splice(i, 1);
            } else {
              ++i;
            }
          }
        }
      }, {
        key: "replaceNeighbour",
        value: function replaceNeighbour(reg, oldId, newId) {
          var neiChanged = false;

          for (var i = 0; i < reg.connections.length; ++i) {
            if (reg.connections[i] == oldId) {
              reg.connections[i] = newId;
              neiChanged = true;
            }
          }

          for (var _i8 = 0; _i8 < reg.floors.length; ++_i8) {
            if (reg.floors[_i8] == oldId) {
              reg.floors.set(_i8, newId);
            }
          }

          if (neiChanged) {
            RecastRegion.removeAdjacentNeighbours(reg);
          }
        }
      }, {
        key: "canMergeWithRegion",
        value: function canMergeWithRegion(rega, regb) {
          if (rega.areaType != regb.areaType) {
            return false;
          }

          var n = 0;

          for (var i = 0; i < rega.connections.length; ++i) {
            if (rega.connections[i] == regb.id) {
              n++;
            }
          }

          if (n > 1) {
            return false;
          }

          for (var _i9 = 0; _i9 < rega.floors.length; ++_i9) {
            if (rega.floors[_i9] == regb.id) {
              return false;
            }
          }

          return true;
        }
      }, {
        key: "addUniqueFloorRegion",
        value: function addUniqueFloorRegion(reg, n) {
          if (!reg.floors.includes(n)) {
            reg.floors.push(n);
          }
        }
      }, {
        key: "mergeRegions",
        value: function mergeRegions(rega, regb) {
          var aid = rega.id;
          var bid = regb.id; // Duplicate current neighbourhood.

          var acon = rega.connections;
          var bcon = regb.connections; // Find insertion poPoly on A.

          var insa = -1;

          for (var i = 0; i < acon.length; ++i) {
            if (acon[i] == bid) {
              insa = i;
              break;
            }
          }

          if (insa == -1) {
            return false;
          } // Find insertion poPoly on B.


          var insb = -1;

          for (var _i10 = 0; _i10 < bcon.length; ++_i10) {
            if (bcon[_i10] == aid) {
              insb = _i10;
              break;
            }
          }

          if (insb == -1) {
            return false;
          } // Merge neighbours.


          rega.connections = [];

          for (var _i11 = 0, ni = acon.length; _i11 < ni - 1; ++_i11) {
            rega.connections.push(acon[(insa + 1 + _i11) % ni]);
          }

          for (var _i12 = 0, _ni3 = bcon.length; _i12 < _ni3 - 1; ++_i12) {
            rega.connections.push(bcon[(insb + 1 + _i12) % _ni3]);
          }

          RecastRegion.removeAdjacentNeighbours(rega);

          for (var j = 0; j < regb.floors.length; ++j) {
            RecastRegion.addUniqueFloorRegion(rega, regb.floors[j]);
          }

          rega.spanCount += regb.spanCount;
          regb.spanCount = 0;
          regb.connections = [];
          return true;
        }
      }, {
        key: "isRegionConnectedToBorder",
        value: function isRegionConnectedToBorder(reg) {
          // Region is connected to border if
          // one of the neighbours is null id.
          return reg.connections.includes(0);
        }
      }, {
        key: "isSolidEdge",
        value: function isSolidEdge(chf, srcReg, x, y, i, dir) {
          var s = chf.spans[i];
          var r = 0;

          if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
            var ax = x + RecastCommon.GetDirOffsetX(dir);
            var ay = y + RecastCommon.GetDirOffsetY(dir);
            var ai = chf.cells[ax + ay * chf.width].index + RecastCommon.GetCon(s, dir);
            r = srcReg[ai];
          }

          if (r == srcReg[i]) {
            return false;
          }

          return true;
        }
      }, {
        key: "walkContour",
        value: function walkContour(x, y, i, dir, chf, srcReg, cont) {
          var startDir = dir;
          var starti = i;
          var ss = chf.spans[i];
          var curReg = 0;

          if (RecastCommon.GetCon(ss, dir) != RecastConstants.RC_NOT_CONNECTED) {
            var ax = x + RecastCommon.GetDirOffsetX(dir);
            var ay = y + RecastCommon.GetDirOffsetY(dir);
            var ai = chf.cells[ax + ay * chf.width].index + RecastCommon.GetCon(ss, dir);
            curReg = srcReg[ai];
          }

          cont.push(curReg);
          var iter = 0;

          while (++iter < 40000) {
            var s = chf.spans[i];

            if (RecastRegion.isSolidEdge(chf, srcReg, x, y, i, dir)) {
              // Choose the edge corner
              var r = 0;

              if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                var _ax6 = x + RecastCommon.GetDirOffsetX(dir);

                var _ay6 = y + RecastCommon.GetDirOffsetY(dir);

                var _ai6 = chf.cells[_ax6 + _ay6 * chf.width].index + RecastCommon.GetCon(s, dir);

                r = srcReg[_ai6];
              }

              if (r != curReg) {
                curReg = r;
                cont.push(curReg);
              }

              dir = dir + 1 & 0x3; // Rotate CW
            } else {
              var ni = -1;
              var nx = x + RecastCommon.GetDirOffsetX(dir);
              var ny = y + RecastCommon.GetDirOffsetY(dir);

              if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                var nc = chf.cells[nx + ny * chf.width];
                ni = nc.index + RecastCommon.GetCon(s, dir);
              }

              if (ni == -1) {
                // Should not happen.
                return;
              }

              x = nx;
              y = ny;
              i = ni;
              dir = dir + 3 & 0x3; // Rotate CCW
            }

            if (starti == i && startDir == dir) {
              break;
            }
          } // Remove adjacent duplicates.


          if (cont.length > 1) {
            for (var j = 0; j < cont.length;) {
              var nj = (j + 1) % cont.length;

              if (cont[j] == cont[nj] && cont[j] >= -128 && cont[j] <= 127) {
                cont.splice(j, 1);
              } else {
                ++j;
              }
            }
          }
        }
      }, {
        key: "mergeAndFilterRegions",
        value: function mergeAndFilterRegions(ctx, minRegionArea, mergeRegionSize, maxRegionId, chf, srcReg, overlaps) {
          var w = chf.width;
          var h = chf.height;
          var nreg = maxRegionId + 1;
          var regions = new Array(nreg); // Construct regions

          for (var i = 0; i < nreg; ++i) {
            regions[i] = new RecastRegion.Region(i);
          } // Find edge of a region and find connections around the contour.


          for (var y = 0; y < h; ++y) {
            for (var _x8 = 0; _x8 < w; ++_x8) {
              var c = chf.cells[_x8 + y * w];

              for (var _i13 = c.index, ni = c.index + c.count; _i13 < ni; ++_i13) {
                var r = srcReg[_i13];

                if (r == 0 || r >= nreg) {
                  continue;
                }

                var reg = regions[r];
                reg.spanCount++; // Update floors.

                for (var j = c.index; j < ni; ++j) {
                  if (_i13 == j) {
                    continue;
                  }

                  var floorId = srcReg[j];

                  if (floorId == 0 || floorId >= nreg) {
                    continue;
                  }

                  if (floorId == r) {
                    reg.overlap = true;
                  }

                  RecastRegion.addUniqueFloorRegion(reg, floorId);
                } // Have found contour


                if (reg.connections.length > 0) {
                  continue;
                }

                reg.areaType = chf.areas[_i13]; // Check if this cell is next to a border.

                var ndir = -1;

                for (var dir = 0; dir < 4; ++dir) {
                  if (RecastRegion.isSolidEdge(chf, srcReg, _x8, y, _i13, dir)) {
                    ndir = dir;
                    break;
                  }
                }

                if (ndir != -1) {
                  // The cell is at border.
                  // Walk around the contour to find all the neighbours.
                  RecastRegion.walkContour(_x8, y, _i13, ndir, chf, srcReg, reg.connections);
                }
              }
            }
          } // Remove too small regions.


          var stack = new Array(32);
          var trace = new Array(32);

          for (var _i14 = 0; _i14 < nreg; ++_i14) {
            var _reg = regions[_i14];

            if (_reg.id == 0 || (_reg.id & RecastConstants.RC_BORDER_REG) != 0) {
              continue;
            }

            if (_reg.spanCount == 0) {
              continue;
            }

            if (_reg.visited) {
              continue;
            } // Count the total size of all the connected regions.
            // Also keep track of the regions connects to a tile border.


            var connectsToBorder = false;
            var spanCount = 0; //stack = [];
            //trace = [];

            stack = [];
            trace = [];
            _reg.visited = true;
            stack.push(_i14);

            while (stack.length > 0) {
              // Pop
              var ri = stack.splice(stack.length - 1, 1);
              var creg = regions[ri];
              spanCount += creg.spanCount;
              trace.push(ri);

              for (var _j2 = 0; _j2 < creg.connections.length; ++_j2) {
                if ((creg.connections[_j2] & RecastConstants.RC_BORDER_REG) != 0) {
                  connectsToBorder = true;
                  continue;
                }

                var neireg = regions[creg.connections[_j2]];

                if (neireg.visited) {
                  continue;
                }

                if (neireg.id == 0 || (neireg.id & RecastConstants.RC_BORDER_REG) != 0) {
                  continue;
                } // Visit


                stack.push(neireg.id);
                neireg.visited = true;
              }
            } // If the accumulated regions size is too small, remove it.
            // Do not remove areas which connect to tile borders
            // as their size cannot be estimated correctly and removing them
            // can potentially remove necessary areas.


            if (spanCount < minRegionArea && !connectsToBorder) {
              // Kill all visited regions.
              for (var _j3 = 0; _j3 < trace.length; ++_j3) {
                regions[trace[_j3]].spanCount = 0;
                regions[trace[_j3]].id = 0;
              }
            }
          } // Merge too small regions to neighbour regions.


          var mergeCount = 0;

          do {
            mergeCount = 0;

            for (var _i15 = 0; _i15 < nreg; ++_i15) {
              var _reg2 = regions[_i15];

              if (_reg2.id == 0 || (_reg2.id & RecastConstants.RC_BORDER_REG) != 0) {
                continue;
              }

              if (_reg2.overlap) {
                continue;
              }

              if (_reg2.spanCount == 0) {
                continue;
              } // Check to see if the region should be merged.


              if (_reg2.spanCount > mergeRegionSize && RecastRegion.isRegionConnectedToBorder(_reg2)) {
                continue;
              } // Small region with more than 1 connection.
              // Or region which is not connected to a border at all.
              // Find smallest neighbour region that connects to this one.


              var smallest = 0xfffffff;
              var mergeId = _reg2.id;

              for (var _j4 = 0; _j4 < _reg2.connections.length; ++_j4) {
                if ((_reg2.connections[_j4] & RecastConstants.RC_BORDER_REG) != 0) {
                  continue;
                }

                var mreg = regions[_reg2.connections[_j4]];

                if (mreg.id == 0 || (mreg.id & RecastConstants.RC_BORDER_REG) != 0 || mreg.overlap) {
                  continue;
                }

                if (mreg.spanCount < smallest && RecastRegion.canMergeWithRegion(_reg2, mreg) && RecastRegion.canMergeWithRegion(mreg, _reg2)) {
                  smallest = mreg.spanCount;
                  mergeId = mreg.id;
                }
              } // Found new id.


              if (mergeId != _reg2.id) {
                var oldId = _reg2.id;
                var target = regions[mergeId]; // Merge neighbours.

                if (RecastRegion.mergeRegions(target, _reg2)) {
                  // Fixup regions pointing to current region.
                  for (var _j5 = 0; _j5 < nreg; ++_j5) {
                    if (regions[_j5].id == 0 || (regions[_j5].id & RecastConstants.RC_BORDER_REG) != 0) {
                      continue;
                    } // If another region was already merged into current region
                    // change the nid of the previous region too.


                    if (regions[_j5].id == oldId) {
                      regions[_j5].id = mergeId;
                    } // Replace the current region with the new one if the
                    // current regions is neighbour.


                    RecastRegion.replaceNeighbour(regions[_j5], oldId, mergeId);
                  }

                  mergeCount++;
                }
              }
            }
          } while (mergeCount > 0); // Compress region Ids.


          for (var _i16 = 0; _i16 < nreg; ++_i16) {
            regions[_i16].remap = false;

            if (regions[_i16].id == 0) {
              continue; // Skip nil regions.
            }

            if ((regions[_i16].id & RecastConstants.RC_BORDER_REG) != 0) {
              continue; // Skip external regions.
            }

            regions[_i16].remap = true;
          }

          var regIdGen = 0;

          for (var _i17 = 0; _i17 < nreg; ++_i17) {
            if (!regions[_i17].remap) {
              continue;
            }

            var _oldId = regions[_i17].id;
            var newId = ++regIdGen;

            for (var _j6 = _i17; _j6 < nreg; ++_j6) {
              if (regions[_j6].id == _oldId) {
                regions[_j6].id = newId;
                regions[_j6].remap = false;
              }
            }
          }

          maxRegionId = regIdGen; // Remap regions.

          for (var _i18 = 0; _i18 < chf.spanCount; ++_i18) {
            if ((srcReg[_i18] & RecastConstants.RC_BORDER_REG) == 0) {
              srcReg[_i18] = regions[srcReg[_i18]].id;
            }
          } // Return regions that we found to be overlapping.


          for (var _i19 = 0; _i19 < nreg; ++_i19) {
            if (regions[_i19].overlap) {
              overlaps.push(regions[_i19].id);
            }
          }

          return maxRegionId;
        }
      }, {
        key: "addUniqueConnection",
        value: function addUniqueConnection(reg, n) {
          if (!reg.connections.contains(n)) {
            reg.connections.push(n);
          }
        }
      }, {
        key: "mergeAndFilterLayerRegions",
        value: function mergeAndFilterLayerRegions(ctx, minRegionArea, maxRegionId, chf, srcReg, overlaps) {
          var w = chf.width;
          var h = chf.height;
          var nreg = maxRegionId + 1;
          var regions = new Array(nreg); // Construct regions

          for (var i = 0; i < nreg; ++i) {
            regions[i] = new Region(i);
          } // Find region neighbours and overlapping regions.


          var lregs = new Array(32);

          for (var y = 0; y < h; ++y) {
            for (var _x9 = 0; _x9 < w; ++_x9) {
              var c = chf.cells[_x9 + y * w];
              lregs = [];

              for (var _i20 = c.index, ni = c.index + c.count; _i20 < ni; ++_i20) {
                var s = chf.spans[_i20];
                var ri = srcReg[_i20];

                if (ri == 0 || ri >= nreg) {
                  continue;
                }

                var reg = regions[ri];
                reg.spanCount++;
                reg.ymin = Math.min(reg.ymin, s.y);
                reg.ymax = Math.max(reg.ymax, s.y); // Collect all region layers.

                lregs.push(ri); // Update neighbours

                for (var dir = 0; dir < 4; ++dir) {
                  if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                    var ax = _x9 + RecastCommon.GetDirOffsetX(dir);

                    var ay = y + RecastCommon.GetDirOffsetY(dir);
                    var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, dir);
                    var rai = srcReg[ai];

                    if (rai > 0 && rai < nreg && rai != ri) {
                      addUniqueConnection(reg, rai);
                    }

                    if ((rai & RecastConstants.RC_BORDER_REG) != 0) {
                      reg.connectsToBorder = true;
                    }
                  }
                }
              } // Update overlapping regions.


              for (var _i21 = 0; _i21 < lregs.length - 1; ++_i21) {
                for (var j = _i21 + 1; j < lregs.length; ++j) {
                  if (lregs[_i21] != lregs[j]) {
                    var _ri = regions[lregs[_i21]];
                    var rj = regions[lregs[j]];
                    RecastRegion.addUniqueFloorRegion(_ri, lregs[j]);
                    RecastRegion.addUniqueFloorRegion(rj, lregs[_i21]);
                  }
                }
              }
            }
          } // Create 2D layers from regions.


          var layerId = 1;

          for (var _i22 = 0; _i22 < nreg; ++_i22) {
            regions[_i22].id = 0;
          } // Merge montone regions to create non-overlapping areas.


          var stack = new Array(32);

          for (var _i23 = 1; _i23 < nreg; ++_i23) {
            var root = regions[_i23]; // Skip already visited.

            if (root.id != 0) {
              continue;
            } // Start search.


            root.id = layerId;
            stack = [];
            stack.push(_i23);

            while (stack.length > 0) {
              // Pop front
              var _reg3 = regions[stack.remove(0)];
              var ncons = _reg3.connections.length;

              for (var _j7 = 0; _j7 < ncons; ++_j7) {
                var nei = _reg3.connections[_j7];
                var regn = regions[nei]; // Skip already visited.

                if (regn.id != 0) {
                  continue;
                } // Skip if the neighbour is overlapping root region.


                var overlap = false;

                for (var k = 0; k < root.floors.length; k++) {
                  if (root.floors[k] == nei) {
                    overlap = true;
                    break;
                  }
                }

                if (overlap) {
                  continue;
                } // Deepen


                stack.push(nei); // Mark layer id

                regn.id = layerId; // Merge current layers to root.

                for (var _k = 0; _k < regn.floors.length; ++_k) {
                  RecastRegion.addUniqueFloorRegion(root, regn.floors[_k]);
                }

                root.ymin = Math.min(root.ymin, regn.ymin);
                root.ymax = Math.max(root.ymax, regn.ymax);
                root.spanCount += regn.spanCount;
                regn.spanCount = 0;
                root.connectsToBorder = root.connectsToBorder || regn.connectsToBorder;
              }
            }

            layerId++;
          } // Remove small regions


          for (var _i24 = 0; _i24 < nreg; ++_i24) {
            if (regions[_i24].spanCount > 0 && regions[_i24].spanCount < minRegionArea && !regions[_i24].connectsToBorder) {
              var _reg4 = regions[_i24].id;

              for (var _j8 = 0; _j8 < nreg; ++_j8) {
                if (regions[_j8].id == _reg4) {
                  regions[_j8].id = 0;
                }
              }
            }
          } // Compress region Ids.


          for (var _i25 = 0; _i25 < nreg; ++_i25) {
            regions[_i25].remap = false;

            if (regions[_i25].id == 0) {
              continue; // Skip nil regions.
            }

            if ((regions[_i25].id & RecastConstants.RC_BORDER_REG) != 0) {
              continue; // Skip external regions.
            }

            regions[_i25].remap = true;
          }

          var regIdGen = 0;

          for (var _i26 = 0; _i26 < nreg; ++_i26) {
            if (!regions[_i26].remap) {
              continue;
            }

            var oldId = regions[_i26].id;
            var newId = ++regIdGen;

            for (var _j9 = _i26; _j9 < nreg; ++_j9) {
              if (regions[_j9].id == oldId) {
                regions[_j9].id = newId;
                regions[_j9].remap = false;
              }
            }
          }

          maxRegionId = regIdGen; // Remap regions.

          for (var _i27 = 0; _i27 < chf.spanCount; ++_i27) {
            if ((srcReg[_i27] & RecastConstants.RC_BORDER_REG) == 0) {
              srcReg[_i27] = regions[srcReg[_i27]].id;
            }
          }

          return maxRegionId;
        } /// @par
        ///
        /// This is usually the second to the last step in creating a fully built
        /// compact heightfield. This step is required before regions are built
        /// using #rcBuildRegions or #rcBuildRegionsMonotone.
        ///
        /// After this step, the distance data is available via the rcCompactHeightfield::maxDistance
        /// and rcCompactHeightfield::dist fields.
        ///
        /// @see rcCompactHeightfield, rcBuildRegions, rcBuildRegionsMonotone

      }, {
        key: "buildDistanceField",
        value: function buildDistanceField(ctx, chf) {
          ctx.startTimer("BUILD_DISTANCEFIELD");
          var src = new Array(chf.spanCount);
          ctx.startTimer("DISTANCEFIELD_DIST");
          var maxDist = this.calculateDistanceField(chf, src);
          chf.maxDistance = maxDist;
          ctx.stopTimer("DISTANCEFIELD_DIST");
          ctx.startTimer("DISTANCEFIELD_BLUR"); // Blur

          src = this.boxBlur(chf, 1, src); // Store distance.

          chf.dist = src;
          ctx.stopTimer("DISTANCEFIELD_BLUR");
          ctx.stopTimer("BUILD_DISTANCEFIELD");
        }
      }, {
        key: "paintRectRegion",
        value: function paintRectRegion(minx, maxx, miny, maxy, regId, chf, srcReg) {
          var w = chf.width;

          for (var y = miny; y < maxy; ++y) {
            for (var _y4 = minx; x < maxx; ++x) {
              var c = chf.cells[x + _y4 * w];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                if (chf.areas[i] != RecastConstants.RC_NULL_AREA) {
                  srcReg[i] = regId;
                }
              }
            }
          }
        } /// @par
        ///
        /// Non-null regions will consist of connected, non-overlapping walkable spans that form a single contour.
        /// Contours will form simple polygons.
        ///
        /// If multiple regions form an area that is smaller than @p minRegionArea, then all spans will be
        /// re-assigned to the zero (null) region.
        ///
        /// Partitioning can result in smaller than necessary regions. @p mergeRegionArea helps
        /// reduce unecessarily small regions.
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// The region data will be available via the rcCompactHeightfield::maxRegions
        /// and rcCompactSpan::reg fields.
        ///
        /// @warning The distance field must be created using #rcBuildDistanceField before attempting to build regions.
        ///
        /// @see rcCompactHeightfield, rcCompactSpan, rcBuildDistanceField, rcBuildRegionsMonotone, rcConfig

      }, {
        key: "buildRegionsMonotone",
        value: function buildRegionsMonotone(ctx, chf, borderSize, minRegionArea, mergeRegionArea) {
          ctx.startTimer("BUILD_REGIONS");
          var w = chf.width;
          var h = chf.height;
          var id = 1;
          var srcReg = new Array(chf.spanCount);
          var nsweeps = Math.max(chf.width, chf.height);
          sweeps = new Array(nsweeps);

          for (var i = 0; i < sweeps.length; i++) {
            sweeps[i] = new SweepSpan();
          } // Mark border regions.


          if (borderSize > 0) {
            // Make sure border will not overflow.
            var bw = Math.min(w, borderSize);
            var bh = Math.min(h, borderSize); // PaPoly regions

            paintRectRegion(0, bw, 0, h, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
            paintRectRegion(w - bw, w, 0, h, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
            paintRectRegion(0, w, 0, bh, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
            paintRectRegion(0, w, h - bh, h, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
          }

          chf.borderSize = borderSize;
          var prev = new Array(256); // Sweep one line at a time.

          for (var y = borderSize; y < h - borderSize; ++y) {
            // Collect spans from this row.
            prev.fill(0, 0, id);
            var rid = 1;

            for (var _y5 = borderSize; x < w - borderSize; ++x) {
              var c = chf.cells[x + _y5 * w];

              for (var _i28 = c.index, ni = c.index + c.count; _i28 < ni; ++_i28) {
                var s = chf.spans[_i28];

                if (chf.areas[_i28] == RecastConstants.RC_NULL_AREA) {
                  continue;
                } // -x


                var previd = 0;

                if (RecastCommon.GetCon(s, 0) != RecastConstants.RC_NOT_CONNECTED) {
                  var ax = x + RecastCommon.GetDirOffsetX(0);

                  var ay = _y5 + RecastCommon.GetDirOffsetY(0);

                  var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, 0);

                  if ((srcReg[ai] & RecastConstants.RC_BORDER_REG) == 0 && chf.areas[_i28] == chf.areas[ai]) {
                    previd = srcReg[ai];
                  }
                }

                if (previd == 0) {
                  previd = rid++;
                  sweeps[previd].rid = previd;
                  sweeps[previd].ns = 0;
                  sweeps[previd].nei = 0;
                } // -y


                if (RecastCommon.GetCon(s, 3) != RecastConstants.RC_NOT_CONNECTED) {
                  var _ax7 = x + RecastCommon.GetDirOffsetX(3);

                  var _ay7 = _y5 + RecastCommon.GetDirOffsetY(3);

                  var _ai7 = chf.cells[_ax7 + _ay7 * w].index + RecastCommon.GetCon(s, 3);

                  if (srcReg[_ai7] != 0 && (srcReg[_ai7] & RecastConstants.RC_BORDER_REG) == 0 && chf.areas[_i28] == chf.areas[_ai7]) {
                    var nr = srcReg[_ai7];

                    if (sweeps[previd].nei == 0 || sweeps[previd].nei == nr) {
                      sweeps[previd].nei = nr;
                      sweeps[previd].ns++;
                      prev[nr]++;
                    } else {
                      sweeps[previd].nei = RC_NULL_NEI;
                    }
                  }
                }

                srcReg[_i28] = previd;
              }
            } // Create unique ID.


            for (var _i29 = 1; _i29 < rid; ++_i29) {
              if (sweeps[_i29].nei != RC_NULL_NEI && sweeps[_i29].nei != 0 && prev[sweeps[_i29].nei] == sweeps[_i29].ns) {
                sweeps[_i29].id = sweeps[_i29].nei;
              } else {
                sweeps[_i29].id = id++;
              }
            } // Remap IDs


            for (var _y6 = borderSize; x < w - borderSize; ++x) {
              var _c3 = chf.cells[x + _y6 * w];

              for (var _i30 = _c3.index, _ni4 = _c3.index + _c3.count; _i30 < _ni4; ++_i30) {
                if (srcReg[_i30] > 0 && srcReg[_i30] < rid) {
                  srcReg[_i30] = sweeps[srcReg[_i30]].id;
                }
              }
            }
          }

          ctx.startTimer("BUILD_REGIONS_FILTER"); // Merge regions and filter out small regions.

          var overlaps = [];
          chf.maxRegions = mergeAndFilterRegions(ctx, minRegionArea, mergeRegionArea, id, chf, srcReg, overlaps); // Monotone partitioning does not generate overlapping regions.

          ctx.stopTimer("BUILD_REGIONS_FILTER"); // Store the result out.

          for (var _i31 = 0; _i31 < chf.spanCount; ++_i31) {
            // if (i == 1344)
            //     console.log("4431")
            chf.spans[_i31].reg = srcReg[_i31];
          }

          ctx.stopTimer("BUILD_REGIONS");
        } /// @par
        ///
        /// Non-null regions will consist of connected, non-overlapping walkable spans that form a single contour.
        /// Contours will form simple polygons.
        ///
        /// If multiple regions form an area that is smaller than @p minRegionArea, then all spans will be
        /// re-assigned to the zero (null) region.
        ///
        /// Watershed partitioning can result in smaller than necessary regions, especially in diagonal corridors.
        /// @p mergeRegionArea helps reduce unecessarily small regions.
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// The region data will be available via the rcCompactHeightfield::maxRegions
        /// and rcCompactSpan::reg fields.
        ///
        /// @warning The distance field must be created using #rcBuildDistanceField before attempting to build regions.
        ///
        /// @see rcCompactHeightfield, rcCompactSpan, rcBuildDistanceField, rcBuildRegionsMonotone, rcConfig

      }, {
        key: "buildRegions",
        value: function buildRegions(ctx, chf, borderSize, minRegionArea, mergeRegionArea) {
          ctx.startTimer("BUILD_REGIONS");
          var w = chf.width;
          var h = chf.height;
          ctx.startTimer("REGIONS_WATERSHED");
          var LOG_NB_STACKS = 3;
          var NB_STACKS = 1 << LOG_NB_STACKS;
          var lvlStacks = [];

          for (var i = 0; i < NB_STACKS; ++i) {
            lvlStacks.push([]);
          }

          var stack = new Array(1024);
          var srcReg = new Array(chf.spanCount).fill(0);
          var srcDist = new Array(chf.spanCount).fill(0);
          var regionId = 1;
          var level = chf.maxDistance + 1 & ~1; // TODO: Figure better formula, expandIters defines how much the
          // watershed "overflows" and simplifies the regions. Tying it to
          // agent radius was usually good indication how greedy it could be.
          // const let expandIters = 4 + walkableRadius * 2;

          var expandIters = 8;

          if (borderSize > 0) {
            // Make sure border will not overflow.
            var bw = Math.min(w, borderSize);
            var bh = Math.min(h, borderSize); // PaPoly regions

            paintRectRegion(0, bw, 0, h, regionId | RecastConstants.RC_BORDER_REG, chf, srcReg);
            regionId++;
            paintRectRegion(w - bw, w, 0, h, regionId | RecastConstants.RC_BORDER_REG, chf, srcReg);
            regionId++;
            paintRectRegion(0, w, 0, bh, regionId | RecastConstants.RC_BORDER_REG, chf, srcReg);
            regionId++;
            paintRectRegion(0, w, h - bh, h, regionId | RecastConstants.RC_BORDER_REG, chf, srcReg);
            regionId++;
          }

          chf.borderSize = borderSize;
          var sId = -1;

          while (level > 0) {
            level = level >= 2 ? level - 2 : 0;
            sId = sId + 1 & NB_STACKS - 1; // ctx=>startTimer(RC_TIMER_DIVIDE_TO_LEVELS);

            if (sId == 0) {
              RecastRegion.sortCellsByLevel(level, chf, srcReg, NB_STACKS, lvlStacks, 1);
            } else {
              RecastRegion.appendStacks(lvlStacks[sId - 1], lvlStacks[sId], srcReg); // copy left overs from last level
            } // ctx=>stopTimer(RC_TIMER_DIVIDE_TO_LEVELS);


            ctx.startTimer("BUILD_REGIONS_EXPAND"); // Expand current regions until no empty connected cells found.

            RecastRegion.expandRegions(expandIters, level, chf, srcReg, srcDist, lvlStacks[sId], false);
            ctx.stopTimer("BUILD_REGIONS_EXPAND");
            ctx.startTimer("BUILD_REGIONS_FLOOD"); // Mark new regions with IDs.

            for (var j = 0; j < lvlStacks[sId].length; j += 3) {
              var _x10 = lvlStacks[sId][j];
              var y = lvlStacks[sId][j + 1];
              var _i32 = lvlStacks[sId][j + 2];

              if (_i32 >= 0 && srcReg[_i32] == 0) {
                if (RecastRegion.floodRegion(_x10, y, _i32, level, regionId, chf, srcReg, srcDist, stack)) {
                  regionId++;
                }
              }
            }

            ctx.stopTimer("BUILD_REGIONS_FLOOD");
          } // Expand current regions until no empty connected cells found.


          RecastRegion.expandRegions(expandIters * 8, 0, chf, srcReg, srcDist, stack, true);
          ctx.stopTimer("BUILD_REGIONS_WATERSHED");
          ctx.startTimer("BUILD_REGIONS_FILTER"); // Merge regions and filter out smalle regions.

          var overlaps = [];
          chf.maxRegions = this.mergeAndFilterRegions(ctx, minRegionArea, mergeRegionArea, regionId, chf, srcReg, overlaps); // If overlapping regions were found during merging, split those regions.

          if (overlaps.length > 0) {
            throw new RuntimeException("rcBuildRegions: " + overlaps.length + " overlapping regions.");
          }

          ctx.stopTimer("BUILD_REGIONS_FILTER"); // Write the result out.

          for (var _i33 = 0; _i33 < chf.spanCount; ++_i33) {
            // if (i == 1344)
            //     console.log("4431")
            chf.spans[_i33].reg = srcReg[_i33];
          }

          ctx.stopTimer("BUILD_REGIONS");
        }
      }, {
        key: "buildLayerRegions",
        value: function buildLayerRegions(ctx, chf, borderSize, minRegionArea) {
          ctx.startTimer("BUILD_REGIONS");
          var w = chf.width;
          var h = chf.height;
          var id = 1;
          var srcReg = new Array(chf.spanCount);
          var nsweeps = Math.max(chf.width, chf.height);
          var sweeps = new ArrayList(nsweeps);

          for (var i = 0; i < sweeps.length; i++) {
            sweeps[i] = new SweepSpan();
          } // Mark border regions.


          if (borderSize > 0) {
            // Make sure border will not overflow.
            var bw = Math.min(w, borderSize);
            var bh = Math.min(h, borderSize); // PaPoly regions

            paintRectRegion(0, bw, 0, h, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
            paintRectRegion(w - bw, w, 0, h, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
            paintRectRegion(0, w, 0, bh, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
            paintRectRegion(0, w, h - bh, h, id | RecastConstants.RC_BORDER_REG, chf, srcReg);
            id++;
          }

          chf.borderSize = borderSize;
          var prev = new Array(256); // Sweep one line at a time.

          for (var y = borderSize; y < h - borderSize; ++y) {
            // Collect spans from this row.
            prev.fill(0, 0, id);
            var rid = 1;

            for (var _y7 = borderSize; x < w - borderSize; ++x) {
              var c = chf.cells[x + _y7 * w];

              for (var _i34 = c.index, ni = c.index + c.count; _i34 < ni; ++_i34) {
                var s = chf.spans[_i34];

                if (chf.areas[_i34] == RecastConstants.RC_NULL_AREA) {
                  continue;
                } // -x


                var previd = 0;

                if (RecastCommon.GetCon(s, 0) != RecastConstants.RC_NOT_CONNECTED) {
                  var ax = x + RecastCommon.GetDirOffsetX(0);

                  var ay = _y7 + RecastCommon.GetDirOffsetY(0);

                  var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, 0);

                  if ((srcReg[ai] & RecastConstants.RC_BORDER_REG) == 0 && chf.areas[_i34] == chf.areas[ai]) {
                    previd = srcReg[ai];
                  }
                }

                if (previd == 0) {
                  previd = rid++;
                  sweeps[previd].rid = previd;
                  sweeps[previd].ns = 0;
                  sweeps[previd].nei = 0;
                } // -y


                if (RecastCommon.GetCon(s, 3) != RecastConstants.RC_NOT_CONNECTED) {
                  var _ax8 = x + RecastCommon.GetDirOffsetX(3);

                  var _ay8 = _y7 + RecastCommon.GetDirOffsetY(3);

                  var _ai8 = chf.cells[_ax8 + _ay8 * w].index + RecastCommon.GetCon(s, 3);

                  if (srcReg[_ai8] != 0 && (srcReg[_ai8] & RecastConstants.RC_BORDER_REG) == 0 && chf.areas[_i34] == chf.areas[_ai8]) {
                    var nr = srcReg[_ai8];

                    if (sweeps[previd].nei == 0 || sweeps[previd].nei == nr) {
                      sweeps[previd].nei = nr;
                      sweeps[previd].ns++;
                      prev[nr]++;
                    } else {
                      sweeps[previd].nei = RC_NULL_NEI;
                    }
                  }
                }

                srcReg[_i34] = previd;
              }
            } // Create unique ID.


            for (var _i35 = 1; _i35 < rid; ++_i35) {
              if (sweeps[_i35].nei != RC_NULL_NEI && sweeps[_i35].nei != 0 && prev[sweeps[_i35].nei] == sweeps[_i35].ns) {
                sweeps[_i35].id = sweeps[_i35].nei;
              } else {
                sweeps[_i35].id = id++;
              }
            } // Remap IDs


            for (var _y8 = borderSize; x < w - borderSize; ++x) {
              var _c4 = chf.cells[x + _y8 * w];

              for (var _i36 = _c4.index, _ni5 = _c4.index + _c4.count; _i36 < _ni5; ++_i36) {
                if (srcReg[_i36] > 0 && srcReg[_i36] < rid) {
                  srcReg[_i36] = sweeps[srcReg[_i36]].id;
                }
              }
            }
          }

          ctx.startTimer("BUILD_REGIONS_FILTER"); // Merge monotone regions to layers and remove small regions.

          var overlaps = [];
          chf.maxRegions = mergeAndFilterLayerRegions(ctx, minRegionArea, id, chf, srcReg, overlaps);
          ctx.stopTimer("BUILD_REGIONS_FILTER"); // Store the result out.

          for (var _i37 = 0; _i37 < chf.spanCount; ++_i37) {
            chf.spans[_i37].reg = srcReg[_i37];
          }

          ctx.stopTimer("BUILD_REGIONS");
        }
      }]);

      return RecastRegion;
    }();

    _defineProperty(RecastRegion, "RC_NULL_NEI", 0xfff);

    _defineProperty(RecastRegion, "SweepSpan", (_temp$1 = function SweepSpan() {
      _classCallCheck(this, SweepSpan);

      _defineProperty(this, "rid", void 0);

      _defineProperty(this, "id", void 0);

      _defineProperty(this, "ns", void 0);

      _defineProperty(this, "nei", void 0);
    } // neighbour id
    , _temp$1));

    _defineProperty(RecastRegion, "Region", (_temp2$1 = // Number of spans belonging to this region
    // ID of the region
    // Are type.
    function Region(i) {
      _classCallCheck(this, Region);

      _defineProperty(this, "spanCount", 0);

      _defineProperty(this, "id", 0);

      _defineProperty(this, "areaType", 0);

      _defineProperty(this, "remap", false);

      _defineProperty(this, "visited", false);

      _defineProperty(this, "overlap", false);

      _defineProperty(this, "connectsToBorder", false);

      _defineProperty(this, "ymin", 0);

      _defineProperty(this, "ymax", 0);

      _defineProperty(this, "connections", []);

      _defineProperty(this, "floors", []);

      this.id = i;
      this.ymin = 0xFFFF;
      this.connections = [];
      this.floors = [];
    }, _temp2$1));

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Represents a group of related contours. */
    var ContourSet = function ContourSet() {
      _classCallCheck(this, ContourSet);

      _defineProperty(this, "conts", []);

      _defineProperty(this, "bmin", new Array(3));

      _defineProperty(this, "bmax", new Array(3));

      _defineProperty(this, "cs", 0);

      _defineProperty(this, "ch", 0);

      _defineProperty(this, "width", 0);

      _defineProperty(this, "height", 0);

      _defineProperty(this, "borderSize", 0);

      _defineProperty(this, "maxError", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Represents a polygon mesh suitable for use in building a navigation mesh. */
    var PolyMesh = function PolyMesh() {
      _classCallCheck(this, PolyMesh);

      _defineProperty(this, "verts", []);

      _defineProperty(this, "polys", []);

      _defineProperty(this, "regs", []);

      _defineProperty(this, "areas", []);

      _defineProperty(this, "nverts", 0);

      _defineProperty(this, "npolys", 0);

      _defineProperty(this, "nvp", 0);

      _defineProperty(this, "maxpolys", 0);

      _defineProperty(this, "flags", []);

      _defineProperty(this, "bmin", new Array(3));

      _defineProperty(this, "bmax", new Array(3));

      _defineProperty(this, "cs", 0);

      _defineProperty(this, "ch", 0);

      _defineProperty(this, "borderSize", 0);

      _defineProperty(this, "maxEdgeError", 0);
    };

    function arraycopy$1(one, oneStart, two, twoStart, len) {
      for (var i = 0; i < len; i++) {
        two[twoStart + i] = one[oneStart + i];
      }
    }

    var Edge = function Edge() {
      _classCallCheck(this, Edge);

      _defineProperty(this, "vert", new Array(2));

      _defineProperty(this, "polyEdge", new Array(2));

      _defineProperty(this, "poly", new Array(2));
    };

    var RecastMesh = /*#__PURE__*/function () {
      function RecastMesh() {
        _classCallCheck(this, RecastMesh);
      }

      _createClass(RecastMesh, null, [{
        key: "buildMeshAdjacency",
        value: function buildMeshAdjacency(polys, npolys, nverts, vertsPerPoly) {
          // Based on code by Eric Lengyel from:
          // http://www.terathon.com/code/edges.php
          var maxEdgeCount = npolys * vertsPerPoly;
          var firstEdge = new Array(nverts + maxEdgeCount);
          var nextEdge = nverts;
          var edgeCount = 0;
          var edges = new Array(maxEdgeCount);

          for (var i = 0; i < nverts; i++) {
            firstEdge[i] = RecastConstants.RC_MESH_NULL_IDX;
          }

          for (var _i = 0; _i < npolys; ++_i) {
            var t = _i * vertsPerPoly * 2;

            for (var j = 0; j < vertsPerPoly; ++j) {
              if (polys[t + j] == RecastConstants.RC_MESH_NULL_IDX) break;
              var v0 = polys[t + j];
              var v1 = j + 1 >= vertsPerPoly || polys[t + j + 1] == RecastConstants.RC_MESH_NULL_IDX ? polys[t + 0] : polys[t + j + 1];

              if (v0 < v1) {
                var edge = new Edge();
                edges[edgeCount] = edge;
                edge.vert[0] = v0;
                edge.vert[1] = v1;
                edge.poly[0] = _i;
                edge.polyEdge[0] = j;
                edge.poly[1] = _i;
                edge.polyEdge[1] = 0; // Insert edge

                firstEdge[nextEdge + edgeCount] = firstEdge[v0];
                firstEdge[v0] = edgeCount;
                edgeCount++;
              }
            }
          }

          for (var _i2 = 0; _i2 < npolys; ++_i2) {
            var _t = _i2 * vertsPerPoly * 2;

            for (var _j = 0; _j < vertsPerPoly; ++_j) {
              if (polys[_t + _j] == RecastConstants.RC_MESH_NULL_IDX) break;
              var _v = polys[_t + _j];

              var _v2 = _j + 1 >= vertsPerPoly || polys[_t + _j + 1] == RecastConstants.RC_MESH_NULL_IDX ? polys[_t + 0] : polys[_t + _j + 1];

              if (_v > _v2) {
                for (var e = firstEdge[_v2]; e != RecastConstants.RC_MESH_NULL_IDX; e = firstEdge[nextEdge + e]) {
                  var _edge = edges[e];

                  if (_edge.vert[1] == _v && _edge.poly[0] == _edge.poly[1]) {
                    _edge.poly[1] = _i2;
                    _edge.polyEdge[1] = _j;
                    break;
                  }
                }
              }
            }
          } // Store adjacency


          for (var _i3 = 0; _i3 < edgeCount; ++_i3) {
            var _e = edges[_i3];

            if (_e.poly[0] != _e.poly[1]) {
              var p0 = _e.poly[0] * vertsPerPoly * 2;
              var p1 = _e.poly[1] * vertsPerPoly * 2;
              polys[p0 + vertsPerPoly + _e.polyEdge[0]] = _e.poly[1];
              polys[p1 + vertsPerPoly + _e.polyEdge[1]] = _e.poly[0];
            }
          }
        }
      }, {
        key: "computeVertexHash",
        value: function computeVertexHash(x, y, z) {
          var h1 = 0x8da6b343; // Large multiplicative constants;

          var h2 = 0xd8163841; // here arbitrarily chosen primes

          var h3 = 0xcb1ab31;
          var n = h1 * x + h2 * y + h3 * z;
          return n & RecastMesh.VERTEX_BUCKET_COUNT - 1;
        }
      }, {
        key: "addVertex",
        value: function addVertex(x, y, z, verts, firstVert, nextVert, nv) {
          var bucket = RecastMesh.computeVertexHash(x, 0, z);
          var i = firstVert[bucket];

          while (i != -1) {
            var _v3 = i * 3;

            if (verts[_v3 + 0] == x && Math.abs(verts[_v3 + 1] - y) <= 2 && verts[_v3 + 2] == z) return [i, nv];
            i = nextVert[i]; // next
          } // Could not find, create new.


          i = nv;
          nv++;
          var v = i * 3;
          verts[v + 0] = x;
          verts[v + 1] = y;
          verts[v + 2] = z;
          nextVert[i] = firstVert[bucket];
          firstVert[bucket] = i;
          return [i, nv];
        }
      }, {
        key: "prev",
        value: function prev(i, n) {
          return i - 1 >= 0 ? i - 1 : n - 1;
        }
      }, {
        key: "next",
        value: function next(i, n) {
          return i + 1 < n ? i + 1 : 0;
        }
      }, {
        key: "area2",
        value: function area2(verts, a, b, c) {
          return (verts[b + 0] - verts[a + 0]) * (verts[c + 2] - verts[a + 2]) - (verts[c + 0] - verts[a + 0]) * (verts[b + 2] - verts[a + 2]);
        } // Returns true iff c is strictly to the left of the directed
        // line through a to b.

      }, {
        key: "left",
        value: function left(verts, a, b, c) {
          return RecastMesh.area2(verts, a, b, c) < 0;
        }
      }, {
        key: "leftOn",
        value: function leftOn(verts, a, b, c) {
          return RecastMesh.area2(verts, a, b, c) <= 0;
        }
      }, {
        key: "collinear",
        value: function collinear(verts, a, b, c) {
          return RecastMesh.area2(verts, a, b, c) == 0;
        } // Returns true iff ab properly intersects cd: they share
        // a poPoly interior to both segments. The properness of the
        // intersection is ensured by using strict leftness.

      }, {
        key: "intersectProp",
        value: function intersectProp(verts, a, b, c, d) {
          // Eliminate improper cases.
          if (RecastMesh.collinear(verts, a, b, c) || RecastMesh.collinear(verts, a, b, d) || RecastMesh.collinear(verts, c, d, a) || RecastMesh.collinear(verts, c, d, b)) return false;
          return RecastMesh.left(verts, a, b, c) ^ RecastMesh.left(verts, a, b, d) && RecastMesh.left(verts, c, d, a) ^ RecastMesh.left(verts, c, d, b);
        } // Returns T iff (a,b,c) are collinear and poPoly c lies
        // on the closed segement ab.

      }, {
        key: "between",
        value: function between(verts, a, b, c) {
          if (!RecastMesh.collinear(verts, a, b, c)) return false; // If ab not vertical, check betweenness on x; else on y.

          if (verts[a + 0] != verts[b + 0]) return verts[a + 0] <= verts[c + 0] && verts[c + 0] <= verts[b + 0] || verts[a + 0] >= verts[c + 0] && verts[c + 0] >= verts[b + 0];else return verts[a + 2] <= verts[c + 2] && verts[c + 2] <= verts[b + 2] || verts[a + 2] >= verts[c + 2] && verts[c + 2] >= verts[b + 2];
        } // Returns true iff segments ab and cd intersect, properly or improperly.

      }, {
        key: "intersect",
        value: function intersect(verts, a, b, c, d) {
          if (RecastMesh.intersectProp(verts, a, b, c, d)) return true;else if (RecastMesh.between(verts, a, b, c) || RecastMesh.between(verts, a, b, d) || RecastMesh.between(verts, c, d, a) || RecastMesh.between(verts, c, d, b)) return true;else return false;
        }
      }, {
        key: "vequal",
        value: function vequal(verts, a, b) {
          return verts[a + 0] == verts[b + 0] && verts[a + 2] == verts[b + 2];
        } // Returns T iff (v_i, v_j) is a proper internal *or* external
        // diagonal of P, *ignoring edges incident to v_i and v_j*.

      }, {
        key: "diagonalie",
        value: function diagonalie(i, j, n, verts, indices) {
          var d0 = (indices[i] & 0x0fffffff) * 4;
          var d1 = (indices[j] & 0x0fffffff) * 4; // For each edge (k,k+1) of P

          for (var k = 0; k < n; k++) {
            var k1 = RecastMesh.next(k, n); // Skip edges incident to i or j

            if (!(k == i || k1 == i || k == j || k1 == j)) {
              var p0 = (indices[k] & 0x0fffffff) * 4;
              var p1 = (indices[k1] & 0x0fffffff) * 4;
              if (RecastMesh.vequal(verts, d0, p0) || RecastMesh.vequal(verts, d1, p0) || RecastMesh.vequal(verts, d0, p1) || RecastMesh.vequal(verts, d1, p1)) continue;
              if (RecastMesh.intersect(verts, d0, d1, p0, p1)) return false;
            }
          }

          return true;
        } // Returns true iff the diagonal (i,j) is strictly internal to the
        // polygon P in the neighborhood of the i endpoint.

      }, {
        key: "inCone",
        value: function inCone(i, j, n, verts, indices) {
          var pi = (indices[i] & 0x0fffffff) * 4;
          var pj = (indices[j] & 0x0fffffff) * 4;
          var pi1 = (indices[RecastMesh.next(i, n)] & 0x0fffffff) * 4;
          var pin1 = (indices[RecastMesh.prev(i, n)] & 0x0fffffff) * 4; // If P[i] is a convex vertex [ i+1 left or on (i-1,i) ].

          if (RecastMesh.leftOn(verts, pin1, pi, pi1)) {
            return RecastMesh.left(verts, pi, pj, pin1) && RecastMesh.left(verts, pj, pi, pi1);
          } // Assume (i-1,i,i+1) not collinear.
          // else P[i] is reflex.


          return !(RecastMesh.leftOn(verts, pi, pj, pi1) && RecastMesh.leftOn(verts, pj, pi, pin1));
        } // Returns T iff (v_i, v_j) is a proper internal
        // diagonal of P.

      }, {
        key: "diagonal",
        value: function diagonal(i, j, n, verts, indices) {
          return RecastMesh.inCone(i, j, n, verts, indices) && RecastMesh.diagonalie(i, j, n, verts, indices);
        }
      }, {
        key: "diagonalieLoose",
        value: function diagonalieLoose(i, j, n, verts, indices) {
          var d0 = (indices[i] & 0x0fffffff) * 4;
          var d1 = (indices[j] & 0x0fffffff) * 4; // For each edge (k,k+1) of P

          for (var k = 0; k < n; k++) {
            var k1 = RecastMesh.next(k, n); // Skip edges incident to i or j

            if (!(k == i || k1 == i || k == j || k1 == j)) {
              var p0 = (indices[k] & 0x0fffffff) * 4;
              var p1 = (indices[k1] & 0x0fffffff) * 4;
              if (RecastMesh.vequal(verts, d0, p0) || RecastMesh.vequal(verts, d1, p0) || RecastMesh.vequal(verts, d0, p1) || RecastMesh.vequal(verts, d1, p1)) continue;
              if (RecastMesh.intersectProp(verts, d0, d1, p0, p1)) return false;
            }
          }

          return true;
        }
      }, {
        key: "inConeLoose",
        value: function inConeLoose(i, j, n, verts, indices) {
          var pi = (indices[i] & 0x0fffffff) * 4;
          var pj = (indices[j] & 0x0fffffff) * 4;
          var pi1 = (indices[RecastMesh.next(i, n)] & 0x0fffffff) * 4;
          var pin1 = (indices[RecastMesh.prev(i, n)] & 0x0fffffff) * 4; // If P[i] is a convex vertex [ i+1 left or on (i-1,i) ].

          if (RecastMesh.leftOn(verts, pin1, pi, pi1)) return RecastMesh.leftOn(verts, pi, pj, pin1) && RecastMesh.leftOn(verts, pj, pi, pi1); // Assume (i-1,i,i+1) not collinear.
          // else P[i] is reflex.

          return !(RecastMesh.leftOn(verts, pi, pj, pi1) && RecastMesh.leftOn(verts, pj, pi, pin1));
        }
      }, {
        key: "diagonalLoose",
        value: function diagonalLoose(i, j, n, verts, indices) {
          return RecastMesh.inConeLoose(i, j, n, verts, indices) && RecastMesh.diagonalieLoose(i, j, n, verts, indices);
        }
      }, {
        key: "triangulate",
        value: function triangulate(n, verts, indices, tris) {
          var ntris = 0; // The last bit of the index is used to indicate if the vertex can be removed.

          for (var i = 0; i < n; i++) {
            var i1 = RecastMesh.next(i, n);
            var i2 = RecastMesh.next(i1, n);

            if (RecastMesh.diagonal(i, i2, n, verts, indices)) {
              indices[i1] |= 0x80000000;
            }
          }

          while (n > 3) {
            var minLen = -1;
            var mini = -1;

            for (var _i7 = 0; _i7 < n; _i7++) {
              var _i8 = RecastMesh.next(_i7, n);

              if ((indices[_i8] & 0x80000000) != 0) {
                var p0 = (indices[_i7] & 0x0fffffff) * 4;
                var p2 = (indices[RecastMesh.next(_i8, n)] & 0x0fffffff) * 4;
                var dx = verts[p2 + 0] - verts[p0 + 0];
                var dy = verts[p2 + 2] - verts[p0 + 2];
                var len = dx * dx + dy * dy;

                if (minLen < 0 || len < minLen) {
                  minLen = len;
                  mini = _i7;
                }
              }
            }

            if (mini == -1) {
              // We might get here because the contour has overlapping segments, like this:
              //
              // A o-o=====o---o B
              // / |C D| \
              // o o o o
              // : : : :
              // We'll try to recover by loosing up the inCone test a bit so that a diagonal
              // like A-B or C-D can be found and we can continue.
              minLen = -1;
              mini = -1;

              for (var _i9 = 0; _i9 < n; _i9++) {
                var _i10 = RecastMesh.next(_i9, n);

                var _i11 = RecastMesh.next(_i10, n);

                if (RecastMesh.diagonalLoose(_i9, _i11, n, verts, indices)) {
                  var _p = (indices[_i9] & 0x0fffffff) * 4;

                  var _p2 = (indices[RecastMesh.next(_i11, n)] & 0x0fffffff) * 4;

                  var _dx = verts[_p2 + 0] - verts[_p + 0];

                  var _dy = verts[_p2 + 2] - verts[_p + 2];

                  var _len = _dx * _dx + _dy * _dy;

                  if (minLen < 0 || _len < minLen) {
                    minLen = _len;
                    mini = _i9;
                  }
                }
              }

              if (mini == -1) {
                // The contour is messed up. This sometimes happens
                // if the contour simplification is too aggressive.
                return -ntris;
              }
            }

            var _i4 = mini;

            var _i5 = RecastMesh.next(_i4, n);

            var _i6 = RecastMesh.next(_i5, n);

            tris[ntris * 3] = indices[_i4] & 0x0ffffff;
            tris[ntris * 3 + 1] = indices[_i5] & 0x0ffffff;
            tris[ntris * 3 + 2] = indices[_i6] & 0x0ffffff;
            ntris++; // Removes P[i1] by copying P[i+1]...P[n-1] left one index.

            n--;

            for (var k = _i5; k < n; k++) {
              indices[k] = indices[k + 1];
            }

            if (_i5 >= n) _i5 = 0;
            _i4 = RecastMesh.prev(_i5, n); // Update diagonal flags.

            if (RecastMesh.diagonal(RecastMesh.prev(_i4, n), _i5, n, verts, indices)) indices[_i4] |= 0x80000000;else indices[_i4] &= 0x0ffffff;
            if (RecastMesh.diagonal(_i4, RecastMesh.next(_i5, n), n, verts, indices)) indices[_i5] |= 0x80000000;else indices[_i5] &= 0x0ffffff;
          } // Append the remaining triangle.


          tris[ntris * 3] = indices[0] & 0x0ffffff;
          tris[ntris * 3 + 1] = indices[1] & 0x0ffffff;
          tris[ntris * 3 + 2] = indices[2] & 0x0ffffff;
          ntris++;
          return ntris;
        }
      }, {
        key: "countPolyVerts",
        value: function countPolyVerts(p, j, nvp) {
          for (var i = 0; i < nvp; ++i) {
            if (p[i + j] == RecastConstants.RC_MESH_NULL_IDX) return i;
          }

          return nvp;
        }
      }, {
        key: "uleft",
        value: function uleft(verts, a, b, c) {
          return (verts[b + 0] - verts[a + 0]) * (verts[c + 2] - verts[a + 2]) - (verts[c + 0] - verts[a + 0]) * (verts[b + 2] - verts[a + 2]) < 0;
        }
      }, {
        key: "getPolyMergeValue",
        value: function getPolyMergeValue(polys, pa, pb, verts, nvp) {
          var ea = -1;
          var eb = -1;
          var na = RecastMesh.countPolyVerts(polys, pa, nvp);
          var nb = RecastMesh.countPolyVerts(polys, pb, nvp); // If the merged polygon would be too big, do not merge.

          if (na + nb - 2 > nvp) return [-1, ea, eb]; // Check if the polygons share an edge.

          for (var i = 0; i < na; ++i) {
            var va0 = polys[pa + i];
            var va1 = polys[pa + (i + 1) % na];

            if (va0 > va1) {
              var temp = va0;
              va0 = va1;
              va1 = temp;
            }

            for (var j = 0; j < nb; ++j) {
              var vb0 = polys[pb + j];
              var vb1 = polys[pb + (j + 1) % nb];

              if (vb0 > vb1) {
                var _temp = vb0;
                vb0 = vb1;
                vb1 = _temp;
              }

              if (va0 == vb0 && va1 == vb1) {
                ea = i;
                eb = j;
                break;
              }
            }
          } // No common edge, cannot merge.


          if (ea == -1 || eb == -1) return [-1, ea, eb]; // Check to see if the merged polygon would be convex.

          var va, vb, vc;
          va = polys[pa + (ea + na - 1) % na];
          vb = polys[pa + ea];
          vc = polys[pb + (eb + 2) % nb];
          if (!RecastMesh.uleft(verts, va * 3, vb * 3, vc * 3)) return [-1, ea, eb];
          va = polys[pb + (eb + nb - 1) % nb];
          vb = polys[pb + eb];
          vc = polys[pa + (ea + 2) % na];
          if (!RecastMesh.uleft(verts, va * 3, vb * 3, vc * 3)) return [-1, ea, eb];
          va = polys[pa + ea];
          vb = polys[pa + (ea + 1) % na];
          var dx = verts[va * 3 + 0] - verts[vb * 3 + 0];
          var dy = verts[va * 3 + 2] - verts[vb * 3 + 2];
          return [dx * dx + dy * dy, ea, eb];
        }
      }, {
        key: "mergePolyVerts",
        value: function mergePolyVerts(polys, pa, pb, ea, eb, tmp, nvp) {
          var na = RecastMesh.countPolyVerts(polys, pa, nvp);
          var nb = RecastMesh.countPolyVerts(polys, pb, nvp); // Merge polygons.

          polys.fill(RecastConstants.RC_MESH_NULL_IDX, tmp, tmp + nvp);
          var n = 0; // Add pa

          for (var i = 0; i < na - 1; ++i) {
            polys[tmp + n] = polys[pa + (ea + 1 + i) % na];
            n++;
          } // Add pb


          for (var _i12 = 0; _i12 < nb - 1; ++_i12) {
            polys[tmp + n] = polys[pb + (eb + 1 + _i12) % nb];
            n++;
          } //arraycopy(polys, tmp, polys, pa, nvp);


          arraycopy$1(polys, tmp, polys, pa, nvp); // for (let i = 0; i < nvp; i++) {
          // 	polys[pa + i] = polys[tmp + i];
          // }
        }
      }, {
        key: "pushFront",
        value: function pushFront(v, arr, an) {
          an++;

          for (var i = an - 1; i > 0; --i) {
            arr[i] = arr[i - 1];
          }

          arr[0] = v;
          return an;
        }
      }, {
        key: "pushBack",
        value: function pushBack(v, arr, an) {
          arr[an] = v;
          an++;
          return an;
        }
      }, {
        key: "canRemoveVertex",
        value: function canRemoveVertex(ctx, mesh, rem) {
          var nvp = mesh.nvp; // Count number of polygons to remove.

          var numTouchedVerts = 0;
          var numRemainingEdges = 0;

          for (var i = 0; i < mesh.npolys; ++i) {
            var p = i * nvp * 2;
            var nv = RecastMesh.countPolyVerts(mesh.polys, p, nvp);
            var numRemoved = 0;
            var numVerts = 0;

            for (var j = 0; j < nv; ++j) {
              if (mesh.polys[p + j] == rem) {
                numTouchedVerts++;
                numRemoved++;
              }

              numVerts++;
            }

            if (numRemoved != 0) {
              numRemainingEdges += numVerts - (numRemoved + 1);
            }
          } // There would be too few edges remaining to create a polygon.
          // This can happen for example when a tip of a triangle is marked
          // as dePolyion, but there are no other polys that share the vertex.
          // In this case, the vertex should not be removed.


          if (numRemainingEdges <= 2) return false; // Find edges which share the removed vertex.

          var maxEdges = numTouchedVerts * 2;
          var nedges = 0;
          var edges = new Array(maxEdges * 3);

          for (var _i13 = 0; _i13 < mesh.npolys; ++_i13) {
            var _p3 = _i13 * nvp * 2;

            var _nv = RecastMesh.countPolyVerts(mesh.polys, _p3, nvp); // Collect edges which touches the removed vertex.


            for (var _j2 = 0, k = _nv - 1; _j2 < _nv; k = _j2++) {
              if (mesh.polys[_p3 + _j2] == rem || mesh.polys[_p3 + k] == rem) {
                // Arrange edge so that a=rem.
                var a = mesh.polys[_p3 + _j2],
                    b = mesh.polys[_p3 + k];

                if (b == rem) {
                  var temp = a;
                  a = b;
                  b = temp;
                } // Check if the edge exists


                var exists = false;

                for (var m = 0; m < nedges; ++m) {
                  var e = m * 3;

                  if (edges[e + 1] == b) {
                    // Exists, increment vertex share count.
                    edges[e + 2]++;
                    exists = true;
                  }
                } // Add new edge.


                if (!exists) {
                  var _e2 = nedges * 3;

                  edges[_e2 + 0] = a;
                  edges[_e2 + 1] = b;
                  edges[_e2 + 2] = 1;
                  nedges++;
                }
              }
            }
          } // There should be no more than 2 open edges.
          // This catches the case that two non-adjacent polygons
          // share the removed vertex. In that case, do not remove the vertex.


          var numOpenEdges = 0;

          for (var _i14 = 0; _i14 < nedges; ++_i14) {
            if (edges[_i14 * 3 + 2] < 2) numOpenEdges++;
          }

          if (numOpenEdges > 2) return false;
          return true;
        }
      }, {
        key: "removeVertex",
        value: function removeVertex(ctx, mesh, rem, maxTris) {
          var nvp = mesh.nvp; // Count number of polygons to remove.

          var numRemovedVerts = 0;

          for (var i = 0; i < mesh.npolys; ++i) {
            var p = i * nvp * 2;
            var nv = RecastMesh.countPolyVerts(mesh.polys, p, nvp);

            for (var j = 0; j < nv; ++j) {
              if (mesh.polys[p + j] == rem) numRemovedVerts++;
            }
          }

          var nedges = 0;
          var edges = new Array(numRemovedVerts * nvp * 4);
          var nhole = 0;
          var hole = new Array(numRemovedVerts * nvp);
          var nhreg = 0;
          var hreg = new Array(numRemovedVerts * nvp);
          var nharea = 0;
          var harea = new Array(numRemovedVerts * nvp);

          for (var _i15 = 0; _i15 < mesh.npolys; ++_i15) {
            var _p4 = _i15 * nvp * 2;

            var _nv2 = RecastMesh.countPolyVerts(mesh.polys, _p4, nvp);

            var hasRem = false;

            for (var _j3 = 0; _j3 < _nv2; ++_j3) {
              if (mesh.polys[_p4 + _j3] == rem) hasRem = true;
            }

            if (hasRem) {
              // Collect edges which does not touch the removed vertex.
              for (var _j4 = 0, k = _nv2 - 1; _j4 < _nv2; k = _j4++) {
                if (mesh.polys[_p4 + _j4] != rem && mesh.polys[_p4 + k] != rem) {
                  var e = nedges * 4;
                  edges[e + 0] = mesh.polys[_p4 + k];
                  edges[e + 1] = mesh.polys[_p4 + _j4];
                  edges[e + 2] = mesh.regs[_i15];
                  edges[e + 3] = mesh.areas[_i15];
                  nedges++;
                }
              } // Remove the polygon.


              var p2 = (mesh.npolys - 1) * nvp * 2;

              if (_p4 != p2) {
                arraycopy$1(mesh.polys, p2, mesh.polys, _p4, nvp);
              }

              mesh.polys.fill(RecastConstants.RC_MESH_NULL_IDX, _p4 + nvp, _p4 + nvp + nvp);
              mesh.regs[_i15] = mesh.regs[mesh.npolys - 1];
              mesh.areas[_i15] = mesh.areas[mesh.npolys - 1];
              mesh.npolys--;
              --_i15;
            }
          } // Remove vertex.


          for (var _i16 = rem; _i16 < mesh.nverts - 1; ++_i16) {
            mesh.verts[_i16 * 3 + 0] = mesh.verts[(_i16 + 1) * 3 + 0];
            mesh.verts[_i16 * 3 + 1] = mesh.verts[(_i16 + 1) * 3 + 1];
            mesh.verts[_i16 * 3 + 2] = mesh.verts[(_i16 + 1) * 3 + 2];
          }

          mesh.nverts--; // Adjust indices to match the removed vertex layout.

          for (var _i17 = 0; _i17 < mesh.npolys; ++_i17) {
            var _p5 = _i17 * nvp * 2;

            var _nv3 = RecastMesh.countPolyVerts(mesh.polys, _p5, nvp);

            for (var _j5 = 0; _j5 < _nv3; ++_j5) {
              if (mesh.polys[_p5 + _j5] > rem) mesh.polys[_p5 + _j5]--;
            }
          }

          for (var _i18 = 0; _i18 < nedges; ++_i18) {
            if (edges[_i18 * 4 + 0] > rem) edges[_i18 * 4 + 0]--;
            if (edges[_i18 * 4 + 1] > rem) edges[_i18 * 4 + 1]--;
          }

          if (nedges == 0) return; // Start with one vertex, keep appending connected
          // segments to the start and end of the hole.

          RecastMesh.pushBack(edges[0], hole, nhole);
          RecastMesh.pushBack(edges[2], hreg, nhreg);
          RecastMesh.pushBack(edges[3], harea, nharea);

          while (nedges != 0) {
            var match = false;

            for (var _i19 = 0; _i19 < nedges; ++_i19) {
              var ea = edges[_i19 * 4 + 0];
              var eb = edges[_i19 * 4 + 1];
              var r = edges[_i19 * 4 + 2];
              var a = edges[_i19 * 4 + 3];
              var add = false;

              if (hole[0] == eb) {
                // The segment matches the beginning of the hole boundary.
                RecastMesh.pushFront(ea, hole, nhole);
                RecastMesh.pushFront(r, hreg, nhreg);
                RecastMesh.pushFront(a, harea, nharea);
                add = true;
              } else if (hole[nhole - 1] == ea) {
                // The segment matches the end of the hole boundary.
                nhole = RecastMesh.pushBack(eb, hole, nhole);
                nhreg = RecastMesh.pushBack(r, hreg, nhreg);
                nharea = RecastMesh.pushBack(a, harea, nharea);
                add = true;
              }

              if (add) {
                // The edge segment was added, remove it.
                edges[_i19 * 4 + 0] = edges[(nedges - 1) * 4 + 0];
                edges[_i19 * 4 + 1] = edges[(nedges - 1) * 4 + 1];
                edges[_i19 * 4 + 2] = edges[(nedges - 1) * 4 + 2];
                edges[_i19 * 4 + 3] = edges[(nedges - 1) * 4 + 3];
                --nedges;
                match = true;
                --_i19;
              }
            }

            if (!match) break;
          }

          var tris = new Array(nhole * 3);
          var tverts = new Array(nhole * 4);
          var thole = new Array(nhole); // Generate temp vertex array for triangulation.

          for (var _i20 = 0; _i20 < nhole; ++_i20) {
            var pi = hole[_i20];
            tverts[_i20 * 4 + 0] = mesh.verts[pi * 3 + 0];
            tverts[_i20 * 4 + 1] = mesh.verts[pi * 3 + 1];
            tverts[_i20 * 4 + 2] = mesh.verts[pi * 3 + 2];
            tverts[_i20 * 4 + 3] = 0;
            thole[_i20] = _i20;
          } // Triangulate the hole.


          var ntris = RecastMesh.triangulate(nhole, tverts, thole, tris);

          if (ntris < 0) {
            ntris = -ntris;
            ctx.warn("removeVertex: triangulate() returned bad results.");
          } // Merge the hole triangles back to polygons.


          var polys = new Array((ntris + 1) * nvp);
          var pregs = new Array(ntris);
          var pareas = new Array(ntris);

          var npolys = 0;
          polys.fill(RecastConstants.RC_MESH_NULL_IDX, 0, ntris * nvp);

          for (var _j6 = 0; _j6 < ntris; ++_j6) {
            var t = _j6 * 3;

            if (tris[t + 0] != tris[t + 1] && tris[t + 0] != tris[t + 2] && tris[t + 1] != tris[t + 2]) {
              polys[npolys * nvp + 0] = hole[tris[t + 0]];
              polys[npolys * nvp + 1] = hole[tris[t + 1]];
              polys[npolys * nvp + 2] = hole[tris[t + 2]]; // If this polygon covers multiple region types then
              // mark it as such

              if (hreg[tris[t + 0]] != hreg[tris[t + 1]] || hreg[tris[t + 1]] != hreg[tris[t + 2]]) pregs[npolys] = RecastConstants.RC_MULTIPLE_REGS;else pregs[npolys] = hreg[tris[t + 0]];
              pareas[npolys] = harea[tris[t + 0]];
              npolys++;
            }
          }

          if (npolys == 0) return; // Merge polygons.

          if (nvp > 3) {
            for (;;) {
              // Find best polygons to merge.
              var bestMergeVal = 0;
              var bestPa = 0,
                  bestPb = 0,
                  bestEa = 0,
                  bestEb = 0;

              for (var _j7 = 0; _j7 < npolys - 1; ++_j7) {
                var pj = _j7 * nvp;

                for (var _k = _j7 + 1; _k < npolys; ++_k) {
                  var pk = _k * nvp;
                  var veaeb = RecastMesh.getPolyMergeValue(polys, pj, pk, mesh.verts, nvp);
                  var v = veaeb[0];
                  var _ea = veaeb[1];
                  var _eb = veaeb[2];

                  if (v > bestMergeVal) {
                    bestMergeVal = v;
                    bestPa = _j7;
                    bestPb = _k;
                    bestEa = _ea;
                    bestEb = _eb;
                  }
                }
              }

              if (bestMergeVal > 0) {
                // Found best, merge.
                var pa = bestPa * nvp;
                var pb = bestPb * nvp;
                RecastMesh.mergePolyVerts(polys, pa, pb, bestEa, bestEb, tmpPoly, nvp);
                if (pregs[bestPa] != pregs[bestPb]) pregs[bestPa] = RecastConstants.RC_MULTIPLE_REGS;
                var last = (npolys - 1) * nvp;

                if (pb != last) {
                  arraycopy$1(polys, last, polys, pb, nvp);
                }

                pregs[bestPb] = pregs[npolys - 1];
                pareas[bestPb] = pareas[npolys - 1];
                npolys--;
              } else {
                // Could not merge any polygons, stop.
                break;
              }
            }
          } // Store polygons.


          for (var _i21 = 0; _i21 < npolys; ++_i21) {
            if (mesh.npolys >= maxTris) break;

            var _p6 = mesh.npolys * nvp * 2;

            mesh.polys.fill(RecastConstants.RC_MESH_NULL_IDX, _p6, _p6 + nvp * 2);

            for (var _j8 = 0; _j8 < nvp; ++_j8) {
              mesh.polys[_p6 + _j8] = polys[_i21 * nvp + _j8];
            }

            mesh.regs[mesh.npolys] = pregs[_i21];
            mesh.areas[mesh.npolys] = pareas[_i21];
            mesh.npolys++;

            if (mesh.npolys > maxTris) {
              throw new RuntimeException("removeVertex: Too many polygons " + mesh.npolys + " (max:" + maxTris + ".");
            }
          }
        } /// @par
        ///
        /// @note If the mesh data is to be used to construct a Detour navigation mesh, then the upper
        /// limit must be retricted to <= #DT_VERTS_PER_POLYGON.
        ///
        /// @see rcAllocPolyMesh, rcContourSet, rcPolyMesh, rcConfig

      }, {
        key: "buildPolyMesh",
        value: function buildPolyMesh(ctx, cset, nvp) {
          ctx.startTimer("BUILD_POLYMESH");
          var mesh = new PolyMesh();
          RecastVectors$1.copy3(mesh.bmin, cset.bmin, 0);
          RecastVectors$1.copy3(mesh.bmax, cset.bmax, 0);
          mesh.cs = cset.cs;
          mesh.ch = cset.ch;
          mesh.borderSize = cset.borderSize;
          mesh.maxEdgeError = cset.maxError;
          var maxVertices = 0;
          var maxTris = 0;
          var maxVertsPerCont = 0;

          for (var i = 0; i < cset.conts.length; ++i) {
            // Skip null contours.
            if (cset.conts[i].nverts < 3) continue;
            maxVertices += cset.conts[i].nverts;
            maxTris += cset.conts[i].nverts - 2;
            maxVertsPerCont = Math.max(maxVertsPerCont, cset.conts[i].nverts);
          }

          if (maxVertices >= 0xfffe) {
            throw new RuntimeException("rcBuildPolyMesh: Too many vertices " + maxVertices);
          }

          var vflags = new Array(maxVertices).fill(0);
          vflags.fill(0);
          mesh.verts = new Array(maxVertices * 3).fill(0);
          mesh.polys = new Array(maxTris * nvp * 2).fill(RecastConstants.RC_MESH_NULL_IDX); // Arrays.fill(mesh.polys, RecastConstants.RC_MESH_NULL_IDX);

          mesh.regs = new Array(maxTris).fill(0);
          mesh.areas = new Array(maxTris).fill(0);
          mesh.nverts = 0;
          mesh.npolys = 0;
          mesh.nvp = nvp;
          mesh.maxpolys = maxTris;
          var nextVert = new Array(maxVertices);
          var firstVert = new Array(RecastMesh.VERTEX_BUCKET_COUNT);

          for (var _i22 = 0; _i22 < RecastMesh.VERTEX_BUCKET_COUNT; ++_i22) {
            firstVert[_i22] = -1;
          }

          var indices = new Array(maxVertsPerCont);
          var tris = new Array(maxVertsPerCont * 3);
          var polys = new Array((maxVertsPerCont + 1) * nvp);
          var tmpPoly = maxVertsPerCont * nvp;

          for (var _i23 = 0; _i23 < cset.conts.length; ++_i23) {
            var cont = cset.conts[_i23]; // Skip null contours.

            if (cont.nverts < 3) continue; // Triangulate contour

            for (var j = 0; j < cont.nverts; ++j) {
              indices[j] = j;
            }

            var ntris = RecastMesh.triangulate(cont.nverts, cont.verts, indices, tris);

            if (ntris <= 0) {
              // Bad triangulation, should not happen.
              ctx.warn("buildPolyMesh: Bad triangulation Contour " + _i23 + ".");
              ntris = -ntris;
            } // Add and merge vertices.


            for (var _j9 = 0; _j9 < cont.nverts; ++_j9) {
              var v = _j9 * 4;
              var inv = RecastMesh.addVertex(cont.verts[v + 0], cont.verts[v + 1], cont.verts[v + 2], mesh.verts, firstVert, nextVert, mesh.nverts);
              indices[_j9] = inv[0];
              mesh.nverts = inv[1];

              if ((cont.verts[v + 3] & RecastConstants.RC_BORDER_VERTEX) != 0) {
                // This vertex should be removed.
                vflags[indices[_j9]] = 1;
              }
            } // Build initial polygons.


            var npolys = 0; // Arrays.fill(polys, RecastConstants.RC_MESH_NULL_IDX);

            polys.fill(RecastConstants.RC_MESH_NULL_IDX);

            for (var _j10 = 0; _j10 < ntris; ++_j10) {
              var t = _j10 * 3;

              if (tris[t + 0] != tris[t + 1] && tris[t + 0] != tris[t + 2] && tris[t + 1] != tris[t + 2]) {
                polys[npolys * nvp + 0] = indices[tris[t + 0]];
                polys[npolys * nvp + 1] = indices[tris[t + 1]];
                polys[npolys * nvp + 2] = indices[tris[t + 2]];
                npolys++;
              }
            }

            if (npolys == 0) continue; // Merge polygons.

            if (nvp > 3) {
              for (;;) {
                // Find best polygons to merge.
                var bestMergeVal = 0;
                var bestPa = 0,
                    bestPb = 0,
                    bestEa = 0,
                    bestEb = 0;

                for (var _j11 = 0; _j11 < npolys - 1; ++_j11) {
                  var pj = _j11 * nvp;

                  for (var k = _j11 + 1; k < npolys; ++k) {
                    var pk = k * nvp;
                    var veaeb = RecastMesh.getPolyMergeValue(polys, pj, pk, mesh.verts, nvp);
                    var _v4 = veaeb[0];
                    var ea = veaeb[1];
                    var eb = veaeb[2];

                    if (_v4 > bestMergeVal) {
                      bestMergeVal = _v4;
                      bestPa = _j11;
                      bestPb = k;
                      bestEa = ea;
                      bestEb = eb;
                    }
                  }
                }

                if (bestMergeVal > 0) {
                  // Found best, merge.
                  var pa = bestPa * nvp;
                  var pb = bestPb * nvp;
                  RecastMesh.mergePolyVerts(polys, pa, pb, bestEa, bestEb, tmpPoly, nvp);
                  var lastPoly = (npolys - 1) * nvp;

                  if (pb != lastPoly) {
                    // arraycopy(polys, lastPoly, polys, pb, nvp);
                    for (var _i24 = 0; _i24 < nvp; _i24++) {
                      polys[pb + _i24] = polys[lastPoly + _i24];
                      if (polys[28] == 80) console.log("break");
                    }
                  }

                  npolys--;
                } else {
                  // Could not merge any polygons, stop.
                  break;
                }
              }
            } //Here they are the same
            // Store polygons.


            for (var _j12 = 0; _j12 < npolys; ++_j12) {
              var p = mesh.npolys * nvp * 2;
              var q = _j12 * nvp;

              for (var _k2 = 0; _k2 < nvp; ++_k2) {
                mesh.polys[p + _k2] = polys[q + _k2];
              }

              mesh.regs[mesh.npolys] = cont.reg;
              mesh.areas[mesh.npolys] = cont.area;
              mesh.npolys++;

              if (mesh.npolys > maxTris) {
                throw new RuntimeException("rcBuildPolyMesh: Too many polygons " + mesh.npolys + " (max:" + maxTris + ").");
              }
            }
          } // fs.writeFileSync("./pmeshjs.txt", JSON.stringify(mesh.polys))
          //Now we are the same here
          // Remove edge vertices.


          for (var _i25 = 0; _i25 < mesh.nverts; ++_i25) {
            if (vflags[_i25] != 0) {
              if (!RecastMesh.canRemoveVertex(ctx, mesh, _i25)) continue;
              RecastMesh.removeVertex(ctx, mesh, _i25, maxTris); // Remove vertex
              // Note: mesh.nverts is already decremented inside removeVertex()!
              // Fixup vertex flags

              for (var _j13 = _i25; _j13 < mesh.nverts; ++_j13) {
                vflags[_j13] = vflags[_j13 + 1];
              }

              --_i25;
            }
          } // Calculate adjacency.


          this.buildMeshAdjacency(mesh.polys, mesh.npolys, mesh.nverts, nvp); // Find portal edges

          if (mesh.borderSize > 0) {
            var w = cset.width;
            var h = cset.height;

            for (var _i26 = 0; _i26 < mesh.npolys; ++_i26) {
              var _p7 = _i26 * 2 * nvp;

              for (var _j14 = 0; _j14 < nvp; ++_j14) {
                if (mesh.polys[_p7 + _j14] == RecastConstants.RC_MESH_NULL_IDX) break; // Skip connected edges.

                if (mesh.polys[_p7 + nvp + _j14] != RecastConstants.RC_MESH_NULL_IDX) continue;
                var nj = _j14 + 1;
                if (nj >= nvp || mesh.polys[_p7 + nj] == RecastConstants.RC_MESH_NULL_IDX) nj = 0;
                var va = mesh.polys[_p7 + _j14] * 3;
                var vb = mesh.polys[_p7 + nj] * 3;
                if (mesh.verts[va + 0] == 0 && mesh.verts[vb + 0] == 0) mesh.polys[_p7 + nvp + _j14] = 0x8000 | 0;else if (mesh.verts[va + 2] == h && mesh.verts[vb + 2] == h) mesh.polys[_p7 + nvp + _j14] = 0x8000 | 1;else if (mesh.verts[va + 0] == w && mesh.verts[vb + 0] == w) mesh.polys[_p7 + nvp + _j14] = 0x8000 | 2;else if (mesh.verts[va + 2] == 0 && mesh.verts[vb + 2] == 0) mesh.polys[_p7 + nvp + _j14] = 0x8000 | 3;
              }
            }
          } // Just allocate the mesh flags array. The user is resposible to fill it.


          mesh.flags = new Array(mesh.npolys);
          mesh.flags.fill(0);

          if (mesh.nverts > 0xffff) {
            throw new RuntimeException("rcBuildPolyMesh: The resulting mesh has too many vertices " + mesh.nverts + " (max " + 0xffff + "). Data can be corrupted.");
          }

          if (mesh.npolys > 0xffff) {
            throw new RuntimeException("rcBuildPolyMesh: The resulting mesh has too many polygons " + mesh.npolys + " (max " + 0xffff + "). Data can be corrupted.");
          }

          ctx.stopTimer("BUILD_POLYMESH");
          return mesh;
        } /// @see rcAllocPolyMesh, rcPolyMesh

      }, {
        key: "mergePolyMeshes",
        value: function mergePolyMeshes(ctx, meshes, nmeshes) {
          if (nmeshes == 0 || meshes == null) return null;
          ctx.startTimer("MERGE_POLYMESH");
          var mesh = new PolyMesh();
          mesh.nvp = meshes[0].nvp;
          mesh.cs = meshes[0].cs;
          mesh.ch = meshes[0].ch;
          RecastVectors$1.copy(mesh.bmin, meshes[0].bmin, 0);
          RecastVectors$1.copy(mesh.bmax, meshes[0].bmax, 0);
          var maxVerts = 0;
          var maxPolys = 0;
          var maxVertsPerMesh = 0;

          for (var i = 0; i < nmeshes; ++i) {
            RecastVectors$1.min(mesh.bmin, meshes[i].bmin, 0);
            RecastVectors$1.max(mesh.bmax, meshes[i].bmax, 0);
            maxVertsPerMesh = Math.max(maxVertsPerMesh, meshes[i].nverts);
            maxVerts += meshes[i].nverts;
            maxPolys += meshes[i].npolys;
          }

          mesh.nverts = 0;
          mesh.verts = new Array(maxVerts * 3);
          mesh.npolys = 0;
          mesh.polys = new Array(maxPolys * 2 * mesh.nvp);
          mesh.polys.fill(RecastConstants.RC_MESH_NULL_IDX, 0, mesh.polys.length);
          mesh.regs = new Array(maxPolys);
          mesh.areas = new Array(maxPolys);
          mesh.flags = new Array(maxPolys);
          var nextVert = new Array(maxVerts);
          var firstVert = new Array(RecastMesh.VERTEX_BUCKET_COUNT);

          for (var _i27 = 0; _i27 < RecastMesh.VERTEX_BUCKET_COUNT; ++_i27) {
            firstVert[_i27] = -1;
          }

          var vremap = new Array(maxVertsPerMesh);

          for (var _i28 = 0; _i28 < nmeshes; ++_i28) {
            var pmesh = meshes[_i28];
            var ox = Math.floor((pmesh.bmin[0] - mesh.bmin[0]) / mesh.cs + 0.5);
            var oz = Math.floor((pmesh.bmin[2] - mesh.bmin[2]) / mesh.cs + 0.5);
            var isMinX = ox == 0;
            var isMinZ = oz == 0;
            var isMaxX = Math.floor((mesh.bmax[0] - pmesh.bmax[0]) / mesh.cs + 0.5) == 0;
            var isMaxZ = Math.floor((mesh.bmax[2] - pmesh.bmax[2]) / mesh.cs + 0.5) == 0;
            var isOnBorder = isMinX || isMinZ || isMaxX || isMaxZ;

            for (var j = 0; j < pmesh.nverts; ++j) {
              var v = j * 3;
              var inv = addVertex(pmesh.verts[v + 0] + ox, pmesh.verts[v + 1], pmesh.verts[v + 2] + oz, mesh.verts, firstVert, nextVert, mesh.nverts);
              vremap[j] = inv[0];
              mesh.nverts = inv[1];
            }

            for (var _j15 = 0; _j15 < pmesh.npolys; ++_j15) {
              var tgt = mesh.npolys * 2 * mesh.nvp;
              var src = _j15 * 2 * mesh.nvp;
              mesh.regs[mesh.npolys] = pmesh.regs[_j15];
              mesh.areas[mesh.npolys] = pmesh.areas[_j15];
              mesh.flags[mesh.npolys] = pmesh.flags[_j15];
              mesh.npolys++;

              for (var k = 0; k < mesh.nvp; ++k) {
                if (pmesh.polys[src + k] == RecastConstants.RC_MESH_NULL_IDX) break;
                mesh.polys[tgt + k] = vremap[pmesh.polys[src + k]];
              }

              if (isOnBorder) {
                for (var _k3 = mesh.nvp; _k3 < mesh.nvp * 2; ++_k3) {
                  if ((pmesh.polys[src + _k3] & 0x8000) != 0 && pmesh.polys[src + _k3] != 0xffff) {
                    var dir = pmesh.polys[src + _k3] & 0xf;

                    switch (dir) {
                      case 0:
                        // Portal x-
                        if (isMinX) mesh.polys[tgt + _k3] = pmesh.polys[src + _k3];
                        break;

                      case 1:
                        // Portal z+
                        if (isMaxZ) mesh.polys[tgt + _k3] = pmesh.polys[src + _k3];
                        break;

                      case 2:
                        // Portal x+
                        if (isMaxX) mesh.polys[tgt + _k3] = pmesh.polys[src + _k3];
                        break;

                      case 3:
                        // Portal z-
                        if (isMinZ) mesh.polys[tgt + _k3] = pmesh.polys[src + _k3];
                        break;
                    }
                  }
                }
              }
            }
          } // Calculate adjacency.


          buildMeshAdjacency(mesh.polys, mesh.npolys, mesh.nverts, mesh.nvp);

          if (mesh.nverts > 0xffff) {
            throw new RuntimeException("rcBuildPolyMesh: The resulting mesh has too many vertices " + mesh.nverts + " (max " + 0xffff + "). Data can be corrupted.");
          }

          if (mesh.npolys > 0xffff) {
            throw new RuntimeException("rcBuildPolyMesh: The resulting mesh has too many polygons " + mesh.npolys + " (max " + 0xffff + "). Data can be corrupted.");
          }

          ctx.stopTimer("MERGE_POLYMESH");
          return mesh;
        }
      }, {
        key: "copyPolyMesh",
        value: function copyPolyMesh(ctx, src) {
          var dst = new PolyMesh();
          dst.nverts = src.nverts;
          dst.npolys = src.npolys;
          dst.maxpolys = src.npolys;
          dst.nvp = src.nvp;
          RecastVectors$1.copy(dst.bmin, src.bmin, 0);
          RecastVectors$1.copy(dst.bmax, src.bmax, 0);
          dst.cs = src.cs;
          dst.ch = src.ch;
          dst.borderSize = src.borderSize;
          dst.maxEdgeError = src.maxEdgeError;
          dst.verts = new Array(src.nverts * 3);
          arraycopy$1(src.verts, 0, dst.verts, 0, dst.verts.length);
          dst.polys = new Array(src.npolys * 2 * src.nvp);
          arraycopy$1(src.polys, 0, dst.polys, 0, dst.polys.length);
          dst.regs = new Array(src.npolys);
          arraycopy$1(src.regs, 0, dst.regs, 0, dst.regs.length);
          dst.areas = new Array(src.npolys);
          arraycopy$1(src.areas, 0, dst.areas, 0, dst.areas.length);
          dst.flags = new Array(src.npolys);
          arraycopy$1(src.flags, 0, dst.flags, 0, dst.flags.length);
          return dst;
        }
      }]);

      return RecastMesh;
    }();

    _defineProperty(RecastMesh, "VERTEX_BUCKET_COUNT", 1 << 12);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Represents a simple, non-overlapping contour in field space. */
    var Contour = function Contour() {
      _classCallCheck(this, Contour);

      _defineProperty(this, "verts", []);

      _defineProperty(this, "nverts", 0);

      _defineProperty(this, "rverts", []);

      _defineProperty(this, "nrverts", 0);

      _defineProperty(this, "area", 0);

      _defineProperty(this, "reg", 0);
    };

    var _temp$2, _temp2$2, _temp3;

    var RecastContour = /*#__PURE__*/function () {
      function RecastContour() {
        _classCallCheck(this, RecastContour);

        _defineProperty(this, "CompareHoles", function (a, b) {
          if (a.minx == b.minx) {
            if (a.minz < b.minz) return -1;
            if (a.minz > b.minz) return 1;
          } else {
            if (a.minx < b.minx) return -1;
            if (a.minx > b.minx) return 1;
          }

          return 0;
        });

        _defineProperty(this, "CompareDiagDist", function (va, vb) {
          var a = va;
          var b = vb;
          if (a.dist < b.dist) return -1;
          if (a.dist > b.dist) return 1;
          return 0;
        });
      }

      _createClass(RecastContour, [{
        key: "mergeRegionHoles",
        value: function mergeRegionHoles(ctx, region) {
          // Sort holes from left to right.
          for (var i = 0; i < region.nholes; i++) {
            var minleft = findLeftMostVertex(region.holes[i].contour);
            region.holes[i].minx = minleft[0];
            region.holes[i].minz = minleft[1];
            region.holes[i].leftmost = minleft[2];
          }

          Arrays.sort(region.holes, new CompareHoles());
          var maxVerts = region.outline.nverts;

          for (var _i = 0; _i < region.nholes; _i++) {
            maxVerts += region.holes[_i].contour.nverts;
          }

          diags = new Array(maxVerts);

          for (var pd = 0; pd < maxVerts; pd++) {
            diags[pd] = new PotentialDiagonal();
          }

          var outline = region.outline; // Merge holes into the outline one by one.

          for (var _i2 = 0; _i2 < region.nholes; _i2++) {
            var hole = region.holes[_i2].contour;
            var index = -1;
            var bestVertex = region.holes[_i2].leftmost;

            for (var iter = 0; iter < hole.nverts; iter++) {
              // Find potential diagonals.
              // The 'best' vertex must be in the cone described by 3 cosequtive vertices of the outline.
              // ..o j-1
              //   |
              //   |   * best
              //   |
              // j o-----o j+1
              //         :
              var ndiags = 0;
              var corner = bestVertex * 4;

              for (var j = 0; j < outline.nverts; j++) {
                if (inCone(j, outline.nverts, outline.verts, corner, hole.verts)) {
                  var dx = outline.verts[j * 4 + 0] - hole.verts[corner + 0];
                  var dz = outline.verts[j * 4 + 2] - hole.verts[corner + 2];
                  diags[ndiags].vert = j;
                  diags[ndiags].dist = dx * dx + dz * dz;
                  ndiags++;
                }
              } // Sort potential diagonals by distance, we want to make the connection as short as possible.


              Arrays.sort(diags, 0, ndiags, new CompareDiagDist()); // Find a diagonal that is not intersecting the outline not the remaining holes.

              index = -1;

              for (var _j = 0; _j < ndiags; _j++) {
                var pt = diags[_j].vert * 4;
                var intersect = intersectSegCountour(pt, corner, diags[_i2].vert, outline.nverts, outline.verts, outline.verts, hole.verts);

                for (var k = _i2; k < region.nholes && !intersect; k++) {
                  intersect |= intersectSegCountour(pt, corner, -1, region.holes[k].contour.nverts, region.holes[k].contour.verts, outline.verts, hole.verts);
                }

                if (!intersect) {
                  index = diags[_j].vert;
                  break;
                }
              } // If found non-intersecting diagonal, stop looking.


              if (index != -1) break; // All the potential diagonals for the current vertex were intersecting, try next vertex.

              bestVertex = (bestVertex + 1) % hole.nverts;
            }

            if (index == -1) {
              ctx.warn("mergeHoles: Failed to find merge points for");
              continue;
            }

            mergeContours(region.outline, hole, index, bestVertex);
          }
        } /// @par
        ///
        /// The raw contours will match the region outlines exactly. The @p maxError and @p maxEdgeLen
        /// parameters control how closely the simplified contours will match the raw contours.
        ///
        /// Simplified contours are generated such that the vertices for portals between areas match up.
        /// (They are considered mandatory vertices.)
        ///
        /// Setting @p maxEdgeLength to zero will disabled the edge length feature.
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// @see rcAllocContourSet, rcCompactHeightfield, rcContourSet, rcConfig

      }], [{
        key: "getCornerHeight",
        value: function getCornerHeight(x, y, i, dir, chf, isBorderVertex) {
          var s = chf.spans[i];
          var ch = s.y;
          var dirp = dir + 1 & 0x3;
          var regs = [0, 0, 0, 0]; // Combine region and area codes in order to prevent
          // border vertices which are in between two areas to be removed.

          regs[0] = chf.spans[i].reg | chf.areas[i] << 16;

          if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
            var ax = x + RecastCommon.GetDirOffsetX(dir);
            var ay = y + RecastCommon.GetDirOffsetY(dir);
            var ai = chf.cells[ax + ay * chf.width].index + RecastCommon.GetCon(s, dir);
            var as = chf.spans[ai];
            ch = Math.max(ch, as.y);
            regs[1] = chf.spans[ai].reg | chf.areas[ai] << 16;

            if (RecastCommon.GetCon(as, dirp) != RecastConstants.RC_NOT_CONNECTED) {
              var ax2 = ax + RecastCommon.GetDirOffsetX(dirp);
              var ay2 = ay + RecastCommon.GetDirOffsetY(dirp);
              var ai2 = chf.cells[ax2 + ay2 * chf.width].index + RecastCommon.GetCon(as, dirp);
              var as2 = chf.spans[ai2];
              ch = Math.max(ch, as2.y);
              regs[2] = chf.spans[ai2].reg | chf.areas[ai2] << 16;
            }
          }

          if (RecastCommon.GetCon(s, dirp) != RecastConstants.RC_NOT_CONNECTED) {
            var _ax = x + RecastCommon.GetDirOffsetX(dirp);

            var _ay = y + RecastCommon.GetDirOffsetY(dirp);

            var _ai = chf.cells[_ax + _ay * chf.width].index + RecastCommon.GetCon(s, dirp);

            var _as = chf.spans[_ai];
            ch = Math.max(ch, _as.y);
            regs[3] = chf.spans[_ai].reg | chf.areas[_ai] << 16;

            if (RecastCommon.GetCon(_as, dir) != RecastConstants.RC_NOT_CONNECTED) {
              var _ax2 = _ax + RecastCommon.GetDirOffsetX(dir);

              var _ay2 = _ay + RecastCommon.GetDirOffsetY(dir);

              var _ai2 = chf.cells[_ax2 + _ay2 * chf.width].index + RecastCommon.GetCon(_as, dir);

              var _as2 = chf.spans[_ai2];
              ch = Math.max(ch, _as2.y);
              regs[2] = chf.spans[_ai2].reg | chf.areas[_ai2] << 16;
            }
          } // Check if the vertex is special edge vertex, these vertices will be removed later.

          return ch;
        }
      }, {
        key: "walkContour",
        value: function walkContour(x, y, i, chf, flags, points) {
          // Choose the first non-connected edge
          var dir = 0;

          while ((flags[i] & 1 << dir) == 0) {
            dir++;
          }

          var startDir = dir;
          var starti = i;
          var area = chf.areas[i];
          var iter = 0;

          while (++iter < 40000) {
            if ((flags[i] & 1 << dir) != 0) {
              // Choose the edge corner
              var isBorderVertex = false;
              var isAreaBorder = false;
              var px = x;
              var py = RecastContour.getCornerHeight(x, y, i, dir, chf, isBorderVertex);
              var pz = y;

              switch (dir) {
                case 0:
                  pz++;
                  break;

                case 1:
                  px++;
                  pz++;
                  break;

                case 2:
                  px++;
                  break;
              }

              var r = 0;
              var s = chf.spans[i];

              if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                var ax = x + RecastCommon.GetDirOffsetX(dir);
                var ay = y + RecastCommon.GetDirOffsetY(dir);
                var ai = chf.cells[ax + ay * chf.width].index + RecastCommon.GetCon(s, dir);
                r = chf.spans[ai].reg;
                if (area != chf.areas[ai]) isAreaBorder = true;
              }

              if (isBorderVertex) r |= RecastConstants.RC_BORDER_VERTEX;
              if (isAreaBorder) r |= RecastConstants.RC_AREA_BORDER;
              points.push(px);
              points.push(py);
              points.push(pz);
              points.push(r);
              flags[i] &= ~(1 << dir); // Remove visited edges

              dir = dir + 1 & 0x3; // Rotate CW
            } else {
              var ni = -1;
              var nx = x + RecastCommon.GetDirOffsetX(dir);
              var ny = y + RecastCommon.GetDirOffsetY(dir);
              var _s = chf.spans[i];

              if (RecastCommon.GetCon(_s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                var nc = chf.cells[nx + ny * chf.width];
                ni = nc.index + RecastCommon.GetCon(_s, dir);
              }

              if (ni == -1) {
                // Should not happen.
                return;
              }

              x = nx;
              y = ny;
              i = ni;
              dir = dir + 3 & 0x3; // Rotate CCW
            }

            if (starti == i && startDir == dir) {
              break;
            }
          }
        }
      }, {
        key: "distancePtSeg",
        value: function distancePtSeg(x, z, px, pz, qx, qz) {
          var pqx = qx - px;
          var pqz = qz - pz;
          var dx = x - px;
          var dz = z - pz;
          var d = pqx * pqx + pqz * pqz;
          var t = pqx * dx + pqz * dz;
          if (d > 0) t /= d;
          if (t < 0) t = 0;else if (t > 1) t = 1;
          dx = px + t * pqx - x;
          dz = pz + t * pqz - z;
          return dx * dx + dz * dz;
        }
      }, {
        key: "simplifyContour",
        value: function simplifyContour(points, simplified, maxError, maxEdgeLen, buildFlags) {
          // Add initial points.
          var hasConnections = false;

          for (var i = 0; i < points.length; i += 4) {
            if ((points[i + 3] & RecastConstants.RC_CONTOUR_REG_MASK) != 0) {
              hasConnections = true;
              break;
            }
          }

          if (hasConnections) {
            // The contour has some portals to other regions.
            // Add a new poPoly to every location where the region changes.
            for (var _i3 = 0, ni = points.length / 4; _i3 < ni; ++_i3) {
              var ii = (_i3 + 1) % ni;
              var differentRegs = (points[_i3 * 4 + 3] & RecastConstants.RC_CONTOUR_REG_MASK) != (points[ii * 4 + 3] & RecastConstants.RC_CONTOUR_REG_MASK);
              var areaBorders = (points[_i3 * 4 + 3] & RecastConstants.RC_AREA_BORDER) != (points[ii * 4 + 3] & RecastConstants.RC_AREA_BORDER);

              if (differentRegs || areaBorders) {
                simplified.push(points[_i3 * 4 + 0]);
                simplified.push(points[_i3 * 4 + 1]);
                simplified.push(points[_i3 * 4 + 2]);
                simplified.push(_i3);
              }
            }
          }

          if (simplified.length == 0) {
            // If there is no connections at all,
            // create some initial points for the simplification process.
            // Find lower-left and upper-right vertices of the contour.
            var llx = points[0];
            var lly = points[1];
            var llz = points[2];
            var lli = 0;
            var urx = points[0];
            var ury = points[1];
            var urz = points[2];
            var uri = 0;

            for (var _i4 = 0; _i4 < points.length; _i4 += 4) {
              var x = points[_i4 + 0];
              var y = points[_i4 + 1];
              var z = points[_i4 + 2];

              if (x < llx || x == llx && z < llz) {
                llx = x;
                lly = y;
                llz = z;
                lli = _i4 / 4;
              }

              if (x > urx || x == urx && z > urz) {
                urx = x;
                ury = y;
                urz = z;
                uri = _i4 / 4;
              }
            }

            simplified.push(llx);
            simplified.push(lly);
            simplified.push(llz);
            simplified.push(lli);
            simplified.push(urx);
            simplified.push(ury);
            simplified.push(urz);
            simplified.push(uri);
          } // Add points until all raw points are within
          // error tolerance to the simplified shape.


          var pn = points.length / 4;

          for (var _i5 = 0; _i5 < simplified.length / 4;) {
            // console.log(simplified.length)
            var _ii = (_i5 + 1) % (simplified.length / 4);

            var ax = simplified[_i5 * 4 + 0];
            var az = simplified[_i5 * 4 + 2];
            var ai = simplified[_i5 * 4 + 3];
            var bx = simplified[_ii * 4 + 0];
            var bz = simplified[_ii * 4 + 2];
            var bi = simplified[_ii * 4 + 3]; // Find maximum deviation from the segment.

            var maxd = 0;
            var maxi = -1;
            var ci = void 0,
                cinc = void 0,
                endi = void 0; // Traverse the segment in lexilogical order so that the
            // max deviation is calculated similarly when traversing
            // opposite segments.

            if (bx > ax || bx == ax && bz > az) {
              cinc = 1;
              ci = (ai + cinc) % pn;
              endi = bi;
            } else {
              cinc = pn - 1;
              ci = (bi + cinc) % pn;
              endi = ai;
              var temp = ax;
              ax = bx;
              bx = temp;
              temp = az;
              az = bz;
              bz = temp;
            } // Tessellate only outer edges or edges between areas.
            // console.log("start")


            if ((points[ci * 4 + 3] & RecastConstants.RC_CONTOUR_REG_MASK) == 0 || (points[ci * 4 + 3] & RecastConstants.RC_AREA_BORDER) != 0) {
              while (ci != endi) {
                // if(Math.random() < .01) console.log(`${ci} ${endi}`);
                var d = RecastContour.distancePtSeg(points[ci * 4 + 0], points[ci * 4 + 2], ax, az, bx, bz);

                if (d > maxd) {
                  maxd = d;
                  maxi = ci;
                }

                ci = (ci + cinc) % pn;
              }
            } // console.log("stop")
            // If the max deviation is larger than accepted error,
            // add new point, else continue to next segment.


            if (maxi != -1 && maxd > maxError * maxError) {
              // Add the point.
              simplified.splice((_i5 + 1) * 4 + 0, 0, points[maxi * 4 + 0]);
              simplified.splice((_i5 + 1) * 4 + 1, 0, points[maxi * 4 + 1]);
              simplified.splice((_i5 + 1) * 4 + 2, 0, points[maxi * 4 + 2]);
              simplified.splice((_i5 + 1) * 4 + 3, 0, maxi);
            } else {
              ++_i5;
            }
          } // Split too let edges.


          if (maxEdgeLen > 0 && (buildFlags & (RecastConstants.RC_CONTOUR_TESS_WALL_EDGES | RecastConstants.RC_CONTOUR_TESS_AREA_EDGES)) != 0) {
            for (var _i6 = 0; _i6 < simplified.length / 4;) {
              var _ii2 = (_i6 + 1) % (simplified.length / 4);

              var _ax3 = simplified[_i6 * 4 + 0];
              var _az = simplified[_i6 * 4 + 2];
              var _ai3 = simplified[_i6 * 4 + 3];
              var _bx = simplified[_ii2 * 4 + 0];
              var _bz = simplified[_ii2 * 4 + 2];
              var _bi = simplified[_ii2 * 4 + 3]; // Find maximum deviation from the segment.

              var _maxi = -1;

              var _ci = (_ai3 + 1) % pn; // Tessellate only outer edges or edges between areas.


              var tess = false; // Wall edges.

              if ((buildFlags & RecastConstants.RC_CONTOUR_TESS_WALL_EDGES) != 0 && (points[_ci * 4 + 3] & RecastConstants.RC_CONTOUR_REG_MASK) == 0) tess = true; // Edges between areas.

              if ((buildFlags & RecastConstants.RC_CONTOUR_TESS_AREA_EDGES) != 0 && (points[_ci * 4 + 3] & RecastConstants.RC_AREA_BORDER) != 0) tess = true;

              if (tess) {
                var dx = _bx - _ax3;
                var dz = _bz - _az;

                if (dx * dx + dz * dz > maxEdgeLen * maxEdgeLen) {
                  // Round based on the segments in lexilogical order so that the
                  // max tesselation is consistent regardles in which direction
                  // segments are traversed.
                  var n = _bi < _ai3 ? _bi + pn - _ai3 : _bi - _ai3;

                  if (n > 1) {
                    if (_bx > _ax3 || _bx == _ax3 && _bz > _az) _maxi = Math.floor((_ai3 + n / 2) % pn);else _maxi = Math.floor((_ai3 + (n + 1) / 2) % pn);
                  }
                }
              } // If the max deviation is larger than accepted error,
              // add new point, else continue to next segment.


              if (_maxi != -1) {
                // Add the point.
                simplified.splice((_i6 + 1) * 4 + 0, 0, points[_maxi * 4 + 0]);
                simplified.splice((_i6 + 1) * 4 + 1, 0, points[_maxi * 4 + 1]);
                simplified.splice((_i6 + 1) * 4 + 2, 0, points[_maxi * 4 + 2]);
                simplified.splice((_i6 + 1) * 4 + 3, 0, _maxi);
              } else {
                ++_i6;
              }
            }
          }

          for (var _i7 = 0; _i7 < simplified.length / 4; ++_i7) {
            // The edge vertex flag is take from the current raw point,
            // and the neighbour region is take from the next raw point.
            var _ai4 = (simplified[_i7 * 4 + 3] + 1) % pn;

            var _bi2 = simplified[_i7 * 4 + 3];
            simplified[_i7 * 4 + 3] = points[_ai4 * 4 + 3] & (RecastConstants.RC_CONTOUR_REG_MASK | RecastConstants.RC_AREA_BORDER) | points[_bi2 * 4 + 3] & RecastConstants.RC_BORDER_VERTEX;
          }
        }
      }, {
        key: "calcAreaOfPolygon2D",
        value: function calcAreaOfPolygon2D(verts, nverts) {
          var area = 0;

          for (var i = 0, j = nverts - 1; i < nverts; j = i++) {
            var vi = i * 4;
            var vj = j * 4;
            area += verts[vi + 0] * verts[vj + 2] - verts[vj + 0] * verts[vi + 2];
          }

          return (area + 1) / 2;
        }
      }, {
        key: "intersectSegCountour",
        value: function intersectSegCountour(d0, d1, i, n, verts, d0verts, d1verts) {
          // For each edge (k,k+1) of P
          var pverts = new Array(4 * 4);

          for (var g = 0; g < 4; g++) {
            pverts[g] = d0verts[d0 + g];
            pverts[4 + g] = d1verts[d1 + g];
          }

          d0 = 0;
          d1 = 4;

          for (var k = 0; k < n; k++) {
            var k1 = RecastMesh.next(k, n); // Skip edges incident to i.

            if (i == k || i == k1) continue;
            var p0 = k * 4;
            var p1 = k1 * 4;

            for (var _g = 0; _g < 4; _g++) {
              pverts[8 + _g] = verts[p0 + _g];
              pverts[12 + _g] = verts[p1 + _g];
            }

            p0 = 8;
            p1 = 12;
            if (RecastMesh.vequal(pverts, d0, p0) || RecastMesh.vequal(pverts, d1, p0) || RecastMesh.vequal(pverts, d0, p1) || RecastMesh.vequal(pverts, d1, p1)) continue;
            if (RecastMesh.intersect(pverts, d0, d1, p0, p1)) return true;
          }

          return false;
        }
      }, {
        key: "inCone",
        value: function inCone(i, n, verts, pj, vertpj) {
          pi = i * 4;
          pi1 = RecastMesh.next(i, n) * 4;
          pin1 = RecastMesh.prev(i, n) * 4;
          pverts = new Array(4 * 4);

          for (var g = 0; g < 4; g++) {
            pverts[g] = verts[pi + g];
            pverts[4 + g] = verts[pi1 + g];
            pverts[8 + g] = verts[pin1 + g];
            pverts[12 + g] = vertpj[pj + g];
          }

          pi = 0;
          pi1 = 4;
          pin1 = 8;
          pj = 12; // If P[i] is a convex vertex [ i+1 left or on (i-1,i) ].

          if (RecastMesh.leftOn(pverts, pin1, pi, pi1)) return RecastMesh.left(pverts, pi, pj, pin1) && RecastMesh.left(pverts, pj, pi, pi1); // Assume (i-1,i,i+1) not collinear.
          // else P[i] is reflex.

          return !(RecastMesh.leftOn(pverts, pi, pj, pi1) && RecastMesh.leftOn(pverts, pj, pi, pin1));
        }
      }, {
        key: "removeDegenerateSegments",
        value: function removeDegenerateSegments(simplified) {
          // Remove adjacent vertices which are equal on xz-plane,
          // or else the triangulator will get confused.
          var npts = simplified.length / 4;

          for (var i = 0; i < npts; ++i) {
            var ni = RecastMesh.next(i, npts); //			if (vequal(&simplified[i*4], &simplified[ni*4]))

            if (simplified[i * 4] == simplified[ni * 4] && simplified[i * 4 + 2] == simplified[ni * 4 + 2]) {
              // Degenerate segment, remove.
              simplified.splice(i * 4, 1);
              simplified.splice(i * 4, 1);
              simplified.splice(i * 4, 1);
              simplified.splice(i * 4, 1);
              npts--;
            }
          }
        }
      }, {
        key: "mergeContours",
        value: function mergeContours(ca, cb, ia, ib) {
          var maxVerts = ca.nverts + cb.nverts + 2;
          var verts = new Array(maxVerts * 4);
          var nv = 0; // Copy contour A.

          for (var i = 0; i <= ca.nverts; ++i) {
            var dst = nv * 4;
            var src = (ia + i) % ca.nverts * 4;
            verts[dst + 0] = ca.verts[src + 0];
            verts[dst + 1] = ca.verts[src + 1];
            verts[dst + 2] = ca.verts[src + 2];
            verts[dst + 3] = ca.verts[src + 3];
            nv++;
          } // Copy contour B


          for (var _i8 = 0; _i8 <= cb.nverts; ++_i8) {
            var _dst = nv * 4;

            var _src = (ib + _i8) % cb.nverts * 4;

            verts[_dst + 0] = cb.verts[_src + 0];
            verts[_dst + 1] = cb.verts[_src + 1];
            verts[_dst + 2] = cb.verts[_src + 2];
            verts[_dst + 3] = cb.verts[_src + 3];
            nv++;
          }

          ca.verts = verts;
          ca.nverts = nv;
          cb.verts = null;
          cb.nverts = 0;
        } // Finds the lowest leftmost vertex of a contour.

      }, {
        key: "findLeftMostVertex",
        value: function findLeftMostVertex(contour) {
          var minx = contour.verts[0];
          var minz = contour.verts[2];
          var leftmost = 0;

          for (var i = 1; i < contour.nverts; i++) {
            var x = contour.verts[i * 4 + 0];
            var z = contour.verts[i * 4 + 2];

            if (x < minx || x == minx && z < minz) {
              minx = x;
              minz = z;
              leftmost = i;
            }
          }

          return [minx, minz, leftmost];
        }
      }, {
        key: "buildContours",
        value: function buildContours(ctx, chf, maxError, maxEdgeLen, buildFlags) {
          var w = chf.width;
          var h = chf.height;
          var borderSize = chf.borderSize;
          var cset = new ContourSet();
          ctx.startTimer("BUILD_CONTOURS");
          RecastVectors$1.copy3(cset.bmin, chf.bmin, 0);
          RecastVectors$1.copy3(cset.bmax, chf.bmax, 0);

          if (borderSize > 0) {
            // If the heightfield was build with bordersize, remove the offset.
            pad = borderSize * chf.cs;
            cset.bmin[0] += pad;
            cset.bmin[2] += pad;
            cset.bmax[0] -= pad;
            cset.bmax[2] -= pad;
          }

          cset.cs = chf.cs;
          cset.ch = chf.ch;
          cset.width = chf.width - chf.borderSize * 2;
          cset.height = chf.height - chf.borderSize * 2;
          cset.borderSize = chf.borderSize;
          cset.maxError = maxError;
          var flags = new Array(chf.spanCount).fill(0);
          ctx.startTimer("BUILD_CONTOURS_TRACE"); // Mark boundaries.

          for (var y = 0; y < h; ++y) {
            for (var x = 0; x < w; ++x) {
              var c = chf.cells[x + y * w];

              for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                // if(y == 3 && x == 3 && i == 1344)
                // 	console.log("earlier");
                var res = 0;
                var s = chf.spans[i];

                if (chf.spans[i].reg == 0 || (chf.spans[i].reg & RecastConstants.RC_BORDER_REG) != 0) {
                  flags[i] = 0;
                  continue;
                }

                for (var dir = 0; dir < 4; ++dir) {
                  var r = 0;

                  if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                    var ax = x + RecastCommon.GetDirOffsetX(dir);
                    var ay = y + RecastCommon.GetDirOffsetY(dir);
                    var ai = chf.cells[ax + ay * w].index + RecastCommon.GetCon(s, dir);
                    r = chf.spans[ai].reg;
                  }

                  if (r == chf.spans[i].reg) res |= 1 << dir;
                }

                flags[i] = res ^ 0xf; // Inverse, mark non connected edges.
              }
            }
          }

          ctx.stopTimer("BUILD_CONTOURS_TRACE");
          var verts = new Array(256);
          var simplified = new Array(64);

          for (var _y = 0; _y < h; ++_y) {
            for (var _x = 0; _x < w; ++_x) {
              var _c = chf.cells[_x + _y * w];

              for (var _i9 = _c.index, _ni = _c.index + _c.count; _i9 < _ni; ++_i9) {
                // if(y==3 && x == 3 && i == 1344)
                // 	console.log("dak");
                if (flags[_i9] == 0 || flags[_i9] == 0xf) {
                  flags[_i9] = 0;
                  continue;
                }

                var reg = chf.spans[_i9].reg;
                if (reg == 0 || (reg & RecastConstants.RC_BORDER_REG) != 0) continue;
                var area = chf.areas[_i9];
                verts = [];
                simplified = [];
                ctx.startTimer("BUILD_CONTOURS_TRACE");
                RecastContour.walkContour(_x, _y, _i9, chf, flags, verts);
                ctx.stopTimer("BUILD_CONTOURS_TRACE");
                ctx.startTimer("BUILD_CONTOURS_SIMPLIFY");
                RecastContour.simplifyContour(verts, simplified, maxError, maxEdgeLen, buildFlags);
                RecastContour.removeDegenerateSegments(simplified);
                ctx.stopTimer("BUILD_CONTOURS_SIMPLIFY"); // Store region=>contour remap info.
                // Create contour.

                if (simplified.length / 4 >= 3) {
                  var cont = new Contour();
                  cset.conts.push(cont);
                  cont.nverts = simplified.length / 4;
                  cont.verts = new Array(simplified.length);

                  for (var l = 0; l < cont.verts.length; l++) {
                    cont.verts[l] = simplified[l];
                  }

                  if (borderSize > 0) {
                    // If the heightfield was build with bordersize, remove the offset.
                    for (var j = 0; j < cont.nverts; ++j) {
                      cont.verts[j * 4] -= borderSize;
                      cont.verts[j * 4 + 2] -= borderSize;
                    }
                  }

                  cont.nrverts = verts.length / 4;
                  cont.rverts = new Array(verts.length);

                  for (var _l = 0; _l < cont.rverts.length; _l++) {
                    cont.rverts[_l] = verts[_l];
                  }

                  if (borderSize > 0) {
                    // If the heightfield was build with bordersize, remove the offset.
                    for (var _j2 = 0; _j2 < cont.nrverts; ++_j2) {
                      cont.rverts[_j2 * 4] -= borderSize;
                      cont.rverts[_j2 * 4 + 2] -= borderSize;
                    }
                  }

                  cont.reg = reg;
                  cont.area = area;
                }
              }
            }
          } // Merge holes if needed.


          if (cset.conts.length > 0) {
            // Calculate winding of all polygons.
            var winding = new Array(cset.conts.length);
            var nholes = 0;

            for (var _i10 = 0; _i10 < cset.conts.length; ++_i10) {
              var _cont = cset.conts[_i10]; // If the contour is wound backwards, it is a hole.

              winding[_i10] = RecastContour.calcAreaOfPolygon2D(_cont.verts, _cont.nverts) < 0 ? -1 : 1;
              if (winding[_i10] < 0) nholes++;
            }

            if (nholes > 0) {
              // Collect outline contour and holes contours per region.
              // We assume that there is one outline and multiple holes.
              var nregions = chf.maxRegions + 1;
              var regions = new Array(nregions);

              for (var _i11 = 0; _i11 < nregions; _i11++) {
                regions[_i11] = new ContourRegion();
              }

              for (var _i12 = 0; _i12 < cset.conts.length; ++_i12) {
                var _cont2 = cset.conts[_i12]; // Positively would contours are outlines, negative holes.

                if (winding[_i12] > 0) {
                  if (regions[_cont2.reg].outline != null) {
                    throw new RuntimeException("rcBuildContours: Multiple outlines for region " + _cont2.reg + ".");
                  }

                  regions[_cont2.reg].outline = _cont2;
                } else {
                  regions[_cont2.reg].nholes++;
                }
              }

              for (var _i13 = 0; _i13 < nregions; _i13++) {
                if (regions[_i13].nholes > 0) {
                  regions[_i13].holes = new ContourHole[regions[_i13].nholes]();

                  for (var nh = 0; nh < regions[_i13].nholes; nh++) {
                    regions[_i13].holes[nh] = new ContourHole();
                  }

                  regions[_i13].nholes = 0;
                }
              }

              for (var _i14 = 0; _i14 < cset.conts.length; ++_i14) {
                var _cont3 = cset.conts[_i14];
                var _reg = regions[_cont3.reg];
                if (winding[_i14] < 0) _reg.holes[_reg.nholes++].contour = _cont3;
              } // Finally merge each regions holes into the outline.


              for (var _i15 = 0; _i15 < nregions; _i15++) {
                var _reg2 = regions[_i15];
                if (_reg2.nholes == 0) continue;

                if (_reg2.outline != null) {
                  mergeRegionHoles(ctx, _reg2);
                } else {
                  // The region does not have an outline.
                  // This can happen if the contour becaomes selfoverlapping because of
                  // too aggressive simplification settings.
                  throw new RuntimeException("rcBuildContours: Bad outline for region " + _i15 + ", contour simplification is likely too aggressive.");
                }
              }
            }
          }

          ctx.stopTimer("BUILD_CONTOURS");
          return cset;
        }
      }]);

      return RecastContour;
    }();

    _defineProperty(RecastContour, "ContourRegion", (_temp$2 = function ContourRegion() {
      _classCallCheck(this, ContourRegion);

      _defineProperty(this, "outline", void 0);

      _defineProperty(this, "holes", []);

      _defineProperty(this, "nholes", void 0);
    }, _temp$2));

    _defineProperty(RecastContour, "ContourHole", (_temp2$2 = function ContourHole() {
      _classCallCheck(this, ContourHole);

      _defineProperty(this, "leftmost", void 0);

      _defineProperty(this, "minx", void 0);

      _defineProperty(this, "minz", void 0);

      _defineProperty(this, "contour", void 0);
    }, _temp2$2));

    _defineProperty(RecastContour, "PotentialDiagonal", (_temp3 = function PotentialDiagonal() {
      _classCallCheck(this, PotentialDiagonal);

      _defineProperty(this, "dist", void 0);

      _defineProperty(this, "vert", void 0);
    }, _temp3));

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Contains triangle meshes that represent detailed height data associated with the polygons in its associated polygon mesh object. */
    var PolyMeshDetail = function PolyMeshDetail() {
      _classCallCheck(this, PolyMeshDetail);

      _defineProperty(this, "meshes", []);

      _defineProperty(this, "verts", []);

      _defineProperty(this, "tris", []);

      _defineProperty(this, "nmeshes", 0);

      _defineProperty(this, "nverts", 0);

      _defineProperty(this, "ntris", 0);
    };

    function arraycopy$2(one, oneStart, two, twoStart, len) {
      for (var i = 0; i < len; i++) {
        two[twoStart + i] = one[oneStart + i];
      }
    }

    var HeightPatch = function HeightPatch() {
      _classCallCheck(this, HeightPatch);

      _defineProperty(this, "xmin", 0);

      _defineProperty(this, "ymin", 0);

      _defineProperty(this, "width", 0);

      _defineProperty(this, "height", 0);

      _defineProperty(this, "data", []);
    };

    var RecastMeshDetail = /*#__PURE__*/function () {
      function RecastMeshDetail() {
        _classCallCheck(this, RecastMeshDetail);
      }

      _createClass(RecastMeshDetail, [{
        key: "mergePolyMeshDetails",
        /// @see rcAllocPolyMeshDetail, rcPolyMeshDetail
        value: function mergePolyMeshDetails(ctx, meshes, nmeshes) {
          mesh = new PolyMeshDetail();
          ctx.startTimer("MERGE_POLYMESHDETAIL");
          var maxVerts = 0;
          var maxTris = 0;
          var maxMeshes = 0;

          for (var i = 0; i < nmeshes; ++i) {
            if (meshes[i] == null) continue;
            maxVerts += meshes[i].nverts;
            maxTris += meshes[i].ntris;
            maxMeshes += meshes[i].nmeshes;
          }

          mesh.nmeshes = 0;
          mesh.meshes = new Array(maxMeshes * 4);
          mesh.ntris = 0;
          mesh.tris = new Array(maxTris * 4);
          mesh.nverts = 0;
          mesh.verts = new Array(maxVerts * 3); // Merge datas.

          for (var _i = 0; _i < nmeshes; ++_i) {
            var dm = meshes[_i];
            if (dm == null) continue;

            for (var j = 0; j < dm.nmeshes; ++j) {
              var dst = mesh.nmeshes * 4;
              var src = j * 4;
              mesh.meshes[dst + 0] = mesh.nverts + dm.meshes[src + 0];
              mesh.meshes[dst + 1] = dm.meshes[src + 1];
              mesh.meshes[dst + 2] = mesh.ntris + dm.meshes[src + 2];
              mesh.meshes[dst + 3] = dm.meshes[src + 3];
              mesh.nmeshes++;
            }

            for (var k = 0; k < dm.nverts; ++k) {
              RecastVectors$1.copy(mesh.verts, mesh.nverts * 3, dm.verts, k * 3);
              mesh.nverts++;
            }

            for (var _k = 0; _k < dm.ntris; ++_k) {
              mesh.tris[mesh.ntris * 4 + 0] = dm.tris[_k * 4 + 0];
              mesh.tris[mesh.ntris * 4 + 1] = dm.tris[_k * 4 + 1];
              mesh.tris[mesh.ntris * 4 + 2] = dm.tris[_k * 4 + 2];
              mesh.tris[mesh.ntris * 4 + 3] = dm.tris[_k * 4 + 3];
              mesh.ntris++;
            }
          }

          ctx.stopTimer("MERGE_POLYMESHDETAIL");
          return mesh;
        }
      }], [{
        key: "vdistSq2_3",
        // Max tris for delaunay is 2n-2-k (n=num verts, k=num hull verts).
        value: function vdistSq2_3(verts, p, q) {
          var dx = verts[q + 0] - verts[p + 0];
          var dy = verts[q + 2] - verts[p + 2];
          return dx * dx + dy * dy;
        }
      }, {
        key: "vdist2",
        value: function vdist2(verts, p, q) {
          return Math.sqrt(RecastMeshDetail.vdistSq2_3(verts, p, q));
        }
      }, {
        key: "vdistSq2_2",
        value: function vdistSq2_2(p, q) {
          var dx = q[0] - p[0];
          var dy = q[2] - p[2];
          return dx * dx + dy * dy;
        }
      }, {
        key: "vdist2",
        value: function vdist2(p, q) {
          return Math.sqrt(RecastMeshDetail.vdistSq2_2(p, q));
        }
      }, {
        key: "vdistSq2",
        value: function vdistSq2(p, verts, q) {
          dx = verts[q + 0] - p[0];
          dy = verts[q + 2] - p[2];
          return dx * dx + dy * dy;
        }
      }, {
        key: "vdist2",
        value: function vdist2(p, verts, q) {
          return Math.sqrt(RecastMeshDetail.vdistSq2_3(p, verts, q));
        }
      }, {
        key: "vcross2",
        value: function vcross2(verts, p1, p2, p3) {
          u1 = verts[p2 + 0] - verts[p1 + 0];
          v1 = verts[p2 + 2] - verts[p1 + 2];
          u2 = verts[p3 + 0] - verts[p1 + 0];
          v2 = verts[p3 + 2] - verts[p1 + 2];
          return u1 * v2 - v1 * u2;
        }
      }, {
        key: "vcross2",
        value: function vcross2(p1, p2, p3) {
          u1 = p2[0] - p1[0];
          v1 = p2[2] - p1[2];
          u2 = p3[0] - p1[0];
          v2 = p3[2] - p1[2];
          return u1 * v2 - v1 * u2;
        }
      }, {
        key: "circumCircle",
        value: function circumCircle(verts, p1, p2, p3, c, r) {
          EPS = 1e-6; // Calculate the circle relative to p1, to asome precision issues.

          v1 = new Array(3);
          v2 = new Array(3);
          v3 = new Array(3);
          RecastVectors$1.sub(v2, verts, p2, p1);
          RecastVectors$1.sub(v3, verts, p3, p1);
          cp = vcross2(v1, v2, v3);

          if (Math.abs(cp) > EPS) {
            v1Sq = RecastMeshDetail.vdot2(v1, v1);
            v2Sq = RecastMeshDetail.vdot2(v2, v2);
            v3Sq = RecastMeshDetail.vdot2(v3, v3);
            c[0] = (v1Sq * (v2[2] - v3[2]) + v2Sq * (v3[2] - v1[2]) + v3Sq * (v1[2] - v2[2])) / (2 * cp);
            c[1] = 0;
            c[2] = (v1Sq * (v3[0] - v2[0]) + v2Sq * (v1[0] - v3[0]) + v3Sq * (v2[0] - v1[0])) / (2 * cp);
            r.set(RecastMeshDetail.vdist2(c, v1));
            RecastVectors$1.add(c, c, verts, p1);
            return true;
          }

          RecastVectors$1.copy(c, verts, p1);
          r.set(0);
          return false;
        }
      }, {
        key: "distPtTri",
        value: function distPtTri(p, verts, a, b, c) {
          var v0 = new Array(3);
          var v1 = new Array(3);
          var v2 = new Array(3);
          RecastVectors$1.subA(v0, verts, c, a);
          RecastVectors$1.subA(v1, verts, b, a);
          RecastVectors$1.subB(v2, p, verts, a);
          var dot00 = RecastMeshDetail.vdot2(v0, v0);
          var dot01 = RecastMeshDetail.vdot2(v0, v1);
          var dot02 = RecastMeshDetail.vdot2(v0, v2);
          var dot11 = RecastMeshDetail.vdot2(v1, v1);
          var dot12 = RecastMeshDetail.vdot2(v1, v2); // Compute barycentric coordinates

          var invDenom = 1.0 / (dot00 * dot11 - dot01 * dot01);
          var u = (dot11 * dot02 - dot01 * dot12) * invDenom;
          var v = (dot00 * dot12 - dot01 * dot02) * invDenom; // If poPoly lies inside the triangle, return interpolated y-coord.

          var EPS = 1e-4;

          if (u >= -EPS && v >= -EPS && u + v <= 1 + EPS) {
            var y = verts[a + 1] + v0[1] * u + v1[1] * v;
            return Math.abs(y - p[1]);
          }

          return Number.MAX_VALUE;
        }
      }, {
        key: "distancePtSeg",
        value: function distancePtSeg(verts, pt, p, q) {
          var pqx = verts[q + 0] - verts[p + 0];
          var pqy = verts[q + 1] - verts[p + 1];
          var pqz = verts[q + 2] - verts[p + 2];
          var dx = verts[pt + 0] - verts[p + 0];
          var dy = verts[pt + 1] - verts[p + 1];
          var dz = verts[pt + 2] - verts[p + 2];
          var d = pqx * pqx + pqy * pqy + pqz * pqz;
          var t = pqx * dx + pqy * dy + pqz * dz;
          if (d > 0) t /= d;
          if (t < 0) t = 0;else if (t > 1) t = 1;
          dx = verts[p + 0] + t * pqx - verts[pt + 0];
          dy = verts[p + 1] + t * pqy - verts[pt + 1];
          dz = verts[p + 2] + t * pqz - verts[pt + 2];
          return dx * dx + dy * dy + dz * dz;
        }
      }, {
        key: "distancePtSeg2d",
        value: function distancePtSeg2d(verts, pt, poly, p, q) {
          var pqx = poly[q + 0] - poly[p + 0];
          var pqz = poly[q + 2] - poly[p + 2];
          var dx = verts[pt + 0] - poly[p + 0];
          var dz = verts[pt + 2] - poly[p + 2];
          var d = pqx * pqx + pqz * pqz;
          var t = pqx * dx + pqz * dz;
          if (d > 0) t /= d;
          if (t < 0) t = 0;else if (t > 1) t = 1;
          dx = poly[p + 0] + t * pqx - verts[pt + 0];
          dz = poly[p + 2] + t * pqz - verts[pt + 2];
          return dx * dx + dz * dz;
        }
      }, {
        key: "distToTriMesh",
        value: function distToTriMesh(p, verts, nverts, tris, ntris) {
          var dmin = Number.MAX_VALUE;

          for (var i = 0; i < ntris; ++i) {
            var va = tris[i * 4 + 0] * 3;
            var vb = tris[i * 4 + 1] * 3;
            var vc = tris[i * 4 + 2] * 3;

            var _d = RecastMeshDetail.distPtTri(p, verts, va, vb, vc);

            if (_d < dmin) dmin = _d;
          }

          if (dmin == Number.MAX_VALUE) return -1;
          return dmin;
        }
      }, {
        key: "distToPoly",
        value: function distToPoly(nvert, verts, p) {
          var dmin = Number.MAX_VALUE;
          var c = false;

          for (var _i2 = 0, _j = nvert - 1; _i2 < nvert; _j = _i2++) {
            var vi = _i2 * 3;
            var vj = _j * 3;
            if (verts[vi + 2] > p[2] != verts[vj + 2] > p[2] && p[0] < (verts[vj + 0] - verts[vi + 0]) * (p[2] - verts[vi + 2]) / (verts[vj + 2] - verts[vi + 2]) + verts[vi + 0]) c = !c;
            dmin = Math.min(dmin, RecastMeshDetail.distancePtSeg2d(p, 0, verts, vj, vi));
          }

          return c ? -dmin : dmin;
        }
      }, {
        key: "getHeight",
        value: function getHeight(fx, fy, fz, cs, ics, ch, radius, hp) {
          var ix = Math.floor(fx * ics + 0.01);
          var iz = Math.floor(fz * ics + 0.01);
          ix = RecastCommon.clamp(ix - hp.xmin, 0, hp.width - 1);
          iz = RecastCommon.clamp(iz - hp.ymin, 0, hp.height - 1);
          var h = hp.data[ix + iz * hp.width];

          if (h == RecastMeshDetail.RC_UNSET_HEIGHT) {
            // Special case when data might be bad.
            // Walk adjacent cells _in a spiral up to 'radius', and look
            // for a pixel which has a valid height.
            var x = 1,
                z = 0,
                _dx = 1,
                dz = 0;
            var maxSize = radius * 2 + 1;
            var maxIter = maxSize * maxSize - 1;
            var nextRingIterStart = 8;
            var nextRingIters = 16;
            dmin = Number.MAX_VALUE;

            for (var i = 0; i < maxIter; ++i) {
              var nx = ix + x;
              var nz = iz + z;

              if (nx >= 0 && nz >= 0 && nx < hp.width && nz < hp.height) {
                var nh = hp.data[nx + nz * hp.width];

                if (nh != RecastMeshDetail.RC_UNSET_HEIGHT) {
                  d = Math.abs(nh * ch - fy);

                  if (d < dmin) {
                    h = nh;
                    dmin = d;
                  }
                }
              } // We are searching _in a grid which looks approximately like this:
              //  __________
              // |2 ______ 2|
              // | |1 __ 1| |
              // | | |__| | |
              // | |______| |
              // |__________|
              // We want to find the best height as close to the center cell as possible. This means that
              // if we find a height _in one of the neighbor cells to the center, we don't want to
              // expand further out than the 8 neighbors - we want to limit our search to the closest
              // of these "rings", but the best height _in the ring.
              // For example, the center is just 1 cell. We checked that at the entrance to the function.
              // The next "ring" contains 8 cells (marked 1 above). Those are all the neighbors to the center cell.
              // The next one again contains 16 cells (marked 2). In general each ring has 8 additional cells, which
              // can be thought of as adding 2 cells around the "center" of each side when we expand the ring.
              // Here we detect if we are about to enter the next ring, and if we are and we have found
              // a height, we abort the search.


              if (i + 1 == nextRingIterStart) {
                if (h != RecastMeshDetail.RC_UNSET_HEIGHT) break;
                nextRingIterStart += nextRingIters;
                nextRingIters += 8;
              }

              if (x == z || x < 0 && x == -z || x > 0 && x == 1 - z) {
                var tmp = _dx;
                _dx = -dz;
                dz = tmp;
              }

              x += _dx;
              z += dz;
            }
          }

          return h;
        }
      }, {
        key: "findEdge",
        value: function findEdge(edges, s, t) {
          for (var i = 0; i < edges.length / 4; i++) {
            var e = i * 4;
            if (edges[e + 0] == s && edges[e + 1] == t || edges[e + 0] == t && edges[e + 1] == s) return i;
          }

          return EV_UNDEF;
        }
      }, {
        key: "addEdge",
        value: function addEdge(ctx, edges, maxEdges, s, t, l, r) {
          if (edges.length / 4 >= maxEdges) {
            throw new RuntimeException("addEdge: Too many edges (" + edges.length / 4 + "/" + maxEdges + ").");
          } // Add edge if not already _in the triangulation.


          var e = findEdge(edges, s, t);

          if (e == EV_UNDEF) {
            edges.push(s);
            edges.push(t);
            edges.push(l);
            edges.push(r);
          }
        }
      }, {
        key: "updateLeftFace",
        value: function updateLeftFace(edges, e, s, t, f) {
          if (edges[e + 0] == s && edges[e + 1] == t && edges[e + 2] == EV_UNDEF) edges.set(e + 2, f);else if (edges[e + 1] == s && edges[e + 0] == t && edges[e + 3] == EV_UNDEF) edges.set(e + 3, f);
        }
      }, {
        key: "overlapSegSeg2d",
        value: function overlapSegSeg2d(verts, a, b, c, d) {
          a1 = vcross2(verts, a, b, d);
          a2 = vcross2(verts, a, b, c);

          if (a1 * a2 < 0.0) {
            a3 = vcross2(verts, c, d, a);
            a4 = a3 + a2 - a1;
            if (a3 * a4 < 0.0) return true;
          }

          return false;
        }
      }, {
        key: "overlapEdges",
        value: function overlapEdges(pts, edges, s1, t1) {
          for (var i = 0; i < edges.length / 4; ++i) {
            var s0 = edges[i * 4 + 0];
            var t0 = edges[i * 4 + 1]; // Same or connected edges do not overlap.

            if (s0 == s1 || s0 == t1 || t0 == s1 || t0 == t1) continue;
            if (overlapSegSeg2d(pts, s0 * 3, t0 * 3, s1 * 3, t1 * 3)) return true;
          }

          return false;
        }
      }, {
        key: "completeFacet",
        value: function completeFacet(ctx, pts, npts, edges, maxEdges, nfaces, e) {
          EPS = 1e-5;
          var edge = e * 4; // Cache s and t.

          var s, t;

          if (edges[edge + 2] == EV_UNDEF) {
            s = edges[edge + 0];
            t = edges[edge + 1];
          } else if (edges[edge + 3] == EV_UNDEF) {
            s = edges[edge + 1];
            t = edges[edge + 0];
          } else {
            // Edge already completed.
            return nfaces;
          } // Find best poPoly on left of edge.


          var pt = npts;
          var c = new Array(3);
          var r = new AtomicReference(-1);

          for (var u = 0; u < npts; ++u) {
            if (u == s || u == t) continue;

            if (vcross2(pts, s * 3, t * 3, u * 3) > EPS) {
              if (r.get() < 0) {
                // The circle is not updated yet, do it now.
                pt = u;
                circumCircle(pts, s * 3, t * 3, u * 3, c, r);
                continue;
              }

              d = RecastMeshDetail.vdist2(c, pts, u * 3);
              tol = 0.001;

              if (d > r.get() * (1 + tol)) {
                // Outside current circumcircle, skip.
                continue;
              } else if (d < r.get() * (1 - tol)) {
                // Inside safe circumcircle, update circle.
                pt = u;
                circumCircle(pts, s * 3, t * 3, u * 3, c, r);
              } else {
                // Inside epsilon circum circle, do extra tests to make sure the edge is valid.
                // s-u and t-u cannot overlap with s-pt nor t-pt if they exists.
                if (overlapEdges(pts, edges, s, u)) continue;
                if (overlapEdges(pts, edges, t, u)) continue; // Edge is valid.

                pt = u;
                circumCircle(pts, s * 3, t * 3, u * 3, c, r);
              }
            }
          } // Add new triangle or update edge info if s-t is on hull.


          if (pt < npts) {
            // Update face information of edge being compPolyed.
            updateLeftFace(edges, e * 4, s, t, nfaces); // Add new edge or update face info of old edge.

            e = findEdge(edges, pt, s);
            if (e == EV_UNDEF) addEdge(ctx, edges, maxEdges, pt, s, nfaces, EV_UNDEF);else updateLeftFace(edges, e * 4, pt, s, nfaces); // Add new edge or update face info of old edge.

            e = findEdge(edges, t, pt);
            if (e == EV_UNDEF) addEdge(ctx, edges, maxEdges, t, pt, nfaces, EV_UNDEF);else updateLeftFace(edges, e * 4, t, pt, nfaces);
            nfaces++;
          } else {
            updateLeftFace(edges, e * 4, s, t, EV_HULL);
          }

          return nfaces;
        }
      }, {
        key: "delaunayHull",
        value: function delaunayHull(ctx, npts, pts, nhull, hull, tris) {
          var nfaces = 0;
          var maxEdges = npts * 10;
          var edges = new Array(64);

          for (var i = 0, j = nhull - 1; i < nhull; j = i++) {
            addEdge(ctx, edges, maxEdges, hull[j], hull[i], EV_HULL, EV_UNDEF);
          }

          var currentEdge = 0;

          while (currentEdge < edges.length / 4) {
            if (edges[currentEdge * 4 + 2] == EV_UNDEF) {
              nfaces = completeFacet(ctx, pts, npts, edges, maxEdges, nfaces, currentEdge);
            }

            if (edges[currentEdge * 4 + 3] == EV_UNDEF) {
              nfaces = completeFacet(ctx, pts, npts, edges, maxEdges, nfaces, currentEdge);
            }

            currentEdge++;
          } // Create tris


          tris = [];

          for (var _i3 = 0; _i3 < nfaces * 4; ++_i3) {
            tris.push(-1);
          }

          for (var _i4 = 0; _i4 < edges.length / 4; ++_i4) {
            var e = _i4 * 4;

            if (edges[e + 3] >= 0) {
              // Left face
              var t = edges[e + 3] * 4;

              if (tris[t + 0] == -1) {
                tris.set(t + 0, edges[e + 0]);
                tris.set(t + 1, edges[e + 1]);
              } else if (tris[t + 0] == edges[e + 1]) tris.set(t + 2, edges[e + 0]);else if (tris[t + 1] == edges[e + 0]) tris.set(t + 2, edges[e + 1]);
            }

            if (edges[e + 2] >= 0) {
              // Right
              var _t = edges[e + 2] * 4;

              if (tris[_t + 0] == -1) {
                tris.set(_t + 0, edges[e + 1]);
                tris.set(_t + 1, edges[e + 0]);
              } else if (tris[_t + 0] == edges[e + 0]) tris.set(_t + 2, edges[e + 1]);else if (tris[_t + 1] == edges[e + 1]) tris.set(_t + 2, edges[e + 0]);
            }
          }

          for (var _i5 = 0; _i5 < tris.length / 4; ++_i5) {
            var _t2 = _i5 * 4;

            if (tris[_t2 + 0] == -1 || tris[_t2 + 1] == -1 || tris[_t2 + 2] == -1) {
              System.err.println("Dangling! " + tris[_t2] + " " + tris[_t2 + 1] + "  " + tris[_t2 + 2]); //ctx.log(RC_LOG_WARNING, "delaunayHull: Removing dangling face %d [%d,%d,%d].", i, t[0],t[1],t[2]);

              tris.set(_t2 + 0, tris[tris.length - 4]);
              tris.set(_t2 + 1, tris[tris.length - 3]);
              tris.set(_t2 + 2, tris[tris.length - 2]);
              tris.set(_t2 + 3, tris[tris.length - 1]);
              tris.remove(tris.length - 1);
              tris.remove(tris.length - 1);
              tris.remove(tris.length - 1);
              tris.remove(tris.length - 1);
              --_i5;
            }
          }
        } // Calculate minimum extend of the polygon.

      }, {
        key: "polyMinExtent",
        value: function polyMinExtent(verts, nverts) {
          var minDist = Number.MAX_VALUE;

          for (var i = 0; i < nverts; i++) {
            var ni = (i + 1) % nverts;
            var p1 = i * 3;
            var p2 = ni * 3;
            var maxEdgeDist = 0;

            for (var j = 0; j < nverts; j++) {
              if (j == i || j == ni) continue;

              var _d2 = RecastMeshDetail.distancePtSeg2d(verts, j * 3, verts, p1, p2);

              maxEdgeDist = Math.max(maxEdgeDist, _d2);
            }

            minDist = Math.min(minDist, maxEdgeDist);
          }

          return Math.sqrt(minDist);
        }
      }, {
        key: "triangulateHull",
        value: function triangulateHull(nverts, verts, nhull, hull, tris) {
          var start = 0,
              left = 1,
              right = nhull - 1; // Start from an ear with shortest perimeter.
          // This tends to favor well formed triangles as starting point.

          var dmin = 0;

          for (var i = 0; i < nhull; i++) {
            var pi = RecastMesh.prev(i, nhull);
            var ni = RecastMesh.next(i, nhull);
            var pv = hull[pi] * 3;
            var cv = hull[i] * 3;
            var nv = hull[ni] * 3;

            var _d3 = RecastMeshDetail.vdist2(verts, pv, cv) + RecastMeshDetail.vdist2(verts, cv, nv) + RecastMeshDetail.vdist2(verts, nv, pv);

            if (_d3 < dmin) {
              start = i;
              left = ni;
              right = pi;
              dmin = _d3;
            }
          } // Add first triangle


          tris.push(hull[start]);
          tris.push(hull[left]);
          tris.push(hull[right]);
          tris.push(0); // Triangulate the polygon by moving left or right,
          // depending on which triangle has shorter perimeter.
          // This heuristic was chose emprically, since it seems
          // handle tesselated straight edges well.

          while (RecastMesh.next(left, nhull) != right) {
            // Check to see if se should advance left or right.
            var nleft = RecastMesh.next(left, nhull);
            var nright = RecastMesh.prev(right, nhull);
            var cvleft = hull[left] * 3;
            var nvleft = hull[nleft] * 3;
            var cvright = hull[right] * 3;
            var nvright = hull[nright] * 3;
            var dleft = RecastMeshDetail.vdist2(verts, cvleft, nvleft) + RecastMeshDetail.vdist2(verts, nvleft, cvright);
            var dright = RecastMeshDetail.vdist2(verts, cvright, nvright) + RecastMeshDetail.vdist2(verts, cvleft, nvright);

            if (dleft < dright) {
              tris.push(hull[left]);
              tris.push(hull[nleft]);
              tris.push(hull[right]);
              tris.push(0);
              left = nleft;
            } else {
              tris.push(hull[left]);
              tris.push(hull[nright]);
              tris.push(hull[right]);
              tris.push(0);
              right = nright;
            }
          }
        }
      }, {
        key: "getJitterX",
        value: function getJitterX(i) {
          return (i * 0x8da6b343 & 0xffff) / 65535.0 * 2.0 - 1.0;
        }
      }, {
        key: "getJitterY",
        value: function getJitterY(i) {
          return (i * 0xd8163841 & 0xffff) / 65535.0 * 2.0 - 1.0;
        }
      }, {
        key: "buildPolyDetail",
        value: function buildPolyDetail(ctx, _in, nin, sampleDist, sampleMaxError, heightSearchRadius, chf, hp, verts, tris) {
          var samples = [];
          var nverts = 0;
          var edge = new Array((RecastMeshDetail.MAX_VERTS_PER_EDGE + 1) * 3);
          var hull = new Array(RecastMeshDetail.MAX_VERTS);
          var nhull = 0;
          nverts = nin;

          for (var i = 0; i < nin; ++i) {
            RecastVectors$1.copy4(verts, i * 3, _in, i * 3);
          }

          tris = [];
          var cs = chf.cs;
          var ics = 1.0 / cs; // Calculate minimum extents of the polygon based on input data.

          var minExtent = RecastMeshDetail.polyMinExtent(verts, nverts); // Tessellate outlines.
          // This is done _in separate pass _in order to ensure
          // seamless height values across the ply boundaries.

          if (sampleDist > 0) {
            for (var _i6 = 0, j = nin - 1; _i6 < nin; j = _i6++) {
              var vj = j * 3;
              var vi = _i6 * 3;
              var swapped = false; // Make sure the segments are always handled _in same order
              // using lexological sort or else there will be seams.

              if (Math.abs(_in[vj + 0] - _in[vi + 0]) < 1e-6) {
                if (_in[vj + 2] > _in[vi + 2]) {
                  var temp = vi;
                  vi = vj;
                  vj = temp;
                  swapped = true;
                }
              } else {
                if (_in[vj + 0] > _in[vi + 0]) {
                  var _temp = vi;
                  vi = vj;
                  vj = _temp;
                  swapped = true;
                }
              } // Create samples alet the edge.


              var _dx2 = _in[vi + 0] - _in[vj + 0];

              var _dy = _in[vi + 1] - _in[vj + 1];

              var dz = _in[vi + 2] - _in[vj + 2];

              var _d4 = Math.sqrt(_dx2 * _dx2 + dz * dz);

              var nn = 1 + Math.floor(_d4 / sampleDist);
              if (nn >= RecastMeshDetail.MAX_VERTS_PER_EDGE) nn = RecastMeshDetail.MAX_VERTS_PER_EDGE - 1;
              if (nverts + nn >= RecastMeshDetail.MAX_VERTS) nn = RecastMeshDetail.MAX_VERTS - 1 - nverts;

              for (var k = 0; k <= nn; ++k) {
                var u = k / nn;
                var pos = k * 3;
                edge[pos + 0] = _in[vj + 0] + _dx2 * u;
                edge[pos + 1] = _in[vj + 1] + _dy * u;
                edge[pos + 2] = _in[vj + 2] + dz * u;
                edge[pos + 1] = RecastMeshDetail.getHeight(edge[pos + 0], edge[pos + 1], edge[pos + 2], cs, ics, chf.ch, heightSearchRadius, hp) * chf.ch;
              } // Simplify samples.


              var idx = new Array(RecastMeshDetail.MAX_VERTS_PER_EDGE);
              idx[0] = 0;
              idx[1] = nn;
              var nidx = 2;

              for (var _k2 = 0; _k2 < nidx - 1;) {
                var a = idx[_k2];
                var b = idx[_k2 + 1];
                var va = a * 3;
                var vb = b * 3; // Find maximum deviation alet the segment.

                var maxd = 0;
                var maxi = -1;

                for (var m = a + 1; m < b; ++m) {
                  var dev = RecastMeshDetail.distancePtSeg(edge, m * 3, va, vb);

                  if (dev > maxd) {
                    maxd = dev;
                    maxi = m;
                  }
                } // If the max deviation is larger than accepted error,
                // add new point, else continue to next segment.


                if (maxi != -1 && maxd > sampleMaxError * sampleMaxError) {
                  for (var _m = nidx; _m > _k2; --_m) {
                    idx[_m] = idx[_m - 1];
                  }

                  idx[_k2 + 1] = maxi;
                  nidx++;
                } else {
                  ++_k2;
                }
              }

              hull[nhull++] = j; // Add new vertices.

              if (swapped) {
                for (var _k3 = nidx - 2; _k3 > 0; --_k3) {
                  RecastVectors$1.copy(verts, nverts * 3, edge, idx[_k3] * 3);
                  hull[nhull++] = nverts;
                  nverts++;
                }
              } else {
                for (var _k4 = 1; _k4 < nidx - 1; ++_k4) {
                  RecastVectors$1.copy(verts, nverts * 3, edge, idx[_k4] * 3);
                  hull[nhull++] = nverts;
                  nverts++;
                }
              }
            }
          } // If the polygon minimum extent is small (sliver or small triangle), do not try to add internal points.


          if (minExtent < sampleDist * 2) {
            RecastMeshDetail.triangulateHull(nverts, verts, nhull, hull, tris);
            return [nverts, tris];
          } // Tessellate the base mesh.
          // We're using the triangulateHull instead of delaunayHull as it tends to
          // create a bit better triangulation for let thin triangles when there
          // are no internal points.


          RecastMeshDetail.triangulateHull(nverts, verts, nhull, hull, tris);

          if (tris.length == 0) {
            // Could not triangulate the poly, make sure there is some valid data there.
            throw new RuntimeException("buildPolyDetail: Could not triangulate polygon (" + nverts + ") verts).");
          }

          if (sampleDist > 0) {
            // Create sample locations _in a grid.
            var bmin = new Array(3);
            var bmax = new Array(3);
            RecastVectors$1.copy3(bmin, _in, 0);
            RecastVectors$1.copy3(bmax, _in, 0);

            for (var _i7 = 1; _i7 < nin; ++_i7) {
              RecastVectors$1.min(bmin, _in, _i7 * 3);
              RecastVectors$1.max(bmax, _in, _i7 * 3);
            }

            var x0 = Math.floor(bmin[0] / sampleDist);
            var x1 = Math.ceil(bmax[0] / sampleDist);
            var z0 = Math.floor(bmin[2] / sampleDist);
            var z1 = Math.ceil(bmax[2] / sampleDist);
            samples = [];

            for (var z = z0; z < z1; ++z) {
              for (var x = x0; x < x1; ++x) {
                var pt = new Array(3);
                pt[0] = x * sampleDist;
                pt[1] = (bmax[1] + bmin[1]) * 0.5;
                pt[2] = z * sampleDist; // Make sure the samples are not too close to the edges.

                if (RecastMeshDetail.distToPoly(nin, _in, pt) > -sampleDist / 2) continue;
                samples.push(x);
                samples.push(RecastMeshDetail.getHeight(pt[0], pt[1], pt[2], cs, ics, chf.ch, heightSearchRadius, hp));
                samples.push(z);
                samples.push(0); // Not added
              }
            } // Add the samples starting from the one that has the most
            // error. The procedure stops when all samples are added
            // or when the max error is within treshold.


            var nsamples = samples.length / 4;

            for (var iter = 0; iter < nsamples; ++iter) {
              if (nverts >= RecastMeshDetail.MAX_VERTS) break; // Find sample with most error.

              var bestpt = new Array(3);
              var bestd = 0;
              var besti = -1;

              for (var _i8 = 0; _i8 < nsamples; ++_i8) {
                var s = _i8 * 4;
                if (samples[s + 3] != 0) continue; // skip added.

                var _pt = new Array(3); // The sample location is jittered to get rid of some bad triangulations
                // which are cause by symmetrical data from the grid structure.


                _pt[0] = samples[s + 0] * sampleDist + RecastMeshDetail.getJitterX(_i8) * cs * 0.1;
                _pt[1] = samples[s + 1] * chf.ch;
                _pt[2] = samples[s + 2] * sampleDist + RecastMeshDetail.getJitterY(_i8) * cs * 0.1;

                var _d5 = RecastMeshDetail.distToTriMesh(_pt, verts, nverts, tris, tris.length / 4);

                if (_d5 < 0) continue; // did not hit the mesh.

                if (_d5 > bestd) {
                  bestd = _d5;
                  besti = _i8;
                  bestpt = _pt;
                }
              } // If the max error is within accepted threshold, stop tesselating.


              if (bestd <= sampleMaxError || besti == -1) break; // Mark sample as added.

              samples.set(besti * 4 + 3, 1); // Add the new sample point.

              RecastVectors$1.copy(verts, nverts * 3, bestpt, 0);
              nverts++; // Create new triangulation.
              // TODO: Incremental add instead of full rebuild.

              delaunayHull(ctx, nverts, verts, nhull, hull, tris);
            }
          }

          var ntris = tris.length / 4;

          if (ntris > RecastMeshDetail.MAX_TRIS) {
            var subList = tris.subList(0, RecastMeshDetail.MAX_TRIS * 4);
            tris = [];
            tris.addAll(subList);
            throw new RuntimeException("rcBuildPolyMeshDetail: Shrinking triangle count from " + ntris + " to max " + RecastMeshDetail.MAX_TRIS);
          }

          return [nverts, tris];
        }
      }, {
        key: "seedArrayWithPolyCenter",
        value: function seedArrayWithPolyCenter(ctx, chf, meshpoly, poly, npoly, verts, bs, hp, array) {
          // Note: Reads to the compact heightfield are offset by border size (bs)
          // since border size offset is already removed from the polymesh vertices.
          var offset = [0, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1, 0, 1, -1, 1, -1, 0]; // Find cell closest to a let vertex

          var startCellX = 0,
              startCellY = 0,
              startSpanIndex = -1;
          var dmin = RecastMeshDetail.RC_UNSET_HEIGHT;

          for (var j = 0; j < npoly && dmin > 0; ++j) {
            for (var k = 0; k < 9 && dmin > 0; ++k) {
              var ax = verts[meshpoly[poly + j] * 3 + 0] + offset[k * 2 + 0];
              var ay = verts[meshpoly[poly + j] * 3 + 1];
              var az = verts[meshpoly[poly + j] * 3 + 2] + offset[k * 2 + 1];
              if (ax < hp.xmin || ax >= hp.xmin + hp.width || az < hp.ymin || az >= hp.ymin + hp.height) continue;
              var c = chf.cells[ax + bs + (az + bs) * chf.width];

              for (var i = c.index, ni = c.index + c.count; i < ni && dmin > 0; ++i) {
                var s = chf.spans[i];

                var _d6 = Math.abs(ay - s.y);

                if (_d6 < dmin) {
                  startCellX = ax;
                  startCellY = az;
                  startSpanIndex = i;
                  dmin = _d6;
                }
              }
            }
          } // Find center of the polygon


          var pcx = 0,
              pcy = 0;

          for (var _j2 = 0; _j2 < npoly; ++_j2) {
            pcx += verts[meshpoly[poly + _j2] * 3 + 0];
            pcy += verts[meshpoly[poly + _j2] * 3 + 2];
          }

          pcx /= npoly;
          pcy /= npoly;
          array = [];
          array.push(startCellX);
          array.push(startCellY);
          array.push(startSpanIndex);
          var dirs = [0, 1, 2, 3];
          hp.data.fill(0, 0, hp.width * hp.height); // DFS to move to the center. Note that we need a DFS here and can not just move
          // directly towards the center without recording intermediate nodes, even though the polygons
          // are convex. In very rare we can get stuck due to contour simplification if we do not
          // record nodes.

          var cx = -1,
              cy = -1,
              ci = -1;

          while (true) {
            if (array.length < 3) {
              ctx.warn("Walk towards polygon center failed to reach center");
              break;
            }

            ci = array.splice(array.length - 1, 1)[0];
            cy = array.splice(array.length - 1, 1)[0];
            cx = array.splice(array.length - 1, 1)[0]; // Check if close to center of the polygon.

            if (cx == pcx && cy == pcy) {
              break;
            } // If we are already at the correct X-position, prefer direction
            // directly towards the center _in the Y-axis; otherwise prefer
            // direction _in the X-axis


            var directDir = void 0;
            if (cx == pcx) directDir = RecastCommon.rcGetDirForOffset(0, pcy > cy ? 1 : -1);else directDir = RecastCommon.rcGetDirForOffset(pcx > cx ? 1 : -1, 0); // Push the direct dir last so we start with this on next iteration

            var tmp = dirs[3];
            dirs[3] = dirs[directDir];
            dirs[directDir] = tmp;
            var _cs = chf.spans[ci];

            for (var _i9 = 0; _i9 < 4; ++_i9) {
              var dir = dirs[_i9];
              if (RecastCommon.GetCon(_cs, dir) == RecastConstants.RC_NOT_CONNECTED) continue;
              var newX = cx + RecastCommon.GetDirOffsetX(dir);
              var newY = cy + RecastCommon.GetDirOffsetY(dir);
              var hpx = newX - hp.xmin;
              var hpy = newY - hp.ymin;
              if (hpx < 0 || hpx >= hp.width || hpy < 0 || hpy >= hp.height) continue;
              if (hp.data[hpx + hpy * hp.width] != 0) continue;
              hp.data[hpx + hpy * hp.width] = 1;
              array.push(newX);
              array.push(newY);
              array.push(chf.cells[newX + bs + (newY + bs) * chf.width].index + RecastCommon.GetCon(_cs, dir));
            }

            tmp = dirs[3];
            dirs[3] = dirs[directDir];
            dirs[directDir] = tmp;
          }

          array = []; // getHeightData seeds are given _in coordinates with borders

          array.push(cx + bs);
          array.push(cy + bs);
          array.push(ci);
          hp.data.fill(RecastMeshDetail.RC_UNSET_HEIGHT, 0, hp.width * hp.height);
          var cs = chf.spans[ci];
          hp.data[cx - hp.xmin + (cy - hp.ymin) * hp.width] = cs.y;
        }
      }, {
        key: "push3",
        value: function push3(queue, v1, v2, v3) {
          queue.push(v1);
          queue.push(v2);
          queue.push(v3);
        }
      }, {
        key: "getHeightData",
        value: function getHeightData(ctx, chf, meshpolys, poly, npoly, verts, bs, hp, region) {
          // Note: Reads to the compact heightfield are offset by border size (bs)
          // since border size offset is already removed from the polymesh vertices.
          var queue = [];
          hp.data.fill(RecastConstants.RC_UNSET_HEIGHT, 0, hp.width * hp.height);
          var empty = true; // We cannot sample from this let if it was created from polys
          // of different regions. If it was then it could potentially be overlapping
          // with polys of that region and the heights sampled here could be wrong.

          if (region != RecastConstants.RC_MULTIPLE_REGS) {
            // Copy the height from the same region, and mark region borders
            // as seed points to fill the rest.
            for (var hy = 0; hy < hp.height; hy++) {
              var y = hp.ymin + hy + bs;

              for (var hx = 0; hx < hp.width; hx++) {
                var x = hp.xmin + hx + bs;
                var c = chf.cells[x + y * chf.width];

                for (var i = c.index, ni = c.index + c.count; i < ni; ++i) {
                  // if(hy == 1 && hx == 1 && i == 1344)
                  // 	console.log("Bad")
                  var s = chf.spans[i];

                  if (s.reg == region) {
                    // Store height
                    hp.data[hx + hy * hp.width] = s.y;
                    empty = false; // If any of the neighbours is not _in same region,
                    // add the current location as flood fill start

                    var border = false;

                    for (var dir = 0; dir < 4; ++dir) {
                      if (RecastCommon.GetCon(s, dir) != RecastConstants.RC_NOT_CONNECTED) {
                        var ax = x + RecastCommon.GetDirOffsetX(dir);
                        var ay = y + RecastCommon.GetDirOffsetY(dir);
                        var ai = chf.cells[ax + ay * chf.width].index + RecastCommon.GetCon(s, dir);
                        var as = chf.spans[ai];

                        if (as.reg != region) {
                          border = true;
                          break;
                        }
                      }
                    }

                    if (border) {
                      RecastMeshDetail.push3(queue, x, y, i);
                    }

                    break;
                  }
                }
              }
            }
          } // if the polygon does not contain any points from the current region (rare, but happens)
          // or if it could potentially be overlapping polygons of the same region,
          // then use the center as the seed point.		


          if (empty) RecastMeshDetail.seedArrayWithPolyCenter(ctx, chf, meshpolys, poly, npoly, verts, bs, hp, queue);
          var head = 0; // We assume the seed is centered _in the polygon, so a BFS to collect
          // height data will ensure we do not move onto overlapping polygons and
          // sample wrong heights.

          while (head * 3 < queue.length) {
            var cx = queue[head * 3 + 0];
            var cy = queue[head * 3 + 1];
            var ci = queue[head * 3 + 2];
            head++;

            if (head >= RecastMeshDetail.RETRACT_SIZE) {
              head = 0;
              queue = queue.slice(RecastMeshDetail.RETRACT_SIZE * 3, queue.length);
            }

            var cs = chf.spans[ci];

            for (var _dir = 0; _dir < 4; ++_dir) {
              if (RecastCommon.GetCon(cs, _dir) == RecastConstants.RC_NOT_CONNECTED) continue;

              var _ax = cx + RecastCommon.GetDirOffsetX(_dir);

              var _ay = cy + RecastCommon.GetDirOffsetY(_dir);

              var _hx = _ax - hp.xmin - bs;

              var _hy = _ay - hp.ymin - bs;

              if (_hx < 0 || _hx >= hp.width || _hy < 0 || _hy >= hp.height) continue;
              if (hp.data[_hx + _hy * hp.width] != RecastMeshDetail.RC_UNSET_HEIGHT) continue;

              var _ai = chf.cells[_ax + _ay * chf.width].index + RecastCommon.GetCon(cs, _dir);

              var _as = chf.spans[_ai];
              hp.data[_hx + _hy * hp.width] = _as.y;
              RecastMeshDetail.push3(queue, _ax, _ay, _ai);
            }
          }
        }
      }, {
        key: "getEdgeFlags",
        value: function getEdgeFlags(verts, va, vb, vpoly, npoly) {
          // Return true if edge (va,vb) is part of the polygon.
          var thrSqr = 0.001 * 0.001;

          for (var i = 0, j = npoly - 1; i < npoly; j = i++) {
            if (RecastMeshDetail.distancePtSeg2d(verts, va, vpoly, j * 3, i * 3) < thrSqr && RecastMeshDetail.distancePtSeg2d(verts, vb, vpoly, j * 3, i * 3) < thrSqr) return 1;
          }

          return 0;
        }
      }, {
        key: "getTriFlags",
        value: function getTriFlags(verts, va, vb, vc, vpoly, npoly) {
          var flags = 0;
          flags |= RecastMeshDetail.getEdgeFlags(verts, va, vb, vpoly, npoly) << 0;
          flags |= RecastMeshDetail.getEdgeFlags(verts, vb, vc, vpoly, npoly) << 2;
          flags |= RecastMeshDetail.getEdgeFlags(verts, vc, va, vpoly, npoly) << 4;
          return flags;
        } /// @par
        ///
        /// See the #rcConfig documentation for more information on the configuration parameters.
        ///
        /// @see rcAllocPolyMeshDetail, rcPolyMesh, rcCompactHeightfield, rcPolyMeshDetail, rcConfig

      }, {
        key: "buildPolyMeshDetail",
        value: function buildPolyMeshDetail(ctx, mesh, chf, sampleDist, sampleMaxError) {
          ctx.startTimer("BUILD_POLYMESHDETAIL");
          if (mesh.nverts == 0 || mesh.npolys == 0) return null;
          var dmesh = new PolyMeshDetail();
          var nvp = mesh.nvp;
          var cs = mesh.cs;
          var ch = mesh.ch;
          var orig = mesh.bmin;
          var borderSize = mesh.borderSize;
          var heightSearchRadius = Math.floor(Math.max(1, Math.ceil(mesh.maxEdgeError)));
          var tris = [];
          var verts = new Array(256 * 3).fill(0);
          var hp = new HeightPatch();
          var nPolyVerts = 0;
          var maxhw = 0,
              maxhh = 0;
          var bounds = new Array(mesh.npolys * 4).fill(0);
          var poly = new Array(nvp * 3).fill(0);
          poly.fill(0); // Find max size for a polygon area.

          for (var i = 0; i < mesh.npolys; ++i) {
            var p = i * nvp * 2;
            bounds[i * 4 + 0] = chf.width;
            bounds[i * 4 + 1] = 0;
            bounds[i * 4 + 2] = chf.height;
            bounds[i * 4 + 3] = 0;

            for (var j = 0; j < nvp; ++j) {
              if (mesh.polys[p + j] == RecastConstants.RC_MESH_NULL_IDX) {
                // console.log(i + " " + j)
                break;
              }

              var v = mesh.polys[p + j] * 3;
              bounds[i * 4 + 0] = Math.min(bounds[i * 4 + 0], mesh.verts[v + 0]);
              bounds[i * 4 + 1] = Math.max(bounds[i * 4 + 1], mesh.verts[v + 0]);
              bounds[i * 4 + 2] = Math.min(bounds[i * 4 + 2], mesh.verts[v + 2]);
              bounds[i * 4 + 3] = Math.max(bounds[i * 4 + 3], mesh.verts[v + 2]);
              nPolyVerts++;
            }

            bounds[i * 4 + 0] = Math.max(0, bounds[i * 4 + 0] - 1);
            bounds[i * 4 + 1] = Math.min(chf.width, bounds[i * 4 + 1] + 1);
            bounds[i * 4 + 2] = Math.max(0, bounds[i * 4 + 2] - 1);
            bounds[i * 4 + 3] = Math.min(chf.height, bounds[i * 4 + 3] + 1);
            if (bounds[i * 4 + 0] >= bounds[i * 4 + 1] || bounds[i * 4 + 2] >= bounds[i * 4 + 3]) continue;
            maxhw = Math.max(maxhw, bounds[i * 4 + 1] - bounds[i * 4 + 0]);
            maxhh = Math.max(maxhh, bounds[i * 4 + 3] - bounds[i * 4 + 2]);
          }

          hp.data = new Array(maxhw * maxhh);
          hp.data.fill(0);
          dmesh.nmeshes = mesh.npolys;
          dmesh.nverts = 0;
          dmesh.ntris = 0;
          dmesh.meshes = new Array(dmesh.nmeshes * 4);
          dmesh.meshes.fill(0);
          var vcap = nPolyVerts + Math.floor(nPolyVerts / 2);
          var tcap = vcap * 2;
          dmesh.nverts = 0;
          dmesh.verts = new Array(vcap * 3).fill(0);
          dmesh.ntris = 0;
          dmesh.tris = new Array(tcap * 4).fill(0);

          for (var _i10 = 0; _i10 < mesh.npolys; ++_i10) {
            var _p = _i10 * nvp * 2; // Store polygon vertices for processing.


            var npoly = 0;

            for (var _j3 = 0; _j3 < nvp; ++_j3) {
              if (mesh.polys[_p + _j3] == RecastConstants.RC_MESH_NULL_IDX) break;

              var _v = mesh.polys[_p + _j3] * 3;

              poly[_j3 * 3 + 0] = mesh.verts[_v + 0] * cs;
              poly[_j3 * 3 + 1] = mesh.verts[_v + 1] * ch;
              poly[_j3 * 3 + 2] = mesh.verts[_v + 2] * cs;
              npoly++;
            } // Get the height data from the area of the polygon.


            hp.xmin = bounds[_i10 * 4 + 0];
            hp.ymin = bounds[_i10 * 4 + 2];
            hp.width = bounds[_i10 * 4 + 1] - bounds[_i10 * 4 + 0];
            hp.height = bounds[_i10 * 4 + 3] - bounds[_i10 * 4 + 2];
            RecastMeshDetail.getHeightData(ctx, chf, mesh.polys, _p, npoly, mesh.verts, borderSize, hp, mesh.regs[_i10]); // Build detail mesh.

            var nverts = void 0;

            var _RecastMeshDetail$bui = RecastMeshDetail.buildPolyDetail(ctx, poly, npoly, sampleDist, sampleMaxError, heightSearchRadius, chf, hp, verts, tris);

            var _RecastMeshDetail$bui2 = _slicedToArray(_RecastMeshDetail$bui, 2);

            nverts = _RecastMeshDetail$bui2[0];
            tris = _RecastMeshDetail$bui2[1];

            // Move detail verts to world space.
            for (var _j4 = 0; _j4 < nverts; ++_j4) {
              verts[_j4 * 3 + 0] += orig[0];
              verts[_j4 * 3 + 1] += orig[1] + chf.ch; // Is this offset necessary?

              verts[_j4 * 3 + 2] += orig[2];
            } // Offset let too, will be used to flag checking.


            for (var _j5 = 0; _j5 < npoly; ++_j5) {
              poly[_j5 * 3 + 0] += orig[0];
              poly[_j5 * 3 + 1] += orig[1];
              poly[_j5 * 3 + 2] += orig[2];
            } // Store detail submesh.


            var ntris = tris.length / 4;
            dmesh.meshes[_i10 * 4 + 0] = dmesh.nverts;
            dmesh.meshes[_i10 * 4 + 1] = nverts;
            dmesh.meshes[_i10 * 4 + 2] = dmesh.ntris;
            dmesh.meshes[_i10 * 4 + 3] = ntris; // Store vertices, allocate more memory if necessary.

            if (dmesh.nverts + nverts > vcap) {
              while (dmesh.nverts + nverts > vcap) {
                vcap += 256;
              }

              var newv = new Array(vcap * 3);
              if (dmesh.nverts != 0) arraycopy$2(dmesh.verts, 0, newv, 0, 3 * dmesh.nverts);
              dmesh.verts = newv;
            }

            for (var _j6 = 0; _j6 < nverts; ++_j6) {
              dmesh.verts[dmesh.nverts * 3 + 0] = verts[_j6 * 3 + 0];
              dmesh.verts[dmesh.nverts * 3 + 1] = verts[_j6 * 3 + 1];
              dmesh.verts[dmesh.nverts * 3 + 2] = verts[_j6 * 3 + 2];
              dmesh.nverts++;
            } // Store triangles, allocate more memory if necessary.


            if (dmesh.ntris + ntris > tcap) {
              while (dmesh.ntris + ntris > tcap) {
                tcap += 256;
              }

              var newt = new Array(tcap * 4);
              if (dmesh.ntris != 0) arraycopy$2(dmesh.tris, 0, newt, 0, 4 * dmesh.ntris);
              dmesh.tris = newt;
            }

            for (var _j7 = 0; _j7 < ntris; ++_j7) {
              var t = _j7 * 4;
              dmesh.tris[dmesh.ntris * 4 + 0] = tris[t + 0];
              dmesh.tris[dmesh.ntris * 4 + 1] = tris[t + 1];
              dmesh.tris[dmesh.ntris * 4 + 2] = tris[t + 2];
              dmesh.tris[dmesh.ntris * 4 + 3] = RecastMeshDetail.getTriFlags(verts, tris[t + 0] * 3, tris[t + 1] * 3, tris[t + 2] * 3, poly, npoly);
              dmesh.ntris++;
            }
          }

          ctx.stopTimer("BUILD_POLYMESHDETAIL");
          return dmesh;
        }
      }]);

      return RecastMeshDetail;
    }();

    _defineProperty(RecastMeshDetail, "MAX_VERTS", 127);

    _defineProperty(RecastMeshDetail, "MAX_TRIS", 255);

    _defineProperty(RecastMeshDetail, "MAX_VERTS_PER_EDGE", 32);

    _defineProperty(RecastMeshDetail, "RC_UNSET_HEIGHT", 0xfff);

    _defineProperty(RecastMeshDetail, "EV_UNDEF", -1);

    _defineProperty(RecastMeshDetail, "EV_HULL", -2);

    _defineProperty(RecastMeshDetail, "vdot2", function (a, b) {
      return a[0] * b[0] + a[2] * b[2];
    });

    _defineProperty(RecastMeshDetail, "RETRACT_SIZE", 256);

    var RecastBuilderResult = /*#__PURE__*/function () {
      function RecastBuilderResult(pmesh, dmesh) {
        _classCallCheck(this, RecastBuilderResult);

        _defineProperty(this, "pmesh", void 0);

        _defineProperty(this, "dmesh", void 0);

        this.pmesh = pmesh;
        this.dmesh = dmesh;
      }

      _createClass(RecastBuilderResult, [{
        key: "getMesh",
        value: function getMesh() {
          return this.pmesh;
        }
      }, {
        key: "getMeshDetail",
        value: function getMeshDetail() {
          return this.dmesh;
        }
      }]);

      return RecastBuilderResult;
    }();

    var RecastBuilder = /*#__PURE__*/function () {
      // class RecastBuilderProgressListener {
      //     onProgress(completed, total);
      // }
      // RecastBuilder() {
      //     progressListener = null;
      // }
      function RecastBuilder() {
        var progressListener = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;

        _classCallCheck(this, RecastBuilder);

        _defineProperty(this, "progressListener", void 0);

        this.progressListener = progressListener;
      }

      _createClass(RecastBuilder, [{
        key: "buildTiles",
        value: function buildTiles(geom, cfg, threads) {
          var bmin = geom.getMeshBoundsMin();
          var bmax = geom.getMeshBoundsMax();
          var twh = Recast.calcTileCount(bmin, bmax, cfg.cs, cfg.tileSize);
          var tw = twh[0];
          var th = twh[1];
          result = null;

          if (threads == 1) {
            result = buildSingleThread(geom, cfg, bmin, bmax, tw, th);
          } else {
            result = buildMultiThread(geom, cfg, bmin, bmax, tw, th, threads);
          }

          return result;
        }
      }, {
        key: "buildSingleThread",
        value: function buildSingleThread(geom, cfg, bmin, bmax, tw, th) {
          result = new RecastBuilderResult[tw][th]();
          counter = new AtomicInteger();

          for (var x = 0; x < tw; ++x) {
            for (var y = 0; y < th; ++y) {
              result[x][y] = buildTile(geom, cfg, bmin, bmax, x, y, counter, tw * th);
            }
          }

          return result;
        }
      }, {
        key: "buildMultiThread",
        value: function buildMultiThread(geom, cfg, bmin, bmax, tw, th, threads) {
          ec = Executors.newFixedThreadPool(threads);
          result = new RecastBuilderResult[tw][th]();
          counter = new AtomicInteger();

          for (var x = 0; x < tw; ++x) {
            var _loop = function _loop(y) {
              var tx = x;
              var ty = y;
              ec.submit(function () {
                result[tx][ty] = buildTile(geom, cfg, bmin, bmax, tx, ty, counter, tw * th);
              });
            };

            for (var y = 0; y < th; ++y) {
              _loop(y);
            }
          }

          ec.shutdown();

          try {
            ec.awaitTermination(1000, TimeUnit.HOURS);
          } catch (e) {}

          return result;
        }
      }, {
        key: "buildTile",
        value: function buildTile(geom, cfg, bmin, bmax, tx, ty, counter, total) {
          result = build(geom, new RecastBuilderConfig(cfg, bmin, bmax, tx, ty, true));

          if (progressListener != null) {
            progressListener.onProgress(counter.incrementAndGet(), total);
          }

          return result;
        }
      }, {
        key: "build",
        value: function build(geom, builderCfg) {
          var cfg = builderCfg.cfg;
          var ctx = new Context();
          var chf = this.buildCompactHeightfield(geom, builderCfg, ctx); // Partition the heightfield so that we can use simple algorithm later
          // to triangulate the walkable areas.
          // There are 3 martitioning methods, each with some pros and cons:
          // 1) Watershed partitioning
          // - the classic Recast partitioning
          // - creates the nicest tessellation
          // - usually slowest
          // - partitions the heightfield into nice regions without holes or
          // overlaps
          // - the are some corner cases where this method creates produces holes
          // and overlaps
          // - holes may appear when a small obstacles is close to large open area
          // (triangulation can handle this)
          // - overlaps may occur if you have narrow spiral corridors (i.e
          // stairs), this make triangulation to fail
          // * generally the best choice if you precompute the nacmesh, use this
          // if you have large open areas
          // 2) Monotone partioning
          // - fastest
          // - partitions the heightfield into regions without holes and overlaps
          // (guaranteed)
          // - creates let thin polygons, which sometimes causes paths with
          // detours
          // * use this if you want fast navmesh generation
          // 3) Layer partitoining
          // - quite fast
          // - partitions the heighfield into non-overlapping regions
          // - relies on the triangulation code to cope with holes (thus slower
          // than monotone partitioning)
          // - produces better triangles than monotone partitioning
          // - does not have the corner cases of watershed partitioning
          // - can be slow and create a bit ugly tessellation (still better than
          // monotone)
          // if you have large open areas with small obstacles (not a problem if
          // you use tiles)
          // * good choice to use for tiled navmesh with medium and small sized
          // tiles

          if (cfg.partitionType == RecastConstants.WATERSHED) {
            // Prepare for region partitioning, by calculating distance field
            // aPoly the walkable surface.
            RecastRegion.buildDistanceField(ctx, chf); // Partition the walkable surface into simple regions without holes.

            RecastRegion.buildRegions(ctx, chf, builderCfg.borderSize, cfg.minRegionArea, cfg.mergeRegionArea);
          } else if (cfg.partitionType == PartitionType.MONOTONE) {
            // Partition the walkable surface into simple regions without holes.
            // Monotone partitioning does not need distancefield.
            RecastRegion.buildRegionsMonotone(ctx, chf, builderCfg.borderSize, cfg.minRegionArea, cfg.mergeRegionArea);
          } else {
            // Partition the walkable surface into simple regions without holes.
            RecastRegion.buildLayerRegions(ctx, chf, builderCfg.borderSize, cfg.minRegionArea);
          } //
          // Step 5. Trace and simplify region contours.
          //
          // Create contours.


          var cset = RecastContour.buildContours(ctx, chf, cfg.maxSimplificationError, cfg.maxEdgeLen, RecastConstants.RC_CONTOUR_TESS_WALL_EDGES); //
          // Step 6. Build polygons mesh from contours.
          //

          var pmesh = RecastMesh.buildPolyMesh(ctx, cset, cfg.maxVertsPerPoly); //
          // Step 7. Create detail mesh which allows to access approximate height
          // on each polygon.
          //

          var dmesh = builderCfg.buildMeshDetail ? RecastMeshDetail.buildPolyMeshDetail(ctx, pmesh, chf, cfg.detailSampleDist, cfg.detailSampleMaxError) : null;
          return new RecastBuilderResult(pmesh, dmesh);
        }
      }, {
        key: "buildCompactHeightfield",
        value: function buildCompactHeightfield(geomProvider, builderCfg, ctx) {
          var cfg = builderCfg.cfg; //
          // Step 2. Rasterize input polygon soup.
          //
          // Allocate voxel heightfield where we rasterize our input data to.

          var solid = new Heightfield(builderCfg.width, builderCfg.height, builderCfg.bmin, builderCfg.bmax, cfg.cs, cfg.ch); // Allocate array that can hold triangle area types.
          // If you have multiple meshes you need to process, allocate
          // and array which can hold the max number of triangles you need to
          // process.
          // Find triangles which are walkable based on their slope and rasterize
          // them.
          // If your input data is multiple meshes, you can transform them here,
          // calculate
          // the are type for each of the meshes and rasterize them.

          var meshes = geomProvider.meshes();

          var _iterator = _createForOfIteratorHelper(meshes),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var geom = _step.value;
              var verts = geom.getVerts();
              var tiled = cfg.tileSize > 0;
              var totaltris = 0;

              if (tiled) {
                var tbmin = new Array(2);
                var tbmax = new Array(2);
                tbmin[0] = builderCfg.bmin[0];
                tbmin[1] = builderCfg.bmin[2];
                tbmax[0] = builderCfg.bmax[0];
                tbmax[1] = builderCfg.bmax[2];
                var nodes = geom.getChunksOverlappingRect(tbmin, tbmax);

                var _iterator3 = _createForOfIteratorHelper(nodes),
                    _step3;

                try {
                  for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                    var node = _step3.value;
                    var tris = node.tris;
                    var ntris = tris.length / 3;
                    totaltris += ntris;
                    var m_triareas = Recast.markWalkableTriangles(ctx, cfg.walkableSlopeAngle, verts, tris, ntris, cfg.walkableAreaMod);
                    RecastRasterization.rasterizeTriangles(ctx, verts, tris, m_triareas, ntris, solid, cfg.walkableClimb);
                  }
                } catch (err) {
                  _iterator3.e(err);
                } finally {
                  _iterator3.f();
                }
              } else {
                var _tris = geom.getTris();

                var _ntris = _tris.length / 3;

                var _m_triareas = Recast.markWalkableTriangles(ctx, cfg.walkableSlopeAngle, verts, _tris, _ntris, cfg.walkableAreaMod);

                totaltris = _ntris;
                RecastRasterization.rasterizeTrianglesA(ctx, verts, _tris, _m_triareas, _ntris, solid, cfg.walkableClimb);
              }
            } // console.log(solid.spans[0])
            //
            // Step 3. Filter walkables surfaces.
            //
            // Once all geometry is rasterized, we do initial pass of filtering to
            // remove unwanted overhangs caused by the conservative rasterization
            // as well as filter spans where the character cannot possibly stand.

          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          RecastFilter.filterLowHangingWalkableObstacles(ctx, cfg.walkableClimb, solid);
          RecastFilter.filterLedgeSpans(ctx, cfg.walkableHeight, cfg.walkableClimb, solid);
          RecastFilter.filterWalkableLowHeightSpans(ctx, cfg.walkableHeight, solid); //
          // Step 4. Partition walkable surface to simple regions.
          //
          // Compact the heightfield so that it is faster to handle from now on.
          // This will result more cache coherent data as well as the neighbours
          // between walkable cells will be calculated.

          var chf = Recast.buildCompactHeightfield(ctx, cfg.walkableHeight, cfg.walkableClimb, solid); // console.log(chf.spans[450240])
          // Erode the walkable area by agent radius.

          RecastArea.erodeWalkableArea(ctx, cfg.walkableRadius, chf); // (Optional) Mark areas.

          var _iterator2 = _createForOfIteratorHelper(geomProvider.getConvexVolumes()),
              _step2;

          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var vol = _step2.value;
              RecastArea.markConvexPolyArea(ctx, vol.verts, vol.hmin, vol.hmax, vol.areaMod, chf);
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }

          return chf;
        }
      }, {
        key: "buildLayers",
        value: function buildLayers(geom, cfg) {
          var ctx = new Context();
          var chf = buildCompactHeightfield(geom, cfg, ctx);
          return RecastLayers.buildHeightfieldLayers(ctx, chf, cfg.borderSize, cfg.cfg.walkableHeight);
        }
      }]);

      return RecastBuilder;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    /// Represents the source data used to build an navigation mesh tile.
    var NavMeshDataCreateParams = function NavMeshDataCreateParams() {
      _classCallCheck(this, NavMeshDataCreateParams);

      _defineProperty(this, "verts", []);

      _defineProperty(this, "vertCount", 0);

      _defineProperty(this, "polys", []);

      _defineProperty(this, "polyFlags", []);

      _defineProperty(this, "polyAreas", []);

      _defineProperty(this, "polyCount", 0);

      _defineProperty(this, "nvp", 0);

      _defineProperty(this, "detailMeshes", []);

      _defineProperty(this, "detailVerts", []);

      _defineProperty(this, "detailVertsCount", 0);

      _defineProperty(this, "detailTris", []);

      _defineProperty(this, "detailTriCount", 0);

      _defineProperty(this, "offMeshConVerts", []);

      _defineProperty(this, "offMeshConRad", []);

      _defineProperty(this, "offMeshConFlags", []);

      _defineProperty(this, "offMeshConAreas", []);

      _defineProperty(this, "offMeshConDir", []);

      _defineProperty(this, "offMeshConUserID", []);

      _defineProperty(this, "offMeshConCount", 0);

      _defineProperty(this, "userId", 0);

      _defineProperty(this, "tileX", 0);

      _defineProperty(this, "tileY", 0);

      _defineProperty(this, "tileLayer", 0);

      _defineProperty(this, "bmin", []);

      _defineProperty(this, "bmax", []);

      _defineProperty(this, "walkableHeight", 0);

      _defineProperty(this, "walkableRadius", 0);

      _defineProperty(this, "walkableClimb", 0);

      _defineProperty(this, "cs", 0);

      _defineProperty(this, "ch", 0);

      _defineProperty(this, "buildBvTree", false);
    } /// @}
    ;

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Provides high level information related to a dt object.*/
    var MeshHeader = function MeshHeader() {
      _classCallCheck(this, MeshHeader);

      _defineProperty(this, "magic", void 0);

      _defineProperty(this, "version", void 0);

      _defineProperty(this, "x", void 0);

      _defineProperty(this, "y", void 0);

      _defineProperty(this, "layer", void 0);

      _defineProperty(this, "userId", void 0);

      _defineProperty(this, "polyCount", void 0);

      _defineProperty(this, "vertCount", void 0);

      _defineProperty(this, "maxLinkCount", void 0);

      _defineProperty(this, "detailMeshCount", void 0);

      _defineProperty(this, "detailVertCount", void 0);

      _defineProperty(this, "detailTriCount", void 0);

      _defineProperty(this, "bvNodeCount", void 0);

      _defineProperty(this, "offMeshConCount", void 0);

      _defineProperty(this, "offMeshBase", void 0);

      _defineProperty(this, "walkableHeight", void 0);

      _defineProperty(this, "walkableRadius", void 0);

      _defineProperty(this, "walkableClimb", void 0);

      _defineProperty(this, "bmin", new Array(3));

      _defineProperty(this, "bmax", new Array(3));

      _defineProperty(this, "bvQuantFactor", void 0);
    };

    _defineProperty(MeshHeader, "DT_NAVMESH_MAGIC", 'D' << 24 | 'N' << 16 | 'A' << 8 | 'V');

    _defineProperty(MeshHeader, "DT_NAVMESH_VERSION", 7);

    _defineProperty(MeshHeader, "DT_NAVMESH_VERSION_RECAST4J", 0x8807);

    _defineProperty(MeshHeader, "DT_NAVMESH_STATE_MAGIC", 'D' << 24 | 'N' << 16 | 'M' << 8 | 'S');

    _defineProperty(MeshHeader, "DT_NAVMESH_STATE_VERSION", 1);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /** Defines the location of detail sub-mesh data within a dtMeshTile. */
    var PolyDetail = function PolyDetail() {
      _classCallCheck(this, PolyDetail);

      _defineProperty(this, "vertBase", 0);

      _defineProperty(this, "triBase", 0);

      _defineProperty(this, "vertCount", 0);

      _defineProperty(this, "triCount", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**
     * Bounding volume node.
     * 
     * @note This structure is rarely if ever used by the end user.
     * @see MeshTile
     */
    var BVNode = function BVNode() {
      _classCallCheck(this, BVNode);

      _defineProperty(this, "bmin", new Array(3));

      _defineProperty(this, "bmax", new Array(3));

      _defineProperty(this, "i", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var MeshData = function MeshData() {
      _classCallCheck(this, MeshData);

      _defineProperty(this, "header", void 0);

      _defineProperty(this, "verts", []);

      _defineProperty(this, "polys", []);

      _defineProperty(this, "detailMeshes", []);

      _defineProperty(this, "detailVerts", []);

      _defineProperty(this, "detailTris", []);

      _defineProperty(this, "bvTree", []);

      _defineProperty(this, "offMeshCons", []);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**
     * Defines an navigation mesh off-mesh connection within a dtPoly object. An off-mesh connection is a user defined
     * traversable connection made up to two vertices.
     */
    var OffMeshConnection = function OffMeshConnection() {
      _classCallCheck(this, OffMeshConnection);

      _defineProperty(this, "pos", new Array(6));

      _defineProperty(this, "rad", 0);

      _defineProperty(this, "poly", 0);

      _defineProperty(this, "flags", 0);

      _defineProperty(this, "side", 0);

      _defineProperty(this, "userId", 0);
    };

    function arraycopy$3(one, oneStart, two, twoStart, len) {
      for (var i = 0; i < len; i++) {
        two[twoStart + i] = one[oneStart + i];
      }
    }

    var BVItem = function BVItem() {
      _classCallCheck(this, BVItem);

      _defineProperty(this, "bmin", new Array(3).fill(0));

      _defineProperty(this, "bmax", new Array(3).fill(0));

      _defineProperty(this, "i", 0);
    };

    function compareX(a, b) {
      if (a.bmin[0] < b.bmin[0]) return -1;
      if (a.bmin[0] > b.bmin[0]) return 1;
      return 0;
    }

    function compareY(a, b) {
      if (a.bmin[1] < b.bmin[1]) return -1;
      if (a.bmin[1] > b.bmin[1]) return 1;
      return 0;
    }

    function compareZ(a, b) {
      if (a.bmin[2] < b.bmin[2]) return -1;
      if (a.bmin[2] > b.bmin[2]) return 1;
      return 0;
    }

    var NavMeshBuilder = /*#__PURE__*/function () {
      function NavMeshBuilder() {
        _classCallCheck(this, NavMeshBuilder);
      }

      _createClass(NavMeshBuilder, null, [{
        key: "calcExtends",
        value: function calcExtends(items, nitems, imin, imax) {
          var bmin = new Array(3);
          var bmax = new Array(3);
          bmin[0] = items[imin].bmin[0];
          bmin[1] = items[imin].bmin[1];
          bmin[2] = items[imin].bmin[2];
          bmax[0] = items[imin].bmax[0];
          bmax[1] = items[imin].bmax[1];
          bmax[2] = items[imin].bmax[2];

          for (var i = imin + 1; i < imax; ++i) {
            var it = items[i];
            if (it.bmin[0] < bmin[0]) bmin[0] = it.bmin[0];
            if (it.bmin[1] < bmin[1]) bmin[1] = it.bmin[1];
            if (it.bmin[2] < bmin[2]) bmin[2] = it.bmin[2];
            if (it.bmax[0] > bmax[0]) bmax[0] = it.bmax[0];
            if (it.bmax[1] > bmax[1]) bmax[1] = it.bmax[1];
            if (it.bmax[2] > bmax[2]) bmax[2] = it.bmax[2];
          }

          return [bmin, bmax];
        }
      }, {
        key: "longestAxis",
        value: function longestAxis(x, y, z) {
          var axis = 0;
          var maxVal = x;

          if (y > maxVal) {
            axis = 1;
            maxVal = y;
          }

          if (z > maxVal) {
            axis = 2;
            maxVal = z;
          }

          return axis;
        }
      }, {
        key: "subdivide",
        value: function subdivide(items, nitems, imin, imax, curNode, nodes) {
          var inum = imax - imin;
          var icur = curNode;
          var node = new BVNode();
          nodes[curNode++] = node;

          if (inum == 1) {
            // Leaf
            node.bmin[0] = items[imin].bmin[0];
            node.bmin[1] = items[imin].bmin[1];
            node.bmin[2] = items[imin].bmin[2];
            node.bmax[0] = items[imin].bmax[0];
            node.bmax[1] = items[imin].bmax[1];
            node.bmax[2] = items[imin].bmax[2];
            node.i = items[imin].i;
          } else {
            // Split
            var minmax = NavMeshBuilder.calcExtends(items, nitems, imin, imax);
            node.bmin = minmax[0];
            node.bmax = minmax[1];
            var axis = NavMeshBuilder.longestAxis(node.bmax[0] - node.bmin[0], node.bmax[1] - node.bmin[1], node.bmax[2] - node.bmin[2]);

            if (axis == 0) {
              // Sort aPoly x-axis
              //Arrays.sort(items, imin, imin + inum, new CompareItemX());
              //TODO: is this right?
              var shallowCopy = items.slice(imin, imin + inum);
              shallowCopy = shallowCopy.sort(compareX);

              for (var i = imin; i < imin + inum; i++) {
                items[i] = shallowCopy[i - imin];
                if (!items[i]) console.log("uh-oh");
              }
            } else if (axis == 1) {
              // Sort aPoly y-axis
              //Arrays.sort(items, imin, imin + inum, new CompareItemY());
              var _shallowCopy = items.slice(imin, imin + inum);

              _shallowCopy = _shallowCopy.sort(compareY);

              for (var _i = imin; _i < imin + inum; _i++) {
                items[_i] = _shallowCopy[_i - imin];
                if (!items[_i]) console.log("uh-oh");
              }
            } else {
              // Sort aPoly z-axis
              //Arrays.sort(items, imin, imin + inum, new CompareItemZ());
              var _shallowCopy2 = items.slice(imin, imin + inum);

              _shallowCopy2 = _shallowCopy2.sort(compareZ);

              for (var _i2 = imin; _i2 < imin + inum; _i2++) {
                items[_i2] = _shallowCopy2[_i2 - imin];
                if (!items[_i2]) console.log("uh-oh");
              }
            }

            var isplit = Math.floor(imin + inum / 2); // Left

            curNode = NavMeshBuilder.subdivide(items, nitems, imin, isplit, curNode, nodes); // Right

            curNode = NavMeshBuilder.subdivide(items, nitems, isplit, imax, curNode, nodes);
            var iescape = curNode - icur; // Negative index means escape.

            node.i = -iescape;
          }

          return curNode;
        }
      }, {
        key: "createBVTree",
        value: function createBVTree(params, nodes) {
          // Build tree
          var quantFactor = 1 / params.cs;
          var items = new Array(params.polyCount).fill(null);

          for (var i = 0; i < params.polyCount; i++) {
            var it = new BVItem();
            items[i] = it;
            it.i = i; // Calc polygon bounds. Use detail meshes if available.

            if (params.detailMeshes != null) {
              var vb = params.detailMeshes[i * 4 + 0];
              var ndv = params.detailMeshes[i * 4 + 1];
              var bmin = new Array(3);
              var bmax = new Array(3);
              var dv = vb * 3;
              DetourCommon.vCopy(bmin, params.detailVerts, dv);
              DetourCommon.vCopy(bmax, params.detailVerts, dv);

              for (var j = 1; j < ndv; j++) {
                DetourCommon.vMin(bmin, params.detailVerts, dv + j * 3);
                DetourCommon.vMax(bmax, params.detailVerts, dv + j * 3);
              } // BV-tree uses cs for all dimensions


              it.bmin[0] = DetourCommon.clamp(Math.round((bmin[0] - params.bmin[0]) * quantFactor), 0, 0xffff);
              it.bmin[1] = DetourCommon.clamp(Math.round((bmin[1] - params.bmin[1]) * quantFactor), 0, 0xffff);
              it.bmin[2] = DetourCommon.clamp(Math.round((bmin[2] - params.bmin[2]) * quantFactor), 0, 0xffff);
              it.bmax[0] = DetourCommon.clamp(Math.round((bmax[0] - params.bmin[0]) * quantFactor), 0, 0xffff);
              it.bmax[1] = DetourCommon.clamp(Math.round((bmax[1] - params.bmin[1]) * quantFactor), 0, 0xffff);
              it.bmax[2] = DetourCommon.clamp(Math.round((bmax[2] - params.bmin[2]) * quantFactor), 0, 0xffff);
            } else {
              var p = i * params.nvp * 2;
              it.bmin[0] = it.bmax[0] = params.verts[params.polys[p] * 3 + 0];
              it.bmin[1] = it.bmax[1] = params.verts[params.polys[p] * 3 + 1];
              it.bmin[2] = it.bmax[2] = params.verts[params.polys[p] * 3 + 2];

              for (var _j = 1; _j < params.nvp; ++_j) {
                if (params.polys[p + _j] == NavMeshBuilder.MESH_NULL_IDX) break;
                var x = params.verts[params.polys[p + _j] * 3 + 0];
                var y = params.verts[params.polys[p + _j] * 3 + 1];
                var z = params.verts[params.polys[p + _j] * 3 + 2];
                if (x < it.bmin[0]) it.bmin[0] = x;
                if (y < it.bmin[1]) it.bmin[1] = y;
                if (z < it.bmin[2]) it.bmin[2] = z;
                if (x > it.bmax[0]) it.bmax[0] = x;
                if (y > it.bmax[1]) it.bmax[1] = y;
                if (z > it.bmax[2]) it.bmax[2] = z;
              } // Remap y


              it.bmin[1] = Math.floor(it.bmin[1] * params.ch / params.cs);
              it.bmax[1] = Math.ceil(it.bmax[1] * params.ch / params.cs);
            }
          }

          return NavMeshBuilder.subdivide(items, params.polyCount, 0, params.polyCount, 0, nodes);
        }
      }, {
        key: "classifyOffMeshPoint",
        value: function classifyOffMeshPoint(pt, bmin, bmax) {
          var outcode = 0;
          outcode |= pt[0] >= bmax[0] ? NavMeshBuilder.XP : 0;
          outcode |= pt[2] >= bmax[2] ? ZP : 0;
          outcode |= pt[0] < bmin[0] ? XM : 0;
          outcode |= pt[2] < bmin[2] ? ZM : 0;

          switch (outcode) {
            case NavMeshBuilder.XP:
              return 0;

            case NavMeshBuilder.XP | NavMeshBuilder.ZP:
              return 1;

            case NavMeshBuilder.ZP:
              return 2;

            case NavMeshBuilder.XM | NavMeshBuilder.ZP:
              return 3;

            case NavMeshBuilder.XM:
              return 4;

            case NavMeshBuilder.XM | NavMeshBuilder.ZM:
              return 5;

            case NavMeshBuilder.ZM:
              return 6;

            case NavMeshBuilder.XP | NavMeshBuilder.ZM:
              return 7;
          }

          return 0xff;
        }
        /**
         * Builds navigation mesh tile data from the provided tile creation data.
         * 
         * @param params
         *            Tile creation data.
         * 
         * @return created tile data
         */

      }, {
        key: "createNavMeshData",
        value: function createNavMeshData(params) {
          if (params.vertCount >= 0xffff) return null;
          if (params.vertCount == 0 || params.verts == null) return null;
          if (params.polyCount == 0 || params.polys == null) return null;
          var nvp = params.nvp; // Classify off-mesh connection points. We store only the connections
          // whose start poPoly is inside the tile.

          var offMeshConClass = null;
          var storedOffMeshConCount = 0;
          var offMeshConLinkCount = 0;

          if (params.offMeshConCount > 0) {
            offMeshConClass = new Array(params.offMeshConCount * 2); // Find tight heigh bounds, used for culling out off-mesh start
            // locations.

            var hmin = Number.MAX_VALUE;
            var hmax = -Number.MAX_VALUE;

            if (params.detailVerts != null && params.detailVertsCount != 0) {
              for (var i = 0; i < params.detailVertsCount; ++i) {
                var _h = params.detailVerts[i * 3 + 1];
                hmin = Math.min(hmin, _h);
                hmax = Math.max(hmax, _h);
              }
            } else {
              for (var _i3 = 0; _i3 < params.vertCount; ++_i3) {
                var iv = _i3 * 3;
                h = params.bmin[1] + params.verts[iv + 1] * params.ch;
                hmin = Math.min(hmin, h);
                hmax = Math.max(hmax, h);
              }
            }

            hmin -= params.walkableClimb;
            hmax += params.walkableClimb;
            var bmin = new Array(3);
            var bmax = new Array(3);
            DetourCommon.vCopy(bmin, params.bmin);
            DetourCommon.vCopy(bmax, params.bmax);
            bmin[1] = hmin;
            bmax[1] = hmax;

            for (var _i4 = 0; _i4 < params.offMeshConCount; ++_i4) {
              var p0 = new VectorPtr$1(params.offMeshConVerts, (_i4 * 2 + 0) * 3);
              var p1 = new VectorPtr$1(params.offMeshConVerts, (_i4 * 2 + 1) * 3);
              offMeshConClass[_i4 * 2 + 0] = NavMeshBuilder.classifyOffMeshPoint(p0, bmin, bmax);
              offMeshConClass[_i4 * 2 + 1] = NavMeshBuilder.classifyOffMeshPoint(p1, bmin, bmax); // Zero out off-mesh start positions which are not even
              // potentially touching the mesh.

              if (offMeshConClass[_i4 * 2 + 0] == 0xff) {
                if (p0[1] < bmin[1] || p0[1] > bmax[1]) offMeshConClass[_i4 * 2 + 0] = 0;
              } // Count how many links should be allocated for off-mesh
              // connections.


              if (offMeshConClass[_i4 * 2 + 0] == 0xff) offMeshConLinkCount++;
              if (offMeshConClass[_i4 * 2 + 1] == 0xff) offMeshConLinkCount++;
              if (offMeshConClass[_i4 * 2 + 0] == 0xff) storedOffMeshConCount++;
            }
          } // Off-mesh connectionss are stored as polygons, adjust values.


          var totPolyCount = params.polyCount + storedOffMeshConCount;
          var totVertCount = params.vertCount + storedOffMeshConCount * 2; // Find portal edges which are at tile borders.

          var edgeCount = 0;
          var portalCount = 0;

          for (var _i5 = 0; _i5 < params.polyCount; ++_i5) {
            var p = _i5 * 2 * nvp;

            for (var j = 0; j < nvp; ++j) {
              if (params.polys[p + j] == NavMeshBuilder.MESH_NULL_IDX) break;
              edgeCount++;

              if ((params.polys[p + nvp + j] & 0x8000) != 0) {
                var dir = params.polys[p + nvp + j] & 0xf;
                if (dir != 0xf) portalCount++;
              }
            }
          }

          var maxLinkCount = edgeCount + portalCount * 2 + offMeshConLinkCount * 2; // Find unique detail vertices.

          var uniqueDetailVertCount = 0;
          var detailTriCount = 0;

          if (params.detailMeshes != null) {
            // Has detail mesh, count unique detail vertex count and use input
            // detail tri count.
            detailTriCount = params.detailTriCount;

            for (var _i6 = 0; _i6 < params.polyCount; ++_i6) {
              var _p = _i6 * nvp * 2;

              var ndv = params.detailMeshes[_i6 * 4 + 1];
              var nv = 0;

              for (var _j2 = 0; _j2 < nvp; ++_j2) {
                if (params.polys[_p + _j2] == NavMeshBuilder.MESH_NULL_IDX) break;
                nv++;
              }

              ndv -= nv;
              uniqueDetailVertCount += ndv;
            }
          } else {
            // No input detail mesh, build detail mesh from nav polys.
            uniqueDetailVertCount = 0; // No extra detail verts.

            detailTriCount = 0;

            for (var _i7 = 0; _i7 < params.polyCount; ++_i7) {
              var _p2 = _i7 * nvp * 2;

              var _nv = 0;

              for (var _j3 = 0; _j3 < nvp; ++_j3) {
                if (params.polys[_p2 + _j3] == NavMeshBuilder.MESH_NULL_IDX) break;
                _nv++;
              }

              detailTriCount += _nv - 2;
            }
          }

          var bvTreeSize = params.buildBvTree ? params.polyCount * 2 : 0;
          var header = new MeshHeader();
          var navVerts = new Array(3 * totVertCount);
          var navPolys = new Array(totPolyCount);
          var navDMeshes = new Array(params.polyCount);
          var navDVerts = new Array(3 * uniqueDetailVertCount);
          var navDTris = new Array(4 * detailTriCount);
          var navBvtree = new Array(bvTreeSize);
          var offMeshCons = new Array(storedOffMeshConCount); // Store header

          header.magic = MeshHeader.DT_NAVMESH_MAGIC;
          header.version = MeshHeader.DT_NAVMESH_VERSION;
          header.x = params.tileX;
          header.y = params.tileY;
          header.layer = params.tileLayer;
          header.userId = params.userId;
          header.polyCount = totPolyCount;
          header.vertCount = totVertCount;
          header.maxLinkCount = maxLinkCount;
          DetourCommon.vCopy(header.bmin, params.bmin);
          DetourCommon.vCopy(header.bmax, params.bmax);
          header.detailMeshCount = params.polyCount;
          header.detailVertCount = uniqueDetailVertCount;
          header.detailTriCount = detailTriCount;
          header.bvQuantFactor = 1.0 / params.cs;
          header.offMeshBase = params.polyCount;
          header.walkableHeight = params.walkableHeight;
          header.walkableRadius = params.walkableRadius;
          header.walkableClimb = params.walkableClimb;
          header.offMeshConCount = storedOffMeshConCount;
          header.bvNodeCount = bvTreeSize;
          var offMeshVertsBase = params.vertCount;
          var offMeshPolyBase = params.polyCount; // Store vertices
          // Mesh vertices

          for (var _i8 = 0; _i8 < params.vertCount; ++_i8) {
            var _iv = _i8 * 3;

            var v = _i8 * 3;
            navVerts[v] = params.bmin[0] + params.verts[_iv] * params.cs;
            navVerts[v + 1] = params.bmin[1] + params.verts[_iv + 1] * params.ch;
            navVerts[v + 2] = params.bmin[2] + params.verts[_iv + 2] * params.cs; // console.log(navVerts)
          } // Off-mesh link vertices.


          var n = 0;

          for (var _i9 = 0; _i9 < params.offMeshConCount; ++_i9) {
            // Only store connections which start from this tile.
            if (offMeshConClass[_i9 * 2 + 0] == 0xff) {
              var linkv = _i9 * 2 * 3;

              var _v = (offMeshVertsBase + n * 2) * 3;

              arraycopy$3(params.offMeshConVerts, linkv, navVerts, _v, 6);
              n++;
            }
          } // Store polygons
          // Mesh polys


          var src = 0;

          for (var _i10 = 0; _i10 < params.polyCount; ++_i10) {
            var _p3 = new Poly(_i10, nvp);

            navPolys[_i10] = _p3;
            _p3.vertCount = 0;
            _p3.flags = params.polyFlags[_i10];

            _p3.setArea(params.polyAreas[_i10]);

            _p3.setType(Poly.DT_POLYTYPE_GROUND);

            for (var _j4 = 0; _j4 < nvp; ++_j4) {
              if (params.polys[src + _j4] == NavMeshBuilder.MESH_NULL_IDX) break;
              _p3.verts[_j4] = params.polys[src + _j4];

              if ((params.polys[src + nvp + _j4] & 0x8000) != 0) {
                // Border or portal edge.
                var _dir = params.polys[src + nvp + _j4] & 0xf;

                if (_dir == 0xf) // Border
                  _p3.neis[_j4] = 0;else if (_dir == 0) // Portal x-
                  _p3.neis[_j4] = NavMesh.DT_EXT_LINK | 4;else if (_dir == 1) // Portal z+
                  _p3.neis[_j4] = NavMesh.DT_EXT_LINK | 2;else if (_dir == 2) // Portal x+
                  _p3.neis[_j4] = NavMesh.DT_EXT_LINK | 0;else if (_dir == 3) // Portal z-
                  _p3.neis[_j4] = NavMesh.DT_EXT_LINK | 6;
              } else {
                // Normal connection
                _p3.neis[_j4] = params.polys[src + nvp + _j4] + 1;
              }

              _p3.vertCount++;
            }

            src += nvp * 2;
          } // Off-mesh connection vertices.


          n = 0;

          for (var _i11 = 0; _i11 < params.offMeshConCount; ++_i11) {
            // Only store connections which start from this tile.
            if (offMeshConClass[_i11 * 2 + 0] == 0xff) {
              var _p4 = new Poly(offMeshPolyBase + n, nvp);

              navPolys[offMeshPolyBase + n] = _p4;
              _p4.vertCount = 2;
              _p4.verts[0] = offMeshVertsBase + n * 2;
              _p4.verts[1] = offMeshVertsBase + n * 2 + 1;
              _p4.flags = params.offMeshConFlags[_i11];

              _p4.setArea(params.offMeshConAreas[_i11]);

              _p4.setType(Poly.DT_POLYTYPE_OFFMESH_CONNECTION);

              n++;
            }
          } // Store detail meshes and vertices.
          // The nav polygon vertices are stored as the first vertices on each
          // mesh.
          // We compress the mesh data by skipping them and using the navmesh
          // coordinates.


          if (params.detailMeshes != null) {
            var vbase = 0;

            for (var _i12 = 0; _i12 < params.polyCount; ++_i12) {
              var dtl = new PolyDetail();
              navDMeshes[_i12] = dtl;
              var vb = params.detailMeshes[_i12 * 4 + 0];
              var _ndv = params.detailMeshes[_i12 * 4 + 1];
              var _nv2 = navPolys[_i12].vertCount;
              dtl.vertBase = vbase;
              dtl.vertCount = _ndv - _nv2;
              dtl.triBase = params.detailMeshes[_i12 * 4 + 2];
              dtl.triCount = params.detailMeshes[_i12 * 4 + 3]; // Copy vertices except the first 'nv' verts which are equal to
              // nav let verts.

              if (_ndv - _nv2 != 0) {
                arraycopy$3(params.detailVerts, (vb + _nv2) * 3, navDVerts, vbase * 3, 3 * (_ndv - _nv2));
                vbase += _ndv - _nv2;
              }
            } // Store triangles.


            arraycopy$3(params.detailTris, 0, navDTris, 0, 4 * params.detailTriCount);
          } else {
            // Create dummy detail mesh by triangulating polys.
            var tbase = 0;

            for (var _i13 = 0; _i13 < params.polyCount; ++_i13) {
              var _dtl = new PolyDetail();

              navDMeshes[_i13] = _dtl;
              var _nv3 = navPolys[_i13].vertCount;
              _dtl.vertBase = 0;
              _dtl.vertCount = 0;
              _dtl.triBase = tbase;
              _dtl.triCount = _nv3 - 2; // Triangulate polygon (local indices).

              for (var _j5 = 2; _j5 < _nv3; ++_j5) {
                var t = tbase * 4;
                navDTris[t + 0] = 0;
                navDTris[t + 1] = _j5 - 1;
                navDTris[t + 2] = _j5; // Bit for each edge that belongs to let boundary.

                navDTris[t + 3] = 1 << 2;
                if (_j5 == 2) navDTris[t + 3] |= 1 << 0;
                if (_j5 == _nv3 - 1) navDTris[t + 3] |= 1 << 4;
                tbase++;
              }
            }
          } // Store and create BVtree.
          // TODO: take detail mesh into account! use byte per bbox extent?


          if (params.buildBvTree) {
            // Do not set header.bvNodeCount set to make it work look exactly the same as in original Detour  
            header.bvNodeCount = NavMeshBuilder.createBVTree(params, navBvtree);
          } // Store Off-Mesh connections.


          n = 0;

          for (var _i14 = 0; _i14 < params.offMeshConCount; ++_i14) {
            // Only store connections which start from this tile.
            if (offMeshConClass[_i14 * 2 + 0] == 0xff) {
              var con = new OffMeshConnection();
              offMeshCons[n] = con;
              con.poly = offMeshPolyBase + n; // Copy connection end-points.

              var endPts = _i14 * 2 * 3;
              arraycopy$3(params.offMeshConVerts, endPts, con.pos, 0, 6);
              con.rad = params.offMeshConRad[_i14];
              con.flags = params.offMeshConDir[_i14] != 0 ? NavMesh.DT_OFFMESH_CON_BIDIR : 0;
              con.side = offMeshConClass[_i14 * 2 + 1];
              if (params.offMeshConUserID != null) con.userId = params.offMeshConUserID[_i14];
              n++;
            }
          }

          var nmd = new MeshData();
          nmd.header = header;
          nmd.verts = navVerts;
          nmd.polys = navPolys;
          nmd.detailMeshes = navDMeshes;
          nmd.detailVerts = navDVerts;
          nmd.detailTris = navDTris;
          nmd.bvTree = navBvtree;
          nmd.offMeshCons = offMeshCons;
          return nmd;
        }
      }]);

      return NavMeshBuilder;
    }();

    _defineProperty(NavMeshBuilder, "MESH_NULL_IDX", 0xffff);

    _defineProperty(NavMeshBuilder, "XP", 1 << 0);

    _defineProperty(NavMeshBuilder, "ZP", 1 << 1);

    _defineProperty(NavMeshBuilder, "XM", 1 << 2);

    _defineProperty(NavMeshBuilder, "ZM", 1 << 3);

    var RecastTestMeshBuilder = /*#__PURE__*/function () {
      function RecastTestMeshBuilder(m_geom, m_partitionType, m_cellSize, m_cellHeight, m_agentHeight, m_agentRadius, m_agentMaxClimb, m_agentMaxSlope, m_regionMinSize, m_regionMergeSize, m_edgeMaxLen, m_edgeMaxError, m_vertsPerPoly, m_detailSampleDist, m_detailSampleMaxError) {
        _classCallCheck(this, RecastTestMeshBuilder);

        _defineProperty(this, "meshData", void 0);

        var cfg = new RecastConfig(m_partitionType, m_cellSize, m_cellHeight, m_agentHeight, m_agentRadius, m_agentMaxClimb, m_agentMaxSlope, m_regionMinSize, m_regionMergeSize, m_edgeMaxLen, m_edgeMaxError, m_vertsPerPoly, m_detailSampleDist, m_detailSampleMaxError, 0, SampleAreaModifications.SAMPLE_AREAMOD_GROUND);
        var bcfg = new RecastBuilderConfig$1(cfg, m_geom.getMeshBoundsMin(), m_geom.getMeshBoundsMax());
        var rcBuilder = new RecastBuilder();
        var rcResult = rcBuilder.build(m_geom, bcfg);
        var m_pmesh = rcResult.getMesh();

        for (var i = 0; i < m_pmesh.npolys; ++i) {
          m_pmesh.flags[i] = 1;
        }

        var m_dmesh = rcResult.getMeshDetail();
        var params = new NavMeshDataCreateParams();
        params.verts = m_pmesh.verts;
        params.vertCount = m_pmesh.nverts;
        params.polys = m_pmesh.polys;
        params.polyAreas = m_pmesh.areas;
        params.polyFlags = m_pmesh.flags;
        params.polyCount = m_pmesh.npolys;
        params.nvp = m_pmesh.nvp;
        params.detailMeshes = m_dmesh.meshes;
        params.detailVerts = m_dmesh.verts;
        params.detailVertsCount = m_dmesh.nverts;
        params.detailTris = m_dmesh.tris;
        params.detailTriCount = m_dmesh.ntris;
        params.walkableHeight = m_agentHeight;
        params.walkableRadius = m_agentRadius;
        params.walkableClimb = m_agentMaxClimb;
        params.bmin = m_pmesh.bmin;
        params.bmax = m_pmesh.bmax;
        params.cs = m_cellSize;
        params.ch = m_cellHeight;
        params.buildBvTree = true;
        params.offMeshConVerts = new Array(6);
        params.offMeshConVerts[0] = 0.1;
        params.offMeshConVerts[1] = 0.2;
        params.offMeshConVerts[2] = 0.3;
        params.offMeshConVerts[3] = 0.4;
        params.offMeshConVerts[4] = 0.5;
        params.offMeshConVerts[5] = 0.6;
        params.offMeshConRad = new Array(1);
        params.offMeshConRad[0] = 0.1;
        params.offMeshConDir = new Array(1);
        params.offMeshConDir[0] = 1;
        params.offMeshConAreas = new Array(1);
        params.offMeshConAreas[0] = 2;
        params.offMeshConFlags = new Array(1);
        params.offMeshConFlags[0] = 12;
        params.offMeshConUserID = new Array(1);
        params.offMeshConUserID[0] = 0x4567;
        params.offMeshConCount = 1;
        this.meshData = NavMeshBuilder.createNavMeshData(params);
      }

      _createClass(RecastTestMeshBuilder, [{
        key: "getMeshData",
        value: function getMeshData() {
          return this.meshData;
        }
      }]);

      return RecastTestMeshBuilder;
    }();

    _defineProperty(RecastTestMeshBuilder, "m_cellSize", 0.3);

    _defineProperty(RecastTestMeshBuilder, "m_cellHeight", 0.2);

    _defineProperty(RecastTestMeshBuilder, "m_agentHeight", 2.0);

    _defineProperty(RecastTestMeshBuilder, "m_agentRadius", 0.6);

    _defineProperty(RecastTestMeshBuilder, "m_agentMaxClimb", 0.9);

    _defineProperty(RecastTestMeshBuilder, "m_agentMaxSlope", 45.0);

    _defineProperty(RecastTestMeshBuilder, "m_regionMinSize", 8);

    _defineProperty(RecastTestMeshBuilder, "m_regionMergeSize", 20);

    _defineProperty(RecastTestMeshBuilder, "m_edgeMaxLen", 12.0);

    _defineProperty(RecastTestMeshBuilder, "m_edgeMaxError", 1.3);

    _defineProperty(RecastTestMeshBuilder, "m_vertsPerPoly", 6);

    _defineProperty(RecastTestMeshBuilder, "m_detailSampleDist", 6.0);

    _defineProperty(RecastTestMeshBuilder, "m_detailSampleMaxError", 1.0);

    _defineProperty(RecastTestMeshBuilder, "fromFile", function (objFileContents) {
      return new RecastTestMeshBuilder(new ObjImporter().load(objFileContents), RecastConstants.WATERSHED, this.m_cellSize, this.m_cellHeight, this.m_agentHeight, this.m_agentRadius, this.m_agentMaxClimb, this.m_agentMaxSlope, this.m_regionMinSize, this.m_regionMergeSize, this.m_edgeMaxLen, this.m_edgeMaxError, this.m_vertsPerPoly, this.m_detailSampleDist, this.m_detailSampleMaxError);
    });

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var Node = /*#__PURE__*/function () {
      /** parent of the node is not adjacent. Found using raycast. */

      /** Position of the node. */

      /** Cost from previous node to current node. */

      /** Cost up to the node. */

      /** Index to parent node. */

      /** extra state information. A polyRef can have multiple nodes with different extra info. see DT_MAX_STATES_PER_NODE */

      /** Node flags. A combination of dtNodeFlags. */

      /** Polygon ref the node corresponds to. */
      function Node(index) {
        _classCallCheck(this, Node);

        _defineProperty(this, "index", 0);

        _defineProperty(this, "pos", new Array(3));

        _defineProperty(this, "cost", 0);

        _defineProperty(this, "total", 0);

        _defineProperty(this, "pidx", 0);

        _defineProperty(this, "state", 0);

        _defineProperty(this, "flags", 0);

        _defineProperty(this, "id", 0);

        this.index = index;
      }

      _createClass(Node, [{
        key: "toString",
        value: function toString() {
          return "Node [id=" + id + "]";
        }
      }]);

      return Node;
    }();

    _defineProperty(Node, "DT_NODE_OPEN", 0x01);

    _defineProperty(Node, "DT_NODE_CLOSED", 0x02);

    _defineProperty(Node, "DT_NODE_PARENT_DETACHED", 0x04);

    var NodePool = /*#__PURE__*/function () {
      function NodePool() {
        _classCallCheck(this, NodePool);

        _defineProperty(this, "m_map", []);

        _defineProperty(this, "m_nodes", []);
      }

      _createClass(NodePool, [{
        key: "clear",
        value: function clear() {
          this.m_nodes = [];
          this.m_map = [];
        }
      }, {
        key: "findNodes",
        value: function findNodes(id) {
          var nodes = this.m_map[id];

          if (nodes == null) {
            nodes = [];
          }

          return nodes;
        }
      }, {
        key: "findNode",
        value: function findNode(id) {
          var nodes = this.m_map[id];

          if (nodes != null && !nodes.length == 0) {
            return nodes[0];
          }

          return null;
        }
      }, {
        key: "findNode",
        value: function findNode(id, state) {
          var nodes = this.m_map[id];

          if (nodes != null) {
            var _iterator = _createForOfIteratorHelper(nodes),
                _step;

            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var node = _step.value;

                if (node.state == state) {
                  return node;
                }
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
          }

          return null;
        }
      }, {
        key: "getNode",
        value: function getNode(id) {
          var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
          var nodes = this.m_map[id];

          if (nodes != null) {
            var _iterator2 = _createForOfIteratorHelper(nodes),
                _step2;

            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var node = _step2.value;

                if (node.state == state) {
                  return node;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }

          return this.create(id, state);
        }
      }, {
        key: "create",
        value: function create(id, state) {
          var node = new Node(this.m_nodes.length + 1);
          node.id = id;
          node.state = state;
          this.m_nodes.push(node);
          var nodes = this.m_map[id];

          if (nodes == null) {
            nodes = [];
            this.m_map[id] = nodes;
          }

          nodes.push(node);
          return node;
        }
      }, {
        key: "getNodeIdx",
        value: function getNodeIdx(node) {
          return node != null ? node.index : 0;
        }
      }, {
        key: "getNodeAtIdx",
        value: function getNodeAtIdx(idx) {
          return idx != 0 ? this.m_nodes[idx - 1] : null;
        }
      }, {
        key: "getNodeCount",
        value: function getNodeCount() {
          return this.m_nodes.length;
        } // getNode(ref) {
        // return this.getNode(ref, 0);
        // }

        /*
        
        inline let getMaxNodes() const { return m_maxNodes; }
        inline dtNodeIndex getFirst(bucket) const { return m_first[bucket]; }
        inline dtNodeIndex getNext(i) const { return m_next[i]; }
        */

      }]);

      return NodePool;
    }();

    //https://truetocode.com/binary-treemax-heap-priority-queue-and-implementation-using-javascript/427/
    var PriorityQueue = /*#__PURE__*/function () {
      function PriorityQueue(comparator) {
        _classCallCheck(this, PriorityQueue);

        this.comparator = comparator;
        this.array = [];
      }

      _createClass(PriorityQueue, [{
        key: "isEmpty",
        value: function isEmpty() {
          return this.array.length == 0;
        }
      }, {
        key: "poll",
        value: function poll() {
          return this.array.splice(0, 1)[0];
        }
      }, {
        key: "insert",
        value: function insert(element) {
          this.push(element);
        }
      }, {
        key: "push",
        value: function push(element) {
          this.array.push(element);
          this.array.sort(this.comparator);
        }
      }, {
        key: "offer",
        value: function offer(element) {
          this.push(element);
        }
      }, {
        key: "remove",
        value: function remove(element) {
          var index = this.array.indexOf(element);
          if (index >= 0) this.array.splice(index, 1);
        }
      }]);

      return PriorityQueue;
    }();

    function compare(one, two) {
      if (one == two) return 0;
      if (one < two) return -1;else return 1;
    }

    var NodeQueue = /*#__PURE__*/function () {
      function NodeQueue() {
        _classCallCheck(this, NodeQueue);

        this.m_heap = new PriorityQueue(function (n1, n2) {
          return compare(n1.total, n2.total);
        });
      }

      _createClass(NodeQueue, [{
        key: "clear",
        value: function clear() {
          this.m_heap = new PriorityQueue(function (n1, n2) {
            return compare(n1.total, n2.total);
          });
        }
      }, {
        key: "top",
        value: function top() {
          return this.m_heap.peek();
        }
      }, {
        key: "pop",
        value: function pop() {
          return this.m_heap.poll();
        }
      }, {
        key: "push",
        value: function push(node) {
          this.m_heap.insert(node);
        }
      }, {
        key: "modify",
        value: function modify(node) {
          this.m_heap.remove(node);
          this.m_heap.offer(node);
        }
      }, {
        key: "isEmpty",
        value: function isEmpty() {
          return this.m_heap.isEmpty();
        }
      }]);

      return NodeQueue;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var QueryData = function QueryData() {
      _classCallCheck(this, QueryData);

      _defineProperty(this, "status", null);

      _defineProperty(this, "lastBestNode", null);

      _defineProperty(this, "lastBestNodeCost", 0);

      _defineProperty(this, "startRef", 0);

      _defineProperty(this, 5, void 0);

      _defineProperty(this, "endRef", 0);

      _defineProperty(this, "startPos", new Array(3));

      _defineProperty(this, "endPos", new Array(3));

      _defineProperty(this, "filter", null);

      _defineProperty(this, "options", 0);

      _defineProperty(this, "raycastLimitSqr", 0);
    };

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var Status = /*#__PURE__*/function () {
      function Status(inValue) {
        _classCallCheck(this, Status);

        this.value = inValue;
      }

      _createClass(Status, [{
        key: "isFailed",
        value: function isFailed() {
          return this.value == Status.FAILURE;
        }
      }, {
        key: "isInProgress",
        value: function isInProgress() {
          return this.value == Status.IN_PROGRESS;
        }
      }, {
        key: "isSuccess",
        value: function isSuccess() {
          return this.value == Status.SUCCSESS || this.value == Status.PARTIAL_RESULT;
        }
      }, {
        key: "isPartial",
        value: function isPartial() {
          return this.value == Status.PARTIAL_RESULT;
        }
      }]);

      return Status;
    }();

    _defineProperty(Status, "FAILURE", 0);

    _defineProperty(Status, "SUCCSESS", 1);

    _defineProperty(Status, "IN_PROGRESS", 2);

    _defineProperty(Status, "PARTIAL_RESULT", 3);

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    //TODO: (PP) Add comments
    var UpdateSlicedPathResult = /*#__PURE__*/function () {
      function UpdateSlicedPathResult(status, iterations) {
        _classCallCheck(this, UpdateSlicedPathResult);

        _defineProperty(this, "status", null);

        _defineProperty(this, "iterations", 0);

        this.status = status;
        this.iterations = iterations;
      }

      _createClass(UpdateSlicedPathResult, [{
        key: "getStatus",
        value: function getStatus() {
          return this.status;
        }
      }, {
        key: "getIterations",
        value: function getIterations() {
          return this.iterations;
        }
      }]);

      return UpdateSlicedPathResult;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var FindPathResult = /*#__PURE__*/function () {
      ///  @param[out]	path		An ordered list of polygon references representing the path. (Start to end.) 
      function FindPathResult(status, refs) {
        _classCallCheck(this, FindPathResult);

        _defineProperty(this, "status", null);

        _defineProperty(this, "refs", []);

        this.status = status;
        this.refs = refs;
      }

      _createClass(FindPathResult, [{
        key: "getStatus",
        value: function getStatus() {
          return this.status;
        }
      }, {
        key: "getRefs",
        value: function getRefs() {
          return this.refs;
        }
      }]);

      return FindPathResult;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    //TODO: (PP) Add comments
    var FindLocalNeighbourhoodResult = /*#__PURE__*/function () {
      function FindLocalNeighbourhoodResult(refs, parentRefs) {
        _classCallCheck(this, FindLocalNeighbourhoodResult);

        _defineProperty(this, "refs", []);

        _defineProperty(this, "parentRefs", []);

        this.refs = refs;
        this.parentRefs = parentRefs;
      }

      _createClass(FindLocalNeighbourhoodResult, [{
        key: "getRefs",
        value: function getRefs() {
          return this.refs;
        }
      }, {
        key: "getParentRefs",
        value: function getParentRefs() {
          return this.parentRefs;
        }
      }]);

      return FindLocalNeighbourhoodResult;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var GetPolyWallSegmentsResult = /*#__PURE__*/function () {
      function GetPolyWallSegmentsResult(segmentVerts, segmentRefs) {
        _classCallCheck(this, GetPolyWallSegmentsResult);

        _defineProperty(this, "segmentVerts", []);

        _defineProperty(this, "segmentRefs", []);

        this.segmentVerts = segmentVerts;
        this.segmentRefs = segmentRefs;
      }

      _createClass(GetPolyWallSegmentsResult, [{
        key: "getSegmentVerts",
        value: function getSegmentVerts() {
          return this.segmentVerts;
        }
      }, {
        key: "getSegmentRefs",
        value: function getSegmentRefs() {
          return this.segmentRefs;
        }
      }]);

      return GetPolyWallSegmentsResult;
    }();

    var StraightPathItem = /*#__PURE__*/function () {
      function StraightPathItem(pos, flags, ref) {
        _classCallCheck(this, StraightPathItem);

        _defineProperty(this, "pos", []);

        _defineProperty(this, "flags", 0);

        _defineProperty(this, "ref", 0);

        this.pos = DetourCommon.vCopy_return(pos);
        this.flags = flags;
        this.ref = ref;
      }

      _createClass(StraightPathItem, [{
        key: "getPos",
        value: function getPos() {
          return this.pos;
        }
      }, {
        key: "getFlags",
        value: function getFlags() {
          return this.flags;
        }
      }, {
        key: "getRef",
        value: function getRef() {
          return this.ref;
        }
      }]);

      return StraightPathItem;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var MoveAlongSurfaceResult = /*#__PURE__*/function () {
      /** The result position of the mover. [(x, y, z)] */

      /** The reference ids of the polygons visited during the move. */
      function MoveAlongSurfaceResult(resultPos, visited) {
        _classCallCheck(this, MoveAlongSurfaceResult);

        _defineProperty(this, "resultPos", []);

        _defineProperty(this, "visited", []);

        this.resultPos = resultPos;
        this.visited = visited;
      }

      _createClass(MoveAlongSurfaceResult, [{
        key: "getResultPos",
        value: function getResultPos() {
          return this.resultPos;
        }
      }, {
        key: "getVisited",
        value: function getVisited() {
          return this.visited;
        }
      }]);

      return MoveAlongSurfaceResult;
    }();

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */

    /**
     * Provides information about raycast hit. Filled by NavMeshQuery::raycast
     */
    var RaycastHit = function RaycastHit() {
      _classCallCheck(this, RaycastHit);

      _defineProperty(this, "t", 0);

      _defineProperty(this, "hitNormal", new Array(3));

      _defineProperty(this, "path", []);

      _defineProperty(this, "pathCost", 0);

      _defineProperty(this, "hitEdgeIndex", 0);
    };

    var _temp$3;

    function or(v1, v2) {
      var hi = 0x80000000;
      var low = 0x7fffffff;
      var hi1 = ~~(v1 / hi);
      var hi2 = ~~(v2 / hi);
      var low1 = v1 & low;
      var low2 = v2 & low;
      var h = hi1 | hi2;
      var l = low1 | low2;
      return h * hi + l;
    }

    var PortalResult = function PortalResult(left, right, fromType, toType) {
      _classCallCheck(this, PortalResult);

      _defineProperty(this, "left", void 0);

      _defineProperty(this, "right", void 0);

      _defineProperty(this, "fromType", void 0);

      _defineProperty(this, "toType", void 0);

      this.left = left;
      this.right = right;
      this.fromType = fromType;
      this.toType = toType;
    };

    function arraycopy$4(one, oneStart, two, twoStart, len) {
      for (var i = 0; i < len; i++) {
        two[twoStart + i] = one[oneStart + i];
      }
    }

    var NavMeshQuery = /*#__PURE__*/function () {
      /**
       * Use raycasts during pathfind to "shortcut" (raycast still consider costs)
       * Options for NavMeshQuery::initSlicedFindPath and updateSlicedFindPath
       */

      /** Raycast should calculate movement cost aPoly the ray and fill RaycastHit::cost */
      /// Vertex flags returned by findStraightPath.

      /** The vertex is the start position in the path. */

      /** The vertex is the end position in the path. */

      /** The vertex is the start of an off-mesh connection. */
      /// Options for findStraightPath.
      ///< Add a vertex at every polygon edge crossing where area changes.
      ///< Add a vertex at every polygon edge crossing.
      // Search heuristic scale.
      /// < Sliced query state.
      function NavMeshQuery(nav) {
        _classCallCheck(this, NavMeshQuery);

        _defineProperty(this, "m_nav", void 0);

        _defineProperty(this, "m_nodePool", void 0);

        _defineProperty(this, "m_tinyNodePool", void 0);

        _defineProperty(this, "m_openList", void 0);

        _defineProperty(this, "m_query", void 0);

        this.m_nav = nav;
        this.m_nodePool = new NodePool();
        this.m_tinyNodePool = new NodePool();
        this.m_openList = new NodeQueue();
      }

      _createClass(NavMeshQuery, [{
        key: "findRandomPoint",

        /**
         * Returns random location on navmesh.
         * Polygons are chosen weighted by area. The search runs in linear related to number of polygon.
         * @param filter The polygon filter to apply to the query.
         * @param frand Function returning a random number [0..1).
         * @return Random location
         */
        value: function findRandomPoint(filter, frand) {
          // Randomly pick one tile. Assume that all tiles cover roughly the same area.
          tile = null;
          tsum = 0.0;

          for (var i = 0; i < this.m_nav.getMaxTiles(); i++) {
            var _t = this.m_nav.getTile(i);

            if (_t == null || _t.data == null || _t.data.header == null) continue; // Choose random tile using reservoi sampling.

            area = 1.0; // Could be tile area too.

            tsum += area;
            u = frand.frand();
            if (u * tsum <= area) tile = _t;
          }

          if (tile == null) return new FindRandomPointResult(Status.FAILURE, 0, null); // Randomly pick one polygon weighted by polygon area.

          var poly = null;
          var polyRef = 0;
          var base = this.m_nav.getPolyRefBase(tile);
          areaSum = 0.0;

          for (var _i = 0; _i < tile.data.header.polyCount; ++_i) {
            var p = tile.data.polys[_i]; // Do not return off-mesh connection polygons.

            if (p.getType() != Poly.DT_POLYTYPE_GROUND) continue; // Must pass filter

            var ref = this.or(base, _i);
            if (!filter.passFilter(ref, tile, p)) continue; // Calc area of the polygon.

            polyArea = 0.0;

            for (var j = 2; j < p.vertCount; ++j) {
              var va = p.verts[0] * 3;
              var vb = p.verts[j - 1] * 3;
              var vc = p.verts[j] * 3;
              polyArea += DetourCommon.triArea2D4(tile.data.verts, va, vb, vc);
            } // Choose random polygon weighted by area, using reservoi sampling.


            areaSum += polyArea;
            u = frand.frand();

            if (u * areaSum <= polyArea) {
              poly = p;
              polyRef = ref;
            }
          }

          if (poly == null) return new FindRandomPointResult(Status.FAILURE, 0, null); // Randomly pick poPoly on polygon.

          var verts = new Array(3 * this.m_nav.getMaxVertsPerPoly());
          var areas = new Array(this.m_nav.getMaxVertsPerPoly());
          arraycopy$4(tile.data.verts, poly.verts[0] * 3, verts, 0, 3);

          for (var _j = 1; _j < poly.vertCount; ++_j) {
            arraycopy$4(tile.data.verts, poly.verts[_j] * 3, verts, _j * 3, 3);
          }

          s = frand.frand();
          t = frand.frand();
          var pt = DetourCommon.randomPointInConvexPoly(verts, poly.vertCount, areas, s, t);
          pt[1] = getPolyHeight(polyRef, pt);
          return new FindRandomPointResult(Status.SUCCSESS, polyRef, pt);
        }
        /**
         * Returns random location on navmesh within the reach of specified location.
         * Polygons are chosen weighted by area. The search runs in linear related to number of polygon.
         * The location is not exactly constrained by the circle, but it limits the visited polygons.
         * 
         * @param startRef The reference id of the polygon where the search starts.
         * @param centerPos The center of the search circle. [(x, y, z)]
         * @param maxRadius 
         * @param filter The polygon filter to apply to the query.
         * @param frand Function returning a random number [0..1).
         * @return Random location
         */

      }, {
        key: "findRandomPointAroundCircle",
        value: function findRandomPointAroundCircle(startRef, centerPos, maxRadius, filter, frand) {
          // Validate input
          if (startRef == 0 || !this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(startRef);
          var startTile = tileAndPoly[0];
          var startPoly = tileAndPoly[1];
          if (!filter.passFilter(startRef, startTile, startPoly)) throw new IllegalArgumentException("Invalid start");
          m_nodePool = [];
          this.m_openList = [];
          var startNode = m_nodePool.getNode(startRef);
          DetourCommon.vCopy(startNode.pos, centerPos);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = 0;
          startNode.id = startRef;
          startNode.flags = DT_NODE_OPEN;
          this.m_openList.push(startNode);
          radiusSqr = maxRadius * maxRadius;
          areaSum = 0.0;
          var randomTile = null;
          var randomPoly = null;
          var randomPolyRef = 0;

          while (!this.m_openList.length == 0) {
            var bestNode = this.m_openList.pop();
            bestNode.flags &= ~DT_NODE_OPEN;
            bestNode.flags |= DT_NODE_CLOSED; // Get let and tile.
            // The API input has been cheked already, skip checking internal data.

            var bestRef = bestNode.id;
            var bestTilePoly = this.m_nav.getTileAndPolyByRefUnsafe(bestRef);
            var bestTile = bestTilePoly[0];
            var bestPoly = bestTilePoly[1]; // Place random locations on on ground.

            if (bestPoly.getType() == Poly.DT_POLYTYPE_GROUND) {
              // Calc area of the polygon.
              polyArea = 0.0;

              for (var j = 2; j < bestPoly.vertCount; ++j) {
                var va = bestPoly.verts[0] * 3;
                var vb = bestPoly.verts[j - 1] * 3;
                var vc = bestPoly.verts[j] * 3;
                polyArea += DetourCommon.triArea2D4(bestTile.data.verts, va, vb, vc);
              } // Choose random polygon weighted by area, using reservoi sampling.


              areaSum += polyArea;
              u = frand.frand();

              if (u * areaSum <= polyArea) {
                randomTile = bestTile;
                randomPoly = bestPoly;
                randomPolyRef = bestRef;
              }
            } // Get parent let and tile.


            var parentRef = 0;
            if (bestNode.pidx != 0) parentRef = m_nodePool.getNodeAtIdx(bestNode.pidx).id;

            if (parentRef != 0) {
              var parentTilePoly = this.m_nav.getTileAndPolyByRefUnsafe(parentRef);
              var parentTile = parentTilePoly[0];
              var parentPoly = parentTilePoly[1];
            }

            for (var i = bestPoly.firstLink; i != NavMesh.DT_NULL_LINK; i = bestTile.links[i].next) {
              var link = bestTile.links[i];
              var neighbourRef = link.ref; // Skip invalid neighbours and do not follow back to parent.

              if (neighbourRef == 0 || neighbourRef == parentRef) continue; // Expand to neighbour

              var neighbourTilePoly = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = neighbourTilePoly[0];
              var neighbourPoly = neighbourTilePoly[1]; // Do not advance if the polygon is excluded by the filter.

              if (!filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue; // Find edge and calc distance to the edge.

              var portalpoints = this.getPortalPoints7(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile, 0, 0);
              var _va = portalpoints.left;
              var _vb = portalpoints.right; // If the circle is not touching the next polygon, skip it.

              var distseg = DetourCommon.distancePtSegSqr2D3(centerPos, _va, _vb);
              distSqr = distseg[0];
              if (distSqr > radiusSqr) continue;
              var neighbourNode = m_nodePool.getNode(neighbourRef);
              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0) continue; // Cost

              if (neighbourNode.flags == 0) neighbourNode.pos = DetourCommon.vLerp3(_va, _vb, 0.5);
              total = bestNode.total + DetourCommon.vDist2(bestNode.pos, neighbourNode.pos); // The node is already in open list and the new result is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0 && total >= neighbourNode.total) continue;
              neighbourNode.id = neighbourRef;
              neighbourNode.flags = neighbourNode.flags & ~Node.DT_NODE_CLOSED;
              neighbourNode.pidx = m_nodePool.getNodeIdx(bestNode);
              neighbourNode.total = total;

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0) {
                this.m_openList.modify(neighbourNode);
              } else {
                neighbourNode.flags = Node.DT_NODE_OPEN;
                this.m_openList.push(neighbourNode);
              }
            }
          }

          if (randomPoly == null) return new FindRandomPointResult(Status.FAILURE, 0, null); // Randomly pick poPoly on polygon.

          var verts = new Array(3 * this.m_nav.getMaxVertsPerPoly());
          var areas = new Array(this.m_nav.getMaxVertsPerPoly());
          arraycopy$4(randomTile.data.verts, randomPoly.verts[0] * 3, verts, 0, 3);

          for (var _j2 = 1; _j2 < randomPoly.vertCount; ++_j2) {
            arraycopy$4(randomTile.data.verts, randomPoly.verts[_j2] * 3, verts, _j2 * 3, 3);
          }

          s = frand.frand();
          t = frand.frand();
          var pt = DetourCommon.randomPointInConvexPoly(verts, randomPoly.vertCount, areas, s, t);
          pt[1] = getPolyHeight(randomPolyRef, pt);
          return new FindRandomPointResult(Status.SUCCSESS, randomPolyRef, pt);
        } //////////////////////////////////////////////////////////////////////////////////////////
        /// @par
        ///
        /// Uses the detail polygons to find the surface height. (Most accurate.)
        ///
        /// @p pos does not have to be within the bounds of the polygon or navigation mesh.
        ///
        /// See closestPointOnPolyBoundary() for a limited but faster option.
        ///
        /// Finds the closest poPoly on the specified polygon.
        ///  @param[in]		ref			The reference id of the polygon.
        ///  @param[in]		pos			The position to check. [(x, y, z)]
        ///  @param[out]	closest		
        ///  @param[out]	posOverPoly	
        /// @returns The status flags for the query.

      }, {
        key: "closestPointOnPoly",
        value: function closestPointOnPoly(ref, pos) {
          var tileAndPoly = this.m_nav.getTileAndPolyByRef(ref);
          var tile = tileAndPoly[0];
          var poly = tileAndPoly[1]; // Off-mesh connections don't have detail polygons.

          if (poly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) {
            var _v = poly.verts[0] * 3;

            var _v2 = poly.verts[1] * 3;

            var _d = DetourCommon.vDist3(pos, tile.data.verts, _v);

            var _d2 = DetourCommon.vDist3(pos, tile.data.verts, _v2);

            var _u = _d / (_d + _d2);

            var _closest = DetourCommon.vLerp4(tile.data.verts, _v, _v2, _u);

            return new ClosesPointOnPolyResult(false, _closest);
          } // Clamp poPoly to be inside the polygon.


          var verts = new Array(this.m_nav.getMaxVertsPerPoly() * 3);
          var edged = new Array(this.m_nav.getMaxVertsPerPoly());
          var edget = new Array(this.m_nav.getMaxVertsPerPoly());
          var nv = poly.vertCount;

          for (var i = 0; i < nv; ++i) {
            arraycopy$4(tile.data.verts, poly.verts[i] * 3, verts, i * 3, 3);
          }

          var posOverPoly = false;
          var closest = new Array(3);
          DetourCommon.vCopy(closest, pos);

          if (!DetourCommon.distancePtPolyEdgesSqr(pos, verts, nv, edged, edget)) {
            // PoPoly is outside the polygon, dtClamp to nearest edge.
            var dmin = edged[0];
            var imin = 0;

            for (var _i2 = 1; _i2 < nv; ++_i2) {
              if (edged[_i2] < dmin) {
                dmin = edged[_i2];
                imin = _i2;
              }
            }

            var va = imin * 3;
            var vb = (imin + 1) % nv * 3;
            closest = DetourCommon.vLerp4(verts, va, vb, edget[imin]);
            posOverPoly = false;
          } else {
            posOverPoly = true;
          }

          var ip = poly.index;

          if (tile.data.detailMeshes != null && tile.data.detailMeshes.length > ip) {
            var pd = tile.data.detailMeshes[ip]; // Find height at the location.

            for (var j = 0; j < pd.triCount; ++j) {
              var _t2 = (pd.triBase + j) * 4;

              var v = new Array(3); //Was new Array(3)[]

              for (var k = 0; k < 3; ++k) {
                if (tile.data.detailTris[_t2 + k] < poly.vertCount) {
                  var index = poly.verts[tile.data.detailTris[_t2 + k]] * 3;
                  v[k] = [tile.data.verts[index], tile.data.verts[index + 1], tile.data.verts[index + 2]];
                } else {
                  var _index = (pd.vertBase + (tile.data.detailTris[_t2 + k] - poly.vertCount)) * 3;

                  v[k] = [tile.data.detailVerts[_index], tile.data.detailVerts[_index + 1], tile.data.detailVerts[_index + 2]];
                }
              }

              var heightResult = DetourCommon.closestHeightPointTriangle(closest, v[0], v[1], v[2]);

              if (heightResult[0]) {
                closest[1] = heightResult[1];
                break;
              }
            }
          }

          return new ClosestPointOnPolyResult(posOverPoly, closest);
        } /// @par
        ///
        /// Much faster than closestPointOnPoly().
        ///
        /// If the provided position lies within the polygon's xz-bounds (above or below),
        /// then @p pos and @p closest will be equal.
        ///
        /// The height of @p closest will be the polygon boundary. The height detail is not used.
        ///
        /// @p pos does not have to be within the bounds of the polybon or the navigation mesh.
        ///
        /// Returns a poPoly on the boundary closest to the source poPoly if the source poPoly is outside the 
        /// polygon's xz-bounds.
        ///  @param[in]		ref			The reference id to the polygon.
        ///  @param[in]		pos			The position to check. [(x, y, z)]
        ///  @param[out]	closest		The closest point. [(x, y, z)]
        /// @returns The status flags for the query.

      }, {
        key: "closestPointOnPolyBoundary",
        value: function closestPointOnPolyBoundary(ref, pos) {
          var tileAndPoly = this.m_nav.getTileAndPolyByRef(ref);
          var tile = tileAndPoly[0];
          var poly = tileAndPoly[1]; // Collect vertices.

          var verts = new Array(this.m_nav.getMaxVertsPerPoly() * 3);
          var edged = new Array(this.m_nav.getMaxVertsPerPoly());
          var edget = new Array(this.m_nav.getMaxVertsPerPoly());
          var nv = poly.vertCount;

          for (var i = 0; i < nv; ++i) {
            arraycopy$4(tile.data.verts, poly.verts[i] * 3, verts, i * 3, 3);
          }

          var closest;

          if (DetourCommon.distancePtPolyEdgesSqr(pos, verts, nv, edged, edget)) {
            closest = DetourCommon.vCopy_return(pos);
          } else {
            // PoPoly is outside the polygon, dtClamp to nearest edge.
            var dmin = edged[0];
            var imin = 0;

            for (var _i3 = 1; _i3 < nv; ++_i3) {
              if (edged[_i3] < dmin) {
                dmin = edged[_i3];
                imin = _i3;
              }
            }

            var va = imin * 3;
            var vb = (imin + 1) % nv * 3;
            closest = DetourCommon.vLerp4(verts, va, vb, edget[imin]);
          }

          return closest;
        } /// @par
        ///
        /// Will return #DT_FAILURE if the provided position is outside the xz-bounds
        /// of the polygon.
        ///
        /// Gets the height of the polygon at the provided position using the height detail. (Most accurate.)
        ///  @param[in]		ref			The reference id of the polygon.
        ///  @param[in]		pos			A position within the xz-bounds of the polygon. [(x, y, z)]
        ///  @param[out]	height		The height at the surface of the polygon.
        /// @returns The status flags for the query.

      }, {
        key: "getPolyHeight",
        value: function getPolyHeight(ref, pos) {
          var tileAndPoly = this.m_nav.getTileAndPolyByRef(ref);
          var tile = tileAndPoly[0];
          var poly = tileAndPoly[1];

          if (poly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) {
            var i = poly.verts[0] * 3;
            i = poly.verts[1] * 3;
            letv1 = [tile.data.verts[i], tile.data.verts[i + 1], tile.data.verts[i + 2]];
            d0 = DetourCommon.vDist2D(pos, v0);
            d1 = DetourCommon.vDist2D(pos, v1);
            u = d0 / (d0 + d1);
            return v0[1] + (v1[1] - v0[1]) * u;
          } else {
            var ip = poly.index;
            var pd = tile.data.detailMeshes[ip];

            for (var j = 0; j < pd.triCount; ++j) {
              var _t3 = (pd.triBase + j) * 4;

              var v = new Array(3); //new Array(3)[];

              for (var k = 0; k < 3; ++k) {
                if (tile.data.detailTris[_t3 + k] < poly.vertCount) {
                  var index = poly.verts[tile.data.detailTris[_t3 + k]] * 3;
                  v[k] = [tile.data.verts[index], tile.data.verts[index + 1], tile.data.verts[index + 2]];
                } else {
                  var _index2 = (pd.vertBase + (tile.data.detailTris[_t3 + k] - poly.vertCount)) * 3;

                  v[k] = [tile.data.detailVerts[_index2], tile.data.detailVerts[_index2 + 1], tile.data.detailVerts[_index2 + 2]];
                }
              }

              var heightResult = DetourCommon.closestHeightPointTriangle(pos, v[0], v[1], v[2]);

              if (heightResult[0]) {
                return heightResult[1];
              }
            }
          }

          throw new IllegalArgumentException("Invalid ref " + ref + " pos " + Arrays.toString(pos));
        } /// @par
        ///
        /// @note If the search box does not intersect any polygons the search will
        /// return #DT_SUCCESS, but @p nearestRef will be zero. So if in doubt, check
        /// @p nearestRef before using @p nearestPt.
        ///
        /// @}
        /// @name Local Query Functions
        ///@{
        /// Finds the polygon nearest to the specified center point.
        ///  @param[in]		center		The center of the search box. [(x, y, z)]
        ///  @param[in]		extents		The search distance aPoly each axis. [(x, y, z)]
        ///  @param[in]		filter		The polygon filter to apply to the query.
        /// @returns The status flags for the query.

      }, {
        key: "findNearestPoly",
        value: function findNearestPoly(center, extents, filter) {
          var nearestPt = null; // Get nearby polygons from proximity grid.

          var polys = this.queryPolygons(center, extents, filter); // Find nearest polygon amongst the nearby polygons.

          var nearest = 0;
          var nearestDistanceSqr = Number.MAX_VALUE;

          for (var i = 0; i < polys.length; ++i) {
            var ref = polys[i];
            var closest = this.closestPointOnPoly(ref, center);
            var posOverPoly = closest.isPosOverPoly();
            var closestPtPoly = closest.getClosest(); // If a poPoly is directly over a polygon and closer than
            // climb height, favor that instead of straight line nearest point.

            var d = 0;
            var diff = DetourCommon.vSub(center, closestPtPoly);

            if (posOverPoly) {
              var tilaAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(polys[i]);
              var _tile = tilaAndPoly[0];
              d = Math.abs(diff[1]) - _tile.data.header.walkableClimb;
              d = d > 0 ? d * d : 0;
            } else {
              d = DetourCommon.vLenSqr(diff);
            }

            if (d < nearestDistanceSqr) {
              nearestPt = closestPtPoly;
              nearestDistanceSqr = d;
              nearest = ref;
            }
          }

          return new FindNearestPolyResult(nearest, nearestPt);
        }
      }, {
        key: "and",
        value: function and(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 & hi2;
          var l = low1 & low2;
          return h * hi + l;
        }
      }, {
        key: "or",
        value: function or(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 | hi2;
          var l = low1 | low2;
          return h * hi + l;
        } // FIXME: (PP) duplicate?

      }, {
        key: "queryPolygonsInTile",
        value: function queryPolygonsInTile(tile, qmin, qmax, filter) {
          var polys = [];

          if (tile.data.bvTree != null) {
            var nodeIndex = 0;
            var tbmin = tile.data.header.bmin;
            var tbmax = tile.data.header.bmax;
            var qfac = tile.data.header.bvQuantFactor; // Calculate quantized box

            var bmin = new Array(3);
            var bmax = new Array(3); // dtClamp query box to world box.

            var minx = DetourCommon.clamp(qmin[0], tbmin[0], tbmax[0]) - tbmin[0];
            var miny = DetourCommon.clamp(qmin[1], tbmin[1], tbmax[1]) - tbmin[1];
            var minz = DetourCommon.clamp(qmin[2], tbmin[2], tbmax[2]) - tbmin[2];
            var maxx = DetourCommon.clamp(qmax[0], tbmin[0], tbmax[0]) - tbmin[0];
            var maxy = DetourCommon.clamp(qmax[1], tbmin[1], tbmax[1]) - tbmin[1];
            var maxz = DetourCommon.clamp(qmax[2], tbmin[2], tbmax[2]) - tbmin[2]; // Quantize

            bmin[0] = this.and(Math.floor(qfac * minx), 0xfffe);
            bmin[1] = this.and(Math.floor(qfac * miny), 0xfffe);
            bmin[2] = this.and(Math.floor(qfac * minz), 0xfffe);
            bmax[0] = this.or(Math.floor(qfac * maxx + 1), 1);
            bmax[1] = this.or(Math.floor(qfac * maxy + 1), 1);
            bmax[2] = this.or(Math.floor(qfac * maxz + 1), 1); // Traverse tree

            var base = this.m_nav.getPolyRefBase(tile);
            var end = tile.data.header.bvNodeCount;

            while (nodeIndex < end) {
              var node = tile.data.bvTree[nodeIndex];
              var overlap = DetourCommon.overlapQuantBounds(bmin, bmax, node.bmin, node.bmax);
              var isLeafNode = node.i >= 0;

              if (isLeafNode && overlap) {
                var ref = this.or(base, node.i);

                if (filter.passFilter(ref, tile, tile.data.polys[node.i])) {
                  polys.push(ref);
                }
              }

              if (overlap || isLeafNode) nodeIndex++;else {
                var escapeIndex = -node.i;
                nodeIndex += escapeIndex;
              }
            }

            return polys;
          } else {
            var _bmin = new Array(3);

            var _bmax = new Array(3);

            var _base = this.m_nav.getPolyRefBase(tile);

            for (var i = 0; i < tile.data.header.polyCount; ++i) {
              var p = tile.data.polys[i]; // Do not return off-mesh connection polygons.

              if (p.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) continue;

              var _ref = _base | i;

              if (!filter.passFilter(_ref, tile, p)) continue; // Calc polygon bounds.

              var v = p.verts[0] * 3;
              DetourCommon.vCopy(_bmin, tile.data.verts, v);
              DetourCommon.vCopy(_bmax, tile.data.verts, v);

              for (var j = 1; j < p.vertCount; ++j) {
                v = p.verts[j] * 3;
                DetourCommon.vMin(_bmin, tile.data.verts, v);
                DetourCommon.vMax(_bmax, tile.data.verts, v);
              }

              if (overlapBounds(qmin, qmax, _bmin, _bmax)) {
                polys.push(_ref);
              }
            }

            return polys;
          }
        }
        /**
         * Finds polygons that overlap the search box.
         * 
         * If no polygons are found, the function will return with a polyCount of zero.
         * 
         * @param center
         *            The center of the search box. [(x, y, z)]
         * @param extents
         *            The search distance aPoly each axis. [(x, y, z)]
         * @param (filter)
         *            The polygon filter to apply to the query.
         * @return The reference ids of the polygons that overlap the query box.
         */

      }, {
        key: "queryPolygons",
        value: function queryPolygons(center, extents, filter) {
          var bmin = DetourCommon.vSub(center, extents);
          var bmax = DetourCommon.vAdd(center, extents); // Find tiles the query touches.

          var minxy = this.m_nav.calcTileLoc(bmin);
          var minx = minxy[0];
          var miny = minxy[1];
          var maxxy = this.m_nav.calcTileLoc(bmax);
          var maxx = maxxy[0];
          var maxy = maxxy[1];
          var polys = [];

          for (var y = miny; y <= maxy; ++y) {
            for (var _x = minx; _x <= maxx; ++_x) {
              var neis = this.m_nav.getTilesAt(_x, y);

              for (var j = 0; j < neis.length; ++j) {
                var polysInTile = this.queryPolygonsInTile(neis[j], bmin, bmax, filter);
                polys.push.apply(polys, _toConsumableArray(polysInTile));
              }
            }
          }

          return polys;
        }
        /**
         * Finds a path from the start polygon to the end polygon.
         * 
         * If the end polygon cannot be reached through the navigation graph, the last polygon in the path will be the
         * nearest the end polygon.
         * 
         * The start and end positions are used to calculate traversal costs. (The y-values impact the result.)
         * 
         * @param startRef
         *            The refrence id of the start polygon.
         * @param endRef
         *            The reference id of the end polygon.
         * @param startPos
         *            A position within the start polygon. [(x, y, z)]
         * @param endPos
         *            A position within the end polygon. [(x, y, z)]
         * @param filter
         *            The polygon filter to apply to the query.
         * @return Found path
         */

      }, {
        key: "findPath",
        value: function findPath(startRef, endRef, startPos, endPos, filter) {
          if (startRef == 0 || endRef == 0) throw new IllegalArgumentException("Start or end ref = 0"); // Validate input

          if (!this.m_nav.isValidPolyRef(startRef) || !this.m_nav.isValidPolyRef(endRef)) throw new IllegalArgumentException("Invalid start or end ref");

          if (startRef == endRef) {
            var _path = new Array(1);

            _path.push(startRef);

            return new FindPathResult(Status.SUCCSESS, _path);
          }

          this.m_nodePool = [];
          this.m_openList = [];
          var startNode = this.m_nodePool.getNode(startRef);
          DetourCommon.vCopy(startNode.pos, startPos);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = DetourCommon.vDist2(startPos, endPos) * NavMeshQuery.H_SCALE;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_OPEN;
          this.m_openList.push(startNode);
          var lastBestNode = startNode;
          lastBestNodeCost = startNode.total;
          var status = Status.SUCCSESS;

          while (!this.m_openList.length == 0) {
            // Remove node from open list and put it in closed list.
            var bestNode = this.m_openList.pop();
            bestNode.flags &= ~Node.DT_NODE_OPEN;
            bestNode.flags |= Node.DT_NODE_CLOSED; // Reached the goal, stop searching.

            if (bestNode.id == endRef) {
              lastBestNode = bestNode;
              break;
            } // Get current let and tile.
            // The API input has been cheked already, skip checking internal data.


            var bestRef = bestNode.id;
            var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(bestRef);
            var bestTile = tileAndPoly[0];
            var bestPoly = tileAndPoly[1]; // Get parent let and tile.

            var parentRef = 0;
            var parentTile = null;
            var parentPoly = null;
            if (bestNode.pidx != 0) parentRef = this.m_nodePool.getNodeAtIdx(bestNode.pidx).id;

            if (parentRef != 0) {
              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(parentRef);
              parentTile = tileAndPoly[0];
              parentPoly = tileAndPoly[1];
            }

            for (var i = bestPoly.firstLink; i != NavMesh.DT_NULL_LINK; i = bestTile.links[i].next) {
              var neighbourRef = bestTile.links[i].ref; // Skip invalid ids and do not expand back to where we came from.

              if (neighbourRef == 0 || neighbourRef == parentRef) continue; // Get neighbour let and tile.
              // The API input has been cheked already, skip checking internal data.

              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = tileAndPoly[0];
              var neighbourPoly = tileAndPoly[1];
              if (!filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue; // deal explicitly with crossing tile boundaries

              var crossSide = 0;
              if (bestTile.links[i].side != 0xff) crossSide = bestTile.links[i].side >> 1; // get the node

              var neighbourNode = this.m_nodePool.getNode(neighbourRef, crossSide); // If the node is visited the first time, calculate node position.

              if (neighbourNode.flags == 0) {
                neighbourNode.pos = this.getEdgeMidPoint6(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile);
              } // Calculate cost and heuristic.


              cost = 0;
              heuristic = 0; // Special case for last node.

              if (neighbourRef == endRef) {
                // Cost
                curCost = filter.getCost(bestNode.pos, neighbourNode.pos, parentRef, parentTile, parentPoly, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly);
                var endCost = filter.getCost(neighbourNode.pos, endPos, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly, 0, null, null);
                cost = bestNode.cost + curCost + endCost;
                heuristic = 0;
              } else {
                // Cost
                curCost = filter.getCost(bestNode.pos, neighbourNode.pos, parentRef, parentTile, parentPoly, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly);
                cost = bestNode.cost + curCost;
                heuristic = DetourCommon.vDist2(neighbourNode.pos, endPos) * NavMeshQuery.H_SCALE;
              }

              total = cost + heuristic; // The node is already in open list and the new result is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0 && total >= neighbourNode.total) continue; // The node is already visited and process, and the new result is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0 && total >= neighbourNode.total) continue; // Add or update the node.

              neighbourNode.pidx = this.m_nodePool.getNodeIdx(bestNode);
              neighbourNode.id = neighbourRef;
              neighbourNode.flags = neighbourNode.flags & ~Node.DT_NODE_CLOSED;
              neighbourNode.cost = cost;
              neighbourNode.total = total;

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0) {
                // Already in open, update node location.
                this.m_openList.modify(neighbourNode);
              } else {
                // Put the node in open list.
                neighbourNode.flags |= Node.DT_NODE_OPEN;
                this.m_openList.push(neighbourNode);
              } // Update nearest node to target so far.


              if (heuristic < lastBestNodeCost) {
                lastBestNodeCost = heuristic;
                lastBestNode = neighbourNode;
              }
            }
          }

          var path = getPathToNode(lastBestNode);
          if (lastBestNode.id != endRef) status = Status.PARTIAL_RESULT;
          return new FindPathResult(status, path);
        }
        /**
         * Intializes a sliced path query.
         * 
         * Common use case: -# Call initSlicedFindPath() to initialize the sliced path query. -# Call updateSlicedFindPath()
         * until it returns compPolye. -# Call finalizeSlicedFindPath() to get the path.
         * 
         * @param startRef
         *            The reference id of the start polygon.
         * @param endRef
         *            The reference id of the end polygon.
         * @param startPos
         *            A position within the start polygon. [(x, y, z)]
         * @param endPos
         *            A position within the end polygon. [(x, y, z)]
         * @param filter
         *            The polygon filter to apply to the query.
         * @param options
         *            query options (see: #FindPathOptions)
         * @return
         */

      }, {
        key: "initSlicedFindPath",
        value: function initSlicedFindPath(startRef, endRef, startPos, endPos, filter, options) {
          // Init path state.
          this.m_query = new QueryData();
          this.m_query.status = Status.FAILURE;
          this.m_query.startRef = startRef;
          this.m_query.endRef = endRef;
          DetourCommon.vCopy(this.m_query.startPos, startPos);
          DetourCommon.vCopy(this.m_query.endPos, endPos);
          this.m_query.filter = filter;
          this.m_query.options = options;
          this.m_query.raycastLimitSqr = Number.MAX_VALUE;
          if (startRef == 0 || endRef == 0) throw new IllegalArgumentException("Start or end ref = 0"); // Validate input

          if (!this.m_nav.isValidPolyRef(startRef) || !this.m_nav.isValidPolyRef(endRef)) throw new IllegalArgumentException("Invalid start or end ref"); // trade quality with performance?

          if ((options & NavMeshQuery.DT_FINDPATH_ANY_ANGLE) != 0) {
            // limiting to several times the character radius yields nice results. It is not sensitive
            // so it is enough to compute it from the first tile.
            var _tile2 = this.m_nav.getTileByRef(startRef);

            agentRadius = _tile2.data.header.walkableRadius;
            this.m_query.raycastLimitSqr = DetourCommon.sqr(agentRadius * NavMesh.DT_RAY_CAST_LIMIT_PROPORTIONS);
          }

          if (startRef == endRef) {
            this.m_query.status = Status.SUCCSESS;
            return Status.SUCCSESS;
          }

          this.m_nodePool.clear();
          this.m_openList.clear();
          var startNode = this.m_nodePool.getNode(startRef);
          DetourCommon.vCopy(startNode.pos, startPos);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = DetourCommon.vDist2(startPos, endPos) * NavMeshQuery.H_SCALE;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_OPEN;
          this.m_openList.push(startNode);
          this.m_query.status = Status.IN_PROGRESS;
          this.m_query.lastBestNode = startNode;
          this.m_query.lastBestNodeCost = startNode.total;
          return this.m_query.status;
        }
        /**
         * Updates an in-progress sliced path query.
         * 
         * @param maxIter
         *            The maximum number of iterations to perform.
         * @return The status flags for the query.
         */

      }, {
        key: "updateSlicedFindPath",
        value: function updateSlicedFindPath(maxIter) {
          if (this.m_query.status != Status.IN_PROGRESS) return new UpdateSlicedPathResult(this.m_query.status, 0); // Make sure the request is still valid.

          if (!this.m_nav.isValidPolyRef(this.m_query.startRef) || !this.m_nav.isValidPolyRef(this.m_query.endRef)) {
            this.m_query.status = Status.FAILURE;
            return new UpdateSlicedPathResult(this.m_query.status, 0);
          }

          var iter = 0;

          while (iter < maxIter && !this.m_openList.isEmpty()) {
            iter++; // Remove node from open list and put it in closed list.

            var bestNode = this.m_openList.pop();
            bestNode.flags &= ~Node.DT_NODE_OPEN;
            bestNode.flags |= Node.DT_NODE_CLOSED; // Reached the goal, stop searching.

            if (bestNode.id == this.m_query.endRef) {
              this.m_query.lastBestNode = bestNode;
              this.m_query.status = Status.SUCCSESS;
              return new UpdateSlicedPathResult(this.m_query.status, iter);
            } // Get current let and tile.
            // The API input has been cheked already, skip checking internal
            // data.


            var bestRef = bestNode.id;
            var tileAndPoly = void 0;

            try {
              tileAndPoly = this.m_nav.getTileAndPolyByRef(bestRef);
            } catch (e) {
              this.m_query.status = Status.FAILURE; // The polygon has disappeared during the sliced query, fail.

              return new UpdateSlicedPathResult(this.m_query.status, iter);
            }

            var bestTile = tileAndPoly[0];
            var bestPoly = tileAndPoly[1]; // Get parent and grand parent let and tile.

            var parentRef = 0,
                grandpaRef = 0;
            var parentTile = null;
            var parentPoly = null;
            var parentNode = null;

            if (bestNode.pidx != 0) {
              parentNode = this.m_nodePool.getNodeAtIdx(bestNode.pidx);
              parentRef = parentNode.id;
              if (parentNode.pidx != 0) grandpaRef = this.m_nodePool.getNodeAtIdx(parentNode.pidx).id;
            }

            if (parentRef != 0) {
              var invalidParent = false;

              try {
                tileAndPoly = this.m_nav.getTileAndPolyByRef(parentRef);
                parentTile = tileAndPoly[0];
                parentPoly = tileAndPoly[1];
              } catch (e) {
                invalidParent = true;
              }

              if (invalidParent || grandpaRef != 0 && !this.m_nav.isValidPolyRef(grandpaRef)) {
                // The polygon has disappeared during the sliced query,
                // fail.
                this.m_query.status = Status.FAILURE;
                return new UpdateSlicedPathResult(this.m_query.status, iter);
              }
            } // decide whether to test raycast to previous nodes


            var tryLOS = false;

            if ((this.m_query.options & NavMeshQuery.DT_FINDPATH_ANY_ANGLE) != 0) {
              if (parentRef != 0 && DetourCommon.vDistSqr(parentNode.pos, bestNode.pos) < this.m_query.raycastLimitSqr) tryLOS = true;
            }

            for (var i = bestPoly.firstLink; i != NavMesh.DT_NULL_LINK; i = bestTile.links[i].next) {
              var neighbourRef = bestTile.links[i].ref; // bestTile.links.forEach(z=>console.log(z.ref));
              // Skip invalid ids and do not expand back to where we came
              // from.

              if (neighbourRef == 0 || neighbourRef == parentRef) continue; // Get neighbour let and tile.
              // The API input has been cheked already, skip checking internal
              // data.

              var tileAndPolyUns = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = tileAndPolyUns[0];
              var neighbourPoly = tileAndPolyUns[1];
              if (!this.m_query.filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue; // get the neighbor node

              var neighbourNode = this.m_nodePool.getNode(neighbourRef, 0); // do not expand to nodes that were already visited from the
              // same parent

              if (neighbourNode.pidx != 0 && neighbourNode.pidx == bestNode.pidx) continue; // If the node is visited the first time, calculate node
              // position.

              if (neighbourNode.flags == 0) {
                neighbourNode.pos = this.getEdgeMidPoint6(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile);
              } // Calculate cost and heuristic.


              var _cost = 0;
              var _heuristic = 0; // raycast parent

              var foundShortCut = false;

              if (tryLOS) {
                var rayHit = raycast(parentRef, parentNode.pos, neighbourNode.pos, this.m_query.filter, NavMeshQuery.DT_RAYCAST_USE_COSTS, grandpaRef);
                foundShortCut = rayHit.t >= 1.0;

                if (foundShortCut) {
                  // shortcut found using raycast. Using shorter cost
                  // instead
                  _cost = parentNode.cost + rayHit.pathCost;
                }
              } // update move cost


              if (!foundShortCut) {
                // No shortcut found.
                var _curCost = this.m_query.filter.getCost(bestNode.pos, neighbourNode.pos, parentRef, parentTile, parentPoly, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly);

                _cost = bestNode.cost + _curCost;
              } // Special case for last node.


              if (neighbourRef == this.m_query.endRef) {
                var endCost = this.m_query.filter.getCost(neighbourNode.pos, this.m_query.endPos, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly, 0, null, null);
                _cost = _cost + endCost;
                _heuristic = 0;
              } else {
                _heuristic = DetourCommon.vDist2(neighbourNode.pos, this.m_query.endPos) * NavMeshQuery.H_SCALE;
              }

              var _total = _cost + _heuristic; // The node is already in open list and the new result is worse,
              // skip.


              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0 && _total >= neighbourNode.total) continue; // The node is already visited and process, and the new result
              // is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0 && _total >= neighbourNode.total) continue; // Add or update the node.

              neighbourNode.pidx = foundShortCut ? bestNode.pidx : this.m_nodePool.getNodeIdx(bestNode);
              neighbourNode.id = neighbourRef;
              neighbourNode.flags = this.and(neighbourNode.flags, ~this.or(Node.DT_NODE_CLOSED, Node.DT_NODE_PARENT_DETACHED));
              neighbourNode.cost = _cost;
              neighbourNode.total = _total;
              if (foundShortCut) neighbourNode.flags = this.or(neighbourNode.flags, Node.DT_NODE_PARENT_DETACHED);

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0) {
                // Already in open, update node location.
                this.m_openList.modify(neighbourNode);
              } else {
                // Put the node in open list.
                neighbourNode.flags |= Node.DT_NODE_OPEN;
                this.m_openList.push(neighbourNode);
              } // Update nearest node to target so far.


              if (_heuristic < this.m_query.lastBestNodeCost) {
                this.m_query.lastBestNodeCost = _heuristic;
                this.m_query.lastBestNode = neighbourNode;
              }
            }
          } // Exhausted all nodes, but could not find path.


          if (this.m_openList.isEmpty()) {
            this.m_query.status = Status.PARTIAL_RESULT;
          }

          return new UpdateSlicedPathResult(this.m_query.status, iter);
        } /// Finalizes and returns the results of a sliced path query.
        ///  @param[out]	path		An ordered list of polygon references representing the path. (Start to end.) 
        ///  							[(polyRef) * @p pathCount]
        /// @returns The status flags for the query.

      }, {
        key: "finalizeSlicedFindPath",
        value: function finalizeSlicedFindPath() {
          var path = [];

          if (this.m_query.status == Status.FAILURE) {
            // Reset query.
            this.m_query = new QueryData();
            return new FindPathResult(Status.FAILURE, path);
          }

          if (this.m_query.startRef == this.m_query.endRef) {
            // Special case: the search starts and ends at same poly.
            path.push(this.m_query.startRef);
          } else {
            // Reverse the path.
            if (this.m_query.lastBestNode.id != this.m_query.endRef) this.m_query.status = Status.PARTIAL_RESULT;
            var prev = null;
            var node = this.m_query.lastBestNode;
            var prevRay = 0;

            do {
              var next = this.m_nodePool.getNodeAtIdx(node.pidx);
              node.pidx = this.m_nodePool.getNodeIdx(prev);
              prev = node;
              var nextRay = node.flags & Node.DT_NODE_PARENT_DETACHED; // keep track of whether parent is not adjacent (i.e. due to raycast shortcut)

              node.flags = this.or(this.and(node.flags, ~Node.DT_NODE_PARENT_DETACHED), prevRay); // and store it in the reversed path's node

              prevRay = nextRay;
              node = next;
            } while (node != null); // Store path


            node = prev;

            do {
              var _next = this.m_nodePool.getNodeAtIdx(node.pidx);

              if ((node.flags & Node.DT_NODE_PARENT_DETACHED) != 0) {
                var iresult = raycast(node.id, node.pos, _next.pos, this.m_query.filter, 0, 0);
                path.addAll(iresult.path); // raycast ends on let boundary and the path might include the next let boundary.

                if (path[path.length - 1] == _next.id) path.remove(path.length - 1); // remove to aduplicates
              } else {
                path.push(node.id);
              }

              node = _next;
            } while (node != null);
          }

          var status = this.m_query.status; // Reset query.

          this.m_query = new QueryData();
          return new FindPathResult(status, path);
        } /// Finalizes and returns the results of an incompPolye sliced path query, returning the path to the furthest
        /// polygon on the existing path that was visited during the search.
        ///  @param[in]		existing		An array of polygon references for the existing path.
        ///  @param[in]		existingSize	The number of polygon in the @p existing array.
        ///  @param[out]	path			An ordered list of polygon references representing the path. (Start to end.) 
        ///  								[(polyRef) * @p pathCount]
        /// @returns The status flags for the query.

      }, {
        key: "finalizeSlicedFindPathPartial",
        value: function finalizeSlicedFindPathPartial(existing) {
          var path = [];

          if (existing.length == 0) {
            return new FindPathResult(Status.FAILURE, path);
          }

          if (this.m_query.status == Status.FAILURE) {
            // Reset query.
            this.m_query = new QueryData();
            return new FindPathResult(Status.FAILURE, path);
          }

          if (this.m_query.startRef == this.m_query.endRef) {
            // Special case: the search starts and ends at same poly.
            path.push(this.m_query.startRef);
          } else {
            // Find furthest existing node that was visited.
            var prev = null;
            var node = null;

            for (var i = existing.length - 1; i >= 0; --i) {
              node = this.m_nodePool.findNode(existing[i]);
              if (node != null) break;
            }

            if (node == null) {
              this.m_query.status = Status.PARTIAL_RESULT;
              node = this.m_query.lastBestNode;
            } // Reverse the path.


            var prevRay = 0;

            do {
              var next = this.m_nodePool.getNodeAtIdx(node.pidx);
              node.pidx = this.m_nodePool.getNodeIdx(prev);
              prev = node;
              var nextRay = this.and(node.flags, Node.DT_NODE_PARENT_DETACHED); // keep track of whether parent is not adjacent (i.e. due to raycast shortcut)

              node.flags = this.or(this.and(node.flags & ~Node.DT_NODE_PARENT_DETACHED), prevRay); // and store it in the reversed path's node

              prevRay = nextRay;
              node = next;
            } while (node != null); // Store path


            node = prev;

            do {
              var _next2 = this.m_nodePool.getNodeAtIdx(node.pidx);

              if ((node.flags & Node.DT_NODE_PARENT_DETACHED) != 0) {
                var iresult = raycast(node.id, node.pos, _next2.pos, this.m_query.filter, 0, 0);
                path.addAll(iresult.path); // raycast ends on let boundary and the path might include the next let boundary.

                if (path[path.length - 1] == _next2.id) path.remove(path.length - 1); // remove to aduplicates
              } else {
                path.push(node.id);
              }

              node = _next2;
            } while (node != null);
          }

          var status = this.m_query.status; // Reset query.

          this.m_query = new QueryData();
          return new FindPathResult(status, path);
        }
      }, {
        key: "appendVertex",
        value: function appendVertex(pos, flags, ref, straightPath, maxStraightPath) {
          if (straightPath.length > 0 && DetourCommon.vEqual(straightPath[straightPath.length - 1].pos, pos)) {
            // The vertices are equal, update flags and poly.
            straightPath[straightPath.length - 1].flags = flags;
            straightPath[straightPath.length - 1].ref = ref;
          } else {
            if (straightPath.length < maxStraightPath) {
              // Append new vertex.
              straightPath.push(new StraightPathItem(pos, flags, ref));
            } // If reached end of path or there is no space to append more vertices, return.


            if (flags == NavMeshQuery.DT_STRAIGHTPATH_END || straightPath.length >= maxStraightPath) {
              return Status.SUCCSESS;
            }
          }

          return Status.IN_PROGRESS;
        }
      }, {
        key: "appendPortals",
        value: function appendPortals(startIdx, endIdx, endPos, path, straightPath, maxStraightPath, options) {
          var startPos = straightPath[straightPath.length - 1].pos; // Append or update last vertex

          var stat = null;

          for (var i = startIdx; i < endIdx; i++) {
            // Calculate portal
            var from = path[i];
            var tileAndPoly = this.m_nav.getTileAndPolyByRef(from);
            var fromTile = tileAndPoly[0];
            var fromPoly = tileAndPoly[1];
            var to = path[i + 1];
            tileAndPoly = this.m_nav.getTileAndPolyByRef(to);
            var toTile = tileAndPoly[0];
            var toPoly = tileAndPoly[1];
            var portals = this.getPortalPoints7(from, fromPoly, fromTile, to, toPoly, toTile, 0, 0);
            var left = portals.left;
            var right = portals.right;

            if ((options & NavMeshQuery.DT_STRAIGHTPATH_AREA_CROSSINGS) != 0) {
              // Skip intersection if only area crossings are requested.
              if (fromPoly.getArea() == toPoly.getArea()) continue;
            } // Append intersection


            var interect = DetourCommon.intersectSegSeg2D(startPos, endPos, left, right);

            if (interect[0]) {
              t = interect.third;
              var pt = DetourCommon.vLerp3(left, right, t);
              stat = this.appendVertex(pt, 0, path[i + 1], straightPath, maxStraightPath);
              if (!stat == Status.IN_PROGRESS) return stat;
            }
          }

          return Status.IN_PROGRESS;
        } /// @par
        /// Finds the straight path from the start to the end position within the polygon corridor.
        /// 
        /// This method peforms what is often called 'string pulling'.
        ///
        /// The start position is clamped to the first polygon in the path, and the 
        /// end position is clamped to the last. So the start and end positions should 
        /// normally be within or very near the first and last polygons respectively.
        ///
        /// The returned polygon references represent the reference id of the polygon 
        /// that is entered at the associated path position. The reference id associated 
        /// with the end poPoly will always be zero.  This allows, for example, matching 
        /// off-mesh link points to their representative polygons.
        ///
        /// If the provided result buffers are too small for the entire result set, 
        /// they will be filled as far as possible from the start toward the end 
        /// position.
        ///
        ///  @param[in]		startPos			Path start position. [(x, y, z)]
        ///  @param[in]		endPos				Path end position. [(x, y, z)]
        ///  @param[in]		path				An array of polygon references that represent the path corridor.
        ///  @param[out]	straightPath		Points describing the straight path. [(x, y, z) * @p straightPathCount].
        ///  @param[in]		maxStraightPath		The maximum number of points the straight path arrays can hold.  [Limit: > 0]
        ///  @param[in]		options				Query options. (see: #dtStraightPathOptions)
        /// @returns The status flags for the query.

      }, {
        key: "findStraightPath",
        value: function findStraightPath(startPos, endPos, path, maxStraightPath, options) {
          if (path.length == 0) {
            throw new IllegalArgumentException("Empty path");
          } // TODO: Should this be callers responsibility?


          var closestStartPos = this.closestPointOnPolyBoundary(path[0], startPos);
          var closestEndPos = this.closestPointOnPolyBoundary(path[path.length - 1], endPos);
          var straightPath = []; // Add start point.

          var stat = this.appendVertex(closestStartPos, NavMeshQuery.DT_STRAIGHTPATH_START, path[0], straightPath, maxStraightPath);
          if (!stat == Status.IN_PROGRESS) return straightPath;

          if (path.length > 1) {
            var portalApex = DetourCommon.vCopy_return(closestStartPos);
            var portalLeft = DetourCommon.vCopy_return(portalApex);
            var portalRight = DetourCommon.vCopy_return(portalApex);
            var apexIndex = 0;
            var leftIndex = 0;
            var rightIndex = 0;
            var leftPolyType = 0;
            var rightPolyType = 0;
            var leftPolyRef = path[0];
            var rightPolyRef = path[0];

            for (var i = 0; i < path.length; ++i) {
              var left = void 0;
              var right = void 0;
              var toType = void 0;

              if (i + 1 < path.length) {
                // Next portal.
                try {
                  var portalPoints = this.getPortalPoints2(path[i], path[i + 1]);
                  left = portalPoints.left;
                  right = portalPoints.right;
                  toType = portalPoints.toType;
                } catch (e) {
                  closestEndPos = this.closestPointOnPolyBoundary(path[i], endPos); // Append portals aPoly the current straight path segment.

                  if (this.and(options, this.or(NavMeshQuery.DT_STRAIGHTPATH_AREA_CROSSINGS, NavMeshQuery.DT_STRAIGHTPATH_ALL_CROSSINGS)) != 0) {
                    stat = appendPortals(apexIndex, i, closestEndPos, path, straightPath, options, maxStraightPath);
                    if (!stat == Status.IN_PROGRESS) return straightPath;
                  }

                  this.appendVertex(closestEndPos, 0, path[i], straightPath, maxStraightPath);
                  return straightPath;
                } // If starting really close the portal, advance.


                if (i == 0) {
                  var dt = DetourCommon.distancePtSegSqr2D3(portalApex, left, right);
                  if (dt[0] < DetourCommon.sqr(0.001)) continue;
                }
              } else {
                // End of the path.
                left = DetourCommon.vCopy_return(closestEndPos);
                right = DetourCommon.vCopy_return(closestEndPos);
                toType = Poly.DT_POLYTYPE_GROUND;
              } // Right vertex.


              if (DetourCommon.triArea2D3(portalApex, portalRight, right) <= 0.0) {
                if (DetourCommon.vEqual(portalApex, portalRight) || DetourCommon.triArea2D3(portalApex, portalLeft, right) > 0.0) {
                  portalRight = DetourCommon.vCopy_return(right);
                  rightPolyRef = i + 1 < path.length ? path[i + 1] : 0;
                  rightPolyType = toType;
                  rightIndex = i;
                } else {
                  // Append portals aPoly the current straight path segment.
                  if (this.and(options, this.or(NavMeshQuery.DT_STRAIGHTPATH_AREA_CROSSINGS, NavMeshQuery.DT_STRAIGHTPATH_ALL_CROSSINGS)) != 0) {
                    stat = appendPortals(apexIndex, leftIndex, portalLeft, path, straightPath, options, maxStraightPath);
                    if (!stat == Status.IN_PROGRESS) return straightPath;
                  }

                  portalApex = DetourCommon.vCopy_return(portalLeft);
                  apexIndex = leftIndex;
                  var flags = 0;
                  if (leftPolyRef == 0) flags = NavMeshQuery.DT_STRAIGHTPATH_END;else if (leftPolyType == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) flags = NavMeshQuery.DT_STRAIGHTPATH_OFFMESH_CONNECTION;
                  var ref = leftPolyRef; // Append or update vertex

                  stat = this.appendVertex(portalApex, flags, ref, straightPath, maxStraightPath);
                  if (!stat == Status.IN_PROGRESS) return straightPath;
                  portalLeft = DetourCommon.vCopy_return(portalApex);
                  portalRight = DetourCommon.vCopy_return(portalApex);
                  leftIndex = apexIndex;
                  rightIndex = apexIndex; // Restart

                  i = apexIndex;
                  continue;
                }
              } // Left vertex.


              if (DetourCommon.triArea2D3(portalApex, portalLeft, left) >= 0.0) {
                if (DetourCommon.vEqual(portalApex, portalLeft) || DetourCommon.triArea2D3(portalApex, portalRight, left) < 0.0) {
                  portalLeft = DetourCommon.vCopy_return(left);
                  leftPolyRef = i + 1 < path.length ? path[i + 1] : 0;
                  leftPolyType = toType;
                  leftIndex = i;
                } else {
                  // Append portals aPoly the current straight path segment.
                  if (this.and(options & this.or(NavMeshQuery.DT_STRAIGHTPATH_AREA_CROSSINGS, NavMeshQuery.DT_STRAIGHTPATH_ALL_CROSSINGS)) != 0) {
                    stat = appendPortals(apexIndex, rightIndex, portalRight, path, straightPath, options, maxStraightPath);
                    if (!stat == Status.IN_PROGRESS) return straightPath;
                  }

                  portalApex = DetourCommon.vCopy_return(portalRight);
                  apexIndex = rightIndex;
                  var _flags = 0;
                  if (rightPolyRef == 0) _flags = NavMeshQuery.DT_STRAIGHTPATH_END;else if (rightPolyType == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) _flags = NavMeshQuery.DT_STRAIGHTPATH_OFFMESH_CONNECTION;
                  var _ref2 = rightPolyRef; // Append or update vertex

                  stat = this.appendVertex(portalApex, _flags, _ref2, straightPath, maxStraightPath);
                  if (!stat == Status.IN_PROGRESS) return straightPath;
                  portalLeft = DetourCommon.vCopy_return(portalApex);
                  portalRight = DetourCommon.vCopy_return(portalApex);
                  leftIndex = apexIndex;
                  rightIndex = apexIndex; // Restart

                  i = apexIndex;
                  continue;
                }
              }
            } // Append portals aPoly the current straight path segment.


            if (this.and(options & this.or(NavMeshQuery.DT_STRAIGHTPATH_AREA_CROSSINGS, NavMeshQuery.DT_STRAIGHTPATH_ALL_CROSSINGS)) != 0) {
              stat = appendPortals(apexIndex, path.length - 1, closestEndPos, path, straightPath, options, maxStraightPath);
              if (!stat == Status.IN_PROGRESS) return straightPath;
            }
          }

          this.appendVertex(closestEndPos, NavMeshQuery.DT_STRAIGHTPATH_END, 0, straightPath, maxStraightPath);
          return straightPath;
        } /// @par
        ///
        /// This method is optimized for small delta movement and a small number of 
        /// polygons. If used for too great a distance, the result set will form an 
        /// incompPolye path.
        ///
        /// @p resultPos will equal the @p endPos if the end is reached. 
        /// Otherwise the closest reachable position will be returned.
        /// 
        /// @p resultPos is not projected onto the surface of the navigation 
        /// mesh. Use #getPolyHeight if this is needed.
        ///
        /// This method treats the end position in the same manner as 
        /// the #raycast method. (As a 2D point.) See that method's documentation 
        /// for details.
        /// 
        /// If the @p visited array is too small to hold the entire result set, it will 
        /// be filled as far as possible from the start position toward the end 
        /// position.
        ///
        /// Moves from the start to the end position constrained to the navigation mesh.
        ///  @param[in]		startRef		The reference id of the start polygon.
        ///  @param[in]		startPos		A position of the mover within the start polygon. [(x, y, x)]
        ///  @param[in]		endPos			The desired end position of the mover. [(x, y, z)]
        ///  @param[in]		filter			The polygon filter to apply to the query.
        /// @returns Path

      }, {
        key: "moveAlongSurface",
        value: function moveAlongSurface(startRef, startPos, endPos, filter) {
          // Validate input
          if (startRef == 0) throw new IllegalArgumentException("Start ref = 0");
          if (!this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          this.m_tinyNodePool = new NodePool();
          var startNode = this.m_tinyNodePool.getNode(startRef);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = 0;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_CLOSED;
          var stack = [];
          stack.push(startNode);
          var bestPos = new Array(3);
          var bestDist = Number.MAX_VALUE;
          var bestNode = null;
          DetourCommon.vCopy(bestPos, startPos); // Search constraints

          var searchPos = DetourCommon.vLerp3(startPos, endPos, 0.5);
          var searchRadSqr = DetourCommon.sqr(DetourCommon.vDist2(startPos, endPos) / 2.0 + 0.001);
          var verts = new Array(this.m_nav.getMaxVertsPerPoly() * 3).fill(0);

          while (!stack.length == 0) {
            // Pop front.
            var curNode = stack.pop(); // Get let and tile.
            // The API input has been cheked already, skip checking internal data.

            var curRef = curNode.id;
            var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(curRef);
            var curTile = tileAndPoly[0];
            var curPoly = tileAndPoly[1]; // Collect vertices.

            var nverts = curPoly.vertCount;

            for (var i = 0; i < nverts; ++i) {
              arraycopy$4(curTile.data.verts, curPoly.verts[i] * 3, verts, i * 3, 3);
            } // If target is inside the poly, stop search.


            if (DetourCommon.pointInPolygon(endPos, verts, nverts)) {
              bestNode = curNode;
              DetourCommon.vCopy(bestPos, endPos);
              break;
            } // Find wall edges and find nearest poPoly inside the walls.


            for (var _i4 = 0, j = curPoly.vertCount - 1; _i4 < curPoly.vertCount; j = _i4++) {
              // Find links to neighbours.
              var MAX_NEIS = 8;
              var nneis = 0;
              var neis = new Array(MAX_NEIS);

              if ((curPoly.neis[j] & NavMesh.DT_EXT_LINK) != 0) {
                // Tile border.
                for (var k = curPoly.firstLink; k != NavMesh.DT_NULL_LINK; k = curTile.links[k].next) {
                  var link = curTile.links[k];

                  if (link.edge == j) {
                    if (link.ref != 0) {
                      tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(link.ref);
                      var neiTile = tileAndPoly[0];
                      var neiPoly = tileAndPoly[1];

                      if (filter.passFilter(link.ref, neiTile, neiPoly)) {
                        if (nneis < MAX_NEIS) neis[nneis++] = link.ref;
                      }
                    }
                  }
                }
              } else if (curPoly.neis[j] != 0) {
                var idx = curPoly.neis[j] - 1;
                var ref = or(this.m_nav.getPolyRefBase(curTile), idx);

                if (filter.passFilter(ref, curTile, curTile.data.polys[idx])) {
                  // Internal edge, encode id.
                  neis[nneis++] = ref;
                }
              }

              if (nneis == 0) {
                // Wall edge, calc distance.
                var vj = j * 3;
                var vi = _i4 * 3;
                var distSeg = DetourCommon.distancePtSegSqr2D4(endPos, verts, vj, vi);
                var _distSqr = distSeg[0];
                var _tseg = distSeg[1];

                if (_distSqr < bestDist) {
                  // Update nearest distance.
                  bestPos = DetourCommon.vLerp4(verts, vj, vi, _tseg);
                  bestDist = _distSqr;
                  bestNode = curNode;
                }
              } else {
                for (var _k = 0; _k < nneis; ++_k) {
                  // Skip if no node can be allocated.
                  var neighbourNode = this.m_tinyNodePool.getNode(neis[_k]);
                  if (neighbourNode == null) continue; // Skip if already visited.

                  if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0) continue; // Skip the link if it is too far from search constraint.
                  // TODO: Maybe should use getPortalPoints(), but this one is way faster.

                  var _vj = j * 3;

                  var _vi = _i4 * 3;

                  var distseg = DetourCommon.distancePtSegSqr2D4(searchPos, verts, _vj, _vi);
                  var _distSqr2 = distseg[0];
                  if (_distSqr2 > searchRadSqr) continue; // Mark as the node as visited and push to queue.

                  neighbourNode.pidx = this.m_tinyNodePool.getNodeIdx(curNode);
                  neighbourNode.flags |= Node.DT_NODE_CLOSED;
                  stack.push(neighbourNode);
                }
              }
            }
          }

          var visited = [];

          if (bestNode != null) {
            // Reverse the path.
            var prev = null;
            var node = bestNode;

            do {
              var next = this.m_tinyNodePool.getNodeAtIdx(node.pidx);
              node.pidx = this.m_tinyNodePool.getNodeIdx(prev);
              prev = node;
              node = next;
            } while (node != null); // Store result


            node = prev;

            do {
              visited.push(node.id);
              node = this.m_tinyNodePool.getNodeAtIdx(node.pidx);
            } while (node != null);
          }

          return new MoveAlongSurfaceResult(bestPos, visited);
        }
      }, {
        key: "getPortalPoints2",
        value: function getPortalPoints2(from, to) {
          var tileAndPoly = this.m_nav.getTileAndPolyByRef(from);
          var fromTile = tileAndPoly[0];
          var fromPoly = tileAndPoly[1];
          var fromType = fromPoly.getType();
          tileAndPoly = this.m_nav.getTileAndPolyByRef(to);
          var toTile = tileAndPoly[0];
          var toPoly = tileAndPoly[1];
          var toType = toPoly.getType();
          return this.getPortalPoints7(from, fromPoly, fromTile, to, toPoly, toTile, fromType, toType);
        } // Returns portal points between two polygons.

      }, {
        key: "getPortalPoints7",
        value: function getPortalPoints7(from, fromPoly, fromTile, to, toPoly, toTile, fromType, toType) {
          var left = new Array(3);
          var right = new Array(3); // Find the link that points to the 'to' polygon.

          var link = null;

          for (var i = fromPoly.firstLink; i != NavMesh.DT_NULL_LINK; i = fromTile.links[i].next) {
            if (fromTile.links[i].ref == to) {
              link = fromTile.links[i];
              break;
            }
          }

          if (link == null) throw new IllegalArgumentException("Null link"); // Handle off-mesh connections.

          if (fromPoly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) {
            // Find link that points to first vertex.
            for (var _i5 = fromPoly.firstLink; _i5 != NavMesh.DT_NULL_LINK; _i5 = fromTile.links[_i5].next) {
              if (fromTile.links[_i5].ref == to) {
                var v = fromTile.links[_i5].edge;
                arraycopy$4(fromTile.data.verts, fromPoly.verts[v] * 3, left, 0, 3);
                arraycopy$4(fromTile.data.verts, fromPoly.verts[v] * 3, right, 0, 3);
                return new PortalResult(left, right, fromType, toType);
              }
            }

            throw new IllegalArgumentException("Invalid offmesh from connection");
          }

          if (toPoly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) {
            for (var _i6 = toPoly.firstLink; _i6 != NavMesh.DT_NULL_LINK; _i6 = toTile.links[_i6].next) {
              if (toTile.links[_i6].ref == from) {
                var _v3 = toTile.links[_i6].edge;
                arraycopy$4(toTile.data.verts, toPoly.verts[_v3] * 3, left, 0, 3);
                arraycopy$4(toTile.data.verts, toPoly.verts[_v3] * 3, right, 0, 3);
                return new PortalResult(left, right, fromType, toType);
              }
            }

            throw new IllegalArgumentException("Invalid offmesh to connection");
          } // Find portal vertices.


          var v0 = fromPoly.verts[link.edge];
          var v1 = fromPoly.verts[(link.edge + 1) % fromPoly.vertCount];
          arraycopy$4(fromTile.data.verts, v0 * 3, left, 0, 3);
          arraycopy$4(fromTile.data.verts, v1 * 3, right, 0, 3); // If the link is at tile boundary, dtClamp the vertices to
          // the link width.

          if (link.side != 0xff) {
            // Unpack portal limits.
            if (link.bmin != 0 || link.bmax != 255) {
              s = 1.0 / 255.0;
              tmin = link.bmin * s;
              tmax = link.bmax * s;
              left = DetourCommon.vLerp3(fromTile.data.verts, v0 * 3, v1 * 3, tmin);
              right = DetourCommon.vLerp3(fromTile.data.verts, v0 * 3, v1 * 3, tmax);
            }
          }

          return new PortalResult(left, right, fromType, toType);
        } // Returns edge mid poPoly between two polygons.

      }, {
        key: "getEdgeMidPoint2",
        value: function getEdgeMidPoint2(from, to) {
          var ppoints = this.getPortalPoints2(from, to);
          var left = ppoints.left;
          var right = ppoints.right;
          var mid = new Array(3);
          mid[0] = (left[0] + right[0]) * 0.5;
          mid[1] = (left[1] + right[1]) * 0.5;
          mid[2] = (left[2] + right[2]) * 0.5;
          return mid;
        }
      }, {
        key: "getEdgeMidPoint6",
        value: function getEdgeMidPoint6(from, fromPoly, fromTile, to, toPoly, toTile) {
          var ppoints = this.getPortalPoints7(from, fromPoly, fromTile, to, toPoly, toTile, 0, 0);
          var left = ppoints.left;
          var right = ppoints.right;
          var mid = new Array(3);
          mid[0] = (left[0] + right[0]) * 0.5;
          mid[1] = (left[1] + right[1]) * 0.5;
          mid[2] = (left[2] + right[2]) * 0.5;
          return mid;
        }
      }, {
        key: "raycast",
        /// @par
        ///
        /// This method is meant to be used for quick, short distance checks.
        ///
        /// If the path array is too small to hold the result, it will be filled as 
        /// far as possible from the start postion toward the end position.
        ///
        /// <b>Using the Hit Parameter t of RaycastHit</b>
        /// 
        /// If the hit parameter is a very high value (FLT_MAX), then the ray has hit 
        /// the end position. In this case the path represents a valid corridor to the 
        /// end position and the value of @p hitNormal is undefined.
        ///
        /// If the hit parameter is zero, then the start position is on the wall that 
        /// was hit and the value of @p hitNormal is undefined.
        ///
        /// If 0 < t < 1.0 then the following applies:
        ///
        /// @code
        /// distanceToHitBorder = distanceToEndPosition * t
        /// hitPoPoly = startPos + (endPos - startPos) * t
        /// @endcode
        ///
        /// <b>Use Case Restriction</b>
        ///
        /// The raycast ignores the y-value of the end position. (2D check.) This 
        /// places significant limits on how it can be used. For example:
        ///
        /// Consider a scene where there is a main floor with a second floor balcony 
        /// that hangs over the main floor. So the first floor mesh extends below the 
        /// balcony mesh. The start position is somewhere on the first floor. The end 
        /// position is on the balcony.
        ///
        /// The raycast will search toward the end position aPoly the first floor mesh. 
        /// If it reaches the end position's xz-coordinates it will indicate FLT_MAX
        /// (no wall hit), meaning it reached the end position. This is one example of why
        /// this method is meant for short distance checks.
        ///
        /// Casts a 'walkability' ray aPoly the surface of the navigation mesh from 
        /// the start position toward the end position.
        /// @note A wrapper around raycast(..., RaycastHit*). Retained for backward compatibility.
        ///  @param[in]		startRef	The reference id of the start polygon.
        ///  @param[in]		startPos	A position within the start polygon representing 
        ///  							the start of the ray. [(x, y, z)]
        ///  @param[in]		endPos		The position to cast the ray toward. [(x, y, z)]
        ///  @param[out]	t			The hit parameter. (FLT_MAX if no wall hit.)
        ///  @param[out]	hitNormal	The normal of the nearest wall hit. [(x, y, z)]
        ///  @param[in]		filter		The polygon filter to apply to the query.
        ///  @param[out]	path		The reference ids of the visited polygons. [opt]
        ///  @param[out]	pathCount	The number of visited polygons. [opt]
        ///  @param[in]		maxPath		The maximum number of polygons the @p path array can hold.
        /// @returns The status flags for the query.
        value: function raycast(startRef, startPos, endPos, filter, options, prevRef) {
          // Validate input
          if (startRef == 0 || !this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          if (prevRef != 0 && !this.m_nav.isValidPolyRef(prevRef)) throw new IllegalArgumentException("Invalid pref ref");
          var hit = new RaycastHit();
          var verts = new Array(this.m_nav.getMaxVertsPerPoly() * 3 + 3);
          var curPos = new Array(3),
              lastPos = new Array(3);
          DetourCommon.vCopy(curPos, startPos);
          var dir = DetourCommon.vSub(endPos, startPos);
          var prevTile, tile, nextTile;
          var prevPoly, poly, nextPoly; // The API input has been checked already, skip checking internal data.

          var curRef = startRef;
          var tileAndPolyUns = this.m_nav.getTileAndPolyByRefUnsafe(curRef);
          tile = tileAndPolyUns[0];
          poly = tileAndPolyUns[1];
          nextTile = prevTile = tile;
          nextPoly = prevPoly = poly;

          if (prevRef != 0) {
            tileAndPolyUns = this.m_nav.getTileAndPolyByRefUnsafe(prevRef);
            prevTile = tileAndPolyUns[0];
            prevPoly = tileAndPolyUns[1];
          }

          while (curRef != 0) {
            // Cast ray against current polygon.
            // Collect vertices.
            var nv = 0;

            for (var i = 0; i < poly.vertCount; ++i) {
              arraycopy$4(tile.data.verts, poly.verts[i] * 3, verts, nv * 3, 3);
              nv++;
            }

            var iresult = DetourCommon.intersectSegmentPoly2D(startPos, endPos, verts, nv);

            if (!iresult.intersects) {
              // Could not hit the polygon, keep the old t and report hit.
              return hit;
            }

            hit.hitEdgeIndex = iresult.segMax; // Keep track of furthest t so far.

            if (iresult.tmax > hit.t) hit.t = iresult.tmax; // Store visited polygons.

            hit.path.push(curRef); // Ray end is compPolyely inside the polygon.

            if (iresult.segMax == -1) {
              hit.t = Number.MAX_VALUE; // add the cost

              if ((options & NavMeshQuery.DT_RAYCAST_USE_COSTS) != 0) hit.pathCost += filter.getCost(curPos, endPos, prevRef, prevTile, prevPoly, curRef, tile, poly, curRef, tile, poly);
              return hit;
            } // Follow neighbours.


            var nextRef = 0;

            for (var _i7 = poly.firstLink; _i7 != NavMesh.DT_NULL_LINK; _i7 = tile.links[_i7].next) {
              var link = tile.links[_i7]; // Find link which contains this edge.

              if (link.edge != iresult.segMax) continue; // Get pointer to the next polygon.

              tileAndPolyUns = this.m_nav.getTileAndPolyByRefUnsafe(link.ref);
              nextTile = tileAndPolyUns[0];
              nextPoly = tileAndPolyUns[1]; // Skip off-mesh connections.

              if (nextPoly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) continue; // Skip links based on filter.

              if (!filter.passFilter(link.ref, nextTile, nextPoly)) continue; // If the link is internal, just return the ref.

              if (link.side == 0xff) {
                nextRef = link.ref;
                break;
              } // If the link is at tile boundary,
              // Check if the link spans the whole edge, and accept.


              if (link.bmin == 0 && link.bmax == 255) {
                nextRef = link.ref;
                break;
              } // Check for partial edge links.


              var _v4 = poly.verts[link.edge];
              var _v5 = poly.verts[(link.edge + 1) % poly.vertCount];
              var left = _v4 * 3;
              var right = _v5 * 3; // Check that the intersection lies inside the link portal.

              if (link.side == 0 || link.side == 4) {
                // Calculate link size.
                lmin = tile.data.verts[left + 2] + (tile.data.verts[right + 2] - tile.data.verts[left + 2]) * (link.bmin * s);
                lmax = tile.data.verts[left + 2] + (tile.data.verts[right + 2] - tile.data.verts[left + 2]) * (link.bmax * s);

                if (lmin > lmax) {
                  temp = lmin;
                  lmin = lmax;
                  lmax = temp;
                } // Find Z intersection.


                z = startPos[2] + (endPos[2] - startPos[2]) * iresult.tmax;

                if (z >= lmin && z <= lmax) {
                  nextRef = link.ref;
                  break;
                }
              } else if (link.side == 2 || link.side == 6) {
                // Calculate link size.
                lmin = tile.data.verts[left] + (tile.data.verts[right] - tile.data.verts[left]) * (link.bmin * s);
                lmax = tile.data.verts[left] + (tile.data.verts[right] - tile.data.verts[left]) * (link.bmax * s);

                if (lmin > lmax) {
                  temp = lmin;
                  lmin = lmax;
                  lmax = temp;
                } // Find X intersection.


                x = startPos[0] + (endPos[0] - startPos[0]) * iresult.tmax;

                if (x >= lmin && x <= lmax) {
                  nextRef = link.ref;
                  break;
                }
              }
            } // add the cost


            if ((options & NavMeshQuery.DT_RAYCAST_USE_COSTS) != 0) {
              // compute the intersection poPoly at the furthest end of the polygon
              // and correct the height (since the raycast moves in 2d)
              DetourCommon.vCopy(lastPos, curPos);
              curPos = DetourCommon.vMad(startPos, dir, hit.t);
              var e1 = new VectorPtr(verts, iresult.segMax * 3);
              var e2 = new VectorPtr(verts, (iresult.segMax + 1) % nv * 3);
              var eDir = DetourCommon.vSub(e2, e1);
              var diff = DetourCommon.vSub(new VectorPtr(curPos), e1);
              s = DetourCommon.sqr(eDir[0]) > DetourCommon.sqr(eDir[2]) ? diff[0] / eDir[0] : diff[2] / eDir[2];
              curPos[1] = e1[1] + eDir[1] * s;
              hit.pathCost += filter.getCost(lastPos, curPos, prevRef, prevTile, prevPoly, curRef, tile, poly, nextRef, nextTile, nextPoly);
            }

            if (nextRef == 0) {
              // No neighbour, we hit a wall.
              // Calculate hit normal.
              var a = iresult.segMax;
              var b = iresult.segMax + 1 < nv ? iresult.segMax + 1 : 0;
              var va = a * 3;
              var vb = b * 3;
              dx = verts[vb] - verts[va];
              dz = verts[vb + 2] - verts[va + 2];
              hit.hitNormal[0] = dz;
              hit.hitNormal[1] = 0;
              hit.hitNormal[2] = -dx;
              vNormalize(hit.hitNormal);
              return hit;
            } // No hit, advance to neighbour polygon.


            prevRef = curRef;
            curRef = nextRef;
            prevTile = tile;
            tile = nextTile;
            prevPoly = poly;
            poly = nextPoly;
          }

          return hit;
        } /// @par
        ///
        /// At least one result array must be provided.
        ///
        /// The order of the result set is from least to highest cost to reach the polygon.
        ///
        /// A common use case for this method is to perform Dijkstra searches. 
        /// Candidate polygons are found by searching the graph beginning at the start polygon.
        ///
        /// If a polygon is not found via the graph search, even if it intersects the 
        /// search circle, it will not be included in the result set. For example:
        ///
        /// polyA is the start polygon.
        /// polyB shares an edge with polyA. (Is adjacent.)
        /// polyC shares an edge with polyB, but not with polyA
        /// Even if the search circle overlaps polyC, it will not be included in the 
        /// result set unless polyB is also in the set.
        /// 
        /// The value of the center poPoly is used as the start position for cost 
        /// calculations. It is not projected onto the surface of the mesh, so its 
        /// y-value will effect the costs.
        ///
        /// Intersection tests occur in 2D. All polygons and the search circle are 
        /// projected onto the xz-plane. So the y-value of the center poPoly does not 
        /// effect intersection tests.
        ///
        /// If the result arrays are to small to hold the entire result set, they will be 
        /// filled to capacity.
        /// 
        ///@}
        /// @name Dijkstra Search Functions
        /// @{ 
        /// Finds the polygons aPoly the navigation graph that touch the specified circle.
        ///  @param[in]		startRef		The reference id of the polygon where the search starts.
        ///  @param[in]		centerPos		The center of the search circle. [(x, y, z)]
        ///  @param[in]		radius			The radius of the search circle.
        ///  @param[in]		filter			The polygon filter to apply to the query.
        ///  @param[out]	resultRef		The reference ids of the polygons touched by the circle. [opt]
        ///  @param[out]	resultParent	The reference ids of the parent polygons for each result. 
        ///  								Zero if a result polygon has no parent. [opt]
        ///  @param[out]	resultCost		The search cost from @p centerPos to the polygon. [opt]
        ///  @param[out]	resultCount		The number of polygons found. [opt]
        ///  @param[in]		maxResult		The maximum number of polygons the result arrays can hold.
        /// @returns The status flags for the query.

      }, {
        key: "findPolysAroundCircle",
        value: function findPolysAroundCircle(startRef, centerPos, radius, filter) {
          // Validate input
          if (startRef == 0 || !this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          var resultRef = [];
          var resultParent = [];
          var resultCost = [];
          this.m_nodePool = [];
          this.m_openList = [];
          var startNode = this.m_nodePool.getNode(startRef);
          DetourCommon.vCopy(startNode.pos, centerPos);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = 0;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_OPEN;
          this.m_openList.push(startNode);
          radiusSqr = DetourCommon.sqr(radius);

          while (!this.m_openList.length == 0) {
            var bestNode = m_openList.pop();
            bestNode.flags &= ~Node.DT_NODE_OPEN;
            bestNode.flags |= Node.DT_NODE_CLOSED; // Get let and tile.
            // The API input has been cheked already, skip checking internal data.

            var bestRef = bestNode.id;
            var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(bestRef);
            var bestTile = tileAndPoly[0];
            var bestPoly = tileAndPoly[1]; // Get parent let and tile.

            var parentRef = 0;
            var parentTile = null;
            var parentPoly = null;
            if (bestNode.pidx != 0) parentRef = this.m_nodePool.getNodeAtIdx(bestNode.pidx).id;

            if (parentRef != 0) {
              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(parentRef);
              parentTile = tileAndPoly[0];
              parentPoly = tileAndPoly[1];
            }

            resultRef.push(bestRef);
            resultParent.push(parentRef);
            resultCost.push(bestNode.total);

            for (var i = bestPoly.firstLink; i != NavMesh.DT_NULL_LINK; i = bestTile.links[i].next) {
              var link = bestTile.links[i];
              var neighbourRef = link.ref; // Skip invalid neighbours and do not follow back to parent.

              if (neighbourRef == 0 || neighbourRef == parentRef) continue; // Expand to neighbour

              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = tileAndPoly[0];
              var neighbourPoly = tileAndPoly[1]; // Do not advance if the polygon is excluded by the filter.

              if (!filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue; // Find edge and calc distance to the edge.

              var pp = this.getPortalPoints7(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile, 0, 0);
              var va = pp.left;
              var vb = pp.right; // If the circle is not touching the next polygon, skip it.

              var distseg = DetourCommon.distancePtSegSqr2D3(centerPos, va, vb);
              distSqr = distseg[0];
              if (distSqr > radiusSqr) continue;
              var neighbourNode = this.m_nodePool.getNode(neighbourRef);
              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0) continue; // Cost

              if (neighbourNode.flags == 0) neighbourNode.pos = vLerp3(va, vb, 0.5);
              cost = filter.getCost(bestNode.pos, neighbourNode.pos, parentRef, parentTile, parentPoly, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly);
              total = bestNode.total + cost; // The node is already in open list and the new result is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0 && total >= neighbourNode.total) continue;
              neighbourNode.id = neighbourRef;
              neighbourNode.pidx = this.m_nodePool.getNodeIdx(bestNode);
              neighbourNode.total = total;

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0) {
                this.m_openList.modify(neighbourNode);
              } else {
                neighbourNode.flags = Node.DT_NODE_OPEN;
                this.m_openList.push(neighbourNode);
              }
            }
          }

          return new FindPolysAroundResult(resultRef, resultParent, resultCost);
        } /// @par
        ///
        /// The order of the result set is from least to highest cost.
        /// 
        /// At least one result array must be provided.
        ///
        /// A common use case for this method is to perform Dijkstra searches. 
        /// Candidate polygons are found by searching the graph beginning at the start 
        /// polygon.
        /// 
        /// The same intersection test restrictions that apply to findPolysAroundCircle()
        /// method apply to this method.
        /// 
        /// The 3D centroid of the search polygon is used as the start position for cost 
        /// calculations.
        /// 
        /// Intersection tests occur in 2D. All polygons are projected onto the 
        /// xz-plane. So the y-values of the vertices do not effect intersection tests.
        /// 
        /// If the result arrays are is too small to hold the entire result set, they will 
        /// be filled to capacity.
        ///
        /// Finds the polygons aPoly the naviation graph that touch the specified convex polygon.
        ///  @param[in]		startRef		The reference id of the polygon where the search starts.
        ///  @param[in]		verts			The vertices describing the convex polygon. (CCW) 
        ///  								[(x, y, z) * @p nverts]
        ///  @param[in]		nverts			The number of vertices in the polygon.
        ///  @param[in]		filter			The polygon filter to apply to the query.
        ///  @param[out]	resultRef		The reference ids of the polygons touched by the search polygon. [opt]
        ///  @param[out]	resultParent	The reference ids of the parent polygons for each result. Zero if a 
        ///  								result polygon has no parent. [opt]
        ///  @param[out]	resultCost		The search cost from the centroid poPoly to the polygon. [opt]
        ///  @param[out]	resultCount		The number of polygons found.
        ///  @param[in]		maxResult		The maximum number of polygons the result arrays can hold.
        /// @returns The status flags for the query.

      }, {
        key: "findPolysAroundShape",
        value: function findPolysAroundShape(startRef, verts, nverts, filter) {
          // Validate input
          if (startRef == 0 || !this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          var resultRef = [];
          var resultParent = [];
          var resultCost = [];
          this.m_nodePool = [];
          this.m_openList = [];
          var centerPos = [0, 0, 0];

          for (var i = 0; i < nverts; ++i) {
            centerPos[0] += verts[i * 3];
            centerPos[1] += verts[i * 3 + 1];
            centerPos[2] += verts[i * 3 + 2];
          }

          scale = 1.0 / nverts;
          centerPos[0] *= scale;
          centerPos[1] *= scale;
          centerPos[2] *= scale;
          var startNode = this.m_nodePool.getNode(startRef);
          DetourCommon.vCopy(startNode.pos, centerPos);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = 0;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_OPEN;
          this.m_openList.push(startNode);

          while (!this.m_openList.length == 0) {
            var bestNode = this.m_openList.pop();
            bestNode.flags &= ~Node.DT_NODE_OPEN;
            bestNode.flags |= Node.DT_NODE_CLOSED; // Get let and tile.
            // The API input has been cheked already, skip checking internal data.

            var bestRef = bestNode.id;
            var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(bestRef);
            var bestTile = tileAndPoly[0];
            var bestPoly = tileAndPoly[1]; // Get parent let and tile.

            var parentRef = 0;
            var parentTile = null;
            var parentPoly = null;
            if (bestNode.pidx != 0) parentRef = this.m_nodePool.getNodeAtIdx(bestNode.pidx).id;

            if (parentRef != 0) {
              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(parentRef);
              parentTile = tileAndPoly[0];
              parentPoly = tileAndPoly[1];
            }

            resultRef.push(bestRef);
            resultParent.push(parentRef);
            resultCost.push(bestNode.total);

            for (var _i8 = bestPoly.firstLink; _i8 != NavMesh.DT_NULL_LINK; _i8 = bestTile.links[_i8].next) {
              var link = bestTile.links[_i8];
              var neighbourRef = link.ref; // Skip invalid neighbours and do not follow back to parent.

              if (neighbourRef == 0 || neighbourRef == parentRef) continue; // Expand to neighbour

              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = tileAndPoly[0];
              var neighbourPoly = tileAndPoly[1]; // Do not advance if the polygon is excluded by the filter.

              if (!filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue; // Find edge and calc distance to the edge.

              var pp = this.getPortalPoints7(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile, 0, 0);
              var va = pp.left;
              var vb = pp.right; // If the let is not touching the edge to the next polygon, skip the connection it.

              var ir = DetourCommon.intersectSegmentPoly2D(va, vb, verts, nverts);
              if (!ir.intersects) continue;
              if (ir.tmin > 1.0 || ir.tmax < 0.0) continue;
              var neighbourNode = this.m_nodePool.getNode(neighbourRef);
              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0) continue; // Cost

              if (neighbourNode.flags == 0) neighbourNode.pos = DetourCommon.vLerp3(va, vb, 0.5);
              cost = filter.getCost(bestNode.pos, neighbourNode.pos, parentRef, parentTile, parentPoly, bestRef, bestTile, bestPoly, neighbourRef, neighbourTile, neighbourPoly);
              total = bestNode.total + cost; // The node is already in open list and the new result is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0 && total >= neighbourNode.total) continue;
              neighbourNode.id = neighbourRef;
              neighbourNode.pidx = this.m_nodePool.getNodeIdx(bestNode);
              neighbourNode.total = total;

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0) {
                this.m_openList.modify(neighbourNode);
              } else {
                neighbourNode.flags = Node.DT_NODE_OPEN;
                this.m_openList.push(neighbourNode);
              }
            }
          }

          return new FindPolysAroundResult(resultRef, resultParent, resultCost);
        } /// @par
        ///
        /// This method is optimized for a small search radius and small number of result 
        /// polygons.
        ///
        /// Candidate polygons are found by searching the navigation graph beginning at 
        /// the start polygon.
        ///
        /// The same intersection test restrictions that apply to the findPolysAroundCircle 
        /// mehtod applies to this method.
        ///
        /// The value of the center poPoly is used as the start poPoly for cost calculations. 
        /// It is not projected onto the surface of the mesh, so its y-value will effect 
        /// the costs.
        /// 
        /// Intersection tests occur in 2D. All polygons and the search circle are 
        /// projected onto the xz-plane. So the y-value of the center poPoly does not 
        /// effect intersection tests.
        /// 
        /// If the result arrays are is too small to hold the entire result set, they will 
        /// be filled to capacity.
        /// 
        /// Finds the non-overlapping navigation polygons in the local neighbourhood around the center position.
        ///  @param[in]		startRef		The reference id of the polygon where the search starts.
        ///  @param[in]		centerPos		The center of the query circle. [(x, y, z)]
        ///  @param[in]		radius			The radius of the query circle.
        ///  @param[in]		filter			The polygon filter to apply to the query.
        ///  @param[out]	resultRef		The reference ids of the polygons touched by the circle.
        ///  @param[out]	resultParent	The reference ids of the parent polygons for each result. 
        ///  								Zero if a result polygon has no parent. [opt]
        ///  @param[out]	resultCount		The number of polygons found.
        ///  @param[in]		maxResult		The maximum number of polygons the result arrays can hold.
        /// @returns The status flags for the query.

      }, {
        key: "findLocalNeighbourhood",
        value: function findLocalNeighbourhood(startRef, centerPos, radius, filter) {
          // Validate input
          if (startRef == 0 || !this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          var resultRef = [];
          var resultParent = [];
          this.m_tinyNodePool = new NodePool();
          var startNode = this.m_tinyNodePool.getNode(startRef);
          startNode.pidx = 0;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_CLOSED;
          var stack = [];
          stack.push(startNode);
          resultRef.push(startNode.id);
          resultParent.push(0);
          var radiusSqr = DetourCommon.sqr(radius);
          var pa = new Array(this.m_nav.getMaxVertsPerPoly() * 3);
          var pb = new Array(this.m_nav.getMaxVertsPerPoly() * 3);

          while (!stack.length == 0) {
            // Pop front.
            var curNode = stack.pop(); // Get let and tile.
            // The API input has been cheked already, skip checking internal data.

            var curRef = curNode.id;
            var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(curRef);
            var curTile = tileAndPoly[0];
            var curPoly = tileAndPoly[1];

            for (var i = curPoly.firstLink; i != NavMesh.DT_NULL_LINK; i = curTile.links[i].next) {
              var link = curTile.links[i];
              var neighbourRef = link.ref; // Skip invalid neighbours.

              if (neighbourRef == 0) continue; // Skip if cannot alloca more nodes.

              var neighbourNode = this.m_tinyNodePool.getNode(neighbourRef);
              if (neighbourNode == null) continue; // Skip visited.

              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0) continue; // Expand to neighbour

              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = tileAndPoly[0];
              var neighbourPoly = tileAndPoly[1]; // Skip off-mesh connections.

              if (neighbourPoly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) continue; // Do not advance if the polygon is excluded by the filter.

              if (!filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue; // Find edge and calc distance to the edge.

              var pp = this.getPortalPoints7(curRef, curPoly, curTile, neighbourRef, neighbourPoly, neighbourTile, 0, 0);
              var va = pp.left;
              var vb = pp.right; // If the circle is not touching the next polygon, skip it.

              var distseg = DetourCommon.distancePtSegSqr2D3(centerPos, va, vb);
              var _distSqr3 = distseg[0];
              if (_distSqr3 > radiusSqr) continue; // Mark node visited, this is done before the overlap test so that
              // we will not visit the let again if the test fails.

              neighbourNode.flags |= Node.DT_NODE_CLOSED;
              neighbourNode.pidx = this.m_tinyNodePool.getNodeIdx(curNode); // Check that the polygon does not collide with existing polygons.
              // Collect vertices of the neighbour poly.

              var npa = neighbourPoly.vertCount;

              for (var k = 0; k < npa; ++k) {
                arraycopy$4(neighbourTile.data.verts, neighbourPoly.verts[k] * 3, pa, k * 3, 3);
              }

              var overlap = false;

              for (var j = 0; j < resultRef.length; ++j) {
                var pastRef = resultRef[j]; // Connected polys do not overlap.

                var connected = false;

                for (var _k2 = curPoly.firstLink; _k2 != NavMesh.DT_NULL_LINK; _k2 = curTile.links[_k2].next) {
                  if (curTile.links[_k2].ref == pastRef) {
                    connected = true;
                    break;
                  }
                }

                if (connected) continue; // Potentially overlapping.

                tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(pastRef);
                var pastTile = tileAndPoly[0];
                var pastPoly = tileAndPoly[1]; // Get vertices and test overlap

                var npb = pastPoly.vertCount;

                for (var _k3 = 0; _k3 < npb; ++_k3) {
                  arraycopy$4(pastTile.data.verts, pastPoly.verts[_k3] * 3, pb, _k3 * 3, 3);
                }

                if (DetourCommon.overlapPolyPoly2D(pa, npa, pb, npb)) {
                  overlap = true;
                  break;
                }
              }

              if (overlap) continue;
              resultRef.push(neighbourRef);
              resultParent.push(curRef);
              stack.push(neighbourNode);
            }
          }

          return new FindLocalNeighbourhoodResult(resultRef, resultParent);
        }
      }, {
        key: "insertInterval",
        value: function insertInterval(ints, tmin, tmax, ref) {
          // Find insertion point.
          var idx = 0;

          while (idx < ints.length) {
            if (tmax <= ints[idx].tmin) break;
            idx++;
          } // Store


          ints.add(idx, new SegInterval(ref, tmin, tmax));
        }
      }, {
        key: "or",
        value: function or(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 | hi2;
          var l = low1 | low2;
          return h * hi + l;
        } /// @par
        ///
        /// If the @p segmentRefs parameter is provided, then all polygon segments will be returned. 
        /// Otherwise only the wall segments are returned.
        /// 
        /// A segment that is normally a portal will be included in the result set as a 
        /// wall if the @p filter results in the neighbor polygon becoomming impassable.
        /// 
        /// The @p segmentVerts and @p segmentRefs buffers should normally be sized for the 
        /// maximum segments per polygon of the source navigation mesh.
        /// 
        /// Returns the segments for the specified polygon, optionally including portals.
        ///  @param[in]		ref				The reference id of the polygon.
        ///  @param[in]		filter			The polygon filter to apply to the query.
        ///  @param[out]	segmentVerts	The segments. [(ax, ay, az, bx, by, bz) * segmentCount]
        ///  @param[out]	segmentRefs		The reference ids of each segment's neighbor polygon. 
        ///  								Or zero if the segment is a wall. [opt] [(parentRef) * @p segmentCount] 
        ///  @param[out]	segmentCount	The number of segments returned.
        ///  @param[in]		maxSegments		The maximum number of segments the result arrays can hold.
        /// @returns The status flags for the query.

      }, {
        key: "getPolyWallSegments",
        value: function getPolyWallSegments(ref, storePortals, filter) {
          var tileAndPoly = this.m_nav.getTileAndPolyByRef(ref);
          var tile = tileAndPoly[0];
          var poly = tileAndPoly[1];
          var segmentRefs = [];
          var segmentVerts = [];
          var ints = new Array(16);

          for (var i = 0, j = poly.vertCount - 1; i < poly.vertCount; j = i++) {
            // Skip non-solid edges.
            ints = [];

            if ((poly.neis[j] & NavMesh.DT_EXT_LINK) != 0) {
              // Tile border.
              for (var k = poly.firstLink; k != NavMesh.DT_NULL_LINK; k = tile.links[k].next) {
                var link = tile.links[k];

                if (link.edge == j) {
                  if (link.ref != 0) {
                    tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(link.ref);
                    var neiTile = tileAndPoly[0];
                    var neiPoly = tileAndPoly[1];

                    if (filter.passFilter(link.ref, neiTile, neiPoly)) {
                      insertInterval(ints, link.bmin, link.bmax, link.ref);
                    }
                  }
                }
              }
            } else {
              // Internal edge
              var neiRef = 0;

              if (poly.neis[j] != 0) {
                var idx = poly.neis[j] - 1;
                neiRef = this.or(this.m_nav.getPolyRefBase(tile), idx);
                if (!filter.passFilter(neiRef, tile, tile.data.polys[idx])) neiRef = 0;
              } // If the edge leads to another polygon and portals are not stored, skip.


              if (neiRef != 0 && !storePortals) continue;

              var _vj2 = poly.verts[j] * 3;

              var _vi2 = poly.verts[i] * 3;

              var seg = new Array(6);
              arraycopy$4(tile.data.verts, _vj2, seg, 0, 3);
              arraycopy$4(tile.data.verts, _vi2, seg, 3, 3);
              segmentVerts.push(seg);
              segmentRefs.push(neiRef);
              continue;
            } // Add sentinels


            insertInterval(ints, -1, 0, 0);
            insertInterval(ints, 255, 256, 0); // Store segments.

            var vj = poly.verts[j] * 3;
            var vi = poly.verts[i] * 3;

            for (var _k4 = 1; _k4 < ints.length; ++_k4) {
              // Portal segment.
              if (storePortals && ints[_k4].ref != 0) {
                tmin = ints[_k4].tmin / 255.0;
                tmax = ints[_k4].tmax / 255.0;

                var _seg = new Array(6);

                arraycopy$4(vLerp4(tile.data.verts, vj, vi, tmin), 0, _seg, 0, 3);
                arraycopy$4(vLerp4(tile.data.verts, vj, vi, tmax), 0, _seg, 3, 3);
                segmentVerts.push(_seg);
                segmentRefs.push(ints[_k4].ref);
              } // Wall segment.


              var imin = ints[_k4 - 1].tmax;
              var imax = ints[_k4].tmin;

              if (imin != imax) {
                tmin = imin / 255.0;
                tmax = imax / 255.0;

                var _seg2 = new Array(6);

                arraycopy$4(vLerp4(tile.data.verts, vj, vi, tmin), 0, _seg2, 0, 3);
                arraycopy$4(vLerp4(tile.data.verts, vj, vi, tmax), 0, _seg2, 3, 3);
                segmentVerts.push(_seg2);
                segmentRefs.push(0);
              }
            }
          }

          return new GetPolyWallSegmentsResult(segmentVerts, segmentRefs);
        } /// @par
        ///
        /// @p hitPos is not adjusted using the height detail data.
        ///
        /// @p hitDist will equal the search radius if there is no wall within the 
        /// radius. In this case the values of @p hitPos and @p hitNormal are
        /// undefined.
        ///
        /// The normal will become unpredicable if @p hitDist is a very small number.
        ///
        /// Finds the distance from the specified position to the nearest polygon wall.
        ///  @param[in]		startRef		The reference id of the polygon containing @p centerPos.
        ///  @param[in]		centerPos		The center of the search circle. [(x, y, z)]
        ///  @param[in]		maxRadius		The radius of the search circle.
        ///  @param[in]		filter			The polygon filter to apply to the query.
        ///  @param[out]	hitDist			The distance to the nearest wall from @p centerPos.
        ///  @param[out]	hitPos			The nearest position on the wall that was hit. [(x, y, z)]
        ///  @param[out]	hitNormal		The normalized ray formed from the wall poPoly to the 
        ///  								source point. [(x, y, z)]
        /// @returns The status flags for the query.

      }, {
        key: "findDistanceToWall",
        value: function findDistanceToWall(startRef, centerPos, maxRadius, filter) {
          // Validate input
          if (startRef == 0 || !this.m_nav.isValidPolyRef(startRef)) throw new IllegalArgumentException("Invalid start ref");
          this.m_nodePool = [];
          this.m_openList = [];
          var startNode = this.m_nodePool.getNode(startRef);
          DetourCommon.vCopy(startNode.pos, centerPos);
          startNode.pidx = 0;
          startNode.cost = 0;
          startNode.total = 0;
          startNode.id = startRef;
          startNode.flags = Node.DT_NODE_OPEN;
          this.m_openList.push(startNode);
          radiusSqr = DetourCommon.sqr(maxRadius);
          var hitPos = new Array(3);
          var bestvj = null;
          var bestvi = null;

          while (!this.m_openList.length == 0) {
            var bestNode = this.m_openList.pop();
            bestNode.flags &= ~Node.DT_NODE_OPEN;
            bestNode.flags |= Node.DT_NODE_CLOSED; // Get let and tile.
            // The API input has been cheked already, skip checking internal data.

            var bestRef = bestNode.id;
            var tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(bestRef);
            var bestTile = tileAndPoly[0];
            var bestPoly = tileAndPoly[1]; // Get parent let and tile.

            var parentRef = 0;
            var parentTile = null;
            var parentPoly = null;
            if (bestNode.pidx != 0) parentRef = this.m_nodePool.getNodeAtIdx(bestNode.pidx).id;

            if (parentRef != 0) {
              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(parentRef);
              parentTile = tileAndPoly[0];
              parentPoly = tileAndPoly[1];
            } // Hit test walls.


            for (var i = 0, j = bestPoly.vertCount - 1; i < bestPoly.vertCount; j = i++) {
              // Skip non-solid edges.
              if ((bestPoly.neis[j] & NavMesh.DT_EXT_LINK) != 0) {
                // Tile border.
                var solid = true;

                for (var k = bestPoly.firstLink; k != NavMesh.DT_NULL_LINK; k = bestTile.links[k].next) {
                  var link = bestTile.links[k];

                  if (link.edge == j) {
                    if (link.ref != 0) {
                      tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(link.ref);
                      var neiTile = tileAndPoly[0];
                      var neiPoly = tileAndPoly[1];
                      if (filter.passFilter(link.ref, neiTile, neiPoly)) solid = false;
                    }

                    break;
                  }
                }

                if (!solid) continue;
              } else if (bestPoly.neis[j] != 0) {
                // Internal edge
                var idx = bestPoly.neis[j] - 1;
                var ref = this.m_nav.getPolyRefBase(bestTile) | idx;
                if (filter.passFilter(ref, bestTile, bestTile.data.polys[idx])) continue;
              } // Calc distance to the edge.


              var vj = bestPoly.verts[j] * 3;
              var vi = bestPoly.verts[i] * 3;
              var distseg = DetourCommon.distancePtSegSqr2D4(centerPos, bestTile.data.verts, vj, vi);
              distSqr = distseg[0];
              tseg = distseg[1]; // Edge is too far, skip.

              if (distSqr > radiusSqr) continue; // Hit wall, update radius.

              radiusSqr = distSqr; // Calculate hit pos.

              hitPos[0] = bestTile.data.verts[vj] + (bestTile.data.verts[vi] - bestTile.data.verts[vj]) * tseg;
              hitPos[1] = bestTile.data.verts[vj + 1] + (bestTile.data.verts[vi + 1] - bestTile.data.verts[vj + 1]) * tseg;
              hitPos[2] = bestTile.data.verts[vj + 2] + (bestTile.data.verts[vi + 2] - bestTile.data.verts[vj + 2]) * tseg;
              bestvj = new VectorPtr(bestTile.data.verts, vj);
              bestvi = new VectorPtr(bestTile.data.verts, vi);
            }

            for (var _i9 = bestPoly.firstLink; _i9 != NavMesh.DT_NULL_LINK; _i9 = bestTile.links[_i9].next) {
              var _link = bestTile.links[_i9];
              var neighbourRef = _link.ref; // Skip invalid neighbours and do not follow back to parent.

              if (neighbourRef == 0 || neighbourRef == parentRef) continue; // Expand to neighbour.

              tileAndPoly = this.m_nav.getTileAndPolyByRefUnsafe(neighbourRef);
              var neighbourTile = tileAndPoly[0];
              var neighbourPoly = tileAndPoly[1]; // Skip off-mesh connections.

              if (neighbourPoly.getType() == Poly.DT_POLYTYPE_OFFMESH_CONNECTION) continue; // Calc distance to the edge.

              var va = bestPoly.verts[_link.edge] * 3;
              var vb = bestPoly.verts[(_link.edge + 1) % bestPoly.vertCount] * 3;

              var _distseg = DetourCommon.distancePtSegSqr2D4(centerPos, bestTile.data.verts, va, vb);

              distSqr = _distseg[0]; // If the circle is not touching the next polygon, skip it.

              if (distSqr > radiusSqr) continue;
              if (!filter.passFilter(neighbourRef, neighbourTile, neighbourPoly)) continue;
              var neighbourNode = this.m_nodePool.getNode(neighbourRef);
              if ((neighbourNode.flags & Node.DT_NODE_CLOSED) != 0) continue; // Cost

              if (neighbourNode.flags == 0) {
                neighbourNode.pos = this.getEdgeMidPoint6(bestRef, bestPoly, bestTile, neighbourRef, neighbourPoly, neighbourTile);
              }

              total = bestNode.total + DetourCommon.vDist2(bestNode.pos, neighbourNode.pos); // The node is already in open list and the new result is worse, skip.

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0 && total >= neighbourNode.total) continue;
              neighbourNode.id = neighbourRef;
              neighbourNode.flags = neighbourNode.flags & ~Node.DT_NODE_CLOSED;
              neighbourNode.pidx = this.m_nodePool.getNodeIdx(bestNode);
              neighbourNode.total = total;

              if ((neighbourNode.flags & Node.DT_NODE_OPEN) != 0) {
                this.m_openList.modify(neighbourNode);
              } else {
                neighbourNode.flags |= Node.DT_NODE_OPEN;
                this.m_openList.push(neighbourNode);
              }
            }
          } // Calc hit normal.


          var hitNormal = new Array(3);

          if (bestvi != null && bestvj != null) {
            var tangent = DetourCommon.vSub(bestvi, bestvj);
            hitNormal[0] = tangent[2];
            hitNormal[1] = 0;
            hitNormal[2] = -tangent[0];
            vNormalize(hitNormal);
          }

          return new FindDistanceToWallResult(Math.sqrt(radiusSqr), hitPos, hitNormal);
        } /// Returns true if the polygon reference is valid and passes the filter restrictions.
        ///  @param[in]		ref			The polygon reference to check.
        ///  @param[in]		filter		The filter to apply.

      }, {
        key: "isValidPolyRef",
        value: function isValidPolyRef(ref, filter) {
          try {
            var tileAndPoly = this.m_nav.getTileAndPolyByRef(ref); // If cannot pass filter, assume flags has changed and boundary is invalid.

            if (filter.passFilter(ref, tileAndPoly[0], tileAndPoly[1])) return true;
          } catch (e) {// If cannot get polygon, assume it does not exists and boundary is invalid.
          }

          return false;
        } /// Gets the navigation mesh the query object is using.
        /// @return The navigation mesh the query object is using.

      }, {
        key: "getAttachedNavMesh",
        value: function getAttachedNavMesh() {
          return this.m_nav;
        }
        /*
        /// @par
        ///
        /// The closed list is the list of polygons that were fully evaluated during 
        /// the last navigation graph search. (A* or Dijkstra)
        /// 
        /// Returns true if the polygon reference is in the closed list. 
        ///  @param[in]		ref		The reference id of the polygon to check.
        /// @returns True if the polygon is in closed list.
        let isInClosedList(let ref)
        {
        	if (m_nodePool == null) return false;
        	
        	let nodes[DT_MAX_STATES_PER_NODE];
        	let n= m_nodePool=>findNodes(ref, nodes, DT_MAX_STATES_PER_NODE);
        	
        	for (let i=0; i<n; i++)
        	{
        		if (nodes[i]=>flags & DT_NODE_CLOSED)
        			return true;
        	}		
        	
        	return false;
        }
        	
        */

        /**
         * Gets a path from the explored nodes in the previous search.
         * 
         * @param endRef
         *            The reference id of the end polygon.
         * @returns An ordered list of polygon references representing the path. (Start to end.)
         * @remarks The result of this function depends on the state of the query object. For that reason it should only be
         *          used immediately after one of the two Dijkstra searches, findPolysAroundCircle or findPolysAroundShape.
         */

      }, {
        key: "getPathFromDijkstraSearch",
        value: function getPathFromDijkstraSearch(endRef) {
          if (!this.m_nav.isValidPolyRef(endRef)) throw new IllegalArgumentException("Invalid end ref");
          var nodes = this.m_nodePool.findNodes(endRef);
          if (nodes.length != 1) throw new IllegalArgumentException("Invalid end ref");
          var endNode = nodes[0];
          if ((endNode.flags & DT_NODE_CLOSED) == 0) throw new IllegalArgumentException("Invalid end ref");
          return getPathToNode(endNode);
        }
        /**
         * Gets the path leading to the specified end node.
         */

      }, {
        key: "getPathToNode",
        value: function getPathToNode(endNode) {
          var path = []; // Reverse the path.

          var curNode = endNode;

          do {
            path.add(0, curNode.id);
            curNode = this.m_nodePool.getNodeAtIdx(curNode.pidx);
          } while (curNode != null);

          return path;
        }
      }]);

      return NavMeshQuery;
    }();

    _defineProperty(NavMeshQuery, "DT_FINDPATH_ANY_ANGLE", 0x02);

    _defineProperty(NavMeshQuery, "DT_RAYCAST_USE_COSTS", 0x01);

    _defineProperty(NavMeshQuery, "DT_STRAIGHTPATH_START", 0x01);

    _defineProperty(NavMeshQuery, "DT_STRAIGHTPATH_END", 0x02);

    _defineProperty(NavMeshQuery, "DT_STRAIGHTPATH_OFFMESH_CONNECTION", 0x04);

    _defineProperty(NavMeshQuery, "DT_STRAIGHTPATH_AREA_CROSSINGS", 0x01);

    _defineProperty(NavMeshQuery, "DT_STRAIGHTPATH_ALL_CROSSINGS", 0x02);

    _defineProperty(NavMeshQuery, "H_SCALE", 0.999);

    _defineProperty(NavMeshQuery, "FRand", function FRand() {
      _classCallCheck(this, FRand);

      return Math.random();
    });

    _defineProperty(NavMeshQuery, "s", 1.0 / 255.0);

    _defineProperty(NavMeshQuery, "SegInternval", (_temp$3 = function SegInterval(ref, tmin, tmax) {
      _classCallCheck(this, SegInterval);

      _defineProperty(this, "ref", void 0);

      _defineProperty(this, "tmin", void 0);

      _defineProperty(this, "tmax", void 0);

      this.ref = ref;
      this.tmin = tmin;
      this.tmax = tmax;
    }, _temp$3));

    var ObstacleAvoidanceParams = ///< grid
    ///< adaptive
    ///< adaptive
    ///< adaptive
    function ObstacleAvoidanceParams() {
      _classCallCheck(this, ObstacleAvoidanceParams);

      _defineProperty(this, "velBias", 0);

      _defineProperty(this, "weightDesVel", 0);

      _defineProperty(this, "weightCurVel", 0);

      _defineProperty(this, "weightSide", 0);

      _defineProperty(this, "weightToi", 0);

      _defineProperty(this, "horizTime", 0);

      _defineProperty(this, "gridSize", 0);

      _defineProperty(this, "adaptiveDivs", 0);

      _defineProperty(this, "adaptiveRings", 0);

      _defineProperty(this, "adaptiveDepth", 0);

      this.velBias = 0.4;
      this.weightDesVel = 2.0;
      this.weightCurVel = 0.75;
      this.weightSide = 0.75;
      this.weightToi = 2.5;
      this.horizTime = 2.5;
      this.gridSize = 33;
      this.adaptiveDivs = 7;
      this.adaptiveRings = 2;
      this.adaptiveDepth = 5;
    };

    var ObstacleCircle = function ObstacleCircle() {
      _classCallCheck(this, ObstacleCircle);

      _defineProperty(this, "p", new Array(3));

      _defineProperty(this, "vel", new Array(3));

      _defineProperty(this, "dvel", new Array(3));

      _defineProperty(this, "rad", void 0);

      _defineProperty(this, "dp", new Array(3));

      _defineProperty(this, "np", new Array(3));
    };

    var ObstacleSegment = function ObstacleSegment() {
      _classCallCheck(this, ObstacleSegment);

      _defineProperty(this, "p", new Array(3));

      _defineProperty(this, "q", new Array(3));

      _defineProperty(this, "touch", false);
    };

    var SweepCircleCircleResult = function SweepCircleCircleResult(intersection, htmin, htmax) {
      _classCallCheck(this, SweepCircleCircleResult);

      _defineProperty(this, "intersection", false);

      _defineProperty(this, "htmin", 0);

      _defineProperty(this, "htmax", 0);

      this.intersection = intersection;
      this.htmin = htmin;
      this.htmax = htmax;
    };

    var ObstacleAvoidanceQuery = /*#__PURE__*/function () {
      ///< Max numver of adaptive divs.
      ///< Max number of adaptive rings.
      function ObstacleAvoidanceQuery(maxCircles, maxSegments) {
        _classCallCheck(this, ObstacleAvoidanceQuery);

        _defineProperty(this, "m_params", new ObstacleAvoidanceParams());

        _defineProperty(this, "m_invHorizTime", 0);

        _defineProperty(this, "m_vmax", 0);

        _defineProperty(this, "m_invVmax", 0);

        _defineProperty(this, "m_maxCircles", 0);

        _defineProperty(this, "m_circles", []);

        _defineProperty(this, "m_ncircles", 0);

        _defineProperty(this, "m_maxSegments", 0);

        _defineProperty(this, "m_segments", []);

        _defineProperty(this, "m_nsegments", 0);

        this.m_maxCircles = maxCircles;
        this.m_ncircles = 0;
        this.m_circles = new Array(this.m_maxCircles);

        for (var i = 0; i < this.m_maxCircles; i++) {
          this.m_circles[i] = new ObstacleCircle();
        }

        this.m_maxSegments = maxSegments;
        this.m_nsegments = 0;
        this.m_segments = new Array(this.m_maxSegments);

        for (var _i = 0; _i < this.m_maxSegments; _i++) {
          this.m_segments[_i] = new ObstacleSegment();
        }
      }

      _createClass(ObstacleAvoidanceQuery, [{
        key: "reset",
        value: function reset() {
          this.m_ncircles = 0;
          this.m_nsegments = 0;
        }
      }, {
        key: "addCircle",
        value: function addCircle(pos, rad, vel, dvel) {
          if (this.m_ncircles >= this.m_maxCircles) return;
          var cir = this.m_circles[this.m_ncircles++];
          DetourCommon.vCopy(cir.p, pos);
          cir.rad = rad;
          DetourCommon.vCopy(cir.vel, vel);
          DetourCommon.vCopy(cir.dvel, dvel);
        }
      }, {
        key: "addSegment",
        value: function addSegment(p, q) {
          if (this.m_nsegments >= this.m_maxSegments) return;
          var seg = this.m_segments[this.m_nsegments++];
          DetourCommon.vCopy(seg.p, p);
          DetourCommon.vCopy(seg.q, q);
        }
      }, {
        key: "getObstacleCircleCount",
        value: function getObstacleCircleCount() {
          return this.m_ncircles;
        }
      }, {
        key: "getObstacleCircle",
        value: function getObstacleCircle(i) {
          return this.m_circles[i];
        }
      }, {
        key: "getObstacleSegmentCount",
        value: function getObstacleSegmentCount() {
          return this["this"].m_nsegments;
        }
      }, {
        key: "getObstacleSegment",
        value: function getObstacleSegment(i) {
          return this.m_segments[i];
        }
      }, {
        key: "prepare",
        value: function prepare(pos, dvel) {
          // Prepare obstacles
          for (var i = 0; i < this.m_ncircles; ++i) {
            var cir = this.m_circles[i]; // Side

            var pa = pos;
            var pb = cir.p;
            var orig = [0, 0, 0];
            var dv = new Array(3);
            DetourCommon.vCopy(cir.dp, DetourCommon.vSub(pb, pa));
            DetourCommon.vNormalize(cir.dp);
            dv = DetourCommon.vSub(cir.dvel, dvel);
            var a = DetourCommon.triArea2D3(orig, cir.dp, dv);

            if (a < 0.01) {
              cir.np[0] = -cir.dp[2];
              cir.np[2] = cir.dp[0];
            } else {
              cir.np[0] = cir.dp[2];
              cir.np[2] = -cir.dp[0];
            }
          }

          for (var _i2 = 0; _i2 < this.m_nsegments; ++_i2) {
            var seg = this.m_segments[_i2]; // Precalc if the agent is really close to the segment.

            var r = 0.01;
            var dt = DetourCommon.distancePtSegSqr2D3(pos, seg.p, seg.q);
            seg.touch = dt[0] < DetourCommon.sqr(r);
          }
        }
      }, {
        key: "sweepCircleCircle",
        value: function sweepCircleCircle(c0, r0, v, c1, r1) {
          var EPS = 0.0001;
          var s = DetourCommon.vSub(c1, c0);
          var r = r0 + r1;
          var c = DetourCommon.vDot2D(s, s) - r * r;
          var a = DetourCommon.vDot2D(v, v);
          if (a < EPS) return new SweepCircleCircleResult(false, 0, 0); // not moving
          // Overlap, calc time to exit.

          var b = DetourCommon.vDot2D(v, s);
          var d = b * b - a * c;
          if (d < 0.0) return new SweepCircleCircleResult(false, 0, 0); // no intersection.

          a = 1.0 / a;
          var rd = Math.sqrt(d);
          return new SweepCircleCircleResult(true, (b - rd) * a, (b + rd) * a);
        }
      }, {
        key: "isectRaySeg",
        value: function isectRaySeg(ap, u, bp, bq) {
          var v = DetourCommon.vSub(bq, bp);
          var w = DetourCommon.vSub(ap, bp);
          var d = DetourCommon.vPerp2D(u, v);
          if (Math.abs(d) < 1e-6) return [false, 0];
          d = 1.0 / d;
          var t = DetourCommon.vPerp2D(v, w) * d;
          if (t < 0 || t > 1) return [false, 0];
          var s = DetourCommon.vPerp2D(u, w) * d;
          if (s < 0 || s > 1) return [false, 0];
          return [true, t];
        }
        /** Calculate the collision penalty for a given velocity vector
         * 
         * @param vcand sampled velocity
         * @param dvel desired velocity
         * @param minPenalty threshold penalty for early out
         */

      }, {
        key: "processSample",
        value: function processSample(vcand, cs, pos, rad, vel, dvel, minPenalty, debug) {
          // penalty for straying away from the desired and current velocities
          var vpen = this.m_params.weightDesVel * (DetourCommon.vDist2D(vcand, dvel) * this.m_invVmax);
          var vcpen = this.m_params.weightCurVel * (DetourCommon.vDist2D(vcand, vel) * this.m_invVmax); // find the threshold hit time to bail out based on the early out penalty
          // (see how the penalty is calculated below to understnad)

          var minPen = minPenalty - vpen - vcpen;
          var tThresold = (this.m_params.weightToi / minPen - 0.1) * this.m_params.horizTime;
          if (tThresold - this.m_params.horizTime > -Number.MIN_VALUE) return minPenalty; // already too much
          // Find min time of impact and exit amongst all obstacles.

          var tmin = this.m_params.horizTime;
          var side = 0;
          var nside = 0;

          for (var i = 0; i < this.m_ncircles; ++i) {
            var cir = this.m_circles[i]; // RVO

            var vab = DetourCommon.vScale(vcand, 2);
            vab = DetourCommon.vSub(vab, vel);
            vab = DetourCommon.vSub(vab, cir.vel); // Side

            side += DetourCommon.clamp(Math.min(DetourCommon.vDot2D(cir.dp, vab) * 0.5 + 0.5, DetourCommon.vDot2D(cir.np, vab) * 2), 0.0, 1.0);
            nside++;
            var sres = this.sweepCircleCircle(pos, rad, vab, cir.p, cir.rad);
            if (!sres.intersection) continue;
            var htmin = sres.htmin,
                htmax = sres.htmax; // Handle overlapping obstacles.

            if (htmin < 0.0 && htmax > 0.0) {
              // Amore when overlapped.
              htmin = -htmin * 0.5;
            }

            if (htmin >= 0.0) {
              // The closest obstacle is somewhere ahead of us, keep track of nearest obstacle.
              if (htmin < tmin) {
                tmin = htmin;
                if (tmin < tThresold) return minPenalty;
              }
            }
          }

          for (var _i3 = 0; _i3 < this.m_nsegments; ++_i3) {
            var seg = this.m_segments[_i3];
            var _htmin = 0;

            if (seg.touch) {
              // Special case when the agent is very close to the segment.
              var sdir = DetourCommon.vSub(seg.q, seg.p);
              var snorm = new Array(3);
              snorm[0] = -sdir[2];
              snorm[2] = sdir[0]; // If the velocity is pointing towards the segment, no collision.

              if (DetourCommon.vDot2D(snorm, vcand) < 0.0) continue; // Else immediate collision.

              _htmin = 0.0;
            } else {
              var ires = this.isectRaySeg(pos, vcand, seg.p, seg.q);
              if (!ires[0]) continue;
              _htmin = ires[1];
            } // Aless when facing walls.


            _htmin *= 2.0; // The closest obstacle is somewhere ahead of us, keep track of nearest obstacle.

            if (_htmin < tmin) {
              tmin = _htmin;
              if (tmin < tThresold) return minPenalty;
            }
          } // Normalize side bias, to prevent it dominating too much.


          if (nside != 0) side /= nside;
          var spen = this.m_params.weightSide * side;
          var tpen = this.m_params.weightToi * (1.0 / (0.1 + tmin * this.m_invHorizTime));
          var penalty = vpen + vcpen + spen + tpen; // Store different penalties for debug viewing

          if (debug != null) debug.addSample(vcand, cs, penalty, vpen, vcpen, spen, tpen);
          return penalty;
        }
      }, {
        key: "sampleVelocityGrid",
        value: function sampleVelocityGrid(pos, rad, vmax, vel, dvel, params, debug) {
          this.prepare(pos, dvel);
          this.m_params = params;
          this.m_invHorizTime = 1.0 / this.m_params.horizTime;
          this.m_vmax = vmax;
          this.m_invVmax = vmax > 0 ? 1.0 / vmax : Number.MAX_VALUE;
          var nvel = new Array(3);
          DetourCommon.vSet(nvel, 0, 0, 0);
          if (debug != null) debug.reset();
          cvx = dvel[0] * this.m_params.velBias;
          cvz = dvel[2] * this.m_params.velBias;
          cs = vmax * 2 * (1 - this.m_params.velBias) / (this.m_params.gridSize - 1);
          half = (this.m_params.gridSize - 1) * cs * 0.5;
          minPenalty = Number.MAX_VALUE;
          var ns = 0;

          for (var y = 0; y < this.m_params.gridSize; ++y) {
            for (var x = 0; x < this.m_params.gridSize; ++x) {
              var vcand = new Array(3);
              DetourCommon.vSet(vcand, cvx + x * cs - half, 0, cvz + y * cs - half);
              if (DetourCommon.sqr(vcand[0]) + DetourCommon.sqr(vcand[2]) > DetourCommon.sqr(vmax + cs / 2)) continue;
              penalty = this.processSample(vcand, cs, pos, rad, vel, dvel, minPenalty, debug);
              ns++;

              if (penalty < minPenalty) {
                minPenalty = penalty;
                DetourCommon.vCopy(nvel, vcand);
              }
            }
          }

          return [ns, nvel];
        } // vector normalization that ignores the y-component.

      }, {
        key: "dtNormalize2D",
        value: function dtNormalize2D(v) {
          var d = Math.sqrt(v[0] * v[0] + v[2] * v[2]);
          if (d == 0) return;
          d = 1.0 / d;
          v[0] *= d;
          v[2] *= d;
        } // vector normalization that ignores the y-component.

      }, {
        key: "dtRotate2D",
        value: function dtRotate2D(v, ang) {
          var dest = new Array(3);
          var c = Math.cos(ang);
          var s = Math.sin(ang);
          dest[0] = v[0] * c - v[2] * s;
          dest[2] = v[0] * s + v[2] * c;
          dest[1] = v[1];
          return dest;
        }
      }, {
        key: "sampleVelocityAdaptive",
        value: function sampleVelocityAdaptive(pos, rad, vmax, vel, dvel, params, debug) {
          this.prepare(pos, dvel);
          this.m_params = params;
          this.m_invHorizTime = 1.0 / this.m_params.horizTime;
          this.m_vmax = vmax;
          this.m_invVmax = vmax > 0 ? 1.0 / vmax : Number.MAX_VALUE;
          var nvel = new Array(3);
          DetourCommon.vSet(nvel, 0, 0, 0);
          if (debug != null) debug.reset(); // Build sampling pattern aligned to desired velocity.

          var pat = new Array((ObstacleAvoidanceQuery.DT_MAX_PATTERN_DIVS * ObstacleAvoidanceQuery.DT_MAX_PATTERN_RINGS + 1) * 2);
          var npat = 0;
          var ndivs = this.m_params.adaptiveDivs;
          var nrings = this.m_params.adaptiveRings;
          var depth = this.m_params.adaptiveDepth;
          var nd = DetourCommon.clamp(ndivs, 1, ObstacleAvoidanceQuery.DT_MAX_PATTERN_DIVS);
          var nr = DetourCommon.clamp(nrings, 1, ObstacleAvoidanceQuery.DT_MAX_PATTERN_RINGS);
          var da = 1.0 / nd * ObstacleAvoidanceQuery.DT_PI * 2;
          var ca = Math.cos(da);
          var sa = Math.sin(da); // desired direction

          var ddir = new Array(6);
          DetourCommon.vCopy(ddir, dvel);
          this.dtNormalize2D(ddir);
          var rotated = this.dtRotate2D(ddir, da * 0.5); // rotated by da/2

          ddir[3] = rotated[0];
          ddir[4] = rotated[1];
          ddir[5] = rotated[2]; // Always add sample at zero

          pat[npat * 2 + 0] = 0;
          pat[npat * 2 + 1] = 0;
          npat++;

          for (var j = 0; j < nr; ++j) {
            var r = (nr - j) / nr;
            pat[npat * 2 + 0] = ddir[j % 2 * 3] * r;
            pat[npat * 2 + 1] = ddir[j % 2 * 3 + 2] * r;
            var last1 = npat * 2;
            var last2 = last1;
            npat++;

            for (var i = 1; i < nd - 1; i += 2) {
              // get next poPoly on the "right" (rotate CW)
              pat[npat * 2 + 0] = pat[last1] * ca + pat[last1 + 1] * sa;
              pat[npat * 2 + 1] = -pat[last1] * sa + pat[last1 + 1] * ca; // get next poPoly on the "left" (rotate CCW)

              pat[npat * 2 + 2] = pat[last2] * ca - pat[last2 + 1] * sa;
              pat[npat * 2 + 3] = pat[last2] * sa + pat[last2 + 1] * ca;
              last1 = npat * 2;
              last2 = last1 + 2;
              npat += 2;
            }

            if ((nd & 1) == 0) {
              pat[npat * 2 + 2] = pat[last2] * ca - pat[last2 + 1] * sa;
              pat[npat * 2 + 3] = pat[last2] * sa + pat[last2 + 1] * ca;
              npat++;
            }
          } // Start sampling.


          var cr = vmax * (1.0 - this.m_params.velBias);
          var res = new Array(3);
          DetourCommon.vSet(res, dvel[0] * this.m_params.velBias, 0, dvel[2] * this.m_params.velBias);
          var ns = 0;

          for (var k = 0; k < depth; ++k) {
            var _minPenalty = Number.MAX_VALUE;
            var bvel = new Array(3);
            DetourCommon.vSet(bvel, 0, 0, 0);

            for (var _i4 = 0; _i4 < npat; ++_i4) {
              var vcand = new Array(3);
              DetourCommon.vSet(vcand, res[0] + pat[_i4 * 2 + 0] * cr, 0, res[2] + pat[_i4 * 2 + 1] * cr);
              if (DetourCommon.sqr(vcand[0]) + DetourCommon.sqr(vcand[2]) > DetourCommon.sqr(vmax + 0.001)) continue;

              var _penalty = this.processSample(vcand, cr / 10, pos, rad, vel, dvel, _minPenalty, debug);

              ns++;

              if (_penalty < _minPenalty) {
                _minPenalty = _penalty;
                DetourCommon.vCopy(bvel, vcand);
              }
            }

            DetourCommon.vCopy(res, bvel);
            cr *= 0.5;
          }

          DetourCommon.vCopy(nvel, res);
          return [ns, nvel];
        }
      }]);

      return ObstacleAvoidanceQuery;
    }();

    _defineProperty(ObstacleAvoidanceQuery, "DT_MAX_PATTERN_DIVS", 32);

    _defineProperty(ObstacleAvoidanceQuery, "DT_MAX_PATTERN_RINGS", 4);

    _defineProperty(ObstacleAvoidanceQuery, "DT_PI", 3.14159265);

    var _temp$4;

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var ProximityGrid = /*#__PURE__*/function () {
      function ProximityGrid(m_cellSize, m_invCellSize) {
        _classCallCheck(this, ProximityGrid);

        _defineProperty(this, "m_cellSize", void 0);

        _defineProperty(this, "m_invCellSize", void 0);

        _defineProperty(this, "items", {});

        _defineProperty(this, "m_bounds", new Array(4));

        this.m_cellSize = m_cellSize;
        this.m_invCellSize = m_invCellSize;
        this.items = {};
      }

      _createClass(ProximityGrid, [{
        key: "clear",
        value: function clear() {
          this.items = {};
          this.m_bounds[0] = 0xfff;
          this.m_bounds[1] = 0xfff;
          this.m_bounds[2] = -0xfff;
          this.m_bounds[3] = -0xfff;
        }
      }, {
        key: "addItem",
        value: function addItem(id, minx, miny, maxx, maxy) {
          var iminx = Math.floor(minx * this.m_invCellSize);
          var iminy = Math.floor(miny * this.m_invCellSize);
          var imaxx = Math.floor(maxx * this.m_invCellSize);
          var imaxy = Math.floor(maxy * this.m_invCellSize);
          this.m_bounds[0] = Math.min(this.m_bounds[0], iminx);
          this.m_bounds[1] = Math.min(this.m_bounds[1], iminy);
          this.m_bounds[2] = Math.min(this.m_bounds[2], imaxx);
          this.m_bounds[3] = Math.min(this.m_bounds[3], imaxy);

          for (var _y = iminy; _y <= imaxy; ++_y) {
            for (var _x = iminx; _x <= imaxx; ++_x) {
              var _key = new ProximityGrid.ItemKey(_x, _y);

              var _ids = this.items[JSON.stringify(_key)];

              if (_ids == null) {
                _ids = [];
                this.items[JSON.stringify(_key)] = _ids;
              }

              _ids.push(id);
            }
          }
        }
      }, {
        key: "queryItems",
        value: function queryItems(minx, miny, maxx, maxy) {
          var iminx = Math.floor(minx * this.m_invCellSize);
          var iminy = Math.floor(miny * this.m_invCellSize);
          var imaxx = Math.floor(maxx * this.m_invCellSize);
          var imaxy = Math.floor(maxy * this.m_invCellSize);
          var result = new Set();

          for (var _y2 = iminy; _y2 <= imaxy; ++_y2) {
            for (var _x2 = iminx; _x2 <= imaxx; ++_x2) {
              var _key2 = new ProximityGrid.ItemKey(_x2, _y2);

              var _ids2 = this.items[JSON.stringify(_key2)];

              if (_ids2 != null) {
                result.add.apply(result, _toConsumableArray(_ids2));
              }
            }
          }

          return result;
        }
      }, {
        key: "getItemCountAt",
        value: function getItemCountAt(x, y) {
          key = new ItemKey(x, y);
          ids = this.items[key];
          return ids != null ? ids.length : 0;
        }
      }]);

      return ProximityGrid;
    }();

    _defineProperty(ProximityGrid, "ItemKey", (_temp$4 = /*#__PURE__*/function () {
      function ItemKey(x, y) {
        _classCallCheck(this, ItemKey);

        _defineProperty(this, "x", void 0);

        _defineProperty(this, "y", void 0);

        this.x = x;
        this.y = y;
      }

      _createClass(ItemKey, [{
        key: "hashCode",
        value: function hashCode() {
          prime = 31;
          result = 1;
          result = prime * result + x;
          result = prime * result + y;
          return result;
        }
      }, {
        key: "equals",
        value: function equals(obj) {
          if (this == obj) return true;
          if (obj == null) return false;
          if (getClass() != obj.getClass()) return false;
          other = obj;
          if (x != other.x) return false;
          if (y != other.y) return false;
          return true;
        }
      }]);

      return ItemKey;
    }(), _temp$4));

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var PathQuery = function PathQuery() {
      _classCallCheck(this, PathQuery);

      _defineProperty(this, "ref", void 0);

      _defineProperty(this, "startPos", new Array(3));

      _defineProperty(this, "endPos", new Array(3));

      _defineProperty(this, "startRef", void 0);

      _defineProperty(this, "endRef", void 0);

      _defineProperty(this, "path", []);

      _defineProperty(this, "status", void 0);

      _defineProperty(this, "keepAlive", void 0);

      _defineProperty(this, "filter", void 0);
    } /// < TODO: This is potentially dangerous!
    ;

    var PathQueue = /*#__PURE__*/function () {
      // in update ticks.
      function PathQueue(maxSearchNodeCount, nav) {
        _classCallCheck(this, PathQueue);

        _defineProperty(this, "m_queue", new Array(PathQueue.MAX_QUEUE));

        _defineProperty(this, "m_nextHandle", 1);

        _defineProperty(this, "m_queueHead", void 0);

        _defineProperty(this, "m_navquery", void 0);

        this.m_navquery = new NavMeshQuery(nav);

        for (var i = 0; i < PathQueue.MAX_QUEUE; ++i) {
          this.m_queue[i] = new PathQuery();
          this.m_queue[i].ref = PathQueue.DT_PATHQ_INVALID;
          this.m_queue[i].path = new Array(256);
        }

        this.m_queueHead = 0;
      }

      _createClass(PathQueue, [{
        key: "update",
        value: function update(maxIters) {
          // Update path request until there is nothing to update
          // or upto maxIters pathfinder iterations has been consumed.
          var iterCount = maxIters;

          for (var i = 0; i < PathQueue.MAX_QUEUE; ++i) {
            var q = this.m_queue[this.m_queueHead % PathQueue.MAX_QUEUE]; // Skip inactive requests.

            if (q.ref == PathQueue.DT_PATHQ_INVALID) {
              this.m_queueHead++;
              continue;
            } // Handle compPolyed request.


            if (q.status != null && (q.status == Status.SUCCSESS || q.status == Status.PARTIAL_RESULT || q.status == Status.FAILURE)) {
              // If the path result has not been read in few frames, free the slot.
              q.keepAlive++;

              if (q.keepAlive > PathQueue.MAX_KEEP_ALIVE) {
                q.ref = PathQueue.DT_PATHQ_INVALID;
                q.status = null;
              }

              this.m_queueHead++;
              continue;
            } // Handle query start.


            if (q.status == null) {
              q.status = this.m_navquery.initSlicedFindPath(q.startRef, q.endRef, q.startPos, q.endPos, q.filter, 0);
            } // Handle query in progress.


            if (q.status == Status.IN_PROGRESS) {
              var iters = 0;
              var res = this.m_navquery.updateSlicedFindPath(iterCount);
              iters = res.getIterations();
              q.status = res.getStatus();
              iterCount -= iters;
            }

            if (q.status == Status.SUCCSESS || q.status == Status.PARTIAL_RESULT) {
              var path = this.m_navquery.finalizeSlicedFindPath();
              q.status = path.getStatus();
              q.path = path.getRefs();
            }

            if (iterCount <= 0) break;
            this.m_queueHead++;
          }
        }
      }, {
        key: "request",
        value: function request(startRef, endRef, startPos, endPos, filter) {
          // Find empty slot
          var slot = -1;

          for (var i = 0; i < PathQueue.MAX_QUEUE; ++i) {
            if (this.m_queue[i].ref == PathQueue.DT_PATHQ_INVALID) {
              slot = i;
              break;
            }
          } // Could not find slot.


          if (slot == -1) return PathQueue.DT_PATHQ_INVALID;
          var ref = this.m_nextHandle++;
          if (this.m_nextHandle == PathQueue.DT_PATHQ_INVALID) this.m_nextHandle++;
          var q = this.m_queue[slot];
          q.ref = ref;
          DetourCommon.vCopy(q.startPos, startPos);
          q.startRef = startRef;
          DetourCommon.vCopy(q.endPos, endPos);
          q.endRef = endRef;
          q.status = null;
          q.filter = filter;
          q.keepAlive = 0;
          return ref;
        }
      }, {
        key: "getRequestStatus",
        value: function getRequestStatus(ref) {
          for (var i = 0; i < PathQueue.MAX_QUEUE; ++i) {
            if (this.m_queue[i].ref == ref) return this.m_queue[i].status;
          }

          return Status.FAILURE;
        }
      }, {
        key: "getPathResult",
        value: function getPathResult(ref) {
          for (var i = 0; i < PathQueue.MAX_QUEUE; ++i) {
            if (this.m_queue[i].ref == ref) {
              var q = this.m_queue[i]; // Free request for reuse.

              q.ref = PathQueue.DT_PATHQ_INVALID;
              q.status = null;
              return new FindPathResult(Status.SUCCSESS, q.path);
            }
          }

          return new FindPathResult(Status.FAILURE, null);
        }
      }]);

      return PathQueue;
    }();

    _defineProperty(PathQueue, "MAX_QUEUE", 8);

    _defineProperty(PathQueue, "DT_PATHQ_INVALID", 0);

    _defineProperty(PathQueue, "MAX_KEEP_ALIVE", 2);

    /**
     * Represents a dynamic polygon corridor used to plan agent movement.
     * 
     * The corridor is loaded with a path, usually obtained from a
     * #NavMeshQuery::findPath() query. The corridor is then used to plan local
     * movement, with the corridor automatically updating as needed to deal with
     * inaccurate agent locomotion.
     * 
     * Example of a common use case:
     * 
     * -# Construct the corridor object and call 
     * -# Obtain a path from a #dtNavMeshQuery object. 
     * -# Use #reset() to set the agent's current position. (At the beginning of the path.) -# Use
     * #setCorridor() to load the path and target. -# Use #findCorners() to plan
     * movement. (This handles dynamic path straightening.) -# Use #movePosition()
     * to feed agent movement back into the corridor. (The corridor will
     * automatically adjust as needed.) -# If the target is moving, use
     * #moveTargetPosition() to update the end of the corridor. (The corridor will
     * automatically adjust as needed.) -# Repeat the previous 3 steps to continue
     * to move the agent.
     * 
     * The corridor position and target are always constrained to the navigation
     * mesh.
     * 
     * One of the difficulties in maintaining a path is that ing poPoly errors,
     * locomotion inaccuracies, and/or local steering can result in the agent
     * crossing the boundary of the path corridor, temporarily invalidating the
     * path. This class uses local mesh queries to detect and update the corridor as
     * needed to handle these types of issues.
     * 
     * The fact that local mesh queries are used to move the position and target
     * locations results in two beahviors that need to be considered:
     * 
     * Every time a move function is used there is a chance that the path will
     * become non-optimial. Basically, the further the target is moved from its
     * original location, and the further the position is moved outside the original
     * corridor, the more likely the path will become non-optimal. This issue can be
     * addressed by periodically running the #optimizePathTopology() and
     * #optimizePathVisibility() methods.
     * 
     * All local mesh queries have distance limitations. (Review the #dtNavMeshQuery
     * methods for details.) So the most accurate use case is to move the position
     * and target in small increments. If a large increment is used, then the
     * corridor may not be able to accurately find the new location. Because of this
     * limiation, if a position is moved in a large increment, then compare the
     * desired and resulting polygon references. If the two do not match, then path
     * replanning may be needed. E.g. If you move the target, check #getLastPoly()
     * to see if it is the expected polygon.
     *
     */

    var PathCorridor = /*#__PURE__*/function () {
      _createClass(PathCorridor, [{
        key: "mergeCorridorStartMoved",
        value: function mergeCorridorStartMoved(path, visited) {
          var furthestPath = -1;
          var furthestVisited = -1; // Find furthest common polygon.

          for (var i = path.length - 1; i >= 0; --i) {
            var found = false;

            for (var j = visited.length - 1; j >= 0; --j) {
              if (path[i] == visited[j]) {
                furthestPath = i;
                furthestVisited = j;
                found = true;
              }
            }

            if (found) break;
          } // If no intersection found just return current path.


          if (furthestPath == -1 || furthestVisited == -1) return path; // Concatenate paths.
          // Adjust beginning of the buffer to include the visited.

          var result = []; // Store visited

          for (var _i = visited.length - 1; _i > furthestVisited; --_i) {
            result.push(visited[_i]);
          }

          result.push.apply(result, _toConsumableArray(path.slice(furthestPath, path.length)));
          return result;
        }
      }, {
        key: "mergeCorridorEndMoved",
        value: function mergeCorridorEndMoved(path, visited) {
          var furthestPath = -1;
          var furthestVisited = -1; // Find furthest common polygon.

          for (var i = 0; i < path.length; ++i) {
            var found = false;

            for (var j = visited.length - 1; j >= 0; --j) {
              if (path[i] == visited[j]) {
                furthestPath = i;
                furthestVisited = j;
                found = true;
              }
            }

            if (found) break;
          } // If no intersection found just return current path.


          if (furthestPath == -1 || furthestVisited == -1) return path; // Concatenate paths.

          var result = path.subList(0, furthestPath);
          result.addAll(visited.subList(furthestVisited, visited.length));
          return result;
        }
      }, {
        key: "mergeCorridorStartShortcut",
        value: function mergeCorridorStartShortcut(path, visited) {
          var furthestPath = -1;
          var furthestVisited = -1; // Find furthest common polygon.

          for (var i = path.length - 1; i >= 0; --i) {
            var found = false;

            for (var j = visited.length - 1; j >= 0; --j) {
              if (path[i] == visited[j]) {
                furthestPath = i;
                furthestVisited = j;
                found = true;
              }
            }

            if (found) break;
          } // If no intersection found just return current path.


          if (furthestPath == -1 || furthestVisited <= 0) return path; // Concatenate paths.
          // Adjust beginning of the buffer to include the visited.

          var result = visited.subList(0, furthestVisited);
          result.addAll(path.subList(furthestPath, path.length));
          return result;
        }
        /**
         * Allocates the corridor's path buffer.
         */

      }]);

      function PathCorridor() {
        _classCallCheck(this, PathCorridor);

        _defineProperty(this, "m_pos", new Array(3));

        _defineProperty(this, "m_target", new Array(3));

        _defineProperty(this, "m_path", []);

        this.m_path = [];
      }
      /**
       * Resets the path corridor to the specified position.
       * @param ref The polygon reference containing the position.
       * @param pos The new position in the corridor. [(x, y, z)]
       */


      _createClass(PathCorridor, [{
        key: "reset",
        value: function reset(ref, pos) {
          this.m_path = [];
          this.m_path.push(ref);
          DetourCommon.vCopy(this.m_pos, pos);
          DetourCommon.vCopy(this.m_target, pos);
        }
        /**
         * Finds the corners in the corridor from the position toward the target.
         * (The straightened path.)
         * 
         * This is the function used to plan local movement within the corridor. One
         * or more corners can be detected in order to plan movement. It performs
         * essentially the same function as #dtNavMeshQuery::findStraightPath.
         * 
         * Due to internal optimizations, the maximum number of corners returned
         * will be (@p maxCorners - 1) For example: If the buffers are sized to hold
         * 10 corners, the function will never return more than 9 corners. So if 10
         * corners are needed, the buffers should be sized for 11 corners.
         * 
         * If the target is within range, it will be the last corner and have a
         * polygon reference id of zero.
         * @param filter 
         * 
         * @param[in] navquery The query object used to build the corridor.
         * @return Corners
         */

      }, {
        key: "findCorners",
        value: function findCorners(maxCorners, navquery, filter) {
          var MIN_TARGET_DIST = DetourCommon.sqr(0.01);
          var path = navquery.findStraightPath(this.m_pos, this.m_target, this.m_path, maxCorners, 0); // Prune points in the beginning of the path which are too close.
          // for (let iter = path.iterator(); iter.hasNext();) {
          // 	let spi = iter.next();
          // 	if ((spi.getFlags() & NavMeshQuery.DT_STRAIGHTPATH_OFFMESH_CONNECTION) != 0
          // 		|| DetourCommon.vDist2D(spi.getPos(), this.m_pos) > MIN_TARGET_DIST) {
          // 		break;
          // 	}
          // 	iter.remove();
          // }
          // TODO

          var newPath = [];
          var i = 0;
          var l = path.length;

          for (; i < path.length; i++) {
            var spi = path[i];

            if ((spi.getFlags() & NavMeshQuery.DT_STRAIGHTPATH_OFFMESH_CONNECTION) != 0 || DetourCommon.vDist2D(spi.getPos(), this.m_pos) > MIN_TARGET_DIST) {
              break;
            }
          }

          var j = i; // for(; j < l; j++);
          // {
          // 	newPath.push(path[j])
          // }

          while (j < l) {
            newPath.push(path[j]);
            j++;
          }

          path = newPath;
          return path;
        }
        /**
         * Attempts to optimize the path if the specified poPoly is visible from the
         * current position.
         * 
         * Inaccurate locomotion or dynamic obstacle avoidance can force the agent
         * position significantly outside the original corridor. Over time this can
         * result in the formation of a non-optimal corridor. Non-optimal paths can
         * also form near the corners of tiles.
         * 
         * This function uses an efficient local visibility search to try to
         * optimize the corridor between the current position and @p next.
         * 
         * The corridor will change only if @p next is visible from the current
         * position and moving directly toward the poPoly is better than following
         * the existing path.
         * 
         * The more inaccurate the agent movement, the more beneficial this function
         * becomes. Simply adjust the frequency of the call to match the needs to
         * the agent.
         * 
         * This function is not suitable for let distance searches.
         * 
         * @param next
         *            The poPoly to search toward. [(x, y, z])
         * @param pathOptimizationRange
         *            The maximum range to search. [Limit: > 0]
         * @param navquery
         *            The query object used to build the corridor.
         * @param filter
         *            The filter to apply to the operation.
         */

      }, {
        key: "optimizePathVisibility",
        value: function optimizePathVisibility(next, pathOptimizationRange, navquery, filter) {
          // Clamp the ray to max distance.
          var dist = DetourCommon.vDist2D(this.m_pos, next); // If too close to the goal, do not try to optimize.

          if (dist < 0.01) return; // Overshoot a little. This helps to optimize open fields in tiled
          // meshes.

          dist = Math.min(dist + 0.01, pathOptimizationRange); // Adjust ray length.

          var delta = DetourCommon.vSub(next, this.m_pos);
          var goal = DetourCommon.vMad(this.m_pos, delta, pathOptimizationRange / dist);
          var rc = navquery.raycast(this.m_path[0], this.m_pos, goal, filter, 0, 0);

          if (rc.path.length > 1 && rc.t > 0.99) {
            this.m_path = this.mergeCorridorStartShortcut(this.m_path, rc.path);
          }
        }
        /**
         * Attempts to optimize the path using a local area search. (Partial
         * replanning.)
         * 
         * Inaccurate locomotion or dynamic obstacle avoidance can force the agent
         * position significantly outside the original corridor. Over time this can
         * result in the formation of a non-optimal corridor. This function will use
         * a local area path search to try to re-optimize the corridor.
         * 
         * The more inaccurate the agent movement, the more beneficial this function
         * becomes. Simply adjust the frequency of the call to match the needs to
         * the agent.
         * 
         * @param navquery The query object used to build the corridor.
         * @param filter The filter to apply to the operation.
         * 
         */

      }, {
        key: "optimizePathTopology",
        value: function optimizePathTopology(navquery, filter) {
          if (this.m_path.length < 3) return false;
          var MAX_ITER = 32;
          navquery.initSlicedFindPath(this.m_path[0], this.m_path[this.m_path.length - 1], this.m_pos, this.m_target, filter, 0);
          navquery.updateSlicedFindPath(MAX_ITER);
          var fpr = navquery.finalizeSlicedFindPathPartial(this.m_path);

          if (fpr.getStatus().isSuccess() && fpr.getRefs().length > 0) {
            this.m_path = mergeCorridorStartShortcut(this.m_path, fpr.getRefs());
            return true;
          }

          return false;
        }
      }, {
        key: "moveOverOffmeshConnection",
        value: function moveOverOffmeshConnection(offMeshConRef, refs, start, end, navquery) {
          // Advance the path up to and over the off-mesh connection.
          var prevRef = 0;
          var polyRef = this.m_path[0];
          var npos = 0;

          while (npos < this.m_path.length && polyRef != offMeshConRef) {
            prevRef = polyRef;
            polyRef = this.m_path[npos];
            npos++;
          }

          if (npos == this.m_path.length) {
            // Could not find offMeshConRef
            return false;
          } // Prune path


          this.m_path = this.m_path.subList(npos, this.m_path.length);
          refs[0] = prevRef;
          refs[1] = polyRef;
          var nav = navquery.getAttachedNavMesh();
          var startEnd = nav.getOffMeshConnectionPolyEndPoints(refs[0], refs[1]);
          DetourCommon.vCopy(this.m_pos, startEnd.second);
          DetourCommon.vCopy(start, startEnd.first);
          DetourCommon.vCopy(end, startEnd.second);
          return true;
        }
        /**
         * Moves the position from the current location to the desired location,
         * adjusting the corridor as needed to reflect the change.
         * 
         * Behavior:
         * 
         * - The movement is constrained to the surface of the navigation mesh. -
         * The corridor is automatically adjusted (shorted or lengthened) in order
         * to remain valid. - The new position will be located in the adjusted
         * corridor's first polygon.
         * 
         * The expected use case is that the desired position will be 'near' the
         * current corridor. What is considered 'near' depends on local polygon
         * density, query search extents, etc.
         * 
         * The resulting position will differ from the desired position if the
         * desired position is not on the navigation mesh, or it can't be reached
         * using a local search.
         * 
         * @param npos
         *            The desired new position. [(x, y, z)]
         * @param navquery
         *            The query object used to build the corridor.
         * @param filter
         *            The filter to apply to the operation.
         */

      }, {
        key: "movePosition",
        value: function movePosition(npos, navquery, filter) {
          // Move aPoly navmesh and update new position.
          var masResult = navquery.moveAlongSurface(this.m_path[0], this.m_pos, npos, filter);
          this.m_path = this.mergeCorridorStartMoved(this.m_path, masResult.getVisited()); // Adjust the position to stay on top of the navmesh.

          DetourCommon.vCopy(this.m_pos, masResult.getResultPos());

          try {
            this.m_pos[1] = navquery.getPolyHeight(this.m_path[0], masResult.getResultPos());
          } catch (e) {// Silently disregard the returned status of DT_FAILURE | DT_INVALID_PARAM to stay
            // consistent with what the library in C++ does, see DetourPathCorridor.cpp.
          }
        }
        /**
         * Moves the target from the curent location to the desired location,
         * adjusting the corridor as needed to reflect the change. Behavior: - The
         * movement is constrained to the surface of the navigation mesh. - The
         * corridor is automatically adjusted (shorted or lengthened) in order to
         * remain valid. - The new target will be located in the adjusted corridor's
         * last polygon.
         * 
         * The expected use case is that the desired target will be 'near' the
         * current corridor. What is considered 'near' depends on local polygon
         * density, query search extents, etc. The resulting target will differ from
         * the desired target if the desired target is not on the navigation mesh,
         * or it can't be reached using a local search.
         *
         * @param npos
         *            The desired new target position. [(x, y, z)]
         * @param navquery
         *            The query object used to build the corridor.
         * @param filter
         *            The filter to apply to the operation.
         */

      }, {
        key: "moveTargetPosition",
        value: function moveTargetPosition(npos, navquery, filter) {
          // Move aPoly navmesh and update new position.
          var masResult = navquery.moveAlongSurface(this.m_path[this.m_path.length - 1], this.m_target, npos, filter);
          this.m_path = mergeCorridorEndMoved(this.m_path, masResult.getVisited()); // TODO: should we do that?
          // Adjust the position to stay on top of the navmesh.

          /*
           *  h = m_target[1]; navquery=>getPolyHeight(this.m_path[m_npath-1],
           * result, &h); result[1] = h;
           */

          DetourCommon.vCopy(this.m_target, masResult.getResultPos());
        }
        /**
         * Loads a new path and target into the corridor. The current corridor
         * position is expected to be within the first polygon in the path. The
         * target is expected to be in the last polygon.
         * 
         * @warning The size of the path must not exceed the size of corridor's path
         *          buffer set during #init().
         * @param target
         *            The target location within the last polygon of the path. [(x,
         *            y, z)]
         * @param path
         *            The path corridor.
         */

      }, {
        key: "setCorridor",
        value: function setCorridor(target, path) {
          DetourCommon.vCopy(this.m_target, target);
          this.m_path = _toConsumableArray(path);
        }
      }, {
        key: "fixPathStart",
        value: function fixPathStart(safeRef, safePos) {
          DetourCommon.vCopy(this.m_pos, safePos);

          if (this.m_path.length < 3 && this.m_path.length > 0) {
            var p = this.m_path[this.m_path.length - 1];
            this.m_path = [];
            this.m_path.push(safeRef);
            this.m_path.push(0);
            this.m_path.push(p);
          } else {
            this.m_path = [];
            this.m_path.push(safeRef);
            this.m_path.push(0);
          }
        }
      }, {
        key: "trimInvalidPath",
        value: function trimInvalidPath(safeRef, safePos, navquery, filter) {
          // Keep valid path as far as possible.
          var n = 0;

          while (n < this.m_path.length && navquery.isValidPolyRef(this.m_path[n], filter)) {
            n++;
          }

          if (n == 0) {
            // The first polyref is bad, use current safe values.
            DetourCommon.vCopy(this.m_pos, safePos);
            this.m_path = [];
            this.m_path.push(safeRef);
          } else if (n < this.m_path.length) {
            this.m_path = this.m_path.subList(0, n); // The path is partially usable.
          } // Clamp target pos to last poly


          DetourCommon.vCopy(this.m_target, navquery.closestPointOnPolyBoundary(this.m_path[this.m_path.length - 1], this.m_target));
        }
        /**
         * Checks the current corridor path to see if its polygon references remain
         * valid. The path can be invalidated if there are structural changes to the
         * underlying navigation mesh, or the state of a polygon within the path
         * changes resulting in it being filtered out. (E.g. An exclusion or
         * inclusion flag changes.)
         * 
         * @param maxLookAhead
         *            The number of polygons from the beginning of the corridor to
         *            search.
         * @param navquery
         *            The query object used to build the corridor.
         * @param filter
         *            The filter to apply to the operation.
         * @return
         */

      }, {
        key: "isValid",
        value: function isValid(maxLookAhead, navquery, filter) {
          // Check that all polygons still pass query filter.
          var n = Math.min(this.m_path.length, maxLookAhead);

          for (var i = 0; i < n; ++i) {
            if (!navquery.isValidPolyRef(this.m_path[i], filter)) return false;
          }

          return true;
        }
        /**
         * Gets the current position within the corridor. (In the first polygon.)
         * @return The current position within the corridor.
         */

      }, {
        key: "getPos",
        value: function getPos() {
          return this.m_pos;
        }
        /**
         * Gets the current target within the corridor. (In the last polygon.)
         * @return The current target within the corridor.
         */

      }, {
        key: "getTarget",
        value: function getTarget() {
          return this.m_target;
        }
        /**
         * The polygon reference id of the first polygon in the corridor, the polygon containing the position.
         * @return The polygon reference id of the first polygon in the corridor. (Or zero if there is no path.)
         */

      }, {
        key: "getFirstPoly",
        value: function getFirstPoly() {
          return this.m_path.length == 0 ? 0 : this.m_path[0];
        }
        /**
         * The polygon reference id of the last polygon in the corridor, the polygon containing the target.
         * @return The polygon reference id of the last polygon in the corridor. (Or zero if there is no path.)
         */

      }, {
        key: "getLastPoly",
        value: function getLastPoly() {
          return this.m_path.length == 0 ? 0 : this.m_path[this.m_path.length - 1];
        }
        /**
         * The corridor's path. 
         */

      }, {
        key: "getPath",
        value: function getPath() {
          return this.m_path;
        }
        /**
         * The number of polygons in the current corridor path.
         * @return The number of polygons in the current corridor path.
         */

      }, {
        key: "getPathCount",
        value: function getPathCount() {
          return this.m_path.length;
        }
      }]);

      return PathCorridor;
    }();

    var _temp$5;

    function arraycopy$5(one, oneStart, two, twoStart, len) {
      for (var i = 0; i < len; i++) {
        two[twoStart + i] = one[oneStart + i];
      }
    }

    var LocalBoundary = /*#__PURE__*/function () {
      function LocalBoundary() {
        _classCallCheck(this, LocalBoundary);

        _defineProperty(this, "m_center", new Array(3));

        _defineProperty(this, "m_segs", []);

        _defineProperty(this, "m_polys", []);

        this.m_center[0] = this.m_center[1] = this.m_center[2] = Number.MAX_VALUE;
      }

      _createClass(LocalBoundary, [{
        key: "reset",
        value: function reset() {
          this.m_center[0] = this.m_center[1] = this.m_center[2] = Number.MAX_VALUE;
          this.m_polys = [];
          this.m_segs = [];
        }
      }, {
        key: "addSegment",
        value: function addSegment(dist, s) {
          // Insert neighbour based on the distance.
          var seg = new LocalBoundary.Segment();
          arraycopy$5(s, 0, seg.s, 0, 6);
          seg.d = dist;

          if (this.m_segs.length == 0) {
            this.m_segs.push(seg);
          } else if (dist >= this.m_segs[this.m_segs.length - 1].d) {
            if (this.m_segs.length >= LocalBoundary.MAX_LOCAL_SEGS) {
              return;
            }

            this.m_segs.push(seg);
          } else {
            // Insert inbetween.
            var i;

            for (i = 0; i < this.m_segs.length; ++i) {
              if (dist <= this.m_segs[i].d) break;
            }

            this.m_segs.splice(i, 0, seg);
          }

          while (this.m_segs.length > LocalBoundary.MAX_LOCAL_SEGS) {
            this.m_segs.splice(this.m_segs.length - 1, 1);
          }
        }
      }, {
        key: "update",
        value: function update(ref, pos, collisionQueryRange, navquery, filter) {
          if (ref == 0) {
            reset();
            return;
          }

          DetourCommon.vCopy(this.m_center, pos); // First query non-overlapping polygons.

          var res = navquery.findLocalNeighbourhood(ref, pos, collisionQueryRange, filter);
          this.m_polys = res.getRefs();
          this.m_segs = []; // Secondly, store all polygon edges.

          for (var j = 0; j < this.m_polys.length; ++j) {
            var gpws = navquery.getPolyWallSegments(this.m_polys[j], false, filter);

            for (var k = 0; k < gpws.getSegmentRefs().length; ++k) {
              var s = gpws.getSegmentVerts()[k]; // Skip too distant segments.

              var distseg = DetourCommon.distancePtSegSqr2D4(pos, s, 0, 3);
              if (distseg[0] > DetourCommon.sqr(collisionQueryRange)) continue;
              this.addSegment(distseg[0], s);
            }
          }
        }
      }, {
        key: "isValid",
        value: function isValid(navquery, filter) {
          if (this.m_polys.length == 0) return false; // Check that all polygons still pass query filter.

          var _iterator = _createForOfIteratorHelper(this.m_polys),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var ref = _step.value;
              if (!navquery.isValidPolyRef(ref, filter)) return false;
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          return true;
        }
      }, {
        key: "getCenter",
        value: function getCenter() {
          return this.m_center;
        }
      }, {
        key: "getSegment",
        value: function getSegment(j) {
          return this.m_segs[j].s;
        }
      }, {
        key: "getSegmentCount",
        value: function getSegmentCount() {
          return this.m_segs.length;
        }
      }]);

      return LocalBoundary;
    }();

    _defineProperty(LocalBoundary, "MAX_LOCAL_SEGS", 8);

    _defineProperty(LocalBoundary, "Segment", (_temp$5 = function Segment() {
      _classCallCheck(this, Segment);

      _defineProperty(this, "s", new Array(6).fill(0));

      _defineProperty(this, "d", void 0);
    }, _temp$5));

    /*
    Copyright (c) 2009-2010 Mikko Mononen memon@inside.org
    Recast4J Copyright (c) 2015 Piotr Piastucki piotr@jtilia.org

    This software is provided 'as-is', without any express or implied
    warranty.  In no event will the authors be held liable for any damages
    arising from the use of this software.
    Permission is granted to anyone to use this software for any purpose,
    including commercial applications, and to alter it and redistribute it
    freely, subject to the following restrictions:
    1. The origin of this software must not be misrepresented; you must not
     claim that you wrote the original software. If you use this software
     in a product, an acknowledgment in the product documentation would be
     appreciated but is not required.
    2. Altered source versions must be plainly marked as such, and must not be
     misrepresented as being the original software.
    3. This notice may not be removed or altered from any source distribution.
    */
    var CrowdAgentAnimation = function CrowdAgentAnimation() {
      _classCallCheck(this, CrowdAgentAnimation);

      _defineProperty(this, "active", void 0);

      _defineProperty(this, "initPos", new Array(3));

      _defineProperty(this, "startPos", new Array(3));

      _defineProperty(this, "endPos", new Array(3));

      _defineProperty(this, "polyRef", void 0);

      _defineProperty(this, "t", void 0);

      _defineProperty(this, "tmax", void 0);
    };

    /// @ingroup crowd

    var CrowdAgent = /*#__PURE__*/function () {
      /// The type of navigation mesh polygon the agent is currently traversing.
      /// @ingroup crowd
      /// True if the agent is active, false if the agent is in an unused slot in the agent pool.
      /// The type of mesh polygon the agent is traversing. (See: #CrowdAgent)
      /// True if the agent has valid path (targetState == DT_CROWDAGENT_TARGET_VALID) and the path does not lead to the requested position, else false.
      /// The path corridor the agent is using.
      /// The local boundary data for the agent.
      /// Time since the agent's path corridor was optimized.
      /// The known neighbors of the agent.
      /// The desired speed.
      ///< The current agent position. [(x, y, z)]
      ///< A temporary value used to accumulate agent displacement during iterative collision resolution. [(x, y, z)]
      ///< The desired velocity of the agent. Based on the current path, calculated from scratch each frame. [(x, y, z)]
      ///< The desired velocity adjusted by obstacle avoidance, calculated from scratch each frame. [(x, y, z)]
      ///< The actual velocity of the agent. The change from nvel => vel is constrained by max acceleration. [(x, y, z)]
      /// The agent's configuration parameters.
      /// The local path corridor corners for the agent.
      ///< State of the movement request.
      ///< Target polyref of the movement request.
      ///< Target position of the movement request (or velocity in case of DT_CROWDAGENT_TARGET_VELOCITY).
      ///< Path finder ref.
      ///< Flag indicating that the current path is being replanned.
      /// <Time since the agent's target was replanned.
      function CrowdAgent(idx) {
        _classCallCheck(this, CrowdAgent);

        _defineProperty(this, "idx", void 0);

        _defineProperty(this, "active", void 0);

        _defineProperty(this, "state", void 0);

        _defineProperty(this, "partial", void 0);

        _defineProperty(this, "corridor", void 0);

        _defineProperty(this, "boundary", void 0);

        _defineProperty(this, "topologyOptTime", void 0);

        _defineProperty(this, "neis", []);

        _defineProperty(this, "desiredSpeed", void 0);

        _defineProperty(this, "npos", new Array(3));

        _defineProperty(this, "disp", new Array(3));

        _defineProperty(this, "dvel", new Array(3));

        _defineProperty(this, "nvel", new Array(3));

        _defineProperty(this, "vel", new Array(3));

        _defineProperty(this, "params", void 0);

        _defineProperty(this, "corners", []);

        _defineProperty(this, "targetState", void 0);

        _defineProperty(this, "targetRef", void 0);

        _defineProperty(this, "targetPos", new Array(3));

        _defineProperty(this, "targetPathqReq", void 0);

        _defineProperty(this, "targetReplan", void 0);

        _defineProperty(this, "targetReplanTime", void 0);

        _defineProperty(this, "animation", void 0);

        this.idx = idx;
        this.corridor = new PathCorridor();
        this.boundary = new LocalBoundary();
        this.animation = new CrowdAgentAnimation();
      }

      _createClass(CrowdAgent, [{
        key: "integrate",
        value: function integrate(dt) {
          // Fake dynamic constraint.
          var maxDelta = this.params.maxAcceleration * dt;
          var dv = DetourCommon.vSub(this.nvel, this.vel);
          var ds = DetourCommon.vLen(dv);
          if (ds > maxDelta) dv = DetourCommon.vScale(dv, maxDelta / ds);
          this.vel = DetourCommon.vAdd(this.vel, dv); // Integrate

          if (DetourCommon.vLen(this.vel) > 0.0001) this.npos = DetourCommon.vMad(this.npos, this.vel, dt);else DetourCommon.vSet(this.vel, 0, 0, 0);
        }
      }, {
        key: "overOffmeshConnection",
        value: function overOffmeshConnection(radius) {
          if (this.corners.length == 0) return false;
          var offMeshConnection = (this.corners[this.corners.length - 1].getFlags() & NavMeshQuery.DT_STRAIGHTPATH_OFFMESH_CONNECTION) != 0 ? true : false;

          if (offMeshConnection) {
            distSq = DetourCommon.vDist2D(this.npos, this.corners[this.corners.length - 1].getPos());
            if (distSq < radius * radius) return true;
          }

          return false;
        }
      }, {
        key: "getDistanceToGoal",
        value: function getDistanceToGoal(range) {
          if (this.corners.length == 0) return range;
          var endOfPath = (this.corners[this.corners.length - 1].getFlags() & NavMeshQuery.DT_STRAIGHTPATH_END) != 0 ? true : false;
          if (endOfPath) return Math.min(DetourCommon.vDist2D(this.npos, this.corners[this.corners.length - 1].getPos()), range);
          return range;
        }
      }, {
        key: "calcSmoothSteerDirection",
        value: function calcSmoothSteerDirection() {
          var dir = new Array(3);

          if (!this.corners.length == 0) {
            var ip0 = 0;
            var ip1 = Math.min(1, this.corners.length - 1);
            var p0 = this.corners[ip0].getPos();
            var p1 = this.corners[ip1].getPos();
            var dir0 = DetourCommon.vSub(p0, this.npos);
            var dir1 = DetourCommon.vSub(p1, this.npos);
            dir0[1] = 0;
            dir1[1] = 0;
            var len0 = DetourCommon.vLen(dir0);
            var len1 = DetourCommon.vLen(dir1);
            if (len1 > 0.001) dir1 = DetourCommon.vScale(dir1, 1.0 / len1);
            dir[0] = dir0[0] - dir1[0] * len0 * 0.5;
            dir[1] = 0;
            dir[2] = dir0[2] - dir1[2] * len0 * 0.5;
            DetourCommon.vNormalize(dir);
          }

          return dir;
        }
      }, {
        key: "calcStraightSteerDirection",
        value: function calcStraightSteerDirection() {
          var dir = new Array(3);

          if (!this.corners.length == 0) {
            dir = DetourCommon.vSub(this.corners[0].getPos(), this.npos);
            dir[1] = 0;
            DetourCommon.vNormalize(dir);
          }

          return dir;
        }
      }, {
        key: "setTarget",
        value: function setTarget(ref, pos) {
          this.targetRef = ref;
          DetourCommon.vCopy(this.targetPos, pos);
          this.targetPathqRef = PathQueue.DT_PATHQ_INVALID;
          if (this.targetRef != 0) this.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_REQUESTING;else this.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_FAILED;
        }
      }, {
        key: "getAgentIndex",
        value: function getAgentIndex() {
          return this.idx;
        }
      }, {
        key: "isActive",
        value: function isActive() {
          return this.active;
        }
      }]);

      return CrowdAgent;
    }();

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_STATE_INVALID", 0);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_STATE_WALKING", 1);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_STATE_OFFMESH", 2);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_NONE", 0);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_FAILED", 1);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_VALID", 2);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_REQUESTING", 3);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_WAITING_FOR_QUEUE", 4);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_WAITING_FOR_PATH", 5);

    _defineProperty(CrowdAgent, "DT_CROWDAGENT_TARGET_VELOCITY", 6);

    var DefaultQueryFilter
    /*extends QueryFilter*/
    = /*#__PURE__*/function () {
      // DefaultQueryFilter() {
      // 		this.m_includeFlags = 0xfff;
      // 		this.m_excludeFlags = 0;
      // 		for (let i = 0; i < NavMesh.DT_MAX_AREAS; ++i) {
      // 			m_areaCost[i] = 1.0;
      // 		}
      // 	}
      function DefaultQueryFilter() {
        var includeFlags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0xffff;
        var excludeFlags = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        var areaCost = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Array(NavMesh.DT_MAX_AREAS).fill(1, 0, NavMesh.DT_MAX_AREAS);

        _classCallCheck(this, DefaultQueryFilter);

        _defineProperty(this, "m_excludeFlags", 0);

        _defineProperty(this, "m_includeFlags", 0);

        _defineProperty(this, "m_areaCost", new Array(NavMesh.DT_MAX_AREAS));

        this.m_includeFlags = includeFlags;
        this.m_excludeFlags = excludeFlags;

        for (var i = 0; i < Math.min(NavMesh.DT_MAX_AREAS, areaCost.length); ++i) {
          this.m_areaCost[i] = areaCost[i];
        }

        for (var _i = areaCost.length; _i < NavMesh.DT_MAX_AREAS; ++_i) {
          this.m_areaCost[_i] = 1.0;
        }
      }

      _createClass(DefaultQueryFilter, [{
        key: "and",
        value: function and(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 & hi2;
          var l = low1 & low2;
          return h * hi + l;
        }
      }, {
        key: "or",
        value: function or(v1, v2) {
          var hi = 0x80000000;
          var low = 0x7fffffff;
          var hi1 = ~~(v1 / hi);
          var hi2 = ~~(v2 / hi);
          var low1 = v1 & low;
          var low2 = v2 & low;
          var h = hi1 | hi2;
          var l = low1 | low2;
          return h * hi + l;
        }
      }, {
        key: "passFilter",
        value: function passFilter(ref, tile, poly) {
          return this.and(poly.flags, this.m_includeFlags) != 0 && this.and(poly.flags, this.m_excludeFlags) == 0;
        }
      }, {
        key: "getCost",
        value: function getCost(pa, pb, prevRef, prevTile, prevPoly, curRef, curTile, curPoly, nextRef, nextTile, nextPoly) {
          return DetourCommon.vDist2(pa, pb) * this.m_areaCost[curPoly.getArea()];
        }
      }]);

      return DefaultQueryFilter;
    }();

    var Crowd = /*#__PURE__*/function () {
      _createClass(Crowd, [{
        key: "tween",
        /// The maximum number of neighbors that a crowd agent can take into account
        /// for steering decisions.
        /// @ingroup crowd
        /// The maximum number of corners a crowd agent will look ahead in the path.
        /// This value is used for sizing the crowd agent corner buffers.
        /// Due to the behavior of the crowd manager, the actual number of useful
        /// corners will be one less than this number.
        /// @ingroup crowd
        /// The maximum number of crowd avoidance configurations supported by the
        /// crowd manager.
        /// @ingroup crowd
        /// @see dtObstacleAvoidanceParams, dtCrowd::setObstacleAvoidanceParams(), dtCrowd::getObstacleAvoidanceParams(),
        /// dtCrowdAgentParams::obstacleAvoidanceType
        /// The maximum number of query filter types supported by the crowd manager.
        /// @ingroup crowd
        /// @see dtQueryFilter, dtCrowd::getFilter() dtCrowd::getEditableFilter(),
        /// dtCrowdAgentParams::queryFilterType
        /// Provides neighbor data for agents managed by the crowd.
        /// @ingroup crowd
        /// @see dtCrowdAgent::neis, dtCrowd
        value: function tween(t, t0, t1) {
          return DetourCommon.clamp((t - t0) / (t1 - t0), 0.0, 1.0);
        }
      }, {
        key: "getNeighbours",
        value: function getNeighbours(pos, height, range, skip, agents, grid) {
          var result = [];
          var ids = grid.queryItems(pos[0] - range, pos[2] - range, pos[0] + range, pos[2] + range);

          var _iterator = _createForOfIteratorHelper(ids),
              _step;

          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var id = _step.value;
              var _ag = agents[id];

              if (_ag == skip || !_ag.active) {
                // console.log("Testing");
                continue;
              } // Check for overlap.


              var diff = DetourCommon.vSub(pos, _ag.npos);

              if (Math.abs(diff[1]) >= (height + _ag.params.height) / 2.0) {
                continue;
              }

              diff[1] = 0;

              var _distSqr = DetourCommon.vLenSqr(diff);

              if (_distSqr > DetourCommon.sqr(range)) {
                continue;
              }

              this.addNeighbour(id, _distSqr, result);
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }

          return result;
        }
      }, {
        key: "addNeighbour",
        value: function addNeighbour(idx, dist, neis) {
          // Insert neighbour based on the distance.
          var nei = new this.CrowdNeighbor(idx, dist);
          neis.push(nei);
          neis.sort(function (o1, o2) {
            return o1.dist - o2.dist;
          });
        }
      }, {
        key: "addToOptQueue",
        value: function addToOptQueue(newag, agents) {
          // Insert neighbour based on greatest time.
          agents.push(newag);
        } // Insert neighbour based on greatest time.

      }, {
        key: "addToPathQueue",
        value: function addToPathQueue(newag, agents) {
          agents.push(newag);
        } ///
        /// Initializes the crowd.
        /// May be called more than once to purge and re-initialize the crowd.
        /// @param[in] maxAgents The maximum number of agents the crowd can manage. [Limit: >= 1]
        /// @param[in] maxAgentRadius The maximum radius of any agent that will be added to the crowd. [Limit: > 0]
        /// @param[in] nav The navigation mesh to use for planning.
        /// @return True if the initialization succeeded.

      }]);

      function Crowd(maxAgents, maxAgentRadius, nav) {
        var _temp;

        var queryFilterFactory = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function (i) {
          return new DefaultQueryFilter();
        };

        _classCallCheck(this, Crowd);

        _defineProperty(this, "CrowdNeighbor", (_temp = /// < The index of the neighbor in the crowd.
        /// < The distance between the current agent and the neighbor.
        function CrowdNeighbour(idx, dist) {
          _classCallCheck(this, CrowdNeighbour);

          _defineProperty(this, "idx", void 0);

          _defineProperty(this, "dist", void 0);

          this.idx = idx;
          this.dist = dist;
        }, _temp));

        _defineProperty(this, "m_maxAgents", void 0);

        _defineProperty(this, "m_agents", []);

        _defineProperty(this, "m_activeAgents", []);

        _defineProperty(this, "m_pathq", void 0);

        _defineProperty(this, "m_obstacleQueryParams", new Array(Crowd.DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS));

        _defineProperty(this, "m_obstacleQuery", void 0);

        _defineProperty(this, "m_grid", void 0);

        _defineProperty(this, "m_ext", new Array(3));

        _defineProperty(this, "m_filters", new Array(Crowd.DT_CROWD_MAX_QUERY_FILTER_TYPE));

        _defineProperty(this, "m_maxAgentRadius", void 0);

        _defineProperty(this, "m_velocitySampleCount", void 0);

        _defineProperty(this, "m_navquery", void 0);

        this.m_maxAgents = maxAgents;
        this.m_maxAgentRadius = maxAgentRadius;
        DetourCommon.vSet(this.m_ext, this.m_maxAgentRadius * 2.0, this.m_maxAgentRadius * 1.5, this.m_maxAgentRadius * 2.0);
        this.m_grid = new ProximityGrid(this.m_maxAgents * 4, this.m_maxAgentRadius * 3);
        this.m_obstacleQuery = new ObstacleAvoidanceQuery(6, 8);

        for (var i = 0; i < Crowd.DT_CROWD_MAX_QUERY_FILTER_TYPE; i++) {
          this.m_filters[i] = queryFilterFactory.apply(i);
        } // Init obstacle query params.


        for (var _i = 0; _i < Crowd.DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS; ++_i) {
          this.m_obstacleQueryParams[_i] = new ObstacleAvoidanceParams();
        } // Allocate temp buffer for merging paths.


        this.m_pathq = new PathQueue(Crowd.MAX_PATHQUEUE_NODES, nav);
        this.m_agents = new Array(this.m_maxAgents);
        this.m_activeAgents = [];

        for (var _i2 = 0; _i2 < this.m_maxAgents; ++_i2) {
          this.m_agents[_i2] = new CrowdAgent(_i2);
          this.m_agents[_i2].active = false;
        } // The navquery is mostly used for local searches, no need for large
        // node pool.


        this.m_navquery = new NavMeshQuery(nav);
      } /// Sets the shared avoidance configuration for the specified index.
      /// @param[in] idx The index. [Limits: 0 <= value <
      /// #DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS]
      /// @param[in] params The new configuration.


      _createClass(Crowd, [{
        key: "setObstacleAvoidanceParams",
        value: function setObstacleAvoidanceParams(idx, params) {
          if (idx >= 0 && idx < Crowd.DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS) {
            this.m_obstacleQueryParams[idx] = params;
          }
        } /// Gets the shared avoidance configuration for the specified index.
        /// @param[in] idx The index of the configuration to retreive.
        /// [Limits: 0 <= value < #DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS]
        /// @return The requested configuration.

      }, {
        key: "getObstacleAvoidanceParams",
        value: function getObstacleAvoidanceParams(idx) {
          if (idx >= 0 && idx < Crowd.DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS) {
            return this.m_obstacleQueryParams[idx];
          }

          return null;
        } /// The maximum number of agents that can be managed by the object.
        /// @return The maximum number of agents.

      }, {
        key: "getAgentCount",
        value: function getAgentCount() {
          return this.m_maxAgents;
        } /// Gets the specified agent from the pool.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        /// @return The requested agent.
        /// Agents in the pool may not be in use. Check #dtCrowdAgent.active before using the returned object.

      }, {
        key: "getAgent",
        value: function getAgent(idx) {
          return idx < 0 || idx >= this.m_agents.length ? null : this.m_agents[idx];
        } ///
        /// Gets the specified agent from the pool.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        /// @return The requested agent.
        /// Agents in the pool may not be in use. Check #dtCrowdAgent.active before using the returned object.

      }, {
        key: "getEditableAgent",
        value: function getEditableAgent(idx) {
          return idx < 0 || idx >= this.m_agents.length ? null : this.m_agents[idx];
        } /// Updates the specified agent's configuration.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        /// @param[in] params The new agent configuration.

      }, {
        key: "updateAgentParameters",
        value: function updateAgentParameters(idx, params) {
          if (idx < 0 || idx >= this.m_maxAgents) {
            return;
          }

          this.m_agents[idx].params = params;
        } /// Adds a new agent to the crowd.
        /// @param[in] pos The requested position of the agent. [(x, y, z)]
        /// @param[in] params The configutation of the agent.
        /// @return The index of the agent in the agent pool. Or -1 if the agent
        /// could not be added.

      }, {
        key: "addAgent",
        value: function addAgent(pos, params) {
          // Find empty slot.
          var idx = -1;

          for (var i = 0; i < this.m_maxAgents; ++i) {
            if (!this.m_agents[i].active) {
              idx = i;
              break;
            }
          }

          if (idx == -1) {
            return -1;
          }

          var ag = this.m_agents[idx];
          this.updateAgentParameters(idx, params); // Find nearest position on navmesh and place the agent there.

          var nearest = this.m_navquery.findNearestPoly(pos, this.m_ext, this.m_filters[ag.params.queryFilterType]);
          ag.corridor.reset(nearest.getNearestRef(), nearest.getNearestPos());
          ag.boundary.reset();
          ag.partial = false;
          ag.topologyOptTime = 0;
          ag.targetReplanTime = 0;
          DetourCommon.vSet(ag.dvel, 0, 0, 0);
          DetourCommon.vSet(ag.nvel, 0, 0, 0);
          DetourCommon.vSet(ag.vel, 0, 0, 0);
          DetourCommon.vCopy(ag.npos, nearest.getNearestPos());
          ag.desiredSpeed = 0;

          if (nearest.getNearestRef() != 0) {
            ag.state = CrowdAgent.DT_CROWDAGENT_STATE_WALKING;
          } else {
            ag.state = CrowdAgent.DT_CROWDAGENT_STATE_INVALID;
          }

          ag.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_NONE;
          ag.active = true;
          return idx;
        } /// Removes the agent from the crowd.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        ///
        /// The agent is deactivated and will no longer be processed. Its
        /// #dt object
        /// is not removed from the pool. It is marked as inactive so that it is
        /// available for reuse.
        /// Removes the agent from the crowd.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]

      }, {
        key: "removeAgent",
        value: function removeAgent(idx) {
          if (idx >= 0 && idx < this.m_maxAgents) {
            this.m_agents[idx].active = false;
          }
        }
      }, {
        key: "requestMoveTargetReplan",
        value: function requestMoveTargetReplan(ag, ref, pos) {
          ag.setTarget(ref, pos);
          ag.targetReplan = true;
          return true;
        } /// Submits a new move request for the specified agent.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        /// @param[in] ref The position's polygon reference.
        /// @param[in] pos The position within the polygon. [(x, y, z)]
        /// @return True if the request was successfully submitted.
        ///
        /// This method is used when a new target is set.
        ///
        /// The position will be constrained to the surface of the navigation mesh.
        ///
        /// The request will be processed during the next #update().

      }, {
        key: "requestMoveTarget",
        value: function requestMoveTarget(idx, ref, pos) {
          if (idx < 0 || idx >= this.m_maxAgents) {
            return false;
          }

          if (ref == 0) {
            return false;
          }

          var ag = this.m_agents[idx]; // Initialize request.

          ag.setTarget(ref, pos);
          ag.targetReplan = false;
          return true;
        } /// Submits a new move request for the specified agent.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        /// @param[in] vel The movement velocity. [(x, y, z)]
        /// @return True if the request was successfully submitted.

      }, {
        key: "requestMoveVelocity",
        value: function requestMoveVelocity(idx, vel) {
          if (idx < 0 || idx >= this.m_maxAgents) {
            return false;
          }

          ag = this.m_agents[idx]; // Initialize request.

          ag.targetRef = 0;
          DetourCommon.vCopy(ag.targetPos, vel);
          ag.targetPathqRef = PathQueue.DT_PATHQ_INVALID;
          ag.targetReplan = false;
          ag.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY;
          return true;
        } /// Resets any request for the specified agent.
        /// @param[in] idx The agent index. [Limits: 0 <= value < #getAgentCount()]
        /// @return True if the request was successfully reseted.

      }, {
        key: "resetMoveTarget",
        value: function resetMoveTarget(idx) {
          if (idx < 0 || idx >= this.m_maxAgents) {
            return false;
          }

          ag = this.m_agents[idx]; // Initialize request.

          ag.targetRef = 0;
          DetourCommon.vSet(ag.targetPos, 0, 0, 0);
          DetourCommon.vSet(ag.dvel, 0, 0, 0);
          ag.targetPathqRef = PathQueue.DT_PATHQ_INVALID;
          ag.targetReplan = false;
          ag.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_NONE;
          return true;
        } /// Gets the active agents let the agent pool.
        /// @param[out] agents An array of agent pointers. [(#dt *) * maxAgents]
        /// @param[in] maxAgents The size of the crowd agent array.
        /// @return The number of agents returned in @p agents.

      }, {
        key: "getActiveAgents",
        value: function getActiveAgents() {
          var agents = []; //new Array(this.m_maxAgents);

          for (var i = 0; i < this.m_maxAgents; ++i) {
            if (this.m_agents[i].active) {
              agents.push(this.m_agents[i]);
            }
          }

          return agents;
        }
      }, {
        key: "updateMoveRequest",
        value: function updateMoveRequest() {
          var queue = new PriorityQueue(function (a1, a2) {
            return a2.targetReplanTime - a1.targetReplanTime;
          }); // Fire off new requests.

          for (var i = 0; i < this.m_maxAgents; ++i) {
            // if(i==12)
            //     console.log("Bad agent.")
            var _ag2 = this.m_agents[i];

            if (!_ag2.active) {
              continue;
            }

            if (_ag2.state == CrowdAgent.DT_CROWDAGENT_STATE_INVALID) {
              continue;
            }

            if (_ag2.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || _ag2.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
              continue;
            }

            if (_ag2.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_REQUESTING) {
              var path = _ag2.corridor.getPath();

              if (path.length == 0) {
                throw new IllegalArgumentException("Empty path");
              } // Quick search towards the goal.


              this.m_navquery.initSlicedFindPath(path[0], _ag2.targetRef, _ag2.npos, _ag2.targetPos, this.m_filters[_ag2.params.queryFilterType], 0);
              this.m_navquery.updateSlicedFindPath(Crowd.MAX_ITER);
              var pathFound = void 0;

              if (_ag2.targetReplan) // && npath > 10)
                {
                  // Try to use existing steady path during replan if
                  // possible.
                  pathFound = this.m_navquery.finalizeSlicedFindPathPartial(path);
                } else {
                // Try to move towards target when goal changes.
                pathFound = this.m_navquery.finalizeSlicedFindPath();
              }

              var reqPath = pathFound.getRefs();
              var reqPos = new Array(3);

              if (!pathFound.getStatus() == Status.FAILURE && reqPath.length > 0) {
                // In progress or succeed.
                if (reqPath[reqPath.length - 1] != _ag2.targetRef) {
                  // Partial path, constrain target position inside the
                  // last polygon.
                  var cr = this.m_navquery.closestPointOnPoly(reqPath[reqPath.length - 1], _ag2.targetPos);
                  reqPos = cr.getClosest();
                } else {
                  DetourCommon.vCopy(reqPos, _ag2.targetPos);
                }
              } else {
                // Could not find path, start the request from current
                // location.
                DetourCommon.vCopy(reqPos, _ag2.npos);
                reqPath = [];
                reqPath.push(path[0]);
              }

              _ag2.corridor.setCorridor(reqPos, reqPath);

              _ag2.boundary.reset();

              _ag2.partial = false;

              if (reqPath[reqPath.length - 1] == _ag2.targetRef) {
                _ag2.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_VALID;
                _ag2.targetReplanTime = 0.0;
              } else {
                // The path is longer or potentially unreachable, full plan.
                _ag2.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_WAITING_FOR_QUEUE;
              }
            }

            if (_ag2.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_WAITING_FOR_QUEUE) {
              this.addToPathQueue(_ag2, queue);
            }
          }

          while (!queue.isEmpty()) {
            var _ag3 = queue.poll();

            _ag3.targetPathqRef = this.m_pathq.request(_ag3.corridor.getLastPoly(), _ag3.targetRef, _ag3.corridor.getTarget(), _ag3.targetPos, this.m_filters[_ag3.params.queryFilterType]);

            if (_ag3.targetPathqRef != PathQueue.DT_PATHQ_INVALID) {
              _ag3.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_WAITING_FOR_PATH;
            }
          } // Update requests.


          this.m_pathq.update(Crowd.MAX_ITERS_PER_UPDATE); // Process path results.

          for (var _i3 = 0; _i3 < this.m_maxAgents; ++_i3) {
            var _ag4 = this.m_agents[_i3];

            if (!_ag4.active) {
              continue;
            }

            if (_ag4.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || _ag4.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
              continue;
            }

            if (_ag4.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_WAITING_FOR_PATH) {
              // Poll path queue.
              var status = this.m_pathq.getRequestStatus(_ag4.targetPathqRef);

              if (status != null && status == Status.FAILURE) {
                // Path find failed, retry if the target location is still
                // valid.
                _ag4.targetPathqRef = PathQueue.DT_PATHQ_INVALID;

                if (_ag4.targetRef != 0) {
                  _ag4.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_REQUESTING;
                } else {
                  _ag4.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_FAILED;
                }

                _ag4.targetReplanTime = 0.0;
              } else if (status != null && (status == Status.SUCCSESS || status == Status.PARTIAL_RESULT)) {
                var _path = _ag4.corridor.getPath();

                if (_path.length == 0) {
                  throw new IllegalArgumentException("Empty path");
                } // Apply results.


                var targetPos = _ag4.targetPos;
                var valid = true;

                var _pathFound = this.m_pathq.getPathResult(_ag4.targetPathqRef);

                var res = _pathFound.getRefs();

                status = _pathFound.getStatus();

                if (status == Status.FAILURE || res.length == 0) {
                  valid = false;
                }

                if (status != null & status == Status.PARTIAL_RESULT) {
                  _ag4.partial = true;
                } else {
                  _ag4.partial = false;
                } // Merge result and existing path.
                // The agent might have moved whilst the request is
                // being processed, so the path may have changed.
                // We assume that the end of the path is at the same
                // location
                // where the request was issued.
                // The last ref in the old path should be the same as
                // the location where the request was issued..


                if (valid && _path[_path.length - 1] != res[0]) {
                  // if (valid && path[path.length - 1].longValue() != res[0].longValue()) {
                  valid = false;
                }

                if (valid) {
                  // Put the old path infront of the old path.
                  if (_path.length > 1) {
                    // path.remove(path.length - 1);
                    _path.splice(_path.length - 1, 1);

                    _path.push.apply(_path, _toConsumableArray(res));

                    res = _path; // Remove trackbacks

                    for (var j = 1; j < res.length - 1; ++j) {
                      if (j - 1 >= 0 && j + 1 < res.length) {
                        if (res[j - 1] == res[j + 1]) {
                          res.splice(j + 1, 1);
                          res.splice(j, 1);
                          j -= 2;
                        }
                      }
                    }
                  } // Check for partial path.


                  if (res[res.length - 1] != _ag4.targetRef) {
                    // Partial path, constrain target position inside
                    // the last polygon.
                    var _cr = this.m_navquery.closestPointOnPoly(res[res.length - 1], targetPos);

                    targetPos = _cr.getClosest();
                  }
                }

                if (valid) {
                  // Set current corridor.
                  _ag4.corridor.setCorridor(targetPos, res); // Force to update boundary.


                  _ag4.boundary.reset();

                  _ag4.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_VALID;
                } else {
                  // Something went wrong.
                  _ag4.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_FAILED;
                }

                _ag4.targetReplanTime = 0.0;
              }
            }
          }
        }
      }, {
        key: "updateTopologyOptimization",
        // seconds
        value: function updateTopologyOptimization(agents, dt) {
          if (!agents.length == 0) {
            return;
          }

          var queue = new PriorityQueue(function (a1, a2) {
            return Float.compare(a2.topologyOptTime, a1.topologyOptTime);
          });

          for (var i = 0; i < agents.length; ++i) {
            ag = agents[i];

            if (ag.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
              continue;
            }

            if (ag.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || ag.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
              continue;
            }

            if ((ag.params.updateFlags & CrowdAgentParams.DT_CROWD_OPTIMIZE_TOPO) == 0) {
              continue;
            }

            ag.topologyOptTime += dt;

            if (ag.topologyOptTime >= OPT_TIME_THR) {
              addToOptQueue(ag, queue);
            }
          }

          while (!queue.length == 0) {
            ag = queue.poll();
            ag.corridor.optimizePathTopology(this.m_navquery, this.m_filters[ag.params.queryFilterType]);
            ag.topologyOptTime = 0;
          }
        }
      }, {
        key: "checkPathValidity",
        // seconds
        value: function checkPathValidity(agents, dt) {
          for (var i = 0; i < agents.length; ++i) {
            var _ag5 = agents[i];

            if (_ag5.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
              continue;
            }

            _ag5.targetReplanTime += dt;
            var replan = false; // First check that the current location is valid.

            var agentPos = new Array(3);

            var agentRef = _ag5.corridor.getFirstPoly();

            DetourCommon.vCopy(agentPos, _ag5.npos);

            if (!this.m_navquery.isValidPolyRef(agentRef, this.m_filters[_ag5.params.queryFilterType])) {
              // Current location is not valid, try to reposition.
              // TODO: this can snap agents, how to handle that?
              var fnp = this.m_navquery.findNearestPoly(_ag5.npos, this.m_ext, this.m_filters[_ag5.params.queryFilterType]);
              agentRef = fnp.getNearestRef();

              if (fnp.getNearestPos() != null) {
                DetourCommon.vCopy(agentPos, fnp.getNearestPos());
              }

              if (agentRef == 0) {
                // Could not find location in navmesh, set state to invalid.
                _ag5.corridor.reset(0, agentPos);

                _ag5.partial = false;

                _ag5.boundary.reset();

                _ag5.state = CrowdAgent.DT_CROWDAGENT_STATE_INVALID;
                continue;
              } // Make sure the first polygon is valid, but leave other valid
              // polygons in the path so that replanner can adjust the path
              // better.


              _ag5.corridor.fixPathStart(agentRef, agentPos); // ag.corridor.trimInvalidPath(agentRef, agentPos, m_navquery,
              // &m_filter);


              _ag5.boundary.reset();

              DetourCommon.vCopy(_ag5.npos, agentPos);
              replan = true;
            } // If the agent does not have move target or is controlled by
            // velocity, no need to recover the target nor replan.


            if (_ag5.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || _ag5.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
              continue;
            } // Try to recover move request position.


            if (_ag5.targetState != CrowdAgent.DT_CROWDAGENT_TARGET_NONE && _ag5.targetState != CrowdAgent.DT_CROWDAGENT_TARGET_FAILED) {
              if (!this.m_navquery.isValidPolyRef(_ag5.targetRef, this.m_filters[_ag5.params.queryFilterType])) {
                // Current target is not valid, try to reposition.
                var _fnp = this.m_navquery.findNearestPoly(_ag5.targetPos, this.m_ext, this.m_filters[_ag5.params.queryFilterType]);

                _ag5.targetRef = _fnp.getNearestRef();

                if (_fnp.getNearestPos() != null) {
                  DetourCommon.vCopy(_ag5.targetPos, _fnp.getNearestPos());
                }

                replan = true;
              }

              if (_ag5.targetRef == 0) {
                // Failed to reposition target, fail moverequest.
                _ag5.corridor.reset(agentRef, agentPos);

                _ag5.partial = false;
                _ag5.targetState = CrowdAgent.DT_CROWDAGENT_TARGET_NONE;
              }
            } // If nearby corridor is not valid, replan.


            if (!_ag5.corridor.isValid(Crowd.CHECK_LOOKAHEAD, this.m_navquery, this.m_filters[_ag5.params.queryFilterType])) {
              // Fix current path.
              // ag.corridor.trimInvalidPath(agentRef, agentPos, m_navquery,
              // &m_filter);
              // ag.boundary.reset();
              replan = true;
            } // If the end of the path is near and it is not the requested
            // location, replan.


            if (_ag5.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VALID) {
              if (_ag5.targetReplanTime > Crowd.TARGET_REPLAN_DELAY && _ag5.corridor.getPathCount() < Crowd.CHECK_LOOKAHEAD && _ag5.corridor.getLastPoly() != _ag5.targetRef) {
                replan = true;
              }
            } // Try to replan path to goal.


            if (replan) {
              if (_ag5.targetState != CrowdAgent.DT_CROWDAGENT_TARGET_NONE) {
                this.requestMoveTargetReplan(_ag5, _ag5.targetRef, _ag5.targetPos);
              }
            }
          }
        }
      }, {
        key: "update",
        value: function update(dt, debug, frame) {
          // if (frame == 114)
          //     console.log("Bug");
          this.m_velocitySampleCount = 0;
          var debugIdx = debug != null ? debug.idx : -1;
          var agents = this.getActiveAgents(); // Check that all agents still have valid paths.

          this.checkPathValidity(agents, dt); // Update async move request and path finder.

          this.updateMoveRequest(); // Optimize path topology.

          this.updateTopologyOptimization(agents, dt); // Register agents to proximity grid.

          this.m_grid.clear();

          for (var i = 0; i < agents.length; ++i) {
            var _ag6 = agents[i];
            var p = _ag6.npos;
            var r = _ag6.params.radius;
            this.m_grid.addItem(i, p[0] - r, p[2] - r, p[0] + r, p[2] + r);
          } // Get nearby navmesh segments and agents to collide with.


          var _iterator2 = _createForOfIteratorHelper(agents),
              _step2;

          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var _ag13 = _step2.value;

              if (_ag13.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
                continue;
              } // Update the collision boundary after certain distance has been passed or
              // if it has become invalid.


              var updateThr = _ag13.params.collisionQueryRange * 0.25;

              if (DetourCommon.vDist2DSqr(_ag13.npos, _ag13.boundary.getCenter()) > DetourCommon.sqr(updateThr) || !_ag13.boundary.isValid(this.m_navquery, this.m_filters[_ag13.params.queryFilterType])) {
                _ag13.boundary.update(_ag13.corridor.getFirstPoly(), _ag13.npos, _ag13.params.collisionQueryRange, this.m_navquery, this.m_filters[_ag13.params.queryFilterType]);
              } // Query neighbour agents


              _ag13.neis = this.getNeighbours(_ag13.npos, _ag13.params.height, _ag13.params.collisionQueryRange, _ag13, agents, this.m_grid);
            } // Find next corner to steer to.

          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }

          for (var _i4 = 0; _i4 < agents.length; ++_i4) {
            var _ag7 = agents[_i4];

            if (_ag7.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
              continue;
            }

            if (_ag7.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || _ag7.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
              continue;
            } // Find corners for steering


            _ag7.corners = _ag7.corridor.findCorners(Crowd.DT_CROWDAGENT_MAX_CORNERS, this.m_navquery, this.m_filters[_ag7.params.queryFilterType]); // Check to see if the corner after the next corner is directly visible,
            // and short cut to there.

            if ((_ag7.params.updateFlags & CrowdAgentParams.DT_CROWD_OPTIMIZE_VIS) != 0 && _ag7.corners.length > 0) {
              var target = _ag7.corners[Math.min(1, _ag7.corners.length - 1)].getPos();

              _ag7.corridor.optimizePathVisibility(target, _ag7.params.pathOptimizationRange, this.m_navquery, this.m_filters[_ag7.params.queryFilterType]); // Copy data for debug purposes.


              if (debugIdx == _i4) {
                DetourCommon.vCopy(debug.optStart, _ag7.corridor.getPos());
                DetourCommon.vCopy(debug.optEnd, target);
              }
            } else {
              // Copy data for debug purposes.
              if (debugIdx == _i4) {
                DetourCommon.vSet(debug.optStart, 0, 0, 0);
                DetourCommon.vSet(debug.optEnd, 0, 0, 0);
              }
            }
          } // Trigger off-mesh connections (depends on corners).


          var _iterator3 = _createForOfIteratorHelper(agents),
              _step3;

          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _ag14 = _step3.value;

              if (_ag14.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
                continue;
              }

              if (_ag14.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || _ag14.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
                continue;
              } // Check


              var triggerRadius = _ag14.params.radius * 2.25;

              if (_ag14.overOffmeshConnection(triggerRadius)) {
                // Prepare to off-mesh connection.
                anim = _ag14.animation; // Adjust the path over the off-mesh connection.

                var refs = new long[2]();

                if (_ag14.corridor.moveOverOffmeshConnection(_ag14.corners[_ag14.corners.length - 1].getRef(), refs, anim.startPos, anim.endPos, this.m_navquery)) {
                  DetourCommon.vCopy(anim.initPos, _ag14.npos);
                  anim.polyRef = refs[1];
                  anim.active = true;
                  anim.t = 0.0;
                  anim.tmax = DetourCommon.vDist2D(anim.startPos, anim.endPos) / _ag14.params.maxSpeed * 0.5;
                  _ag14.state = CrowdAgent.DT_CROWDAGENT_STATE_OFFMESH;
                  _ag14.corners = [];
                  _ag14.neis = [];
                  continue;
                } else {// Path validity check will ensure that bad/blocked connections will be replanned.
                }
              }
            } // Calculate steering.

          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }

          var _iterator4 = _createForOfIteratorHelper(agents),
              _step4;

          try {
            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
              var _ag15 = _step4.value;

              if (_ag15.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
                continue;
              }

              if (_ag15.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE) {
                continue;
              }

              var dvel = new Array(3);

              if (_ag15.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
                DetourCommon.vCopy(dvel, _ag15.targetPos);
                _ag15.desiredSpeed = DetourCommon.vLen(_ag15.targetPos);
              } else {
                // Calculate steering direction.
                if ((_ag15.params.updateFlags & CrowdAgentParams.DT_CROWD_ANTICIPATE_TURNS) != 0) {
                  dvel = _ag15.calcSmoothSteerDirection();
                } else {
                  dvel = _ag15.calcStraightSteerDirection();
                } // Calculate speed scale, which tells the agent to slowdown at the end of the path.


                var slowDownRadius = _ag15.params.radius * 2; // TODO: make less hacky.

                var speedScale = _ag15.getDistanceToGoal(slowDownRadius) / slowDownRadius;
                _ag15.desiredSpeed = _ag15.params.maxSpeed;
                dvel = DetourCommon.vScale(dvel, _ag15.desiredSpeed * speedScale);
              } // Separation


              if ((_ag15.params.updateFlags & CrowdAgentParams.DT_CROWD_SEPARATION) != 0) {
                separationDist = _ag15.params.collisionQueryRange;
                invSeparationDist = 1.0 / separationDist;
                separationWeight = _ag15.params.separationWeight;
                w = 0;
                var disp = new Array(3);

                for (var _j3 = 0; _j3 < _ag15.neis.length; ++_j3) {
                  nei = agents.get(_ag15.neis[_j3].idx);

                  var _diff = DetourCommon.vSub(_ag15.npos, nei.npos);

                  _diff[1] = 0;
                  distSqr = DetourCommon.vLenSqr(_diff);

                  if (distSqr < 0.00001) {
                    continue;
                  }

                  if (distSqr > DetourCommon.sqr(separationDist)) {
                    continue;
                  }

                  dist = Math.sqrt(distSqr);
                  weight = separationWeight * (1.0 - DetourCommon.sqr(dist * invSeparationDist));
                  disp = DetourCommon.vMad(disp, _diff, weight / dist);
                  w += 1.0;
                }

                if (w > 0.0001) {
                  // Adjust desired velocity.
                  dvel = DetourCommon.vMad(dvel, disp, 1.0 / w); // Clamp desired velocity to desired speed.

                  speedSqr = DetourCommon.vLenSqr(dvel);
                  desiredSqr = DetourCommon.sqr(_ag15.desiredSpeed);

                  if (speedSqr > desiredSqr) {
                    dvel = DetourCommon.vScale(dvel, desiredSqr / speedSqr);
                  }
                }
              } // Set the desired velocity.


              DetourCommon.vCopy(_ag15.dvel, dvel);
            } // Velocity planning.

          } catch (err) {
            _iterator4.e(err);
          } finally {
            _iterator4.f();
          }

          for (var _i5 = 0; _i5 < agents.length; ++_i5) {
            var _ag8 = agents[_i5];

            if (_ag8.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
              continue;
            }

            if ((_ag8.params.updateFlags & CrowdAgentParams.DT_CROWD_OBSTACLE_AVOIDANCE) != 0) {
              this.m_obstacleQuery.reset(); // Add neighbours as obstacles.

              for (var j = 0; j < _ag8.neis.length; ++j) {
                var _nei = agents[_ag8.neis[j].idx];
                this.m_obstacleQuery.addCircle(_nei.npos, _nei.params.radius, _nei.vel, _nei.dvel);
              } // if (ag.neis.length > 0 && i == 0) {
              //     console.log("Frame " + frame)
              // }
              // Append neighbour segments as obstacles.


              for (var _j = 0; _j < _ag8.boundary.getSegmentCount(); ++_j) {
                var s = _ag8.boundary.getSegment(_j); //let s3 = Arrays.copyOfRange(s, 3, 6);
                //let s3 = Arrays.copyOfRange(s, 3, 6);


                var s3 = s.slice(3, 6);

                if (DetourCommon.triArea2D3(_ag8.npos, s, s3) < 0.0) {
                  continue;
                }

                this.m_obstacleQuery.addSegment(s, s3);
              }

              var vod = null;

              if (debugIdx == _i5) {
                vod = debug.vod;
              } // Sample new safe velocity.


              var adaptive = true;
              var ns = 0;
              var params = this.m_obstacleQueryParams[_ag8.params.obstacleAvoidanceType];

              if (adaptive) {
                var nsnvel = this.m_obstacleQuery.sampleVelocityAdaptive(_ag8.npos, _ag8.params.radius, _ag8.desiredSpeed, _ag8.vel, _ag8.dvel, params, vod);
                ns = nsnvel[0];
                _ag8.nvel = nsnvel[1];
              } else {
                var _nsnvel = this.m_obstacleQuery.sampleVelocityGrid(_ag8.npos, _ag8.params.radius, _ag8.desiredSpeed, _ag8.vel, _ag8.dvel, params, vod);

                ns = _nsnvel[0];
                _ag8.nvel = _nsnvel[1];
              }

              this.m_velocitySampleCount += ns;
            } else {
              // If not using velocity planning, new velocity is directly the desired velocity.
              DetourCommon.vCopy(_ag8.nvel, _ag8.dvel);
            }
          } // Integrate.


          for (var _i6 = 0; _i6 < agents.length; ++_i6) {
            var _ag9 = agents[_i6];

            if (_ag9.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
              continue;
            }

            _ag9.integrate(dt);
          } // Handle collisions.


          for (var iter = 0; iter < 4; ++iter) {
            for (var _i7 = 0; _i7 < agents.length; ++_i7) {
              var _ag10 = agents[_i7];

              var idx0 = _ag10.getAgentIndex();

              if (_ag10.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
                continue;
              }

              DetourCommon.vSet(_ag10.disp, 0, 0, 0);
              var _w = 0;

              for (var _j2 = 0; _j2 < _ag10.neis.length; ++_j2) {
                var _nei2 = agents[_ag10.neis[_j2].idx];

                var idx1 = _nei2.getAgentIndex();

                var diff = DetourCommon.vSub(_ag10.npos, _nei2.npos);
                diff[1] = 0;

                var _dist = DetourCommon.vLenSqr(diff);

                if (_dist > DetourCommon.sqr(_ag10.params.radius + _nei2.params.radius)) {
                  continue;
                }

                _dist = Math.sqrt(_dist);
                var pen = _ag10.params.radius + _nei2.params.radius - _dist;

                if (_dist < 0.0001) {
                  // Agents on top of each other, try to choose diverging separation directions.
                  if (idx0 > idx1) {
                    DetourCommon.vSet(diff, -_ag10.dvel[2], 0, _ag10.dvel[0]);
                  } else {
                    DetourCommon.vSet(diff, _ag10.dvel[2], 0, -_ag10.dvel[0]);
                  }

                  pen = 0.01;
                } else {
                  pen = 1.0 / _dist * (pen * 0.5) * Crowd.COLLISION_RESOLVE_FACTOR;
                }

                _ag10.disp = DetourCommon.vMad(_ag10.disp, diff, pen);
                _w += 1.0;
              }

              if (_w > 0.0001) {
                var iw = 1.0 / _w;
                _ag10.disp = DetourCommon.vScale(_ag10.disp, iw);
              }
            }

            for (var _i8 = 0; _i8 < agents.length; ++_i8) {
              var _ag11 = agents[_i8];

              if (_ag11.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
                continue;
              }

              _ag11.npos = DetourCommon.vAdd(_ag11.npos, _ag11.disp);
            }
          }

          for (var _i9 = 0; _i9 < agents.length; ++_i9) {
            // if (frame == 492)
            //     console.log("Bad agent")
            var _ag12 = agents[_i9];

            if (_ag12.state != CrowdAgent.DT_CROWDAGENT_STATE_WALKING) {
              continue;
            } // Move along navmesh.


            _ag12.corridor.movePosition(_ag12.npos, this.m_navquery, this.m_filters[_ag12.params.queryFilterType]); // Get valid constrained position back.


            DetourCommon.vCopy(_ag12.npos, _ag12.corridor.getPos()); // If not using path, truncate the corridor to just one poly.

            if (_ag12.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_NONE || _ag12.targetState == CrowdAgent.DT_CROWDAGENT_TARGET_VELOCITY) {
              _ag12.corridor.reset(_ag12.corridor.getFirstPoly(), _ag12.npos);

              _ag12.partial = false;
            }
          } // Update agents using off-mesh connection.


          for (var _i10 = 0; _i10 < this.m_maxAgents; ++_i10) {
            var _anim = this.m_agents[_i10].animation;

            if (!_anim.active) {
              continue;
            }

            ag = this.m_agents[_i10];
            _anim.t += dt;

            if (_anim.t > _anim.tmax) {
              // Reset animation
              _anim.active = false; // Prepare agent for walking.

              ag.state = CrowdAgent.DT_CROWDAGENT_STATE_WALKING;
              continue;
            } // Update position


            ta = _anim.tmax * 0.15;
            tb = _anim.tmax;

            if (_anim.t < ta) {
              u = tween(_anim.t, 0.0, ta);
              ag.npos = DetourCommon.vLerp3(_anim.initPos, _anim.startPos, u);
            } else {
              u = tween(_anim.t, ta, tb);
              ag.npos = DetourCommon.vLerp3(_anim.startPos, _anim.endPos, u);
            } // Update velocity.


            DetourCommon.vSet(ag.vel, 0, 0, 0);
            DetourCommon.vSet(ag.dvel, 0, 0, 0);
          }
        }
      }, {
        key: "getQueryExtents",
        value: function getQueryExtents() {
          return this.m_ext;
        }
      }, {
        key: "getFilter",
        value: function getFilter(i) {
          return i >= 0 && i < Crowd.DT_CROWD_MAX_QUERY_FILTER_TYPE ? this.m_filters[i] : null;
        }
      }]);

      return Crowd;
    }();

    _defineProperty(Crowd, "MAX_ITERS_PER_UPDATE", 100);

    _defineProperty(Crowd, "MAX_PATHQUEUE_NODES", 4096);

    _defineProperty(Crowd, "MAX_COMMON_NODES", 512);

    _defineProperty(Crowd, "DT_CROWDAGENT_MAX_NEIGHBOURS", 6);

    _defineProperty(Crowd, "DT_CROWDAGENT_MAX_CORNERS", 4);

    _defineProperty(Crowd, "DT_CROWD_MAX_OBSTAVOIDANCE_PARAMS", 8);

    _defineProperty(Crowd, "DT_CROWD_MAX_QUERY_FILTER_TYPE", 16);

    _defineProperty(Crowd, "MAX_ITER", 20);

    _defineProperty(Crowd, "OPT_TIME_THR", 0.5);

    _defineProperty(Crowd, "CHECK_LOOKAHEAD", 10);

    _defineProperty(Crowd, "TARGET_REPLAN_DELAY", 1.0);

    _defineProperty(Crowd, "COLLISION_RESOLVE_FACTOR", 0.7);

    exports.Crowd = Crowd;
    exports.CrowdAgentParams = CrowdAgentParams;
    exports.NavMesh = NavMesh;
    exports.NavMeshQuery = NavMeshQuery;
    exports.ObstacleAvoidanceParams = ObstacleAvoidanceParams;
    exports.RecastTestMeshBuilder = RecastTestMeshBuilder;

    Object.defineProperty(exports, '__esModule', { value: true });

  })));

  var WorkerClass = null;

  try {
      var WorkerThreads =
          typeof module !== 'undefined' && typeof module.require === 'function' && module.require('worker_threads') ||
          typeof __non_webpack_require__ === 'function' && __non_webpack_require__('worker_threads') ||
          typeof require === 'function' && require('worker_threads');
      WorkerClass = WorkerThreads.Worker;
  } catch(e) {} // eslint-disable-line

  function decodeBase64(base64, enableUnicode) {
      return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');
  }

  function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
      var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
      var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
      var source = decodeBase64(base64, enableUnicode);
      var start = source.indexOf('\n', 10) + 1;
      var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
      return function WorkerFactory(options) {
          return new WorkerClass(body, Object.assign({}, options, { eval: true }));
      };
  }

  function decodeBase64$1(base64, enableUnicode) {
      var binaryString = atob(base64);
      if (enableUnicode) {
          var binaryView = new Uint8Array(binaryString.length);
          for (var i = 0, n = binaryString.length; i < n; ++i) {
              binaryView[i] = binaryString.charCodeAt(i);
          }
          return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
      }
      return binaryString;
  }

  function createURL(base64, sourcemapArg, enableUnicodeArg) {
      var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
      var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
      var source = decodeBase64$1(base64, enableUnicode);
      var start = source.indexOf('\n', 10) + 1;
      var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
      var blob = new Blob([body], { type: 'application/javascript' });
      return URL.createObjectURL(blob);
  }

  function createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg) {
      var url;
      return function WorkerFactory(options) {
          url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
          return new Worker(url, options);
      };
  }

  var kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';

  function isNodeJS() {
      return kIsNodeJS;
  }

  function createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg) {
      if (isNodeJS()) {
          return createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg);
      }
      return createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg);
  }

  var WorkerFactory = createBase64WorkerFactory$2('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsNCiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDoNCiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDoNCiAgICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5jcm93ZGVkID0ge30pKTsNCiAgfSh1bmRlZmluZWQsIChmdW5jdGlvbiAoZXhwb3J0cykgew0KICAgIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsNCiAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7DQogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsNCiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOw0KICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7DQogICAgICAgIGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOw0KICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7DQogICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgew0KICAgICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7DQogICAgICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7DQogICAgICByZXR1cm4gQ29uc3RydWN0b3I7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgew0KICAgICAgaWYgKGtleSBpbiBvYmopIHsNCiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7DQogICAgICAgICAgdmFsdWU6IHZhbHVlLA0KICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsDQogICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLA0KICAgICAgICAgIHdyaXRhYmxlOiB0cnVlDQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIG9iajsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsNCiAgICAgIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgew0KICAgICAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7DQogICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7DQogICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgew0KICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsNCiAgICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSAidW5kZWZpbmVkIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsNCiAgICAgIHZhciBfYXJyID0gW107DQogICAgICB2YXIgX24gPSB0cnVlOw0KICAgICAgdmFyIF9kID0gZmFsc2U7DQogICAgICB2YXIgX2UgPSB1bmRlZmluZWQ7DQoNCiAgICAgIHRyeSB7DQogICAgICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsNCiAgICAgICAgICBfYXJyLnB1c2goX3MudmFsdWUpOw0KDQogICAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgX2QgPSB0cnVlOw0KICAgICAgICBfZSA9IGVycjsNCiAgICAgIH0gZmluYWxseSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7DQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICByZXR1cm4gX2FycjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7DQogICAgICBpZiAoIW8pIHJldHVybjsNCiAgICAgIGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOw0KICAgICAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOw0KICAgICAgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7DQogICAgICBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOw0KICAgICAgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgew0KICAgICAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7DQoNCiAgICAgIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsNCg0KICAgICAgcmV0dXJuIGFycjI7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgew0KICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsNCiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsNCiAgICAgIHZhciBpdDsNCg0KICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8IG9bU3ltYm9sLml0ZXJhdG9yXSA9PSBudWxsKSB7DQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7DQogICAgICAgICAgaWYgKGl0KSBvID0gaXQ7DQogICAgICAgICAgdmFyIGkgPSAwOw0KDQogICAgICAgICAgdmFyIEYgPSBmdW5jdGlvbiAoKSB7fTsNCg0KICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBzOiBGLA0KICAgICAgICAgICAgbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICBkb25lOiB0cnVlDQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgZG9uZTogZmFsc2UsDQogICAgICAgICAgICAgICAgdmFsdWU6IG9baSsrXQ0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGU6IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgICAgIHRocm93IGU7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZjogRg0KICAgICAgICAgIH07DQogICAgICAgIH0NCg0KICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7DQogICAgICB9DQoNCiAgICAgIHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwNCiAgICAgICAgICBkaWRFcnIgPSBmYWxzZSwNCiAgICAgICAgICBlcnI7DQogICAgICByZXR1cm4gew0KICAgICAgICBzOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgaXQgPSBvW1N5bWJvbC5pdGVyYXRvcl0oKTsNCiAgICAgICAgfSwNCiAgICAgICAgbjogZnVuY3Rpb24gKCkgew0KICAgICAgICAgIHZhciBzdGVwID0gaXQubmV4dCgpOw0KICAgICAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7DQogICAgICAgICAgcmV0dXJuIHN0ZXA7DQogICAgICAgIH0sDQogICAgICAgIGU6IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgZGlkRXJyID0gdHJ1ZTsNCiAgICAgICAgICBlcnIgPSBlOw0KICAgICAgICB9LA0KICAgICAgICBmOiBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7DQogICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIGlmIChkaWRFcnIpIHRocm93IGVycjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH07DQogICAgfQ0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIC8vLyBDb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgZm9yIGEgY3Jvd2QgYWdlbnQuDQogICAgLy8vIEBpbmdyb3VwIGNyb3dkDQogICAgdmFyIENyb3dkQWdlbnRQYXJhbXMgPSBmdW5jdGlvbiBDcm93ZEFnZW50UGFyYW1zKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENyb3dkQWdlbnRQYXJhbXMpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJhZGl1cyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhlaWdodCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1heEFjY2VsZXJhdGlvbiIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1heFNwZWVkIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29sbGlzaW9uUXVlcnlSYW5nZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBhdGhPcHRpbWl6YXRpb25SYW5nZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNlcGFyYXRpb25XZWlnaHQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ1cGRhdGVGbGFncyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9ic3RhY2xlQXZvaWRhbmNlVHlwZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInF1ZXJ5RmlsdGVyVHlwZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInVzZXJEYXRhIiwgbnVsbCk7DQogICAgfTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50UGFyYW1zLCAiRFRfQ1JPV0RfQU5USUNJUEFURV9UVVJOUyIsIDEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnRQYXJhbXMsICJEVF9DUk9XRF9PQlNUQUNMRV9BVk9JREFOQ0UiLCAyKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50UGFyYW1zLCAiRFRfQ1JPV0RfU0VQQVJBVElPTiIsIDQpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnRQYXJhbXMsICJEVF9DUk9XRF9PUFRJTUlaRV9WSVMiLCA4KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50UGFyYW1zLCAiRFRfQ1JPV0RfT1BUSU1JWkVfVE9QTyIsIDE2KTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKg0KICAgICAqICBDb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgdXNlZCB0byBkZWZpbmUgbXVsdGktdGlsZSBuYXZpZ2F0aW9uIG1lc2hlcy4NCiAgICAgKiAgVGhlIHZhbHVlcyBhcmUgdXNlZCB0byBhbGxvY2F0ZSBzcGFjZSBkdXJpbmcgdGhlIGluaXRpYWxpemF0aW9uIG9mIGEgbmF2aWdhdGlvbiBtZXNoLg0KICAgICAqICBAc2VlIE5hdk1lc2gNCiAgICAgKi8NCiAgICB2YXIgTmF2TWVzaFBhcmFtcyA9IGZ1bmN0aW9uIE5hdk1lc2hQYXJhbXMoKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmF2TWVzaFBhcmFtcyk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib3JpZyIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidGlsZVdpZHRoIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidGlsZUhlaWdodCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1heFRpbGVzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWF4UG9seXMiLCAwKTsNCiAgICB9Ow0KDQogICAgdmFyIEludGVyc2VjdFJlc3VsdCA9IGZ1bmN0aW9uIEludGVyc2VjdFJlc3VsdCgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnRlcnNlY3RSZXN1bHQpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImludGVyc2VjdHMiLCBmYWxzZSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidG1pbiIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRtYXgiLCAxKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzZWdNaW4iLCAtMSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2VnTWF4IiwgLTEpOw0KICAgIH07DQoNCiAgICAvKg0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQoNCiAgICAvKioNCiAgICAgKiBXcmFwcGVyIGZvciAzLWVsZW1lbnQgcGllY2VzICgzRCB2ZWN0b3JzKSBvZiBhIGJpZ2dlciAgYXJyYXkuDQogICAgICoNCiAgICAgKi8NCiAgICB2YXIgVmVjdG9yUHRyJDEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgLy8gY29uc3RydWN0b3IoIGFycmF5KSB7DQogICAgICAvLyAJCXRoaXMoYXJyYXksIDApOw0KICAgICAgLy8gCX0NCiAgICAgIGZ1bmN0aW9uIFZlY3RvclB0cihhcnJheSkgew0KICAgICAgICB2YXIgaW5kZXggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7DQoNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlY3RvclB0cik7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcnJheSIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpbmRleCIsIHZvaWQgMCk7DQoNCiAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5Ow0KICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhWZWN0b3JQdHIsIFt7DQogICAgICAgIGtleTogImdldCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQob2Zmc2V0KSB7DQogICAgICAgICAgcmV0dXJuIGFycmF5W2luZGV4ICsgb2Zmc2V0XTsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gVmVjdG9yUHRyOw0KICAgIH0oKTsNCg0KICAgIHZhciBEZXRvdXJDb21tb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gRGV0b3VyQ29tbW9uKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGV0b3VyQ29tbW9uKTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKERldG91ckNvbW1vbiwgbnVsbCwgW3sNCiAgICAgICAga2V5OiAidk1hZCIsDQogICAgICAgIC8vLyBQZXJmb3JtcyBhIHNjYWxlZCB2ZWN0b3IgYWRkaXRpb24uIChAcCB2MSArIChAcCB2MiAqIEBwIHMpKQ0KICAgICAgICAvLy8gQHBhcmFtW291dF0gZGVzdCBUaGUgcmVzdWx0IHZlY3Rvci4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHYxIFRoZSBiYXNlIHZlY3Rvci4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHYyIFRoZSB2ZWN0b3IgdG8gc2NhbGUgYW5kIGFkZCB0byBAcCB2MS4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHMgVGhlIGFtb3VudCB0byBzY2FsZSBAcCB2MiBieSBiZWZvcmUgYWRkaW5nIHRvIEBwIHYxLg0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdk1hZCh2MSwgdjIsIHMpIHsNCiAgICAgICAgICB2YXIgZGVzdCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBkZXN0WzBdID0gdjFbMF0gKyB2MlswXSAqIHM7DQogICAgICAgICAgZGVzdFsxXSA9IHYxWzFdICsgdjJbMV0gKiBzOw0KICAgICAgICAgIGRlc3RbMl0gPSB2MVsyXSArIHYyWzJdICogczsNCiAgICAgICAgICByZXR1cm4gZGVzdDsNCiAgICAgICAgfSAvLy8gUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWN0b3JzLiAoQHAgdjEgdG93YXJkIEBwDQogICAgICAgIC8vLyB2MikNCiAgICAgICAgLy8vIEBwYXJhbVtvdXRdIGRlc3QgVGhlIHJlc3VsdCB2ZWN0b3IuIFsoeCwgeSwgeCldDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSB2MSBUaGUgc3RhcnRpbmcgdmVjdG9yLg0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gdjIgVGhlIGRlc3RpbmF0aW9uIHZlY3Rvci4NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHQgVGhlIGludGVycG9sYXRpb24gZmFjdG9yLiBbTGltaXRzOiAwIDw9IHZhbHVlIDw9IDEuMF0NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2TGVycDQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkxlcnA0KHZlcnRzLCB2MSwgdjIsIHQpIHsNCiAgICAgICAgICB2YXIgZGVzdCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBkZXN0WzBdID0gdmVydHNbdjEgKyAwXSArICh2ZXJ0c1t2MiArIDBdIC0gdmVydHNbdjEgKyAwXSkgKiB0Ow0KICAgICAgICAgIGRlc3RbMV0gPSB2ZXJ0c1t2MSArIDFdICsgKHZlcnRzW3YyICsgMV0gLSB2ZXJ0c1t2MSArIDFdKSAqIHQ7DQogICAgICAgICAgZGVzdFsyXSA9IHZlcnRzW3YxICsgMl0gKyAodmVydHNbdjIgKyAyXSAtIHZlcnRzW3YxICsgMl0pICogdDsNCiAgICAgICAgICByZXR1cm4gZGVzdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2TGVycDMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkxlcnAzKHYxLCB2MiwgdCkgew0KICAgICAgICAgIHZhciBkZXN0ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIGRlc3RbMF0gPSB2MVswXSArICh2MlswXSAtIHYxWzBdKSAqIHQ7DQogICAgICAgICAgZGVzdFsxXSA9IHYxWzFdICsgKHYyWzFdIC0gdjFbMV0pICogdDsNCiAgICAgICAgICBkZXN0WzJdID0gdjFbMl0gKyAodjJbMl0gLSB2MVsyXSkgKiB0Ow0KICAgICAgICAgIHJldHVybiBkZXN0Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZTdWIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdlN1Yih2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgZGVzdCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBkZXN0WzBdID0gdjFbMF0gLSB2MlswXTsNCiAgICAgICAgICBkZXN0WzFdID0gdjFbMV0gLSB2MlsxXTsNCiAgICAgICAgICBkZXN0WzJdID0gdjFbMl0gLSB2MlsyXTsNCiAgICAgICAgICByZXR1cm4gZGVzdDsNCiAgICAgICAgfSAvLyBzdGF0aWMgdlN1Yih2MSwgdjIpIHsNCiAgICAgICAgLy8gCWxldCBkZXN0ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAvLyAJZGVzdFswXSA9IHYxWzBdIC0gdjJbMF07DQogICAgICAgIC8vIAlkZXN0WzFdID0gdjFbMV0gLSB2MlsxXTsNCiAgICAgICAgLy8gCWRlc3RbMl0gPSB2MVsyXSAtIHYyWzJdOw0KICAgICAgICAvLyAJcmV0dXJuIGRlc3Q7DQogICAgICAgIC8vIH0NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2QWRkIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZBZGQodjEsIHYyKSB7DQogICAgICAgICAgdmFyIGRlc3QgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgZGVzdFswXSA9IHYxWzBdICsgdjJbMF07DQogICAgICAgICAgZGVzdFsxXSA9IHYxWzFdICsgdjJbMV07DQogICAgICAgICAgZGVzdFsyXSA9IHYxWzJdICsgdjJbMl07DQogICAgICAgICAgcmV0dXJuIGRlc3Q7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidkNvcHlfcmV0dXJuIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZDb3B5X3JldHVybihpKSB7DQogICAgICAgICAgdmFyIG91dCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBvdXRbMF0gPSBpWzBdOw0KICAgICAgICAgIG91dFsxXSA9IGlbMV07DQogICAgICAgICAgb3V0WzJdID0gaVsyXTsNCiAgICAgICAgICByZXR1cm4gb3V0Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZTZXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdlNldChvdXQsIGEsIGIsIGMpIHsNCiAgICAgICAgICBvdXRbMF0gPSBhOw0KICAgICAgICAgIG91dFsxXSA9IGI7DQogICAgICAgICAgb3V0WzJdID0gYzsNCiAgICAgICAgfSAvLyBzdGF0aWMgdkNvcHkob3V0LCBpKSB7DQogICAgICAgIC8vIAlvdXRbMF0gPSBpWzBdOw0KICAgICAgICAvLyAJb3V0WzFdID0gaVsxXTsNCiAgICAgICAgLy8gCW91dFsyXSA9IGlbMl07DQogICAgICAgIC8vIH0NCiAgICAgICAgLy9TZWUgdkNvcHlfcmV0dXJuIGZvciB0aGUgMSBwYXJhbWV0ZXIgdmVyc2lvbg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInZDb3B5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZDb3B5KG91dCwgX2luKSB7DQogICAgICAgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7DQogICAgICAgICAgb3V0WzBdID0gX2luW2ldOw0KICAgICAgICAgIG91dFsxXSA9IF9pbltpICsgMV07DQogICAgICAgICAgb3V0WzJdID0gX2luW2kgKyAyXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2TWluIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZNaW4ob3V0LCBfaW4sIGkpIHsNCiAgICAgICAgICBvdXRbMF0gPSBNYXRoLm1pbihvdXRbMF0sIF9pbltpXSk7DQogICAgICAgICAgb3V0WzFdID0gTWF0aC5taW4ob3V0WzFdLCBfaW5baSArIDFdKTsNCiAgICAgICAgICBvdXRbMl0gPSBNYXRoLm1pbihvdXRbMl0sIF9pbltpICsgMl0pOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZNYXgiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdk1heChvdXQsIF9pbiwgaSkgew0KICAgICAgICAgIG91dFswXSA9IE1hdGgubWF4KG91dFswXSwgX2luW2ldKTsNCiAgICAgICAgICBvdXRbMV0gPSBNYXRoLm1heChvdXRbMV0sIF9pbltpICsgMV0pOw0KICAgICAgICAgIG91dFsyXSA9IE1hdGgubWF4KG91dFsyXSwgX2luW2kgKyAyXSk7DQogICAgICAgIH0gLy8vIFJldHVybnMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50cy4NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHYxIEEgcG9pbnQuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSB2MiBBIHBvaW50LiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHJldHVybiBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIHBvaW50cy4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2RGlzdDIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkRpc3QyKHYxLCB2Mikgew0KICAgICAgICAgIHZhciBkeCA9IHYyWzBdIC0gdjFbMF07DQogICAgICAgICAgdmFyIGR5ID0gdjJbMV0gLSB2MVsxXTsNCiAgICAgICAgICB2YXIgZHogPSB2MlsyXSAtIHYxWzJdOw0KICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6KTsNCiAgICAgICAgfSAvLy8gUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzLg0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gdjEgQSBwb2ludC4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHYyIEEgcG9pbnQuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gcG9pbnRzLg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInZEaXN0U3FyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZEaXN0U3FyKHYxLCB2Mikgew0KICAgICAgICAgIHZhciBkeCA9IHYyWzBdIC0gdjFbMF07DQogICAgICAgICAgdmFyIGR5ID0gdjJbMV0gLSB2MVsxXTsNCiAgICAgICAgICB2YXIgZHogPSB2MlsyXSAtIHYxWzJdOw0KICAgICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHo7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic3FyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNxcihhKSB7DQogICAgICAgICAgcmV0dXJuIGEgKiBhOw0KICAgICAgICB9IC8vLyBEZXJpdmVzIHRoZSBzcXVhcmUgb2YgdGhlIHNjYWxhciBsZW5ndGggb2YgdGhlIHZlY3Rvci4gKGxlbiAqIGxlbikNCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIHYgVGhlIHZlY3Rvci4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEByZXR1cm4gVGhlIHNxdWFyZSBvZiB0aGUgc2NhbGFyIGxlbmd0aCBvZiB0aGUgdmVjdG9yLg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInZMZW5TcXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkxlblNxcih2KSB7DQogICAgICAgICAgcmV0dXJuIHZbMF0gKiB2WzBdICsgdlsxXSAqIHZbMV0gKyB2WzJdICogdlsyXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2TGVuIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZMZW4odikgew0KICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQodlswXSAqIHZbMF0gKyB2WzFdICogdlsxXSArIHZbMl0gKiB2WzJdKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2RGlzdDMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkRpc3QzKHYxLCB2ZXJ0cywgaSkgew0KICAgICAgICAgIHZhciBkeCA9IHZlcnRzW2ldIC0gdjFbMF07DQogICAgICAgICAgdmFyIGR5ID0gdmVydHNbaSArIDFdIC0gdjFbMV07DQogICAgICAgICAgdmFyIGR6ID0gdmVydHNbaSArIDJdIC0gdjFbMl07DQogICAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHopOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNsYW1wIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsYW1wKHYsIG1pbiwgbWF4KSB7DQogICAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHYsIG1heCksIG1pbik7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY2xhbXAiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xhbXAodiwgbWluLCBtYXgpIHsNCiAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odiwgbWF4KSwgbWluKTsNCiAgICAgICAgfSAvLy8gRGVyaXZlcyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgc3BlY2lmaWVkIHBvaW50cyBvbiB0aGUgeHotcGxhbmUuDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSB2MSBBIHBvaW50LiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gdjIgQSBwb2ludC4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEByZXR1cm4gVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvUG9seSBvbiB0aGUgeHotcGxhbmUuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHZlY3RvcnMgYXJlIHByb2plY3RlZCBvbnRvIHRoZSB4ei1wbGFuZSwgc28gdGhlIHktdmFsdWVzIGFyZQ0KICAgICAgICAvLy8gaWdub3JlZC4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2RGlzdDJEIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZEaXN0MkQodjEsIHYyKSB7DQogICAgICAgICAgdmFyIGR4ID0gdjJbMF0gLSB2MVswXTsNCiAgICAgICAgICB2YXIgZHogPSB2MlsyXSAtIHYxWzJdOw0KICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR6ICogZHopOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZEaXN0MkRTcXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkRpc3QyRFNxcih2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgZHggPSB2MlswXSAtIHYxWzBdOw0KICAgICAgICAgIHZhciBkeiA9IHYyWzJdIC0gdjFbMl07DQogICAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeiAqIGR6Ow0KICAgICAgICB9IC8vLyBOb3JtYWxpemVzIHRoZSB2ZWN0b3IuDQogICAgICAgIC8vLyBAcGFyYW1bX2luLG91dF0gdiBUaGUgdmVjdG9yIHRvIG5vcm1hbGl6ZS4gWyh4LCB5LCB6KV0NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2Tm9ybWFsaXplIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZOb3JtYWxpemUodikgew0KICAgICAgICAgIHZhciBkID0gMS4wIC8gTWF0aC5zcXJ0KERldG91ckNvbW1vbi5zcXIodlswXSkgKyBEZXRvdXJDb21tb24uc3FyKHZbMV0pICsgRGV0b3VyQ29tbW9uLnNxcih2WzJdKSk7DQoNCiAgICAgICAgICBpZiAoZCAhPSAwKSB7DQogICAgICAgICAgICB2WzBdICo9IGQ7DQogICAgICAgICAgICB2WzFdICo9IGQ7DQogICAgICAgICAgICB2WzJdICo9IGQ7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZFcXVhbCIsDQogICAgICAgIC8vLyBQZXJmb3JtcyBhICdzbG9wcHknIGNvbG9jYXRpb24gY2hlY2sgb2YgdGhlIHNwZWNpZmllZCBwb2ludHMuDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSBwMCBBIHBvaW50LiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gcDEgQSBwb2ludC4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcG9pbnRzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGF0IHRoZSBzYW1lIGxvY2F0aW9uLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEJhc2ljYWxseSwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBzcGVjaWZpZWQgcG9pbnRzIGFyZQ0KICAgICAgICAvLy8gY2xvc2UgZW5vdWdoIHRvIGVhY2hvdGhlciB0byBiZSBjb25zaWRlcmVkIGNvbG9jYXRlZC4NCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZFcXVhbChwMCwgcDEpIHsNCiAgICAgICAgICB2YXIgZCA9IERldG91ckNvbW1vbi52RGlzdFNxcihwMCwgcDEpOw0KICAgICAgICAgIHJldHVybiBkIDwgRGV0b3VyQ29tbW9uLnRocjsNCiAgICAgICAgfSAvLy8gRGVyaXZlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnMgb24gdGhlIHh6LXBsYW5lLiAoQHAgdSAuIEBwIHYpDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSB1IEEgdmVjdG9yIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSB2IEEgdmVjdG9yIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSBkb3QgcHJvZHVjdCBvbiB0aGUgeHotcGxhbmUuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHZlY3RvcnMgYXJlIHByb2plY3RlZCBvbnRvIHRoZSB4ei1wbGFuZSwgc28gdGhlIHktdmFsdWVzIGFyZQ0KICAgICAgICAvLy8gaWdub3JlZC4NCiAgICAgICAgLy8gc3RhdGljIERldG91ckNvbW1vbi52RG90MkQodSwgdikgew0KICAgICAgICAvLyAJcmV0dXJuIHVbMF0gKiB2WzBdICsgdVsyXSAqIHZbMl07DQogICAgICAgIC8vIH0NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2RG90MkQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdkRvdDJEKHUsIHYpIHsNCiAgICAgICAgICB2YXIgdmkgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDA7DQogICAgICAgICAgcmV0dXJuIHVbMF0gKiB2W3ZpXSArIHVbMl0gKiB2W3ZpICsgMl07DQogICAgICAgIH0gLy8vIERlcml2ZXMgdGhlIHh6LXBsYW5lIDJEIHBlcnAgcHJvZHVjdCBvZiB0aGUgdHdvIHZlY3RvcnMuICh1eip2eCAtIHV4KnZ6KQ0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gdSBUaGUgTEhWIHZlY3RvciBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gdiBUaGUgUkhWIHZlY3RvciBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHJldHVybiBUaGUgZG90IHByb2R1Y3Qgb24gdGhlIHh6LXBsYW5lLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSB2ZWN0b3JzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgeHotcGxhbmUsIHNvIHRoZSB5LXZhbHVlcyBhcmUNCiAgICAgICAgLy8vIGlnbm9yZWQuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidlBlcnAyRCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2UGVycDJEKHUsIHYpIHsNCiAgICAgICAgICByZXR1cm4gdVsyXSAqIHZbMF0gLSB1WzBdICogdlsyXTsNCiAgICAgICAgfSAvLy8gQH0NCiAgICAgICAgLy8vIEBuYW1lIENvbXB1dGF0aW9uYWwgZ2VvbWV0cnkgaGVscGVyIGZ1bmN0aW9ucy4NCiAgICAgICAgLy8vIEB7DQogICAgICAgIC8vLyBEZXJpdmVzIHRoZSBzaWduZWQgeHotcGxhbmUgYXJlYSBvZiB0aGUgdHJpYW5nbGUgQUJDLCBvciB0aGUNCiAgICAgICAgLy8vIHJlbGF0aW9uc2hpcCBvZiBsaW5lIEFCIHRvIHBvUG9seSBDLg0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gYSBWZXJ0ZXggQS4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIGIgVmVydGV4IEIuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSBjIFZlcnRleCBDLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHJldHVybiBUaGUgc2lnbmVkIHh6LXBsYW5lIGFyZWEgb2YgdGhlIHRyaWFuZ2xlLg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInRyaUFyZWEyRDQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdHJpQXJlYTJENCh2ZXJ0cywgYSwgYiwgYykgew0KICAgICAgICAgIGFieCA9IHZlcnRzW2JdIC0gdmVydHNbYV07DQogICAgICAgICAgYWJ6ID0gdmVydHNbYiArIDJdIC0gdmVydHNbYSArIDJdOw0KICAgICAgICAgIGFjeCA9IHZlcnRzW2NdIC0gdmVydHNbYV07DQogICAgICAgICAgYWN6ID0gdmVydHNbYyArIDJdIC0gdmVydHNbYSArIDJdOw0KICAgICAgICAgIHJldHVybiBhY3ggKiBhYnogLSBhYnggKiBhY3o7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidHJpQXJlYTJEMyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlBcmVhMkQzKGEsIGIsIGMpIHsNCiAgICAgICAgICB2YXIgYWJ4ID0gYlswXSAtIGFbMF07DQogICAgICAgICAgdmFyIGFieiA9IGJbMl0gLSBhWzJdOw0KICAgICAgICAgIHZhciBhY3ggPSBjWzBdIC0gYVswXTsNCiAgICAgICAgICB2YXIgYWN6ID0gY1syXSAtIGFbMl07DQogICAgICAgICAgcmV0dXJuIGFjeCAqIGFieiAtIGFieCAqIGFjejsNCiAgICAgICAgfSAvLy8gRGV0ZXJtaW5lcyBpZiB0d28gYXhpcy1hbGlnbmVkIGJvdW5kaW5nIGJveGVzIG92ZXJsYXAuDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSBhbWluIE1pbmltdW0gYm91bmRzIG9mIGJveCBBLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gYW1heCBNYXhpbXVtIGJvdW5kcyBvZiBib3ggQS4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIGJtaW4gTWluaW11bSBib3VuZHMgb2YgYm94IEIuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSBibWF4IE1heGltdW0gYm91bmRzIG9mIGJveCBCLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSB0d28gQUFCQidzIG92ZXJsYXAuDQogICAgICAgIC8vLyBAc2VlIGR0T3ZlcmxhcEJvdW5kcw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogIm92ZXJsYXBRdWFudEJvdW5kcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVybGFwUXVhbnRCb3VuZHMoYW1pbiwgYW1heCwgYm1pbiwgYm1heCkgew0KICAgICAgICAgIHZhciBvdmVybGFwID0gdHJ1ZTsNCiAgICAgICAgICBvdmVybGFwID0gYW1pblswXSA+IGJtYXhbMF0gfHwgYW1heFswXSA8IGJtaW5bMF0gPyBmYWxzZSA6IG92ZXJsYXA7DQogICAgICAgICAgb3ZlcmxhcCA9IGFtaW5bMV0gPiBibWF4WzFdIHx8IGFtYXhbMV0gPCBibWluWzFdID8gZmFsc2UgOiBvdmVybGFwOw0KICAgICAgICAgIG92ZXJsYXAgPSBhbWluWzJdID4gYm1heFsyXSB8fCBhbWF4WzJdIDwgYm1pblsyXSA/IGZhbHNlIDogb3ZlcmxhcDsNCiAgICAgICAgICByZXR1cm4gb3ZlcmxhcDsNCiAgICAgICAgfSAvLy8gRGV0ZXJtaW5lcyBpZiB0d28gYXhpcy1hbGlnbmVkIGJvdW5kaW5nIGJveGVzIG92ZXJsYXAuDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSBhbWluIE1pbmltdW0gYm91bmRzIG9mIGJveCBBLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHBhcmFtW19pbl0gYW1heCBNYXhpbXVtIGJvdW5kcyBvZiBib3ggQS4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEBwYXJhbVtfaW5dIGJtaW4gTWluaW11bSBib3VuZHMgb2YgYm94IEIuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcGFyYW1bX2luXSBibWF4IE1heGltdW0gYm91bmRzIG9mIGJveCBCLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSB0d28gQUFCQidzIG92ZXJsYXAuDQogICAgICAgIC8vLyBAc2VlIGR0T3ZlcmxhcFF1YW50Qm91bmRzDQogICAgICAgIC8vIHN0YXRpYyBvdmVybGFwQm91bmRzKGFtaW4sIGFtYXgsIGJtaW4sIGJtYXgpIHsNCiAgICAgICAgLy8gCWxldCBvdmVybGFwID0gdHJ1ZTsNCiAgICAgICAgLy8gCW92ZXJsYXAgPSAoYW1pblswXSA+IGJtYXhbMF0gfHwgYW1heFswXSA8IGJtaW5bMF0pID8gZmFsc2UgOiBvdmVybGFwOw0KICAgICAgICAvLyAJb3ZlcmxhcCA9IChhbWluWzFdID4gYm1heFsxXSB8fCBhbWF4WzFdIDwgYm1pblsxXSkgPyBmYWxzZSA6IG92ZXJsYXA7DQogICAgICAgIC8vIAlvdmVybGFwID0gKGFtaW5bMl0gPiBibWF4WzJdIHx8IGFtYXhbMl0gPCBibWluWzJdKSA/IGZhbHNlIDogb3ZlcmxhcDsNCiAgICAgICAgLy8gCXJldHVybiBvdmVybGFwOw0KICAgICAgICAvLyB9DQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlzdGFuY2VQdFNlZ1NxcjJEMyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0YW5jZVB0U2VnU3FyMkQzKHB0LCBwLCBxKSB7DQogICAgICAgICAgdmFyIHBxeCA9IHFbMF0gLSBwWzBdOw0KICAgICAgICAgIHZhciBwcXogPSBxWzJdIC0gcFsyXTsNCiAgICAgICAgICB2YXIgZHggPSBwdFswXSAtIHBbMF07DQogICAgICAgICAgdmFyIGR6ID0gcHRbMl0gLSBwWzJdOw0KICAgICAgICAgIHZhciBkID0gcHF4ICogcHF4ICsgcHF6ICogcHF6Ow0KICAgICAgICAgIHZhciB0ID0gcHF4ICogZHggKyBwcXogKiBkejsNCiAgICAgICAgICBpZiAoZCA+IDApIHQgLz0gZDsNCiAgICAgICAgICBpZiAodCA8IDApIHQgPSAwO2Vsc2UgaWYgKHQgPiAxKSB0ID0gMTsNCiAgICAgICAgICBkeCA9IHBbMF0gKyB0ICogcHF4IC0gcHRbMF07DQogICAgICAgICAgZHogPSBwWzJdICsgdCAqIHBxeiAtIHB0WzJdOw0KICAgICAgICAgIHJldHVybiBbZHggKiBkeCArIGR6ICogZHosIHRdOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNsb3Nlc3RIZWlnaHRQb2ludFRyaWFuZ2xlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3Nlc3RIZWlnaHRQb2ludFRyaWFuZ2xlKHAsIGEsIGIsIGMpIHsNCiAgICAgICAgICB2YXIgdjAgPSBEZXRvdXJDb21tb24udlN1YihjLCBhKTsNCiAgICAgICAgICB2YXIgdjEgPSBEZXRvdXJDb21tb24udlN1YihiLCBhKTsNCiAgICAgICAgICB2YXIgdjIgPSBEZXRvdXJDb21tb24udlN1YihwLCBhKTsNCiAgICAgICAgICB2YXIgZG90MDAgPSBEZXRvdXJDb21tb24udkRvdDJEKHYwLCB2MCk7DQogICAgICAgICAgdmFyIGRvdDAxID0gRGV0b3VyQ29tbW9uLnZEb3QyRCh2MCwgdjEpOw0KICAgICAgICAgIHZhciBkb3QwMiA9IERldG91ckNvbW1vbi52RG90MkQodjAsIHYyKTsNCiAgICAgICAgICB2YXIgZG90MTEgPSBEZXRvdXJDb21tb24udkRvdDJEKHYxLCB2MSk7DQogICAgICAgICAgdmFyIGRvdDEyID0gRGV0b3VyQ29tbW9uLnZEb3QyRCh2MSwgdjIpOyAvLyBDb21wdXRlIGJhcnljZW50cmljIGNvb3JkaW5hdGVzDQoNCiAgICAgICAgICB2YXIgaW52RGVub20gPSAxLjAgLyAoZG90MDAgKiBkb3QxMSAtIGRvdDAxICogZG90MDEpOw0KICAgICAgICAgIHZhciB1ID0gKGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSAqIGludkRlbm9tOw0KICAgICAgICAgIHZhciB2ID0gKGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSAqIGludkRlbm9tOyAvLyBUaGUgKHNsb3BweSkgZXBzaWxvbiBpcyBuZWVkZWQgdG8gYWxsb3cgdG8gZ2V0IGhlaWdodCBvZiBwb2ludHMgd2hpY2gNCiAgICAgICAgICAvLyBhcmUgaW50ZXJwb2xhdGVkIGFQb2x5IHRoZSBlZGdlcyBvZiB0aGUgdHJpYW5nbGVzLg0KICAgICAgICAgIC8vIElmIHBvaW50IGxpZXMgaW5zaWRlIHRoZSB0cmlhbmdsZSwgcmV0dXJuIGludGVycG9sYXRlZCB5Y29vcmQuDQoNCiAgICAgICAgICBpZiAodSA+PSAtRGV0b3VyQ29tbW9uLkVQUyAmJiB2ID49IC1EZXRvdXJDb21tb24uRVBTICYmIHUgKyB2IDw9IDEgKyBEZXRvdXJDb21tb24uRVBTKSB7DQogICAgICAgICAgICB2YXIgaCA9IGFbMV0gKyB2MFsxXSAqIHUgKyB2MVsxXSAqIHY7DQogICAgICAgICAgICByZXR1cm4gW3RydWUsIGhdOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBbZmFsc2UsIG51bGxdOw0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQWxsIHBvaW50cyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lLCBzbyB0aGUgeS12YWx1ZXMgYXJlIGlnbm9yZWQuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicG9pbnRJblBvbHlnb24iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcG9pbnRJblBvbHlnb24ocHQsIHZlcnRzLCBudmVydHMpIHsNCiAgICAgICAgICB2YXIgYyA9IGZhbHNlOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfaiA9IG52ZXJ0cyAtIDE7IF9pIDwgbnZlcnRzOyBfaiA9IF9pKyspIHsNCiAgICAgICAgICAgIHZhciB2aSA9IF9pICogMzsNCiAgICAgICAgICAgIHZhciB2aiA9IF9qICogMzsNCiAgICAgICAgICAgIGlmICh2ZXJ0c1t2aSArIDJdID4gcHRbMl0gIT0gdmVydHNbdmogKyAyXSA+IHB0WzJdICYmIHB0WzBdIDwgKHZlcnRzW3ZqICsgMF0gLSB2ZXJ0c1t2aSArIDBdKSAqIChwdFsyXSAtIHZlcnRzW3ZpICsgMl0pIC8gKHZlcnRzW3ZqICsgMl0gLSB2ZXJ0c1t2aSArIDJdKSArIHZlcnRzW3ZpICsgMF0pIGMgPSAhYzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gYzsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJkaXN0YW5jZVB0UG9seUVkZ2VzU3FyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3RhbmNlUHRQb2x5RWRnZXNTcXIocHQsIHZlcnRzLCBudmVydHMsIGVkLCBldCkgew0KICAgICAgICAgIHZhciBjID0gZmFsc2U7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfajIgPSBudmVydHMgLSAxOyBfaTIgPCBudmVydHM7IF9qMiA9IF9pMisrKSB7DQogICAgICAgICAgICB2YXIgdmkgPSBfaTIgKiAzOw0KICAgICAgICAgICAgdmFyIHZqID0gX2oyICogMzsNCiAgICAgICAgICAgIGlmICh2ZXJ0c1t2aSArIDJdID4gcHRbMl0gIT0gdmVydHNbdmogKyAyXSA+IHB0WzJdICYmIHB0WzBdIDwgKHZlcnRzW3ZqICsgMF0gLSB2ZXJ0c1t2aSArIDBdKSAqIChwdFsyXSAtIHZlcnRzW3ZpICsgMl0pIC8gKHZlcnRzW3ZqICsgMl0gLSB2ZXJ0c1t2aSArIDJdKSArIHZlcnRzW3ZpICsgMF0pIGMgPSAhYzsNCiAgICAgICAgICAgIHZhciBlZGV0ID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDQocHQsIHZlcnRzLCB2aiwgdmkpOw0KICAgICAgICAgICAgZWRbX2oyXSA9IGVkZXRbMF07DQogICAgICAgICAgICBldFtfajJdID0gZWRldFsxXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gYzsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJwcm9qZWN0UG9seSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9qZWN0UG9seShheGlzLCBwb2x5LCBucG9seSkgew0KICAgICAgICAgIHZhciBybWluOw0KICAgICAgICAgIHZhciBybWF4Ow0KICAgICAgICAgIHJtaW4gPSBybWF4ID0gRGV0b3VyQ29tbW9uLnZEb3QyRChheGlzLCBwb2x5LCAwKTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbnBvbHk7ICsraSkgew0KICAgICAgICAgICAgdmFyIF9kID0gRGV0b3VyQ29tbW9uLnZEb3QyRChheGlzLCBwb2x5LCBpICogMyk7DQoNCiAgICAgICAgICAgIHJtaW4gPSBNYXRoLm1pbihybWluLCBfZCk7DQogICAgICAgICAgICBybWF4ID0gTWF0aC5tYXgocm1heCwgX2QpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBbcm1pbiwgcm1heF07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3ZlcmxhcFJhbmdlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJsYXBSYW5nZShhbWluLCBhbWF4LCBibWluLCBibWF4LCBlcHMpIHsNCiAgICAgICAgICByZXR1cm4gYW1pbiArIGVwcyA+IGJtYXggfHwgYW1heCAtIGVwcyA8IGJtaW4gPyBmYWxzZSA6IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3ZlcmxhcFBvbHlQb2x5MkQiLA0KICAgICAgICAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEFsbCB2ZXJ0aWNlcyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lLCBzbyB0aGUgeS12YWx1ZXMgYXJlIGlnbm9yZWQuDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVybGFwUG9seVBvbHkyRChwb2x5YSwgbnBvbHlhLCBwb2x5YiwgbnBvbHliKSB7DQogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBucG9seWEgLSAxOyBpIDwgbnBvbHlhOyBqID0gaSsrKSB7DQogICAgICAgICAgICB2YXIgdmEgPSBqICogMzsNCiAgICAgICAgICAgIHZhciB2YiA9IGkgKiAzOw0KICAgICAgICAgICAgdmFyIG4gPSBbcG9seWFbdmIgKyAyXSAtIHBvbHlhW3ZhICsgMl0sIDAsIC0ocG9seWFbdmIgKyAwXSAtIHBvbHlhW3ZhICsgMF0pXTsNCiAgICAgICAgICAgIHZhciBhbWlubWF4ID0gRGV0b3VyQ29tbW9uLnByb2plY3RQb2x5KG4sIHBvbHlhLCBucG9seWEpOw0KICAgICAgICAgICAgdmFyIGJtaW5tYXggPSBEZXRvdXJDb21tb24ucHJvamVjdFBvbHkobiwgcG9seWIsIG5wb2x5Yik7DQoNCiAgICAgICAgICAgIGlmICghRGV0b3VyQ29tbW9uLm92ZXJsYXBSYW5nZShhbWlubWF4WzBdLCBhbWlubWF4WzFdLCBibWlubWF4WzBdLCBibWlubWF4WzFdLCBEZXRvdXJDb21tb24uZXBzKSkgew0KICAgICAgICAgICAgICAvLyBGb3VuZCBzZXBhcmF0aW5nIGF4aXMNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZvciAodmFyIF9pMyA9IDAsIF9qMyA9IG5wb2x5YiAtIDE7IF9pMyA8IG5wb2x5YjsgX2ozID0gX2kzKyspIHsNCiAgICAgICAgICAgIHZhciBfdmEgPSBfajMgKiAzOw0KDQogICAgICAgICAgICB2YXIgX3ZiID0gX2kzICogMzsNCg0KICAgICAgICAgICAgdmFyIF9uID0gW3BvbHliW192YiArIDJdIC0gcG9seWJbX3ZhICsgMl0sIDAsIC0ocG9seWJbX3ZiICsgMF0gLSBwb2x5YltfdmEgKyAwXSldOw0KDQogICAgICAgICAgICB2YXIgX2FtaW5tYXggPSBEZXRvdXJDb21tb24ucHJvamVjdFBvbHkoX24sIHBvbHlhLCBucG9seWEpOw0KDQogICAgICAgICAgICB2YXIgX2JtaW5tYXggPSBEZXRvdXJDb21tb24ucHJvamVjdFBvbHkoX24sIHBvbHliLCBucG9seWIpOw0KDQogICAgICAgICAgICBpZiAoIURldG91ckNvbW1vbi5vdmVybGFwUmFuZ2UoX2FtaW5tYXhbMF0sIF9hbWlubWF4WzFdLCBfYm1pbm1heFswXSwgX2JtaW5tYXhbMV0sIERldG91ckNvbW1vbi5lcHMpKSB7DQogICAgICAgICAgICAgIC8vIEZvdW5kIHNlcGFyYXRpbmcgYXhpcw0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gLy8gUmV0dXJucyBhIHJhbmRvbSBwb1BvbHkgX2luIGEgY29udmV4IHBvbHlnb24uDQogICAgICAgIC8vIEFkYXB0ZWQgZnJvbSBHcmFwaGljcyBHZW1zIGFydGljbGUuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmFuZG9tUG9pbnRJbkNvbnZleFBvbHkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmFuZG9tUG9pbnRJbkNvbnZleFBvbHkocHRzLCBucHRzLCBhcmVhcywgcywgdCkgew0KICAgICAgICAgIC8vIENhbGMgdHJpYW5nbGUgYXJhZXMNCiAgICAgICAgICBhcmVhc3VtID0gMC4wOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBucHRzOyBpKyspIHsNCiAgICAgICAgICAgIGFyZWFzW2ldID0gRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDQocHRzLCAwLCAoaSAtIDEpICogMywgaSAqIDMpOw0KICAgICAgICAgICAgYXJlYXN1bSArPSBNYXRoLm1heCgwLjAwMSwgYXJlYXNbaV0pOw0KICAgICAgICAgIH0gLy8gRmluZCBzdWIgdHJpYW5nbGUgd2VpZ2h0ZWQgYnkgYXJlYS4NCg0KDQogICAgICAgICAgdGhyID0gcyAqIGFyZWFzdW07DQogICAgICAgICAgYWNjID0gMC4wOw0KICAgICAgICAgIHUgPSAxLjA7DQogICAgICAgICAgdmFyIHRyaSA9IG5wdHMgLSAxOw0KDQogICAgICAgICAgZm9yICh2YXIgX2k0ID0gMjsgX2k0IDwgbnB0czsgX2k0KyspIHsNCiAgICAgICAgICAgIGRhY2MgPSBhcmVhc1tfaTRdOw0KDQogICAgICAgICAgICBpZiAodGhyID49IGFjYyAmJiB0aHIgPCBhY2MgKyBkYWNjKSB7DQogICAgICAgICAgICAgIHUgPSAodGhyIC0gYWNjKSAvIGRhY2M7DQogICAgICAgICAgICAgIHRyaSA9IF9pNDsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFjYyArPSBkYWNjOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHYgPSBNYXRoLnNxcnQodCk7DQogICAgICAgICAgYSA9IDEgLSB2Ow0KICAgICAgICAgIGIgPSAoMSAtIHUpICogdjsNCiAgICAgICAgICBjID0gdSAqIHY7DQogICAgICAgICAgdmFyIHBhID0gMDsNCiAgICAgICAgICB2YXIgcGIgPSAodHJpIC0gMSkgKiAzOw0KICAgICAgICAgIHZhciBwYyA9IHRyaSAqIDM7DQogICAgICAgICAgcmV0dXJuIFthICogcHRzW3BhXSArIGIgKiBwdHNbcGJdICsgYyAqIHB0c1twY10sIGEgKiBwdHNbcGEgKyAxXSArIGIgKiBwdHNbcGIgKyAxXSArIGMgKiBwdHNbcGMgKyAxXSwgYSAqIHB0c1twYSArIDJdICsgYiAqIHB0c1twYiArIDJdICsgYyAqIHB0c1twYyArIDJdXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJuZXh0UG93MiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0UG93Mih2KSB7DQogICAgICAgICAgdi0tOw0KICAgICAgICAgIHYgfD0gdiA+PiAxOw0KICAgICAgICAgIHYgfD0gdiA+PiAyOw0KICAgICAgICAgIHYgfD0gdiA+PiA0Ow0KICAgICAgICAgIHYgfD0gdiA+PiA4Ow0KICAgICAgICAgIHYgfD0gdiA+PiAxNjsNCiAgICAgICAgICB2Kys7DQogICAgICAgICAgcmV0dXJuIHY7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaWxvZzIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaWxvZzIodikgew0KICAgICAgICAgIHZhciByOw0KICAgICAgICAgIHZhciBzaGlmdDsNCiAgICAgICAgICByID0gKHYgPiAweGZmZmYgPyAxIDogMCkgPDwgNDsNCiAgICAgICAgICB2ID4+PSByOw0KICAgICAgICAgIHNoaWZ0ID0gKHYgPiAweGZmID8gMSA6IDApIDw8IDM7DQogICAgICAgICAgdiA+Pj0gc2hpZnQ7DQogICAgICAgICAgciB8PSBzaGlmdDsNCiAgICAgICAgICBzaGlmdCA9ICh2ID4gMHhmID8gMSA6IDApIDw8IDI7DQogICAgICAgICAgdiA+Pj0gc2hpZnQ7DQogICAgICAgICAgciB8PSBzaGlmdDsNCiAgICAgICAgICBzaGlmdCA9ICh2ID4gMHgzID8gMSA6IDApIDw8IDE7DQogICAgICAgICAgdiA+Pj0gc2hpZnQ7DQogICAgICAgICAgciB8PSBzaGlmdDsNCiAgICAgICAgICByIHw9IHYgPj4gMTsNCiAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpbnRlcnNlY3RTZWdtZW50UG9seTJEIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGludGVyc2VjdFNlZ21lbnRQb2x5MkQocDAsIHAxLCB2ZXJ0cywgbnZlcnRzKSB7DQogICAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBJbnRlcnNlY3RSZXN1bHQoKTsNCiAgICAgICAgICB2YXIgRVBTID0gMC4wMDAwMDAwMTsNCiAgICAgICAgICB2YXIgZGlyID0gRGV0b3VyQ29tbW9uLnZTdWIocDEsIHAwKTsNCiAgICAgICAgICB2YXIgcDB2ID0gbmV3IFZlY3RvclB0ciQxKHAwKTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gbnZlcnRzIC0gMTsgaSA8IG52ZXJ0czsgaiA9IGkrKykgew0KICAgICAgICAgICAgdmFyIHZwaiA9IG5ldyBWZWN0b3JQdHIkMSh2ZXJ0cywgaiAqIDMpOw0KICAgICAgICAgICAgdmFyIGVkZ2UgPSBEZXRvdXJDb21tb24udlN1YihuZXcgVmVjdG9yUHRyJDEodmVydHMsIGkgKiAzKSwgdnBqKTsNCiAgICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIocDB2LCB2cGopOw0KICAgICAgICAgICAgdmFyIG4gPSBEZXRvdXJDb21tb24udlBlcnAyRChlZGdlLCBkaWZmKTsNCg0KICAgICAgICAgICAgdmFyIF9kMiA9IERldG91ckNvbW1vbi52UGVycDJEKGRpciwgZWRnZSk7DQoNCiAgICAgICAgICAgIGlmIChNYXRoLmFicyhfZDIpIDwgRVBTKSB7DQogICAgICAgICAgICAgIC8vIFMgaXMgbmVhcmx5IHBhcmFsbGVsIHRvIHRoaXMgZWRnZQ0KICAgICAgICAgICAgICBpZiAobiA8IDApIHJldHVybiByZXN1bHQ7ZWxzZSBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIF90ID0gbiAvIF9kMjsNCg0KICAgICAgICAgICAgaWYgKF9kMiA8IDApIHsNCiAgICAgICAgICAgICAgLy8gc2VnbWVudCBTIGlzIGVudGVyaW5nIGFjcm9zcyB0aGlzIGVkZ2UNCiAgICAgICAgICAgICAgaWYgKF90ID4gcmVzdWx0LnRtaW4pIHsNCiAgICAgICAgICAgICAgICByZXN1bHQudG1pbiA9IF90Ow0KICAgICAgICAgICAgICAgIHJlc3VsdC5zZWdNaW4gPSBqOyAvLyBTIGVudGVycyBhZnRlciBsZWF2aW5nIHBvbHlnb24NCg0KICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudG1pbiA+IHJlc3VsdC50bWF4KSByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyBzZWdtZW50IFMgaXMgbGVhdmluZyBhY3Jvc3MgdGhpcyBlZGdlDQogICAgICAgICAgICAgIGlmIChfdCA8IHJlc3VsdC50bWF4KSB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnRtYXggPSBfdDsNCiAgICAgICAgICAgICAgICByZXN1bHQuc2VnTWF4ID0gajsgLy8gUyBsZWF2ZXMgYmVmb3JlIGVudGVyaW5nIHBvbHlnb24NCg0KICAgICAgICAgICAgICAgIGlmIChyZXN1bHQudG1heCA8IHJlc3VsdC50bWluKSByZXR1cm4gcmVzdWx0Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmVzdWx0LmludGVyc2VjdHMgPSB0cnVlOw0KICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlzdGFuY2VQdFNlZ1NxcjJENCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0YW5jZVB0U2VnU3FyMkQ0KHB0LCB2ZXJ0cywgcCwgcSkgew0KICAgICAgICAgIHZhciBwcXggPSB2ZXJ0c1txICsgMF0gLSB2ZXJ0c1twICsgMF07DQogICAgICAgICAgdmFyIHBxeiA9IHZlcnRzW3EgKyAyXSAtIHZlcnRzW3AgKyAyXTsNCiAgICAgICAgICB2YXIgZHggPSBwdFswXSAtIHZlcnRzW3AgKyAwXTsNCiAgICAgICAgICB2YXIgZHogPSBwdFsyXSAtIHZlcnRzW3AgKyAyXTsNCiAgICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeiAqIHBxejsNCiAgICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF6ICogZHo7DQogICAgICAgICAgaWYgKGQgPiAwKSB0IC89IGQ7DQogICAgICAgICAgaWYgKHQgPCAwKSB0ID0gMDtlbHNlIGlmICh0ID4gMSkgdCA9IDE7DQogICAgICAgICAgZHggPSB2ZXJ0c1twICsgMF0gKyB0ICogcHF4IC0gcHRbMF07DQogICAgICAgICAgZHogPSB2ZXJ0c1twICsgMl0gKyB0ICogcHF6IC0gcHRbMl07DQogICAgICAgICAgcmV0dXJuIFtkeCAqIGR4ICsgZHogKiBkeiwgdF07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3Bwb3NpdGVUaWxlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wcG9zaXRlVGlsZShzaWRlKSB7DQogICAgICAgICAgcmV0dXJuIHNpZGUgKyA0ICYgMHg3Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZwZXJwWFoiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdnBlcnBYWihhLCBiKSB7DQogICAgICAgICAgcmV0dXJuIGFbMF0gKiBiWzJdIC0gYVsyXSAqIGJbMF07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaW50ZXJzZWN0U2VnU2VnMkQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJzZWN0U2VnU2VnMkQoYXAsIGFxLCBicCwgYnEpIHsNCiAgICAgICAgICB2YXIgdSA9IERldG91ckNvbW1vbi52U3ViKGFxLCBhcCk7DQogICAgICAgICAgdmFyIHYgPSBEZXRvdXJDb21tb24udlN1YihicSwgYnApOw0KICAgICAgICAgIHZhciB3ID0gRGV0b3VyQ29tbW9uLnZTdWIoYXAsIGJwKTsNCiAgICAgICAgICBkID0gRGV0b3VyQ29tbW9uLnZwZXJwWFoodSwgdik7DQogICAgICAgICAgaWYgKE1hdGguYWJzKGQpIDwgMWUtNikgcmV0dXJuIFtmYWxzZSwgMCwgMF07DQogICAgICAgICAgcyA9IERldG91ckNvbW1vbi52cGVycFhaKHYsIHcpIC8gZDsNCiAgICAgICAgICB0ID0gRGV0b3VyQ29tbW9uLnZwZXJwWFoodSwgdykgLyBkOw0KICAgICAgICAgIHJldHVybiBbdHJ1ZSwgcywgdF07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidlNjYWxlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZTY2FsZShfaW4sIHNjYWxlKSB7DQogICAgICAgICAgdmFyIG91dCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBvdXRbMF0gPSBfaW5bMF0gKiBzY2FsZTsNCiAgICAgICAgICBvdXRbMV0gPSBfaW5bMV0gKiBzY2FsZTsNCiAgICAgICAgICBvdXRbMl0gPSBfaW5bMl0gKiBzY2FsZTsNCiAgICAgICAgICByZXR1cm4gb3V0Ow0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBEZXRvdXJDb21tb247DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KERldG91ckNvbW1vbiwgIkVQUyIsIDFlLTQpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KERldG91ckNvbW1vbiwgInRociIsIERldG91ckNvbW1vbi5zcXIoMS4wIC8gMTYzODQuMCkpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KERldG91ckNvbW1vbiwgImVwcyIsIDFlLTQpOw0KDQogICAgLyoqDQogICAgICogRGVmaW5lcyBhIG5hdmlnYXRpb24gbWVzaCB0aWxlLg0KICAgICAqLw0KDQogICAgdmFyIE1lc2hUaWxlID0NCiAgICAvKiogQ291bnRlciBkZXNjcmliaW5nIG1vZGlmaWNhdGlvbnMgdG8gdGhlIHRpbGUuICovDQoNCiAgICAvKiogVGhlIHRpbGUgZGF0YS4gKi8NCg0KICAgIC8qKiBUaGUgdGlsZSBsaW5rcy4gKi8NCg0KICAgIC8qKiBJbmRleCB0byB0aGUgbmV4dCBmcmVlIGxpbmsuICovDQoNCiAgICAvKiogVGlsZSBmbGFncy4gKFNlZTogI2R0VGlsZUZsYWdzKSAqLw0KDQogICAgLyoqIFRoZSBuZXh0IGZyZWUgdGlsZSwgb3IgdGhlIG5leHQgdGlsZSBpbiB0aGUgc3BhdGlhbCBncmlkLiAqLw0KICAgIGZ1bmN0aW9uIE1lc2hUaWxlKGluZGV4KSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVzaFRpbGUpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImluZGV4IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2FsdCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRhdGEiLCBudWxsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsaW5rcyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsaW5rc0ZyZWVMaXN0IiwgTmF2TWVzaC5EVF9OVUxMX0xJTkspOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZsYWdzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibmV4dCIsIG51bGwpOw0KDQogICAgICB0aGlzLmluZGV4ID0gaW5kZXg7DQogICAgfTsNCg0KICAgIC8qKiBEZWZpbmVzIGEgcG9seW9nbiB3aXRoaW4gYSBkdFBvbHkgb2JqZWN0LiAqLw0KDQogICAgdmFyIFBvbHkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgLyoqIFRoZSBwb2x5Z29uIGlzIGEgc3RhbmRhcmQgY29udmV4IHBvbHlnb24gdGhhdCBpcyBwYXJ0IG9mIHRoZSBzdXJmYWNlIG9mIHRoZSBtZXNoLiAqLw0KDQogICAgICAvKiogVGhlIHBvbHlnb24gaXMgYW4gb2ZmLW1lc2ggY29ubmVjdGlvbiBjb25zaXN0aW5nIG9mIHR3byB2ZXJ0aWNlcy4gKi8NCg0KICAgICAgLyoqIEluZGV4IHRvIGZpcnN0IGxpbmsgaW4gbGlua2VkIGxpc3QuIChPciAjRFRfTlVMTF9MSU5LIGlmIHRoZXJlIGlzIG5vIGxpbmsuKSAqLw0KDQogICAgICAvKiogVGhlIGluZGljZXMgb2YgdGhlIHBvbHlnb24ncyB2ZXJ0aWNlcy4gVGhlIGFjdHVhbCB2ZXJ0aWNlcyBhcmUgbG9jYXRlZCBpbiBNZXNoVGlsZTo6dmVydHMuICovDQoNCiAgICAgIC8qKiBQYWNrZWQgZGF0YSByZXByZXNlbnRpbmcgbmVpZ2hib3IgcG9seWdvbnMgcmVmZXJlbmNlcyBhbmQgZmxhZ3MgZm9yIGVhY2ggZWRnZS4gKi8NCg0KICAgICAgLyoqIFRoZSB1c2VyIGRlZmluZWQgcG9seWdvbiBmbGFncy4gKi8NCg0KICAgICAgLyoqIFRoZSBudW1iZXIgb2YgdmVydGljZXMgaW4gdGhlIHBvbHlnb24uICovDQoNCiAgICAgIC8qKg0KICAgICAgICogVGhlIGJpdCBwYWNrZWQgYXJlYSBpZCBhbmQgcG9seWdvbiB0eXBlLg0KICAgICAgICogDQogICAgICAgKiBAbm90ZSBVc2UgdGhlIHN0cnVjdHVyZSdzIHNldCBhbmQgZ2V0IG1ldGhvZHMgdG8gYWNjZXNzIHRoaXMgdmFsdWUuDQogICAgICAgKi8NCiAgICAgIGZ1bmN0aW9uIFBvbHkoaW5kZXgsIG1heFZlcnRzUGVyUG9seSkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9seSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpbmRleCIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmaXJzdExpbmsiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZlcnRzIiwgW10pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibmVpcyIsIFtdKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZsYWdzIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJ0Q291bnQiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFyZWFBbmR0eXBlIiwgdm9pZCAwKTsNCg0KICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuZmlyc3RMaW5rID0gTmF2TWVzaC5EVF9OVUxMX0xJTks7DQogICAgICAgIHRoaXMudmVydHMgPSBuZXcgQXJyYXkobWF4VmVydHNQZXJQb2x5KTsNCiAgICAgICAgdGhpcy5uZWlzID0gbmV3IEFycmF5KG1heFZlcnRzUGVyUG9seSk7DQoNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnZlcnRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdGhpcy52ZXJ0c1tpXSA9IDA7DQogICAgICAgIH0NCg0KICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdGhpcy5uZWlzLmxlbmd0aDsgX2krKykgew0KICAgICAgICAgIHRoaXMubmVpc1tfaV0gPSAwOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhQb2x5LCBbew0KICAgICAgICBrZXk6ICJhbmQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5kKHYxLCB2Mikgew0KICAgICAgICAgIHZhciBoaSA9IDB4ODAwMDAwMDA7DQogICAgICAgICAgdmFyIGxvdyA9IDB4N2ZmZmZmZmY7DQogICAgICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpOw0KICAgICAgICAgIHZhciBoaTIgPSB+fih2MiAvIGhpKTsNCiAgICAgICAgICB2YXIgbG93MSA9IHYxICYgbG93Ow0KICAgICAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7DQogICAgICAgICAgdmFyIGggPSBoaTEgJiBoaTI7DQogICAgICAgICAgdmFyIGwgPSBsb3cxICYgbG93MjsNCiAgICAgICAgICByZXR1cm4gaCAqIGhpICsgbDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJvciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcih2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwOw0KICAgICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmOw0KICAgICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTsNCiAgICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7DQogICAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdzsNCiAgICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93Ow0KICAgICAgICAgIHZhciBoID0gaGkxIHwgaGkyOw0KICAgICAgICAgIHZhciBsID0gbG93MSB8IGxvdzI7DQogICAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7DQogICAgICAgIH0NCiAgICAgICAgLyoqIFNldHMgdGhlIHVzZXIgZGVmaW5lZCBhcmVhIGlkLiBbTGltaXQ6IDwgI0RUX01BWF9BUkVBU10gKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJzZXRBcmVhIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFyZWEoYSkgew0KICAgICAgICAgIHRoaXMuYXJlYUFuZHR5cGUgPSB0aGlzLm9yKHRoaXMuYW5kKHRoaXMuYXJlYUFuZHR5cGUsIDB4YzApLCB0aGlzLmFuZChhLCAweDNmKSk7DQogICAgICAgIH0NCiAgICAgICAgLyoqIFNldHMgdGhlIHBvbHlnb24gdHlwZS4gKFNlZTogI2R0UG9seVR5cGVzLikgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJzZXRUeXBlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFR5cGUodCkgew0KICAgICAgICAgIHRoaXMuYXJlYUFuZHR5cGUgPSB0aGlzLm9yKHRoaXMuYW5kKHRoaXMuYXJlYUFuZHR5cGUsIDB4M2YpIHwgdCA8PCA2KTsNCiAgICAgICAgfQ0KICAgICAgICAvKiogR2V0cyB0aGUgdXNlciBkZWZpbmVkIGFyZWEgaWQuICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0QXJlYSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBcmVhKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLmFyZWFBbmR0eXBlICYgMHgzOw0KICAgICAgICB9DQogICAgICAgIC8qKiBHZXRzIHRoZSBwb2x5Z29uIHR5cGUuIChTZWU6ICNkdFBvbHlUeXBlcykgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRUeXBlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFR5cGUoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMuYXJlYUFuZHR5cGUgPj4gNjsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gUG9seTsNCiAgICB9KCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUG9seSwgIkRUX1BPTFlUWVBFX0dST1VORCIsIDApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFBvbHksICJEVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04iLCAxKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKg0KICAgICAqIERlZmluZXMgYSBsaW5rIGJldHdlZW4gcG9seWdvbnMuDQogICAgICogDQogICAgICogQG5vdGUgVGhpcyBzdHJ1Y3R1cmUgaXMgcmFyZWx5IGlmIGV2ZXIgdXNlZCBieSB0aGUgZW5kIHVzZXIuDQogICAgICogQHNlZSBNZXNoVGlsZQ0KICAgICAqLw0KICAgIHZhciBMaW5rID0gZnVuY3Rpb24gTGluaygpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMaW5rKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWYiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZXh0IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZWRnZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNpZGUiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1heCIsIDApOw0KICAgIH07DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQogICAgdmFyIENsb3Nlc3RQb2ludE9uUG9seVJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQocG9zT3ZlclBvbHksIGNsb3Nlc3QpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENsb3Nlc3RQb2ludE9uUG9seVJlc3VsdCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwb3NPdmVyUG9seSIsIGZhbHNlKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNsb3Nlc3QiLCBbXSk7DQoNCiAgICAgICAgdGhpcy5wb3NPdmVyUG9seSA9IHBvc092ZXJQb2x5Ow0KICAgICAgICB0aGlzLmNsb3Nlc3QgPSBjbG9zZXN0Ow0KICAgICAgfQ0KICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcG9zaXRpb24gaXMgb3ZlciB0aGUgcG9seWdvbi4gKi8NCg0KDQogICAgICBfY3JlYXRlQ2xhc3MoQ2xvc2VzdFBvaW50T25Qb2x5UmVzdWx0LCBbew0KICAgICAgICBrZXk6ICJpc1Bvc092ZXJQb2x5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzUG9zT3ZlclBvbHkoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMucG9zT3ZlclBvbHk7DQogICAgICAgIH0NCiAgICAgICAgLyoqIFJldHVybnMgdGhlIGNsb3Nlc3QgcG9Qb2x5IG9uIHRoZSBwb2x5Z29uLiBbKHgsIHksIHopXSAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldENsb3Nlc3QiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xvc2VzdCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZXN0Ow0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQ7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBGaW5kTmVhcmVzdFBvbHlSZXN1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gRmluZE5lYXJlc3RQb2x5UmVzdWx0KG5lYXJlc3RSZWYsIG5lYXJlc3RQb3MpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbmROZWFyZXN0UG9seVJlc3VsdCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZWFyZXN0UmVmIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZWFyZXN0UG9zIiwgW10pOw0KDQogICAgICAgIHRoaXMubmVhcmVzdFJlZiA9IG5lYXJlc3RSZWY7DQogICAgICAgIHRoaXMubmVhcmVzdFBvcyA9IG5lYXJlc3RQb3M7DQogICAgICB9DQogICAgICAvKiogUmV0dXJucyB0aGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBuZWFyZXN0IHBvbHlnb24uICovDQoNCg0KICAgICAgX2NyZWF0ZUNsYXNzKEZpbmROZWFyZXN0UG9seVJlc3VsdCwgW3sNCiAgICAgICAga2V5OiAiZ2V0TmVhcmVzdFJlZiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROZWFyZXN0UmVmKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm5lYXJlc3RSZWY7DQogICAgICAgIH0NCiAgICAgICAgLyoqIFJldHVybnMgdGhlIG5lYXJlc3QgcG9Qb2x5IG9uIHRoZSBwb2x5Z29uLiBbb3B0XSBbKHgsIHksIHopXSAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldE5lYXJlc3RQb3MiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmVhcmVzdFBvcygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5uZWFyZXN0UG9zOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBGaW5kTmVhcmVzdFBvbHlSZXN1bHQ7DQogICAgfSgpOw0KDQogICAgZnVuY3Rpb24gYXJyYXljb3B5KG9uZSwgb25lU3RhcnQsIHR3bywgdHdvU3RhcnQsIGxlbikgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgICAgICB0d29bdHdvU3RhcnQgKyBpXSA9IG9uZVtvbmVTdGFydCArIGldOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHZhciBOYXZNZXNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIF9jcmVhdGVDbGFzcyhOYXZNZXNoLCBbew0KICAgICAgICBrZXk6ICJnZXRNYXhUaWxlcyIsDQogICAgICAgIC8vLyBBIGZsYWcgdGhhdCBpbmRpY2F0ZXMgdGhhdCBhbiBlbnRpdHkgbGlua3MgdG8gYW4gZXh0ZXJuYWwgZW50aXR5Lg0KICAgICAgICAvLy8gKEUuZy4gQSBwb2x5Z29uIGVkZ2UgaXMgYSBwb3J0YWwgdGhhdCBsaW5rcyB0byBhbm90aGVyIHBvbHlnb24uKQ0KICAgICAgICAvLy8gQSB2YWx1ZSB0aGF0IGluZGljYXRlcyB0aGUgZW50aXR5IGRvZXMgbm90IGxpbmsgdG8gYW55dGhpbmcuDQogICAgICAgIC8vIHN0YXRpYyBEVF9OVUxMX0xJTksgPSAweGZmZmZmZmZmOw0KICAgICAgICAvLy8gQSBmbGFnIHRoYXQgaW5kaWNhdGVzIHRoYXQgYW4gb2ZmLW1lc2ggY29ubmVjdGlvbiBjYW4gYmUgdHJhdmVyc2VkIGluDQogICAgICAgIC8vLyBib3RoIGRpcmVjdGlvbnMuIChJcyBiaWRpcmVjdGlvbmFsLikNCiAgICAgICAgLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiB1c2VyIGRlZmluZWQgYXJlYSBpZHMuDQogICAgICAgIC8vLyBMaW1pdCByYXljYXN0aW5nIGR1cmluZyBhbnkgYW5nbGUgcGFoZmluZGluZw0KICAgICAgICAvLy8gVGhlIGxpbWl0IGlzIGdpdmVuIGFzIGEgbXVsdGlwbGUgb2YgdGhlIGNoYXJhY3RlciByYWRpdXMNCiAgICAgICAgLy8vIDwgQ3VycmVudCBpbml0aWFsaXphdGlvbiBwYXJhbXMuIFRPRE86IGRvIG5vdCBzdG9yZSB0aGlzIGluZm8gdHdpY2UuDQogICAgICAgIC8vLyA8IE9yaWdpbiBvZiB0aGUgdGlsZSAoMCwwKQ0KICAgICAgICAvLyAgbV9vcmlnWzNdOyAvLy88IE9yaWdpbiBvZiB0aGUgdGlsZSAoMCwwKQ0KICAgICAgICAvLy8gPCBEaW1lbnNpb25zIG9mIGVhY2ggdGlsZS4NCiAgICAgICAgLy8vIDwgTWF4IG51bWJlciBvZiB0aWxlcy4NCiAgICAgICAgLy8vIDwgVGlsZSBoYXNoIGxvb2t1cCBzaXplIChtdXN0IGJlIHBvdCkuDQogICAgICAgIC8vLyA8IFRpbGUgaGFzaCBsb29rdXAgbWFzay4NCiAgICAgICAgLy8vIDwgVGlsZSBoYXNoIGxvb2t1cC4NCiAgICAgICAgLy8vIDwgRnJlZWxpc3Qgb2YgdGlsZXMuDQogICAgICAgIC8vLyA8IExpc3Qgb2YgdGlsZXMuDQoNCiAgICAgICAgLyoqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2ZXJ0aWNlcyBwZXIgbmF2aWdhdGlvbiBwb2x5Z29uLiAqLw0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdGlsZXMgc3VwcG9ydGVkIGJ5IHRoZSBuYXZpZ2F0aW9uIG1lc2guDQogICAgICAgICAqIA0KICAgICAgICAgKiBAcmV0dXJuIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aWxlcyBzdXBwb3J0ZWQgYnkgdGhlIG5hdmlnYXRpb24gbWVzaC4NCiAgICAgICAgICovDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNYXhUaWxlcygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX21heFRpbGVzOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBSZXR1cm5zIHRpbGUgaW4gdGhlIHRpbGUgYXJyYXkuDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFRpbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZShpKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV90aWxlc1tpXTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogR2V0cyB0aGUgcG9seWdvbiByZWZlcmVuY2UgZm9yIHRoZSB0aWxlJ3MgYmFzZSBwb2x5Z29uLg0KICAgICAgICAgKiANCiAgICAgICAgICogQHBhcmFtIHRpbGUNCiAgICAgICAgICogICAgICAgICAgICBUaGUgdGlsZS4NCiAgICAgICAgICogQHJldHVybiBUaGUgcG9seWdvbiByZWZlcmVuY2UgZm9yIHRoZSBiYXNlIHBvbHlnb24gaW4gdGhlIHNwZWNpZmllZCB0aWxlLg0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRQb2x5UmVmQmFzZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb2x5UmVmQmFzZSh0aWxlKSB7DQogICAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuIDA7DQogICAgICAgICAgdmFyIGl0ID0gdGlsZS5pbmRleDsNCiAgICAgICAgICByZXR1cm4gTmF2TWVzaC5lbmNvZGVQb2x5SWQodGlsZS5zYWx0LCBpdCwgMCk7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIERlcml2ZXMgYSBzdGFuZGFyZCBwb2x5Z29uIHJlZmVyZW5jZS4NCiAgICAgICAgICogDQogICAgICAgICAqIEBub3RlIFRoaXMgZnVuY3Rpb24gaXMgZ2VuZXJhbGx5IG1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS4NCiAgICAgICAgICogQHBhcmFtIHNhbHQNCiAgICAgICAgICogICAgICAgICAgICBUaGUgdGlsZSdzIHNhbHQgdmFsdWUuDQogICAgICAgICAqIEBwYXJhbSBpdA0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBpbmRleCBvZiB0aGUgdGlsZS4NCiAgICAgICAgICogQHBhcmFtIGlwDQogICAgICAgICAqICAgICAgICAgICAgVGhlIGluZGV4IG9mIHRoZSBwb2x5Z29uIHdpdGhpbiB0aGUgdGlsZS4NCiAgICAgICAgICogQHJldHVybiBlbmNvZGVkIHBvbHlnb24gcmVmZXJlbmNlDQogICAgICAgICAqLw0KICAgICAgICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMzc1NzIvMTAwNDc5MjANCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhbGxvY0xpbmsiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWxsb2NMaW5rKHRpbGUpIHsNCiAgICAgICAgICBpZiAodGlsZS5saW5rc0ZyZWVMaXN0ID09IE5hdk1lc2guRFRfTlVMTF9MSU5LKSB7DQogICAgICAgICAgICB2YXIgX2xpbmsgPSBuZXcgTGluaygpOw0KDQogICAgICAgICAgICBfbGluay5uZXh0ID0gTmF2TWVzaC5EVF9OVUxMX0xJTks7DQogICAgICAgICAgICB0aWxlLmxpbmtzLnB1c2goX2xpbmspOw0KICAgICAgICAgICAgcmV0dXJuIHRpbGUubGlua3MubGVuZ3RoIC0gMTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgbGluayA9IHRpbGUubGlua3NGcmVlTGlzdDsNCiAgICAgICAgICB0aWxlLmxpbmtzRnJlZUxpc3QgPSB0aWxlLmxpbmtzW2xpbmtdLm5leHQ7DQogICAgICAgICAgcmV0dXJuIGxpbms7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZnJlZUxpbmsiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZnJlZUxpbmsodGlsZSwgbGluaykgew0KICAgICAgICAgIHRpbGUubGlua3NbbGlua10ubmV4dCA9IHRpbGUubGlua3NGcmVlTGlzdDsNCiAgICAgICAgICB0aWxlLmxpbmtzRnJlZUxpc3QgPSBsaW5rOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSB0aWxlIGdyaWQgbG9jYXRpb24gZm9yIHRoZSBzcGVjaWZpZWQgd29ybGQgcG9zaXRpb24uDQogICAgICAgICAqIA0KICAgICAgICAgKiBAcGFyYW0gcG9zDQogICAgICAgICAqICAgICAgICAgICAgVGhlIHdvcmxkIHBvc2l0aW9uIGZvciB0aGUgcXVlcnkuIFsoeCwgeSwgeildDQogICAgICAgICAqIEByZXR1cm4gMi1lbGVtZW50IGxldCBhcnJheSB3aXRoICh0eCx0eSkgdGlsZSBsb2NhdGlvbg0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjYWxjVGlsZUxvYyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjVGlsZUxvYyhwb3MpIHsNCiAgICAgICAgICB2YXIgdHggPSBNYXRoLmZsb29yKChwb3NbMF0gLSB0aGlzLm1fb3JpZ1swXSkgLyB0aGlzLm1fdGlsZVdpZHRoKTsNCiAgICAgICAgICB2YXIgdHkgPSBNYXRoLmZsb29yKChwb3NbMl0gLSB0aGlzLm1fb3JpZ1syXSkgLyB0aGlzLm1fdGlsZUhlaWdodCk7DQogICAgICAgICAgcmV0dXJuIFt0eCwgdHldOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFRpbGVBbmRQb2x5QnlSZWYiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZUFuZFBvbHlCeVJlZihyZWYpIHsNCiAgICAgICAgICBpZiAocmVmID09IDApIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oInJlZiA9IDAiKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgc2FsdGl0aXAgPSBOYXZNZXNoLmRlY29kZVBvbHlJZChyZWYpOw0KICAgICAgICAgIHZhciBzYWx0ID0gc2FsdGl0aXBbMF07DQogICAgICAgICAgdmFyIGl0ID0gc2FsdGl0aXBbMV07DQogICAgICAgICAgdmFyIGlwID0gc2FsdGl0aXBbMl07DQogICAgICAgICAgaWYgKGl0ID49IHRoaXMubV9tYXhUaWxlcykgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigidGlsZSA+IG1fbWF4VGlsZXMiKTsNCiAgICAgICAgICBpZiAodGhpcy5tX3RpbGVzW2l0XS5zYWx0ICE9IHNhbHQgfHwgdGhpcy5tX3RpbGVzW2l0XS5kYXRhLmhlYWRlciA9PSBudWxsKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIHNhbHQgb3IgaGVhZGVyIik7DQogICAgICAgICAgaWYgKGlwID49IHRoaXMubV90aWxlc1tpdF0uZGF0YS5oZWFkZXIucG9seUNvdW50KSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJwb2x5ID4gcG9seUNvdW50Iik7DQogICAgICAgICAgcmV0dXJuIFt0aGlzLm1fdGlsZXNbaXRdLCB0aGlzLm1fdGlsZXNbaXRdLmRhdGEucG9seXNbaXBdXTsNCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEB3YXJuaW5nIE9ubHkgdXNlIHRoaXMgZnVuY3Rpb24gaWYgaXQgaXMga25vd24gdGhhdCB0aGUgcHJvdmlkZWQgcG9seWdvbg0KICAgICAgICAvLy8gcmVmZXJlbmNlIGlzIHZhbGlkLiBUaGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuICNnZXRUaWxlQW5kUG9seUJ5UmVmLA0KICAgICAgICAvLy8gYnV0DQogICAgICAgIC8vLyBpdCBkb2VzIG5vdCB2YWxpZGF0ZSB0aGUgcmVmZXJlbmNlLg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShyZWYpIHsNCiAgICAgICAgICB2YXIgc2FsdGl0aXAgPSBOYXZNZXNoLmRlY29kZVBvbHlJZChyZWYpOw0KICAgICAgICAgIHZhciBpdCA9IHNhbHRpdGlwWzFdOw0KICAgICAgICAgIHZhciBpcCA9IHNhbHRpdGlwWzJdOw0KICAgICAgICAgIHJldHVybiBbdGhpcy5tX3RpbGVzW2l0XSwgdGhpcy5tX3RpbGVzW2l0XS5kYXRhLnBvbHlzW2lwXV07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaXNWYWxpZFBvbHlSZWYiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNWYWxpZFBvbHlSZWYocmVmKSB7DQogICAgICAgICAgaWYgKHJlZiA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgdmFyIHNhbHRpdGlwID0gTmF2TWVzaC5kZWNvZGVQb2x5SWQocmVmKTsNCiAgICAgICAgICB2YXIgc2FsdCA9IHNhbHRpdGlwWzBdOw0KICAgICAgICAgIHZhciBpdCA9IHNhbHRpdGlwWzFdOw0KICAgICAgICAgIHZhciBpcCA9IHNhbHRpdGlwWzJdOw0KICAgICAgICAgIGlmIChpdCA+PSB0aGlzLm1fbWF4VGlsZXMpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICBpZiAodGhpcy5tX3RpbGVzW2l0XS5zYWx0ICE9IHNhbHQgfHwgdGhpcy5tX3RpbGVzW2l0XS5kYXRhID09IG51bGwpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICBpZiAoaXAgPj0gdGhpcy5tX3RpbGVzW2l0XS5kYXRhLmhlYWRlci5wb2x5Q291bnQpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRQYXJhbXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1zKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fcGFyYW1zOw0KICAgICAgICB9DQogICAgICB9XSwgW3sNCiAgICAgICAga2V5OiAibHNoaWZ0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxzaGlmdChudW0sIGJpdHMpIHsNCiAgICAgICAgICByZXR1cm4gbnVtICogTWF0aC5wb3coMiwgYml0cyk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicnNoaWZ0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJzaGlmdChudW0sIGJpdHMpIHsNCiAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gLyBNYXRoLnBvdygyLCBiaXRzKSk7DQogICAgICAgIH0gLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDM2NjYxOTkvMTAwNDc5MjANCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhbmQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5kKHYxLCB2Mikgew0KICAgICAgICAgIHZhciBoaSA9IDB4ODAwMDAwMDA7DQogICAgICAgICAgdmFyIGxvdyA9IDB4N2ZmZmZmZmY7DQogICAgICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpOw0KICAgICAgICAgIHZhciBoaTIgPSB+fih2MiAvIGhpKTsNCiAgICAgICAgICB2YXIgbG93MSA9IHYxICYgbG93Ow0KICAgICAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7DQogICAgICAgICAgdmFyIGggPSBoaTEgJiBoaTI7DQogICAgICAgICAgdmFyIGwgPSBsb3cxICYgbG93MjsNCiAgICAgICAgICByZXR1cm4gaCAqIGhpICsgbDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJvciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcih2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwOw0KICAgICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmOw0KICAgICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTsNCiAgICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7DQogICAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdzsNCiAgICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93Ow0KICAgICAgICAgIHZhciBoID0gaGkxIHwgaGkyOw0KICAgICAgICAgIHZhciBsID0gbG93MSB8IGxvdzI7DQogICAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZW5jb2RlUG9seUlkIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVuY29kZVBvbHlJZChzYWx0LCBpdCwgaXApIHsNCiAgICAgICAgICB2YXIgYSA9IE5hdk1lc2gubHNoaWZ0KHNhbHQsIE5hdk1lc2guRFRfUE9MWV9CSVRTICsgTmF2TWVzaC5EVF9USUxFX0JJVFMpOw0KICAgICAgICAgIHZhciBiID0gTmF2TWVzaC5sc2hpZnQoaXQsIE5hdk1lc2guRFRfUE9MWV9CSVRTKTsNCiAgICAgICAgICByZXR1cm4gTmF2TWVzaC5vcihOYXZNZXNoLm9yKGEsIGIpLCBpcCk7DQogICAgICAgIH0gLy8vIERlY29kZXMgYSBzdGFuZGFyZCBwb2x5Z29uIHJlZmVyZW5jZS4NCiAgICAgICAgLy8vIEBub3RlIFRoaXMgZnVuY3Rpb24gaXMgZ2VuZXJhbGx5IG1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS4NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gcmVmIFRoZSBwb2x5Z29uIHJlZmVyZW5jZSB0byBkZWNvZGUuDQogICAgICAgIC8vLyBAcGFyYW1bb3V0XSBzYWx0IFRoZSB0aWxlJ3Mgc2FsdCB2YWx1ZS4NCiAgICAgICAgLy8vIEBwYXJhbVtvdXRdIGl0IFRoZSBpbmRleCBvZiB0aGUgdGlsZS4NCiAgICAgICAgLy8vIEBwYXJhbVtvdXRdIGlwIFRoZSBpbmRleCBvZiB0aGUgcG9seWdvbiB3aXRoaW4gdGhlIHRpbGUuDQogICAgICAgIC8vLyBAc2VlICNlbmNvZGVQb2x5SWQNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJkZWNvZGVQb2x5SWQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVjb2RlUG9seUlkKHJlZikgew0KICAgICAgICAgIHZhciBzYWx0Ow0KICAgICAgICAgIHZhciBpdDsNCiAgICAgICAgICB2YXIgaXA7DQogICAgICAgICAgdmFyIHNhbHRNYXNrID0gTmF2TWVzaC5sc2hpZnQoMSwgTmF2TWVzaC5EVF9TQUxUX0JJVFMpIC0gMTsNCiAgICAgICAgICB2YXIgdGlsZU1hc2sgPSBOYXZNZXNoLmxzaGlmdCgxLCBOYXZNZXNoLkRUX1RJTEVfQklUUykgLSAxOw0KICAgICAgICAgIHZhciBwb2x5TWFzayA9IE5hdk1lc2gubHNoaWZ0KDEsIE5hdk1lc2guRFRfUE9MWV9CSVRTKSAtIDE7DQogICAgICAgICAgc2FsdCA9IE1hdGguZmxvb3IoTmF2TWVzaC5hbmQoTmF2TWVzaC5yc2hpZnQocmVmLCBOYXZNZXNoLkRUX1BPTFlfQklUUyArIE5hdk1lc2guRFRfVElMRV9CSVRTKSwgc2FsdE1hc2spKTsNCiAgICAgICAgICBpdCA9IE1hdGguZmxvb3IoTmF2TWVzaC5hbmQoTmF2TWVzaC5yc2hpZnQocmVmLCBOYXZNZXNoLkRUX1BPTFlfQklUUyksIHRpbGVNYXNrKSk7DQogICAgICAgICAgaXAgPSBNYXRoLmZsb29yKE5hdk1lc2guYW5kKHJlZiwgcG9seU1hc2spKTsNCiAgICAgICAgICByZXR1cm4gW3NhbHQsIGl0LCBpcF07DQogICAgICAgIH0gLy8vIEV4dHJhY3RzIGEgdGlsZSdzIHNhbHQgdmFsdWUgZnJvbSB0aGUgc3BlY2lmaWVkIHBvbHlnb24gcmVmZXJlbmNlLg0KICAgICAgICAvLy8gQG5vdGUgVGhpcyBmdW5jdGlvbiBpcyBnZW5lcmFsbHkgbWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5Lg0KICAgICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHBvbHlnb24gcmVmZXJlbmNlLg0KICAgICAgICAvLy8gQHNlZSAjZW5jb2RlUG9seUlkDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGVjb2RlUG9seUlkU2FsdCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWNvZGVQb2x5SWRTYWx0KHJlZikgew0KICAgICAgICAgIHZhciBzYWx0TWFzayA9ICgxIDw8IE5hdk1lc2guRFRfU0FMVF9CSVRTKSAtIDE7DQogICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IocmVmID4+IE5hdk1lc2guRFRfUE9MWV9CSVRTICsgTmF2TWVzaC5EVF9USUxFX0JJVFMgJiBzYWx0TWFzayk7DQogICAgICAgIH0gLy8vIEV4dHJhY3RzIHRoZSB0aWxlJ3MgaW5kZXggZnJvbSB0aGUgc3BlY2lmaWVkIHBvbHlnb24gcmVmZXJlbmNlLg0KICAgICAgICAvLy8gQG5vdGUgVGhpcyBmdW5jdGlvbiBpcyBnZW5lcmFsbHkgbWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5Lg0KICAgICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHBvbHlnb24gcmVmZXJlbmNlLg0KICAgICAgICAvLy8gQHNlZSAjZW5jb2RlUG9seUlkDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGVjb2RlUG9seUlkVGlsZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWNvZGVQb2x5SWRUaWxlKHJlZikgew0KICAgICAgICAgIHZhciB0aWxlTWFzayA9ICgxIDw8IE5hdk1lc2guRFRfVElMRV9CSVRTKSAtIDE7DQogICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IocmVmID4+IE5hdk1lc2guRFRfUE9MWV9CSVRTICYgdGlsZU1hc2spOw0KICAgICAgICB9IC8vLyBFeHRyYWN0cyB0aGUgcG9seWdvbidzIGluZGV4ICh3aXRoaW4gaXRzIHRpbGUpIGZyb20gdGhlIHNwZWNpZmllZA0KICAgICAgICAvLy8gcG9seWdvbiByZWZlcmVuY2UuDQogICAgICAgIC8vLyBAbm90ZSBUaGlzIGZ1bmN0aW9uIGlzIGdlbmVyYWxseSBtZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuDQogICAgICAgIC8vLyBAcGFyYW1baW5dIHJlZiBUaGUgcG9seWdvbiByZWZlcmVuY2UuDQogICAgICAgIC8vLyBAc2VlICNlbmNvZGVQb2x5SWQNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJkZWNvZGVQb2x5SWRQb2x5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlY29kZVBvbHlJZFBvbHkocmVmKSB7DQogICAgICAgICAgdmFyIHBvbHlNYXNrID0gKDEgPDwgTmF2TWVzaC5EVF9QT0xZX0JJVFMpIC0gMTsNCiAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihyZWYgJiBwb2x5TWFzayk7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgZnVuY3Rpb24gTmF2TWVzaChvbmUsIG1heFZlcnRzUGVyUG9seSwgZmxhZ3MpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5hdk1lc2gpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9wYXJhbXMiLCBudWxsKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fb3JpZyIsIFtdKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fdGlsZVdpZHRoIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3RpbGVIZWlnaHQiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fbWF4VGlsZXMiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fdGlsZUx1dFNpemUiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fdGlsZUx1dE1hc2siLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fcG9zTG9va3VwIiwgW10pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9uZXh0RnJlZSIsIG51bGwpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV90aWxlcyIsIFtdKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fbWF4VmVydFBlclBvbHkiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fdGlsZUNvdW50IiwgMCk7DQoNCiAgICAgICAgaWYgKGZsYWdzIHx8IGZsYWdzID09IDApIHsNCiAgICAgICAgICB0aGlzLl9jb25zdHJ1Y3RvcihOYXZNZXNoLmdldE5hdk1lc2hQYXJhbXMob25lKSwgbWF4VmVydHNQZXJQb2x5KTsNCg0KICAgICAgICAgIHRoaXMuYWRkVGlsZShvbmUsIGZsYWdzLCAwKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLl9jb25zdHJ1Y3RvcihvbmUsIG1heFZlcnRzUGVyUG9seSk7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKE5hdk1lc2gsIFt7DQogICAgICAgIGtleTogIl9jb25zdHJ1Y3RvciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY29uc3RydWN0b3IocGFyYW1zLCBtYXhWZXJ0c1BlclBvbHkpIHsNCiAgICAgICAgICB0aGlzLm1fcGFyYW1zID0gcGFyYW1zOw0KICAgICAgICAgIHRoaXMubV9vcmlnID0gcGFyYW1zLm9yaWc7DQogICAgICAgICAgdGhpcy5tX3RpbGVXaWR0aCA9IHBhcmFtcy50aWxlV2lkdGg7DQogICAgICAgICAgdGhpcy5tX3RpbGVIZWlnaHQgPSBwYXJhbXMudGlsZUhlaWdodDsgLy8gSW5pdCB0aWxlcw0KDQogICAgICAgICAgdGhpcy5tX21heFRpbGVzID0gcGFyYW1zLm1heFRpbGVzOw0KICAgICAgICAgIHRoaXMubV9tYXhWZXJ0UGVyUG9seSA9IG1heFZlcnRzUGVyUG9seTsNCiAgICAgICAgICB2YXIgbHV0c2l6ZSA9IERldG91ckNvbW1vbi5uZXh0UG93MihwYXJhbXMubWF4VGlsZXMgLyA0KTsNCiAgICAgICAgICBpZiAobHV0c2l6ZSA9PSAwKSBsdXRzaXplID0gMTsNCiAgICAgICAgICB0aGlzLm1fdGlsZUx1dFNpemUgPSBsdXRzaXplOw0KICAgICAgICAgIHRoaXMubV90aWxlTHV0TWFzayA9IHRoaXMubV90aWxlTHV0U2l6ZSAtIDE7DQogICAgICAgICAgdGhpcy5tX3RpbGVzID0gbmV3IEFycmF5KHRoaXMubV9tYXhUaWxlcyk7DQogICAgICAgICAgdGhpcy5tX3Bvc0xvb2t1cCA9IG5ldyBBcnJheSh0aGlzLm1fdGlsZUx1dFNpemUpOw0KICAgICAgICAgIHRoaXMubV9uZXh0RnJlZSA9IG51bGw7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5tX21heFRpbGVzIC0gMTsgaSA+PSAwOyAtLWkpIHsNCiAgICAgICAgICAgIHRoaXMubV90aWxlc1tpXSA9IG5ldyBNZXNoVGlsZShpKTsNCiAgICAgICAgICAgIHRoaXMubV90aWxlc1tpXS5zYWx0ID0gMTsNCiAgICAgICAgICAgIHRoaXMubV90aWxlc1tpXS5uZXh0ID0gdGhpcy5tX25leHRGcmVlOw0KICAgICAgICAgICAgdGhpcy5tX25leHRGcmVlID0gdGhpcy5tX3RpbGVzW2ldOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJxdWVyeVBvbHlnb25zSW5UaWxlIiwNCiAgICAgICAgLy8gVE9ETzogVGhlc2UgbWV0aG9kcyBhcmUgZHVwbGljYXRlcyBmcm9tIGR0TmF2TWVzaFF1ZXJ5LCBidXQgYXJlIG5lZWRlZA0KICAgICAgICAvLyBmb3Igb2ZmLW1lc2ggY29ubmVjdGlvbiBmaW5kaW5nLg0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcXVlcnlQb2x5Z29uc0luVGlsZSh0aWxlLCBxbWluLCBxbWF4KSB7DQogICAgICAgICAgdmFyIHBvbHlzID0gW107DQoNCiAgICAgICAgICBpZiAodGlsZS5kYXRhLmJ2VHJlZSAhPSBudWxsKSB7DQogICAgICAgICAgICB2YXIgbm9kZUluZGV4ID0gMDsNCiAgICAgICAgICAgIHZhciB0Ym1pbiA9IHRpbGUuZGF0YS5oZWFkZXIuYm1pbjsNCiAgICAgICAgICAgIHZhciB0Ym1heCA9IHRpbGUuZGF0YS5oZWFkZXIuYm1heDsNCiAgICAgICAgICAgIHZhciBxZmFjID0gdGlsZS5kYXRhLmhlYWRlci5idlF1YW50RmFjdG9yOyAvLyBDYWxjdWxhdGUgcXVhbnRpemVkIGJveA0KDQogICAgICAgICAgICB2YXIgX2JtaW4gPSBuZXcgQXJyYXkoMyk7DQoNCiAgICAgICAgICAgIHZhciBfYm1heCA9IG5ldyBBcnJheSgzKTsgLy8gZHRDbGFtcCBxdWVyeSBib3ggdG8gd29ybGQgYm94Lg0KDQoNCiAgICAgICAgICAgIHZhciBfbWlueCA9IERldG91ckNvbW1vbi5jbGFtcChxbWluWzBdLCB0Ym1pblswXSwgdGJtYXhbMF0pIC0gdGJtaW5bMF07DQoNCiAgICAgICAgICAgIHZhciBtaW55ID0gRGV0b3VyQ29tbW9uLmNsYW1wKHFtaW5bMV0sIHRibWluWzFdLCB0Ym1heFsxXSkgLSB0Ym1pblsxXTsNCiAgICAgICAgICAgIHZhciBtaW56ID0gRGV0b3VyQ29tbW9uLmNsYW1wKHFtaW5bMl0sIHRibWluWzJdLCB0Ym1heFsyXSkgLSB0Ym1pblsyXTsNCg0KICAgICAgICAgICAgdmFyIF9tYXh4ID0gRGV0b3VyQ29tbW9uLmNsYW1wKHFtYXhbMF0sIHRibWluWzBdLCB0Ym1heFswXSkgLSB0Ym1pblswXTsNCg0KICAgICAgICAgICAgdmFyIG1heHkgPSBEZXRvdXJDb21tb24uY2xhbXAocW1heFsxXSwgdGJtaW5bMV0sIHRibWF4WzFdKSAtIHRibWluWzFdOw0KICAgICAgICAgICAgdmFyIG1heHogPSBEZXRvdXJDb21tb24uY2xhbXAocW1heFsyXSwgdGJtaW5bMl0sIHRibWF4WzJdKSAtIHRibWluWzJdOyAvLyBRdWFudGl6ZQ0KDQogICAgICAgICAgICBfYm1pblswXSA9IE5hdk1lc2guYW5kKE1hdGguZmxvb3IocWZhYyAqIF9taW54KSwgMHhmZmZlKTsNCiAgICAgICAgICAgIF9ibWluWzFdID0gTmF2TWVzaC5hbmQoTWF0aC5mbG9vcihxZmFjICogbWlueSksIDB4ZmZmZSk7DQogICAgICAgICAgICBfYm1pblsyXSA9IE5hdk1lc2guYW5kKE1hdGguZmxvb3IocWZhYyAqIG1pbnopLCAweGZmZmUpOw0KICAgICAgICAgICAgX2JtYXhbMF0gPSBOYXZNZXNoLm9yKE1hdGguZmxvb3IocWZhYyAqIF9tYXh4ICsgMSksIDEpOw0KICAgICAgICAgICAgX2JtYXhbMV0gPSBOYXZNZXNoLm9yKE1hdGguZmxvb3IocWZhYyAqIG1heHkgKyAxKSwgMSk7DQogICAgICAgICAgICBfYm1heFsyXSA9IE5hdk1lc2gub3IoTWF0aC5mbG9vcihxZmFjICogbWF4eiArIDEpLCAxKTsgLy8gVHJhdmVyc2UgdHJlZQ0KDQogICAgICAgICAgICB2YXIgYmFzZSA9IHRoaXMuZ2V0UG9seVJlZkJhc2UodGlsZSk7DQogICAgICAgICAgICB2YXIgZW5kID0gdGlsZS5kYXRhLmhlYWRlci5idk5vZGVDb3VudDsNCg0KICAgICAgICAgICAgd2hpbGUgKG5vZGVJbmRleCA8IGVuZCkgew0KICAgICAgICAgICAgICB2YXIgbm9kZSA9IHRpbGUuZGF0YS5idlRyZWVbbm9kZUluZGV4XTsNCiAgICAgICAgICAgICAgdmFyIG92ZXJsYXAgPSBEZXRvdXJDb21tb24ub3ZlcmxhcFF1YW50Qm91bmRzKF9ibWluLCBfYm1heCwgbm9kZS5ibWluLCBub2RlLmJtYXgpOw0KICAgICAgICAgICAgICB2YXIgaXNMZWFmTm9kZSA9IG5vZGUuaSA+PSAwOw0KDQogICAgICAgICAgICAgIGlmIChpc0xlYWZOb2RlICYmIG92ZXJsYXApIHsNCiAgICAgICAgICAgICAgICBwb2x5cy5wdXNoKE5hdk1lc2gub3IoYmFzZSwgbm9kZS5pKSk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAob3ZlcmxhcCB8fCBpc0xlYWZOb2RlKSBub2RlSW5kZXgrKztlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIgZXNjYXBlSW5kZXggPSAtbm9kZS5pOw0KICAgICAgICAgICAgICAgIG5vZGVJbmRleCArPSBlc2NhcGVJbmRleDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gcG9seXM7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGJtaW4gPSBbbnVsbCwgbnVsbCwgbnVsbF07DQogICAgICAgICAgICBibWF4ID0gW251bGwsIG51bGwsIG51bGxdOw0KDQogICAgICAgICAgICB2YXIgX2Jhc2UgPSB0aGlzLmdldFBvbHlSZWZCYXNlKHRpbGUpOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK2kpIHsNCiAgICAgICAgICAgICAgdmFyIHAgPSB0aWxlLmRhdGEucG9seXNbaV07IC8vIERvIG5vdCByZXR1cm4gb2ZmLW1lc2ggY29ubmVjdGlvbiBwb2x5Z29ucy4NCg0KICAgICAgICAgICAgICBpZiAocC5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIGNvbnRpbnVlOyAvLyBDYWxjIHBvbHlnb24gYm91bmRzLg0KDQogICAgICAgICAgICAgIHZhciB2ID0gcC52ZXJ0c1swXSAqIDM7DQogICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShibWluLCB0aWxlLmRhdGEudmVydHMsIHYpOw0KICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYm1heCwgdGlsZS5kYXRhLnZlcnRzLCB2KTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IHAudmVydENvdW50OyArK2opIHsNCiAgICAgICAgICAgICAgICB2ID0gcC52ZXJ0c1tqXSAqIDM7DQogICAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZNaW4oYm1pbiwgdGlsZS5kYXRhLnZlcnRzLCB2KTsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udk1heChibWF4LCB0aWxlLmRhdGEudmVydHMsIHYpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgaWYgKG92ZXJsYXBCb3VuZHMocW1pbiwgcW1heCwgYm1pbiwgYm1heCkpIHsNCiAgICAgICAgICAgICAgICBwb2x5cy5wdXNoKE5hdk1lc2gub3IoX2Jhc2UsIGkpKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gcG9seXM7DQogICAgICAgICAgfQ0KICAgICAgICB9IC8vLyBBZGRzIGEgdGlsZSB0byB0aGUgbmF2aWdhdGlvbiBtZXNoLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBkYXRhIERhdGEgZm9yIHRoZSBuZXcgdGlsZSBtZXNoLiAoU2VlOiAjZHRDcmVhdGVOYXZNZXNoRGF0YSkNCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gZGF0YVNpemUgRGF0YSBzaXplIG9mIHRoZSBuZXcgdGlsZSBtZXNoLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBmbGFncyBUaWxlIGZsYWdzLiAoU2VlOiAjZHRUaWxlRmxhZ3MpDQogICAgICAgIC8vLyBAcGFyYW1baW5dIGxhc3RSZWYgVGhlIGRlc2lyZWQgcmVmZXJlbmNlIGZvciB0aGUgdGlsZS4gKFdoZW4gcmVsb2FkaW5nIGENCiAgICAgICAgLy8vIHRpbGUuKSBbb3B0XSBbRGVmYXVsdDogMF0NCiAgICAgICAgLy8vIEBwYXJhbVtvdXRdIHJlc3VsdCBUaGUgdGlsZSByZWZlcmVuY2UuIChJZiB0aGUgdGlsZSB3YXMgc3VjY2VzZnVsbHkNCiAgICAgICAgLy8vIGFkZGVkLikgW29wdF0NCiAgICAgICAgLy8vIEByZXR1cm4gVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIG9wZXJhdGlvbi4NCiAgICAgICAgLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgYWRkIG9wZXJhdGlvbiB3aWxsIGZhaWwgaWYgdGhlIGRhdGEgaXMgaW4gdGhlIHdyb25nIGZvcm1hdCwgdGhlDQogICAgICAgIC8vLyBhbGxvY2F0ZWQgdGlsZQ0KICAgICAgICAvLy8gc3BhY2UgaXMgZnVsbCwgb3IgdGhlcmUgaXMgYSB0aWxlIGFscmVhZHkgYXQgdGhlIHNwZWNpZmllZCByZWZlcmVuY2UuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIGxhc3RSZWYgcGFyYW1ldGVyIGlzIHVzZWQgdG8gcmVzdG9yZSBhIHRpbGUgd2l0aCB0aGUgc2FtZSB0aWxlDQogICAgICAgIC8vLyByZWZlcmVuY2UgaXQgaGFkIHByZXZpb3VzbHkgdXNlZC4gSW4gdGhpcyBjYXNlIHRoZSAjZHRQb2x5UmVmJ3MgZm9yIHRoZQ0KICAgICAgICAvLy8gdGlsZSB3aWxsIGJlIHJlc3RvcmVkIHRvIHRoZSBzYW1lIHZhbHVlcyB0aGV5IHdlcmUgYmVmb3JlIHRoZSB0aWxlIHdhcw0KICAgICAgICAvLy8gcmVtb3ZlZC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgbmF2IG1lc2ggYXNzdW1lcyBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBkYXRhIHBhc3NlZCBhbmQgd2lsbCBtYWtlDQogICAgICAgIC8vLyBjaGFuZ2VzIHRvIHRoZSBkeW5hbWljIHBvcnRpb24gb2YgdGhlIGRhdGEuIEZvciB0aGF0IHJlYXNvbiB0aGUgZGF0YQ0KICAgICAgICAvLy8gc2hvdWxkIG5vdCBiZSByZXVzZWQgaW4gb3RoZXIgbmF2IG1lc2hlcyB1bnRpbCB0aGUgdGlsZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkNCiAgICAgICAgLy8vIHJlbW92ZWQgZnJvbSB0aGlzIG5hdiBtZXNoLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBzZWUgZHRDcmVhdGVOYXZNZXNoRGF0YSwgI3JlbW92ZVRpbGUNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRUaWxlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRpbGUoZGF0YSwgZmxhZ3MsIGxhc3RSZWYpIHsNCiAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGRhdGEgaXMgaW4gcmlnaHQgZm9ybWF0Lg0KICAgICAgICAgIHZhciBoZWFkZXIgPSBkYXRhLmhlYWRlcjsgLy8gTWFrZSBzdXJlIHRoZSBsb2NhdGlvbiBpcyBmcmVlLg0KDQogICAgICAgICAgaWYgKHRoaXMuZ2V0VGlsZUF0KGhlYWRlci54LCBoZWFkZXIueSwgaGVhZGVyLmxheWVyKSAhPSBudWxsKSB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiVGlsZSBhbHJlYWR5IGV4aXN0cyIpOyAvLyBBbGxvY2F0ZSBhIHRpbGUuDQoNCiAgICAgICAgICB2YXIgdGlsZSA9IG51bGw7DQoNCiAgICAgICAgICBpZiAobGFzdFJlZiA9PSAwKSB7DQogICAgICAgICAgICBpZiAodGhpcy5tX25leHRGcmVlICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgdGlsZSA9IHRoaXMubV9uZXh0RnJlZTsNCiAgICAgICAgICAgICAgdGhpcy5tX25leHRGcmVlID0gdGlsZS5uZXh0Ow0KICAgICAgICAgICAgICB0aWxlLm5leHQgPSBudWxsOw0KICAgICAgICAgICAgICB0aGlzLm1fdGlsZUNvdW50Kys7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFRyeSB0byByZWxvY2F0ZSB0aGUgdGlsZSB0byBzcGVjaWZpYyBpbmRleCB3aXRoIHNhbWUgc2FsdC4NCiAgICAgICAgICAgIHZhciB0aWxlSW5kZXggPSBkZWNvZGVQb2x5SWRUaWxlKGxhc3RSZWYpOw0KICAgICAgICAgICAgaWYgKHRpbGVJbmRleCA+PSB0aGlzLm1fbWF4VGlsZXMpIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJUaWxlIGluZGV4IHRvbyBoaWdoIik7IC8vIFRyeSB0byBmaW5kIHRoZSBzcGVjaWZpYyB0aWxlIGlkIGZyb20gdGhlIGZyZWUgbGlzdC4NCg0KICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMubV90aWxlc1t0aWxlSW5kZXhdOw0KICAgICAgICAgICAgdmFyIHByZXYgPSBudWxsOw0KICAgICAgICAgICAgdGlsZSA9IHRoaXMubV9uZXh0RnJlZTsNCg0KICAgICAgICAgICAgd2hpbGUgKHRpbGUgIT0gbnVsbCAmJiB0aWxlICE9IHRhcmdldCkgew0KICAgICAgICAgICAgICBwcmV2ID0gdGlsZTsNCiAgICAgICAgICAgICAgdGlsZSA9IHRpbGUubmV4dDsNCiAgICAgICAgICAgIH0gLy8gQ291bGQgbm90IGZpbmQgdGhlIGNvcnJlY3QgbG9jYXRpb24uDQoNCg0KICAgICAgICAgICAgaWYgKHRpbGUgIT0gdGFyZ2V0KSB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiQ291bGQgbm90IGZpbmQgdGlsZSIpOyAvLyBSZW1vdmUgZnJvbSBmcmVlbGlzdA0KDQogICAgICAgICAgICBpZiAocHJldiA9PSBudWxsKSB0aGlzLm1fbmV4dEZyZWUgPSB0aWxlLm5leHQ7ZWxzZSBwcmV2Lm5leHQgPSB0aWxlLm5leHQ7IC8vIFJlc3RvcmUgc2FsdC4NCg0KICAgICAgICAgICAgdGlsZS5zYWx0ID0gZGVjb2RlUG9seUlkU2FsdChsYXN0UmVmKTsNCiAgICAgICAgICB9IC8vIE1ha2Ugc3VyZSB3ZSBjb3VsZCBhbGxvY2F0ZSBhIHRpbGUuDQoNCg0KICAgICAgICAgIGlmICh0aWxlID09IG51bGwpIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJDb3VsZCBub3QgYWxsb2NhdGUgYSB0aWxlIik7DQogICAgICAgICAgdGlsZS5kYXRhID0gZGF0YTsNCiAgICAgICAgICB0aWxlLmZsYWdzID0gZmxhZ3M7DQogICAgICAgICAgdGlsZS5saW5rcyA9IFtdOyAvLyBJbnNlcnQgdGlsZSBpbnRvIHRoZSBwb3NpdGlvbiBsdXQuDQoNCiAgICAgICAgICB2YXIgaCA9IE5hdk1lc2guY29tcHV0ZVRpbGVIYXNoKGhlYWRlci54LCBoZWFkZXIueSwgdGhpcy5tX3RpbGVMdXRNYXNrKTsNCiAgICAgICAgICB0aWxlLm5leHQgPSB0aGlzLm1fcG9zTG9va3VwW2hdOw0KICAgICAgICAgIHRoaXMubV9wb3NMb29rdXBbaF0gPSB0aWxlOyAvLyBQYXRjaCBoZWFkZXIgcG9pbnRlcnMuDQogICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGl0ZW1zIGluIHRoZSBidnRyZWUsIHJlc2V0IHRoZSB0cmVlIHBvaW50ZXIuDQoNCiAgICAgICAgICBpZiAodGlsZS5kYXRhLmJ2VHJlZSAhPSBudWxsICYmIHRpbGUuZGF0YS5idlRyZWUubGVuZ3RoID09IDApIHRpbGUuZGF0YS5idlRyZWUgPSBudWxsOyAvLyBJbml0IHRpbGUuDQoNCiAgICAgICAgICB0aGlzLmNvbm5lY3RJbnRMaW5rcyh0aWxlKTsgLy8gQmFzZSBvZmYtbWVzaCBjb25uZWN0aW9ucyB0byB0aGVpciBzdGFydGluZyBwb2x5Z29ucyBhbmQgY29ubmVjdCBjb25uZWN0aW9ucyBpbnNpZGUgdGhlIHRpbGUuDQoNCiAgICAgICAgICB0aGlzLmJhc2VPZmZNZXNoTGlua3ModGlsZSk7DQogICAgICAgICAgdGhpcy5jb25uZWN0RXh0T2ZmTWVzaExpbmtzKHRpbGUsIHRpbGUsIC0xKTsgLy8gQ29ubmVjdCB3aXRoIGxheWVycyBpbiBjdXJyZW50IHRpbGUuDQoNCiAgICAgICAgICB2YXIgbmVpcyA9IHRoaXMuZ2V0VGlsZXNBdChoZWFkZXIueCwgaGVhZGVyLnkpOw0KDQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZWlzLmxlbmd0aDsgKytqKSB7DQogICAgICAgICAgICBpZiAobmVpc1tqXSA9PSB0aWxlKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25uZWN0RXh0TGlua3ModGlsZSwgbmVpc1tqXSwgLTEpOw0KICAgICAgICAgICAgY29ubmVjdEV4dExpbmtzKG5laXNbal0sIHRpbGUsIC0xKTsNCiAgICAgICAgICAgIHRoaXMuY29ubmVjdEV4dE9mZk1lc2hMaW5rcyh0aWxlLCBuZWlzW2pdLCAtMSk7DQogICAgICAgICAgICB0aGlzLmNvbm5lY3RFeHRPZmZNZXNoTGlua3MobmVpc1tqXSwgdGlsZSwgLTEpOw0KICAgICAgICAgIH0gLy8gQ29ubmVjdCB3aXRoIG5laWdoYm91ciB0aWxlcy4NCg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyArK2kpIHsNCiAgICAgICAgICAgIG5laXMgPSB0aGlzLmdldE5laWdoYm91clRpbGVzQXQoaGVhZGVyLngsIGhlYWRlci55LCBpKTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IG5laXMubGVuZ3RoOyArK19qKSB7DQogICAgICAgICAgICAgIGNvbm5lY3RFeHRMaW5rcyh0aWxlLCBuZWlzW19qXSwgaSk7DQogICAgICAgICAgICAgIGNvbm5lY3RFeHRMaW5rcyhuZWlzW19qXSwgdGlsZSwgRGV0b3VyQ29tbW9uLm9wcG9zaXRlVGlsZShpKSk7DQogICAgICAgICAgICAgIHRoaXMuY29ubmVjdEV4dE9mZk1lc2hMaW5rcyh0aWxlLCBuZWlzW19qXSwgaSk7DQogICAgICAgICAgICAgIHRoaXMuY29ubmVjdEV4dE9mZk1lc2hMaW5rcyhuZWlzW19qXSwgdGlsZSwgRGV0b3VyQ29tbW9uLm9wcG9zaXRlVGlsZShpKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJlZih0aWxlKTsNCiAgICAgICAgfSAvLy8gUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIHRpbGUgZnJvbSB0aGUgbmF2aWdhdGlvbiBtZXNoLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHJlZmVyZW5jZSBvZiB0aGUgdGlsZSB0byByZW1vdmUuDQogICAgICAgIC8vLyBAcGFyYW1bb3V0XSBkYXRhIERhdGEgYXNzb2NpYXRlZCB3aXRoIGRlbGV0ZWQgdGlsZS4NCiAgICAgICAgLy8vIEBwYXJhbVtvdXRdIGRhdGFTaXplIFNpemUgb2YgdGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIGRlbGV0ZWQgdGlsZS4NCiAgICAgICAgLy8vIEByZXR1cm4gVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIG9wZXJhdGlvbi4NCiAgICAgICAgLy8gZHRTdGF0dXMgcmVtb3ZlVGlsZShkdFRpbGVSZWYgcmVmLCBjaGFyKiogZGF0YSwgaW50KiBkYXRhU2l6ZSk7DQogICAgICAgIC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBkYXRhIGZvciB0aGUgdGlsZSBzbyB0aGF0LCBpZiBkZXNpcmVkLA0KICAgICAgICAvLy8gaXQgY2FuIGJlIGFkZGVkIGJhY2sgdG8gdGhlIG5hdmlnYXRpb24gbWVzaCBhdCBhIGxhdGVyIHBvaW50Lg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBzZWUgI2FkZFRpbGUNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZW1vdmVUaWxlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZVRpbGUocmVmKSB7DQogICAgICAgICAgaWYgKHJlZiA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgdGlsZUluZGV4ID0gZGVjb2RlUG9seUlkVGlsZShyZWYpOw0KICAgICAgICAgIHZhciB0aWxlU2FsdCA9IGRlY29kZVBvbHlJZFNhbHQocmVmKTsNCiAgICAgICAgICBpZiAodGlsZUluZGV4ID49IHRoaXMubV9tYXhUaWxlcykgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIkludmFsaWQgdGlsZSBpbmRleCIpOw0KICAgICAgICAgIHZhciB0aWxlID0gdGhpcy5tX3RpbGVzW3RpbGVJbmRleF07DQogICAgICAgICAgaWYgKHRpbGUuc2FsdCAhPSB0aWxlU2FsdCkgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oIkludmFsaWQgdGlsZSBzYWx0Iik7IC8vIFJlbW92ZSB0aWxlIGZyb20gaGFzaCBsb29rdXAuDQoNCiAgICAgICAgICB2YXIgaCA9IE5hdk1lc2guY29tcHV0ZVRpbGVIYXNoKHRpbGUuZGF0YS5oZWFkZXIueCwgdGlsZS5kYXRhLmhlYWRlci55LCB0aGlzLm1fdGlsZUx1dE1hc2spOw0KICAgICAgICAgIHZhciBwcmV2ID0gbnVsbDsNCiAgICAgICAgICB2YXIgY3VyID0gdGhpcy5tX3Bvc0xvb2t1cFtoXTsNCg0KICAgICAgICAgIHdoaWxlIChjdXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgaWYgKGN1ciA9PSB0aWxlKSB7DQogICAgICAgICAgICAgIGlmIChwcmV2ICE9IG51bGwpIHByZXYubmV4dCA9IGN1ci5uZXh0O2Vsc2UgdGhpcy5tX3Bvc0xvb2t1cFtoXSA9IGN1ci5uZXh0Ow0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcHJldiA9IGN1cjsNCiAgICAgICAgICAgIGN1ciA9IGN1ci5uZXh0Ow0KICAgICAgICAgIH0gLy8gUmVtb3ZlIGNvbm5lY3Rpb25zIHRvIG5laWdoYm91ciB0aWxlcy4NCiAgICAgICAgICAvLyBDcmVhdGUgY29ubmVjdGlvbnMgd2l0aCBuZWlnaGJvdXIgdGlsZXMuDQogICAgICAgICAgLy8gRGlzY29ubmVjdCBmcm9tIG90aGVyIGxheWVycyBpbiBjdXJyZW50IHRpbGUuDQoNCg0KICAgICAgICAgIG5uZWlzID0gdGhpcy5nZXRUaWxlc0F0KHRpbGUuZGF0YS5oZWFkZXIueCwgdGlsZS5kYXRhLmhlYWRlci55KTsNCg0KICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihubmVpcyksDQogICAgICAgICAgICAgIF9zdGVwOw0KDQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgIHZhciBfajIgPSBfc3RlcC52YWx1ZTsNCiAgICAgICAgICAgICAgaWYgKF9qMiA9PSB0aWxlKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgdW5jb25uZWN0TGlua3MoX2oyLCB0aWxlKTsNCiAgICAgICAgICAgIH0gLy8gRGlzY29ubmVjdCBmcm9tIG5laWdoYm91ciB0aWxlcy4NCg0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsNCiAgICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7ICsraSkgew0KICAgICAgICAgICAgbm5laXMgPSB0aGlzLmdldE5laWdoYm91clRpbGVzQXQodGlsZS5kYXRhLmhlYWRlci54LCB0aWxlLmRhdGEuaGVhZGVyLnksIGkpOw0KDQogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5uZWlzKSwNCiAgICAgICAgICAgICAgICBfc3RlcDI7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgICAgdmFyIGogPSBfc3RlcDIudmFsdWU7DQogICAgICAgICAgICAgICAgdW5jb25uZWN0TGlua3MoaiwgdGlsZSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBkYXRhID0gdGlsZS5kYXRhOyAvLyBSZXNldCB0aWxlLg0KDQogICAgICAgICAgdGlsZS5kYXRhID0gbnVsbDsNCiAgICAgICAgICB0aWxlLmZsYWdzID0gMDsNCiAgICAgICAgICB0aWxlLmxpbmtzID0gW107IC8vIFVwZGF0ZSBzYWx0LCBzYWx0IHNob3VsZCBuZXZlciBiZSB6ZXJvLg0KDQogICAgICAgICAgdGlsZS5zYWx0ID0gdGlsZS5zYWx0ICsgMSAmICgxIDw8IE5hdk1lc2guRFRfU0FMVF9CSVRTKSAtIDE7DQogICAgICAgICAgaWYgKHRpbGUuc2FsdCA9PSAwKSB0aWxlLnNhbHQrKzsgLy8gQWRkIHRvIGZyZWUgbGlzdC4NCg0KICAgICAgICAgIHRpbGUubmV4dCA9IHRoaXMubV9uZXh0RnJlZTsNCiAgICAgICAgICB0aGlzLm1fbmV4dEZyZWUgPSB0aWxlOw0KICAgICAgICAgIHRoaXMubV90aWxlQ291bnQtLTsNCiAgICAgICAgICByZXR1cm4gZGF0YTsNCiAgICAgICAgfSAvLy8gQnVpbGRzIGludGVybmFsIHBvbHlnb25zIGxpbmtzIGZvciBhIHRpbGUuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY29ubmVjdEludExpbmtzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3RJbnRMaW5rcyh0aWxlKSB7DQogICAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuOw0KICAgICAgICAgIHZhciBiYXNlID0gdGhpcy5nZXRQb2x5UmVmQmFzZSh0aWxlKTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZS5kYXRhLmhlYWRlci5wb2x5Q291bnQ7ICsraSkgew0KICAgICAgICAgICAgdmFyIHBvbHkgPSB0aWxlLmRhdGEucG9seXNbaV07DQogICAgICAgICAgICBwb2x5LmZpcnN0TGluayA9IE5hdk1lc2guRFRfTlVMTF9MSU5LOw0KICAgICAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSBjb250aW51ZTsgLy8gQnVpbGQgZWRnZSBsaW5rcyBiYWNrd2FyZHMgc28gdGhhdCB0aGUgbGlua3Mgd2lsbCBiZQ0KICAgICAgICAgICAgLy8gaW4gdGhlIGxpbmtlZCBsaXN0IGZyb20gbG93ZXN0IGluZGV4IHRvIGhpZ2hlc3QuDQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSBwb2x5LnZlcnRDb3VudCAtIDE7IGogPj0gMDsgLS1qKSB7DQogICAgICAgICAgICAgIC8vIFNraXAgaGFyZCBhbmQgbm9uLWludGVybmFsIGVkZ2VzLg0KICAgICAgICAgICAgICBpZiAocG9seS5uZWlzW2pdID09IDAgfHwgKHBvbHkubmVpc1tqXSAmIE5hdk1lc2guRFRfRVhUX0xJTkspICE9IDApIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5hbGxvY0xpbmsodGlsZSk7DQogICAgICAgICAgICAgIHZhciBsaW5rID0gdGlsZS5saW5rc1tpZHhdOw0KICAgICAgICAgICAgICBsaW5rLnJlZiA9IE5hdk1lc2gub3IoYmFzZSwgcG9seS5uZWlzW2pdIC0gMSk7DQogICAgICAgICAgICAgIGxpbmsuZWRnZSA9IGo7DQogICAgICAgICAgICAgIGxpbmsuc2lkZSA9IDB4ZmY7DQogICAgICAgICAgICAgIGxpbmsuYm1pbiA9IGxpbmsuYm1heCA9IDA7IC8vIEFkZCB0byBsaW5rZWQgbGlzdC4NCg0KICAgICAgICAgICAgICBsaW5rLm5leHQgPSBwb2x5LmZpcnN0TGluazsNCiAgICAgICAgICAgICAgcG9seS5maXJzdExpbmsgPSBpZHg7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInVuY29ubmVjdExpbmtzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuY29ubmVjdExpbmtzKHRpbGUsIHRhcmdldCkgew0KICAgICAgICAgIGlmICh0aWxlID09IG51bGwgfHwgdGFyZ2V0ID09IG51bGwpIHJldHVybjsNCiAgICAgICAgICB2YXIgdGFyZ2V0TnVtID0gZGVjb2RlUG9seUlkVGlsZSh0aGlzLmdldFRpbGVSZWYodGFyZ2V0KSk7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK2kpIHsNCiAgICAgICAgICAgIHZhciBwb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2ldOw0KICAgICAgICAgICAgdmFyIGogPSBwb2x5LmZpcnN0TGluazsNCiAgICAgICAgICAgIHZhciBwaiA9IE5hdk1lc2guRFRfTlVMTF9MSU5LOw0KDQogICAgICAgICAgICB3aGlsZSAoaiAhPSBOYXZNZXNoLkRUX05VTExfTElOSykgew0KICAgICAgICAgICAgICBpZiAoZGVjb2RlUG9seUlkVGlsZSh0aWxlLmxpbmtzW2pdLnJlZikgPT0gdGFyZ2V0TnVtKSB7DQogICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGxpbmsuDQogICAgICAgICAgICAgICAgdmFyIG5qID0gdGlsZS5saW5rc1tqXS5uZXh0Ow0KICAgICAgICAgICAgICAgIGlmIChwaiA9PSBOYXZNZXNoLkRUX05VTExfTElOSykgcG9seS5maXJzdExpbmsgPSBuajtlbHNlIHRpbGUubGlua3NbcGpdLm5leHQgPSBuajsNCiAgICAgICAgICAgICAgICBmcmVlTGluayh0aWxlLCBqKTsNCiAgICAgICAgICAgICAgICBqID0gbmo7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gQWR2YW5jZQ0KICAgICAgICAgICAgICAgIHBqID0gajsNCiAgICAgICAgICAgICAgICBqID0gdGlsZS5saW5rc1tqXS5uZXh0Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNvbm5lY3RFeHRMaW5rcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0RXh0TGlua3ModGlsZSwgdGFyZ2V0LCBzaWRlKSB7DQogICAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuOyAvLyBDb25uZWN0IGJvcmRlciBsaW5rcy4NCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZS5kYXRhLmhlYWRlci5wb2x5Q291bnQ7ICsraSkgew0KICAgICAgICAgICAgdmFyIHBvbHkgPSB0aWxlLmRhdGEucG9seXNbaV07IC8vIENyZWF0ZSBuZXcgbGlua3MuDQogICAgICAgICAgICAvLyBzaG9ydCBtID0gTmF2TWVzaC5EVF9FWFRfTElOSyB8IChzaG9ydClzaWRlOw0KDQogICAgICAgICAgICB2YXIgbnYgPSBwb2x5LnZlcnRDb3VudDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudjsgKytqKSB7DQogICAgICAgICAgICAgIC8vIFNraXAgbm9uLXBvcnRhbCBlZGdlcy4NCiAgICAgICAgICAgICAgaWYgKChwb2x5Lm5laXNbal0gJiBOYXZNZXNoLkRUX0VYVF9MSU5LKSA9PSAwKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgdmFyIGRpciA9IHBvbHkubmVpc1tqXSAmIDB4ZmY7DQogICAgICAgICAgICAgIGlmIChzaWRlICE9IC0xICYmIGRpciAhPSBzaWRlKSBjb250aW51ZTsgLy8gQ3JlYXRlIG5ldyBsaW5rcw0KDQogICAgICAgICAgICAgIHZhciB2YSA9IHBvbHkudmVydHNbal0gKiAzOw0KICAgICAgICAgICAgICB2YXIgdmIgPSBwb2x5LnZlcnRzWyhqICsgMSkgJSBudl0gKiAzOw0KICAgICAgICAgICAgICBjb25uZWN0ZWRQb2x5cyA9IGZpbmRDb25uZWN0aW5nUG9seXModGlsZS5kYXRhLnZlcnRzLCB2YSwgdmIsIHRhcmdldCwgRGV0b3VyQ29tbW9uLm9wcG9zaXRlVGlsZShkaXIpLCA0KTsNCiAgICAgICAgICAgICAgbmVpID0gY29ubmVjdGVkUG9seXNbMF07DQogICAgICAgICAgICAgIG5laWEgPSBjb25uZWN0ZWRQb2x5c1sxXTsNCiAgICAgICAgICAgICAgdmFyIG5uZWkgPSBjb25uZWN0ZWRQb2x5cy50aGlyZDsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG5uZWk7ICsraykgew0KICAgICAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLmFsbG9jTGluayh0aWxlKTsNCiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHRpbGUubGlua3NbaWR4XTsNCiAgICAgICAgICAgICAgICBsaW5rLnJlZiA9IG5laVtrXTsNCiAgICAgICAgICAgICAgICBsaW5rLmVkZ2UgPSBqOw0KICAgICAgICAgICAgICAgIGxpbmsuc2lkZSA9IGRpcjsNCiAgICAgICAgICAgICAgICBsaW5rLm5leHQgPSBwb2x5LmZpcnN0TGluazsNCiAgICAgICAgICAgICAgICBwb2x5LmZpcnN0TGluayA9IGlkeDsgLy8gQ29tcHJlc3MgcG9ydGFsIGxpbWl0cyB0byBhIGJ5dGUgdmFsdWUuDQoNCiAgICAgICAgICAgICAgICBpZiAoZGlyID09IDAgfHwgZGlyID09IDQpIHsNCiAgICAgICAgICAgICAgICAgIHRtaW4gPSAobmVpYVtrICogMiArIDBdIC0gdGlsZS5kYXRhLnZlcnRzW3ZhICsgMl0pIC8gKHRpbGUuZGF0YS52ZXJ0c1t2YiArIDJdIC0gdGlsZS5kYXRhLnZlcnRzW3ZhICsgMl0pOw0KICAgICAgICAgICAgICAgICAgdG1heCA9IChuZWlhW2sgKiAyICsgMV0gLSB0aWxlLmRhdGEudmVydHNbdmEgKyAyXSkgLyAodGlsZS5kYXRhLnZlcnRzW3ZiICsgMl0gLSB0aWxlLmRhdGEudmVydHNbdmEgKyAyXSk7DQoNCiAgICAgICAgICAgICAgICAgIGlmICh0bWluID4gdG1heCkgew0KICAgICAgICAgICAgICAgICAgICB0ZW1wID0gdG1pbjsNCiAgICAgICAgICAgICAgICAgICAgdG1pbiA9IHRtYXg7DQogICAgICAgICAgICAgICAgICAgIHRtYXggPSB0ZW1wOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBsaW5rLmJtaW4gPSBNYXRoLmZsb29yKERldG91ckNvbW1vbi5jbGFtcCh0bWluLCAwLjAsIDEuMCkgKiAyNTUuMCk7DQogICAgICAgICAgICAgICAgICBsaW5rLmJtYXggPSBNYXRoLmZsb29yKERldG91ckNvbW1vbi5jbGFtcCh0bWF4LCAwLjAsIDEuMCkgKiAyNTUuMCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaXIgPT0gMiB8fCBkaXIgPT0gNikgew0KICAgICAgICAgICAgICAgICAgdG1pbiA9IChuZWlhW2sgKiAyICsgMF0gLSB0aWxlLmRhdGEudmVydHNbdmFdKSAvICh0aWxlLmRhdGEudmVydHNbdmJdIC0gdGlsZS5kYXRhLnZlcnRzW3ZhXSk7DQogICAgICAgICAgICAgICAgICB0bWF4ID0gKG5laWFbayAqIDIgKyAxXSAtIHRpbGUuZGF0YS52ZXJ0c1t2YV0pIC8gKHRpbGUuZGF0YS52ZXJ0c1t2Yl0gLSB0aWxlLmRhdGEudmVydHNbdmFdKTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7DQogICAgICAgICAgICAgICAgICAgIHRlbXAgPSB0bWluOw0KICAgICAgICAgICAgICAgICAgICB0bWluID0gdG1heDsNCiAgICAgICAgICAgICAgICAgICAgdG1heCA9IHRlbXA7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGxpbmsuYm1pbiA9IE1hdGguZmxvb3IoRGV0b3VyQ29tbW9uLmNsYW1wKHRtaW4sIDAuMCwgMS4wKSAqIDI1NS4wKTsNCiAgICAgICAgICAgICAgICAgIGxpbmsuYm1heCA9IE1hdGguZmxvb3IoRGV0b3VyQ29tbW9uLmNsYW1wKHRtYXgsIDAuMCwgMS4wKSAqIDI1NS4wKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY29ubmVjdEV4dE9mZk1lc2hMaW5rcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0RXh0T2ZmTWVzaExpbmtzKHRpbGUsIHRhcmdldCwgc2lkZSkgew0KICAgICAgICAgIGlmICh0aWxlID09IG51bGwpIHJldHVybjsgLy8gQ29ubmVjdCBvZmYtbWVzaCBsaW5rcy4NCiAgICAgICAgICAvLyBXZSBhcmUgaW50ZXJlc3RlZCBvbiBsaW5rcyB3aGljaCBsYW5kIGZyb20gdGFyZ2V0IHRpbGUgdG8gdGhpcyB0aWxlLg0KDQogICAgICAgICAgdmFyIG9wcG9zaXRlU2lkZSA9IHNpZGUgPT0gLTEgPyAweGZmIDogRGV0b3VyQ29tbW9uLm9wcG9zaXRlVGlsZShzaWRlKTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0LmRhdGEuaGVhZGVyLm9mZk1lc2hDb25Db3VudDsgKytpKSB7DQogICAgICAgICAgICB2YXIgdGFyZ2V0Q29uID0gdGFyZ2V0LmRhdGEub2ZmTWVzaENvbnNbaV07DQogICAgICAgICAgICBpZiAodGFyZ2V0Q29uLnNpZGUgIT0gb3Bwb3NpdGVTaWRlKSBjb250aW51ZTsNCiAgICAgICAgICAgIHZhciB0YXJnZXRQb2x5ID0gdGFyZ2V0LmRhdGEucG9seXNbdGFyZ2V0Q29uLnBvbHldOyAvLyBTa2lwIG9mZi1tZXNoIGNvbm5lY3Rpb25zIHdoaWNoIHN0YXJ0IGxvY2F0aW9uIGNvdWxkIG5vdCBiZQ0KICAgICAgICAgICAgLy8gY29ubmVjdGVkIGF0IGFsbC4NCg0KICAgICAgICAgICAgaWYgKHRhcmdldFBvbHkuZmlyc3RMaW5rID09IE5hdk1lc2guRFRfTlVMTF9MSU5LKSBjb250aW51ZTsNCiAgICAgICAgICAgIHZhciBleHQgPSBbdGFyZ2V0Q29uLnJhZCwgdGFyZ2V0LmRhdGEuaGVhZGVyLndhbGthYmxlQ2xpbWIsIHRhcmdldENvbi5yYWRdOyAvLyBGaW5kIHBvbHlnb24gdG8gY29ubmVjdCB0by4NCg0KICAgICAgICAgICAgdmFyIHAgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgICBwWzBdID0gdGFyZ2V0Q29uLnBvc1szXTsNCiAgICAgICAgICAgIHBbMV0gPSB0YXJnZXRDb24ucG9zWzRdOw0KICAgICAgICAgICAgcFsyXSA9IHRhcmdldENvbi5wb3NbNV07DQogICAgICAgICAgICB2YXIgbmVhcmVzdCA9IHRoaXMuZmluZE5lYXJlc3RQb2x5SW5UaWxlKHRpbGUsIHAsIGV4dCk7DQogICAgICAgICAgICB2YXIgcmVmID0gbmVhcmVzdC5nZXROZWFyZXN0UmVmKCk7DQogICAgICAgICAgICBpZiAocmVmID09IDApIGNvbnRpbnVlOw0KICAgICAgICAgICAgdmFyIG5lYXJlc3RQdCA9IG5lYXJlc3QuZ2V0TmVhcmVzdFBvcygpOyAvLyBmaW5kTmVhcmVzdFBvbHkgbWF5IHJldHVybiB0b28gb3B0aW1pc3RpYyByZXN1bHRzLCBmdXJ0aGVyIGNoZWNrDQogICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUuDQoNCiAgICAgICAgICAgIGlmIChEZXRvdXJDb21tb24uc3FyKG5lYXJlc3RQdFswXSAtIHBbMF0pICsgRGV0b3VyQ29tbW9uLnNxcihuZWFyZXN0UHRbMl0gLSBwWzJdKSA+IERldG91ckNvbW1vbi5zcXIodGFyZ2V0Q29uLnJhZCkpIGNvbnRpbnVlOyAvLyBNYWtlIHN1cmUgdGhlIGxvY2F0aW9uIGlzIG9uIGN1cnJlbiBtZXNoLg0KDQogICAgICAgICAgICB0YXJnZXQuZGF0YS52ZXJ0c1t0YXJnZXRQb2x5LnZlcnRzWzFdICogM10gPSBuZWFyZXN0UHRbMF07DQogICAgICAgICAgICB0YXJnZXQuZGF0YS52ZXJ0c1t0YXJnZXRQb2x5LnZlcnRzWzFdICogMyArIDFdID0gbmVhcmVzdFB0WzFdOw0KICAgICAgICAgICAgdGFyZ2V0LmRhdGEudmVydHNbdGFyZ2V0UG9seS52ZXJ0c1sxXSAqIDMgKyAyXSA9IG5lYXJlc3RQdFsyXTsgLy8gbGV0IG9mZi1tZXNoIGNvbm5lY3Rpb24gdG8gdGFyZ2V0IHBvbHkuDQoNCiAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLmFsbG9jTGluayh0YXJnZXQpOw0KICAgICAgICAgICAgdmFyIGxpbmsgPSB0YXJnZXQubGlua3NbaWR4XTsNCiAgICAgICAgICAgIGxpbmsucmVmID0gcmVmOw0KICAgICAgICAgICAgbGluay5lZGdlID0gMTsNCiAgICAgICAgICAgIGxpbmsuc2lkZSA9IG9wcG9zaXRlU2lkZTsNCiAgICAgICAgICAgIGxpbmsuYm1pbiA9IGxpbmsuYm1heCA9IDA7IC8vIEFkZCB0byBsaW5rZWQgbGlzdC4NCg0KICAgICAgICAgICAgbGluay5uZXh0ID0gdGFyZ2V0UG9seS5maXJzdExpbms7DQogICAgICAgICAgICB0YXJnZXRQb2x5LmZpcnN0TGluayA9IGlkeDsgLy8gbGV0IHRhcmdldCBwb2x5IHRvIG9mZi1tZXNoIGNvbm5lY3Rpb24uDQoNCiAgICAgICAgICAgIGlmICgodGFyZ2V0Q29uLmZsYWdzICYgTmF2TWVzaC5EVF9PRkZNRVNIX0NPTl9CSURJUikgIT0gMCkgew0KICAgICAgICAgICAgICB2YXIgdGlkeCA9IHRoaXMuYWxsb2NMaW5rKHRpbGUpOw0KICAgICAgICAgICAgICB2YXIgbGFuZFBvbHlJZHggPSBOYXZNZXNoLmRlY29kZVBvbHlJZFBvbHkocmVmKTsNCiAgICAgICAgICAgICAgdmFyIGxhbmRQb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2xhbmRQb2x5SWR4XTsNCiAgICAgICAgICAgICAgbGluayA9IHRpbGUubGlua3NbdGlkeF07DQogICAgICAgICAgICAgIGxpbmsucmVmID0gTmF2TWVzaC5vcih0aGlzLmdldFBvbHlSZWZCYXNlKHRhcmdldCksIHRhcmdldENvbi5wb2x5KTsNCiAgICAgICAgICAgICAgbGluay5lZGdlID0gMHhmZjsNCiAgICAgICAgICAgICAgbGluay5zaWRlID0gc2lkZSA9PSAtMSA/IDB4ZmYgOiBzaWRlOw0KICAgICAgICAgICAgICBsaW5rLmJtaW4gPSBsaW5rLmJtYXggPSAwOyAvLyBBZGQgdG8gbGlua2VkIGxpc3QuDQoNCiAgICAgICAgICAgICAgbGluay5uZXh0ID0gbGFuZFBvbHkuZmlyc3RMaW5rOw0KICAgICAgICAgICAgICBsYW5kUG9seS5maXJzdExpbmsgPSB0aWR4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJmaW5kQ29ubmVjdGluZ1BvbHlzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRDb25uZWN0aW5nUG9seXModmVydHMsIHZhLCB2YiwgdGlsZSwgc2lkZSwgbWF4Y29uKSB7DQogICAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuIFtudWxsLCBudWxsLCAwXTsNCiAgICAgICAgICB2YXIgY29uID0gbmV3IEFycmF5KG1heGNvbik7DQogICAgICAgICAgdmFyIGNvbmFyZWEgPSBuZXcgQXJyYXkobWF4Y29uICogMik7DQogICAgICAgICAgdmFyIGFtaW4gPSBuZXcgQXJyYXkoMik7DQogICAgICAgICAgdmFyIGFtYXggPSBuZXcgQXJyYXkoMik7DQogICAgICAgICAgY2FsY1NsYWJFbmRQb2ludHModmVydHMsIHZhLCB2YiwgYW1pbiwgYW1heCwgc2lkZSk7DQogICAgICAgICAgYXBvcyA9IGdldFNsYWJDb29yZCh2ZXJ0cywgdmEsIHNpZGUpOyAvLyBSZW1vdmUgbGlua3MgcG9pbnRpbmcgdG8gJ3NpZGUnIGFuZCBjb21wYWN0IHRoZSBsaW5rcyBhcnJheS4NCg0KICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDIpOw0KICAgICAgICAgIHZhciBibWF4ID0gbmV3IEFycmF5KDIpOw0KICAgICAgICAgIHZhciBtID0gTmF2TWVzaC5vcihOYXZNZXNoLkRUX0VYVF9MSU5LLCBzaWRlKTsNCiAgICAgICAgICB2YXIgbiA9IDA7DQogICAgICAgICAgdmFyIGJhc2UgPSB0aGlzLmdldFBvbHlSZWZCYXNlKHRpbGUpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWxlLmRhdGEuaGVhZGVyLnBvbHlDb3VudDsgKytpKSB7DQogICAgICAgICAgICB2YXIgcG9seSA9IHRpbGUuZGF0YS5wb2x5c1tpXTsNCiAgICAgICAgICAgIHZhciBudiA9IHBvbHkudmVydENvdW50Ow0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG52OyArK2opIHsNCiAgICAgICAgICAgICAgLy8gU2tpcCBlZGdlcyB3aGljaCBkbyBub3QgcG9Qb2x5IHRvIHRoZSByaWdodCBzaWRlLg0KICAgICAgICAgICAgICBpZiAocG9seS5uZWlzW2pdICE9IG0pIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB2YXIgdmMgPSBwb2x5LnZlcnRzW2pdICogMzsNCiAgICAgICAgICAgICAgdmFyIHZkID0gcG9seS52ZXJ0c1soaiArIDEpICUgbnZdICogMzsNCiAgICAgICAgICAgICAgYnBvcyA9IGdldFNsYWJDb29yZCh0aWxlLmRhdGEudmVydHMsIHZjLCBzaWRlKTsgLy8gU2VnbWVudHMgYXJlIG5vdCBjbG9zZSBlbm91Z2guDQoNCiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGFwb3MgLSBicG9zKSA+IDAuMDEpIGNvbnRpbnVlOyAvLyBDaGVjayBpZiB0aGUgc2VnbWVudHMgdG91Y2guDQoNCiAgICAgICAgICAgICAgY2FsY1NsYWJFbmRQb2ludHModGlsZS5kYXRhLnZlcnRzLCB2YywgdmQsIGJtaW4sIGJtYXgsIHNpZGUpOw0KICAgICAgICAgICAgICBpZiAoIW92ZXJsYXBTbGFicyhhbWluLCBhbWF4LCBibWluLCBibWF4LCAwLjAxLCB0aWxlLmRhdGEuaGVhZGVyLndhbGthYmxlQ2xpbWIpKSBjb250aW51ZTsgLy8gQWRkIHJldHVybiB2YWx1ZS4NCg0KICAgICAgICAgICAgICBpZiAobiA8IG1heGNvbikgew0KICAgICAgICAgICAgICAgIGNvbmFyZWFbbiAqIDIgKyAwXSA9IE1hdGgubWF4KGFtaW5bMF0sIGJtaW5bMF0pOw0KICAgICAgICAgICAgICAgIGNvbmFyZWFbbiAqIDIgKyAxXSA9IE1hdGgubWluKGFtYXhbMF0sIGJtYXhbMF0pOw0KICAgICAgICAgICAgICAgIGNvbltuXSA9IE5hdk1lc2gub3IoYmFzZSwgaSk7DQogICAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIFtjb24sIGNvbmFyZWEsIG5dOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIm92ZXJsYXBTbGFicyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVybGFwU2xhYnMoYW1pbiwgYW1heCwgYm1pbiwgYm1heCwgcHgsIHB5KSB7DQogICAgICAgICAgLy8gQ2hlY2sgZm9yIGhvcml6b250YWwgb3ZlcmxhcC4NCiAgICAgICAgICAvLyBUaGUgc2VnbWVudCBpcyBzaHJ1bmtlbiBhIGxpdHRsZSBzbyB0aGF0IHNsYWJzIHdoaWNoIHRvdWNoDQogICAgICAgICAgLy8gYXQgZW5kIHBvaW50cyBhcmUgbm90IGNvbm5lY3RlZC4NCiAgICAgICAgICBtaW54ID0gTWF0aC5tYXgoYW1pblswXSArIHB4LCBibWluWzBdICsgcHgpOw0KICAgICAgICAgIG1heHggPSBNYXRoLm1pbihhbWF4WzBdIC0gcHgsIGJtYXhbMF0gLSBweCk7DQogICAgICAgICAgaWYgKG1pbnggPiBtYXh4KSByZXR1cm4gZmFsc2U7IC8vIENoZWNrIHZlcnRpY2FsIG92ZXJsYXAuDQoNCiAgICAgICAgICBhZCA9IChhbWF4WzFdIC0gYW1pblsxXSkgLyAoYW1heFswXSAtIGFtaW5bMF0pOw0KICAgICAgICAgIGFrID0gYW1pblsxXSAtIGFkICogYW1pblswXTsNCiAgICAgICAgICBiZCA9IChibWF4WzFdIC0gYm1pblsxXSkgLyAoYm1heFswXSAtIGJtaW5bMF0pOw0KICAgICAgICAgIGJrID0gYm1pblsxXSAtIGJkICogYm1pblswXTsNCiAgICAgICAgICBhbWlueSA9IGFkICogbWlueCArIGFrOw0KICAgICAgICAgIGFtYXh5ID0gYWQgKiBtYXh4ICsgYWs7DQogICAgICAgICAgYm1pbnkgPSBiZCAqIG1pbnggKyBiazsNCiAgICAgICAgICBibWF4eSA9IGJkICogbWF4eCArIGJrOw0KICAgICAgICAgIGRtaW4gPSBibWlueSAtIGFtaW55Ow0KICAgICAgICAgIGRtYXggPSBibWF4eSAtIGFtYXh5OyAvLyBDcm9zc2luZyBzZWdtZW50cyBhbHdheXMgb3ZlcmxhcC4NCg0KICAgICAgICAgIGlmIChkbWluICogZG1heCA8IDApIHJldHVybiB0cnVlOyAvLyBDaGVjayBmb3Igb3ZlcmxhcCBhdCBlbmRwb2ludHMuDQoNCiAgICAgICAgICB0aHIgPSBweSAqIDIgKiAocHkgKiAyKTsNCiAgICAgICAgICBpZiAoZG1pbiAqIGRtaW4gPD0gdGhyIHx8IGRtYXggKiBkbWF4IDw9IHRocikgcmV0dXJuIHRydWU7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBCdWlsZHMgaW50ZXJuYWwgcG9seWdvbnMgbGlua3MgZm9yIGEgdGlsZS4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSB0aWxlDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImJhc2VPZmZNZXNoTGlua3MiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmFzZU9mZk1lc2hMaW5rcyh0aWxlKSB7DQogICAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuOw0KICAgICAgICAgIHZhciBiYXNlID0gdGhpcy5nZXRQb2x5UmVmQmFzZSh0aWxlKTsgLy8gQmFzZSBvZmYtbWVzaCBjb25uZWN0aW9uIHN0YXJ0IHBvaW50cy4NCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZS5kYXRhLmhlYWRlci5vZmZNZXNoQ29uQ291bnQ7ICsraSkgew0KICAgICAgICAgICAgdmFyIGNvbiA9IHRpbGUuZGF0YS5vZmZNZXNoQ29uc1tpXTsNCiAgICAgICAgICAgIHZhciBwb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2Nvbi5wb2x5XTsNCiAgICAgICAgICAgIHZhciBleHQgPSBbY29uLnJhZCwgdGlsZS5kYXRhLmhlYWRlci53YWxrYWJsZUNsaW1iLCBjb24ucmFkXTsgLy8gRmluZCBwb2x5Z29uIHRvIGNvbm5lY3QgdG8uDQoNCiAgICAgICAgICAgIHZhciBuZWFyZXN0UG9seSA9IHRoaXMuZmluZE5lYXJlc3RQb2x5SW5UaWxlKHRpbGUsIGNvbi5wb3MsIGV4dCk7DQogICAgICAgICAgICB2YXIgcmVmID0gbmVhcmVzdFBvbHkuZ2V0TmVhcmVzdFJlZigpOw0KICAgICAgICAgICAgaWYgKHJlZiA9PSAwKSBjb250aW51ZTsNCiAgICAgICAgICAgIHZhciBwID0gY29uLnBvczsgLy8gRmlyc3QgdmVydGV4DQoNCiAgICAgICAgICAgIHZhciBuZWFyZXN0UHQgPSBuZWFyZXN0UG9seS5nZXROZWFyZXN0UG9zKCk7IC8vIGZpbmROZWFyZXN0UG9seSBtYXkgcmV0dXJuIHRvbyBvcHRpbWlzdGljIHJlc3VsdHMsIGZ1cnRoZXIgY2hlY2sNCiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZS4NCg0KICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi5zcXIobmVhcmVzdFB0WzBdIC0gcFswXSkgKyBEZXRvdXJDb21tb24uc3FyKG5lYXJlc3RQdFsyXSAtIHBbMl0pID4gRGV0b3VyQ29tbW9uLnNxcihjb24ucmFkKSkgY29udGludWU7IC8vIE1ha2Ugc3VyZSB0aGUgbG9jYXRpb24gaXMgb24gY3VycmVudCBtZXNoLg0KDQogICAgICAgICAgICB0aWxlLmRhdGEudmVydHNbcG9seS52ZXJ0c1swXSAqIDNdID0gbmVhcmVzdFB0WzBdOw0KICAgICAgICAgICAgdGlsZS5kYXRhLnZlcnRzW3BvbHkudmVydHNbMF0gKiAzICsgMV0gPSBuZWFyZXN0UHRbMV07DQogICAgICAgICAgICB0aWxlLmRhdGEudmVydHNbcG9seS52ZXJ0c1swXSAqIDMgKyAyXSA9IG5lYXJlc3RQdFsyXTsgLy8gbGV0IG9mZi1tZXNoIGNvbm5lY3Rpb24gdG8gdGFyZ2V0IHBvbHkuDQoNCiAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLmFsbG9jTGluayh0aWxlKTsNCiAgICAgICAgICAgIHZhciBsaW5rID0gdGlsZS5saW5rc1tpZHhdOw0KICAgICAgICAgICAgbGluay5yZWYgPSByZWY7DQogICAgICAgICAgICBsaW5rLmVkZ2UgPSAwOw0KICAgICAgICAgICAgbGluay5zaWRlID0gMHhmZjsNCiAgICAgICAgICAgIGxpbmsuYm1pbiA9IGxpbmsuYm1heCA9IDA7IC8vIEFkZCB0byBsaW5rZWQgbGlzdC4NCg0KICAgICAgICAgICAgbGluay5uZXh0ID0gcG9seS5maXJzdExpbms7DQogICAgICAgICAgICBwb2x5LmZpcnN0TGluayA9IGlkeDsgLy8gU3RhcnQgZW5kLXBvUG9seSBpcyBhbHdheXMgY29ubmVjdCBiYWNrIHRvIG9mZi1tZXNoIGNvbm5lY3Rpb24uDQoNCiAgICAgICAgICAgIHZhciB0aWR4ID0gdGhpcy5hbGxvY0xpbmsodGlsZSk7DQogICAgICAgICAgICB2YXIgbGFuZFBvbHlJZHggPSBOYXZNZXNoLmRlY29kZVBvbHlJZFBvbHkocmVmKTsNCiAgICAgICAgICAgIHZhciBsYW5kUG9seSA9IHRpbGUuZGF0YS5wb2x5c1tsYW5kUG9seUlkeF07DQogICAgICAgICAgICBsaW5rID0gdGlsZS5saW5rc1t0aWR4XTsNCiAgICAgICAgICAgIGxpbmsucmVmID0gTmF2TWVzaC5vcihiYXNlLCBjb24ucG9seSk7DQogICAgICAgICAgICBsaW5rLmVkZ2UgPSAweGZmOw0KICAgICAgICAgICAgbGluay5zaWRlID0gMHhmZjsNCiAgICAgICAgICAgIGxpbmsuYm1pbiA9IGxpbmsuYm1heCA9IDA7IC8vIEFkZCB0byBsaW5rZWQgbGlzdC4NCg0KICAgICAgICAgICAgbGluay5uZXh0ID0gbGFuZFBvbHkuZmlyc3RMaW5rOw0KICAgICAgICAgICAgbGFuZFBvbHkuZmlyc3RMaW5rID0gdGlkeDsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIFJldHVybnMgY2xvc2VzdCBwb1BvbHkgb24gcG9seWdvbi4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSByZWYNCiAgICAgICAgICogQHBhcmFtIHBvcw0KICAgICAgICAgKiBAcmV0dXJuDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImNsb3Nlc3RQb2ludE9uUG9seSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZXN0UG9pbnRPblBvbHkocmVmLCBwb3MpIHsNCiAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUocmVmKTsNCiAgICAgICAgICB2YXIgdGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgIHZhciBwb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIE9mZi1tZXNoIGNvbm5lY3Rpb25zIGRvbid0IGhhdmUgZGV0YWlsIHBvbHlnb25zLg0KDQogICAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB7DQogICAgICAgICAgICB2YXIgdjAgPSBwb2x5LnZlcnRzWzBdICogMzsNCiAgICAgICAgICAgIHZhciB2MSA9IHBvbHkudmVydHNbMV0gKiAzOw0KICAgICAgICAgICAgdmFyIGQwID0gRGV0b3VyQ29tbW9uLnZEaXN0Myhwb3MsIHRpbGUuZGF0YS52ZXJ0cywgdjApOw0KICAgICAgICAgICAgdmFyIGQxID0gRGV0b3VyQ29tbW9uLnZEaXN0Myhwb3MsIHRpbGUuZGF0YS52ZXJ0cywgdjEpOw0KICAgICAgICAgICAgdmFyIHUgPSBkMCAvIChkMCArIGQxKTsNCg0KICAgICAgICAgICAgdmFyIF9jbG9zZXN0ID0gRGV0b3VyQ29tbW9uLnZMZXJwNCh0aWxlLmRhdGEudmVydHMsIHYwLCB2MSwgdSk7DQoNCiAgICAgICAgICAgIHJldHVybiBuZXcgQ2xvc2VzdFBvaW50T25Qb2x5UmVzdWx0KGZhbHNlLCBfY2xvc2VzdCk7DQogICAgICAgICAgfSAvLyBDbGFtcCBwb1BvbHkgdG8gYmUgaW5zaWRlIHRoZSBwb2x5Z29uLg0KDQoNCiAgICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX21heFZlcnRQZXJQb2x5ICogMyk7DQogICAgICAgICAgdmFyIGVkZ2VkID0gbmV3IEFycmF5KHRoaXMubV9tYXhWZXJ0UGVyUG9seSk7DQogICAgICAgICAgdmFyIGVkZ2V0ID0gbmV3IEFycmF5KHRoaXMubV9tYXhWZXJ0UGVyUG9seSk7DQogICAgICAgICAgdmFyIG52ID0gcG9seS52ZXJ0Q291bnQ7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG52OyArK2kpIHsNCiAgICAgICAgICAgIGFycmF5Y29weSh0aWxlLmRhdGEudmVydHMsIHBvbHkudmVydHNbaV0gKiAzLCB2ZXJ0cywgaSAqIDMsIDMpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBwb3NPdmVyUG9seSA9IGZhbHNlOw0KICAgICAgICAgIHZhciBjbG9zZXN0ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShjbG9zZXN0LCBwb3MpOw0KDQogICAgICAgICAgaWYgKCFEZXRvdXJDb21tb24uZGlzdGFuY2VQdFBvbHlFZGdlc1Nxcihwb3MsIHZlcnRzLCBudiwgZWRnZWQsIGVkZ2V0KSkgew0KICAgICAgICAgICAgLy8gUG9Qb2x5IGlzIG91dHNpZGUgdGhlIHBvbHlnb24sIGR0Q2xhbXAgdG8gbmVhcmVzdCBlZGdlLg0KICAgICAgICAgICAgdmFyIF9kbWluID0gZWRnZWRbMF07DQogICAgICAgICAgICB2YXIgaW1pbiA9IDA7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBudjsgKytfaSkgew0KICAgICAgICAgICAgICBpZiAoZWRnZWRbX2ldIDwgX2RtaW4pIHsNCiAgICAgICAgICAgICAgICBfZG1pbiA9IGVkZ2VkW19pXTsNCiAgICAgICAgICAgICAgICBpbWluID0gX2k7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHZhID0gaW1pbiAqIDM7DQogICAgICAgICAgICB2YXIgdmIgPSAoaW1pbiArIDEpICUgbnYgKiAzOw0KICAgICAgICAgICAgY2xvc2VzdCA9IERldG91ckNvbW1vbi52TGVycDQodmVydHMsIHZhLCB2YiwgZWRnZXRbaW1pbl0pOw0KICAgICAgICAgICAgcG9zT3ZlclBvbHkgPSBmYWxzZTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcG9zT3ZlclBvbHkgPSB0cnVlOw0KICAgICAgICAgIH0gLy8gRmluZCBoZWlnaHQgYXQgdGhlIGxvY2F0aW9uLg0KDQoNCiAgICAgICAgICB2YXIgaXAgPSBwb2x5LmluZGV4Ow0KDQogICAgICAgICAgaWYgKHRpbGUuZGF0YS5kZXRhaWxNZXNoZXMgIT0gbnVsbCAmJiB0aWxlLmRhdGEuZGV0YWlsTWVzaGVzLmxlbmd0aCA+IGlwKSB7DQogICAgICAgICAgICB2YXIgcGQgPSB0aWxlLmRhdGEuZGV0YWlsTWVzaGVzW2lwXTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwZC50cmlDb3VudDsgKytqKSB7DQogICAgICAgICAgICAgIHZhciB0ID0gKHBkLnRyaUJhc2UgKyBqKSAqIDQ7DQogICAgICAgICAgICAgIHZhciB2ID0gW107IC8vV2FzIFszXVtdDQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCAzOyArK2spIHsNCiAgICAgICAgICAgICAgICBpZiAodGlsZS5kYXRhLmRldGFpbFRyaXNbdCArIGtdIDwgcG9seS52ZXJ0Q291bnQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBvbHkudmVydHNbdGlsZS5kYXRhLmRldGFpbFRyaXNbdCArIGtdXSAqIDM7DQogICAgICAgICAgICAgICAgICB2W2tdID0gW3RpbGUuZGF0YS52ZXJ0c1tpbmRleF0sIHRpbGUuZGF0YS52ZXJ0c1tpbmRleCArIDFdLCB0aWxlLmRhdGEudmVydHNbaW5kZXggKyAyXV07DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHZhciBfaW5kZXggPSAocGQudmVydEJhc2UgKyAodGlsZS5kYXRhLmRldGFpbFRyaXNbdCArIGtdIC0gcG9seS52ZXJ0Q291bnQpKSAqIDM7DQoNCiAgICAgICAgICAgICAgICAgIHZba10gPSBbdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleF0sIHRpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXggKyAxXSwgdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleCArIDJdXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgaGVpZ2h0UmVzdWx0ID0gRGV0b3VyQ29tbW9uLmNsb3Nlc3RIZWlnaHRQb2ludFRyaWFuZ2xlKGNsb3Nlc3QsIHZbMF0sIHZbMV0sIHZbMl0pOw0KDQogICAgICAgICAgICAgIGlmIChoZWlnaHRSZXN1bHRbMF0pIHsNCiAgICAgICAgICAgICAgICBjbG9zZXN0WzFdID0gaGVpZ2h0UmVzdWx0WzFdOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG5ldyBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQocG9zT3ZlclBvbHksIGNsb3Nlc3QpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmROZWFyZXN0UG9seUluVGlsZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTmVhcmVzdFBvbHlJblRpbGUodGlsZSwgY2VudGVyLCBleHRlbnRzKSB7DQogICAgICAgICAgdmFyIG5lYXJlc3RQdCA9IG51bGw7DQogICAgICAgICAgdmFyIGJtaW4gPSBEZXRvdXJDb21tb24udlN1YihjZW50ZXIsIGV4dGVudHMpOw0KICAgICAgICAgIHZhciBibWF4ID0gRGV0b3VyQ29tbW9uLnZBZGQoY2VudGVyLCBleHRlbnRzKTsgLy8gR2V0IG5lYXJieSBwb2x5Z29ucyBmcm9tIHByb3hpbWl0eSBncmlkLg0KDQogICAgICAgICAgdmFyIHBvbHlzID0gdGhpcy5xdWVyeVBvbHlnb25zSW5UaWxlKHRpbGUsIGJtaW4sIGJtYXgpOyAvLyBGaW5kIG5lYXJlc3QgcG9seWdvbiBhbW9uZ3N0IHRoZSBuZWFyYnkgcG9seWdvbnMuDQoNCiAgICAgICAgICB2YXIgbmVhcmVzdCA9IDA7DQogICAgICAgICAgdmFyIG5lYXJlc3REaXN0YW5jZVNxciA9IE51bWJlci5NQVhfVkFMVUU7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlzLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICB2YXIgcmVmID0gcG9seXNbaV07DQogICAgICAgICAgICB2YXIgZCA9IDA7DQogICAgICAgICAgICB2YXIgY3BwID0gdGhpcy5jbG9zZXN0UG9pbnRPblBvbHkocmVmLCBjZW50ZXIpOw0KICAgICAgICAgICAgdmFyIHBvc092ZXJQb2x5ID0gY3BwLmlzUG9zT3ZlclBvbHkoKTsNCiAgICAgICAgICAgIHZhciBjbG9zZXN0UHRQb2x5ID0gY3BwLmdldENsb3Nlc3QoKTsgLy8gSWYgYSBwb1BvbHkgaXMgZGlyZWN0bHkgb3ZlciBhIHBvbHlnb24gYW5kIGNsb3NlciB0aGFuDQogICAgICAgICAgICAvLyBjbGltYiBoZWlnaHQsIGZhdm9yIHRoYXQgaW5zdGVhZCBvZiBzdHJhaWdodCBsaW5lIG5lYXJlc3QgcG9pbnQuDQoNCiAgICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIoY2VudGVyLCBjbG9zZXN0UHRQb2x5KTsNCg0KICAgICAgICAgICAgaWYgKHBvc092ZXJQb2x5KSB7DQogICAgICAgICAgICAgIGQgPSBNYXRoLmFicyhkaWZmWzFdKSAtIHRpbGUuZGF0YS5oZWFkZXIud2Fsa2FibGVDbGltYjsNCiAgICAgICAgICAgICAgZCA9IGQgPiAwID8gZCAqIGQgOiAwOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZCA9IERldG91ckNvbW1vbi52TGVuU3FyKGRpZmYpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoZCA8IG5lYXJlc3REaXN0YW5jZVNxcikgew0KICAgICAgICAgICAgICBuZWFyZXN0UHQgPSBjbG9zZXN0UHRQb2x5Ow0KICAgICAgICAgICAgICBuZWFyZXN0RGlzdGFuY2VTcXIgPSBkOw0KICAgICAgICAgICAgICBuZWFyZXN0ID0gcmVmOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBuZXcgRmluZE5lYXJlc3RQb2x5UmVzdWx0KG5lYXJlc3QsIG5lYXJlc3RQdCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0VGlsZUF0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbGVBdCh4LCB5LCBsYXllcikgew0KICAgICAgICAgIC8vIEZpbmQgdGlsZSBiYXNlZCBvbiBoYXNoLg0KICAgICAgICAgIHZhciBoID0gTmF2TWVzaC5jb21wdXRlVGlsZUhhc2goeCwgeSwgdGhpcy5tX3RpbGVMdXRNYXNrKTsNCiAgICAgICAgICB2YXIgdGlsZSA9IHRoaXMubV9wb3NMb29rdXBbaF07DQoNCiAgICAgICAgICB3aGlsZSAodGlsZSAhPSBudWxsKSB7DQogICAgICAgICAgICBpZiAodGlsZS5kYXRhLmhlYWRlciAhPSBudWxsICYmIHRpbGUuZGF0YS5oZWFkZXIueCA9PSB4ICYmIHRpbGUuZGF0YS5oZWFkZXIueSA9PSB5ICYmIHRpbGUuZGF0YS5oZWFkZXIubGF5ZXIgPT0gbGF5ZXIpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRpbGU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRpbGUgPSB0aWxlLm5leHQ7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0TmVpZ2hib3VyVGlsZXNBdCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROZWlnaGJvdXJUaWxlc0F0KHgsIHksIHNpZGUpIHsNCiAgICAgICAgICB2YXIgbnggPSB4LA0KICAgICAgICAgICAgICBueSA9IHk7DQoNCiAgICAgICAgICBzd2l0Y2ggKHNpZGUpIHsNCiAgICAgICAgICAgIGNhc2UgMDoNCiAgICAgICAgICAgICAgbngrKzsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgbngrKzsNCiAgICAgICAgICAgICAgbnkrKzsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgMjoNCiAgICAgICAgICAgICAgbnkrKzsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgMzoNCiAgICAgICAgICAgICAgbngtLTsNCiAgICAgICAgICAgICAgbnkrKzsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgNDoNCiAgICAgICAgICAgICAgbngtLTsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgNToNCiAgICAgICAgICAgICAgbngtLTsNCiAgICAgICAgICAgICAgbnktLTsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgNjoNCiAgICAgICAgICAgICAgbnktLTsNCiAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIGNhc2UgNzoNCiAgICAgICAgICAgICAgbngrKzsNCiAgICAgICAgICAgICAgbnktLTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZXNBdChueCwgbnkpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFRpbGVzQXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZXNBdCh4LCB5KSB7DQogICAgICAgICAgdmFyIHRpbGVzID0gW107IC8vIEZpbmQgdGlsZSBiYXNlZCBvbiBoYXNoLg0KDQogICAgICAgICAgdmFyIGggPSBOYXZNZXNoLmNvbXB1dGVUaWxlSGFzaCh4LCB5LCB0aGlzLm1fdGlsZUx1dE1hc2spOw0KICAgICAgICAgIHZhciB0aWxlID0gdGhpcy5tX3Bvc0xvb2t1cFtoXTsNCg0KICAgICAgICAgIHdoaWxlICh0aWxlICE9IG51bGwpIHsNCiAgICAgICAgICAgIGlmICh0aWxlLmRhdGEuaGVhZGVyICE9IG51bGwgJiYgdGlsZS5kYXRhLmhlYWRlci54ID09IHggJiYgdGlsZS5kYXRhLmhlYWRlci55ID09IHkpIHsNCiAgICAgICAgICAgICAgdGlsZXMucHVzaCh0aWxlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGlsZSA9IHRpbGUubmV4dDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gdGlsZXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0VGlsZVJlZkF0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbGVSZWZBdCh4LCB5LCBsYXllcikgew0KICAgICAgICAgIC8vIEZpbmQgdGlsZSBiYXNlZCBvbiBoYXNoLg0KICAgICAgICAgIHZhciBoID0gTmF2TWVzaC5jb21wdXRlVGlsZUhhc2goeCwgeSwgdGhpcy5tX3RpbGVMdXRNYXNrKTsNCiAgICAgICAgICB2YXIgdGlsZSA9IHRoaXMubV9wb3NMb29rdXBbaF07DQoNCiAgICAgICAgICB3aGlsZSAodGlsZSAhPSBudWxsKSB7DQogICAgICAgICAgICBpZiAodGlsZS5kYXRhLmhlYWRlciAhPSBudWxsICYmIHRpbGUuZGF0YS5oZWFkZXIueCA9PSB4ICYmIHRpbGUuZGF0YS5oZWFkZXIueSA9PSB5ICYmIHRpbGUuZGF0YS5oZWFkZXIubGF5ZXIgPT0gbGF5ZXIpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJlZih0aWxlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGlsZSA9IHRpbGUubmV4dDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRUaWxlQnlSZWYiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZUJ5UmVmKHJlZikgew0KICAgICAgICAgIGlmIChyZWYgPT0gMCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgdmFyIHRpbGVJbmRleCA9IGRlY29kZVBvbHlJZFRpbGUocmVmKTsNCiAgICAgICAgICB2YXIgdGlsZVNhbHQgPSBkZWNvZGVQb2x5SWRTYWx0KHJlZik7DQogICAgICAgICAgaWYgKHRpbGVJbmRleCA+PSB0aGlzLm1fbWF4VGlsZXMpIHJldHVybiBudWxsOw0KICAgICAgICAgIHZhciB0aWxlID0gdGhpcy5tX3RpbGVzW3RpbGVJbmRleF07DQogICAgICAgICAgaWYgKHRpbGUuc2FsdCAhPSB0aWxlU2FsdCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgcmV0dXJuIHRpbGU7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0VGlsZVJlZiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaWxlUmVmKHRpbGUpIHsNCiAgICAgICAgICBpZiAodGlsZSA9PSBudWxsKSByZXR1cm4gMDsNCiAgICAgICAgICB2YXIgaXQgPSB0aWxlLmluZGV4Ow0KICAgICAgICAgIHJldHVybiBOYXZNZXNoLmVuY29kZVBvbHlJZCh0aWxlLnNhbHQsIGl0LCAwKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRPZmZNZXNoQ29ubmVjdGlvblBvbHlFbmRQb2ludHMiLA0KICAgICAgICAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIE9mZi1tZXNoIGNvbm5lY3Rpb25zIGFyZSBzdG9yZWQgaW4gdGhlIG5hdmlnYXRpb24gbWVzaCBhcyBzcGVjaWFsDQogICAgICAgIC8vLyAyLXZlcnRleA0KICAgICAgICAvLy8gcG9seWdvbnMgd2l0aCBhIHNpbmdsZSBlZGdlLiBBdCBsZWFzdCBvbmUgb2YgdGhlIHZlcnRpY2VzIGlzIGV4cGVjdGVkIHRvDQogICAgICAgIC8vLyBiZQ0KICAgICAgICAvLy8gaW5zaWRlIGEgbm9ybWFsIHBvbHlnb24uIFNvIGFuIG9mZi1tZXNoIGNvbm5lY3Rpb24gaXMgImVudGVyZWQiIGZyb20gYQ0KICAgICAgICAvLy8gbm9ybWFsIHBvbHlnb24gYXQgb25lIG9mIGl0cyBlbmRwb2ludHMuIFRoaXMgaXMgdGhlIHBvbHlnb24gaWRlbnRpZmllZA0KICAgICAgICAvLy8gYnkNCiAgICAgICAgLy8vIHRoZSBwcmV2UmVmIHBhcmFtZXRlci4NCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9mZk1lc2hDb25uZWN0aW9uUG9seUVuZFBvaW50cyhwcmV2UmVmLCBwb2x5UmVmKSB7DQogICAgICAgICAgaWYgKHBvbHlSZWYgPT0gMCkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigicG9seVJlZiA9IDAiKTsgLy8gR2V0IGN1cnJlbnQgcG9seWdvbg0KDQogICAgICAgICAgdmFyIHNhbHRpdGlwID0gTmF2TWVzaC5kZWNvZGVQb2x5SWQocG9seVJlZik7DQogICAgICAgICAgdmFyIHNhbHQgPSBzYWx0aXRpcFswXTsNCiAgICAgICAgICB2YXIgaXQgPSBzYWx0aXRpcFsxXTsNCiAgICAgICAgICB2YXIgaXAgPSBzYWx0aXRpcFsyXTsNCg0KICAgICAgICAgIGlmIChpdCA+PSB0aGlzLm1fbWF4VGlsZXMpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgdGlsZSBJRCA+IG1heCB0aWxlcyIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICh0aGlzLm1fdGlsZXNbaXRdLnNhbHQgIT0gc2FsdCB8fCB0aGlzLm1fdGlsZXNbaXRdLmRhdGEuaGVhZGVyID09IG51bGwpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgc2FsdCBvciBtaXNzaW5nIHRpbGUgaGVhZGVyIik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLm1fdGlsZXNbaXRdOw0KDQogICAgICAgICAgaWYgKGlwID49IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50KSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIHBvbHkgSUQgPiBwb2x5IGNvdW50Iik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHBvbHkgPSB0aWxlLmRhdGEucG9seXNbaXBdOyAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgY3VycmVudCBwb2x5IGlzIGluZGVlZCBvZmYtbWVzaCBsaW5rLg0KDQogICAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpICE9IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIHBvbHkgdHlwZSIpOyAvLyBGaWd1cmUgb3V0IHdoaWNoIHdheSB0byBoYW5kIG91dCB0aGUgdmVydGljZXMuDQoNCiAgICAgICAgICB2YXIgaWR4MCA9IDAsDQogICAgICAgICAgICAgIGlkeDEgPSAxOyAvLyBGaW5kIGxpbmsgdGhhdCBwb2ludHMgdG8gZmlyc3QgdmVydGV4Lg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IHBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gdGlsZS5saW5rc1tpXS5uZXh0KSB7DQogICAgICAgICAgICBpZiAodGlsZS5saW5rc1tpXS5lZGdlID09IDApIHsNCiAgICAgICAgICAgICAgaWYgKHRpbGUubGlua3NbaV0ucmVmICE9IHByZXZSZWYpIHsNCiAgICAgICAgICAgICAgICBpZHgwID0gMTsNCiAgICAgICAgICAgICAgICBpZHgxID0gMDsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBzdGFydFBvcyA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICB2YXIgZW5kUG9zID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShzdGFydFBvcywgdGlsZS5kYXRhLnZlcnRzLCBwb2x5LnZlcnRzW2lkeDBdICogMyk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGVuZFBvcywgdGlsZS5kYXRhLnZlcnRzLCBwb2x5LnZlcnRzW2lkeDFdICogMyk7DQogICAgICAgICAgcmV0dXJuIFtzdGFydFBvcywgZW5kUG9zXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRNYXhWZXJ0c1BlclBvbHkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWF4VmVydHNQZXJQb2x5KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fbWF4VmVydFBlclBvbHk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0VGlsZUNvdW50IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbGVDb3VudCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX3RpbGVDb3VudDsNCiAgICAgICAgfQ0KICAgICAgfV0sIFt7DQogICAgICAgIGtleTogImdldE5hdk1lc2hQYXJhbXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmF2TWVzaFBhcmFtcyhkYXRhKSB7DQogICAgICAgICAgdmFyIHBhcmFtcyA9IG5ldyBOYXZNZXNoUGFyYW1zKCk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHBhcmFtcy5vcmlnLCBkYXRhLmhlYWRlci5ibWluKTsNCiAgICAgICAgICBwYXJhbXMudGlsZVdpZHRoID0gZGF0YS5oZWFkZXIuYm1heFswXSAtIGRhdGEuaGVhZGVyLmJtaW5bMF07DQogICAgICAgICAgcGFyYW1zLnRpbGVIZWlnaHQgPSBkYXRhLmhlYWRlci5ibWF4WzJdIC0gZGF0YS5oZWFkZXIuYm1pblsyXTsNCiAgICAgICAgICBwYXJhbXMubWF4VGlsZXMgPSAxOw0KICAgICAgICAgIHBhcmFtcy5tYXhQb2x5cyA9IGRhdGEuaGVhZGVyLnBvbHlDb3VudDsNCiAgICAgICAgICByZXR1cm4gcGFyYW1zOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFNsYWJDb29yZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTbGFiQ29vcmQodmVydHMsIHZhLCBzaWRlKSB7DQogICAgICAgICAgaWYgKHNpZGUgPT0gMCB8fCBzaWRlID09IDQpIHJldHVybiB2ZXJ0c1t2YV07ZWxzZSBpZiAoc2lkZSA9PSAyIHx8IHNpZGUgPT0gNikgcmV0dXJuIHZlcnRzW3ZhICsgMl07DQogICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY2FsY1NsYWJFbmRQb2ludHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY1NsYWJFbmRQb2ludHModmVydHMsIHZhLCB2YiwgYm1pbiwgYm1heCwgc2lkZSkgew0KICAgICAgICAgIGlmIChzaWRlID09IDAgfHwgc2lkZSA9PSA0KSB7DQogICAgICAgICAgICBpZiAodmVydHNbdmEgKyAyXSA8IHZlcnRzW3ZiICsgMl0pIHsNCiAgICAgICAgICAgICAgYm1pblswXSA9IHZlcnRzW3ZhICsgMl07DQogICAgICAgICAgICAgIGJtaW5bMV0gPSB2ZXJ0c1t2YSArIDFdOw0KICAgICAgICAgICAgICBibWF4WzBdID0gdmVydHNbdmIgKyAyXTsNCiAgICAgICAgICAgICAgYm1heFsxXSA9IHZlcnRzW3ZiICsgMV07DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBibWluWzBdID0gdmVydHNbdmIgKyAyXTsNCiAgICAgICAgICAgICAgYm1pblsxXSA9IHZlcnRzW3ZiICsgMV07DQogICAgICAgICAgICAgIGJtYXhbMF0gPSB2ZXJ0c1t2YSArIDJdOw0KICAgICAgICAgICAgICBibWF4WzFdID0gdmVydHNbdmEgKyAxXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKHNpZGUgPT0gMiB8fCBzaWRlID09IDYpIHsNCiAgICAgICAgICAgIGlmICh2ZXJ0c1t2YSArIDBdIDwgdmVydHNbdmIgKyAwXSkgew0KICAgICAgICAgICAgICBibWluWzBdID0gdmVydHNbdmEgKyAwXTsNCiAgICAgICAgICAgICAgYm1pblsxXSA9IHZlcnRzW3ZhICsgMV07DQogICAgICAgICAgICAgIGJtYXhbMF0gPSB2ZXJ0c1t2YiArIDBdOw0KICAgICAgICAgICAgICBibWF4WzFdID0gdmVydHNbdmIgKyAxXTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGJtaW5bMF0gPSB2ZXJ0c1t2YiArIDBdOw0KICAgICAgICAgICAgICBibWluWzFdID0gdmVydHNbdmIgKyAxXTsNCiAgICAgICAgICAgICAgYm1heFswXSA9IHZlcnRzW3ZhICsgMF07DQogICAgICAgICAgICAgIGJtYXhbMV0gPSB2ZXJ0c1t2YSArIDFdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjb21wdXRlVGlsZUhhc2giLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZVRpbGVIYXNoKHgsIHksIG1hc2spIHsNCiAgICAgICAgICB2YXIgaDEgPSAweDhkYTZiMzQzOyAvLyBMYXJnZSBtdWx0aXBsaWNhdGl2ZSBjb25zdGFudHM7DQoNCiAgICAgICAgICB2YXIgaDIgPSAweGQ4MTYzODQxOyAvLyBoZXJlIGFyYml0cmFyaWx5IGNob3NlbiBwcmltZXMNCg0KICAgICAgICAgIHZhciBuID0gaDEgKiB4ICsgaDIgKiB5Ow0KICAgICAgICAgIHJldHVybiBuICYgbWFzazsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gTmF2TWVzaDsNCiAgICB9KCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgIkRUX1NBTFRfQklUUyIsIDE2KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoLCAiRFRfVElMRV9CSVRTIiwgMjgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2gsICJEVF9QT0xZX0JJVFMiLCAyMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgIkRUX0VYVF9MSU5LIiwgMHg4MDAwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoLCAiRFRfTlVMTF9MSU5LIiwgLTEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2gsICJEVF9PRkZNRVNIX0NPTl9CSURJUiIsIDEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2gsICJEVF9NQVhfQVJFQVMiLCA2NCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgIkRUX1JBWV9DQVNUX0xJTUlUX1BST1BPUlRJT05TIiwgNTAuMCk7DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIF9pbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IF9pbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCiAgICB2YXIgUmVjYXN0VmVjdG9ycyQxID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFJlY2FzdFZlY3RvcnMoKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RWZWN0b3JzKTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKFJlY2FzdFZlY3RvcnMsIG51bGwsIFt7DQogICAgICAgIGtleTogIm1pbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtaW4oYSwgYiwgaSkgew0KICAgICAgICAgIGFbMF0gPSBNYXRoLm1pbihhWzBdLCBiW2kgKyAwXSk7DQogICAgICAgICAgYVsxXSA9IE1hdGgubWluKGFbMV0sIGJbaSArIDFdKTsNCiAgICAgICAgICBhWzJdID0gTWF0aC5taW4oYVsyXSwgYltpICsgMl0pOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIm1heCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtYXgoYSwgYiwgaSkgew0KICAgICAgICAgIGFbMF0gPSBNYXRoLm1heChhWzBdLCBiW2kgKyAwXSk7DQogICAgICAgICAgYVsxXSA9IE1hdGgubWF4KGFbMV0sIGJbaSArIDFdKTsNCiAgICAgICAgICBhWzJdID0gTWF0aC5tYXgoYVsyXSwgYltpICsgMl0pOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNvcHkzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHkzKG91dCwgX2luLCBpKSB7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycy5jb3B5NChvdXQsIDAsIF9pbiwgaSk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY29weTIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29weTIob3V0LCBfaW4pIHsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzLmNvcHk0KG91dCwgMCwgX2luLCAwKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjb3B5NCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb3B5NChvdXQsIG4sIF9pbiwgbSkgew0KICAgICAgICAgIG91dFtuXSA9IF9pblttXTsNCiAgICAgICAgICBvdXRbbiArIDFdID0gX2luW20gKyAxXTsNCiAgICAgICAgICBvdXRbbiArIDJdID0gX2luW20gKyAyXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKGUwLCBhLCB2ZXJ0cywgaSkgew0KICAgICAgICAgIGUwWzBdID0gYVswXSArIHZlcnRzW2ldOw0KICAgICAgICAgIGUwWzFdID0gYVsxXSArIHZlcnRzW2kgKyAxXTsNCiAgICAgICAgICBlMFsyXSA9IGFbMl0gKyB2ZXJ0c1tpICsgMl07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic3ViQSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJBKGUwLCB2ZXJ0cywgaSwgaikgew0KICAgICAgICAgIGUwWzBdID0gdmVydHNbaV0gLSB2ZXJ0c1tqXTsNCiAgICAgICAgICBlMFsxXSA9IHZlcnRzW2kgKyAxXSAtIHZlcnRzW2ogKyAxXTsNCiAgICAgICAgICBlMFsyXSA9IHZlcnRzW2kgKyAyXSAtIHZlcnRzW2ogKyAyXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJzdWJCIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1YkIoZTAsIGksIHZlcnRzLCBqKSB7DQogICAgICAgICAgZTBbMF0gPSBpWzBdIC0gdmVydHNbal07DQogICAgICAgICAgZTBbMV0gPSBpWzFdIC0gdmVydHNbaiArIDFdOw0KICAgICAgICAgIGUwWzJdID0gaVsyXSAtIHZlcnRzW2ogKyAyXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjcm9zcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcm9zcyhkZXN0LCB2MSwgdjIpIHsNCiAgICAgICAgICBkZXN0WzBdID0gdjFbMV0gKiB2MlsyXSAtIHYxWzJdICogdjJbMV07DQogICAgICAgICAgZGVzdFsxXSA9IHYxWzJdICogdjJbMF0gLSB2MVswXSAqIHYyWzJdOw0KICAgICAgICAgIGRlc3RbMl0gPSB2MVswXSAqIHYyWzFdIC0gdjFbMV0gKiB2MlswXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJub3JtYWxpemUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbm9ybWFsaXplKHYpIHsNCiAgICAgICAgICB2YXIgZCA9IDEuMCAvIE1hdGguc3FydCh2WzBdICogdlswXSArIHZbMV0gKiB2WzFdICsgdlsyXSAqIHZbMl0pOw0KICAgICAgICAgIHZbMF0gKj0gZDsNCiAgICAgICAgICB2WzFdICo9IGQ7DQogICAgICAgICAgdlsyXSAqPSBkOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBSZWNhc3RWZWN0b3JzOw0KICAgIH0oKTsNCg0KICAgIHZhciBfdGVtcCwgX3RlbXAyOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBDaHVua3lUcmlNZXNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIF9jcmVhdGVDbGFzcyhDaHVua3lUcmlNZXNoLCBbew0KICAgICAgICBrZXk6ICJjYWxjRXh0ZW5kcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjRXh0ZW5kcyhpdGVtcywgaW1pbiwgaW1heCwgYm1pbiwgYm1heCkgew0KICAgICAgICAgIGJtaW5bMF0gPSBpdGVtc1tpbWluXS5ibWluWzBdOw0KICAgICAgICAgIGJtaW5bMV0gPSBpdGVtc1tpbWluXS5ibWluWzFdOw0KICAgICAgICAgIGJtYXhbMF0gPSBpdGVtc1tpbWluXS5ibWF4WzBdOw0KICAgICAgICAgIGJtYXhbMV0gPSBpdGVtc1tpbWluXS5ibWF4WzFdOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IGltaW4gKyAxOyBpIDwgaW1heDsgKytpKSB7DQogICAgICAgICAgICB2YXIgaXQgPSBpdGVtc1tpXTsNCg0KICAgICAgICAgICAgaWYgKGl0LmJtaW5bMF0gPCBibWluWzBdKSB7DQogICAgICAgICAgICAgIGJtaW5bMF0gPSBpdC5ibWluWzBdOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoaXQuYm1pblsxXSA8IGJtaW5bMV0pIHsNCiAgICAgICAgICAgICAgYm1pblsxXSA9IGl0LmJtaW5bMV07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChpdC5ibWF4WzBdID4gYm1heFswXSkgew0KICAgICAgICAgICAgICBibWF4WzBdID0gaXQuYm1heFswXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGl0LmJtYXhbMV0gPiBibWF4WzFdKSB7DQogICAgICAgICAgICAgIGJtYXhbMV0gPSBpdC5ibWF4WzFdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJsb25nZXN0QXhpcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb25nZXN0QXhpcyh4LCB5KSB7DQogICAgICAgICAgcmV0dXJuIHkgPiB4ID8gMSA6IDA7DQogICAgICAgIH0gLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ1MjQ1NzcyLzEwMDQ3OTIwDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicGFydGlhbFNvcnQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFydGlhbFNvcnQoYXJyLCBzdGFydCwgZW5kLCBzb3J0RngpIHsNCiAgICAgICAgICB2YXIgcHJlU29ydGVkID0gYXJyLnNsaWNlKDAsIHN0YXJ0KSwNCiAgICAgICAgICAgICAgcG9zdFNvcnRlZCA9IGFyci5zbGljZShlbmQpOw0KICAgICAgICAgIHZhciBzb3J0ZWQgPSBhcnIuc2xpY2Uoc3RhcnQsIGVuZCkuc29ydChzb3J0RngpOw0KICAgICAgICAgIGFyci5sZW5ndGggPSAwOw0KICAgICAgICAgIGFyci5wdXNoLmFwcGx5KGFyciwgcHJlU29ydGVkLmNvbmNhdChzb3J0ZWQpLmNvbmNhdChwb3N0U29ydGVkKSk7DQogICAgICAgICAgcmV0dXJuIGFycjsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJzdWJkaXZpZGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3ViZGl2aWRlKGl0ZW1zLCBpbWluLCBpbWF4LCB0cmlzUGVyQ2h1bmssIG5vZGVzLCBpblRyaXMpIHsNCiAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOw0KDQogICAgICAgICAgdmFyIGludW0gPSBpbWF4IC0gaW1pbjsNCiAgICAgICAgICB2YXIgbm9kZSA9IG5ldyBDaHVua3lUcmlNZXNoLkNodW5reVRyaU1lc2hOb2RlKCk7DQogICAgICAgICAgbm9kZXMucHVzaChub2RlKTsNCg0KICAgICAgICAgIGlmIChpbnVtIDw9IHRyaXNQZXJDaHVuaykgew0KICAgICAgICAgICAgLy8gTGVhZg0KICAgICAgICAgICAgdGhpcy5jYWxjRXh0ZW5kcyhpdGVtcywgaW1pbiwgaW1heCwgbm9kZS5ibWluLCBub2RlLmJtYXgpOyAvLyBDb3B5IHRyaWFuZ2xlcy4NCg0KICAgICAgICAgICAgbm9kZS5pID0gbm9kZXMubGVuZ3RoOw0KICAgICAgICAgICAgbm9kZS50cmlzID0gbmV3IEFycmF5KGludW0gKiAzKTsNCiAgICAgICAgICAgIHZhciBkc3QgPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gaW1pbjsgaSA8IGltYXg7ICsraSkgew0KICAgICAgICAgICAgICB2YXIgc3JjID0gaXRlbXNbaV0uaSAqIDM7DQogICAgICAgICAgICAgIG5vZGUudHJpc1tkc3QrK10gPSBpblRyaXNbc3JjXTsNCiAgICAgICAgICAgICAgbm9kZS50cmlzW2RzdCsrXSA9IGluVHJpc1tzcmMgKyAxXTsNCiAgICAgICAgICAgICAgbm9kZS50cmlzW2RzdCsrXSA9IGluVHJpc1tzcmMgKyAyXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gU3BsaXQNCiAgICAgICAgICAgIHRoaXMuY2FsY0V4dGVuZHMoaXRlbXMsIGltaW4sIGltYXgsIG5vZGUuYm1pbiwgbm9kZS5ibWF4KTsNCiAgICAgICAgICAgIHZhciBheGlzID0gdGhpcy5sb25nZXN0QXhpcyhub2RlLmJtYXhbMF0gLSBub2RlLmJtaW5bMF0sIG5vZGUuYm1heFsxXSAtIG5vZGUuYm1pblsxXSk7DQoNCiAgICAgICAgICAgIGlmIChheGlzID09IDApIHsNCiAgICAgICAgICAgICAgLy9BcnJheXMuc29ydChpdGVtcywgaW1pbiwgaW1heCwgbmV3IENvbXBhcmVJdGVtWCgpKTsNCiAgICAgICAgICAgICAgdGhpcy5wYXJ0aWFsU29ydChpdGVtcywgaW1pbiwgaW1heCwgZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuQ29tcGFyZUl0ZW1YKGEsIGIpOw0KICAgICAgICAgICAgICB9KTsgLy8gbGV0IHN1YmFycmF5ID0gaXRlbXMuc2xpY2UoaW1pbiwgaW1heCk7DQogICAgICAgICAgICAgIC8vIHN1YmFycmF5LnNvcnQoKGEsIGIpID0+ICh0aGlzLkNvbXBhcmVJdGVtWChhLCBiKSkpDQogICAgICAgICAgICAgIC8vIC8vIGxldCBuZXdpdGVtcyA9IGl0ZW1zLnNsaWNlKDAsIGltaW4pOw0KICAgICAgICAgICAgICAvLyAvLyBuZXdpdGVtcy5wdXNoKC4uLnN1YmFycmF5KQ0KICAgICAgICAgICAgICAvLyAvLyBuZXdpdGVtcy5wdXNoKC4uLml0ZW1zLnNsaWNlKGltYXgsIGl0ZW1zLmxlbmd0aCkpOw0KICAgICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gaW1pbjsgaSA8IGltYXg7IGkrKykgew0KICAgICAgICAgICAgICAvLyAgICAgaXRlbXNbaV0uYm1pblswXSA9IHN1YmFycmF5W2ldLmJtaW5bMF07DQogICAgICAgICAgICAgIC8vICAgICBpdGVtc1tpXS5ibWluWzFdID0gc3ViYXJyYXlbaV0uYm1pblsxXTsNCiAgICAgICAgICAgICAgLy8gICAgIGl0ZW1zW2ldLmJtYXhbMF0gPSBzdWJhcnJheVtpXS5ibWF4WzBdOw0KICAgICAgICAgICAgICAvLyAgICAgaXRlbXNbaV0uYm1heFsxXSA9IHN1YmFycmF5W2ldLmJtYXhbMV07DQogICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgICAgLy9pdGVtcyA9IG5ld2l0ZW1zOw0KICAgICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHgtYXhpcw0KICAgICAgICAgICAgfSBlbHNlIGlmIChheGlzID09IDEpIHsNCiAgICAgICAgICAgICAgLy8gQXJyYXlzLnNvcnQoaXRlbXMsIGltaW4sIGltYXgsIG5ldyBDb21wYXJlSXRlbVkoKSk7DQogICAgICAgICAgICAgIC8vIFNvcnQgYVBvbHkgeS1heGlzDQogICAgICAgICAgICAgIHRoaXMucGFydGlhbFNvcnQoaXRlbXMsIGltaW4sIGltYXgsIGZ1bmN0aW9uIChhLCBiKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLkNvbXBhcmVJdGVtWShhLCBiKTsNCiAgICAgICAgICAgICAgfSk7IC8vIGxldCBzdWJhcnJheSA9IGl0ZW1zLnNsaWNlKGltaW4sIGltYXgpOw0KICAgICAgICAgICAgICAvLyBzdWJhcnJheS5zb3J0KChhLCBiKSA9PiAodGhpcy5Db21wYXJlSXRlbVkoYSwgYikpKQ0KICAgICAgICAgICAgICAvLyAvLyBsZXQgbmV3aXRlbXMgPSBpdGVtcy5zbGljZSgwLCBpbWluKTsNCiAgICAgICAgICAgICAgLy8gLy8gbmV3aXRlbXMucHVzaCguLi5zdWJhcnJheSkNCiAgICAgICAgICAgICAgLy8gLy8gbmV3aXRlbXMucHVzaCguLi5pdGVtcy5zbGljZShpbWF4LCBpdGVtcy5sZW5ndGgpKTsNCiAgICAgICAgICAgICAgLy8gZm9yIChsZXQgaSA9IGltaW47IGkgPCBpbWF4OyBpKyspIHsNCiAgICAgICAgICAgICAgLy8gICAgIGl0ZW1zW2ldLmJtaW5bMF0gPSBzdWJhcnJheVtpXS5ibWluWzBdOw0KICAgICAgICAgICAgICAvLyAgICAgaXRlbXNbaV0uYm1pblsxXSA9IHN1YmFycmF5W2ldLmJtaW5bMV07DQogICAgICAgICAgICAgIC8vICAgICBpdGVtc1tpXS5ibWF4WzBdID0gc3ViYXJyYXlbaV0uYm1heFswXTsNCiAgICAgICAgICAgICAgLy8gICAgIGl0ZW1zW2ldLmJtYXhbMV0gPSBzdWJhcnJheVtpXS5ibWF4WzFdOw0KICAgICAgICAgICAgICAvLyB9DQogICAgICAgICAgICAgIC8vaXRlbXMgPSBuZXdpdGVtczsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIGlzcGxpdCA9IE1hdGguZmxvb3IoaW1pbiArIE1hdGguZmxvb3IoaW51bSAvIDIpKTsNCiAgICAgICAgICAgIHZhciBzID0gIiI7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBpdGVtcy5sZW5ndGg7IF9pKyspIHsNCiAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tfaV07DQogICAgICAgICAgICAgIHMgKz0gIiIgKyBfaSArICIgIiArIGl0ZW0uYm1pblswXSArICIgIiArIGl0ZW0uYm1pblsxXSArICJcbiI7DQogICAgICAgICAgICAgIHMgKz0gIiIgKyBfaSArICIgIiArIGl0ZW0uYm1heFswXSArICIgIiArIGl0ZW0uYm1heFsxXSArICJcbiI7DQogICAgICAgICAgICB9IC8vIGZzLndyaXRlRmlsZVN5bmMoIml0ZW1zXyIgKyBpbWluICsgIl8iICsgaW1heCArICIudHh0Iiwgcyk7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiZG9uZSIpDQogICAgICAgICAgICAvLyBMZWZ0DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiQmVmb3JlIGxlZnQgIiArIGltaW4gKyAiICIgKyBpc3BsaXQpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXNbMjc5XS5ibWluWzFdKQ0KDQoNCiAgICAgICAgICAgIHRoaXMuc3ViZGl2aWRlKGl0ZW1zLCBpbWluLCBpc3BsaXQsIHRyaXNQZXJDaHVuaywgbm9kZXMsIGluVHJpcyk7IC8vIGNvbnNvbGUubG9nKCJEb25lIGxlZnQgIiArIGltaW4gKyAiICIgKyBpc3BsaXQpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXNbMjc5XS5ibWluWzFdKQ0KICAgICAgICAgICAgLy8gUmlnaHQNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJCZWZvcmUgcmlnaHQgIiArIGlzcGxpdCArICIgIiArIGltYXgpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXNbMjc5XS5ibWluWzFdKQ0KDQogICAgICAgICAgICB0aGlzLnN1YmRpdmlkZShpdGVtcywgaXNwbGl0LCBpbWF4LCB0cmlzUGVyQ2h1bmssIG5vZGVzLCBpblRyaXMpOyAvLyBjb25zb2xlLmxvZygiRG9uZSByaWdodCAiICsgaXNwbGl0ICsgIiAiICsgaW1heCk7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtc1syNzldLmJtaW5bMV0pDQogICAgICAgICAgICAvLyBOZWdhdGl2ZSBpbmRleCBtZWFucyBlc2NhcGUuDQoNCiAgICAgICAgICAgIG5vZGUuaSA9IC1ub2Rlcy5sZW5ndGg7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIGZ1bmN0aW9uIENodW5reVRyaU1lc2godmVydHMsIHRyaXMsIG50cmlzLCB0cmlzUGVyQ2h1bmspIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENodW5reVRyaU1lc2gpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiQ29tcGFyZUl0ZW1YIiwgZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7DQogICAgICAgICAgaWYgKGEuYm1pblswXSA8IGIuYm1pblswXSkgew0KICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChhLmJtaW5bMF0gPiBiLmJtaW5bMF0pIHsNCiAgICAgICAgICAgIHJldHVybiAxOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIkNvbXBhcmVJdGVtWSIsIGZ1bmN0aW9uIGNvbXBhcmUoYSwgYikgew0KICAgICAgICAgIGlmIChhLmJtaW5bMV0gPCBiLmJtaW5bMV0pIHsNCiAgICAgICAgICAgIHJldHVybiAtMTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoYS5ibWluWzFdID4gYi5ibWluWzFdKSB7DQogICAgICAgICAgICByZXR1cm4gMTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJub2RlcyIsIFtdKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm50cmlzIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1heFRyaXNQZXJDaHVuayIsIHZvaWQgMCk7DQogICAgICAgIHRoaXMubm9kZXMgPSBbXTsNCiAgICAgICAgdGhpcy5udHJpcyA9IG50cmlzOyAvLyBCdWlsZCB0cmVlDQoNCiAgICAgICAgdmFyIGl0ZW1zID0gW107IC8vbmV3IEFycmF5KG50cmlzKTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG50cmlzOyBpKyspIHsNCiAgICAgICAgICB2YXIgdCA9IGkgKiAzOw0KICAgICAgICAgIHZhciBpdCA9IGl0ZW1zW2ldID0gbmV3IENodW5reVRyaU1lc2guQm91bmRzSXRlbSgpOw0KICAgICAgICAgIGl0LmkgPSBpOyAvLyBDYWxjIHRyaWFuZ2xlIFhaIGJvdW5kcy4NCg0KICAgICAgICAgIGl0LmJtaW5bMF0gPSBpdC5ibWF4WzBdID0gdmVydHNbdHJpc1t0XSAqIDMgKyAwXTsNCiAgICAgICAgICBpdC5ibWluWzFdID0gaXQuYm1heFsxXSA9IHZlcnRzW3RyaXNbdF0gKiAzICsgMl07DQoNCiAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IDM7ICsraikgew0KICAgICAgICAgICAgdmFyIHYgPSB0cmlzW3QgKyBqXSAqIDM7DQoNCiAgICAgICAgICAgIGlmICh2ZXJ0c1t2XSA8IGl0LmJtaW5bMF0pIHsNCiAgICAgICAgICAgICAgaXQuYm1pblswXSA9IHZlcnRzW3ZdOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodmVydHNbdiArIDJdIDwgaXQuYm1pblsxXSkgew0KICAgICAgICAgICAgICBpdC5ibWluWzFdID0gdmVydHNbdiArIDJdOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAodmVydHNbdl0gPiBpdC5ibWF4WzBdKSB7DQogICAgICAgICAgICAgIGl0LmJtYXhbMF0gPSB2ZXJ0c1t2XTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHZlcnRzW3YgKyAyXSA+IGl0LmJtYXhbMV0pIHsNCiAgICAgICAgICAgICAgaXQuYm1heFsxXSA9IHZlcnRzW3YgKyAyXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnN1YmRpdmlkZShpdGVtcywgMCwgbnRyaXMsIHRyaXNQZXJDaHVuaywgdGhpcy5ub2RlcywgdHJpcyk7IC8vIENhbGMgbWF4IHRyaXMgcGVyIG5vZGUuDQoNCiAgICAgICAgdGhpcy5tYXhUcmlzUGVyQ2h1bmsgPSAwOw0KDQogICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLm5vZGVzKSwNCiAgICAgICAgICAgIF9zdGVwOw0KDQogICAgICAgIHRyeSB7DQogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsNCiAgICAgICAgICAgIHZhciBfbm9kZSA9IF9zdGVwLnZhbHVlOw0KICAgICAgICAgICAgdmFyIGlzTGVhZiA9IF9ub2RlLmkgPj0gMDsNCg0KICAgICAgICAgICAgaWYgKCFpc0xlYWYpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChfbm9kZS50cmlzLmxlbmd0aCAvIDMgPiB0aGlzLm1heFRyaXNQZXJDaHVuaykgew0KICAgICAgICAgICAgICB0aGlzLm1heFRyaXNQZXJDaHVuayA9IF9ub2RlLnRyaXMubGVuZ3RoIC8gMzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7DQogICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoQ2h1bmt5VHJpTWVzaCwgW3sNCiAgICAgICAga2V5OiAiY2hlY2tPdmVybGFwUmVjdCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja092ZXJsYXBSZWN0KGFtaW4sIGFtYXgsIGJtaW4sIGJtYXgpIHsNCiAgICAgICAgICB2YXIgb3ZlcmxhcCA9IHRydWU7DQogICAgICAgICAgb3ZlcmxhcCA9IGFtaW5bMF0gPiBibWF4WzBdIHx8IGFtYXhbMF0gPCBibWluWzBdID8gZmFsc2UgOiBvdmVybGFwOw0KICAgICAgICAgIG92ZXJsYXAgPSBhbWluWzFdID4gYm1heFsxXSB8fCBhbWF4WzFdIDwgYm1pblsxXSA/IGZhbHNlIDogb3ZlcmxhcDsNCiAgICAgICAgICByZXR1cm4gb3ZlcmxhcDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRDaHVua3NPdmVybGFwcGluZ1JlY3QiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2h1bmtzT3ZlcmxhcHBpbmdSZWN0KGJtaW4sIGJtYXgpIHsNCiAgICAgICAgICAvLyBUcmF2ZXJzZSB0cmVlDQogICAgICAgICAgaWRzID0gW107DQogICAgICAgICAgdmFyIGkgPSAwOw0KDQogICAgICAgICAgd2hpbGUgKGkgPCBub2Rlcy5sZW5ndGgpIHsNCiAgICAgICAgICAgIG5vZGUgPSBub2Rlc1tpXTsNCiAgICAgICAgICAgIHZhciBvdmVybGFwID0gY2hlY2tPdmVybGFwUmVjdChibWluLCBibWF4LCBub2RlLmJtaW4sIG5vZGUuYm1heCk7DQogICAgICAgICAgICB2YXIgaXNMZWFmTm9kZSA9IG5vZGUuaSA+PSAwOw0KDQogICAgICAgICAgICBpZiAoaXNMZWFmTm9kZSAmJiBvdmVybGFwKSB7DQogICAgICAgICAgICAgIGlkcy5wdXNoKG5vZGUpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAob3ZlcmxhcCB8fCBpc0xlYWZOb2RlKSB7DQogICAgICAgICAgICAgIGkrKzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGkgPSAtbm9kZS5pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBpZHM7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIENodW5reVRyaU1lc2g7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENodW5reVRyaU1lc2gsICJCb3VuZHNJdGVtIiwgKF90ZW1wID0gZnVuY3Rpb24gQm91bmRzSXRlbSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCb3VuZHNJdGVtKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgbmV3IEFycmF5KDIpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWF4IiwgbmV3IEFycmF5KDIpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpIiwgdm9pZCAwKTsNCiAgICB9LCBfdGVtcCkpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENodW5reVRyaU1lc2gsICJDaHVua3lUcmlNZXNoTm9kZSIsIChfdGVtcDIgPSBmdW5jdGlvbiBDaHVua3lUcmlNZXNoTm9kZSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaHVua3lUcmlNZXNoTm9kZSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1pbiIsIG5ldyBBcnJheSgyKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1heCIsIG5ldyBBcnJheSgyKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaSIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidHJpcyIsIFtdKTsNCiAgICB9LCBfdGVtcDIpKTsNCg0KICAgIHZhciBUcmlNZXNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFRyaU1lc2godmVydGljZXMsIGZhY2VzKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUcmlNZXNoKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZlcnRpY2VzIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZhY2VzIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNodW5reVRyaU1lc2giLCB2b2lkIDApOw0KDQogICAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlczsNCiAgICAgICAgdGhpcy5mYWNlcyA9IGZhY2VzOw0KICAgICAgICB0aGlzLmNodW5reVRyaU1lc2ggPSBuZXcgQ2h1bmt5VHJpTWVzaCh2ZXJ0aWNlcywgZmFjZXMsIGZhY2VzLmxlbmd0aCAvIDMsIDI1Nik7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhUcmlNZXNoLCBbew0KICAgICAgICBrZXk6ICJnZXRUcmlzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyaXMoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMuZmFjZXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0VmVydHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmVydHMoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMudmVydGljZXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0Q2h1bmtzT3ZlcmxhcHBpbmdSZWN0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENodW5rc092ZXJsYXBwaW5nUmVjdChibWluLCBibWF4KSB7DQogICAgICAgICAgcmV0dXJuIGNodW5reVRyaU1lc2guZ2V0Q2h1bmtzT3ZlcmxhcHBpbmdSZWN0KGJtaW4sIGJtYXgpOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBUcmlNZXNoOw0KICAgIH0oKTsNCg0KICAgIHZhciBTaW1wbGVJbnB1dEdlb21Qcm92aWRlcg0KICAgIC8qZXh0ZW5kcyBJbnB1dEdlb21Qcm92aWRlciovDQogICAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgX2NyZWF0ZUNsYXNzKFNpbXBsZUlucHV0R2VvbVByb3ZpZGVyLCBudWxsLCBbew0KICAgICAgICBrZXk6ICJtYXBGYWNlcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBGYWNlcyhtZXNoRmFjZXMpIHsNCiAgICAgICAgICB2YXIgZmFjZXMgPSBuZXcgQXJyYXkobWVzaEZhY2VzLmxlbmd0aCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhY2VzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBmYWNlc1tpXSA9IG1lc2hGYWNlc1tpXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gZmFjZXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibWFwVmVydGljZXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWFwVmVydGljZXModmVydGV4UG9zaXRpb25zKSB7DQogICAgICAgICAgdmFyIHZlcnRpY2VzID0gbmV3IEFycmF5KHZlcnRleFBvc2l0aW9ucy5sZW5ndGgpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdmVydGljZXNbaV0gPSB2ZXJ0ZXhQb3NpdGlvbnNbaV07DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHZlcnRpY2VzOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIGZ1bmN0aW9uIFNpbXBsZUlucHV0R2VvbVByb3ZpZGVyKHZlcnRpY2VzLCBmYWNlcykgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2ltcGxlSW5wdXRHZW9tUHJvdmlkZXIpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmVydGljZXMiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZmFjZXMiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1pbiIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWF4Iiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZvbHVtZXMiLCBbXSk7DQoNCiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOw0KICAgICAgICB0aGlzLmZhY2VzID0gZmFjZXM7DQogICAgICAgIHRoaXMuYm1pbiA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgdGhpcy5ibWF4ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTModGhpcy5ibWluLCB2ZXJ0aWNlcywgMCk7DQogICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5Myh0aGlzLmJtYXgsIHZlcnRpY2VzLCAwKTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHZlcnRpY2VzLmxlbmd0aCAvIDM7IGkrKykgew0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5taW4odGhpcy5ibWluLCB2ZXJ0aWNlcywgaSAqIDMpOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5tYXgodGhpcy5ibWF4LCB2ZXJ0aWNlcywgaSAqIDMpOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhTaW1wbGVJbnB1dEdlb21Qcm92aWRlciwgW3sNCiAgICAgICAga2V5OiAiZ2V0TWVzaEJvdW5kc01pbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNZXNoQm91bmRzTWluKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLmJtaW47DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0TWVzaEJvdW5kc01heCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNZXNoQm91bmRzTWF4KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLmJtYXg7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0Q29udmV4Vm9sdW1lcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb252ZXhWb2x1bWVzKCkgew0KICAgICAgICAgIHJldHVybiBbXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRDb252ZXhWb2x1bWUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ29udmV4Vm9sdW1lKHZlcnRzLCBtaW5oLCBtYXhoLCBhcmVhTW9kKSB7DQogICAgICAgICAgdmFyIHZvbCA9IG5ldyBDb252ZXhWb2x1bWUoKTsNCiAgICAgICAgICB2b2wuaG1pbiA9IG1pbmg7DQogICAgICAgICAgdm9sLmhtYXggPSBtYXhoOw0KICAgICAgICAgIHZvbC52ZXJ0cyA9IHZlcnRzOw0KICAgICAgICAgIHZvbC5hcmVhTW9kID0gYXJlYU1vZDsNCiAgICAgICAgICB0aGlzLnZvbHVtZXMucHVzaCh2b2wpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIm1lc2hlcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXNoZXMoKSB7DQogICAgICAgICAgLy8gcmV0dXJuIENvbGxlY3Rpb25zLnNpbmdQb2x5b25MaXN0KG5ldyBUcmlNZXNoKHZlcnRpY2VzLCBmYWNlcykpOw0KICAgICAgICAgIHJldHVybiBbbmV3IFRyaU1lc2godGhpcy52ZXJ0aWNlcywgdGhpcy5mYWNlcyldOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBTaW1wbGVJbnB1dEdlb21Qcm92aWRlcjsNCiAgICB9KCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2ltcGxlSW5wdXRHZW9tUHJvdmlkZXIsICJmcm9tSW5kZWNlcyIsIGZ1bmN0aW9uICh2ZXJ0ZXhQb3NpdGlvbnMsIG1lc2hGYWNlcykgew0KICAgICAgcmV0dXJuIG5ldyBTaW1wbGVJbnB1dEdlb21Qcm92aWRlcih0aGlzLm1hcFZlcnRpY2VzKHZlcnRleFBvc2l0aW9ucyksIHRoaXMubWFwRmFjZXMobWVzaEZhY2VzKSk7DQogICAgfSk7DQoNCiAgICB2YXIgT2JqSW1wb3J0ZXJDb250ZXh0ID0gZnVuY3Rpb24gT2JqSW1wb3J0ZXJDb250ZXh0KCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9iakltcG9ydGVyQ29udGV4dCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmVydGV4UG9zaXRpb25zIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1lc2hGYWNlcyIsIFtdKTsNCiAgICB9Ow0KDQogICAgdmFyIE9iakltcG9ydGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIE9iakltcG9ydGVyKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JqSW1wb3J0ZXIpOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoT2JqSW1wb3J0ZXIsIFt7DQogICAgICAgIGtleTogImxvYWQiLA0KICAgICAgICAvLyBPQkpJbXBvcnRlckNvbnRleHQgPSANCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoaXMpIHsNCiAgICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBPYmpJbXBvcnRlckNvbnRleHQoKTsNCg0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICB2YXIgc2x1cnAgPSBpczsNCiAgICAgICAgICAgIHZhciBsaW5lcyA9IHNsdXJwLnNwbGl0KC9ccj9cbi8pOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgIHZhciBsaW5lID0gbGluZXNbaV07DQogICAgICAgICAgICAgIHRoaXMucmVhZExpbmUobGluZSwgY29udGV4dCk7DQogICAgICAgICAgICB9IC8vIHJlYWRlciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaXMpKTsNCiAgICAgICAgICAgIC8vIGxldCBsaW5lOw0KICAgICAgICAgICAgLy8gd2hpbGUgKChsaW5lID0gcmVhZGVyLnJlYWRMaW5lKCkpICE9IG51bGwpIHsNCiAgICAgICAgICAgIC8vICAgICBsaW5lID0gbGluZS50cmltKCk7DQogICAgICAgICAgICAvLyAgICAgcmVhZExpbmUobGluZSwgY29udGV4dCk7DQogICAgICAgICAgICAvLyB9DQoNCiAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICB0aHJvdyBlOw0KICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIFNpbXBsZUlucHV0R2VvbVByb3ZpZGVyLmZyb21JbmRlY2VzKGNvbnRleHQudmVydGV4UG9zaXRpb25zLCBjb250ZXh0Lm1lc2hGYWNlcyk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmVhZExpbmUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZExpbmUobGluZSwgY29udGV4dCkgew0KICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoInYiKSkgew0KICAgICAgICAgICAgdGhpcy5yZWFkVmVydGV4KGxpbmUsIGNvbnRleHQpOw0KICAgICAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCJmIikpIHsNCiAgICAgICAgICAgIHRoaXMucmVhZEZhY2UobGluZSwgY29udGV4dCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInJlYWRWZXJ0ZXgiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZFZlcnRleChsaW5lLCBjb250ZXh0KSB7DQogICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgidiAiKSkgew0KICAgICAgICAgICAgdmFyIHZlcnQgPSB0aGlzLnJlYWRWZWN0b3IzZihsaW5lKTsNCg0KICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZlcnQpLA0KICAgICAgICAgICAgICAgIF9zdGVwOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgew0KICAgICAgICAgICAgICAgIHZhciB2cCA9IF9zdGVwLnZhbHVlOw0KICAgICAgICAgICAgICAgIGNvbnRleHQudmVydGV4UG9zaXRpb25zLnB1c2godnApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsNCiAgICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInJlYWRWZWN0b3IzZiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkVmVjdG9yM2YobGluZSkgew0KICAgICAgICAgIHZhciB2ID0gbGluZS5zcGxpdCgvXHMrLyk7DQoNCiAgICAgICAgICBpZiAodi5sZW5ndGggPCA0KSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiSW52YWxpZCB2ZWN0b3IsIGV4cGVjdGVkIDMgY29vcmRpbmF0ZXMsIGZvdW5kICIgKyAodi5sZW5ndGggLSAxKSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIFtwYXJzZUZsb2F0KHZbMV0pLCBwYXJzZUZsb2F0KHZbMl0pLCBwYXJzZUZsb2F0KHZbM10pXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZWFkRmFjZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkRmFjZShsaW5lLCBjb250ZXh0KSB7DQogICAgICAgICAgdmFyIHYgPSBsaW5lLnNwbGl0KC9ccysvKTsNCg0KICAgICAgICAgIGlmICh2Lmxlbmd0aCA8IDQpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJJbnZhbGlkIG51bWJlciBvZiBmYWNlIHZlcnRpY2VzOiAzIGNvb3JkaW5hdGVzIGV4cGVjdGVkLCBmb3VuZCAiICsgdi5sZW5ndGgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGggLSAzOyBqKyspIHsNCiAgICAgICAgICAgIGNvbnRleHQubWVzaEZhY2VzLnB1c2godGhpcy5yZWFkRmFjZVZlcnRleCh2WzFdLCBjb250ZXh0KSk7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSsrKSB7DQogICAgICAgICAgICAgIGNvbnRleHQubWVzaEZhY2VzLnB1c2godGhpcy5yZWFkRmFjZVZlcnRleCh2WzIgKyBqICsgaV0sIGNvbnRleHQpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmVhZEZhY2VWZXJ0ZXgiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZEZhY2VWZXJ0ZXgoZmFjZSwgY29udGV4dCkgew0KICAgICAgICAgIHZhciB2ID0gZmFjZS5zcGxpdCgvXC8vKTsNCiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbmRleChwYXJzZUludCh2WzBdKSwgY29udGV4dC52ZXJ0ZXhQb3NpdGlvbnMubGVuZ3RoKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRJbmRleCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleChwb3NpLCBzaXplKSB7DQogICAgICAgICAgaWYgKHBvc2kgPiAwKSB7DQogICAgICAgICAgICBwb3NpLS07DQogICAgICAgICAgfSBlbHNlIGlmIChwb3NpIDwgMCkgew0KICAgICAgICAgICAgcG9zaSA9IHNpemUgKyBwb3NpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiMCB2ZXJ0ZXggaW5kZXgiKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gcG9zaTsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gT2JqSW1wb3J0ZXI7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUtMjAxOCBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQogICAgdmFyIFJlY2FzdENvbnN0YW50cyA9IGZ1bmN0aW9uIFJlY2FzdENvbnN0YW50cygpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RDb25zdGFudHMpOw0KICAgIH07DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfTlVMTF9BUkVBIiwgMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfTk9UX0NPTk5FQ1RFRCIsIDB4M2YpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgIlJDX1dBTEtBQkxFX0FSRUEiLCA2Myk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfU1BBTl9IRUlHSFRfQklUUyIsIDEzKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsICJSQ19TUEFOX01BWF9IRUlHSFQiLCAoMSA8PCBSZWNhc3RDb25zdGFudHMuUkNfU1BBTl9IRUlHSFRfQklUUykgLSAxKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsICJSQ19CT1JERVJfUkVHIiwgMHg4MDAwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsICJSQ19NVUxUSVBMRV9SRUdTIiwgMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfQk9SREVSX1ZFUlRFWCIsIDB4MTAwMDApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgIlJDX0FSRUFfQk9SREVSIiwgMHgyMDAwMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfQ09OVE9VUl9SRUdfTUFTSyIsIDB4ZmZmZik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfTUVTSF9OVUxMX0lEWCIsIDB4ZmZmZik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfQ09OVE9VUl9URVNTX1dBTExfRURHRVMiLCAweDAxKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsICJSQ19DT05UT1VSX1RFU1NfQVJFQV9FREdFUyIsIDB4MDIpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgIldBVEVSU0hFRCIsIDEwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsICJNT05PVE9ORSIsIDIwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsICJMQVlFUlMiLCAzMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCAiUkNfTE9HX1dBUk5JTkciLCAxKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCiAgICB2YXIgUmVjYXN0Q29uZmlnID0NCiAgICAvKiogVGhlIHdpZHRoL2hlaWdodCBzaXplIG9mIHRpbGUncyBvbiB0aGUgeHotcGxhbmUuIFtMaW1pdDogPj0gMF0gW1VuaXRzOiB2eF0gKiovDQoNCiAgICAvKiogVGhlIHh6LXBsYW5lIGNlbGwgc2l6ZSB0byB1c2UgZm9yIGZpZWxkcy4gW0xpbWl0OiA+IDBdIFtVbml0czogd3VdICoqLw0KDQogICAgLyoqIFRoZSB5LWF4aXMgY2VsbCBzaXplIHRvIHVzZSBmb3IgZmllbGRzLiBbTGltaXQ6ID4gMF0gW1VuaXRzOiB3dV0gKiovDQoNCiAgICAvKiogVGhlIG1heGltdW0gc2xvcGUgdGhhdCBpcyBjb25zaWRlcmVkIHdhbGthYmxlLiBbTGltaXRzOiAwIDw9IHZhbHVlIDwgOTBdIFtVbml0czogRGVncmVlc10gKiovDQoNCiAgICAvKioNCiAgICAgKiBNaW5pbXVtIGZsb29yIHRvICdjZWlsaW5nJyBoZWlnaHQgdGhhdCB3aWxsIHN0aWxsIGFsbG93IHRoZSBmbG9vciBhcmVhIHRvIGJlIGNvbnNpZGVyZWQgd2Fsa2FibGUuIFtMaW1pdDogPj0gM10NCiAgICAgKiBbVW5pdHM6IHZ4XQ0KICAgICAqKi8NCg0KICAgIC8qKiBNYXhpbXVtIGxlZGdlIGhlaWdodCB0aGF0IGlzIGNvbnNpZGVyZWQgdG8gc3RpbGwgYmUgdHJhdmVyc2FibGUuIFtMaW1pdDogPj0wXSBbVW5pdHM6IHZ4XSAqKi8NCg0KICAgIC8qKg0KICAgICAqIFRoZSBkaXN0YW5jZSB0byBlcm9kZS9zaHJpbmsgdGhlIHdhbGthYmxlIGFyZWEgb2YgdGhlIGhlaWdodGZpZWxkIGF3YXkgZnJvbSBvYnN0cnVjdGlvbnMuIFtMaW1pdDogPj0wXSBbVW5pdHM6DQogICAgICogdnhdDQogICAgICoqLw0KDQogICAgLyoqIFRoZSBtYXhpbXVtIGFsbG93ZWQgbGVuZ3RoIGZvciBjb250b3VyIGVkZ2VzIGFQb2x5IHRoZSBib3JkZXIgb2YgdGhlIG1lc2guIFtMaW1pdDogPj0wXSBbVW5pdHM6IHZ4XSAqKi8NCg0KICAgIC8qKg0KICAgICAqIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGEgc2ltcGxmaWVkIGNvbnRvdXIncyBib3JkZXIgZWRnZXMgc2hvdWxkIGRldmlhdGUgdGhlIG9yaWdpbmFsIHJhdyBjb250b3VyLiBbTGltaXQ6ID49MF0NCiAgICAgKiBbVW5pdHM6IHZ4XQ0KICAgICAqKi8NCg0KICAgIC8qKiBUaGUgbWluaW11bSBudW1iZXIgb2YgY2VsbHMgYWxsb3dlZCB0byBmb3JtIGlzb2xhdGVkIGlzbGFuZCBhcmVhcy4gW0xpbWl0OiA+PTBdIFtVbml0czogdnhdICoqLw0KDQogICAgLyoqDQogICAgICogQW55IHJlZ2lvbnMgd2l0aCBhIHNwYW4gY291bnQgc21hbGxlciB0aGFuIHRoaXMgdmFsdWUgd2lsbCwgaWYgcG9zc2libGUsIGJlIG1lcmdlZCB3aXRoIGxhcmdlciByZWdpb25zLiBbTGltaXQ6DQogICAgICogPj0wXSBbVW5pdHM6IHZ4XQ0KICAgICAqKi8NCg0KICAgIC8qKg0KICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2ZXJ0aWNlcyBhbGxvd2VkIGZvciBwb2x5Z29ucyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjb250b3VyIHRvIHBvbHlnb24gY29udmVyc2lvbiBwcm9jZXNzLg0KICAgICAqIFtMaW1pdDogPj0gM10NCiAgICAgKiovDQoNCiAgICAvKioNCiAgICAgKiBTZXRzIHRoZSBzYW1wbGluZyBkaXN0YW5jZSB0byB1c2Ugd2hlbiBnZW5lcmF0aW5nIHRoZSBkZXRhaWwgbWVzaC4gKEZvciBoZWlnaHQgZGV0YWlsIG9ubHkuKSBbTGltaXRzOiAwIG9yID49DQogICAgICogMC45XSBbVW5pdHM6IHd1XQ0KICAgICAqKi8NCg0KICAgIC8qKg0KICAgICAqIFRoZSBtYXhpbXVtIGRpc3RhbmNlIHRoZSBkZXRhaWwgbWVzaCBzdXJmYWNlIHNob3VsZCBkZXZpYXRlIGZyb20gaGVpZ2h0ZmllbGQgZGF0YS4gKEZvciBoZWlnaHQgZGV0YWlsIG9ubHkuKQ0KICAgICAqIFtMaW1pdDogPj0wXSBbVW5pdHM6IHd1XQ0KICAgICAqKi8NCiAgICBmdW5jdGlvbiBSZWNhc3RDb25maWcocGFydGl0aW9uVHlwZSwgY2VsbFNpemUsIGNlbGxIZWlnaHQsIGFnZW50SGVpZ2h0LCBhZ2VudFJhZGl1cywgYWdlbnRNYXhDbGltYiwgYWdlbnRNYXhTbG9wZSwgcmVnaW9uTWluU2l6ZSwgcmVnaW9uTWVyZ2VTaXplLCBlZGdlTWF4TGVuLCBlZGdlTWF4RXJyb3IsIHZlcnRzUGVyUG9seSwgZGV0YWlsU2FtcGxlRGlzdCwgZGV0YWlsU2FtcGxlTWF4RXJyb3IsIHRpbGVTaXplLCB3YWxrYWJsZUFyZWFNb2QpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RDb25maWcpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBhcnRpdGlvblR5cGUiLCBudWxsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0aWxlU2l6ZSIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY3MiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNoIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YWxrYWJsZVNsb3BlQW5nbGUiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndhbGthYmxlSGVpZ2h0Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YWxrYWJsZUNsaW1iIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YWxrYWJsZVJhZGl1cyIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWF4RWRnZUxlbiIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWF4U2ltcGxpZmljYXRpb25FcnJvciIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWluUmVnaW9uQXJlYSIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWVyZ2VSZWdpb25BcmVhIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtYXhWZXJ0c1BlclBvbHkiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxTYW1wbGVEaXN0Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxTYW1wbGVNYXhFcnJvciIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2Fsa2FibGVBcmVhTW9kIiwgdm9pZCAwKTsNCg0KICAgICAgdGhpcy5wYXJ0aXRpb25UeXBlID0gcGFydGl0aW9uVHlwZTsNCiAgICAgIHRoaXMuY3MgPSBjZWxsU2l6ZTsNCiAgICAgIHRoaXMuY2ggPSBjZWxsSGVpZ2h0Ow0KICAgICAgdGhpcy53YWxrYWJsZVNsb3BlQW5nbGUgPSBhZ2VudE1heFNsb3BlOw0KICAgICAgdGhpcy53YWxrYWJsZUhlaWdodCA9IE1hdGguY2VpbChhZ2VudEhlaWdodCAvIHRoaXMuY2gpOw0KICAgICAgdGhpcy53YWxrYWJsZUNsaW1iID0gTWF0aC5mbG9vcihhZ2VudE1heENsaW1iIC8gdGhpcy5jaCk7DQogICAgICB0aGlzLndhbGthYmxlUmFkaXVzID0gTWF0aC5jZWlsKGFnZW50UmFkaXVzIC8gdGhpcy5jcyk7DQogICAgICB0aGlzLm1heEVkZ2VMZW4gPSBNYXRoLmZsb29yKGVkZ2VNYXhMZW4gLyBjZWxsU2l6ZSk7DQogICAgICB0aGlzLm1heFNpbXBsaWZpY2F0aW9uRXJyb3IgPSBlZGdlTWF4RXJyb3I7DQogICAgICB0aGlzLm1pblJlZ2lvbkFyZWEgPSByZWdpb25NaW5TaXplICogcmVnaW9uTWluU2l6ZTsgLy8gTm90ZTogYXJlYSA9IHNpemUqc2l6ZQ0KDQogICAgICB0aGlzLm1lcmdlUmVnaW9uQXJlYSA9IHJlZ2lvbk1lcmdlU2l6ZSAqIHJlZ2lvbk1lcmdlU2l6ZTsgLy8gTm90ZTogYXJlYSA9IHNpemUqc2l6ZQ0KDQogICAgICB0aGlzLm1heFZlcnRzUGVyUG9seSA9IHZlcnRzUGVyUG9seTsNCiAgICAgIHRoaXMuZGV0YWlsU2FtcGxlRGlzdCA9IGRldGFpbFNhbXBsZURpc3QgPCAwLjkgPyAwIDogY2VsbFNpemUgKiBkZXRhaWxTYW1wbGVEaXN0Ow0KICAgICAgdGhpcy5kZXRhaWxTYW1wbGVNYXhFcnJvciA9IGNlbGxIZWlnaHQgKiBkZXRhaWxTYW1wbGVNYXhFcnJvcjsNCiAgICAgIHRoaXMudGlsZVNpemUgPSB0aWxlU2l6ZTsNCiAgICAgIHRoaXMud2Fsa2FibGVBcmVhTW9kID0gd2Fsa2FibGVBcmVhTW9kOw0KICAgIH07DQoNCiAgICB2YXIgQXJlYU1vZGlmaWNhdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICAvKioNCiAgICAgICAqIE1hc2sgaXMgc2V0IHRvIGFsbCBhdmFpbGFibGUgYml0cywgd2hpY2ggbWVhbnMgdmFsdWUgaXMgZnVsbHkgYXBwbGllZA0KICAgICAgICogDQogICAgICAgKiBAcGFyYW0gdmFsdWUNCiAgICAgICAqICAgICAgICAgICAgVGhlIGFyZWEgaWQgdG8gYXBwbHkuIFtMaW1pdDogPD0gI1JDX0FSRUFfRkxBR1NfTUFTS10NCiAgICAgICAqLw0KICAgICAgLy8gY29uc3RydWN0b3IodmFsdWUpIHsNCiAgICAgIC8vIAkJdGhpcy52YWx1ZSA9IHZhbHVlOw0KICAgICAgLy8gCQl0aGlzLm1hc2sgPSBBcmVhTW9kaWZpY2F0aW9uLlJDX0FSRUFfRkxBR1NfTUFTSzsNCiAgICAgIC8vIAl9DQoNCiAgICAgIC8qKg0KICAgICAgICogDQogICAgICAgKiBAcGFyYW0gdmFsdWUNCiAgICAgICAqICAgICAgICAgICAgVGhlIGFyZWEgaWQgdG8gYXBwbHkuIFtMaW1pdDogPD0gI1JDX0FSRUFfRkxBR1NfTUFTS10NCiAgICAgICAqIEBwYXJhbSBtYXNrDQogICAgICAgKiAgICAgICAgICAgIEJpdHdpc2UgbWFzayB1c2VkIHdoZW4gYXBwbHlpbmcgdmFsdWUuIFtMaW1pdDogPD0gI1JDX0FSRUFfRkxBR1NfTUFTS10NCiAgICAgICAqLw0KICAgICAgZnVuY3Rpb24gQXJlYU1vZGlmaWNhdGlvbih2YWx1ZSkgew0KICAgICAgICB2YXIgbWFzayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogQXJlYU1vZGlmaWNhdGlvbi5SQ19BUkVBX0ZMQUdTX01BU0s7DQoNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFyZWFNb2RpZmljYXRpb24pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmFsdWUiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWFzayIsIHZvaWQgMCk7DQoNCiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlOw0KICAgICAgICB0aGlzLm1hc2sgPSBtYXNrOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoQXJlYU1vZGlmaWNhdGlvbiwgW3sNCiAgICAgICAga2V5OiAiZ2V0TWFza2VkVmFsdWUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWFza2VkVmFsdWUoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgJiB0aGlzLm1hc2s7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYXBwbHkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXBwbHkoYXJlYSkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlICYgdGhpcy5tYXNrIHwgYXJlYSAmIH50aGlzLm1hc2s7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIEFyZWFNb2RpZmljYXRpb247DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KEFyZWFNb2RpZmljYXRpb24sICJSQ19BUkVBX0ZMQUdTX01BU0siLCAweDNGKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShBcmVhTW9kaWZpY2F0aW9uLCAiY2xvbmUiLCBmdW5jdGlvbiAob3RoZXIpIHsNCiAgICAgIHJldHVybiBuZXcgQXJlYU1vZGlmaWNhdGlvbihvdGhlci52YWx1ZSwgb3RoZXIubWFzayk7IC8vIHRoaXMudmFsdWUgPSBvdGhlci52YWx1ZTsNCiAgICAgIC8vIHRoaXMubWFzayA9IG90aGVyLm1hc2s7DQogICAgfSk7DQoNCiAgICB2YXIgU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMgPSBmdW5jdGlvbiBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucygpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucyk7DQogICAgfTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9QT0xZQVJFQV9UWVBFX01BU0siLCAweDA3KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9QT0xZQVJFQV9UWVBFX0dST1VORCIsIDB4MSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsICJTQU1QTEVfUE9MWUFSRUFfVFlQRV9XQVRFUiIsIDB4Mik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsICJTQU1QTEVfUE9MWUFSRUFfVFlQRV9ST0FEIiwgMHgzKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9QT0xZQVJFQV9UWVBFX0RPT1IiLCAweDQpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCAiU0FNUExFX1BPTFlBUkVBX1RZUEVfR1JBU1MiLCAweDUpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCAiU0FNUExFX1BPTFlBUkVBX1RZUEVfSlVNUCIsIDB4Nik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsICJTQU1QTEVfQVJFQU1PRF9HUk9VTkQiLCBuZXcgQXJlYU1vZGlmaWNhdGlvbihTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9HUk9VTkQsIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX01BU0spKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9BUkVBTU9EX1dBVEVSIiwgbmV3IEFyZWFNb2RpZmljYXRpb24oU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMuU0FNUExFX1BPTFlBUkVBX1RZUEVfV0FURVIsIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX01BU0spKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9BUkVBTU9EX1JPQUQiLCBuZXcgQXJlYU1vZGlmaWNhdGlvbihTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9ST0FELCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9NQVNLKSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsICJTQU1QTEVfQVJFQU1PRF9HUkFTUyIsIG5ldyBBcmVhTW9kaWZpY2F0aW9uKFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX0dSQVNTLCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9NQVNLKSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsICJTQU1QTEVfQVJFQU1PRF9ET09SIiwgbmV3IEFyZWFNb2RpZmljYXRpb24oU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMuU0FNUExFX1BPTFlBUkVBX1RZUEVfRE9PUiwgU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMuU0FNUExFX1BPTFlBUkVBX1RZUEVfRE9PUikpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCAiU0FNUExFX0FSRUFNT0RfSlVNUCIsIG5ldyBBcmVhTW9kaWZpY2F0aW9uKFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX0pVTVAsIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX0pVTVApKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9QT0xZRkxBR1NfV0FMSyIsIDB4MDEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCAiU0FNUExFX1BPTFlGTEFHU19TV0lNIiwgMHgwMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsICJTQU1QTEVfUE9MWUZMQUdTX0RPT1IiLCAweDA0KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgIlNBTVBMRV9QT0xZRkxBR1NfSlVNUCIsIDB4MDgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCAiU0FNUExFX1BPTFlGTEFHU19ESVNBQkxFRCIsIDB4MTApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCAiU0FNUExFX1BPTFlGTEFHU19BTEwiLCAweGZmZik7DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQoNCiAgICAvKiogQSBjb21wYWN0LCBzdGF0aWMgaGVpZ2h0ZmllbGQgcmVwcmVzZW50aW5nIHVub2JzdHJ1Y3RlZCBzcGFjZS4gKi8NCiAgICB2YXIgQ29tcGFjdEhlaWdodGZpZWxkID0gZnVuY3Rpb24gQ29tcGFjdEhlaWdodGZpZWxkKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbXBhY3RIZWlnaHRmaWVsZCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2lkdGgiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoZWlnaHQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzcGFuQ291bnQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YWxrYWJsZUhlaWdodCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndhbGthYmxlQ2xpbWIiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJib3JkZXJTaXplIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWF4RGlzdGFuY2UiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtYXhSZWdpb25zIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWF4IiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjcyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNoIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY2VsbHMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3BhbnMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGlzdCIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcmVhcyIsIFtdKTsNCiAgICB9Ow0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KDQogICAgLyoqIFByb3ZpZGVzIGluZm9ybWF0aW9uIG9uIHRoZSBjb250ZW50IG9mIGEgY2VsbCBjb2x1bW4gaW4gYSBjb21wYWN0IGhlaWdodGZpZWxkLiAqLw0KICAgIHZhciBDb21wYWN0Q2VsbCA9IGZ1bmN0aW9uIENvbXBhY3RDZWxsKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbXBhY3RDZWxsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpbmRleCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNvdW50IiwgMCk7DQogICAgfTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiAgUmVwcmVzZW50cyBhIHNwYW4gb2YgdW5vYnN0cnVjdGVkIHNwYWNlIHdpdGhpbiBhIGNvbXBhY3QgaGVpZ2h0ZmllbGQuICovDQogICAgdmFyIENvbXBhY3RTcGFuID0gZnVuY3Rpb24gQ29tcGFjdFNwYW4oKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tcGFjdFNwYW4pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInkiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWciLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb24iLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoIiwgMCk7DQogICAgfTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCiAgICB2YXIgUmVjYXN0Q29tbW9uID0gZnVuY3Rpb24gUmVjYXN0Q29tbW9uKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdENvbW1vbik7DQogICAgfTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb21tb24sICJHZXRDb24iLCBmdW5jdGlvbiAocywgZGlyKSB7DQogICAgICB2YXIgc2hpZnQgPSBkaXIgKiA2Ow0KICAgICAgcmV0dXJuIHMuY29uID4+IHNoaWZ0ICYgMHgzZjsNCiAgICB9KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb21tb24sICJHZXREaXJPZmZzZXRYIiwgZnVuY3Rpb24gKGRpcikgew0KICAgICAgdmFyIG9mZnNldCA9IFstMSwgMCwgMSwgMF07DQogICAgICByZXR1cm4gb2Zmc2V0W2RpciAmIDB4MDNdOw0KICAgIH0pOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbW1vbiwgIkdldERpck9mZnNldFkiLCBmdW5jdGlvbiAoZGlyKSB7DQogICAgICB2YXIgb2Zmc2V0ID0gWzAsIDEsIDAsIC0xXTsNCiAgICAgIHJldHVybiBvZmZzZXRbZGlyICYgMHgwM107DQogICAgfSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29tbW9uLCAicmNHZXREaXJGb3JPZmZzZXQiLCBmdW5jdGlvbiAoeCwgeSkgew0KICAgICAgdmFyIGRpcnMgPSBbMywgMCwgLTEsIDIsIDFdOw0KICAgICAgcmV0dXJuIGRpcnNbKHkgKyAxIDw8IDEpICsgeF07DQogICAgfSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29tbW9uLCAiU2V0Q29uIiwgZnVuY3Rpb24gKHMsIGRpciwgaSkgew0KICAgICAgdmFyIHNoaWZ0ID0gZGlyICogNjsNCiAgICAgIHZhciBjb24gPSBzLmNvbjsNCiAgICAgIHMuY29uID0gY29uICYgfigweDNmIDw8IHNoaWZ0KSB8IChpICYgMHgzZikgPDwgc2hpZnQ7DQogICAgfSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29tbW9uLCAiY2xhbXAiLCBmdW5jdGlvbiAodiwgbWluLCBtYXgpIHsNCiAgICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihtYXgsIHYpLCBtaW4pOw0KICAgIH0pOw0KDQogICAgdmFyIFJlY2FzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBSZWNhc3QoKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3QpOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0LCBbew0KICAgICAgICBrZXk6ICJjYWxjQm91bmRzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNCb3VuZHModmVydHMsIG52LCBibWluLCBibWF4KSB7DQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsNCiAgICAgICAgICAgIGJtaW5baV0gPSB2ZXJ0c1tpXTsNCiAgICAgICAgICAgIGJtYXhbaV0gPSB2ZXJ0c1tpXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgbnY7ICsrX2kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7DQogICAgICAgICAgICAgIGJtaW5bal0gPSBNYXRoLm1pbihibWluW2pdLCB2ZXJ0c1tfaSAqIDMgKyBqXSk7DQogICAgICAgICAgICAgIGJtYXhbal0gPSBNYXRoLm1heChibWF4W2pdLCB2ZXJ0c1tfaSAqIDMgKyBqXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBDYWxjdWxhdGUgYm91bmRpbmcgYm94Lg0KDQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY2xlYXJVbndhbGthYmxlVHJpYW5nbGVzIiwNCiAgICAgICAgLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBPbmx5IHNldHMgdGhlIGFyZWEgaWQncyBmb3IgdGhlIHVud2Fsa2FibGUgdHJpYW5nbGVzLiBEb2VzIG5vdCBhbHRlciB0aGUNCiAgICAgICAgLy8vIGFyZWEgaWQncyBmb3Igd2Fsa2FibGUgdHJpYW5nbGVzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFNlZSB0aGUgI3JjQ29uZmlnIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAc2VlIHJjSGVpZ2h0ZmllbGQsIHJjQ2xlYXJVbndhbGthYmxlVHJpYW5nbGVzLCByY1Jhc3Rlcml6ZVRyaWFuZ2xlcw0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJVbndhbGthYmxlVHJpYW5nbGVzKGN0eCwgd2Fsa2FibGVTbG9wZUFuZ2xlLCB2ZXJ0cywgbnYsIHRyaXMsIG50LCBhcmVhcykgew0KICAgICAgICAgIHdhbGthYmxlVGhyID0gTWF0aC5jb3Mod2Fsa2FibGVTbG9wZUFuZ2xlIC8gMTgwLjAgKiBNYXRoLlBJKTsNCiAgICAgICAgICBub3JtID0gbmV3IEFycmF5KDMpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudDsgKytpKSB7DQogICAgICAgICAgICB2YXIgdHJpID0gaSAqIDM7DQogICAgICAgICAgICBjYWxjVHJpTm9ybWFsKHZlcnRzLCB0cmlzW3RyaV0sIHRyaXNbdHJpICsgMV0sIHRyaXNbdHJpICsgMl0sIG5vcm0pOyAvLyBDaGVjayBpZiB0aGUgZmFjZSBpcyB3YWxrYWJsZS4NCg0KICAgICAgICAgICAgaWYgKG5vcm1bMV0gPD0gd2Fsa2FibGVUaHIpIGFyZWFzW2ldID0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH1dLCBbew0KICAgICAgICBrZXk6ICJjYWxjR3JpZFNpemUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY0dyaWRTaXplKGJtaW4sIGJtYXgsIGNzKSB7DQogICAgICAgICAgcmV0dXJuIFtNYXRoLmZsb29yKChibWF4WzBdIC0gYm1pblswXSkgLyBjcyArIDAuNSksIE1hdGguZmxvb3IoKGJtYXhbMl0gLSBibWluWzJdKSAvIGNzICsgMC41KV07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY2FsY1RpbGVDb3VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjVGlsZUNvdW50KGJtaW4sIGJtYXgsIGNzLCB0aWxlU2l6ZSkgew0KICAgICAgICAgIHZhciBnd2ggPSBSZWNhc3QuY2FsY0dyaWRTaXplKGJtaW4sIGJtYXgsIGNzKTsNCiAgICAgICAgICB2YXIgZ3cgPSBnd2hbMF07DQogICAgICAgICAgdmFyIGdoID0gZ3doWzFdOw0KICAgICAgICAgIHZhciB0cyA9IHRpbGVTaXplOw0KICAgICAgICAgIHZhciB0dyA9IChndyArIHRzIC0gMSkgLyB0czsNCiAgICAgICAgICB2YXIgdGggPSAoZ2ggKyB0cyAtIDEpIC8gdHM7DQogICAgICAgICAgcmV0dXJuIFt0dywgdGhdOw0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gTW9kaWZpZXMgdGhlIGFyZWEgaWQgb2YgYWxsIHRyaWFuZ2xlcyB3aXRoIGEgc2xvcGUgYmVsb3cgdGhlIHNwZWNpZmllZCB2YWx1ZS4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBTZWUgdGhlICNyY0NvbmZpZyBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHNlZSByY0hlaWdodGZpZWxkLCByY0NsZWFyVW53YWxrYWJsZVRyaWFuZ2xlcywgcmNSYXN0ZXJpemVUcmlhbmdsZXMNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtYXJrV2Fsa2FibGVUcmlhbmdsZXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWFya1dhbGthYmxlVHJpYW5nbGVzKGN0eCwgd2Fsa2FibGVTbG9wZUFuZ2xlLCB2ZXJ0cywgdHJpcywgbnQsIGFyZWFNb2QpIHsNCiAgICAgICAgICB2YXIgYXJlYXMgPSBuZXcgQXJyYXkobnQpLmZpbGwoMCk7DQogICAgICAgICAgdmFyIHdhbGthYmxlVGhyID0gTWF0aC5jb3Mod2Fsa2FibGVTbG9wZUFuZ2xlIC8gMTgwLjAgKiBNYXRoLlBJKTsNCiAgICAgICAgICB2YXIgbm9ybSA9IG5ldyBBcnJheSgzKS5maWxsKDApOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudDsgKytpKSB7DQogICAgICAgICAgICB2YXIgdHJpID0gaSAqIDM7DQogICAgICAgICAgICBSZWNhc3QuY2FsY1RyaU5vcm1hbCh2ZXJ0cywgdHJpc1t0cmldLCB0cmlzW3RyaSArIDFdLCB0cmlzW3RyaSArIDJdLCBub3JtKTsgLy8gQ2hlY2sgaWYgdGhlIGZhY2UgaXMgd2Fsa2FibGUuDQoNCiAgICAgICAgICAgIGlmIChub3JtWzFdID4gd2Fsa2FibGVUaHIpIGFyZWFzW2ldID0gYXJlYU1vZC5hcHBseShhcmVhc1tpXSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGFyZWFzOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNhbGNUcmlOb3JtYWwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY1RyaU5vcm1hbCh2ZXJ0cywgdjAsIHYxLCB2Miwgbm9ybSkgew0KICAgICAgICAgIHZhciBlMCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICB2YXIgZTEgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLnN1YkEoZTAsIHZlcnRzLCB2MSAqIDMsIHYwICogMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLnN1YkEoZTEsIHZlcnRzLCB2MiAqIDMsIHYwICogMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNyb3NzKG5vcm0sIGUwLCBlMSk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm5vcm1hbGl6ZShub3JtKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRIZWlnaHRGaWVsZFNwYW5Db3VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIZWlnaHRGaWVsZFNwYW5Db3VudChjdHgsIGhmKSB7DQogICAgICAgICAgdmFyIHcgPSBoZi53aWR0aDsNCiAgICAgICAgICB2YXIgaCA9IGhmLmhlaWdodDsNCiAgICAgICAgICB2YXIgc3BhbkNvdW50ID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7DQogICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7ICsreCkgew0KICAgICAgICAgICAgICBmb3IgKHZhciBzID0gaGYuc3BhbnNbeCArIHkgKiB3XTsgcyAhPSBudWxsOyBzID0gcy5uZXh0KSB7DQogICAgICAgICAgICAgICAgaWYgKHMuYXJlYSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSBzcGFuQ291bnQrKzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBzcGFuQ291bnQ7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGlzIGlzIGp1c3QgdGhlIGJlZ2lubmluZyBvZiB0aGUgcHJvY2VzcyBvZiBmdWxseSBidWlsZGluZyBhIGNvbXBhY3QgaGVpZ2h0ZmllbGQuDQogICAgICAgIC8vLyBWYXJpb3VzIGZpbHRlcnMgbWF5IGJlIGFwcGxpZWQsIHRoZW4gdGhlIGRpc3RhbmNlIGZpZWxkIGFuZCByZWdpb25zIGJ1aWx0Lg0KICAgICAgICAvLy8gRS5nOiAjcmNCdWlsZERpc3RhbmNlRmllbGQgYW5kICNyY0J1aWxkUmVnaW9ucw0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFNlZSB0aGUgI3JjQ29uZmlnIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAc2VlIHJjQWxsb2NDb21wYWN0SGVpZ2h0ZmllbGQsIHJjSGVpZ2h0ZmllbGQsIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY0NvbmZpZw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImJ1aWxkQ29tcGFjdEhlaWdodGZpZWxkIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkQ29tcGFjdEhlaWdodGZpZWxkKGN0eCwgd2Fsa2FibGVIZWlnaHQsIHdhbGthYmxlQ2xpbWIsIGhmKSB7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIkJVSUxEX0NPTVBBQ1RIRUlHSFRGSUVMRCIpOw0KICAgICAgICAgIHZhciBjaGYgPSBuZXcgQ29tcGFjdEhlaWdodGZpZWxkKCk7DQogICAgICAgICAgdmFyIHcgPSBoZi53aWR0aDsNCiAgICAgICAgICB2YXIgaCA9IGhmLmhlaWdodDsNCiAgICAgICAgICB2YXIgc3BhbkNvdW50ID0gdGhpcy5nZXRIZWlnaHRGaWVsZFNwYW5Db3VudChjdHgsIGhmKTsgLy8gRmlsbCBpbiBoZWFkZXIuDQoNCiAgICAgICAgICBjaGYud2lkdGggPSB3Ow0KICAgICAgICAgIGNoZi5oZWlnaHQgPSBoOw0KICAgICAgICAgIGNoZi5zcGFuQ291bnQgPSBzcGFuQ291bnQ7DQogICAgICAgICAgY2hmLndhbGthYmxlSGVpZ2h0ID0gd2Fsa2FibGVIZWlnaHQ7DQogICAgICAgICAgY2hmLndhbGthYmxlQ2xpbWIgPSB3YWxrYWJsZUNsaW1iOw0KICAgICAgICAgIGNoZi5tYXhSZWdpb25zID0gMDsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTIoY2hmLmJtaW4sIGhmLmJtaW4pOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5MihjaGYuYm1heCwgaGYuYm1heCk7DQogICAgICAgICAgY2hmLmJtYXhbMV0gKz0gd2Fsa2FibGVIZWlnaHQgKiBoZi5jaDsNCiAgICAgICAgICBjaGYuY3MgPSBoZi5jczsNCiAgICAgICAgICBjaGYuY2ggPSBoZi5jaDsgLy8gbGV0IGJpZ1NpemUgPSB3Kmg7DQoNCiAgICAgICAgICBjaGYuY2VsbHMgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcih3KSAqIE1hdGguZmxvb3IoaCkpOw0KICAgICAgICAgIGNoZi5zcGFucyA9IG5ldyBBcnJheShzcGFuQ291bnQpOw0KICAgICAgICAgIGNoZi5hcmVhcyA9IG5ldyBBcnJheShzcGFuQ291bnQpOw0KICAgICAgICAgIHZhciBNQVhfSEVJR0hUID0gMHhmZmZmOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGYuY2VsbHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGNoZi5jZWxsc1tpXSA9IG5ldyBDb21wYWN0Q2VsbCgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGNoZi5zcGFucy5sZW5ndGg7IF9pMisrKSB7DQogICAgICAgICAgICBjaGYuc3BhbnNbX2kyXSA9IG5ldyBDb21wYWN0U3BhbigpOw0KICAgICAgICAgIH0gLy8gRmlsbCBpbiBjZWxscyBhbmQgc3BhbnMuDQoNCg0KICAgICAgICAgIHZhciBpZHggPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgX3kgPSAwOyBfeSA8IGg7ICsrX3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94ID0gMDsgX3ggPCB3OyArK194KSB7DQogICAgICAgICAgICAgIHZhciBzID0gaGYuc3BhbnNbX3ggKyBfeSAqIHddOyAvLyBJZiB0aGVyZSBhcmUgbm8gc3BhbnMgYXQgdGhpcyBjZWxsLCBqdXN0IGxlYXZlIHRoZSBkYXRhIHRvIGluZGV4PTAsIGNvdW50PTAuDQoNCiAgICAgICAgICAgICAgaWYgKHMgPT0gbnVsbCkgY29udGludWU7DQogICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW194ICsgX3kgKiB3XTsNCiAgICAgICAgICAgICAgYy5pbmRleCA9IGlkeDsNCiAgICAgICAgICAgICAgYy5jb3VudCA9IDA7DQoNCiAgICAgICAgICAgICAgd2hpbGUgKHMgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIGlmIChzLmFyZWEgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgew0KICAgICAgICAgICAgICAgICAgdmFyIGJvdCA9IHMuc21heDsNCiAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBzLm5leHQgIT0gbnVsbCA/IE1hdGguZmxvb3Iocy5uZXh0LnNtaW4pIDogTUFYX0hFSUdIVDsNCiAgICAgICAgICAgICAgICAgIGNoZi5zcGFuc1tpZHhdLnkgPSBSZWNhc3RDb21tb24uY2xhbXAoYm90LCAwLCAweGZmZmYpOw0KICAgICAgICAgICAgICAgICAgY2hmLnNwYW5zW2lkeF0uaCA9IFJlY2FzdENvbW1vbi5jbGFtcCh0b3AgLSBib3QsIDAsIDB4ZmYpOw0KICAgICAgICAgICAgICAgICAgY2hmLmFyZWFzW2lkeF0gPSBzLmFyZWE7DQogICAgICAgICAgICAgICAgICBpZHgrKzsgLy8gaWYoaWR4ID09IDQ1MDI0MCkNCiAgICAgICAgICAgICAgICAgIC8vIAljb25zb2xlLmxvZygiaGVyZSIpDQoNCiAgICAgICAgICAgICAgICAgIGMuY291bnQrKzsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBzID0gcy5uZXh0Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBGaW5kIG5laWdoYm91ciBjb25uZWN0aW9ucy4NCg0KDQogICAgICAgICAgdmFyIE1BWF9MQVlFUlMgPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCAtIDE7DQogICAgICAgICAgdmFyIHRvb0hpZ2hOZWlnaGJvdXIgPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgKyt4KSB7DQogICAgICAgICAgICAgIHZhciBfYyA9IGNoZi5jZWxsc1t4ICsgeSAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pMyA9IF9jLmluZGV4LCBuaSA9IF9jLmluZGV4ICsgX2MuY291bnQ7IF9pMyA8IG5pOyArK19pMykgew0KICAgICAgICAgICAgICAgIC8vIGlmKGkgPT0gNDUwMjQwKQ0KICAgICAgICAgICAgICAgIC8vIAljb25zb2xlLmxvZygic3RvcCIpDQogICAgICAgICAgICAgICAgdmFyIF9zID0gY2hmLnNwYW5zW19pM107DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgICAgUmVjYXN0Q29tbW9uLlNldENvbihfcywgZGlyLCBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCk7DQogICAgICAgICAgICAgICAgICB2YXIgbnggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTsNCiAgICAgICAgICAgICAgICAgIHZhciBueSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOyAvLyBGaXJzdCBjaGVjayB0aGF0IHRoZSBuZWlnaGJvdXIgY2VsbCBpcyBpbiBib3VuZHMuDQoNCiAgICAgICAgICAgICAgICAgIGlmIChueCA8IDAgfHwgbnkgPCAwIHx8IG54ID49IHcgfHwgbnkgPj0gaCkgY29udGludWU7IC8vIEl0ZXJhdGUgb3ZlciBhbGwgbmVpZ2hib3VyIHNwYW5zIGFuZCBjaGVjayBpZiBhbnkgb2YgdGhlIGlzDQogICAgICAgICAgICAgICAgICAvLyBhY2Nlc3NpYmxlIGZyb20gY3VycmVudCBjZWxsLg0KDQogICAgICAgICAgICAgICAgICB2YXIgbmMgPSBjaGYuY2VsbHNbbnggKyBueSAqIHddOw0KDQogICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gbmMuaW5kZXgsIG5rID0gbmMuaW5kZXggKyBuYy5jb3VudDsgayA8IG5rOyArK2spIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5zID0gY2hmLnNwYW5zW2tdOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBfYm90ID0gTWF0aC5tYXgoX3MueSwgbnMueSk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIF90b3AgPSBNYXRoLm1pbihfcy55ICsgX3MuaCwgbnMueSArIG5zLmgpOyAvLyBDaGVjayB0aGF0IHRoZSBnYXAgYmV0d2VlbiB0aGUgc3BhbnMgaXMgd2Fsa2FibGUsDQogICAgICAgICAgICAgICAgICAgIC8vIGFuZCB0aGF0IHRoZSBjbGltYiBoZWlnaHQgYmV0d2VlbiB0aGUgZ2FwcyBpcyBub3QgdG9vIGhpZ2guDQoNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoX3RvcCAtIF9ib3QgPj0gd2Fsa2FibGVIZWlnaHQgJiYgTWF0aC5hYnMobnMueSAtIF9zLnkpIDw9IHdhbGthYmxlQ2xpbWIpIHsNCiAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGRpcmVjdGlvbiBhcyB3YWxrYWJsZS4NCiAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlkeCA9IGsgLSBuYy5pbmRleDsNCg0KICAgICAgICAgICAgICAgICAgICAgIGlmIChsaWR4IDwgMCB8fCBsaWR4ID4gTUFYX0xBWUVSUykgew0KICAgICAgICAgICAgICAgICAgICAgICAgdG9vSGlnaE5laWdoYm91ciA9IE1hdGgubWF4KHRvb0hpZ2hOZWlnaGJvdXIsIGxpZHgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgUmVjYXN0Q29tbW9uLlNldENvbihfcywgZGlyLCBsaWR4KTsNCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICh0b29IaWdoTmVpZ2hib3VyID4gTUFYX0xBWUVSUykgew0KICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oInJjQnVpbGRDb21wYWN0SGVpZ2h0ZmllbGQ6IEhlaWdodGZpZWxkIGhhcyB0b28gbWFueSBsYXllcnMgIiArIHRvb0hpZ2hOZWlnaGJvdXIgKyAiIChtYXg6ICIgKyBNQVhfTEFZRVJTICsgIikiKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJCVUlMRF9DT01QQUNUSEVJR0hURklFTEQiKTsNCiAgICAgICAgICByZXR1cm4gY2hmOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBSZWNhc3Q7DQogICAgfSgpOw0KDQogICAgdmFyIFJlY2FzdEJ1aWxkZXJDb25maWckMSA9DQogICAgLyoqIFRoZSB3aWR0aCBvZiB0aGUgZmllbGQgYVBvbHkgdGhlIHgtYXhpcy4gW0xpbWl0OiA+PSAwXSBbVW5pdHM6IHZ4XSAqKi8NCg0KICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBmaWVsZCBhUG9seSB0aGUgei1heGlzLiBbTGltaXQ6ID49IDBdIFtVbml0czogdnhdICoqLw0KDQogICAgLyoqIFRoZSBtaW5pbXVtIGJvdW5kcyBvZiB0aGUgZmllbGQncyBBQUJCLiBbKHgsIHksIHopXSBbVW5pdHM6IHd1XSAqKi8NCg0KICAgIC8qKiBUaGUgbWF4aW11bSBib3VuZHMgb2YgdGhlIGZpZWxkJ3MgQUFCQi4gWyh4LCB5LCB6KV0gW1VuaXRzOiB3dV0gKiovDQoNCiAgICAvKiogVGhlIHNpemUgb2YgdGhlIG5vbi1uYXZpZ2FibGUgYm9yZGVyIGFyb3VuZCB0aGUgaGVpZ2h0ZmllbGQuIFtMaW1pdDogPj0wXSBbVW5pdHM6IHZ4XSAqKi8NCg0KICAgIC8qKiBTZXQgdG8gdHJ1ZSBmb3IgdGlsZWQgYnVpbGQgKiovDQoNCiAgICAvKiogU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgYnVpbGRpbmcgZGV0YWlsZWQgbWVzaCAqKi8NCiAgICAvLyBSZWNhc3RCdWlsZGVyQ29uZmlnKFJlY2FzdENvbmZpZyBjZmcsIGJtaW4sIGJtYXgpIHsNCiAgICAvLyAgICAgICAgIHRoaXMoY2ZnLCBibWluLCBibWF4LCAwLCAwLCBmYWxzZSk7DQogICAgLy8gICAgIH0NCiAgICAvLyBSZWNhc3RCdWlsZGVyQ29uZmlnKFJlY2FzdENvbmZpZyBjZmcsIGJtaW4sIGJtYXgsICB0eCwgIHR5LCAgdGlsZWQpIHsNCiAgICAvLyAgICAgICAgIHRoaXMoY2ZnLCBibWluLCBibWF4LCB0eCwgdHksIHRpbGVkLCB0cnVlKTsNCiAgICAvLyAgICAgfQ0KICAgIGZ1bmN0aW9uIFJlY2FzdEJ1aWxkZXJDb25maWcoY2ZnLCBibWluLCBibWF4KSB7DQogICAgICB2YXIgdHggPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7DQogICAgICB2YXIgdHkgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IDA7DQogICAgICB2YXIgdGlsZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IGZhbHNlOw0KICAgICAgdmFyIGJ1aWxkTWVzaERldGFpbCA9IGFyZ3VtZW50cy5sZW5ndGggPiA2ICYmIGFyZ3VtZW50c1s2XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzZdIDogdHJ1ZTsNCg0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdEJ1aWxkZXJDb25maWcpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNmZyIsIG51bGwpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndpZHRoIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaGVpZ2h0IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1pbiIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1heCIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm9yZGVyU2l6ZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRpbGVkIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYnVpbGRNZXNoRGV0YWlsIiwgZmFsc2UpOw0KDQogICAgICB0aGlzLmNmZyA9IGNmZzsNCiAgICAgIHRoaXMudGlsZWQgPSB0aWxlZDsNCiAgICAgIHRoaXMuYnVpbGRNZXNoRGV0YWlsID0gYnVpbGRNZXNoRGV0YWlsOw0KICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkyKHRoaXMuYm1pbiwgYm1pbik7DQogICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTIodGhpcy5ibWF4LCBibWF4KTsNCg0KICAgICAgaWYgKHRpbGVkKSB7DQogICAgICAgIHRzID0gY2ZnLnRpbGVTaXplICogY2ZnLmNzOw0KICAgICAgICB0aGlzLmJtaW5bMF0gKz0gdHggKiB0czsNCiAgICAgICAgdGhpcy5ibWluWzJdICs9IHR5ICogdHM7DQogICAgICAgIHRoaXMuYm1heFswXSA9IHRoaXMuYm1pblswXSArIHRzOw0KICAgICAgICB0aGlzLmJtYXhbMl0gPSB0aGlzLmJtaW5bMl0gKyB0czsgLy8gRXhwYW5kIHRoZSBoZWlnaGZpZWxkIGJvdW5kaW5nIGJveCBieSBib3JkZXIgc2l6ZSB0byBmaW5kIHRoZSBleHRlbnRzIG9mIGdlb21ldHJ5IHdlIG5lZWQgdG8gYnVpbGQgdGhpcw0KICAgICAgICAvLyB0aWxlLg0KICAgICAgICAvLw0KICAgICAgICAvLyBUaGlzIGlzIGRvbmUgaW4gb3JkZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIG5hdm1lc2ggdGlsZXMgY29ubmVjdCBjb3JyZWN0bHkgYXQgdGhlIGJvcmRlcnMsDQogICAgICAgIC8vIGFuZCB0aGUgb2JzdGFjbGVzIGNsb3NlIHRvIHRoZSBib3JkZXIgd29yayBjb3JyZWN0bHkgd2l0aCB0aGUgZGlsYXRpb24gcHJvY2Vzcy4NCiAgICAgICAgLy8gTm8gcG9seWdvbnMgKG9yIGNvbnRvdXJzKSB3aWxsIGJlIGNyZWF0ZWQgb24gdGhlIGJvcmRlciBhcmVhLg0KICAgICAgICAvLw0KICAgICAgICAvLyBJTVBPUlRBTlQhDQogICAgICAgIC8vDQogICAgICAgIC8vIDonJycnJycnJyc6DQogICAgICAgIC8vIDogKy0tLS0tKyA6DQogICAgICAgIC8vIDogfCB8IDoNCiAgICAgICAgLy8gOiB8IHw8LS0tIHRpbGUgdG8gYnVpbGQNCiAgICAgICAgLy8gOiB8IHwgOg0KICAgICAgICAvLyA6ICstLS0tLSsgOjwtLSBnZW9tZXRyeSBuZWVkZWQNCiAgICAgICAgLy8gOi4uLi4uLi4uLjoNCiAgICAgICAgLy8NCiAgICAgICAgLy8gWW91IHNob3VsZCB1c2UgdGhpcyBib3VuZGluZyBib3ggdG8gcXVlcnkgeW91ciBpbnB1dCBnZW9tZXRyeS4NCiAgICAgICAgLy8NCiAgICAgICAgLy8gRm9yIGV4YW1wbGUgaWYgeW91IGJ1aWxkIGEgbmF2bWVzaCBmb3IgdGVycmFpbiwgYW5kIHdhbnQgdGhlIG5hdm1lc2ggdGlsZXMgdG8gbWF0Y2ggdGhlIHRlcnJhaW4gdGlsZSBzaXplDQogICAgICAgIC8vIHlvdSB3aWxsIG5lZWQgdG8gcGFzcyBpbiBkYXRhIGZyb20gbmVpZ2hib3VyIHRlcnJhaW4gdGlsZXMgdG9vISBJbiBhIHNpbXBsZSBjYXNlLCBqdXN0IHBhc3MgaW4gYWxsIHRoZSA4DQogICAgICAgIC8vIG5laWdoYm91cnMsDQogICAgICAgIC8vIG9yIHVzZSB0aGUgYm91bmRpbmcgYm94IGJlbG93IHRvIG9ubHkgcGFzcyBpbiBhIHNsaXZlciBvZiBlYWNoIG9mIHRoZSA4IG5laWdoYm91cnMuDQoNCiAgICAgICAgdGhpcy5ib3JkZXJTaXplID0gY2ZnLndhbGthYmxlUmFkaXVzICsgMzsgLy8gUmVzZXJ2ZSBlbm91Z2ggcGFkZGluZy4NCg0KICAgICAgICB0aGlzLmJtaW5bMF0gLT0gdGhpcy5ib3JkZXJTaXplICogY2ZnLmNzOw0KICAgICAgICB0aGlzLmJtaW5bMl0gLT0gdGhpcy5ib3JkZXJTaXplICogY2ZnLmNzOw0KICAgICAgICB0aGlzLmJtYXhbMF0gKz0gdGhpcy5ib3JkZXJTaXplICogY2ZnLmNzOw0KICAgICAgICB0aGlzLmJtYXhbMl0gKz0gdGhpcy5ib3JkZXJTaXplICogY2ZnLmNzOw0KICAgICAgICB0aGlzLndpZHRoID0gY2ZnLnRpbGVTaXplICsgdGhpcy5ib3JkZXJTaXplICogMjsNCiAgICAgICAgdGhpcy5oZWlnaHQgPSBjZmcudGlsZVNpemUgKyB0aGlzLmJvcmRlclNpemUgKiAyOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdmFyIHdoID0gUmVjYXN0LmNhbGNHcmlkU2l6ZSh0aGlzLmJtaW4sIHRoaXMuYm1heCwgY2ZnLmNzKTsNCiAgICAgICAgdGhpcy53aWR0aCA9IHdoWzBdOw0KICAgICAgICB0aGlzLmhlaWdodCA9IHdoWzFdOw0KICAgICAgICB0aGlzLmJvcmRlclNpemUgPSAwOw0KICAgICAgfSAvL0FEREVEOg0KDQoNCiAgICAgIHRoaXMud2lkdGggPSBNYXRoLmZsb29yKHRoaXMud2lkdGgpOw0KICAgICAgdGhpcy5oZWlnaHQgPSBNYXRoLmZsb29yKHRoaXMuaGVpZ2h0KTsNCiAgICB9Ow0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBDb250ZXh0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIENvbnRleHQoKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250ZXh0KTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKENvbnRleHQsIFt7DQogICAgICAgIGtleTogInN0YXJ0VGltZXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRUaW1lcihzdHJpbmcpIHsvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIG1ldGhvZCBzdHViDQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic3RvcFRpbWVyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3BUaW1lcihzdHJpbmcpIHsvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIG1ldGhvZCBzdHViDQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAid2FybiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB3YXJuKHN0cmluZykgew0KICAgICAgICAgIGNvbnNvbGUubG9nKHN0cmluZyk7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIENvbnRleHQ7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KDQogICAgLyoqIFJlcHJlc2VudHMgYSBoZWlnaHRmaWVsZCBsYXllciB3aXRoaW4gYSBsYXllciBzZXQuICovDQogICAgdmFyIEhlaWdodGZpZWxkID0NCiAgICAvKiogVGhlIHdpZHRoIG9mIHRoZSBoZWlnaHRmaWVsZC4gKEFQb2x5IHRoZSB4LWF4aXMgaW4gY2VsbCB1bml0cy4pICovDQoNCiAgICAvKiogVGhlIGhlaWdodCBvZiB0aGUgaGVpZ2h0ZmllbGQuIChBUG9seSB0aGUgei1heGlzIGluIGNlbGwgdW5pdHMuKSAqLw0KDQogICAgLyoqIFRoZSBtaW5pbXVtIGJvdW5kcyBpbiB3b3JsZCBzcGFjZS4gWyh4LCB5LCB6KV0gKi8NCg0KICAgIC8qKiBUaGUgbWF4aW11bSBib3VuZHMgaW4gd29ybGQgc3BhY2UuIFsoeCwgeSwgeildICovDQoNCiAgICAvKiogVGhlIHNpemUgb2YgZWFjaCBjZWxsLiAoT24gdGhlIHh6LXBsYW5lLikgKi8NCg0KICAgIC8qKiBUaGUgaGVpZ2h0IG9mIGVhY2ggY2VsbC4gKFRoZSBtaW5pbXVtIGluY3JlbWVudCBhUG9seSB0aGUgeS1heGlzLikgKi8NCg0KICAgIC8qKiBIZWlnaHRmaWVsZCBvZiBzcGFucyAod2lkdGgqaGVpZ2h0KS4gKi8NCiAgICBmdW5jdGlvbiBIZWlnaHRmaWVsZCh3aWR0aCwgaGVpZ2h0LCBibWluLCBibWF4LCBjcywgY2gpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIZWlnaHRmaWVsZCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2lkdGgiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoZWlnaHQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWF4Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjcyIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY2giLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNwYW5zIiwgW10pOw0KDQogICAgICB0aGlzLndpZHRoID0gd2lkdGg7DQogICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsNCiAgICAgIHRoaXMuYm1pbiA9IGJtaW47DQogICAgICB0aGlzLmJtYXggPSBibWF4Ow0KICAgICAgdGhpcy5jcyA9IGNzOw0KICAgICAgdGhpcy5jaCA9IGNoOw0KICAgICAgdGhpcy5zcGFucyA9IG5ldyBBcnJheSh3aWR0aCAqIGhlaWdodCk7DQogICAgfTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiBSZXByZXNlbnRzIGEgc3BhbiBpbiBhIGhlaWdodGZpZWxkLiAqLw0KICAgIHZhciBTcGFuID0gZnVuY3Rpb24gU3BhbigpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTcGFuKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzbWluIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic21heCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFyZWEiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZXh0IiwgbnVsbCk7DQogICAgfTsNCg0KICAgIHZhciBSZWNhc3RSYXN0ZXJpemF0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFJlY2FzdFJhc3Rlcml6YXRpb24oKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RSYXN0ZXJpemF0aW9uKTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKFJlY2FzdFJhc3Rlcml6YXRpb24sIG51bGwsIFt7DQogICAgICAgIGtleTogIm92ZXJsYXBCb3VuZHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb3ZlcmxhcEJvdW5kcyhhbWluLCBhbWF4LCBibWluLCBibWF4KSB7DQogICAgICAgICAgdmFyIG92ZXJsYXAgPSB0cnVlOw0KICAgICAgICAgIG92ZXJsYXAgPSBhbWluWzBdID4gYm1heFswXSB8fCBhbWF4WzBdIDwgYm1pblswXSA/IGZhbHNlIDogb3ZlcmxhcDsNCiAgICAgICAgICBvdmVybGFwID0gYW1pblsxXSA+IGJtYXhbMV0gfHwgYW1heFsxXSA8IGJtaW5bMV0gPyBmYWxzZSA6IG92ZXJsYXA7DQogICAgICAgICAgb3ZlcmxhcCA9IGFtaW5bMl0gPiBibWF4WzJdIHx8IGFtYXhbMl0gPCBibWluWzJdID8gZmFsc2UgOiBvdmVybGFwOw0KICAgICAgICAgIHJldHVybiBvdmVybGFwOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaGUgc3BhbiBhZGRpdGlvbiBjYW4gYmUgc2V0IHRvIGZhdm9yIGZsYWdzLiBJZiB0aGUgc3BhbiBpcyBtZXJnZWQgdG8gYW5vdGhlciBzcGFuIGFuZCB0aGUgbmV3ICdzbWF4JyBpcw0KICAgICAgICAgKiB3aXRoaW4gJ2ZsYWdNZXJnZVRocicgdW5pdHMgZnJvbSB0aGUgZXhpc3Rpbmcgc3BhbiwgdGhlIHNwYW4gZmxhZ3MgYXJlIG1lcmdlZC4NCiAgICAgICAgICogDQogICAgICAgICAqIEBzZWUgSGVpZ2h0ZmllbGQsIFNwYW4uDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZFNwYW4iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU3BhbihoZiwgeCwgeSwgc21pbiwgc21heCwgYXJlYSwgZmxhZ01lcmdlVGhyKSB7DQogICAgICAgICAgdmFyIGlkeCA9IHggKyB5ICogaGYud2lkdGg7DQogICAgICAgICAgdmFyIHMgPSBuZXcgU3BhbigpOw0KICAgICAgICAgIHMuc21pbiA9IHNtaW47DQogICAgICAgICAgcy5zbWF4ID0gc21heDsNCiAgICAgICAgICBzLmFyZWEgPSBhcmVhOw0KICAgICAgICAgIHMubmV4dCA9IG51bGw7IC8vIEVtcHR5IGNlbGwsIGFkZCB0aGUgZmlyc3Qgc3Bhbi4NCg0KICAgICAgICAgIGlmIChoZi5zcGFuc1tpZHhdID09IG51bGwpIHsNCiAgICAgICAgICAgIGhmLnNwYW5zW2lkeF0gPSBzOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBwcmV2ID0gbnVsbDsNCiAgICAgICAgICB2YXIgY3VyID0gaGYuc3BhbnNbaWR4XTsgLy8gSW5zZXJ0IGFuZCBtZXJnZSBzcGFucy4NCg0KICAgICAgICAgIHdoaWxlIChjdXIgIT0gbnVsbCkgew0KICAgICAgICAgICAgaWYgKGN1ci5zbWluID4gcy5zbWF4KSB7DQogICAgICAgICAgICAgIC8vIEN1cnJlbnQgc3BhbiBpcyBmdXJ0aGVyIHRoYW4gdGhlIG5ldyBzcGFuLCBicmVhay4NCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGN1ci5zbWF4IDwgcy5zbWluKSB7DQogICAgICAgICAgICAgIC8vIEN1cnJlbnQgc3BhbiBpcyBiZWZvcmUgdGhlIG5ldyBzcGFuIGFkdmFuY2UuDQogICAgICAgICAgICAgIHByZXYgPSBjdXI7DQogICAgICAgICAgICAgIGN1ciA9IGN1ci5uZXh0Ow0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgLy8gTWVyZ2Ugc3BhbnMuDQogICAgICAgICAgICAgIGlmIChjdXIuc21pbiA8IHMuc21pbikgcy5zbWluID0gY3VyLnNtaW47DQogICAgICAgICAgICAgIGlmIChjdXIuc21heCA+IHMuc21heCkgcy5zbWF4ID0gY3VyLnNtYXg7IC8vIE1lcmdlIGZsYWdzLg0KDQogICAgICAgICAgICAgIGlmIChNYXRoLmFicyhzLnNtYXggLSBjdXIuc21heCkgPD0gZmxhZ01lcmdlVGhyKSBzLmFyZWEgPSBNYXRoLm1heChzLmFyZWEsIGN1ci5hcmVhKTsgLy8gUmVtb3ZlIGN1cnJlbnQgc3Bhbi4NCg0KICAgICAgICAgICAgICB2YXIgbmV4dCA9IGN1ci5uZXh0Ow0KICAgICAgICAgICAgICBpZiAocHJldiAhPSBudWxsKSBwcmV2Lm5leHQgPSBuZXh0O2Vsc2UgaGYuc3BhbnNbaWR4XSA9IG5leHQ7DQogICAgICAgICAgICAgIGN1ciA9IG5leHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBJbnNlcnQgbmV3IHNwYW4uDQoNCg0KICAgICAgICAgIGlmIChwcmV2ICE9IG51bGwpIHsNCiAgICAgICAgICAgIHMubmV4dCA9IHByZXYubmV4dDsNCiAgICAgICAgICAgIHByZXYubmV4dCA9IHM7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHMubmV4dCA9IGhmLnNwYW5zW2lkeF07DQogICAgICAgICAgICBoZi5zcGFuc1tpZHhdID0gczsNCiAgICAgICAgICB9DQogICAgICAgIH0gLy9kaXZpZGVzIGEgY29udmV4IHBvbHlnb25zIGludG8gdHdvIGNvbnZleCBwb2x5Z29ucyBvbiBib3RoIHNpZGVzIG9mIGEgbGluZQ0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImRpdmlkZVBvbHkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGl2aWRlUG9seShidWYsIF9pbiwgbmluLCBvdXQxLCBvdXQyLCB4LCBheGlzKSB7DQogICAgICAgICAgdmFyIGQgPSBuZXcgQXJyYXkoMTIpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuaW47ICsraSkgew0KICAgICAgICAgICAgZFtpXSA9IHggLSBidWZbX2luICsgaSAqIDMgKyBheGlzXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgbSA9IDAsDQogICAgICAgICAgICAgIG4gPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBqID0gbmluIC0gMTsgX2kgPCBuaW47IGogPSBfaSwgKytfaSkgew0KICAgICAgICAgICAgdmFyIGluYSA9IGRbal0gPj0gMDsNCiAgICAgICAgICAgIHZhciBpbmIgPSBkW19pXSA+PSAwOw0KDQogICAgICAgICAgICBpZiAoaW5hICE9IGluYikgew0KICAgICAgICAgICAgICB2YXIgcyA9IGRbal0gLyAoZFtqXSAtIGRbX2ldKTsNCiAgICAgICAgICAgICAgYnVmW291dDEgKyBtICogMyArIDBdID0gYnVmW19pbiArIGogKiAzICsgMF0gKyAoYnVmW19pbiArIF9pICogMyArIDBdIC0gYnVmW19pbiArIGogKiAzICsgMF0pICogczsNCiAgICAgICAgICAgICAgYnVmW291dDEgKyBtICogMyArIDFdID0gYnVmW19pbiArIGogKiAzICsgMV0gKyAoYnVmW19pbiArIF9pICogMyArIDFdIC0gYnVmW19pbiArIGogKiAzICsgMV0pICogczsNCiAgICAgICAgICAgICAgYnVmW291dDEgKyBtICogMyArIDJdID0gYnVmW19pbiArIGogKiAzICsgMl0gKyAoYnVmW19pbiArIF9pICogMyArIDJdIC0gYnVmW19pbiArIGogKiAzICsgMl0pICogczsNCiAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1Ziwgb3V0MiArIG4gKiAzLCBidWYsIG91dDEgKyBtICogMyk7DQogICAgICAgICAgICAgIG0rKzsNCiAgICAgICAgICAgICAgbisrOyAvLyBhZGQgdGhlIGkndGggcG9Qb2x5IHRvIHRoZSByaWdodCBwb2x5Z29uLiBEbyBOT1QgYWRkIHBvaW50cyB0aGF0IGFyZSBvbiB0aGUgZGl2aWRpbmcgbGluZQ0KICAgICAgICAgICAgICAvLyBzaW5jZSB0aGVzZSB3ZXJlIGFscmVhZHkgYWRkZWQgYWJvdmUNCg0KICAgICAgICAgICAgICBpZiAoZFtfaV0gPiAwKSB7DQogICAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1Ziwgb3V0MSArIG0gKiAzLCBidWYsIF9pbiArIF9pICogMyk7DQogICAgICAgICAgICAgICAgbSsrOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRbX2ldIDwgMCkgew0KICAgICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5NChidWYsIG91dDIgKyBuICogMywgYnVmLCBfaW4gKyBfaSAqIDMpOw0KICAgICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIC8vIHNhbWUgc2lkZQ0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBpJ3RoIHBvUG9seSB0byB0aGUgcmlnaHQgcG9seWdvbi4gQWRkaXRpb24gaXMgZG9uZSBldmVuIGZvciBwb2ludHMgb24gdGhlIGRpdmlkaW5nIGxpbmUNCiAgICAgICAgICAgICAgICBpZiAoZFtfaV0gPj0gMCkgew0KICAgICAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1Ziwgb3V0MSArIG0gKiAzLCBidWYsIF9pbiArIF9pICogMyk7DQogICAgICAgICAgICAgICAgICBtKys7DQogICAgICAgICAgICAgICAgICBpZiAoZFtfaV0gIT0gMCkgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1Ziwgb3V0MiArIG4gKiAzLCBidWYsIF9pbiArIF9pICogMyk7DQogICAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIFttLCBuXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyYXN0ZXJpemVUcmkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmFzdGVyaXplVHJpKHZlcnRzLCB2MCwgdjEsIHYyLCBhcmVhLCBoZiwgYm1pbiwgYm1heCwgY3MsIGljcywgaWNoLCBmbGFnTWVyZ2VUaHIpIHsNCiAgICAgICAgICB2YXIgdyA9IGhmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gaGYuaGVpZ2h0Ow0KICAgICAgICAgIHZhciB0bWluID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIHZhciB0bWF4ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIHZhciBieSA9IGJtYXhbMV0gLSBibWluWzFdOyAvLyBDYWxjdWxhdGUgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgdHJpYW5nbGUuDQoNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTModG1pbiwgdmVydHMsIHYwICogMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkzKHRtYXgsIHZlcnRzLCB2MCAqIDMpOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5taW4odG1pbiwgdmVydHMsIHYxICogMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1pbih0bWluLCB2ZXJ0cywgdjIgKiAzKTsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEubWF4KHRtYXgsIHZlcnRzLCB2MSAqIDMpOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5tYXgodG1heCwgdmVydHMsIHYyICogMyk7IC8vIElmIHRoZSB0cmlhbmdsZSBkb2VzIG5vdCB0b3VjaCB0aGUgYmJveCBvZiB0aGUgaGVpZ2h0ZmllbGQsIHNraXAgdGhlIHRyaWFnbGUuDQoNCiAgICAgICAgICBpZiAoIVJlY2FzdFJhc3Rlcml6YXRpb24ub3ZlcmxhcEJvdW5kcyhibWluLCBibWF4LCB0bWluLCB0bWF4KSkgcmV0dXJuOyAvLyBDYWxjdWxhdGUgdGhlIGZvb3RwclBvbHkgb2YgdGhlIHRyaWFuZ2xlIG9uIHRoZSBncmlkJ3MgeS1heGlzDQoNCiAgICAgICAgICB2YXIgeTAgPSBNYXRoLmZsb29yKCh0bWluWzJdIC0gYm1pblsyXSkgKiBpY3MpOw0KICAgICAgICAgIHZhciB5MSA9IE1hdGguZmxvb3IoKHRtYXhbMl0gLSBibWluWzJdKSAqIGljcyk7DQogICAgICAgICAgeTAgPSBSZWNhc3RDb21tb24uY2xhbXAoeTAsIDAsIGggLSAxKTsNCiAgICAgICAgICB5MSA9IFJlY2FzdENvbW1vbi5jbGFtcCh5MSwgMCwgaCAtIDEpOyAvLyBDbGlwIHRoZSB0cmlhbmdsZSBpbnRvIGFsbCBncmlkIGNlbGxzIGl0IHRvdWNoZXMuDQoNCiAgICAgICAgICB2YXIgYnVmID0gbmV3IEFycmF5KDcgKiAzICogNCkuZmlsbCgwKTsNCiAgICAgICAgICB2YXIgX2luID0gMDsNCiAgICAgICAgICB2YXIgaW5yb3cgPSA3ICogMzsNCiAgICAgICAgICB2YXIgcDEgPSBpbnJvdyArIDcgKiAzOw0KICAgICAgICAgIHZhciBwMiA9IHAxICsgNyAqIDM7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1ZiwgMCwgdmVydHMsIHYwICogMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1ZiwgMywgdmVydHMsIHYxICogMyk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1ZiwgNiwgdmVydHMsIHYyICogMyk7DQogICAgICAgICAgdmFyIG52cm93LA0KICAgICAgICAgICAgICBudkluID0gMzsNCg0KICAgICAgICAgIGZvciAodmFyIHkgPSB5MDsgeSA8PSB5MTsgKyt5KSB7DQogICAgICAgICAgICAvLyBDbGlwIHBvbHlnb24gdG8gcm93LiBTdG9yZSB0aGUgcmVtYWluaW5nIHBvbHlnb24gYXMgd2VsbA0KICAgICAgICAgICAgdmFyIGN6ID0gYm1pblsyXSArIHkgKiBjczsNCiAgICAgICAgICAgIHZhciBudnJvd2luID0gUmVjYXN0UmFzdGVyaXphdGlvbi5kaXZpZGVQb2x5KGJ1ZiwgX2luLCBudkluLCBpbnJvdywgcDEsIGN6ICsgY3MsIDIpOw0KICAgICAgICAgICAgbnZyb3cgPSBudnJvd2luWzBdOw0KICAgICAgICAgICAgbnZJbiA9IG52cm93aW5bMV07DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHZhciB0ZW1wID0gX2luOw0KICAgICAgICAgICAgICBfaW4gPSBwMTsNCiAgICAgICAgICAgICAgcDEgPSB0ZW1wOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKG52cm93IDwgMykgY29udGludWU7IC8vIGZpbmQgdGhlIGhvcml6b250YWwgYm91bmRzIF9pbiB0aGUgcm93DQoNCiAgICAgICAgICAgIHZhciBtaW5YID0gYnVmW2lucm93XTsNCiAgICAgICAgICAgIHZhciBtYXhYID0gYnVmW2lucm93XTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBudnJvdzsgKytpKSB7DQogICAgICAgICAgICAgIGlmIChtaW5YID4gYnVmW2lucm93ICsgaSAqIDNdKSBtaW5YID0gYnVmW2lucm93ICsgaSAqIDNdOw0KICAgICAgICAgICAgICBpZiAobWF4WCA8IGJ1ZltpbnJvdyArIGkgKiAzXSkgbWF4WCA9IGJ1ZltpbnJvdyArIGkgKiAzXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHgwID0gTWF0aC5mbG9vcigobWluWCAtIGJtaW5bMF0pICogaWNzKTsNCiAgICAgICAgICAgIHZhciB4MSA9IE1hdGguZmxvb3IoKG1heFggLSBibWluWzBdKSAqIGljcyk7DQogICAgICAgICAgICB4MCA9IFJlY2FzdENvbW1vbi5jbGFtcCh4MCwgMCwgdyAtIDEpOw0KICAgICAgICAgICAgeDEgPSBSZWNhc3RDb21tb24uY2xhbXAoeDEsIDAsIHcgLSAxKTsNCiAgICAgICAgICAgIHZhciBudiA9IHZvaWQgMCwNCiAgICAgICAgICAgICAgICBudjIgPSBudnJvdzsNCg0KICAgICAgICAgICAgZm9yICh2YXIgeCA9IHgwOyB4IDw9IHgxOyArK3gpIHsNCiAgICAgICAgICAgICAgLy8gQ2xpcCBwb2x5Z29uIHRvIGNvbHVtbi4gc3RvcmUgdGhlIHJlbWFpbmluZyBwb2x5Z29uIGFzIHdlbGwNCiAgICAgICAgICAgICAgdmFyIGN4ID0gYm1pblswXSArIHggKiBjczsNCiAgICAgICAgICAgICAgdmFyIG52bnYyID0gUmVjYXN0UmFzdGVyaXphdGlvbi5kaXZpZGVQb2x5KGJ1ZiwgaW5yb3csIG52MiwgcDEsIHAyLCBjeCArIGNzLCAwKTsNCiAgICAgICAgICAgICAgbnYgPSBudm52MlswXTsNCiAgICAgICAgICAgICAgbnYyID0gbnZudjJbMV07DQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgX3RlbXAgPSBpbnJvdzsNCiAgICAgICAgICAgICAgICBpbnJvdyA9IHAyOw0KICAgICAgICAgICAgICAgIHAyID0gX3RlbXA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKG52IDwgMykgY29udGludWU7IC8vIENhbGN1bGF0ZSBtaW4gYW5kIG1heCBvZiB0aGUgc3Bhbi4NCg0KICAgICAgICAgICAgICB2YXIgc21pbiA9IGJ1ZltwMSArIDFdOw0KICAgICAgICAgICAgICB2YXIgc21heCA9IGJ1ZltwMSArIDFdOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pMiA9IDE7IF9pMiA8IG52OyArK19pMikgew0KICAgICAgICAgICAgICAgIHNtaW4gPSBNYXRoLm1pbihzbWluLCBidWZbcDEgKyBfaTIgKiAzICsgMV0pOw0KICAgICAgICAgICAgICAgIHNtYXggPSBNYXRoLm1heChzbWF4LCBidWZbcDEgKyBfaTIgKiAzICsgMV0pOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgc21pbiAtPSBibWluWzFdOw0KICAgICAgICAgICAgICBzbWF4IC09IGJtaW5bMV07IC8vIFNraXAgdGhlIHNwYW4gaWYgaXQgaXMgb3V0c2lkZSB0aGUgaGVpZ2h0ZmllbGQgYmJveA0KDQogICAgICAgICAgICAgIGlmIChzbWF4IDwgMC4wKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgaWYgKHNtaW4gPiBieSkgY29udGludWU7IC8vIENsYW1wIHRoZSBzcGFuIHRvIHRoZSBoZWlnaHRmaWVsZCBiYm94Lg0KDQogICAgICAgICAgICAgIGlmIChzbWluIDwgMC4wKSBzbWluID0gMDsNCiAgICAgICAgICAgICAgaWYgKHNtYXggPiBieSkgc21heCA9IGJ5OyAvLyBTbmFwIHRoZSBzcGFuIHRvIHRoZSBoZWlnaHRmaWVsZCBoZWlnaHQgZ3JpZC4NCg0KICAgICAgICAgICAgICB2YXIgaXNtaW4gPSBSZWNhc3RDb21tb24uY2xhbXAoTWF0aC5mbG9vcihzbWluICogaWNoKSwgMCwgUmVjYXN0Q29uc3RhbnRzLlJDX1NQQU5fTUFYX0hFSUdIVCk7DQogICAgICAgICAgICAgIHZhciBpc21heCA9IFJlY2FzdENvbW1vbi5jbGFtcChNYXRoLmNlaWwoc21heCAqIGljaCksIGlzbWluICsgMSwgUmVjYXN0Q29uc3RhbnRzLlJDX1NQQU5fTUFYX0hFSUdIVCk7DQogICAgICAgICAgICAgIFJlY2FzdFJhc3Rlcml6YXRpb24uYWRkU3BhbihoZiwgeCwgeSwgaXNtaW4sIGlzbWF4LCBhcmVhLCBmbGFnTWVyZ2VUaHIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogTm8gc3BhbnMgd2lsbCBiZSBhZGRlZCBpZiB0aGUgdHJpYW5nbGUgZG9lcyBub3Qgb3ZlcmxhcCB0aGUgaGVpZ2h0ZmllbGQgZ3JpZC4NCiAgICAgICAgICogDQogICAgICAgICAqIEBzZWUgSGVpZ2h0ZmllbGQNCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmFzdGVyaXplVHJpYW5nbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmFzdGVyaXplVHJpYW5nbGUoY3R4LCB2ZXJ0cywgdjAsIHYxLCB2MiwgYXJlYSwgc29saWQsIGZsYWdNZXJnZVRocikgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJSQVNURVJJWkVfVFJJQU5HTEVTIik7DQogICAgICAgICAgaWNzID0gMS4wIC8gc29saWQuY3M7DQogICAgICAgICAgaWNoID0gMS4wIC8gc29saWQuY2g7DQogICAgICAgICAgcmFzdGVyaXplVHJpKHZlcnRzLCB2MCwgdjEsIHYyLCBhcmVhLCBzb2xpZCwgc29saWQuYm1pbiwgc29saWQuYm1heCwgc29saWQuY3MsIGljcywgaWNoLCBmbGFnTWVyZ2VUaHIpOw0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIlJBU1RFUklaRV9UUklBTkdMRVMiKTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogU3BhbnMgd2lsbCBvbmx5IGJlIGFkZGVkIGZvciB0cmlhbmdsZXMgdGhhdCBvdmVybGFwIHRoZSBoZWlnaHRmaWVsZCBncmlkLg0KICAgICAgICAgKiANCiAgICAgICAgICogQHNlZSBIZWlnaHRmaWVsZA0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyYXN0ZXJpemVUcmlhbmdsZXNBIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJhc3Rlcml6ZVRyaWFuZ2xlc0EoY3R4LCB2ZXJ0cywgdHJpcywgYXJlYXMsIG50LCBzb2xpZCwgZmxhZ01lcmdlVGhyKSB7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIlJBU1RFUklaRV9UUklBTkdMRVMiKTsNCiAgICAgICAgICB2YXIgaWNzID0gMS4wIC8gc29saWQuY3M7DQogICAgICAgICAgdmFyIGljaCA9IDEuMCAvIHNvbGlkLmNoOyAvLyBSYXN0ZXJpemUgdHJpYW5nbGVzLg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudDsgKytpKSB7DQogICAgICAgICAgICB2YXIgdjAgPSB0cmlzW2kgKiAzICsgMF07DQogICAgICAgICAgICB2YXIgdjEgPSB0cmlzW2kgKiAzICsgMV07DQogICAgICAgICAgICB2YXIgdjIgPSB0cmlzW2kgKiAzICsgMl07IC8vIFJhc3Rlcml6ZS4NCg0KICAgICAgICAgICAgUmVjYXN0UmFzdGVyaXphdGlvbi5yYXN0ZXJpemVUcmkodmVydHMsIHYwLCB2MSwgdjIsIGFyZWFzW2ldLCBzb2xpZCwgc29saWQuYm1pbiwgc29saWQuYm1heCwgc29saWQuY3MsIGljcywgaWNoLCBmbGFnTWVyZ2VUaHIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIlJBU1RFUklaRV9UUklBTkdMRVMiKTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogU3BhbnMgd2lsbCBvbmx5IGJlIGFkZGVkIGZvciB0cmlhbmdsZXMgdGhhdCBvdmVybGFwIHRoZSBoZWlnaHRmaWVsZCBncmlkLg0KICAgICAgICAgKiANCiAgICAgICAgICogQHNlZSBIZWlnaHRmaWVsZA0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyYXN0ZXJpemVUcmlhbmdsZXNCIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJhc3Rlcml6ZVRyaWFuZ2xlc0IoY3R4LCB2ZXJ0cywgYXJlYXMsIG50LCBzb2xpZCwgZmxhZ01lcmdlVGhyKSB7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIlJBU1RFUklaRV9UUklBTkdMRVMiKTsNCiAgICAgICAgICB2YXIgaWNzID0gMS4wIC8gc29saWQuY3M7DQogICAgICAgICAgdmFyIGljaCA9IDEuMCAvIHNvbGlkLmNoOyAvLyBSYXN0ZXJpemUgdHJpYW5nbGVzLg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudDsgKytpKSB7DQogICAgICAgICAgICB2YXIgdjAgPSBpICogMyArIDA7DQogICAgICAgICAgICB2YXIgdjEgPSBpICogMyArIDE7DQogICAgICAgICAgICB2YXIgdjIgPSBpICogMyArIDI7IC8vIFJhc3Rlcml6ZS4NCg0KICAgICAgICAgICAgUmVjYXN0UmFzdGVyaXphdGlvbi5yYXN0ZXJpemVUcmkodmVydHMsIHYwLCB2MSwgdjIsIGFyZWFzW2ldLCBzb2xpZCwgc29saWQuYm1pbiwgc29saWQuYm1heCwgc29saWQuY3MsIGljcywgaWNoLCBmbGFnTWVyZ2VUaHIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIlJBU1RFUklaRV9UUklBTkdMRVMiKTsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gUmVjYXN0UmFzdGVyaXphdGlvbjsNCiAgICB9KCk7DQoNCiAgICB2YXIgUmVjYXN0RmlsdGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFJlY2FzdEZpbHRlcigpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdEZpbHRlcik7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RGaWx0ZXIsIG51bGwsIFt7DQogICAgICAgIGtleTogImZpbHRlckxvd0hhbmdpbmdXYWxrYWJsZU9ic3RhY2xlcyIsDQogICAgICAgIC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQWxsb3dzIHRoZSBmb3JtYXRpb24gb2Ygd2Fsa2FibGUgcmVnaW9ucyB0aGF0IHdpbGwgZmxvdyBvdmVyIGxvdyBseWluZyANCiAgICAgICAgLy8vIG9iamVjdHMgc3VjaCBhcyBjdXJicywgYW5kIHVwIHN0cnVjdHVyZXMgc3VjaCBhcyBzdGFpcndheXMuIA0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBUd28gbmVpZ2hib3Jpbmcgc3BhbnMgYXJlIHdhbGthYmxlIGlmOiA8dHQ+cmNBYnMoY3VycmVudFNwYW4uc21heCAtIG5laWdoYm9yU3Bhbi5zbWF4KSA8IHdha2xhYmxlQ2xpbWI8L3R0Pg0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBAd2FybmluZyBXaWxsIG92ZXJyaWRlIHRoZSBlZmZlY3Qgb2YgI3JjRmlsdGVyTGVkZ2VTcGFucy4gIFNvIGlmIGJvdGggZmlsdGVycyBhcmUgdXNlZCwgY2FsbA0KICAgICAgICAvLy8gI3JjRmlsdGVyTGVkZ2VTcGFucyBhZnRlciBjYWxsaW5nIHRoaXMgZmlsdGVyLiANCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAc2VlIHJjSGVpZ2h0ZmllbGQsIHJjQ29uZmlnDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJMb3dIYW5naW5nV2Fsa2FibGVPYnN0YWNsZXMoY3R4LCB3YWxrYWJsZUNsaW1iLCBzb2xpZCkgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJGSUxURVJfTE9XX09CU1RBQ0xFUyIpOw0KICAgICAgICAgIHZhciB3ID0gc29saWQud2lkdGg7DQogICAgICAgICAgdmFyIGggPSBzb2xpZC5oZWlnaHQ7DQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkgew0KICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIHBzID0gbnVsbDsNCiAgICAgICAgICAgICAgdmFyIHByZXZpb3VzV2Fsa2FibGUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgdmFyIHByZXZpb3VzQXJlYSA9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUE7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IHNvbGlkLnNwYW5zW3ggKyB5ICogd107IHMgIT0gbnVsbDsgcHMgPSBzLCBzID0gcy5uZXh0KSB7DQogICAgICAgICAgICAgICAgdmFyIHdhbGthYmxlID0gcy5hcmVhICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUE7IC8vIElmIGN1cnJlbnQgc3BhbiBpcyBub3Qgd2Fsa2FibGUsIGJ1dCB0aGVyZSBpcyB3YWxrYWJsZQ0KICAgICAgICAgICAgICAgIC8vIHNwYW4ganVzdCBiZWxvdyBpdCwgbWFyayB0aGUgc3BhbiBhYm92ZSBpdCB3YWxrYWJsZSB0b28uDQoNCiAgICAgICAgICAgICAgICBpZiAoIXdhbGthYmxlICYmIHByZXZpb3VzV2Fsa2FibGUpIHsNCiAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhzLnNtYXggLSBwcy5zbWF4KSA8PSB3YWxrYWJsZUNsaW1iKSBzLmFyZWEgPSBwcmV2aW91c0FyZWE7DQogICAgICAgICAgICAgICAgfSAvLyBDb3B5IHdhbGthYmxlIGZsYWcgc28gdGhhdCBpdCBjYW5ub3QgcHJvcGFnYXRlDQogICAgICAgICAgICAgICAgLy8gcGFzdCBtdWx0aXBsZSBub24td2Fsa2FibGUgb2JqZWN0cy4NCg0KDQogICAgICAgICAgICAgICAgcHJldmlvdXNXYWxrYWJsZSA9IHdhbGthYmxlOw0KICAgICAgICAgICAgICAgIHByZXZpb3VzQXJlYSA9IHMuYXJlYTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkZJTFRFUl9MT1dfT0JTVEFDTEVTIik7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBBIGxlZGdlIGlzIGEgc3BhbiB3aXRoIG9uZSBvciBtb3JlIG5laWdoYm9ycyB3aG9zZSBtYXhpbXVtIGlzIGZ1cnRoZXIgYXdheSB0aGFuIEBwIHdhbGthYmxlQ2xpbWINCiAgICAgICAgLy8vIGZyb20gdGhlIGN1cnJlbnQgc3BhbidzIG1heGltdW0uDQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCByZW1vdmVzIHRoZSBpbXBhY3Qgb2YgdGhlIG92ZXJlc3RpbWF0aW9uIG9mIGNvbnNlcnZhdGl2ZSB2b3hlbGl6YXRpb24gDQogICAgICAgIC8vLyBzbyB0aGUgcmVzdWx0aW5nIG1lc2ggd2lsbCBub3QgaGF2ZSByZWdpb25zIGhhbmdpbmcgaW4gdGhlIGFpciBvdmVyIGxlZGdlcy4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gQSBzcGFuIGlzIGEgbGVkZ2UgaWY6IDx0dD5yY0FicyhjdXJyZW50U3Bhbi5zbWF4IC0gbmVpZ2hib3JTcGFuLnNtYXgpID4gd2Fsa2FibGVDbGltYjwvdHQ+DQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIEBzZWUgcmNIZWlnaHRmaWVsZCwgcmNDb25maWcNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJmaWx0ZXJMZWRnZVNwYW5zIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlckxlZGdlU3BhbnMoY3R4LCB3YWxrYWJsZUhlaWdodCwgd2Fsa2FibGVDbGltYiwgc29saWQpIHsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiRklMVEVSX0JPUkRFUiIpOw0KICAgICAgICAgIHZhciB3ID0gc29saWQud2lkdGg7DQogICAgICAgICAgdmFyIGggPSBzb2xpZC5oZWlnaHQ7DQogICAgICAgICAgdmFyIE1BWF9IRUlHSFQgPSAweGZmZjsgLy8gTWFyayBib3JkZXIgc3BhbnMuDQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkgew0KICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHsNCiAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IHNvbGlkLnNwYW5zW3ggKyB5ICogd107IHMgIT0gbnVsbDsgcyA9IHMubmV4dCkgew0KICAgICAgICAgICAgICAgIC8vIFNraXAgbm9uIHdhbGthYmxlIHNwYW5zLg0KICAgICAgICAgICAgICAgIGlmIChzLmFyZWEgPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgY29udGludWU7DQogICAgICAgICAgICAgICAgdmFyIGJvdCA9IHMuc21heDsNCiAgICAgICAgICAgICAgICB2YXIgdG9wID0gcy5uZXh0ICE9IG51bGwgPyBzLm5leHQuc21pbiA6IE1BWF9IRUlHSFQ7IC8vIEZpbmQgbmVpZ2hib3VycyBtaW5pbXVtIGhlaWdodC4NCg0KICAgICAgICAgICAgICAgIHZhciBtaW5oID0gTUFYX0hFSUdIVDsgLy8gTWluIGFuZCBtYXggaGVpZ2h0IG9mIGFjY2Vzc2libGUgbmVpZ2hib3Vycy4NCg0KICAgICAgICAgICAgICAgIHZhciBhc21pbiA9IHMuc21heDsNCiAgICAgICAgICAgICAgICB2YXIgYXNtYXggPSBzLnNtYXg7DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgICAgdmFyIGR4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7DQogICAgICAgICAgICAgICAgICB2YXIgZHkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsgLy8gU2tpcCBuZWlnaGJvdXJzIHdoaWNoIGFyZSBvdXQgb2YgYm91bmRzLg0KDQogICAgICAgICAgICAgICAgICBpZiAoZHggPCAwIHx8IGR5IDwgMCB8fCBkeCA+PSB3IHx8IGR5ID49IGgpIHsNCiAgICAgICAgICAgICAgICAgICAgbWluaCA9IE1hdGgubWluKG1pbmgsIC13YWxrYWJsZUNsaW1iIC0gYm90KTsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICB9IC8vIEZyb20gbWludXMgaW5maW5pdHkgdG8gdGhlIGZpcnN0IHNwYW4uDQoNCg0KICAgICAgICAgICAgICAgICAgdmFyIG5zID0gc29saWQuc3BhbnNbZHggKyBkeSAqIHddOw0KICAgICAgICAgICAgICAgICAgdmFyIG5ib3QgPSAtd2Fsa2FibGVDbGltYjsNCiAgICAgICAgICAgICAgICAgIHZhciBudG9wID0gbnMgIT0gbnVsbCA/IG5zLnNtaW4gOiBNQVhfSEVJR0hUOyAvLyBTa2lwIG5laWdodGJvdXIgaWYgdGhlIGdhcCBiZXR3ZWVuIHRoZSBzcGFucyBpcyB0b28gc21hbGwuDQoNCiAgICAgICAgICAgICAgICAgIGlmIChNYXRoLm1pbih0b3AsIG50b3ApIC0gTWF0aC5tYXgoYm90LCBuYm90KSA+IHdhbGthYmxlSGVpZ2h0KSBtaW5oID0gTWF0aC5taW4obWluaCwgbmJvdCAtIGJvdCk7IC8vIFJlc3Qgb2YgdGhlIHNwYW5zLg0KDQogICAgICAgICAgICAgICAgICBmb3IgKHZhciBfbnMgPSBzb2xpZC5zcGFuc1tkeCArIGR5ICogd107IF9ucyAhPSBudWxsOyBfbnMgPSBfbnMubmV4dCkgew0KICAgICAgICAgICAgICAgICAgICBuYm90ID0gX25zLnNtYXg7DQogICAgICAgICAgICAgICAgICAgIG50b3AgPSBfbnMubmV4dCAhPSBudWxsID8gX25zLm5leHQuc21pbiA6IE1BWF9IRUlHSFQ7IC8vIFNraXAgbmVpZ2h0Ym91ciBpZiB0aGUgZ2FwIGJldHdlZW4gdGhlIHNwYW5zIGlzIHRvbyBzbWFsbC4NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5taW4odG9wLCBudG9wKSAtIE1hdGgubWF4KGJvdCwgbmJvdCkgPiB3YWxrYWJsZUhlaWdodCkgew0KICAgICAgICAgICAgICAgICAgICAgIG1pbmggPSBNYXRoLm1pbihtaW5oLCBuYm90IC0gYm90KTsgLy8gRmluZCBtaW4vbWF4IGFjY2Vzc2libGUgbmVpZ2hib3VyIGhlaWdodC4gDQoNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobmJvdCAtIGJvdCkgPD0gd2Fsa2FibGVDbGltYikgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ib3QgPCBhc21pbikgYXNtaW4gPSBuYm90Ow0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ib3QgPiBhc21heCkgYXNtYXggPSBuYm90Ow0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gLy8gVGhlIGN1cnJlbnQgc3BhbiBpcyBjbG9zZSB0byBhIGxlZGdlIGlmIHRoZSBkcm9wIHRvIGFueQ0KICAgICAgICAgICAgICAgIC8vIG5laWdoYm91ciBzcGFuIGlzIGxlc3MgdGhhbiB0aGUgd2Fsa2FibGVDbGltYi4NCg0KDQogICAgICAgICAgICAgICAgaWYgKG1pbmggPCAtd2Fsa2FibGVDbGltYikgcy5hcmVhID0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQTsgLy8gSWYgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBhbGwgbmVpZ2hib3VycyBpcyB0b28gbGFyZ2UsDQogICAgICAgICAgICAgICAgLy8gd2UgYXJlIGF0IHN0ZWVwIHNsb3BlLCBtYXJrIHRoZSBzcGFuIGFzIGxlZGdlLg0KDQogICAgICAgICAgICAgICAgaWYgKGFzbWF4IC0gYXNtaW4gPiB3YWxrYWJsZUNsaW1iKSB7DQogICAgICAgICAgICAgICAgICBzLmFyZWEgPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkZJTFRFUl9CT1JERVIiKTsNCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEZvciB0aGlzIGZpbHRlciwgdGhlIGNsZWFyYW5jZSBhYm92ZSB0aGUgc3BhbiBpcyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3BhbidzIA0KICAgICAgICAvLy8gbWF4aW11bSB0byB0aGUgbmV4dCBoaWdoZXIgc3BhbidzIG1pbmltdW0uIChTYW1lIGdyaWQgY29sdW1uLikNCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gQHNlZSByY0hlaWdodGZpZWxkLCByY0NvbmZpZw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbHRlcldhbGthYmxlTG93SGVpZ2h0U3BhbnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyV2Fsa2FibGVMb3dIZWlnaHRTcGFucyhjdHgsIHdhbGthYmxlSGVpZ2h0LCBzb2xpZCkgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJGSUxURVJfV0FMS0FCTEUiKTsNCiAgICAgICAgICB2YXIgdyA9IHNvbGlkLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gc29saWQuaGVpZ2h0Ow0KICAgICAgICAgIHZhciBNQVhfSEVJR0hUID0gMHhmZmY7IC8vIFJlbW92ZSB3YWxrYWJsZSBmbGFnIGZyb20gc3BhbnMgd2hpY2ggZG8gbm90IGhhdmUgZW5vdWdoDQogICAgICAgICAgLy8gc3BhY2UgYWJvdmUgdGhlbSBmb3IgdGhlIGFnZW50IHRvIHN0YW5kIHRoZXJlLg0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgKyt4KSB7DQogICAgICAgICAgICAgIGZvciAodmFyIHMgPSBzb2xpZC5zcGFuc1t4ICsgeSAqIHddOyBzICE9IG51bGw7IHMgPSBzLm5leHQpIHsNCiAgICAgICAgICAgICAgICB2YXIgYm90ID0gcy5zbWF4Ow0KICAgICAgICAgICAgICAgIHZhciB0b3AgPSBzLm5leHQgIT0gbnVsbCA/IHMubmV4dC5zbWluIDogTUFYX0hFSUdIVDsNCiAgICAgICAgICAgICAgICBpZiAodG9wIC0gYm90IDw9IHdhbGthYmxlSGVpZ2h0KSBzLmFyZWEgPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY3R4LnN0b3BUaW1lcigiRklMVEVSX1dBTEtBQkxFIik7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIFJlY2FzdEZpbHRlcjsNCiAgICB9KCk7DQoNCiAgICB2YXIgUmVjYXN0QXJlYSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBSZWNhc3RBcmVhKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0QXJlYSk7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RBcmVhLCBbew0KICAgICAgICBrZXk6ICJtZWRpYW5GaWx0ZXJXYWxrYWJsZUFyZWEiLA0KICAgICAgICAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoaXMgZmlsdGVyIGlzIHVzdWFsbHkgYXBwbGllZCBhZnRlciBhcHBseWluZyBhcmVhIGlkJ3MgdXNpbmcgZnVuY3Rpb25zDQogICAgICAgIC8vLyBzdWNoIGFzICNyY01hcmtCb3hBcmVhLCAjcmNNYXJrQ29udmV4UG9seUFyZWEsIGFuZCAjcmNNYXJrQ3lsaW5kZXJBcmVhLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBzZWUgcmNDb21wYWN0SGVpZ2h0ZmllbGQNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lZGlhbkZpbHRlcldhbGthYmxlQXJlYShjdHgsIGNoZikgew0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiTUVESUFOX0FSRUEiKTsNCiAgICAgICAgICB2YXIgYXJlYXMgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCk7DQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkgew0KICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIHkgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHsNCiAgICAgICAgICAgICAgICBzID0gY2hmLnNwYW5zW2ldOw0KDQogICAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1tpXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSB7DQogICAgICAgICAgICAgICAgICBhcmVhc1tpXSA9IGNoZi5hcmVhc1tpXTsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIG5laSA9IG5ldyBBcnJheSg5KTsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgOTsgKytqKSB7DQogICAgICAgICAgICAgICAgICBuZWlbal0gPSBjaGYuYXJlYXNbaV07DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgZGlyID0gMDsgZGlyIDwgNDsgKytkaXIpIHsNCiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGF4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7DQogICAgICAgICAgICAgICAgICAgIHZhciBheSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2FpXSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSBuZWlbZGlyICogMiArIDBdID0gY2hmLmFyZWFzW2FpXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFzID0gY2hmLnNwYW5zW2FpXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRpcjIgPSBkaXIgKyAxICYgMHgzOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXIyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgICAgIHZhciBheDIgPSBheCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcjIpOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBheTIgPSBheSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcjIpOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBhaTIgPSBjaGYuY2VsbHNbYXgyICsgYXkyICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXIyKTsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2FpMl0gIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgbmVpW2RpciAqIDIgKyAxXSA9IGNoZi5hcmVhc1thaTJdOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgQXJyYXlzLnNvcnQobmVpKTsNCiAgICAgICAgICAgICAgICBhcmVhc1tpXSA9IG5laVs0XTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGNoZi5hcmVhcyA9IGFyZWFzOw0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIk1FRElBTl9BUkVBIik7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgdmFsdWUgb2Ygc3BhY2lhbCBwYXJhbWV0ZXJzIGFyZSBpbiB3b3JsZCB1bml0cy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAc2VlIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY01lZGlhbkZpbHRlcldhbGthYmxlQXJlYQ0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogIm1hcmtCb3hBcmVhIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1hcmtCb3hBcmVhKGN0eCwgYm1pbiwgYm1heCwgYXJlYU1vZCwgY2hmKSB7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIk1BUktfQk9YX0FSRUEiKTsNCiAgICAgICAgICB2YXIgbWlueCA9IE1hdGguZmxvb3IoKGJtaW5bMF0gLSBjaGYuYm1pblswXSkgLyBjaGYuY3MpOw0KICAgICAgICAgIHZhciBtaW55ID0gTWF0aC5mbG9vcigoYm1pblsxXSAtIGNoZi5ibWluWzFdKSAvIGNoZi5jaCk7DQogICAgICAgICAgdmFyIG1pbnogPSBNYXRoLmZsb29yKChibWluWzJdIC0gY2hmLmJtaW5bMl0pIC8gY2hmLmNzKTsNCiAgICAgICAgICB2YXIgbWF4eCA9IE1hdGguZmxvb3IoKGJtYXhbMF0gLSBjaGYuYm1pblswXSkgLyBjaGYuY3MpOw0KICAgICAgICAgIHZhciBtYXh5ID0gTWF0aC5mbG9vcigoYm1heFsxXSAtIGNoZi5ibWluWzFdKSAvIGNoZi5jaCk7DQogICAgICAgICAgdmFyIG1heHogPSBNYXRoLmZsb29yKChibWF4WzJdIC0gY2hmLmJtaW5bMl0pIC8gY2hmLmNzKTsNCiAgICAgICAgICBpZiAobWF4eCA8IDApIHJldHVybjsNCiAgICAgICAgICBpZiAobWlueCA+PSBjaGYud2lkdGgpIHJldHVybjsNCiAgICAgICAgICBpZiAobWF4eiA8IDApIHJldHVybjsNCiAgICAgICAgICBpZiAobWlueiA+PSBjaGYuaGVpZ2h0KSByZXR1cm47DQogICAgICAgICAgaWYgKG1pbnggPCAwKSBtaW54ID0gMDsNCiAgICAgICAgICBpZiAobWF4eCA+PSBjaGYud2lkdGgpIG1heHggPSBjaGYud2lkdGggLSAxOw0KICAgICAgICAgIGlmIChtaW56IDwgMCkgbWlueiA9IDA7DQogICAgICAgICAgaWYgKG1heHogPj0gY2hmLmhlaWdodCkgbWF4eiA9IGNoZi5oZWlnaHQgLSAxOw0KDQogICAgICAgICAgZm9yICh2YXIgeiA9IG1pbno7IHogPD0gbWF4ejsgKyt6KSB7DQogICAgICAgICAgICBmb3IgKHZhciB4ID0gbWlueDsgeCA8PSBtYXh4OyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIHogKiBjaGYud2lkdGhdOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkgew0KICAgICAgICAgICAgICAgIHZhciBfcyA9IGNoZi5zcGFuc1tpXTsNCg0KICAgICAgICAgICAgICAgIGlmIChfcy55ID49IG1pbnkgJiYgX3MueSA8PSBtYXh5KSB7DQogICAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIGNoZi5hcmVhc1tpXSA9IGFyZWFNb2QuYXBwbHkoY2hmLmFyZWFzW2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJNQVJLX0JPWF9BUkVBIik7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib2Zmc2V0UG9seSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvZmZzZXRQb2x5KHZlcnRzLCBudmVydHMsIG9mZnNldCwgb3V0VmVydHMsIG1heE91dFZlcnRzKSB7DQogICAgICAgICAgTUlURVJfTElNSVQgPSAxLjIwOw0KICAgICAgICAgIHZhciBuID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnZlcnRzOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBhID0gKGkgKyBudmVydHMgLSAxKSAlIG52ZXJ0czsNCiAgICAgICAgICAgIHZhciBiID0gaTsNCiAgICAgICAgICAgIHZhciBjID0gKGkgKyAxKSAlIG52ZXJ0czsNCiAgICAgICAgICAgIHZhciB2YSA9IGEgKiAzOw0KICAgICAgICAgICAgdmFyIHZiID0gYiAqIDM7DQogICAgICAgICAgICB2YXIgdmMgPSBjICogMzsNCiAgICAgICAgICAgIGR4MCA9IHZlcnRzW3ZiXSAtIHZlcnRzW3ZhXTsNCiAgICAgICAgICAgIGR5MCA9IHZlcnRzW3ZiICsgMl0gLSB2ZXJ0c1t2YSArIDJdOw0KICAgICAgICAgICAgZDAgPSBkeDAgKiBkeDAgKyBkeTAgKiBkeTA7DQoNCiAgICAgICAgICAgIGlmIChkMCA+IDFlLTYpIHsNCiAgICAgICAgICAgICAgZDAgPSAxLjAgLyBNYXRoLnNxcnQoZDApOw0KICAgICAgICAgICAgICBkeDAgKj0gZDA7DQogICAgICAgICAgICAgIGR5MCAqPSBkMDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZHgxID0gdmVydHNbdmNdIC0gdmVydHNbdmJdOw0KICAgICAgICAgICAgZHkxID0gdmVydHNbdmMgKyAyXSAtIHZlcnRzW3ZiICsgMl07DQogICAgICAgICAgICBkMSA9IGR4MSAqIGR4MSArIGR5MSAqIGR5MTsNCg0KICAgICAgICAgICAgaWYgKGQxID4gMWUtNikgew0KICAgICAgICAgICAgICBkMSA9IDEuMCAvIE1hdGguc3FydChkMSk7DQogICAgICAgICAgICAgIGR4MSAqPSBkMTsNCiAgICAgICAgICAgICAgZHkxICo9IGQxOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBkbHgwID0gLWR5MDsNCiAgICAgICAgICAgIGRseTAgPSBkeDA7DQogICAgICAgICAgICBkbHgxID0gLWR5MTsNCiAgICAgICAgICAgIGRseTEgPSBkeDE7DQogICAgICAgICAgICBjcm9zcyA9IGR4MSAqIGR5MCAtIGR4MCAqIGR5MTsNCiAgICAgICAgICAgIGRteCA9IChkbHgwICsgZGx4MSkgKiAwLjU7DQogICAgICAgICAgICBkbXkgPSAoZGx5MCArIGRseTEpICogMC41Ow0KICAgICAgICAgICAgZG1yMiA9IGRteCAqIGRteCArIGRteSAqIGRteTsNCiAgICAgICAgICAgIHZhciBiZXZlbCA9IGRtcjIgKiBNSVRFUl9MSU1JVCAqIE1JVEVSX0xJTUlUIDwgMS4wOw0KDQogICAgICAgICAgICBpZiAoZG1yMiA+IDFlLTYpIHsNCiAgICAgICAgICAgICAgc2NhbGUgPSAxLjAgLyBkbXIyOw0KICAgICAgICAgICAgICBkbXggKj0gc2NhbGU7DQogICAgICAgICAgICAgIGRteSAqPSBzY2FsZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGJldmVsICYmIGNyb3NzIDwgMC4wKSB7DQogICAgICAgICAgICAgIGlmIChuICsgMiA+PSBtYXhPdXRWZXJ0cykgcmV0dXJuIDA7DQogICAgICAgICAgICAgIGQgPSAoMS4wIC0gKGR4MCAqIGR4MSArIGR5MCAqIGR5MSkpICogMC41Ow0KICAgICAgICAgICAgICBvdXRWZXJ0c1tuICogMyArIDBdID0gdmVydHNbdmJdICsgKC1kbHgwICsgZHgwICogZCkgKiBvZmZzZXQ7DQogICAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMV0gPSB2ZXJ0c1t2YiArIDFdOw0KICAgICAgICAgICAgICBvdXRWZXJ0c1tuICogMyArIDJdID0gdmVydHNbdmIgKyAyXSArICgtZGx5MCArIGR5MCAqIGQpICogb2Zmc2V0Ow0KICAgICAgICAgICAgICBuKys7DQogICAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMF0gPSB2ZXJ0c1t2Yl0gKyAoLWRseDEgLSBkeDEgKiBkKSAqIG9mZnNldDsNCiAgICAgICAgICAgICAgb3V0VmVydHNbbiAqIDMgKyAxXSA9IHZlcnRzW3ZiICsgMV07DQogICAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMl0gPSB2ZXJ0c1t2YiArIDJdICsgKC1kbHkxIC0gZHkxICogZCkgKiBvZmZzZXQ7DQogICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGlmIChuICsgMSA+PSBtYXhPdXRWZXJ0cykgcmV0dXJuIDA7DQogICAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMF0gPSB2ZXJ0c1t2Yl0gLSBkbXggKiBvZmZzZXQ7DQogICAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMV0gPSB2ZXJ0c1t2YiArIDFdOw0KICAgICAgICAgICAgICBvdXRWZXJ0c1tuICogMyArIDJdID0gdmVydHNbdmIgKyAyXSAtIGRteSAqIG9mZnNldDsNCiAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBuOw0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHZhbHVlIG9mIHNwYWNpYWwgcGFyYW1ldGVycyBhcmUgaW4gd29ybGQgdW5pdHMuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNNZWRpYW5GaWx0ZXJXYWxrYWJsZUFyZWENCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtYXJrQ3lsaW5kZXJBcmVhIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1hcmtDeWxpbmRlckFyZWEoY3R4LCBwb3MsIHIsIGgsIGFyZWFNb2QsIGNoZikgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJNQVJLX0NZTElOREVSX0FSRUEiKTsNCiAgICAgICAgICBibWluID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIGJtYXggPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgYm1pblswXSA9IHBvc1swXSAtIHI7DQogICAgICAgICAgYm1pblsxXSA9IHBvc1sxXTsNCiAgICAgICAgICBibWluWzJdID0gcG9zWzJdIC0gcjsNCiAgICAgICAgICBibWF4WzBdID0gcG9zWzBdICsgcjsNCiAgICAgICAgICBibWF4WzFdID0gcG9zWzFdICsgaDsNCiAgICAgICAgICBibWF4WzJdID0gcG9zWzJdICsgcjsNCiAgICAgICAgICByMiA9IHIgKiByOw0KICAgICAgICAgIHZhciBtaW54ID0gTWF0aC5mbG9vcigoYm1pblswXSAtIGNoZi5ibWluWzBdKSAvIGNoZi5jcyk7DQogICAgICAgICAgdmFyIG1pbnkgPSBNYXRoLmZsb29yKChibWluWzFdIC0gY2hmLmJtaW5bMV0pIC8gY2hmLmNoKTsNCiAgICAgICAgICB2YXIgbWlueiA9IE1hdGguZmxvb3IoKGJtaW5bMl0gLSBjaGYuYm1pblsyXSkgLyBjaGYuY3MpOw0KICAgICAgICAgIHZhciBtYXh4ID0gTWF0aC5mbG9vcigoYm1heFswXSAtIGNoZi5ibWluWzBdKSAvIGNoZi5jcyk7DQogICAgICAgICAgdmFyIG1heHkgPSBNYXRoLmZsb29yKChibWF4WzFdIC0gY2hmLmJtaW5bMV0pIC8gY2hmLmNoKTsNCiAgICAgICAgICB2YXIgbWF4eiA9IE1hdGguZmxvb3IoKGJtYXhbMl0gLSBjaGYuYm1pblsyXSkgLyBjaGYuY3MpOw0KICAgICAgICAgIGlmIChtYXh4IDwgMCkgcmV0dXJuOw0KICAgICAgICAgIGlmIChtaW54ID49IGNoZi53aWR0aCkgcmV0dXJuOw0KICAgICAgICAgIGlmIChtYXh6IDwgMCkgcmV0dXJuOw0KICAgICAgICAgIGlmIChtaW56ID49IGNoZi5oZWlnaHQpIHJldHVybjsNCiAgICAgICAgICBpZiAobWlueCA8IDApIG1pbnggPSAwOw0KICAgICAgICAgIGlmIChtYXh4ID49IGNoZi53aWR0aCkgbWF4eCA9IGNoZi53aWR0aCAtIDE7DQogICAgICAgICAgaWYgKG1pbnogPCAwKSBtaW56ID0gMDsNCiAgICAgICAgICBpZiAobWF4eiA+PSBjaGYuaGVpZ2h0KSBtYXh6ID0gY2hmLmhlaWdodCAtIDE7DQoNCiAgICAgICAgICBmb3IgKHZhciB6ID0gbWluejsgeiA8PSBtYXh6OyArK3opIHsNCiAgICAgICAgICAgIGZvciAodmFyIHggPSBtaW54OyB4IDw9IG1heHg7ICsreCkgew0KICAgICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgeiAqIGNoZi53aWR0aF07DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IGkgPCBuaTsgKytpKSB7DQogICAgICAgICAgICAgICAgdmFyIF9zMiA9IGNoZi5zcGFuc1tpXTsNCiAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldID09IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgaWYgKF9zMi55ID49IG1pbnkgJiYgX3MyLnkgPD0gbWF4eSkgew0KICAgICAgICAgICAgICAgICAgc3ggPSBjaGYuYm1pblswXSArICh4ICsgMC41KSAqIGNoZi5jczsNCiAgICAgICAgICAgICAgICAgIHN6ID0gY2hmLmJtaW5bMl0gKyAoeiArIDAuNSkgKiBjaGYuY3M7DQogICAgICAgICAgICAgICAgICBkeCA9IHN4IC0gcG9zWzBdOw0KICAgICAgICAgICAgICAgICAgZHogPSBzeiAtIHBvc1syXTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKGR4ICogZHggKyBkeiAqIGR6IDwgcjIpIHsNCiAgICAgICAgICAgICAgICAgICAgY2hmLmFyZWFzW2ldID0gYXJlYU1vZC5hcHBseShjaGYuYXJlYXNbaV0pOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIk1BUktfQ1lMSU5ERVJfQVJFQSIpOw0KICAgICAgICB9DQogICAgICB9XSwgW3sNCiAgICAgICAga2V5OiAiZXJvZGVXYWxrYWJsZUFyZWEiLA0KICAgICAgICAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEJhc2ljYWxseSwgYW55IHNwYW5zIHRoYXQgYXJlIGNsb3NlciB0byBhIGJvdW5kYXJ5IG9yIG9ic3RydWN0aW9uIHRoYW4gdGhlIHNwZWNpZmllZCByYWRpdXMNCiAgICAgICAgLy8vIGFyZSBtYXJrZWQgYXMgdW53YWxrYWJsZS4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyB1c3VhbGx5IGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciB0aGUgaGVpZ2h0ZmllbGQgaGFzIGJlZW4gYnVpbHQuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNCdWlsZENvbXBhY3RIZWlnaHRmaWVsZCwgcmNDb25maWc6OndhbGthYmxlUmFkaXVzDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcm9kZVdhbGthYmxlQXJlYShjdHgsIHJhZGl1cywgY2hmKSB7DQogICAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7DQogICAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0Ow0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJFUk9ERV9BUkVBIik7DQogICAgICAgICAgdmFyIGRpc3QgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCkuZmlsbCgyNTUpOyAvLyBBcnJheXMuZmlsbChkaXN0LCAyNTUpOw0KICAgICAgICAgIC8vIE1hcmsgYm91bmRhcnkgY2VsbHMuDQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkgew0KICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIHkgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHsNCiAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldID09IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHsNCiAgICAgICAgICAgICAgICAgIGRpc3RbaV0gPSAwOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB2YXIgX3MzID0gY2hmLnNwYW5zW2ldOw0KICAgICAgICAgICAgICAgICAgdmFyIG5jID0gMDsNCg0KICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZGlyID0gMDsgZGlyIDwgNDsgKytkaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX3MzLCBkaXIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIG54ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIG55ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7DQogICAgICAgICAgICAgICAgICAgICAgdmFyIG5pZHggPSBjaGYuY2VsbHNbbnggKyBueSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfczMsIGRpcik7DQoNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW25pZHhdICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG5jKys7DQogICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IC8vIEF0IGxlYXN0IG9uZSBtaXNzaW5nIG5laWdoYm91ci4NCg0KDQogICAgICAgICAgICAgICAgICBpZiAobmMgIT0gNCkgZGlzdFtpXSA9IDA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIG5kOyAvLyBjb25zb2xlLmxvZyhjaGYuc3BhbnNbNDUwMjQwXSk7DQogICAgICAgICAgLy8gUGFzcyAxDQoNCiAgICAgICAgICBmb3IgKHZhciBfeSA9IDA7IF95IDwgaDsgKytfeSkgew0KICAgICAgICAgICAgZm9yICh2YXIgX3ggPSAwOyBfeCA8IHc7ICsrX3gpIHsNCiAgICAgICAgICAgICAgdmFyIF9jID0gY2hmLmNlbGxzW194ICsgX3kgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IF9jLmluZGV4LCBfbmkgPSBfYy5pbmRleCArIF9jLmNvdW50OyBfaSA8IF9uaTsgKytfaSkgew0KICAgICAgICAgICAgICAgIHZhciBfczQgPSBjaGYuc3BhbnNbX2ldOw0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX3M0LCAwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgLy8gKC0xLDApDQogICAgICAgICAgICAgICAgICB2YXIgYXggPSBfeCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDApOw0KDQogICAgICAgICAgICAgICAgICB2YXIgYXkgPSBfeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDApOw0KDQogICAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfczQsIDApOw0KICAgICAgICAgICAgICAgICAgdmFyIGFzID0gY2hmLnNwYW5zW2FpXTsNCiAgICAgICAgICAgICAgICAgIG5kID0gTWF0aC5taW4oZGlzdFthaV0gKyAyLCAyNTUpOw0KICAgICAgICAgICAgICAgICAgaWYgKG5kIDwgZGlzdFtfaV0pIGRpc3RbX2ldID0gbmQ7IC8vICgtMSwtMSkNCg0KICAgICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oYXMsIDMpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhYXggPSBheCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDMpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYWF5ID0gYXkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WSgzKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFhaSA9IGNoZi5jZWxsc1thYXggKyBhYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oYXMsIDMpOw0KICAgICAgICAgICAgICAgICAgICBuZCA9IE1hdGgubWluKGRpc3RbYWFpXSArIDMsIDI1NSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChuZCA8IGRpc3RbX2ldKSBkaXN0W19pXSA9IG5kOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zNCwgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIC8vICgwLC0xKQ0KICAgICAgICAgICAgICAgICAgdmFyIF9heCA9IF94ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMyk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXkgPSBfeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FpID0gY2hmLmNlbGxzW19heCArIF9heSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfczQsIDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FzID0gY2hmLnNwYW5zW19haV07DQogICAgICAgICAgICAgICAgICBuZCA9IE1hdGgubWluKGRpc3RbX2FpXSArIDIsIDI1NSk7DQogICAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pXSkgZGlzdFtfaV0gPSBuZDsgLy8gKDEsLTEpDQoNCiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9hcywgMikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIF9hYXggPSBfYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgyKTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgX2FheSA9IF9heSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDIpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBfYWFpID0gY2hmLmNlbGxzW19hYXggKyBfYWF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hcywgMik7DQoNCiAgICAgICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W19hYWldICsgMywgMjU1KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKG5kIDwgZGlzdFtfaV0pIGRpc3RbX2ldID0gbmQ7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBQYXNzIDINCg0KDQogICAgICAgICAgZm9yICh2YXIgX3kyID0gaCAtIDE7IF95MiA+PSAwOyAtLV95Mikgew0KICAgICAgICAgICAgZm9yICh2YXIgX3gyID0gdyAtIDE7IF94MiA+PSAwOyAtLV94Mikgew0KICAgICAgICAgICAgICAvLyBpZih5ID09IDY3MSYmIHggPT0gNjcxKQ0KICAgICAgICAgICAgICAvLyAJY29uc29sZS5sb2coIlRoZXJlIikNCiAgICAgICAgICAgICAgdmFyIF9jMiA9IGNoZi5jZWxsc1tfeDIgKyBfeTIgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTIgPSBfYzIuaW5kZXgsIF9uaTIgPSBfYzIuaW5kZXggKyBfYzIuY291bnQ7IF9pMiA8IF9uaTI7ICsrX2kyKSB7DQogICAgICAgICAgICAgICAgdmFyIF9zNSA9IGNoZi5zcGFuc1tfaTJdOw0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX3M1LCAyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgLy8gKDEsMCkNCiAgICAgICAgICAgICAgICAgIHZhciBfYXgyID0gX3gyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMik7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXkyID0gX3kyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMik7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYWkyID0gY2hmLmNlbGxzW19heDIgKyBfYXkyICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zNSwgMik7DQoNCiAgICAgICAgICAgICAgICAgIGlmIChfYWkyID09IDQ1MDI0MSkgY29uc29sZS5sb2coIkhlcmUiKTsNCiAgICAgICAgICAgICAgICAgIHZhciBfYXMyID0gY2hmLnNwYW5zW19haTJdOw0KICAgICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W19haTJdICsgMiwgMjU1KTsNCiAgICAgICAgICAgICAgICAgIGlmIChuZCA8IGRpc3RbX2kyXSkgZGlzdFtfaTJdID0gbmQ7IC8vICgxLDEpDQoNCiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9hczIsIDEpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBfYWF4MiA9IF9heDIgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgxKTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgX2FheTIgPSBfYXkyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIF9hYWkyID0gY2hmLmNlbGxzW19hYXgyICsgX2FheTIgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX2FzMiwgMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W19hYWkyXSArIDMsIDI1NSk7DQogICAgICAgICAgICAgICAgICAgIGlmIChuZCA8IGRpc3RbX2kyXSkgZGlzdFtfaTJdID0gbmQ7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX3M1LCAxKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgLy8gKDAsMSkNCiAgICAgICAgICAgICAgICAgIHZhciBfYXgzID0gX3gyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMSk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXkzID0gX3kyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMSk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYWkzID0gY2hmLmNlbGxzW19heDMgKyBfYXkzICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zNSwgMSk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXMzID0gY2hmLnNwYW5zW19haTNdOw0KICAgICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W19haTNdICsgMiwgMjU1KTsNCiAgICAgICAgICAgICAgICAgIGlmIChuZCA8IGRpc3RbX2kyXSkgZGlzdFtfaTJdID0gbmQ7IC8vICgtMSwxKQ0KDQogICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMzLCAwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgX2FheDMgPSBfYXgzICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIF9hYXkzID0gX2F5MyArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDApOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBfYWFpMyA9IGNoZi5jZWxsc1tfYWF4MyArIF9hYXkzICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hczMsIDApOw0KDQogICAgICAgICAgICAgICAgICAgIG5kID0gTWF0aC5taW4oZGlzdFtfYWFpM10gKyAzLCAyNTUpOw0KICAgICAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pMl0pIGRpc3RbX2kyXSA9IG5kOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciB0aHIgPSByYWRpdXMgKiAyOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgY2hmLnNwYW5Db3VudDsgKytfaTMpIHsNCiAgICAgICAgICAgIGlmIChkaXN0W19pM10gPCB0aHIpIGNoZi5hcmVhc1tfaTNdID0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJFUk9ERV9BUkVBIik7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicG9pbnRJblBvbHkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcG9pbnRJblBvbHkodmVydHMsIHApIHsNCiAgICAgICAgICB2YXIgYyA9IGZhbHNlOw0KDQogICAgICAgICAgZm9yICh2YXIgX2k0ID0gMCwgX2ogPSB2ZXJ0cy5sZW5ndGggLSAxOyBfaTQgPCB2ZXJ0cy5sZW5ndGg7IF9qID0gX2k0KyspIHsNCiAgICAgICAgICAgIHZhciB2aSA9IF9pNCAqIDM7DQogICAgICAgICAgICB2YXIgdmogPSBfaiAqIDM7DQogICAgICAgICAgICBpZiAodmVydHNbdmkgKyAyXSA+IHBbMl0gIT0gdmVydHNbdmogKyAyXSA+IHBbMl0gJiYgcFswXSA8ICh2ZXJ0c1t2al0gLSB2ZXJ0c1t2aV0pICogKHBbMl0gLSB2ZXJ0c1t2aSArIDJdKSAvICh2ZXJ0c1t2aiArIDJdIC0gdmVydHNbdmkgKyAyXSkgKyB2ZXJ0c1t2aV0pIGMgPSAhYzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gYzsNCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSB2YWx1ZSBvZiBzcGFjaWFsIHBhcmFtZXRlcnMgYXJlIGluIHdvcmxkIHVuaXRzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSB5LXZhbHVlcyBvZiB0aGUgcG9seWdvbiB2ZXJ0aWNlcyBhcmUgaWdub3JlZC4gU28gdGhlIHBvbHlnb24gaXMgZWZmZWN0aXZlbHkNCiAgICAgICAgLy8vIHByb2plY3RlZCBvbnRvIHRoZSB4ei1wbGFuZSBhdCBAcCBobWluLCB0aGVuIGV4dHJ1ZGVkIHRvIEBwIGhtYXguDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNNZWRpYW5GaWx0ZXJXYWxrYWJsZUFyZWENCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtYXJrQ29udmV4UG9seUFyZWEiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWFya0NvbnZleFBvbHlBcmVhKGN0eCwgdmVydHMsIGhtaW4sIGhtYXgsIGFyZWFNb2QsIGNoZikgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJNQVJLX0NPTlZFWFBPTFlfQVJFQSIpOw0KICAgICAgICAgIGJtaW4gPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgbWF4ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMuY29weShibWluLCB2ZXJ0cywgMCk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycy5jb3B5KGJtYXgsIHZlcnRzLCAwKTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdmVydHMubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMubWluKGJtaW4sIHZlcnRzLCBpICogMyk7DQogICAgICAgICAgICBSZWNhc3RWZWN0b3JzLm1heChibWF4LCB2ZXJ0cywgaSAqIDMpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGJtaW5bMV0gPSBobWluOw0KICAgICAgICAgIGJtYXhbMV0gPSBobWF4Ow0KICAgICAgICAgIHZhciBtaW54ID0gTWF0aC5mbG9vcigoYm1pblswXSAtIGNoZi5ibWluWzBdKSAvIGNoZi5jcyk7DQogICAgICAgICAgdmFyIG1pbnkgPSBNYXRoLmZsb29yKChibWluWzFdIC0gY2hmLmJtaW5bMV0pIC8gY2hmLmNoKTsNCiAgICAgICAgICB2YXIgbWlueiA9IE1hdGguZmxvb3IoKGJtaW5bMl0gLSBjaGYuYm1pblsyXSkgLyBjaGYuY3MpOw0KICAgICAgICAgIHZhciBtYXh4ID0gTWF0aC5mbG9vcigoYm1heFswXSAtIGNoZi5ibWluWzBdKSAvIGNoZi5jcyk7DQogICAgICAgICAgdmFyIG1heHkgPSBNYXRoLmZsb29yKChibWF4WzFdIC0gY2hmLmJtaW5bMV0pIC8gY2hmLmNoKTsNCiAgICAgICAgICB2YXIgbWF4eiA9IE1hdGguZmxvb3IoKGJtYXhbMl0gLSBjaGYuYm1pblsyXSkgLyBjaGYuY3MpOw0KICAgICAgICAgIGlmIChtYXh4IDwgMCkgcmV0dXJuOw0KICAgICAgICAgIGlmIChtaW54ID49IGNoZi53aWR0aCkgcmV0dXJuOw0KICAgICAgICAgIGlmIChtYXh6IDwgMCkgcmV0dXJuOw0KICAgICAgICAgIGlmIChtaW56ID49IGNoZi5oZWlnaHQpIHJldHVybjsNCiAgICAgICAgICBpZiAobWlueCA8IDApIG1pbnggPSAwOw0KICAgICAgICAgIGlmIChtYXh4ID49IGNoZi53aWR0aCkgbWF4eCA9IGNoZi53aWR0aCAtIDE7DQogICAgICAgICAgaWYgKG1pbnogPCAwKSBtaW56ID0gMDsNCiAgICAgICAgICBpZiAobWF4eiA+PSBjaGYuaGVpZ2h0KSBtYXh6ID0gY2hmLmhlaWdodCAtIDE7IC8vIFRPRE86IE9wdGltaXplLg0KDQogICAgICAgICAgZm9yICh2YXIgeiA9IG1pbno7IHogPD0gbWF4ejsgKyt6KSB7DQogICAgICAgICAgICBmb3IgKHZhciB4ID0gbWlueDsgeCA8PSBtYXh4OyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIHogKiBjaGYud2lkdGhdOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pNSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IF9pNSA8IG5pOyArK19pNSkgew0KICAgICAgICAgICAgICAgIHZhciBfczYgPSBjaGYuc3BhbnNbX2k1XTsNCiAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW19pNV0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICBpZiAoX3M2LnkgPj0gbWlueSAmJiBfczYueSA8PSBtYXh5KSB7DQogICAgICAgICAgICAgICAgICBwID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgICAgICAgcFswXSA9IGNoZi5ibWluWzBdICsgKHggKyAwLjUpICogY2hmLmNzOw0KICAgICAgICAgICAgICAgICAgcFsxXSA9IDA7DQogICAgICAgICAgICAgICAgICBwWzJdID0gY2hmLmJtaW5bMl0gKyAoeiArIDAuNSkgKiBjaGYuY3M7DQoNCiAgICAgICAgICAgICAgICAgIGlmIChwb2ludEluUG9seSh2ZXJ0cywgcCkpIHsNCiAgICAgICAgICAgICAgICAgICAgY2hmLmFyZWFzW19pNV0gPSBhcmVhTW9kLmFwcGx5KGNoZi5hcmVhc1tfaTVdKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJNQVJLX0NPTlZFWFBPTFlfQVJFQSIpOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBSZWNhc3RBcmVhOw0KICAgIH0oKTsNCg0KICAgIHZhciBfdGVtcCQxLCBfdGVtcDIkMTsNCg0KICAgIHZhciBSZWNhc3RSZWdpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gUmVjYXN0UmVnaW9uKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0UmVnaW9uKTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKFJlY2FzdFJlZ2lvbiwgbnVsbCwgW3sNCiAgICAgICAga2V5OiAiY2FsY3VsYXRlRGlzdGFuY2VGaWVsZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjdWxhdGVEaXN0YW5jZUZpZWxkKGNoZiwgc3JjKSB7DQogICAgICAgICAgdmFyIG1heERpc3Q7DQogICAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7DQogICAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0OyAvLyBJbml0IGRpc3RhbmNlIGFuZCBwb2ludHMuDQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZi5zcGFuQ291bnQ7ICsraSkgew0KICAgICAgICAgICAgc3JjW2ldID0gMHhmZmZmOw0KICAgICAgICAgIH0gLy8gTWFyayBib3VuZGFyeSBjZWxscy4NCg0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94ID0gMDsgX3ggPCB3OyArK194KSB7DQogICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW194ICsgeSAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kgPCBuaTsgKytfaSkgew0KICAgICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW19pXTsNCiAgICAgICAgICAgICAgICB2YXIgYXJlYSA9IGNoZi5hcmVhc1tfaV07DQogICAgICAgICAgICAgICAgdmFyIG5jID0gMDsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIGRpciA9IDA7IGRpciA8IDQ7ICsrZGlyKSB7DQogICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBheCA9IF94ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgYXkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYSA9PSBjaGYuYXJlYXNbYWldKSB7DQogICAgICAgICAgICAgICAgICAgICAgbmMrKzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChuYyAhPSA0KSB7DQogICAgICAgICAgICAgICAgICBzcmNbX2ldID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIFBhc3MgMQ0KDQoNCiAgICAgICAgICBmb3IgKHZhciBfeSA9IDA7IF95IDwgaDsgKytfeSkgew0KICAgICAgICAgICAgZm9yICh2YXIgX3gyID0gMDsgX3gyIDwgdzsgKytfeDIpIHsNCiAgICAgICAgICAgICAgdmFyIF9jID0gY2hmLmNlbGxzW194MiArIF95ICogd107DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kyID0gX2MuaW5kZXgsIF9uaSA9IF9jLmluZGV4ICsgX2MuY291bnQ7IF9pMiA8IF9uaTsgKytfaTIpIHsNCiAgICAgICAgICAgICAgICB2YXIgX3MgPSBjaGYuc3BhbnNbX2kyXTsNCg0KICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zLCAwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgLy8gKC0xLDApDQogICAgICAgICAgICAgICAgICB2YXIgX2F4ID0gX3gyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMCk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXkgPSBfeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDApOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FpID0gY2hmLmNlbGxzW19heCArIF9heSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfcywgMCk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBhcyA9IGNoZi5zcGFuc1tfYWldOw0KDQogICAgICAgICAgICAgICAgICBpZiAoc3JjW19haV0gKyAyIDwgc3JjW19pMl0pIHsNCiAgICAgICAgICAgICAgICAgICAgc3JjW19pMl0gPSBzcmNbX2FpXSArIDI7DQogICAgICAgICAgICAgICAgICB9IC8vICgtMSwtMSkNCg0KDQogICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihhcywgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFheCA9IF9heCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDMpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBhYXkgPSBfYXkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WSgzKTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgYWFpID0gY2hmLmNlbGxzW2FheCArIGFheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihhcywgMyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1thYWldICsgMyA8IHNyY1tfaTJdKSB7DQogICAgICAgICAgICAgICAgICAgICAgc3JjW19pMl0gPSBzcmNbYWFpXSArIDM7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfcywgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIC8vICgwLC0xKQ0KICAgICAgICAgICAgICAgICAgdmFyIF9heDIgPSBfeDIgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgzKTsNCg0KICAgICAgICAgICAgICAgICAgdmFyIF9heTIgPSBfeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FpMiA9IGNoZi5jZWxsc1tfYXgyICsgX2F5MiAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfcywgMyk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXMgPSBjaGYuc3BhbnNbX2FpMl07DQoNCiAgICAgICAgICAgICAgICAgIGlmIChzcmNbX2FpMl0gKyAyIDwgc3JjW19pMl0pIHsNCiAgICAgICAgICAgICAgICAgICAgc3JjW19pMl0gPSBzcmNbX2FpMl0gKyAyOw0KICAgICAgICAgICAgICAgICAgfSAvLyAoMSwtMSkNCg0KDQogICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMsIDIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBfYWF4ID0gX2F4MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDIpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBfYWF5ID0gX2F5MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDIpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBfYWFpID0gY2hmLmNlbGxzW19hYXggKyBfYWF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hcywgMik7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1tfYWFpXSArIDMgPCBzcmNbX2kyXSkgew0KICAgICAgICAgICAgICAgICAgICAgIHNyY1tfaTJdID0gc3JjW19hYWldICsgMzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gUGFzcyAyDQoNCg0KICAgICAgICAgIGZvciAodmFyIF95MiA9IGggLSAxOyBfeTIgPj0gMDsgLS1feTIpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94MyA9IHcgLSAxOyBfeDMgPj0gMDsgLS1feDMpIHsNCiAgICAgICAgICAgICAgdmFyIF9jMiA9IGNoZi5jZWxsc1tfeDMgKyBfeTIgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTMgPSBfYzIuaW5kZXgsIF9uaTIgPSBfYzIuaW5kZXggKyBfYzIuY291bnQ7IF9pMyA8IF9uaTI7ICsrX2kzKSB7DQogICAgICAgICAgICAgICAgdmFyIF9zMiA9IGNoZi5zcGFuc1tfaTNdOw0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX3MyLCAyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgLy8gKDEsMCkNCiAgICAgICAgICAgICAgICAgIHZhciBfYXgzID0gX3gzICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMik7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXkzID0gX3kyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMik7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYWkzID0gY2hmLmNlbGxzW19heDMgKyBfYXkzICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zMiwgMik7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfYXMyID0gY2hmLnNwYW5zW19haTNdOw0KDQogICAgICAgICAgICAgICAgICBpZiAoc3JjW19haTNdICsgMiA8IHNyY1tfaTNdKSB7DQogICAgICAgICAgICAgICAgICAgIHNyY1tfaTNdID0gc3JjW19haTNdICsgMjsNCiAgICAgICAgICAgICAgICAgIH0gLy8gKDEsMSkNCg0KDQogICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMyLCAxKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgX2FheDIgPSBfYXgzICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIF9hYXkyID0gX2F5MyArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDEpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBfYWFpMiA9IGNoZi5jZWxsc1tfYWF4MiArIF9hYXkyICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hczIsIDEpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmIChzcmNbX2FhaTJdICsgMyA8IHNyY1tfaTNdKSB7DQogICAgICAgICAgICAgICAgICAgICAgc3JjW19pM10gPSBzcmNbX2FhaTJdICsgMzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zMiwgMSkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIC8vICgwLDEpDQogICAgICAgICAgICAgICAgICB2YXIgX2F4NCA9IF94MyArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDEpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2F5NCA9IF95MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDEpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FpNCA9IGNoZi5jZWxsc1tfYXg0ICsgX2F5NCAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfczIsIDEpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FzMyA9IGNoZi5zcGFuc1tfYWk0XTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKHNyY1tfYWk0XSArIDIgPCBzcmNbX2kzXSkgew0KICAgICAgICAgICAgICAgICAgICBzcmNbX2kzXSA9IHNyY1tfYWk0XSArIDI7DQogICAgICAgICAgICAgICAgICB9IC8vICgtMSwxKQ0KDQoNCiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9hczMsIDApICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBfYWF4MyA9IF9heDQgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgwKTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgX2FheTMgPSBfYXk0ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIF9hYWkzID0gY2hmLmNlbGxzW19hYXgzICsgX2FheTMgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX2FzMywgMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1tfYWFpM10gKyAzIDwgc3JjW19pM10pIHsNCiAgICAgICAgICAgICAgICAgICAgICBzcmNbX2kzXSA9IHNyY1tfYWFpM10gKyAzOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgbWF4RGlzdCA9IDA7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBjaGYuc3BhbkNvdW50OyArK19pNCkgew0KICAgICAgICAgICAgbWF4RGlzdCA9IE1hdGgubWF4KHNyY1tfaTRdLCBtYXhEaXN0KTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbWF4RGlzdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJib3hCbHVyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJveEJsdXIoY2hmLCB0aHIsIHNyYykgew0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsNCiAgICAgICAgICB2YXIgZHN0ID0gbmV3IEFycmF5KGNoZi5zcGFuQ291bnQpOw0KICAgICAgICAgIHRociAqPSAyOw0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94NCA9IDA7IF94NCA8IHc7ICsrX3g0KSB7DQogICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW194NCArIHkgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHsNCiAgICAgICAgICAgICAgICB2YXIgcyA9IGNoZi5zcGFuc1tpXTsNCiAgICAgICAgICAgICAgICB2YXIgY2QgPSBzcmNbaV07DQoNCiAgICAgICAgICAgICAgICBpZiAoY2QgPD0gdGhyKSB7DQogICAgICAgICAgICAgICAgICBkc3RbaV0gPSBjZDsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciBkID0gY2Q7DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYXggPSBfeDQgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBheSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpOw0KICAgICAgICAgICAgICAgICAgICBkICs9IHNyY1thaV07DQogICAgICAgICAgICAgICAgICAgIHZhciBhcyA9IGNoZi5zcGFuc1thaV07DQogICAgICAgICAgICAgICAgICAgIHZhciBkaXIyID0gZGlyICsgMSAmIDB4MzsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihhcywgZGlyMikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXgyID0gYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIyKTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXkyID0gYXkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIyKTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgYWkyID0gY2hmLmNlbGxzW2F4MiArIGF5MiAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihhcywgZGlyMik7DQogICAgICAgICAgICAgICAgICAgICAgZCArPSBzcmNbYWkyXTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBkICs9IGNkOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBkICs9IGNkICogMjsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBkc3RbaV0gPSBNYXRoLmZsb29yKChkICsgNSkgLyA5KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBkc3Q7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmxvb2RSZWdpb24iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmxvb2RSZWdpb24oeCwgeSwgaSwgbGV2ZWwsIHIsIGNoZiwgc3JjUmVnLCBzcmNEaXN0LCBzdGFjaykgew0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBhcmVhID0gY2hmLmFyZWFzW2ldOyAvLyBGbG9vZCBmaWxsIG1hcmsgcmVnaW9uLg0KDQogICAgICAgICAgc3RhY2sgPSBbXTsNCiAgICAgICAgICBzdGFjay5wdXNoKHgpOw0KICAgICAgICAgIHN0YWNrLnB1c2goeSk7DQogICAgICAgICAgc3RhY2sucHVzaChpKTsNCiAgICAgICAgICBzcmNSZWdbaV0gPSByOw0KICAgICAgICAgIHNyY0Rpc3RbaV0gPSAwOw0KICAgICAgICAgIHZhciBsZXYgPSBsZXZlbCA+PSAyID8gbGV2ZWwgLSAyIDogMDsNCiAgICAgICAgICB2YXIgY291bnQgPSAwOw0KDQogICAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHZhciBjaSA9IHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTsNCiAgICAgICAgICAgIHZhciBjeSA9IHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTsNCiAgICAgICAgICAgIHZhciBjeCA9IHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTsNCiAgICAgICAgICAgIHZhciBjcyA9IGNoZi5zcGFuc1tjaV07IC8vIENoZWNrIGlmIGFueSBvZiB0aGUgbmVpZ2hib3VycyBhbHJlYWR5IGhhdmUgYSB2YWxpZCByZWdpb24gc2V0Lg0KDQogICAgICAgICAgICB2YXIgYXIgPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAvLyA4IGNvbm5lY3RlZA0KICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihjcywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgIHZhciBheCA9IGN4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTsNCiAgICAgICAgICAgICAgICB2YXIgYXkgPSBjeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7DQogICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oY3MsIGRpcik7DQoNCiAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2FpXSAhPSBhcmVhKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgbnIgPSBzcmNSZWdbYWldOw0KDQogICAgICAgICAgICAgICAgaWYgKChuciAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobnIgIT0gMCAmJiBuciAhPSByKSB7DQogICAgICAgICAgICAgICAgICBhciA9IG5yOw0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmFyIGFzID0gY2hmLnNwYW5zW2FpXTsNCiAgICAgICAgICAgICAgICB2YXIgZGlyMiA9IGRpciArIDEgJiAweDM7DQoNCiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihhcywgZGlyMikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBheDIgPSBheCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcjIpOw0KICAgICAgICAgICAgICAgICAgdmFyIGF5MiA9IGF5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyMik7DQogICAgICAgICAgICAgICAgICB2YXIgYWkyID0gY2hmLmNlbGxzW2F4MiArIGF5MiAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihhcywgZGlyMik7DQoNCiAgICAgICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbYWkyXSAhPSBhcmVhKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICB2YXIgbnIyID0gc3JjUmVnW2FpMl07DQoNCiAgICAgICAgICAgICAgICAgIGlmIChucjIgIT0gMCAmJiBucjIgIT0gcikgew0KICAgICAgICAgICAgICAgICAgICBhciA9IG5yMjsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChhciAhPSAwKSB7DQogICAgICAgICAgICAgIHNyY1JlZ1tjaV0gPSAwOw0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY291bnQrKzsgLy8gRXhwYW5kIG5laWdoYm91cnMuDQoNCiAgICAgICAgICAgIGZvciAodmFyIF9kaXIgPSAwOyBfZGlyIDwgNDsgKytfZGlyKSB7DQogICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGNzLCBfZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgIHZhciBfYXg1ID0gY3ggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChfZGlyKTsNCg0KICAgICAgICAgICAgICAgIHZhciBfYXk1ID0gY3kgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShfZGlyKTsNCg0KICAgICAgICAgICAgICAgIHZhciBfYWk1ID0gY2hmLmNlbGxzW19heDUgKyBfYXk1ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGNzLCBfZGlyKTsNCg0KICAgICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbX2FpNV0gIT0gYXJlYSkgew0KICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKGNoZi5kaXN0W19haTVdID49IGxldiAmJiBzcmNSZWdbX2FpNV0gPT0gMCkgew0KICAgICAgICAgICAgICAgICAgc3JjUmVnW19haTVdID0gcjsNCiAgICAgICAgICAgICAgICAgIHNyY0Rpc3RbX2FpNV0gPSAwOw0KICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChfYXg1KTsNCiAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goX2F5NSk7DQogICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKF9haTUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBjb3VudCA+IDA7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZXhwYW5kUmVnaW9ucyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBleHBhbmRSZWdpb25zKG1heEl0ZXIsIGxldmVsLCBjaGYsIHNyY1JlZywgc3JjRGlzdCwgc3RhY2ssIGZpbGxTdGFjaykgew0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsNCg0KICAgICAgICAgIGlmIChmaWxsU3RhY2spIHsNCiAgICAgICAgICAgIC8vIEZpbmQgY2VsbHMgcmV2ZWFsZWQgYnkgdGhlIHJhaXNlZCBsZXZlbC4NCiAgICAgICAgICAgIC8vc3RhY2sgPSBbXTsNCiAgICAgICAgICAgIHN0YWNrID0gW107DQoNCiAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7DQogICAgICAgICAgICAgIGZvciAodmFyIF94NSA9IDA7IF94NSA8IHc7ICsrX3g1KSB7DQogICAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbX3g1ICsgeSAqIHddOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IGkgPCBuaTsgKytpKSB7DQogICAgICAgICAgICAgICAgICBpZiAoY2hmLmRpc3RbaV0gPj0gbGV2ZWwgJiYgc3JjUmVnW2ldID09IDAgJiYgY2hmLmFyZWFzW2ldICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHsNCiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChfeDUpOw0KICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHkpOw0KICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGkpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSAvLyB1c2UgY2VsbHMgaW4gdGhlIGlucHV0IHN0YWNrDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIC8vIG1hcmsgYWxsIGNlbGxzIHdoaWNoIGFscmVhZHkgaGF2ZSBhIHJlZ2lvbg0KICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0YWNrLmxlbmd0aDsgaiArPSAzKSB7DQogICAgICAgICAgICAgICAgdmFyIF9pNSA9IHN0YWNrW2ogKyAyXTsNCg0KICAgICAgICAgICAgICAgIGlmIChzcmNSZWdbX2k1XSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICBzdGFja1tqICsgMl0gPSAtMTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBkaXJ0eUVudHJpZXMgPSBbXTsNCiAgICAgICAgICB2YXIgaXRlciA9IDA7DQoNCiAgICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdmFyIGZhaWxlZCA9IDA7IC8vIGRpcnR5RW50cmllcyA9IFtdOw0KDQogICAgICAgICAgICBkaXJ0eUVudHJpZXMgPSBbXTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IHN0YWNrLmxlbmd0aDsgX2ogKz0gMykgew0KICAgICAgICAgICAgICB2YXIgX3g2ID0gc3RhY2tbX2ogKyAwXTsNCiAgICAgICAgICAgICAgdmFyIF95MyA9IHN0YWNrW19qICsgMV07DQogICAgICAgICAgICAgIHZhciBfaTYgPSBzdGFja1tfaiArIDJdOw0KDQogICAgICAgICAgICAgIGlmIChfaTYgPCAwKSB7DQogICAgICAgICAgICAgICAgZmFpbGVkKys7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgciA9IHNyY1JlZ1tfaTZdOw0KICAgICAgICAgICAgICB2YXIgZDIgPSAweGZmZjsNCiAgICAgICAgICAgICAgdmFyIGFyZWEgPSBjaGYuYXJlYXNbX2k2XTsNCiAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbX2k2XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciBheCA9IF94NiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7DQoNCiAgICAgICAgICAgICAgICB2YXIgYXkgPSBfeTMgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOw0KDQogICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCg0KICAgICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbYWldICE9IGFyZWEpIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChzcmNSZWdbYWldID4gMCAmJiAoc3JjUmVnW2FpXSAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSA9PSAwKSB7DQogICAgICAgICAgICAgICAgICBpZiAoc3JjRGlzdFthaV0gKyAyIDwgZDIpIHsNCiAgICAgICAgICAgICAgICAgICAgciA9IHNyY1JlZ1thaV07DQogICAgICAgICAgICAgICAgICAgIGQyID0gc3JjRGlzdFthaV0gKyAyOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChyICE9IDApIHsNCiAgICAgICAgICAgICAgICBzdGFja1tfaiArIDJdID0gLTE7IC8vIG1hcmsgYXMgdXNlZA0KDQogICAgICAgICAgICAgICAgZGlydHlFbnRyaWVzLnB1c2goX2k2KTsNCiAgICAgICAgICAgICAgICBkaXJ0eUVudHJpZXMucHVzaChyKTsNCiAgICAgICAgICAgICAgICBkaXJ0eUVudHJpZXMucHVzaChkMik7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZmFpbGVkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gQ29weSBlbnRyaWVzIHRoYXQgZGlmZmVyIGJldHdlZW4gc3JjIGFuZCBkc3QgdG8ga2VlcCB0aGVtIGluIHN5bmMuDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgZGlydHlFbnRyaWVzLmxlbmd0aDsgX2k3ICs9IDMpIHsNCiAgICAgICAgICAgICAgdmFyIGlkeCA9IGRpcnR5RW50cmllc1tfaTddOyAvLyBpZiAoaWR4ID09IDEzNDQpDQogICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygiZGlydHkiKQ0KDQogICAgICAgICAgICAgIHNyY1JlZ1tpZHhdID0gZGlydHlFbnRyaWVzW19pNyArIDFdOw0KICAgICAgICAgICAgICBzcmNEaXN0W2lkeF0gPSBkaXJ0eUVudHJpZXNbX2k3ICsgMl07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChmYWlsZWQgKiAzID09IHN0YWNrLmxlbmd0aCkgew0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGxldmVsID4gMCkgew0KICAgICAgICAgICAgICArK2l0ZXI7DQoNCiAgICAgICAgICAgICAgaWYgKGl0ZXIgPj0gbWF4SXRlcikgew0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHNyY1JlZzsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJzb3J0Q2VsbHNCeUxldmVsIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNvcnRDZWxsc0J5TGV2ZWwoc3RhcnRMZXZlbCwgY2hmLCBzcmNSZWcsIG5iU3RhY2tzLCBzdGFja3MsIGxvZ2xldmVsc1BlclN0YWNrKSAvLyB0aGUgbGV2ZWxzIHBlciBzdGFjayAoMiBpbiBvdXIgY2FzZSkgYXMgYSBiaXQgc2hpZnQNCiAgICAgICAgew0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsNCiAgICAgICAgICBzdGFydExldmVsID0gc3RhcnRMZXZlbCA+PiBsb2dsZXZlbHNQZXJTdGFjazsNCg0KICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmJTdGFja3M7ICsraikgew0KICAgICAgICAgICAgLy8gc3RhY2tzW2pdID0gbmV3IEFycmF5KDEwMjQpOw0KICAgICAgICAgICAgLy8gc3RhY2tzW2pdID0gW107DQogICAgICAgICAgICBzdGFja3Nbal0gPSBbXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkgew0KICAgICAgICAgICAgZm9yICh2YXIgX3g3ID0gMDsgX3g3IDwgdzsgKytfeDcpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbX3g3ICsgeSAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkgew0KICAgICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbaV0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSB8fCBzcmNSZWdbaV0gIT0gMCkgew0KICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmFyIGxldmVsID0gY2hmLmRpc3RbaV0gPj4gbG9nbGV2ZWxzUGVyU3RhY2s7DQogICAgICAgICAgICAgICAgdmFyIHNJZCA9IHN0YXJ0TGV2ZWwgLSBsZXZlbDsNCg0KICAgICAgICAgICAgICAgIGlmIChzSWQgPj0gbmJTdGFja3MpIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChzSWQgPCAwKSB7DQogICAgICAgICAgICAgICAgICBzSWQgPSAwOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHN0YWNrc1tzSWRdLnB1c2goX3g3KTsNCiAgICAgICAgICAgICAgICBzdGFja3Nbc0lkXS5wdXNoKHkpOw0KICAgICAgICAgICAgICAgIHN0YWNrc1tzSWRdLnB1c2goaSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYXBwZW5kU3RhY2tzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZFN0YWNrcyhzcmNTdGFjaywgZHN0U3RhY2ssIHNyY1JlZykgew0KICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3JjU3RhY2subGVuZ3RoOyBqICs9IDMpIHsNCiAgICAgICAgICAgIHZhciBpID0gc3JjU3RhY2tbaiArIDJdOw0KDQogICAgICAgICAgICBpZiAoaSA8IDAgfHwgc3JjUmVnW2ldICE9IDApIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRzdFN0YWNrLnB1c2goc3JjU3RhY2tbal0pOw0KICAgICAgICAgICAgZHN0U3RhY2sucHVzaChzcmNTdGFja1tqICsgMV0pOw0KICAgICAgICAgICAgZHN0U3RhY2sucHVzaChzcmNTdGFja1tqICsgMl0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZW1vdmVBZGphY2VudE5laWdoYm91cnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlQWRqYWNlbnROZWlnaGJvdXJzKHJlZykgew0KICAgICAgICAgIC8vIFJlbW92ZSBhZGphY2VudCBkdXBsaWNhdGVzLg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVnLmNvbm5lY3Rpb25zLmxlbmd0aCAmJiByZWcuY29ubmVjdGlvbnMubGVuZ3RoID4gMTspIHsNCiAgICAgICAgICAgIHZhciBuaSA9IChpICsgMSkgJSByZWcuY29ubmVjdGlvbnMubGVuZ3RoOw0KDQogICAgICAgICAgICBpZiAocmVnLmNvbm5lY3Rpb25zW2ldID09IHJlZy5jb25uZWN0aW9uc1tuaV0gJiYgcmVnLmNvbm5lY3Rpb25zW2ldID49IC0xMjggJiYgcmVnLmNvbm5lY3Rpb25zW2ldIDw9IDEyNykgew0KICAgICAgICAgICAgICByZWcuY29ubmVjdGlvbnMuc3BsaWNlKGksIDEpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgKytpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZXBsYWNlTmVpZ2hib3VyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGxhY2VOZWlnaGJvdXIocmVnLCBvbGRJZCwgbmV3SWQpIHsNCiAgICAgICAgICB2YXIgbmVpQ2hhbmdlZCA9IGZhbHNlOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWcuY29ubmVjdGlvbnMubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgIGlmIChyZWcuY29ubmVjdGlvbnNbaV0gPT0gb2xkSWQpIHsNCiAgICAgICAgICAgICAgcmVnLmNvbm5lY3Rpb25zW2ldID0gbmV3SWQ7DQogICAgICAgICAgICAgIG5laUNoYW5nZWQgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZvciAodmFyIF9pOCA9IDA7IF9pOCA8IHJlZy5mbG9vcnMubGVuZ3RoOyArK19pOCkgew0KICAgICAgICAgICAgaWYgKHJlZy5mbG9vcnNbX2k4XSA9PSBvbGRJZCkgew0KICAgICAgICAgICAgICByZWcuZmxvb3JzLnNldChfaTgsIG5ld0lkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobmVpQ2hhbmdlZCkgew0KICAgICAgICAgICAgUmVjYXN0UmVnaW9uLnJlbW92ZUFkamFjZW50TmVpZ2hib3VycyhyZWcpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjYW5NZXJnZVdpdGhSZWdpb24iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuTWVyZ2VXaXRoUmVnaW9uKHJlZ2EsIHJlZ2IpIHsNCiAgICAgICAgICBpZiAocmVnYS5hcmVhVHlwZSAhPSByZWdiLmFyZWFUeXBlKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIG4gPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWdhLmNvbm5lY3Rpb25zLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICBpZiAocmVnYS5jb25uZWN0aW9uc1tpXSA9PSByZWdiLmlkKSB7DQogICAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobiA+IDEpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCByZWdhLmZsb29ycy5sZW5ndGg7ICsrX2k5KSB7DQogICAgICAgICAgICBpZiAocmVnYS5mbG9vcnNbX2k5XSA9PSByZWdiLmlkKSB7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRVbmlxdWVGbG9vclJlZ2lvbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRVbmlxdWVGbG9vclJlZ2lvbihyZWcsIG4pIHsNCiAgICAgICAgICBpZiAoIXJlZy5mbG9vcnMuaW5jbHVkZXMobikpIHsNCiAgICAgICAgICAgIHJlZy5mbG9vcnMucHVzaChuKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibWVyZ2VSZWdpb25zIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlUmVnaW9ucyhyZWdhLCByZWdiKSB7DQogICAgICAgICAgdmFyIGFpZCA9IHJlZ2EuaWQ7DQogICAgICAgICAgdmFyIGJpZCA9IHJlZ2IuaWQ7IC8vIER1cGxpY2F0ZSBjdXJyZW50IG5laWdoYm91cmhvb2QuDQoNCiAgICAgICAgICB2YXIgYWNvbiA9IHJlZ2EuY29ubmVjdGlvbnM7DQogICAgICAgICAgdmFyIGJjb24gPSByZWdiLmNvbm5lY3Rpb25zOyAvLyBGaW5kIGluc2VydGlvbiBwb1BvbHkgb24gQS4NCg0KICAgICAgICAgIHZhciBpbnNhID0gLTE7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjb24ubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgIGlmIChhY29uW2ldID09IGJpZCkgew0KICAgICAgICAgICAgICBpbnNhID0gaTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKGluc2EgPT0gLTEpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9IC8vIEZpbmQgaW5zZXJ0aW9uIHBvUG9seSBvbiBCLg0KDQoNCiAgICAgICAgICB2YXIgaW5zYiA9IC0xOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCBiY29uLmxlbmd0aDsgKytfaTEwKSB7DQogICAgICAgICAgICBpZiAoYmNvbltfaTEwXSA9PSBhaWQpIHsNCiAgICAgICAgICAgICAgaW5zYiA9IF9pMTA7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChpbnNiID09IC0xKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfSAvLyBNZXJnZSBuZWlnaGJvdXJzLg0KDQoNCiAgICAgICAgICByZWdhLmNvbm5lY3Rpb25zID0gW107DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTExID0gMCwgbmkgPSBhY29uLmxlbmd0aDsgX2kxMSA8IG5pIC0gMTsgKytfaTExKSB7DQogICAgICAgICAgICByZWdhLmNvbm5lY3Rpb25zLnB1c2goYWNvblsoaW5zYSArIDEgKyBfaTExKSAlIG5pXSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDAsIF9uaTMgPSBiY29uLmxlbmd0aDsgX2kxMiA8IF9uaTMgLSAxOyArK19pMTIpIHsNCiAgICAgICAgICAgIHJlZ2EuY29ubmVjdGlvbnMucHVzaChiY29uWyhpbnNiICsgMSArIF9pMTIpICUgX25pM10pOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIFJlY2FzdFJlZ2lvbi5yZW1vdmVBZGphY2VudE5laWdoYm91cnMocmVnYSk7DQoNCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlZ2IuZmxvb3JzLmxlbmd0aDsgKytqKSB7DQogICAgICAgICAgICBSZWNhc3RSZWdpb24uYWRkVW5pcXVlRmxvb3JSZWdpb24ocmVnYSwgcmVnYi5mbG9vcnNbal0pOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJlZ2Euc3BhbkNvdW50ICs9IHJlZ2Iuc3BhbkNvdW50Ow0KICAgICAgICAgIHJlZ2Iuc3BhbkNvdW50ID0gMDsNCiAgICAgICAgICByZWdiLmNvbm5lY3Rpb25zID0gW107DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaXNSZWdpb25Db25uZWN0ZWRUb0JvcmRlciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1JlZ2lvbkNvbm5lY3RlZFRvQm9yZGVyKHJlZykgew0KICAgICAgICAgIC8vIFJlZ2lvbiBpcyBjb25uZWN0ZWQgdG8gYm9yZGVyIGlmDQogICAgICAgICAgLy8gb25lIG9mIHRoZSBuZWlnaGJvdXJzIGlzIG51bGwgaWQuDQogICAgICAgICAgcmV0dXJuIHJlZy5jb25uZWN0aW9ucy5pbmNsdWRlcygwKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc1NvbGlkRWRnZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NvbGlkRWRnZShjaGYsIHNyY1JlZywgeCwgeSwgaSwgZGlyKSB7DQogICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07DQogICAgICAgICAgdmFyIHIgPSAwOw0KDQogICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgdmFyIGF4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7DQogICAgICAgICAgICB2YXIgYXkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCiAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCiAgICAgICAgICAgIHIgPSBzcmNSZWdbYWldOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChyID09IHNyY1JlZ1tpXSkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIndhbGtDb250b3VyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdhbGtDb250b3VyKHgsIHksIGksIGRpciwgY2hmLCBzcmNSZWcsIGNvbnQpIHsNCiAgICAgICAgICB2YXIgc3RhcnREaXIgPSBkaXI7DQogICAgICAgICAgdmFyIHN0YXJ0aSA9IGk7DQogICAgICAgICAgdmFyIHNzID0gY2hmLnNwYW5zW2ldOw0KICAgICAgICAgIHZhciBjdXJSZWcgPSAwOw0KDQogICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oc3MsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KICAgICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7DQogICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHNzLCBkaXIpOw0KICAgICAgICAgICAgY3VyUmVnID0gc3JjUmVnW2FpXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjb250LnB1c2goY3VyUmVnKTsNCiAgICAgICAgICB2YXIgaXRlciA9IDA7DQoNCiAgICAgICAgICB3aGlsZSAoKytpdGVyIDwgNDAwMDApIHsNCiAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW2ldOw0KDQogICAgICAgICAgICBpZiAoUmVjYXN0UmVnaW9uLmlzU29saWRFZGdlKGNoZiwgc3JjUmVnLCB4LCB5LCBpLCBkaXIpKSB7DQogICAgICAgICAgICAgIC8vIENob29zZSB0aGUgZWRnZSBjb3JuZXINCiAgICAgICAgICAgICAgdmFyIHIgPSAwOw0KDQogICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICB2YXIgX2F4NiA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KDQogICAgICAgICAgICAgICAgdmFyIF9heTYgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCg0KICAgICAgICAgICAgICAgIHZhciBfYWk2ID0gY2hmLmNlbGxzW19heDYgKyBfYXk2ICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCg0KICAgICAgICAgICAgICAgIHIgPSBzcmNSZWdbX2FpNl07DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAociAhPSBjdXJSZWcpIHsNCiAgICAgICAgICAgICAgICBjdXJSZWcgPSByOw0KICAgICAgICAgICAgICAgIGNvbnQucHVzaChjdXJSZWcpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgZGlyID0gZGlyICsgMSAmIDB4MzsgLy8gUm90YXRlIENXDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB2YXIgbmkgPSAtMTsNCiAgICAgICAgICAgICAgdmFyIG54ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7DQogICAgICAgICAgICAgIHZhciBueSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOw0KDQogICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbmMgPSBjaGYuY2VsbHNbbnggKyBueSAqIGNoZi53aWR0aF07DQogICAgICAgICAgICAgICAgbmkgPSBuYy5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChuaSA9PSAtMSkgew0KICAgICAgICAgICAgICAgIC8vIFNob3VsZCBub3QgaGFwcGVuLg0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHggPSBueDsNCiAgICAgICAgICAgICAgeSA9IG55Ow0KICAgICAgICAgICAgICBpID0gbmk7DQogICAgICAgICAgICAgIGRpciA9IGRpciArIDMgJiAweDM7IC8vIFJvdGF0ZSBDQ1cNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHN0YXJ0aSA9PSBpICYmIHN0YXJ0RGlyID09IGRpcikgew0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIFJlbW92ZSBhZGphY2VudCBkdXBsaWNhdGVzLg0KDQoNCiAgICAgICAgICBpZiAoY29udC5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbnQubGVuZ3RoOykgew0KICAgICAgICAgICAgICB2YXIgbmogPSAoaiArIDEpICUgY29udC5sZW5ndGg7DQoNCiAgICAgICAgICAgICAgaWYgKGNvbnRbal0gPT0gY29udFtual0gJiYgY29udFtqXSA+PSAtMTI4ICYmIGNvbnRbal0gPD0gMTI3KSB7DQogICAgICAgICAgICAgICAgY29udC5zcGxpY2UoaiwgMSk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgKytqOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIm1lcmdlQW5kRmlsdGVyUmVnaW9ucyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJnZUFuZEZpbHRlclJlZ2lvbnMoY3R4LCBtaW5SZWdpb25BcmVhLCBtZXJnZVJlZ2lvblNpemUsIG1heFJlZ2lvbklkLCBjaGYsIHNyY1JlZywgb3ZlcmxhcHMpIHsNCiAgICAgICAgICB2YXIgdyA9IGNoZi53aWR0aDsNCiAgICAgICAgICB2YXIgaCA9IGNoZi5oZWlnaHQ7DQogICAgICAgICAgdmFyIG5yZWcgPSBtYXhSZWdpb25JZCArIDE7DQogICAgICAgICAgdmFyIHJlZ2lvbnMgPSBuZXcgQXJyYXkobnJlZyk7IC8vIENvbnN0cnVjdCByZWdpb25zDQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5yZWc7ICsraSkgew0KICAgICAgICAgICAgcmVnaW9uc1tpXSA9IG5ldyBSZWNhc3RSZWdpb24uUmVnaW9uKGkpOw0KICAgICAgICAgIH0gLy8gRmluZCBlZGdlIG9mIGEgcmVnaW9uIGFuZCBmaW5kIGNvbm5lY3Rpb25zIGFyb3VuZCB0aGUgY29udG91ci4NCg0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94OCA9IDA7IF94OCA8IHc7ICsrX3g4KSB7DQogICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW194OCArIHkgKiB3XTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTEzID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kxMyA8IG5pOyArK19pMTMpIHsNCiAgICAgICAgICAgICAgICB2YXIgciA9IHNyY1JlZ1tfaTEzXTsNCg0KICAgICAgICAgICAgICAgIGlmIChyID09IDAgfHwgciA+PSBucmVnKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgcmVnID0gcmVnaW9uc1tyXTsNCiAgICAgICAgICAgICAgICByZWcuc3BhbkNvdW50Kys7IC8vIFVwZGF0ZSBmbG9vcnMuDQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gYy5pbmRleDsgaiA8IG5pOyArK2opIHsNCiAgICAgICAgICAgICAgICAgIGlmIChfaTEzID09IGopIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIHZhciBmbG9vcklkID0gc3JjUmVnW2pdOw0KDQogICAgICAgICAgICAgICAgICBpZiAoZmxvb3JJZCA9PSAwIHx8IGZsb29ySWQgPj0gbnJlZykgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgaWYgKGZsb29ySWQgPT0gcikgew0KICAgICAgICAgICAgICAgICAgICByZWcub3ZlcmxhcCA9IHRydWU7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIFJlY2FzdFJlZ2lvbi5hZGRVbmlxdWVGbG9vclJlZ2lvbihyZWcsIGZsb29ySWQpOw0KICAgICAgICAgICAgICAgIH0gLy8gSGF2ZSBmb3VuZCBjb250b3VyDQoNCg0KICAgICAgICAgICAgICAgIGlmIChyZWcuY29ubmVjdGlvbnMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgcmVnLmFyZWFUeXBlID0gY2hmLmFyZWFzW19pMTNdOyAvLyBDaGVjayBpZiB0aGlzIGNlbGwgaXMgbmV4dCB0byBhIGJvcmRlci4NCg0KICAgICAgICAgICAgICAgIHZhciBuZGlyID0gLTE7DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgICAgaWYgKFJlY2FzdFJlZ2lvbi5pc1NvbGlkRWRnZShjaGYsIHNyY1JlZywgX3g4LCB5LCBfaTEzLCBkaXIpKSB7DQogICAgICAgICAgICAgICAgICAgIG5kaXIgPSBkaXI7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChuZGlyICE9IC0xKSB7DQogICAgICAgICAgICAgICAgICAvLyBUaGUgY2VsbCBpcyBhdCBib3JkZXIuDQogICAgICAgICAgICAgICAgICAvLyBXYWxrIGFyb3VuZCB0aGUgY29udG91ciB0byBmaW5kIGFsbCB0aGUgbmVpZ2hib3Vycy4NCiAgICAgICAgICAgICAgICAgIFJlY2FzdFJlZ2lvbi53YWxrQ29udG91cihfeDgsIHksIF9pMTMsIG5kaXIsIGNoZiwgc3JjUmVnLCByZWcuY29ubmVjdGlvbnMpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gUmVtb3ZlIHRvbyBzbWFsbCByZWdpb25zLg0KDQoNCiAgICAgICAgICB2YXIgc3RhY2sgPSBuZXcgQXJyYXkoMzIpOw0KICAgICAgICAgIHZhciB0cmFjZSA9IG5ldyBBcnJheSgzMik7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTE0ID0gMDsgX2kxNCA8IG5yZWc7ICsrX2kxNCkgew0KICAgICAgICAgICAgdmFyIF9yZWcgPSByZWdpb25zW19pMTRdOw0KDQogICAgICAgICAgICBpZiAoX3JlZy5pZCA9PSAwIHx8IChfcmVnLmlkICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChfcmVnLnNwYW5Db3VudCA9PSAwKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoX3JlZy52aXNpdGVkKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBDb3VudCB0aGUgdG90YWwgc2l6ZSBvZiBhbGwgdGhlIGNvbm5lY3RlZCByZWdpb25zLg0KICAgICAgICAgICAgLy8gQWxzbyBrZWVwIHRyYWNrIG9mIHRoZSByZWdpb25zIGNvbm5lY3RzIHRvIGEgdGlsZSBib3JkZXIuDQoNCg0KICAgICAgICAgICAgdmFyIGNvbm5lY3RzVG9Cb3JkZXIgPSBmYWxzZTsNCiAgICAgICAgICAgIHZhciBzcGFuQ291bnQgPSAwOyAvL3N0YWNrID0gW107DQogICAgICAgICAgICAvL3RyYWNlID0gW107DQoNCiAgICAgICAgICAgIHN0YWNrID0gW107DQogICAgICAgICAgICB0cmFjZSA9IFtdOw0KICAgICAgICAgICAgX3JlZy52aXNpdGVkID0gdHJ1ZTsNCiAgICAgICAgICAgIHN0YWNrLnB1c2goX2kxNCk7DQoNCiAgICAgICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgIC8vIFBvcA0KICAgICAgICAgICAgICB2YXIgcmkgPSBzdGFjay5zcGxpY2Uoc3RhY2subGVuZ3RoIC0gMSwgMSk7DQogICAgICAgICAgICAgIHZhciBjcmVnID0gcmVnaW9uc1tyaV07DQogICAgICAgICAgICAgIHNwYW5Db3VudCArPSBjcmVnLnNwYW5Db3VudDsNCiAgICAgICAgICAgICAgdHJhY2UucHVzaChyaSk7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2oyID0gMDsgX2oyIDwgY3JlZy5jb25uZWN0aW9ucy5sZW5ndGg7ICsrX2oyKSB7DQogICAgICAgICAgICAgICAgaWYgKChjcmVnLmNvbm5lY3Rpb25zW19qMl0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkgew0KICAgICAgICAgICAgICAgICAgY29ubmVjdHNUb0JvcmRlciA9IHRydWU7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgbmVpcmVnID0gcmVnaW9uc1tjcmVnLmNvbm5lY3Rpb25zW19qMl1dOw0KDQogICAgICAgICAgICAgICAgaWYgKG5laXJlZy52aXNpdGVkKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAobmVpcmVnLmlkID09IDAgfHwgKG5laXJlZy5pZCAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9IC8vIFZpc2l0DQoNCg0KICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobmVpcmVnLmlkKTsNCiAgICAgICAgICAgICAgICBuZWlyZWcudmlzaXRlZCA9IHRydWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gSWYgdGhlIGFjY3VtdWxhdGVkIHJlZ2lvbnMgc2l6ZSBpcyB0b28gc21hbGwsIHJlbW92ZSBpdC4NCiAgICAgICAgICAgIC8vIERvIG5vdCByZW1vdmUgYXJlYXMgd2hpY2ggY29ubmVjdCB0byB0aWxlIGJvcmRlcnMNCiAgICAgICAgICAgIC8vIGFzIHRoZWlyIHNpemUgY2Fubm90IGJlIGVzdGltYXRlZCBjb3JyZWN0bHkgYW5kIHJlbW92aW5nIHRoZW0NCiAgICAgICAgICAgIC8vIGNhbiBwb3RlbnRpYWxseSByZW1vdmUgbmVjZXNzYXJ5IGFyZWFzLg0KDQoNCiAgICAgICAgICAgIGlmIChzcGFuQ291bnQgPCBtaW5SZWdpb25BcmVhICYmICFjb25uZWN0c1RvQm9yZGVyKSB7DQogICAgICAgICAgICAgIC8vIEtpbGwgYWxsIHZpc2l0ZWQgcmVnaW9ucy4NCiAgICAgICAgICAgICAgZm9yICh2YXIgX2ozID0gMDsgX2ozIDwgdHJhY2UubGVuZ3RoOyArK19qMykgew0KICAgICAgICAgICAgICAgIHJlZ2lvbnNbdHJhY2VbX2ozXV0uc3BhbkNvdW50ID0gMDsNCiAgICAgICAgICAgICAgICByZWdpb25zW3RyYWNlW19qM11dLmlkID0gMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gTWVyZ2UgdG9vIHNtYWxsIHJlZ2lvbnMgdG8gbmVpZ2hib3VyIHJlZ2lvbnMuDQoNCg0KICAgICAgICAgIHZhciBtZXJnZUNvdW50ID0gMDsNCg0KICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgIG1lcmdlQ291bnQgPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTE1ID0gMDsgX2kxNSA8IG5yZWc7ICsrX2kxNSkgew0KICAgICAgICAgICAgICB2YXIgX3JlZzIgPSByZWdpb25zW19pMTVdOw0KDQogICAgICAgICAgICAgIGlmIChfcmVnMi5pZCA9PSAwIHx8IChfcmVnMi5pZCAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoX3JlZzIub3ZlcmxhcCkgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgaWYgKF9yZWcyLnNwYW5Db3VudCA9PSAwKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0gLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSByZWdpb24gc2hvdWxkIGJlIG1lcmdlZC4NCg0KDQogICAgICAgICAgICAgIGlmIChfcmVnMi5zcGFuQ291bnQgPiBtZXJnZVJlZ2lvblNpemUgJiYgUmVjYXN0UmVnaW9uLmlzUmVnaW9uQ29ubmVjdGVkVG9Cb3JkZXIoX3JlZzIpKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0gLy8gU21hbGwgcmVnaW9uIHdpdGggbW9yZSB0aGFuIDEgY29ubmVjdGlvbi4NCiAgICAgICAgICAgICAgLy8gT3IgcmVnaW9uIHdoaWNoIGlzIG5vdCBjb25uZWN0ZWQgdG8gYSBib3JkZXIgYXQgYWxsLg0KICAgICAgICAgICAgICAvLyBGaW5kIHNtYWxsZXN0IG5laWdoYm91ciByZWdpb24gdGhhdCBjb25uZWN0cyB0byB0aGlzIG9uZS4NCg0KDQogICAgICAgICAgICAgIHZhciBzbWFsbGVzdCA9IDB4ZmZmZmZmZjsNCiAgICAgICAgICAgICAgdmFyIG1lcmdlSWQgPSBfcmVnMi5pZDsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfajQgPSAwOyBfajQgPCBfcmVnMi5jb25uZWN0aW9ucy5sZW5ndGg7ICsrX2o0KSB7DQogICAgICAgICAgICAgICAgaWYgKChfcmVnMi5jb25uZWN0aW9uc1tfajRdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciBtcmVnID0gcmVnaW9uc1tfcmVnMi5jb25uZWN0aW9uc1tfajRdXTsNCg0KICAgICAgICAgICAgICAgIGlmIChtcmVnLmlkID09IDAgfHwgKG1yZWcuaWQgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCB8fCBtcmVnLm92ZXJsYXApIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChtcmVnLnNwYW5Db3VudCA8IHNtYWxsZXN0ICYmIFJlY2FzdFJlZ2lvbi5jYW5NZXJnZVdpdGhSZWdpb24oX3JlZzIsIG1yZWcpICYmIFJlY2FzdFJlZ2lvbi5jYW5NZXJnZVdpdGhSZWdpb24obXJlZywgX3JlZzIpKSB7DQogICAgICAgICAgICAgICAgICBzbWFsbGVzdCA9IG1yZWcuc3BhbkNvdW50Ow0KICAgICAgICAgICAgICAgICAgbWVyZ2VJZCA9IG1yZWcuaWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IC8vIEZvdW5kIG5ldyBpZC4NCg0KDQogICAgICAgICAgICAgIGlmIChtZXJnZUlkICE9IF9yZWcyLmlkKSB7DQogICAgICAgICAgICAgICAgdmFyIG9sZElkID0gX3JlZzIuaWQ7DQogICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHJlZ2lvbnNbbWVyZ2VJZF07IC8vIE1lcmdlIG5laWdoYm91cnMuDQoNCiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0UmVnaW9uLm1lcmdlUmVnaW9ucyh0YXJnZXQsIF9yZWcyKSkgew0KICAgICAgICAgICAgICAgICAgLy8gRml4dXAgcmVnaW9ucyBwb2ludGluZyB0byBjdXJyZW50IHJlZ2lvbi4NCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9qNSA9IDA7IF9qNSA8IG5yZWc7ICsrX2o1KSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZWdpb25zW19qNV0uaWQgPT0gMCB8fCAocmVnaW9uc1tfajVdLmlkICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgfSAvLyBJZiBhbm90aGVyIHJlZ2lvbiB3YXMgYWxyZWFkeSBtZXJnZWQgaW50byBjdXJyZW50IHJlZ2lvbg0KICAgICAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIG5pZCBvZiB0aGUgcHJldmlvdXMgcmVnaW9uIHRvby4NCg0KDQogICAgICAgICAgICAgICAgICAgIGlmIChyZWdpb25zW19qNV0uaWQgPT0gb2xkSWQpIHsNCiAgICAgICAgICAgICAgICAgICAgICByZWdpb25zW19qNV0uaWQgPSBtZXJnZUlkOw0KICAgICAgICAgICAgICAgICAgICB9IC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgcmVnaW9uIHdpdGggdGhlIG5ldyBvbmUgaWYgdGhlDQogICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgcmVnaW9ucyBpcyBuZWlnaGJvdXIuDQoNCg0KICAgICAgICAgICAgICAgICAgICBSZWNhc3RSZWdpb24ucmVwbGFjZU5laWdoYm91cihyZWdpb25zW19qNV0sIG9sZElkLCBtZXJnZUlkKTsNCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgbWVyZ2VDb3VudCsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gd2hpbGUgKG1lcmdlQ291bnQgPiAwKTsgLy8gQ29tcHJlc3MgcmVnaW9uIElkcy4NCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kxNiA9IDA7IF9pMTYgPCBucmVnOyArK19pMTYpIHsNCiAgICAgICAgICAgIHJlZ2lvbnNbX2kxNl0ucmVtYXAgPSBmYWxzZTsNCg0KICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2kxNl0uaWQgPT0gMCkgew0KICAgICAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcCBuaWwgcmVnaW9ucy4NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKChyZWdpb25zW19pMTZdLmlkICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIHsNCiAgICAgICAgICAgICAgY29udGludWU7IC8vIFNraXAgZXh0ZXJuYWwgcmVnaW9ucy4NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmVnaW9uc1tfaTE2XS5yZW1hcCA9IHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHJlZ0lkR2VuID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMTcgPSAwOyBfaTE3IDwgbnJlZzsgKytfaTE3KSB7DQogICAgICAgICAgICBpZiAoIXJlZ2lvbnNbX2kxN10ucmVtYXApIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBfb2xkSWQgPSByZWdpb25zW19pMTddLmlkOw0KICAgICAgICAgICAgdmFyIG5ld0lkID0gKytyZWdJZEdlbjsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2o2ID0gX2kxNzsgX2o2IDwgbnJlZzsgKytfajYpIHsNCiAgICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2o2XS5pZCA9PSBfb2xkSWQpIHsNCiAgICAgICAgICAgICAgICByZWdpb25zW19qNl0uaWQgPSBuZXdJZDsNCiAgICAgICAgICAgICAgICByZWdpb25zW19qNl0ucmVtYXAgPSBmYWxzZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIG1heFJlZ2lvbklkID0gcmVnSWRHZW47IC8vIFJlbWFwIHJlZ2lvbnMuDQoNCiAgICAgICAgICBmb3IgKHZhciBfaTE4ID0gMDsgX2kxOCA8IGNoZi5zcGFuQ291bnQ7ICsrX2kxOCkgew0KICAgICAgICAgICAgaWYgKChzcmNSZWdbX2kxOF0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCkgew0KICAgICAgICAgICAgICBzcmNSZWdbX2kxOF0gPSByZWdpb25zW3NyY1JlZ1tfaTE4XV0uaWQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBSZXR1cm4gcmVnaW9ucyB0aGF0IHdlIGZvdW5kIHRvIGJlIG92ZXJsYXBwaW5nLg0KDQoNCiAgICAgICAgICBmb3IgKHZhciBfaTE5ID0gMDsgX2kxOSA8IG5yZWc7ICsrX2kxOSkgew0KICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2kxOV0ub3ZlcmxhcCkgew0KICAgICAgICAgICAgICBvdmVybGFwcy5wdXNoKHJlZ2lvbnNbX2kxOV0uaWQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBtYXhSZWdpb25JZDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRVbmlxdWVDb25uZWN0aW9uIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFVuaXF1ZUNvbm5lY3Rpb24ocmVnLCBuKSB7DQogICAgICAgICAgaWYgKCFyZWcuY29ubmVjdGlvbnMuY29udGFpbnMobikpIHsNCiAgICAgICAgICAgIHJlZy5jb25uZWN0aW9ucy5wdXNoKG4pOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtZXJnZUFuZEZpbHRlckxheWVyUmVnaW9ucyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJnZUFuZEZpbHRlckxheWVyUmVnaW9ucyhjdHgsIG1pblJlZ2lvbkFyZWEsIG1heFJlZ2lvbklkLCBjaGYsIHNyY1JlZywgb3ZlcmxhcHMpIHsNCiAgICAgICAgICB2YXIgdyA9IGNoZi53aWR0aDsNCiAgICAgICAgICB2YXIgaCA9IGNoZi5oZWlnaHQ7DQogICAgICAgICAgdmFyIG5yZWcgPSBtYXhSZWdpb25JZCArIDE7DQogICAgICAgICAgdmFyIHJlZ2lvbnMgPSBuZXcgQXJyYXkobnJlZyk7IC8vIENvbnN0cnVjdCByZWdpb25zDQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5yZWc7ICsraSkgew0KICAgICAgICAgICAgcmVnaW9uc1tpXSA9IG5ldyBSZWdpb24oaSk7DQogICAgICAgICAgfSAvLyBGaW5kIHJlZ2lvbiBuZWlnaGJvdXJzIGFuZCBvdmVybGFwcGluZyByZWdpb25zLg0KDQoNCiAgICAgICAgICB2YXIgbHJlZ3MgPSBuZXcgQXJyYXkoMzIpOw0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94OSA9IDA7IF94OSA8IHc7ICsrX3g5KSB7DQogICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW194OSArIHkgKiB3XTsNCiAgICAgICAgICAgICAgbHJlZ3MgPSBbXTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTIwID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kyMCA8IG5pOyArK19pMjApIHsNCiAgICAgICAgICAgICAgICB2YXIgcyA9IGNoZi5zcGFuc1tfaTIwXTsNCiAgICAgICAgICAgICAgICB2YXIgcmkgPSBzcmNSZWdbX2kyMF07DQoNCiAgICAgICAgICAgICAgICBpZiAocmkgPT0gMCB8fCByaSA+PSBucmVnKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgcmVnID0gcmVnaW9uc1tyaV07DQogICAgICAgICAgICAgICAgcmVnLnNwYW5Db3VudCsrOw0KICAgICAgICAgICAgICAgIHJlZy55bWluID0gTWF0aC5taW4ocmVnLnltaW4sIHMueSk7DQogICAgICAgICAgICAgICAgcmVnLnltYXggPSBNYXRoLm1heChyZWcueW1heCwgcy55KTsgLy8gQ29sbGVjdCBhbGwgcmVnaW9uIGxheWVycy4NCg0KICAgICAgICAgICAgICAgIGxyZWdzLnB1c2gocmkpOyAvLyBVcGRhdGUgbmVpZ2hib3Vycw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgZGlyID0gMDsgZGlyIDwgNDsgKytkaXIpIHsNCiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGF4ID0gX3g5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgYXkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhaSA9IHNyY1JlZ1thaV07DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHJhaSA+IDAgJiYgcmFpIDwgbnJlZyAmJiByYWkgIT0gcmkpIHsNCiAgICAgICAgICAgICAgICAgICAgICBhZGRVbmlxdWVDb25uZWN0aW9uKHJlZywgcmFpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmICgocmFpICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICByZWcuY29ubmVjdHNUb0JvcmRlciA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gLy8gVXBkYXRlIG92ZXJsYXBwaW5nIHJlZ2lvbnMuDQoNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTIxID0gMDsgX2kyMSA8IGxyZWdzLmxlbmd0aCAtIDE7ICsrX2kyMSkgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBfaTIxICsgMTsgaiA8IGxyZWdzLmxlbmd0aDsgKytqKSB7DQogICAgICAgICAgICAgICAgICBpZiAobHJlZ3NbX2kyMV0gIT0gbHJlZ3Nbal0pIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIF9yaSA9IHJlZ2lvbnNbbHJlZ3NbX2kyMV1dOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcmogPSByZWdpb25zW2xyZWdzW2pdXTsNCiAgICAgICAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmFkZFVuaXF1ZUZsb29yUmVnaW9uKF9yaSwgbHJlZ3Nbal0pOw0KICAgICAgICAgICAgICAgICAgICBSZWNhc3RSZWdpb24uYWRkVW5pcXVlRmxvb3JSZWdpb24ocmosIGxyZWdzW19pMjFdKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIENyZWF0ZSAyRCBsYXllcnMgZnJvbSByZWdpb25zLg0KDQoNCiAgICAgICAgICB2YXIgbGF5ZXJJZCA9IDE7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIyID0gMDsgX2kyMiA8IG5yZWc7ICsrX2kyMikgew0KICAgICAgICAgICAgcmVnaW9uc1tfaTIyXS5pZCA9IDA7DQogICAgICAgICAgfSAvLyBNZXJnZSBtb250b25lIHJlZ2lvbnMgdG8gY3JlYXRlIG5vbi1vdmVybGFwcGluZyBhcmVhcy4NCg0KDQogICAgICAgICAgdmFyIHN0YWNrID0gbmV3IEFycmF5KDMyKTsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMjMgPSAxOyBfaTIzIDwgbnJlZzsgKytfaTIzKSB7DQogICAgICAgICAgICB2YXIgcm9vdCA9IHJlZ2lvbnNbX2kyM107IC8vIFNraXAgYWxyZWFkeSB2aXNpdGVkLg0KDQogICAgICAgICAgICBpZiAocm9vdC5pZCAhPSAwKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBTdGFydCBzZWFyY2guDQoNCg0KICAgICAgICAgICAgcm9vdC5pZCA9IGxheWVySWQ7DQogICAgICAgICAgICBzdGFjayA9IFtdOw0KICAgICAgICAgICAgc3RhY2sucHVzaChfaTIzKTsNCg0KICAgICAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgLy8gUG9wIGZyb250DQogICAgICAgICAgICAgIHZhciBfcmVnMyA9IHJlZ2lvbnNbc3RhY2sucmVtb3ZlKDApXTsNCiAgICAgICAgICAgICAgdmFyIG5jb25zID0gX3JlZzMuY29ubmVjdGlvbnMubGVuZ3RoOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9qNyA9IDA7IF9qNyA8IG5jb25zOyArK19qNykgew0KICAgICAgICAgICAgICAgIHZhciBuZWkgPSBfcmVnMy5jb25uZWN0aW9uc1tfajddOw0KICAgICAgICAgICAgICAgIHZhciByZWduID0gcmVnaW9uc1tuZWldOyAvLyBTa2lwIGFscmVhZHkgdmlzaXRlZC4NCg0KICAgICAgICAgICAgICAgIGlmIChyZWduLmlkICE9IDApIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0gLy8gU2tpcCBpZiB0aGUgbmVpZ2hib3VyIGlzIG92ZXJsYXBwaW5nIHJvb3QgcmVnaW9uLg0KDQoNCiAgICAgICAgICAgICAgICB2YXIgb3ZlcmxhcCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByb290LmZsb29ycy5sZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICAgICAgaWYgKHJvb3QuZmxvb3JzW2tdID09IG5laSkgew0KICAgICAgICAgICAgICAgICAgICBvdmVybGFwID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXApIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0gLy8gRGVlcGVuDQoNCg0KICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobmVpKTsgLy8gTWFyayBsYXllciBpZA0KDQogICAgICAgICAgICAgICAgcmVnbi5pZCA9IGxheWVySWQ7IC8vIE1lcmdlIGN1cnJlbnQgbGF5ZXJzIHRvIHJvb3QuDQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgcmVnbi5mbG9vcnMubGVuZ3RoOyArK19rKSB7DQogICAgICAgICAgICAgICAgICBSZWNhc3RSZWdpb24uYWRkVW5pcXVlRmxvb3JSZWdpb24ocm9vdCwgcmVnbi5mbG9vcnNbX2tdKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICByb290LnltaW4gPSBNYXRoLm1pbihyb290LnltaW4sIHJlZ24ueW1pbik7DQogICAgICAgICAgICAgICAgcm9vdC55bWF4ID0gTWF0aC5tYXgocm9vdC55bWF4LCByZWduLnltYXgpOw0KICAgICAgICAgICAgICAgIHJvb3Quc3BhbkNvdW50ICs9IHJlZ24uc3BhbkNvdW50Ow0KICAgICAgICAgICAgICAgIHJlZ24uc3BhbkNvdW50ID0gMDsNCiAgICAgICAgICAgICAgICByb290LmNvbm5lY3RzVG9Cb3JkZXIgPSByb290LmNvbm5lY3RzVG9Cb3JkZXIgfHwgcmVnbi5jb25uZWN0c1RvQm9yZGVyOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGxheWVySWQrKzsNCiAgICAgICAgICB9IC8vIFJlbW92ZSBzbWFsbCByZWdpb25zDQoNCg0KICAgICAgICAgIGZvciAodmFyIF9pMjQgPSAwOyBfaTI0IDwgbnJlZzsgKytfaTI0KSB7DQogICAgICAgICAgICBpZiAocmVnaW9uc1tfaTI0XS5zcGFuQ291bnQgPiAwICYmIHJlZ2lvbnNbX2kyNF0uc3BhbkNvdW50IDwgbWluUmVnaW9uQXJlYSAmJiAhcmVnaW9uc1tfaTI0XS5jb25uZWN0c1RvQm9yZGVyKSB7DQogICAgICAgICAgICAgIHZhciBfcmVnNCA9IHJlZ2lvbnNbX2kyNF0uaWQ7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2o4ID0gMDsgX2o4IDwgbnJlZzsgKytfajgpIHsNCiAgICAgICAgICAgICAgICBpZiAocmVnaW9uc1tfajhdLmlkID09IF9yZWc0KSB7DQogICAgICAgICAgICAgICAgICByZWdpb25zW19qOF0uaWQgPSAwOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gQ29tcHJlc3MgcmVnaW9uIElkcy4NCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kyNSA9IDA7IF9pMjUgPCBucmVnOyArK19pMjUpIHsNCiAgICAgICAgICAgIHJlZ2lvbnNbX2kyNV0ucmVtYXAgPSBmYWxzZTsNCg0KICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2kyNV0uaWQgPT0gMCkgew0KICAgICAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcCBuaWwgcmVnaW9ucy4NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKChyZWdpb25zW19pMjVdLmlkICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIHsNCiAgICAgICAgICAgICAgY29udGludWU7IC8vIFNraXAgZXh0ZXJuYWwgcmVnaW9ucy4NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmVnaW9uc1tfaTI1XS5yZW1hcCA9IHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHJlZ0lkR2VuID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMjYgPSAwOyBfaTI2IDwgbnJlZzsgKytfaTI2KSB7DQogICAgICAgICAgICBpZiAoIXJlZ2lvbnNbX2kyNl0ucmVtYXApIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBvbGRJZCA9IHJlZ2lvbnNbX2kyNl0uaWQ7DQogICAgICAgICAgICB2YXIgbmV3SWQgPSArK3JlZ0lkR2VuOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfajkgPSBfaTI2OyBfajkgPCBucmVnOyArK19qOSkgew0KICAgICAgICAgICAgICBpZiAocmVnaW9uc1tfajldLmlkID09IG9sZElkKSB7DQogICAgICAgICAgICAgICAgcmVnaW9uc1tfajldLmlkID0gbmV3SWQ7DQogICAgICAgICAgICAgICAgcmVnaW9uc1tfajldLnJlbWFwID0gZmFsc2U7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBtYXhSZWdpb25JZCA9IHJlZ0lkR2VuOyAvLyBSZW1hcCByZWdpb25zLg0KDQogICAgICAgICAgZm9yICh2YXIgX2kyNyA9IDA7IF9pMjcgPCBjaGYuc3BhbkNvdW50OyArK19pMjcpIHsNCiAgICAgICAgICAgIGlmICgoc3JjUmVnW19pMjddICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpID09IDApIHsNCiAgICAgICAgICAgICAgc3JjUmVnW19pMjddID0gcmVnaW9uc1tzcmNSZWdbX2kyN11dLmlkOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBtYXhSZWdpb25JZDsNCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoaXMgaXMgdXN1YWxseSB0aGUgc2Vjb25kIHRvIHRoZSBsYXN0IHN0ZXAgaW4gY3JlYXRpbmcgYSBmdWxseSBidWlsdA0KICAgICAgICAvLy8gY29tcGFjdCBoZWlnaHRmaWVsZC4gVGhpcyBzdGVwIGlzIHJlcXVpcmVkIGJlZm9yZSByZWdpb25zIGFyZSBidWlsdA0KICAgICAgICAvLy8gdXNpbmcgI3JjQnVpbGRSZWdpb25zIG9yICNyY0J1aWxkUmVnaW9uc01vbm90b25lLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEFmdGVyIHRoaXMgc3RlcCwgdGhlIGRpc3RhbmNlIGRhdGEgaXMgYXZhaWxhYmxlIHZpYSB0aGUgcmNDb21wYWN0SGVpZ2h0ZmllbGQ6Om1heERpc3RhbmNlDQogICAgICAgIC8vLyBhbmQgcmNDb21wYWN0SGVpZ2h0ZmllbGQ6OmRpc3QgZmllbGRzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBzZWUgcmNDb21wYWN0SGVpZ2h0ZmllbGQsIHJjQnVpbGRSZWdpb25zLCByY0J1aWxkUmVnaW9uc01vbm90b25lDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYnVpbGREaXN0YW5jZUZpZWxkIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VGaWVsZChjdHgsIGNoZikgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJCVUlMRF9ESVNUQU5DRUZJRUxEIik7DQogICAgICAgICAgdmFyIHNyYyA9IG5ldyBBcnJheShjaGYuc3BhbkNvdW50KTsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiRElTVEFOQ0VGSUVMRF9ESVNUIik7DQogICAgICAgICAgdmFyIG1heERpc3QgPSB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlRmllbGQoY2hmLCBzcmMpOw0KICAgICAgICAgIGNoZi5tYXhEaXN0YW5jZSA9IG1heERpc3Q7DQogICAgICAgICAgY3R4LnN0b3BUaW1lcigiRElTVEFOQ0VGSUVMRF9ESVNUIik7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIkRJU1RBTkNFRklFTERfQkxVUiIpOyAvLyBCbHVyDQoNCiAgICAgICAgICBzcmMgPSB0aGlzLmJveEJsdXIoY2hmLCAxLCBzcmMpOyAvLyBTdG9yZSBkaXN0YW5jZS4NCg0KICAgICAgICAgIGNoZi5kaXN0ID0gc3JjOw0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkRJU1RBTkNFRklFTERfQkxVUiIpOw0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX0RJU1RBTkNFRklFTEQiKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJwYWludFJlY3RSZWdpb24iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFpbnRSZWN0UmVnaW9uKG1pbngsIG1heHgsIG1pbnksIG1heHksIHJlZ0lkLCBjaGYsIHNyY1JlZykgew0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IG1pbnk7IHkgPCBtYXh5OyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF95NCA9IG1pbng7IHggPCBtYXh4OyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIF95NCAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkgew0KICAgICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbaV0gIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgew0KICAgICAgICAgICAgICAgICAgc3JjUmVnW2ldID0gcmVnSWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gTm9uLW51bGwgcmVnaW9ucyB3aWxsIGNvbnNpc3Qgb2YgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmcgd2Fsa2FibGUgc3BhbnMgdGhhdCBmb3JtIGEgc2luZ2xlIGNvbnRvdXIuDQogICAgICAgIC8vLyBDb250b3VycyB3aWxsIGZvcm0gc2ltcGxlIHBvbHlnb25zLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIElmIG11bHRpcGxlIHJlZ2lvbnMgZm9ybSBhbiBhcmVhIHRoYXQgaXMgc21hbGxlciB0aGFuIEBwIG1pblJlZ2lvbkFyZWEsIHRoZW4gYWxsIHNwYW5zIHdpbGwgYmUNCiAgICAgICAgLy8vIHJlLWFzc2lnbmVkIHRvIHRoZSB6ZXJvIChudWxsKSByZWdpb24uDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gUGFydGl0aW9uaW5nIGNhbiByZXN1bHQgaW4gc21hbGxlciB0aGFuIG5lY2Vzc2FyeSByZWdpb25zLiBAcCBtZXJnZVJlZ2lvbkFyZWEgaGVscHMNCiAgICAgICAgLy8vIHJlZHVjZSB1bmVjZXNzYXJpbHkgc21hbGwgcmVnaW9ucy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBTZWUgdGhlICNyY0NvbmZpZyBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHJlZ2lvbiBkYXRhIHdpbGwgYmUgYXZhaWxhYmxlIHZpYSB0aGUgcmNDb21wYWN0SGVpZ2h0ZmllbGQ6Om1heFJlZ2lvbnMNCiAgICAgICAgLy8vIGFuZCByY0NvbXBhY3RTcGFuOjpyZWcgZmllbGRzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEB3YXJuaW5nIFRoZSBkaXN0YW5jZSBmaWVsZCBtdXN0IGJlIGNyZWF0ZWQgdXNpbmcgI3JjQnVpbGREaXN0YW5jZUZpZWxkIGJlZm9yZSBhdHRlbXB0aW5nIHRvIGJ1aWxkIHJlZ2lvbnMuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNDb21wYWN0U3BhbiwgcmNCdWlsZERpc3RhbmNlRmllbGQsIHJjQnVpbGRSZWdpb25zTW9ub3RvbmUsIHJjQ29uZmlnDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYnVpbGRSZWdpb25zTW9ub3RvbmUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRSZWdpb25zTW9ub3RvbmUoY3R4LCBjaGYsIGJvcmRlclNpemUsIG1pblJlZ2lvbkFyZWEsIG1lcmdlUmVnaW9uQXJlYSkgew0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJCVUlMRF9SRUdJT05TIik7DQogICAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7DQogICAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0Ow0KICAgICAgICAgIHZhciBpZCA9IDE7DQogICAgICAgICAgdmFyIHNyY1JlZyA9IG5ldyBBcnJheShjaGYuc3BhbkNvdW50KTsNCiAgICAgICAgICB2YXIgbnN3ZWVwcyA9IE1hdGgubWF4KGNoZi53aWR0aCwgY2hmLmhlaWdodCk7DQogICAgICAgICAgc3dlZXBzID0gbmV3IEFycmF5KG5zd2VlcHMpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2VlcHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHN3ZWVwc1tpXSA9IG5ldyBTd2VlcFNwYW4oKTsNCiAgICAgICAgICB9IC8vIE1hcmsgYm9yZGVyIHJlZ2lvbnMuDQoNCg0KICAgICAgICAgIGlmIChib3JkZXJTaXplID4gMCkgew0KICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGJvcmRlciB3aWxsIG5vdCBvdmVyZmxvdy4NCiAgICAgICAgICAgIHZhciBidyA9IE1hdGgubWluKHcsIGJvcmRlclNpemUpOw0KICAgICAgICAgICAgdmFyIGJoID0gTWF0aC5taW4oaCwgYm9yZGVyU2l6ZSk7IC8vIFBhUG9seSByZWdpb25zDQoNCiAgICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCBidywgMCwgaCwgaWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpOw0KICAgICAgICAgICAgaWQrKzsNCiAgICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbih3IC0gYncsIHcsIDAsIGgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTsNCiAgICAgICAgICAgIGlkKys7DQogICAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgMCwgYmgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTsNCiAgICAgICAgICAgIGlkKys7DQogICAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgaCAtIGJoLCBoLCBpZCB8IFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHLCBjaGYsIHNyY1JlZyk7DQogICAgICAgICAgICBpZCsrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGNoZi5ib3JkZXJTaXplID0gYm9yZGVyU2l6ZTsNCiAgICAgICAgICB2YXIgcHJldiA9IG5ldyBBcnJheSgyNTYpOyAvLyBTd2VlcCBvbmUgbGluZSBhdCBhIHRpbWUuDQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gYm9yZGVyU2l6ZTsgeSA8IGggLSBib3JkZXJTaXplOyArK3kpIHsNCiAgICAgICAgICAgIC8vIENvbGxlY3Qgc3BhbnMgZnJvbSB0aGlzIHJvdy4NCiAgICAgICAgICAgIHByZXYuZmlsbCgwLCAwLCBpZCk7DQogICAgICAgICAgICB2YXIgcmlkID0gMTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX3k1ID0gYm9yZGVyU2l6ZTsgeCA8IHcgLSBib3JkZXJTaXplOyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIF95NSAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pMjggPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBfaTI4IDwgbmk7ICsrX2kyOCkgew0KICAgICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW19pMjhdOw0KDQogICAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1tfaTI4XSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9IC8vIC14DQoNCg0KICAgICAgICAgICAgICAgIHZhciBwcmV2aWQgPSAwOw0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgMCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgwKTsNCg0KICAgICAgICAgICAgICAgICAgdmFyIGF5ID0gX3k1ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMCk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIDApOw0KDQogICAgICAgICAgICAgICAgICBpZiAoKHNyY1JlZ1thaV0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCAmJiBjaGYuYXJlYXNbX2kyOF0gPT0gY2hmLmFyZWFzW2FpXSkgew0KICAgICAgICAgICAgICAgICAgICBwcmV2aWQgPSBzcmNSZWdbYWldOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChwcmV2aWQgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgcHJldmlkID0gcmlkKys7DQogICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5yaWQgPSBwcmV2aWQ7DQogICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5ucyA9IDA7DQogICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5uZWkgPSAwOw0KICAgICAgICAgICAgICAgIH0gLy8gLXkNCg0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBfYXg3ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2F5NyA9IF95NSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FpNyA9IGNoZi5jZWxsc1tfYXg3ICsgX2F5NyAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCAzKTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKHNyY1JlZ1tfYWk3XSAhPSAwICYmIChzcmNSZWdbX2FpN10gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCAmJiBjaGYuYXJlYXNbX2kyOF0gPT0gY2hmLmFyZWFzW19haTddKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBuciA9IHNyY1JlZ1tfYWk3XTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoc3dlZXBzW3ByZXZpZF0ubmVpID09IDAgfHwgc3dlZXBzW3ByZXZpZF0ubmVpID09IG5yKSB7DQogICAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubmVpID0gbnI7DQogICAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubnMrKzsNCiAgICAgICAgICAgICAgICAgICAgICBwcmV2W25yXSsrOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHN3ZWVwc1twcmV2aWRdLm5laSA9IFJDX05VTExfTkVJOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgc3JjUmVnW19pMjhdID0gcHJldmlkOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIENyZWF0ZSB1bmlxdWUgSUQuDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2kyOSA9IDE7IF9pMjkgPCByaWQ7ICsrX2kyOSkgew0KICAgICAgICAgICAgICBpZiAoc3dlZXBzW19pMjldLm5laSAhPSBSQ19OVUxMX05FSSAmJiBzd2VlcHNbX2kyOV0ubmVpICE9IDAgJiYgcHJldltzd2VlcHNbX2kyOV0ubmVpXSA9PSBzd2VlcHNbX2kyOV0ubnMpIHsNCiAgICAgICAgICAgICAgICBzd2VlcHNbX2kyOV0uaWQgPSBzd2VlcHNbX2kyOV0ubmVpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHN3ZWVwc1tfaTI5XS5pZCA9IGlkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gUmVtYXAgSURzDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX3k2ID0gYm9yZGVyU2l6ZTsgeCA8IHcgLSBib3JkZXJTaXplOyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIF9jMyA9IGNoZi5jZWxsc1t4ICsgX3k2ICogd107DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kzMCA9IF9jMy5pbmRleCwgX25pNCA9IF9jMy5pbmRleCArIF9jMy5jb3VudDsgX2kzMCA8IF9uaTQ7ICsrX2kzMCkgew0KICAgICAgICAgICAgICAgIGlmIChzcmNSZWdbX2kzMF0gPiAwICYmIHNyY1JlZ1tfaTMwXSA8IHJpZCkgew0KICAgICAgICAgICAgICAgICAgc3JjUmVnW19pMzBdID0gc3dlZXBzW3NyY1JlZ1tfaTMwXV0uaWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIkJVSUxEX1JFR0lPTlNfRklMVEVSIik7IC8vIE1lcmdlIHJlZ2lvbnMgYW5kIGZpbHRlciBvdXQgc21hbGwgcmVnaW9ucy4NCg0KICAgICAgICAgIHZhciBvdmVybGFwcyA9IFtdOw0KICAgICAgICAgIGNoZi5tYXhSZWdpb25zID0gbWVyZ2VBbmRGaWx0ZXJSZWdpb25zKGN0eCwgbWluUmVnaW9uQXJlYSwgbWVyZ2VSZWdpb25BcmVhLCBpZCwgY2hmLCBzcmNSZWcsIG92ZXJsYXBzKTsgLy8gTW9ub3RvbmUgcGFydGl0aW9uaW5nIGRvZXMgbm90IGdlbmVyYXRlIG92ZXJsYXBwaW5nIHJlZ2lvbnMuDQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJCVUlMRF9SRUdJT05TX0ZJTFRFUiIpOyAvLyBTdG9yZSB0aGUgcmVzdWx0IG91dC4NCg0KICAgICAgICAgIGZvciAodmFyIF9pMzEgPSAwOyBfaTMxIDwgY2hmLnNwYW5Db3VudDsgKytfaTMxKSB7DQogICAgICAgICAgICAvLyBpZiAoaSA9PSAxMzQ0KQ0KICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCI0NDMxIikNCiAgICAgICAgICAgIGNoZi5zcGFuc1tfaTMxXS5yZWcgPSBzcmNSZWdbX2kzMV07DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY3R4LnN0b3BUaW1lcigiQlVJTERfUkVHSU9OUyIpOw0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gTm9uLW51bGwgcmVnaW9ucyB3aWxsIGNvbnNpc3Qgb2YgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmcgd2Fsa2FibGUgc3BhbnMgdGhhdCBmb3JtIGEgc2luZ2xlIGNvbnRvdXIuDQogICAgICAgIC8vLyBDb250b3VycyB3aWxsIGZvcm0gc2ltcGxlIHBvbHlnb25zLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIElmIG11bHRpcGxlIHJlZ2lvbnMgZm9ybSBhbiBhcmVhIHRoYXQgaXMgc21hbGxlciB0aGFuIEBwIG1pblJlZ2lvbkFyZWEsIHRoZW4gYWxsIHNwYW5zIHdpbGwgYmUNCiAgICAgICAgLy8vIHJlLWFzc2lnbmVkIHRvIHRoZSB6ZXJvIChudWxsKSByZWdpb24uDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gV2F0ZXJzaGVkIHBhcnRpdGlvbmluZyBjYW4gcmVzdWx0IGluIHNtYWxsZXIgdGhhbiBuZWNlc3NhcnkgcmVnaW9ucywgZXNwZWNpYWxseSBpbiBkaWFnb25hbCBjb3JyaWRvcnMuDQogICAgICAgIC8vLyBAcCBtZXJnZVJlZ2lvbkFyZWEgaGVscHMgcmVkdWNlIHVuZWNlc3NhcmlseSBzbWFsbCByZWdpb25zLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFNlZSB0aGUgI3JjQ29uZmlnIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgcmVnaW9uIGRhdGEgd2lsbCBiZSBhdmFpbGFibGUgdmlhIHRoZSByY0NvbXBhY3RIZWlnaHRmaWVsZDo6bWF4UmVnaW9ucw0KICAgICAgICAvLy8gYW5kIHJjQ29tcGFjdFNwYW46OnJlZyBmaWVsZHMuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHdhcm5pbmcgVGhlIGRpc3RhbmNlIGZpZWxkIG11c3QgYmUgY3JlYXRlZCB1c2luZyAjcmNCdWlsZERpc3RhbmNlRmllbGQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gYnVpbGQgcmVnaW9ucy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAc2VlIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY0NvbXBhY3RTcGFuLCByY0J1aWxkRGlzdGFuY2VGaWVsZCwgcmNCdWlsZFJlZ2lvbnNNb25vdG9uZSwgcmNDb25maWcNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJidWlsZFJlZ2lvbnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRSZWdpb25zKGN0eCwgY2hmLCBib3JkZXJTaXplLCBtaW5SZWdpb25BcmVhLCBtZXJnZVJlZ2lvbkFyZWEpIHsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfUkVHSU9OUyIpOw0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiUkVHSU9OU19XQVRFUlNIRUQiKTsNCiAgICAgICAgICB2YXIgTE9HX05CX1NUQUNLUyA9IDM7DQogICAgICAgICAgdmFyIE5CX1NUQUNLUyA9IDEgPDwgTE9HX05CX1NUQUNLUzsNCiAgICAgICAgICB2YXIgbHZsU3RhY2tzID0gW107DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE5CX1NUQUNLUzsgKytpKSB7DQogICAgICAgICAgICBsdmxTdGFja3MucHVzaChbXSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHN0YWNrID0gbmV3IEFycmF5KDEwMjQpOw0KICAgICAgICAgIHZhciBzcmNSZWcgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCkuZmlsbCgwKTsNCiAgICAgICAgICB2YXIgc3JjRGlzdCA9IG5ldyBBcnJheShjaGYuc3BhbkNvdW50KS5maWxsKDApOw0KICAgICAgICAgIHZhciByZWdpb25JZCA9IDE7DQogICAgICAgICAgdmFyIGxldmVsID0gY2hmLm1heERpc3RhbmNlICsgMSAmIH4xOyAvLyBUT0RPOiBGaWd1cmUgYmV0dGVyIGZvcm11bGEsIGV4cGFuZEl0ZXJzIGRlZmluZXMgaG93IG11Y2ggdGhlDQogICAgICAgICAgLy8gd2F0ZXJzaGVkICJvdmVyZmxvd3MiIGFuZCBzaW1wbGlmaWVzIHRoZSByZWdpb25zLiBUeWluZyBpdCB0bw0KICAgICAgICAgIC8vIGFnZW50IHJhZGl1cyB3YXMgdXN1YWxseSBnb29kIGluZGljYXRpb24gaG93IGdyZWVkeSBpdCBjb3VsZCBiZS4NCiAgICAgICAgICAvLyBjb25zdCBsZXQgZXhwYW5kSXRlcnMgPSA0ICsgd2Fsa2FibGVSYWRpdXMgKiAyOw0KDQogICAgICAgICAgdmFyIGV4cGFuZEl0ZXJzID0gODsNCg0KICAgICAgICAgIGlmIChib3JkZXJTaXplID4gMCkgew0KICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGJvcmRlciB3aWxsIG5vdCBvdmVyZmxvdy4NCiAgICAgICAgICAgIHZhciBidyA9IE1hdGgubWluKHcsIGJvcmRlclNpemUpOw0KICAgICAgICAgICAgdmFyIGJoID0gTWF0aC5taW4oaCwgYm9yZGVyU2l6ZSk7IC8vIFBhUG9seSByZWdpb25zDQoNCiAgICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCBidywgMCwgaCwgcmVnaW9uSWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpOw0KICAgICAgICAgICAgcmVnaW9uSWQrKzsNCiAgICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbih3IC0gYncsIHcsIDAsIGgsIHJlZ2lvbklkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTsNCiAgICAgICAgICAgIHJlZ2lvbklkKys7DQogICAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgMCwgYmgsIHJlZ2lvbklkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTsNCiAgICAgICAgICAgIHJlZ2lvbklkKys7DQogICAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgaCAtIGJoLCBoLCByZWdpb25JZCB8IFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHLCBjaGYsIHNyY1JlZyk7DQogICAgICAgICAgICByZWdpb25JZCsrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGNoZi5ib3JkZXJTaXplID0gYm9yZGVyU2l6ZTsNCiAgICAgICAgICB2YXIgc0lkID0gLTE7DQoNCiAgICAgICAgICB3aGlsZSAobGV2ZWwgPiAwKSB7DQogICAgICAgICAgICBsZXZlbCA9IGxldmVsID49IDIgPyBsZXZlbCAtIDIgOiAwOw0KICAgICAgICAgICAgc0lkID0gc0lkICsgMSAmIE5CX1NUQUNLUyAtIDE7IC8vIGN0eD0+c3RhcnRUaW1lcihSQ19USU1FUl9ESVZJREVfVE9fTEVWRUxTKTsNCg0KICAgICAgICAgICAgaWYgKHNJZCA9PSAwKSB7DQogICAgICAgICAgICAgIFJlY2FzdFJlZ2lvbi5zb3J0Q2VsbHNCeUxldmVsKGxldmVsLCBjaGYsIHNyY1JlZywgTkJfU1RBQ0tTLCBsdmxTdGFja3MsIDEpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmFwcGVuZFN0YWNrcyhsdmxTdGFja3Nbc0lkIC0gMV0sIGx2bFN0YWNrc1tzSWRdLCBzcmNSZWcpOyAvLyBjb3B5IGxlZnQgb3ZlcnMgZnJvbSBsYXN0IGxldmVsDQogICAgICAgICAgICB9IC8vIGN0eD0+c3RvcFRpbWVyKFJDX1RJTUVSX0RJVklERV9UT19MRVZFTFMpOw0KDQoNCiAgICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJCVUlMRF9SRUdJT05TX0VYUEFORCIpOyAvLyBFeHBhbmQgY3VycmVudCByZWdpb25zIHVudGlsIG5vIGVtcHR5IGNvbm5lY3RlZCBjZWxscyBmb3VuZC4NCg0KICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmV4cGFuZFJlZ2lvbnMoZXhwYW5kSXRlcnMsIGxldmVsLCBjaGYsIHNyY1JlZywgc3JjRGlzdCwgbHZsU3RhY2tzW3NJZF0sIGZhbHNlKTsNCiAgICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX1JFR0lPTlNfRVhQQU5EIik7DQogICAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfUkVHSU9OU19GTE9PRCIpOyAvLyBNYXJrIG5ldyByZWdpb25zIHdpdGggSURzLg0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGx2bFN0YWNrc1tzSWRdLmxlbmd0aDsgaiArPSAzKSB7DQogICAgICAgICAgICAgIHZhciBfeDEwID0gbHZsU3RhY2tzW3NJZF1bal07DQogICAgICAgICAgICAgIHZhciB5ID0gbHZsU3RhY2tzW3NJZF1baiArIDFdOw0KICAgICAgICAgICAgICB2YXIgX2kzMiA9IGx2bFN0YWNrc1tzSWRdW2ogKyAyXTsNCg0KICAgICAgICAgICAgICBpZiAoX2kzMiA+PSAwICYmIHNyY1JlZ1tfaTMyXSA9PSAwKSB7DQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdFJlZ2lvbi5mbG9vZFJlZ2lvbihfeDEwLCB5LCBfaTMyLCBsZXZlbCwgcmVnaW9uSWQsIGNoZiwgc3JjUmVnLCBzcmNEaXN0LCBzdGFjaykpIHsNCiAgICAgICAgICAgICAgICAgIHJlZ2lvbklkKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX1JFR0lPTlNfRkxPT0QiKTsNCiAgICAgICAgICB9IC8vIEV4cGFuZCBjdXJyZW50IHJlZ2lvbnMgdW50aWwgbm8gZW1wdHkgY29ubmVjdGVkIGNlbGxzIGZvdW5kLg0KDQoNCiAgICAgICAgICBSZWNhc3RSZWdpb24uZXhwYW5kUmVnaW9ucyhleHBhbmRJdGVycyAqIDgsIDAsIGNoZiwgc3JjUmVnLCBzcmNEaXN0LCBzdGFjaywgdHJ1ZSk7DQogICAgICAgICAgY3R4LnN0b3BUaW1lcigiQlVJTERfUkVHSU9OU19XQVRFUlNIRUQiKTsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfUkVHSU9OU19GSUxURVIiKTsgLy8gTWVyZ2UgcmVnaW9ucyBhbmQgZmlsdGVyIG91dCBzbWFsbGUgcmVnaW9ucy4NCg0KICAgICAgICAgIHZhciBvdmVybGFwcyA9IFtdOw0KICAgICAgICAgIGNoZi5tYXhSZWdpb25zID0gdGhpcy5tZXJnZUFuZEZpbHRlclJlZ2lvbnMoY3R4LCBtaW5SZWdpb25BcmVhLCBtZXJnZVJlZ2lvbkFyZWEsIHJlZ2lvbklkLCBjaGYsIHNyY1JlZywgb3ZlcmxhcHMpOyAvLyBJZiBvdmVybGFwcGluZyByZWdpb25zIHdlcmUgZm91bmQgZHVyaW5nIG1lcmdpbmcsIHNwbGl0IHRob3NlIHJlZ2lvbnMuDQoNCiAgICAgICAgICBpZiAob3ZlcmxhcHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oInJjQnVpbGRSZWdpb25zOiAiICsgb3ZlcmxhcHMubGVuZ3RoICsgIiBvdmVybGFwcGluZyByZWdpb25zLiIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX1JFR0lPTlNfRklMVEVSIik7IC8vIFdyaXRlIHRoZSByZXN1bHQgb3V0Lg0KDQogICAgICAgICAgZm9yICh2YXIgX2kzMyA9IDA7IF9pMzMgPCBjaGYuc3BhbkNvdW50OyArK19pMzMpIHsNCiAgICAgICAgICAgIC8vIGlmIChpID09IDEzNDQpDQogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIjQ0MzEiKQ0KICAgICAgICAgICAgY2hmLnNwYW5zW19pMzNdLnJlZyA9IHNyY1JlZ1tfaTMzXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJCVUlMRF9SRUdJT05TIik7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYnVpbGRMYXllclJlZ2lvbnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRMYXllclJlZ2lvbnMoY3R4LCBjaGYsIGJvcmRlclNpemUsIG1pblJlZ2lvbkFyZWEpIHsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfUkVHSU9OUyIpOw0KICAgICAgICAgIHZhciB3ID0gY2hmLndpZHRoOw0KICAgICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsNCiAgICAgICAgICB2YXIgaWQgPSAxOw0KICAgICAgICAgIHZhciBzcmNSZWcgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCk7DQogICAgICAgICAgdmFyIG5zd2VlcHMgPSBNYXRoLm1heChjaGYud2lkdGgsIGNoZi5oZWlnaHQpOw0KICAgICAgICAgIHZhciBzd2VlcHMgPSBuZXcgQXJyYXlMaXN0KG5zd2VlcHMpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2VlcHMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHN3ZWVwc1tpXSA9IG5ldyBTd2VlcFNwYW4oKTsNCiAgICAgICAgICB9IC8vIE1hcmsgYm9yZGVyIHJlZ2lvbnMuDQoNCg0KICAgICAgICAgIGlmIChib3JkZXJTaXplID4gMCkgew0KICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGJvcmRlciB3aWxsIG5vdCBvdmVyZmxvdy4NCiAgICAgICAgICAgIHZhciBidyA9IE1hdGgubWluKHcsIGJvcmRlclNpemUpOw0KICAgICAgICAgICAgdmFyIGJoID0gTWF0aC5taW4oaCwgYm9yZGVyU2l6ZSk7IC8vIFBhUG9seSByZWdpb25zDQoNCiAgICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCBidywgMCwgaCwgaWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpOw0KICAgICAgICAgICAgaWQrKzsNCiAgICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbih3IC0gYncsIHcsIDAsIGgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTsNCiAgICAgICAgICAgIGlkKys7DQogICAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgMCwgYmgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTsNCiAgICAgICAgICAgIGlkKys7DQogICAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgaCAtIGJoLCBoLCBpZCB8IFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHLCBjaGYsIHNyY1JlZyk7DQogICAgICAgICAgICBpZCsrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGNoZi5ib3JkZXJTaXplID0gYm9yZGVyU2l6ZTsNCiAgICAgICAgICB2YXIgcHJldiA9IG5ldyBBcnJheSgyNTYpOyAvLyBTd2VlcCBvbmUgbGluZSBhdCBhIHRpbWUuDQoNCiAgICAgICAgICBmb3IgKHZhciB5ID0gYm9yZGVyU2l6ZTsgeSA8IGggLSBib3JkZXJTaXplOyArK3kpIHsNCiAgICAgICAgICAgIC8vIENvbGxlY3Qgc3BhbnMgZnJvbSB0aGlzIHJvdy4NCiAgICAgICAgICAgIHByZXYuZmlsbCgwLCAwLCBpZCk7DQogICAgICAgICAgICB2YXIgcmlkID0gMTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX3k3ID0gYm9yZGVyU2l6ZTsgeCA8IHcgLSBib3JkZXJTaXplOyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIF95NyAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pMzQgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBfaTM0IDwgbmk7ICsrX2kzNCkgew0KICAgICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW19pMzRdOw0KDQogICAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1tfaTM0XSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9IC8vIC14DQoNCg0KICAgICAgICAgICAgICAgIHZhciBwcmV2aWQgPSAwOw0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgMCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgwKTsNCg0KICAgICAgICAgICAgICAgICAgdmFyIGF5ID0gX3k3ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMCk7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIDApOw0KDQogICAgICAgICAgICAgICAgICBpZiAoKHNyY1JlZ1thaV0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCAmJiBjaGYuYXJlYXNbX2kzNF0gPT0gY2hmLmFyZWFzW2FpXSkgew0KICAgICAgICAgICAgICAgICAgICBwcmV2aWQgPSBzcmNSZWdbYWldOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChwcmV2aWQgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgcHJldmlkID0gcmlkKys7DQogICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5yaWQgPSBwcmV2aWQ7DQogICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5ucyA9IDA7DQogICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5uZWkgPSAwOw0KICAgICAgICAgICAgICAgIH0gLy8gLXkNCg0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBfYXg4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2F5OCA9IF95NyArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDMpOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2FpOCA9IGNoZi5jZWxsc1tfYXg4ICsgX2F5OCAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCAzKTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKHNyY1JlZ1tfYWk4XSAhPSAwICYmIChzcmNSZWdbX2FpOF0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCAmJiBjaGYuYXJlYXNbX2kzNF0gPT0gY2hmLmFyZWFzW19haThdKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBuciA9IHNyY1JlZ1tfYWk4XTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoc3dlZXBzW3ByZXZpZF0ubmVpID09IDAgfHwgc3dlZXBzW3ByZXZpZF0ubmVpID09IG5yKSB7DQogICAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubmVpID0gbnI7DQogICAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubnMrKzsNCiAgICAgICAgICAgICAgICAgICAgICBwcmV2W25yXSsrOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHN3ZWVwc1twcmV2aWRdLm5laSA9IFJDX05VTExfTkVJOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgc3JjUmVnW19pMzRdID0gcHJldmlkOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIENyZWF0ZSB1bmlxdWUgSUQuDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2kzNSA9IDE7IF9pMzUgPCByaWQ7ICsrX2kzNSkgew0KICAgICAgICAgICAgICBpZiAoc3dlZXBzW19pMzVdLm5laSAhPSBSQ19OVUxMX05FSSAmJiBzd2VlcHNbX2kzNV0ubmVpICE9IDAgJiYgcHJldltzd2VlcHNbX2kzNV0ubmVpXSA9PSBzd2VlcHNbX2kzNV0ubnMpIHsNCiAgICAgICAgICAgICAgICBzd2VlcHNbX2kzNV0uaWQgPSBzd2VlcHNbX2kzNV0ubmVpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHN3ZWVwc1tfaTM1XS5pZCA9IGlkKys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gUmVtYXAgSURzDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX3k4ID0gYm9yZGVyU2l6ZTsgeCA8IHcgLSBib3JkZXJTaXplOyArK3gpIHsNCiAgICAgICAgICAgICAgdmFyIF9jNCA9IGNoZi5jZWxsc1t4ICsgX3k4ICogd107DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kzNiA9IF9jNC5pbmRleCwgX25pNSA9IF9jNC5pbmRleCArIF9jNC5jb3VudDsgX2kzNiA8IF9uaTU7ICsrX2kzNikgew0KICAgICAgICAgICAgICAgIGlmIChzcmNSZWdbX2kzNl0gPiAwICYmIHNyY1JlZ1tfaTM2XSA8IHJpZCkgew0KICAgICAgICAgICAgICAgICAgc3JjUmVnW19pMzZdID0gc3dlZXBzW3NyY1JlZ1tfaTM2XV0uaWQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIkJVSUxEX1JFR0lPTlNfRklMVEVSIik7IC8vIE1lcmdlIG1vbm90b25lIHJlZ2lvbnMgdG8gbGF5ZXJzIGFuZCByZW1vdmUgc21hbGwgcmVnaW9ucy4NCg0KICAgICAgICAgIHZhciBvdmVybGFwcyA9IFtdOw0KICAgICAgICAgIGNoZi5tYXhSZWdpb25zID0gbWVyZ2VBbmRGaWx0ZXJMYXllclJlZ2lvbnMoY3R4LCBtaW5SZWdpb25BcmVhLCBpZCwgY2hmLCBzcmNSZWcsIG92ZXJsYXBzKTsNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJCVUlMRF9SRUdJT05TX0ZJTFRFUiIpOyAvLyBTdG9yZSB0aGUgcmVzdWx0IG91dC4NCg0KICAgICAgICAgIGZvciAodmFyIF9pMzcgPSAwOyBfaTM3IDwgY2hmLnNwYW5Db3VudDsgKytfaTM3KSB7DQogICAgICAgICAgICBjaGYuc3BhbnNbX2kzN10ucmVnID0gc3JjUmVnW19pMzddOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX1JFR0lPTlMiKTsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gUmVjYXN0UmVnaW9uOw0KICAgIH0oKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RSZWdpb24sICJSQ19OVUxMX05FSSIsIDB4ZmZmKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RSZWdpb24sICJTd2VlcFNwYW4iLCAoX3RlbXAkMSA9IGZ1bmN0aW9uIFN3ZWVwU3BhbigpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTd2VlcFNwYW4pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJpZCIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaWQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm5zIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuZWkiLCB2b2lkIDApOw0KICAgIH0gLy8gbmVpZ2hib3VyIGlkDQogICAgLCBfdGVtcCQxKSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0UmVnaW9uLCAiUmVnaW9uIiwgKF90ZW1wMiQxID0gLy8gTnVtYmVyIG9mIHNwYW5zIGJlbG9uZ2luZyB0byB0aGlzIHJlZ2lvbg0KICAgIC8vIElEIG9mIHRoZSByZWdpb24NCiAgICAvLyBBcmUgdHlwZS4NCiAgICBmdW5jdGlvbiBSZWdpb24oaSkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlZ2lvbik7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3BhbkNvdW50IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaWQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcmVhVHlwZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlbWFwIiwgZmFsc2UpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZpc2l0ZWQiLCBmYWxzZSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib3ZlcmxhcCIsIGZhbHNlKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb25uZWN0c1RvQm9yZGVyIiwgZmFsc2UpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInltaW4iLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ5bWF4IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29ubmVjdGlvbnMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZmxvb3JzIiwgW10pOw0KDQogICAgICB0aGlzLmlkID0gaTsNCiAgICAgIHRoaXMueW1pbiA9IDB4RkZGRjsNCiAgICAgIHRoaXMuY29ubmVjdGlvbnMgPSBbXTsNCiAgICAgIHRoaXMuZmxvb3JzID0gW107DQogICAgfSwgX3RlbXAyJDEpKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiBSZXByZXNlbnRzIGEgZ3JvdXAgb2YgcmVsYXRlZCBjb250b3Vycy4gKi8NCiAgICB2YXIgQ29udG91clNldCA9IGZ1bmN0aW9uIENvbnRvdXJTZXQoKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91clNldCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29udHMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1pbiIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm1heCIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY3MiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjaCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndpZHRoIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaGVpZ2h0IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm9yZGVyU2l6ZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1heEVycm9yIiwgMCk7DQogICAgfTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiBSZXByZXNlbnRzIGEgcG9seWdvbiBtZXNoIHN1aXRhYmxlIGZvciB1c2UgaW4gYnVpbGRpbmcgYSBuYXZpZ2F0aW9uIG1lc2guICovDQogICAgdmFyIFBvbHlNZXNoID0gZnVuY3Rpb24gUG9seU1lc2goKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9seU1lc2gpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZlcnRzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBvbHlzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlZ3MiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYXJlYXMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnZlcnRzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnBvbHlzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnZwIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWF4cG9seXMiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmbGFncyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWF4IiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjcyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNoIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm9yZGVyU2l6ZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1heEVkZ2VFcnJvciIsIDApOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBhcnJheWNvcHkkMShvbmUsIG9uZVN0YXJ0LCB0d28sIHR3b1N0YXJ0LCBsZW4pIHsNCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsNCiAgICAgICAgdHdvW3R3b1N0YXJ0ICsgaV0gPSBvbmVbb25lU3RhcnQgKyBpXTsNCiAgICAgIH0NCiAgICB9DQoNCiAgICB2YXIgRWRnZSA9IGZ1bmN0aW9uIEVkZ2UoKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRnZSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmVydCIsIG5ldyBBcnJheSgyKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicG9seUVkZ2UiLCBuZXcgQXJyYXkoMikpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBvbHkiLCBuZXcgQXJyYXkoMikpOw0KICAgIH07DQoNCiAgICB2YXIgUmVjYXN0TWVzaCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBSZWNhc3RNZXNoKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0TWVzaCk7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RNZXNoLCBudWxsLCBbew0KICAgICAgICBrZXk6ICJidWlsZE1lc2hBZGphY2VuY3kiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRNZXNoQWRqYWNlbmN5KHBvbHlzLCBucG9seXMsIG52ZXJ0cywgdmVydHNQZXJQb2x5KSB7DQogICAgICAgICAgLy8gQmFzZWQgb24gY29kZSBieSBFcmljIExlbmd5ZWwgZnJvbToNCiAgICAgICAgICAvLyBodHRwOi8vd3d3LnRlcmF0aG9uLmNvbS9jb2RlL2VkZ2VzLnBocA0KICAgICAgICAgIHZhciBtYXhFZGdlQ291bnQgPSBucG9seXMgKiB2ZXJ0c1BlclBvbHk7DQogICAgICAgICAgdmFyIGZpcnN0RWRnZSA9IG5ldyBBcnJheShudmVydHMgKyBtYXhFZGdlQ291bnQpOw0KICAgICAgICAgIHZhciBuZXh0RWRnZSA9IG52ZXJ0czsNCiAgICAgICAgICB2YXIgZWRnZUNvdW50ID0gMDsNCiAgICAgICAgICB2YXIgZWRnZXMgPSBuZXcgQXJyYXkobWF4RWRnZUNvdW50KTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnZlcnRzOyBpKyspIHsNCiAgICAgICAgICAgIGZpcnN0RWRnZVtpXSA9IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBucG9seXM7ICsrX2kpIHsNCiAgICAgICAgICAgIHZhciB0ID0gX2kgKiB2ZXJ0c1BlclBvbHkgKiAyOw0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZlcnRzUGVyUG9seTsgKytqKSB7DQogICAgICAgICAgICAgIGlmIChwb2x5c1t0ICsgal0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpIGJyZWFrOw0KICAgICAgICAgICAgICB2YXIgdjAgPSBwb2x5c1t0ICsgal07DQogICAgICAgICAgICAgIHZhciB2MSA9IGogKyAxID49IHZlcnRzUGVyUG9seSB8fCBwb2x5c1t0ICsgaiArIDFdID09IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYID8gcG9seXNbdCArIDBdIDogcG9seXNbdCArIGogKyAxXTsNCg0KICAgICAgICAgICAgICBpZiAodjAgPCB2MSkgew0KICAgICAgICAgICAgICAgIHZhciBlZGdlID0gbmV3IEVkZ2UoKTsNCiAgICAgICAgICAgICAgICBlZGdlc1tlZGdlQ291bnRdID0gZWRnZTsNCiAgICAgICAgICAgICAgICBlZGdlLnZlcnRbMF0gPSB2MDsNCiAgICAgICAgICAgICAgICBlZGdlLnZlcnRbMV0gPSB2MTsNCiAgICAgICAgICAgICAgICBlZGdlLnBvbHlbMF0gPSBfaTsNCiAgICAgICAgICAgICAgICBlZGdlLnBvbHlFZGdlWzBdID0gajsNCiAgICAgICAgICAgICAgICBlZGdlLnBvbHlbMV0gPSBfaTsNCiAgICAgICAgICAgICAgICBlZGdlLnBvbHlFZGdlWzFdID0gMDsgLy8gSW5zZXJ0IGVkZ2UNCg0KICAgICAgICAgICAgICAgIGZpcnN0RWRnZVtuZXh0RWRnZSArIGVkZ2VDb3VudF0gPSBmaXJzdEVkZ2VbdjBdOw0KICAgICAgICAgICAgICAgIGZpcnN0RWRnZVt2MF0gPSBlZGdlQ291bnQ7DQogICAgICAgICAgICAgICAgZWRnZUNvdW50Kys7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBucG9seXM7ICsrX2kyKSB7DQogICAgICAgICAgICB2YXIgX3QgPSBfaTIgKiB2ZXJ0c1BlclBvbHkgKiAyOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaiA9IDA7IF9qIDwgdmVydHNQZXJQb2x5OyArK19qKSB7DQogICAgICAgICAgICAgIGlmIChwb2x5c1tfdCArIF9qXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgYnJlYWs7DQogICAgICAgICAgICAgIHZhciBfdiA9IHBvbHlzW190ICsgX2pdOw0KDQogICAgICAgICAgICAgIHZhciBfdjIgPSBfaiArIDEgPj0gdmVydHNQZXJQb2x5IHx8IHBvbHlzW190ICsgX2ogKyAxXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCA/IHBvbHlzW190ICsgMF0gOiBwb2x5c1tfdCArIF9qICsgMV07DQoNCiAgICAgICAgICAgICAgaWYgKF92ID4gX3YyKSB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IGZpcnN0RWRnZVtfdjJdOyBlICE9IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYOyBlID0gZmlyc3RFZGdlW25leHRFZGdlICsgZV0pIHsNCiAgICAgICAgICAgICAgICAgIHZhciBfZWRnZSA9IGVkZ2VzW2VdOw0KDQogICAgICAgICAgICAgICAgICBpZiAoX2VkZ2UudmVydFsxXSA9PSBfdiAmJiBfZWRnZS5wb2x5WzBdID09IF9lZGdlLnBvbHlbMV0pIHsNCiAgICAgICAgICAgICAgICAgICAgX2VkZ2UucG9seVsxXSA9IF9pMjsNCiAgICAgICAgICAgICAgICAgICAgX2VkZ2UucG9seUVkZ2VbMV0gPSBfajsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBTdG9yZSBhZGphY2VuY3kNCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgZWRnZUNvdW50OyArK19pMykgew0KICAgICAgICAgICAgdmFyIF9lID0gZWRnZXNbX2kzXTsNCg0KICAgICAgICAgICAgaWYgKF9lLnBvbHlbMF0gIT0gX2UucG9seVsxXSkgew0KICAgICAgICAgICAgICB2YXIgcDAgPSBfZS5wb2x5WzBdICogdmVydHNQZXJQb2x5ICogMjsNCiAgICAgICAgICAgICAgdmFyIHAxID0gX2UucG9seVsxXSAqIHZlcnRzUGVyUG9seSAqIDI7DQogICAgICAgICAgICAgIHBvbHlzW3AwICsgdmVydHNQZXJQb2x5ICsgX2UucG9seUVkZ2VbMF1dID0gX2UucG9seVsxXTsNCiAgICAgICAgICAgICAgcG9seXNbcDEgKyB2ZXJ0c1BlclBvbHkgKyBfZS5wb2x5RWRnZVsxXV0gPSBfZS5wb2x5WzBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjb21wdXRlVmVydGV4SGFzaCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wdXRlVmVydGV4SGFzaCh4LCB5LCB6KSB7DQogICAgICAgICAgdmFyIGgxID0gMHg4ZGE2YjM0MzsgLy8gTGFyZ2UgbXVsdGlwbGljYXRpdmUgY29uc3RhbnRzOw0KDQogICAgICAgICAgdmFyIGgyID0gMHhkODE2Mzg0MTsgLy8gaGVyZSBhcmJpdHJhcmlseSBjaG9zZW4gcHJpbWVzDQoNCiAgICAgICAgICB2YXIgaDMgPSAweGNiMWFiMzE7DQogICAgICAgICAgdmFyIG4gPSBoMSAqIHggKyBoMiAqIHkgKyBoMyAqIHo7DQogICAgICAgICAgcmV0dXJuIG4gJiBSZWNhc3RNZXNoLlZFUlRFWF9CVUNLRVRfQ09VTlQgLSAxOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZFZlcnRleCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRWZXJ0ZXgoeCwgeSwgeiwgdmVydHMsIGZpcnN0VmVydCwgbmV4dFZlcnQsIG52KSB7DQogICAgICAgICAgdmFyIGJ1Y2tldCA9IFJlY2FzdE1lc2guY29tcHV0ZVZlcnRleEhhc2goeCwgMCwgeik7DQogICAgICAgICAgdmFyIGkgPSBmaXJzdFZlcnRbYnVja2V0XTsNCg0KICAgICAgICAgIHdoaWxlIChpICE9IC0xKSB7DQogICAgICAgICAgICB2YXIgX3YzID0gaSAqIDM7DQoNCiAgICAgICAgICAgIGlmICh2ZXJ0c1tfdjMgKyAwXSA9PSB4ICYmIE1hdGguYWJzKHZlcnRzW192MyArIDFdIC0geSkgPD0gMiAmJiB2ZXJ0c1tfdjMgKyAyXSA9PSB6KSByZXR1cm4gW2ksIG52XTsNCiAgICAgICAgICAgIGkgPSBuZXh0VmVydFtpXTsgLy8gbmV4dA0KICAgICAgICAgIH0gLy8gQ291bGQgbm90IGZpbmQsIGNyZWF0ZSBuZXcuDQoNCg0KICAgICAgICAgIGkgPSBudjsNCiAgICAgICAgICBudisrOw0KICAgICAgICAgIHZhciB2ID0gaSAqIDM7DQogICAgICAgICAgdmVydHNbdiArIDBdID0geDsNCiAgICAgICAgICB2ZXJ0c1t2ICsgMV0gPSB5Ow0KICAgICAgICAgIHZlcnRzW3YgKyAyXSA9IHo7DQogICAgICAgICAgbmV4dFZlcnRbaV0gPSBmaXJzdFZlcnRbYnVja2V0XTsNCiAgICAgICAgICBmaXJzdFZlcnRbYnVja2V0XSA9IGk7DQogICAgICAgICAgcmV0dXJuIFtpLCBudl07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicHJldiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2KGksIG4pIHsNCiAgICAgICAgICByZXR1cm4gaSAtIDEgPj0gMCA/IGkgLSAxIDogbiAtIDE7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibmV4dCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KGksIG4pIHsNCiAgICAgICAgICByZXR1cm4gaSArIDEgPCBuID8gaSArIDEgOiAwOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFyZWEyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFyZWEyKHZlcnRzLCBhLCBiLCBjKSB7DQogICAgICAgICAgcmV0dXJuICh2ZXJ0c1tiICsgMF0gLSB2ZXJ0c1thICsgMF0pICogKHZlcnRzW2MgKyAyXSAtIHZlcnRzW2EgKyAyXSkgLSAodmVydHNbYyArIDBdIC0gdmVydHNbYSArIDBdKSAqICh2ZXJ0c1tiICsgMl0gLSB2ZXJ0c1thICsgMl0pOw0KICAgICAgICB9IC8vIFJldHVybnMgdHJ1ZSBpZmYgYyBpcyBzdHJpY3RseSB0byB0aGUgbGVmdCBvZiB0aGUgZGlyZWN0ZWQNCiAgICAgICAgLy8gbGluZSB0aHJvdWdoIGEgdG8gYi4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJsZWZ0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxlZnQodmVydHMsIGEsIGIsIGMpIHsNCiAgICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5hcmVhMih2ZXJ0cywgYSwgYiwgYykgPCAwOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImxlZnRPbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBsZWZ0T24odmVydHMsIGEsIGIsIGMpIHsNCiAgICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5hcmVhMih2ZXJ0cywgYSwgYiwgYykgPD0gMDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjb2xsaW5lYXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29sbGluZWFyKHZlcnRzLCBhLCBiLCBjKSB7DQogICAgICAgICAgcmV0dXJuIFJlY2FzdE1lc2guYXJlYTIodmVydHMsIGEsIGIsIGMpID09IDA7DQogICAgICAgIH0gLy8gUmV0dXJucyB0cnVlIGlmZiBhYiBwcm9wZXJseSBpbnRlcnNlY3RzIGNkOiB0aGV5IHNoYXJlDQogICAgICAgIC8vIGEgcG9Qb2x5IGludGVyaW9yIHRvIGJvdGggc2VnbWVudHMuIFRoZSBwcm9wZXJuZXNzIG9mIHRoZQ0KICAgICAgICAvLyBpbnRlcnNlY3Rpb24gaXMgZW5zdXJlZCBieSB1c2luZyBzdHJpY3QgbGVmdG5lc3MuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaW50ZXJzZWN0UHJvcCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlcnNlY3RQcm9wKHZlcnRzLCBhLCBiLCBjLCBkKSB7DQogICAgICAgICAgLy8gRWxpbWluYXRlIGltcHJvcGVyIGNhc2VzLg0KICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmNvbGxpbmVhcih2ZXJ0cywgYSwgYiwgYykgfHwgUmVjYXN0TWVzaC5jb2xsaW5lYXIodmVydHMsIGEsIGIsIGQpIHx8IFJlY2FzdE1lc2guY29sbGluZWFyKHZlcnRzLCBjLCBkLCBhKSB8fCBSZWNhc3RNZXNoLmNvbGxpbmVhcih2ZXJ0cywgYywgZCwgYikpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5sZWZ0KHZlcnRzLCBhLCBiLCBjKSBeIFJlY2FzdE1lc2gubGVmdCh2ZXJ0cywgYSwgYiwgZCkgJiYgUmVjYXN0TWVzaC5sZWZ0KHZlcnRzLCBjLCBkLCBhKSBeIFJlY2FzdE1lc2gubGVmdCh2ZXJ0cywgYywgZCwgYik7DQogICAgICAgIH0gLy8gUmV0dXJucyBUIGlmZiAoYSxiLGMpIGFyZSBjb2xsaW5lYXIgYW5kIHBvUG9seSBjIGxpZXMNCiAgICAgICAgLy8gb24gdGhlIGNsb3NlZCBzZWdlbWVudCBhYi4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJiZXR3ZWVuIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJldHdlZW4odmVydHMsIGEsIGIsIGMpIHsNCiAgICAgICAgICBpZiAoIVJlY2FzdE1lc2guY29sbGluZWFyKHZlcnRzLCBhLCBiLCBjKSkgcmV0dXJuIGZhbHNlOyAvLyBJZiBhYiBub3QgdmVydGljYWwsIGNoZWNrIGJldHdlZW5uZXNzIG9uIHg7IGVsc2Ugb24geS4NCg0KICAgICAgICAgIGlmICh2ZXJ0c1thICsgMF0gIT0gdmVydHNbYiArIDBdKSByZXR1cm4gdmVydHNbYSArIDBdIDw9IHZlcnRzW2MgKyAwXSAmJiB2ZXJ0c1tjICsgMF0gPD0gdmVydHNbYiArIDBdIHx8IHZlcnRzW2EgKyAwXSA+PSB2ZXJ0c1tjICsgMF0gJiYgdmVydHNbYyArIDBdID49IHZlcnRzW2IgKyAwXTtlbHNlIHJldHVybiB2ZXJ0c1thICsgMl0gPD0gdmVydHNbYyArIDJdICYmIHZlcnRzW2MgKyAyXSA8PSB2ZXJ0c1tiICsgMl0gfHwgdmVydHNbYSArIDJdID49IHZlcnRzW2MgKyAyXSAmJiB2ZXJ0c1tjICsgMl0gPj0gdmVydHNbYiArIDJdOw0KICAgICAgICB9IC8vIFJldHVybnMgdHJ1ZSBpZmYgc2VnbWVudHMgYWIgYW5kIGNkIGludGVyc2VjdCwgcHJvcGVybHkgb3IgaW1wcm9wZXJseS4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpbnRlcnNlY3QiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJzZWN0KHZlcnRzLCBhLCBiLCBjLCBkKSB7DQogICAgICAgICAgaWYgKFJlY2FzdE1lc2guaW50ZXJzZWN0UHJvcCh2ZXJ0cywgYSwgYiwgYywgZCkpIHJldHVybiB0cnVlO2Vsc2UgaWYgKFJlY2FzdE1lc2guYmV0d2Vlbih2ZXJ0cywgYSwgYiwgYykgfHwgUmVjYXN0TWVzaC5iZXR3ZWVuKHZlcnRzLCBhLCBiLCBkKSB8fCBSZWNhc3RNZXNoLmJldHdlZW4odmVydHMsIGMsIGQsIGEpIHx8IFJlY2FzdE1lc2guYmV0d2Vlbih2ZXJ0cywgYywgZCwgYikpIHJldHVybiB0cnVlO2Vsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZlcXVhbCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZXF1YWwodmVydHMsIGEsIGIpIHsNCiAgICAgICAgICByZXR1cm4gdmVydHNbYSArIDBdID09IHZlcnRzW2IgKyAwXSAmJiB2ZXJ0c1thICsgMl0gPT0gdmVydHNbYiArIDJdOw0KICAgICAgICB9IC8vIFJldHVybnMgVCBpZmYgKHZfaSwgdl9qKSBpcyBhIHByb3BlciBpbnRlcm5hbCAqb3IqIGV4dGVybmFsDQogICAgICAgIC8vIGRpYWdvbmFsIG9mIFAsICppZ25vcmluZyBlZGdlcyBpbmNpZGVudCB0byB2X2kgYW5kIHZfaiouDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlhZ29uYWxpZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaWFnb25hbGllKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKSB7DQogICAgICAgICAgdmFyIGQwID0gKGluZGljZXNbaV0gJiAweDBmZmZmZmZmKSAqIDQ7DQogICAgICAgICAgdmFyIGQxID0gKGluZGljZXNbal0gJiAweDBmZmZmZmZmKSAqIDQ7IC8vIEZvciBlYWNoIGVkZ2UgKGssaysxKSBvZiBQDQoNCiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykgew0KICAgICAgICAgICAgdmFyIGsxID0gUmVjYXN0TWVzaC5uZXh0KGssIG4pOyAvLyBTa2lwIGVkZ2VzIGluY2lkZW50IHRvIGkgb3Igag0KDQogICAgICAgICAgICBpZiAoIShrID09IGkgfHwgazEgPT0gaSB8fCBrID09IGogfHwgazEgPT0gaikpIHsNCiAgICAgICAgICAgICAgdmFyIHAwID0gKGluZGljZXNba10gJiAweDBmZmZmZmZmKSAqIDQ7DQogICAgICAgICAgICAgIHZhciBwMSA9IChpbmRpY2VzW2sxXSAmIDB4MGZmZmZmZmYpICogNDsNCiAgICAgICAgICAgICAgaWYgKFJlY2FzdE1lc2gudmVxdWFsKHZlcnRzLCBkMCwgcDApIHx8IFJlY2FzdE1lc2gudmVxdWFsKHZlcnRzLCBkMSwgcDApIHx8IFJlY2FzdE1lc2gudmVxdWFsKHZlcnRzLCBkMCwgcDEpIHx8IFJlY2FzdE1lc2gudmVxdWFsKHZlcnRzLCBkMSwgcDEpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgaWYgKFJlY2FzdE1lc2guaW50ZXJzZWN0KHZlcnRzLCBkMCwgZDEsIHAwLCBwMSkpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfSAvLyBSZXR1cm5zIHRydWUgaWZmIHRoZSBkaWFnb25hbCAoaSxqKSBpcyBzdHJpY3RseSBpbnRlcm5hbCB0byB0aGUNCiAgICAgICAgLy8gcG9seWdvbiBQIGluIHRoZSBuZWlnaGJvcmhvb2Qgb2YgdGhlIGkgZW5kcG9pbnQuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaW5Db25lIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluQ29uZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcykgew0KICAgICAgICAgIHZhciBwaSA9IChpbmRpY2VzW2ldICYgMHgwZmZmZmZmZikgKiA0Ow0KICAgICAgICAgIHZhciBwaiA9IChpbmRpY2VzW2pdICYgMHgwZmZmZmZmZikgKiA0Ow0KICAgICAgICAgIHZhciBwaTEgPSAoaW5kaWNlc1tSZWNhc3RNZXNoLm5leHQoaSwgbildICYgMHgwZmZmZmZmZikgKiA0Ow0KICAgICAgICAgIHZhciBwaW4xID0gKGluZGljZXNbUmVjYXN0TWVzaC5wcmV2KGksIG4pXSAmIDB4MGZmZmZmZmYpICogNDsgLy8gSWYgUFtpXSBpcyBhIGNvbnZleCB2ZXJ0ZXggWyBpKzEgbGVmdCBvciBvbiAoaS0xLGkpIF0uDQoNCiAgICAgICAgICBpZiAoUmVjYXN0TWVzaC5sZWZ0T24odmVydHMsIHBpbjEsIHBpLCBwaTEpKSB7DQogICAgICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5sZWZ0KHZlcnRzLCBwaSwgcGosIHBpbjEpICYmIFJlY2FzdE1lc2gubGVmdCh2ZXJ0cywgcGosIHBpLCBwaTEpOw0KICAgICAgICAgIH0gLy8gQXNzdW1lIChpLTEsaSxpKzEpIG5vdCBjb2xsaW5lYXIuDQogICAgICAgICAgLy8gZWxzZSBQW2ldIGlzIHJlZmxleC4NCg0KDQogICAgICAgICAgcmV0dXJuICEoUmVjYXN0TWVzaC5sZWZ0T24odmVydHMsIHBpLCBwaiwgcGkxKSAmJiBSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGosIHBpLCBwaW4xKSk7DQogICAgICAgIH0gLy8gUmV0dXJucyBUIGlmZiAodl9pLCB2X2opIGlzIGEgcHJvcGVyIGludGVybmFsDQogICAgICAgIC8vIGRpYWdvbmFsIG9mIFAuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlhZ29uYWwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlhZ29uYWwoaSwgaiwgbiwgdmVydHMsIGluZGljZXMpIHsNCiAgICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5pbkNvbmUoaSwgaiwgbiwgdmVydHMsIGluZGljZXMpICYmIFJlY2FzdE1lc2guZGlhZ29uYWxpZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcyk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlhZ29uYWxpZUxvb3NlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpYWdvbmFsaWVMb29zZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcykgew0KICAgICAgICAgIHZhciBkMCA9IChpbmRpY2VzW2ldICYgMHgwZmZmZmZmZikgKiA0Ow0KICAgICAgICAgIHZhciBkMSA9IChpbmRpY2VzW2pdICYgMHgwZmZmZmZmZikgKiA0OyAvLyBGb3IgZWFjaCBlZGdlIChrLGsrMSkgb2YgUA0KDQogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsNCiAgICAgICAgICAgIHZhciBrMSA9IFJlY2FzdE1lc2gubmV4dChrLCBuKTsgLy8gU2tpcCBlZGdlcyBpbmNpZGVudCB0byBpIG9yIGoNCg0KICAgICAgICAgICAgaWYgKCEoayA9PSBpIHx8IGsxID09IGkgfHwgayA9PSBqIHx8IGsxID09IGopKSB7DQogICAgICAgICAgICAgIHZhciBwMCA9IChpbmRpY2VzW2tdICYgMHgwZmZmZmZmZikgKiA0Ow0KICAgICAgICAgICAgICB2YXIgcDEgPSAoaW5kaWNlc1trMV0gJiAweDBmZmZmZmZmKSAqIDQ7DQogICAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDAsIHAwKSB8fCBSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDEsIHAwKSB8fCBSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDAsIHAxKSB8fCBSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDEsIHAxKSkgY29udGludWU7DQogICAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmludGVyc2VjdFByb3AodmVydHMsIGQwLCBkMSwgcDAsIHAxKSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImluQ29uZUxvb3NlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluQ29uZUxvb3NlKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKSB7DQogICAgICAgICAgdmFyIHBpID0gKGluZGljZXNbaV0gJiAweDBmZmZmZmZmKSAqIDQ7DQogICAgICAgICAgdmFyIHBqID0gKGluZGljZXNbal0gJiAweDBmZmZmZmZmKSAqIDQ7DQogICAgICAgICAgdmFyIHBpMSA9IChpbmRpY2VzW1JlY2FzdE1lc2gubmV4dChpLCBuKV0gJiAweDBmZmZmZmZmKSAqIDQ7DQogICAgICAgICAgdmFyIHBpbjEgPSAoaW5kaWNlc1tSZWNhc3RNZXNoLnByZXYoaSwgbildICYgMHgwZmZmZmZmZikgKiA0OyAvLyBJZiBQW2ldIGlzIGEgY29udmV4IHZlcnRleCBbIGkrMSBsZWZ0IG9yIG9uIChpLTEsaSkgXS4NCg0KICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGluMSwgcGksIHBpMSkpIHJldHVybiBSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGksIHBqLCBwaW4xKSAmJiBSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGosIHBpLCBwaTEpOyAvLyBBc3N1bWUgKGktMSxpLGkrMSkgbm90IGNvbGxpbmVhci4NCiAgICAgICAgICAvLyBlbHNlIFBbaV0gaXMgcmVmbGV4Lg0KDQogICAgICAgICAgcmV0dXJuICEoUmVjYXN0TWVzaC5sZWZ0T24odmVydHMsIHBpLCBwaiwgcGkxKSAmJiBSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGosIHBpLCBwaW4xKSk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlhZ29uYWxMb29zZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaWFnb25hbExvb3NlKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKSB7DQogICAgICAgICAgcmV0dXJuIFJlY2FzdE1lc2guaW5Db25lTG9vc2UoaSwgaiwgbiwgdmVydHMsIGluZGljZXMpICYmIFJlY2FzdE1lc2guZGlhZ29uYWxpZUxvb3NlKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ0cmlhbmd1bGF0ZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlhbmd1bGF0ZShuLCB2ZXJ0cywgaW5kaWNlcywgdHJpcykgew0KICAgICAgICAgIHZhciBudHJpcyA9IDA7IC8vIFRoZSBsYXN0IGJpdCBvZiB0aGUgaW5kZXggaXMgdXNlZCB0byBpbmRpY2F0ZSBpZiB0aGUgdmVydGV4IGNhbiBiZSByZW1vdmVkLg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBpMSA9IFJlY2FzdE1lc2gubmV4dChpLCBuKTsNCiAgICAgICAgICAgIHZhciBpMiA9IFJlY2FzdE1lc2gubmV4dChpMSwgbik7DQoNCiAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmRpYWdvbmFsKGksIGkyLCBuLCB2ZXJ0cywgaW5kaWNlcykpIHsNCiAgICAgICAgICAgICAgaW5kaWNlc1tpMV0gfD0gMHg4MDAwMDAwMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICB3aGlsZSAobiA+IDMpIHsNCiAgICAgICAgICAgIHZhciBtaW5MZW4gPSAtMTsNCiAgICAgICAgICAgIHZhciBtaW5pID0gLTE7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pNyA9IDA7IF9pNyA8IG47IF9pNysrKSB7DQogICAgICAgICAgICAgIHZhciBfaTggPSBSZWNhc3RNZXNoLm5leHQoX2k3LCBuKTsNCg0KICAgICAgICAgICAgICBpZiAoKGluZGljZXNbX2k4XSAmIDB4ODAwMDAwMDApICE9IDApIHsNCiAgICAgICAgICAgICAgICB2YXIgcDAgPSAoaW5kaWNlc1tfaTddICYgMHgwZmZmZmZmZikgKiA0Ow0KICAgICAgICAgICAgICAgIHZhciBwMiA9IChpbmRpY2VzW1JlY2FzdE1lc2gubmV4dChfaTgsIG4pXSAmIDB4MGZmZmZmZmYpICogNDsNCiAgICAgICAgICAgICAgICB2YXIgZHggPSB2ZXJ0c1twMiArIDBdIC0gdmVydHNbcDAgKyAwXTsNCiAgICAgICAgICAgICAgICB2YXIgZHkgPSB2ZXJ0c1twMiArIDJdIC0gdmVydHNbcDAgKyAyXTsNCiAgICAgICAgICAgICAgICB2YXIgbGVuID0gZHggKiBkeCArIGR5ICogZHk7DQoNCiAgICAgICAgICAgICAgICBpZiAobWluTGVuIDwgMCB8fCBsZW4gPCBtaW5MZW4pIHsNCiAgICAgICAgICAgICAgICAgIG1pbkxlbiA9IGxlbjsNCiAgICAgICAgICAgICAgICAgIG1pbmkgPSBfaTc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChtaW5pID09IC0xKSB7DQogICAgICAgICAgICAgIC8vIFdlIG1pZ2h0IGdldCBoZXJlIGJlY2F1c2UgdGhlIGNvbnRvdXIgaGFzIG92ZXJsYXBwaW5nIHNlZ21lbnRzLCBsaWtlIHRoaXM6DQogICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgIC8vIEEgby1vPT09PT1vLS0tbyBCDQogICAgICAgICAgICAgIC8vIC8gfEMgRHwgXA0KICAgICAgICAgICAgICAvLyBvIG8gbyBvDQogICAgICAgICAgICAgIC8vIDogOiA6IDoNCiAgICAgICAgICAgICAgLy8gV2UnbGwgdHJ5IHRvIHJlY292ZXIgYnkgbG9vc2luZyB1cCB0aGUgaW5Db25lIHRlc3QgYSBiaXQgc28gdGhhdCBhIGRpYWdvbmFsDQogICAgICAgICAgICAgIC8vIGxpa2UgQS1CIG9yIEMtRCBjYW4gYmUgZm91bmQgYW5kIHdlIGNhbiBjb250aW51ZS4NCiAgICAgICAgICAgICAgbWluTGVuID0gLTE7DQogICAgICAgICAgICAgIG1pbmkgPSAtMTsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBuOyBfaTkrKykgew0KICAgICAgICAgICAgICAgIHZhciBfaTEwID0gUmVjYXN0TWVzaC5uZXh0KF9pOSwgbik7DQoNCiAgICAgICAgICAgICAgICB2YXIgX2kxMSA9IFJlY2FzdE1lc2gubmV4dChfaTEwLCBuKTsNCg0KICAgICAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmRpYWdvbmFsTG9vc2UoX2k5LCBfaTExLCBuLCB2ZXJ0cywgaW5kaWNlcykpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBfcCA9IChpbmRpY2VzW19pOV0gJiAweDBmZmZmZmZmKSAqIDQ7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfcDIgPSAoaW5kaWNlc1tSZWNhc3RNZXNoLm5leHQoX2kxMSwgbildICYgMHgwZmZmZmZmZikgKiA0Ow0KDQogICAgICAgICAgICAgICAgICB2YXIgX2R4ID0gdmVydHNbX3AyICsgMF0gLSB2ZXJ0c1tfcCArIDBdOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2R5ID0gdmVydHNbX3AyICsgMl0gLSB2ZXJ0c1tfcCArIDJdOw0KDQogICAgICAgICAgICAgICAgICB2YXIgX2xlbiA9IF9keCAqIF9keCArIF9keSAqIF9keTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKG1pbkxlbiA8IDAgfHwgX2xlbiA8IG1pbkxlbikgew0KICAgICAgICAgICAgICAgICAgICBtaW5MZW4gPSBfbGVuOw0KICAgICAgICAgICAgICAgICAgICBtaW5pID0gX2k5Ow0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChtaW5pID09IC0xKSB7DQogICAgICAgICAgICAgICAgLy8gVGhlIGNvbnRvdXIgaXMgbWVzc2VkIHVwLiBUaGlzIHNvbWV0aW1lcyBoYXBwZW5zDQogICAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbnRvdXIgc2ltcGxpZmljYXRpb24gaXMgdG9vIGFnZ3Jlc3NpdmUuDQogICAgICAgICAgICAgICAgcmV0dXJuIC1udHJpczsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgX2k0ID0gbWluaTsNCg0KICAgICAgICAgICAgdmFyIF9pNSA9IFJlY2FzdE1lc2gubmV4dChfaTQsIG4pOw0KDQogICAgICAgICAgICB2YXIgX2k2ID0gUmVjYXN0TWVzaC5uZXh0KF9pNSwgbik7DQoNCiAgICAgICAgICAgIHRyaXNbbnRyaXMgKiAzXSA9IGluZGljZXNbX2k0XSAmIDB4MGZmZmZmZjsNCiAgICAgICAgICAgIHRyaXNbbnRyaXMgKiAzICsgMV0gPSBpbmRpY2VzW19pNV0gJiAweDBmZmZmZmY7DQogICAgICAgICAgICB0cmlzW250cmlzICogMyArIDJdID0gaW5kaWNlc1tfaTZdICYgMHgwZmZmZmZmOw0KICAgICAgICAgICAgbnRyaXMrKzsgLy8gUmVtb3ZlcyBQW2kxXSBieSBjb3B5aW5nIFBbaSsxXS4uLlBbbi0xXSBsZWZ0IG9uZSBpbmRleC4NCg0KICAgICAgICAgICAgbi0tOw0KDQogICAgICAgICAgICBmb3IgKHZhciBrID0gX2k1OyBrIDwgbjsgaysrKSB7DQogICAgICAgICAgICAgIGluZGljZXNba10gPSBpbmRpY2VzW2sgKyAxXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKF9pNSA+PSBuKSBfaTUgPSAwOw0KICAgICAgICAgICAgX2k0ID0gUmVjYXN0TWVzaC5wcmV2KF9pNSwgbik7IC8vIFVwZGF0ZSBkaWFnb25hbCBmbGFncy4NCg0KICAgICAgICAgICAgaWYgKFJlY2FzdE1lc2guZGlhZ29uYWwoUmVjYXN0TWVzaC5wcmV2KF9pNCwgbiksIF9pNSwgbiwgdmVydHMsIGluZGljZXMpKSBpbmRpY2VzW19pNF0gfD0gMHg4MDAwMDAwMDtlbHNlIGluZGljZXNbX2k0XSAmPSAweDBmZmZmZmY7DQogICAgICAgICAgICBpZiAoUmVjYXN0TWVzaC5kaWFnb25hbChfaTQsIFJlY2FzdE1lc2gubmV4dChfaTUsIG4pLCBuLCB2ZXJ0cywgaW5kaWNlcykpIGluZGljZXNbX2k1XSB8PSAweDgwMDAwMDAwO2Vsc2UgaW5kaWNlc1tfaTVdICY9IDB4MGZmZmZmZjsNCiAgICAgICAgICB9IC8vIEFwcGVuZCB0aGUgcmVtYWluaW5nIHRyaWFuZ2xlLg0KDQoNCiAgICAgICAgICB0cmlzW250cmlzICogM10gPSBpbmRpY2VzWzBdICYgMHgwZmZmZmZmOw0KICAgICAgICAgIHRyaXNbbnRyaXMgKiAzICsgMV0gPSBpbmRpY2VzWzFdICYgMHgwZmZmZmZmOw0KICAgICAgICAgIHRyaXNbbnRyaXMgKiAzICsgMl0gPSBpbmRpY2VzWzJdICYgMHgwZmZmZmZmOw0KICAgICAgICAgIG50cmlzKys7DQogICAgICAgICAgcmV0dXJuIG50cmlzOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNvdW50UG9seVZlcnRzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50UG9seVZlcnRzKHAsIGosIG52cCkgew0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnZwOyArK2kpIHsNCiAgICAgICAgICAgIGlmIChwW2kgKyBqXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgcmV0dXJuIGk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG52cDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ1bGVmdCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bGVmdCh2ZXJ0cywgYSwgYiwgYykgew0KICAgICAgICAgIHJldHVybiAodmVydHNbYiArIDBdIC0gdmVydHNbYSArIDBdKSAqICh2ZXJ0c1tjICsgMl0gLSB2ZXJ0c1thICsgMl0pIC0gKHZlcnRzW2MgKyAwXSAtIHZlcnRzW2EgKyAwXSkgKiAodmVydHNbYiArIDJdIC0gdmVydHNbYSArIDJdKSA8IDA7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UG9seU1lcmdlVmFsdWUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9seU1lcmdlVmFsdWUocG9seXMsIHBhLCBwYiwgdmVydHMsIG52cCkgew0KICAgICAgICAgIHZhciBlYSA9IC0xOw0KICAgICAgICAgIHZhciBlYiA9IC0xOw0KICAgICAgICAgIHZhciBuYSA9IFJlY2FzdE1lc2guY291bnRQb2x5VmVydHMocG9seXMsIHBhLCBudnApOw0KICAgICAgICAgIHZhciBuYiA9IFJlY2FzdE1lc2guY291bnRQb2x5VmVydHMocG9seXMsIHBiLCBudnApOyAvLyBJZiB0aGUgbWVyZ2VkIHBvbHlnb24gd291bGQgYmUgdG9vIGJpZywgZG8gbm90IG1lcmdlLg0KDQogICAgICAgICAgaWYgKG5hICsgbmIgLSAyID4gbnZwKSByZXR1cm4gWy0xLCBlYSwgZWJdOyAvLyBDaGVjayBpZiB0aGUgcG9seWdvbnMgc2hhcmUgYW4gZWRnZS4NCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmE7ICsraSkgew0KICAgICAgICAgICAgdmFyIHZhMCA9IHBvbHlzW3BhICsgaV07DQogICAgICAgICAgICB2YXIgdmExID0gcG9seXNbcGEgKyAoaSArIDEpICUgbmFdOw0KDQogICAgICAgICAgICBpZiAodmEwID4gdmExKSB7DQogICAgICAgICAgICAgIHZhciB0ZW1wID0gdmEwOw0KICAgICAgICAgICAgICB2YTAgPSB2YTE7DQogICAgICAgICAgICAgIHZhMSA9IHRlbXA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmI7ICsraikgew0KICAgICAgICAgICAgICB2YXIgdmIwID0gcG9seXNbcGIgKyBqXTsNCiAgICAgICAgICAgICAgdmFyIHZiMSA9IHBvbHlzW3BiICsgKGogKyAxKSAlIG5iXTsNCg0KICAgICAgICAgICAgICBpZiAodmIwID4gdmIxKSB7DQogICAgICAgICAgICAgICAgdmFyIF90ZW1wID0gdmIwOw0KICAgICAgICAgICAgICAgIHZiMCA9IHZiMTsNCiAgICAgICAgICAgICAgICB2YjEgPSBfdGVtcDsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmICh2YTAgPT0gdmIwICYmIHZhMSA9PSB2YjEpIHsNCiAgICAgICAgICAgICAgICBlYSA9IGk7DQogICAgICAgICAgICAgICAgZWIgPSBqOw0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBObyBjb21tb24gZWRnZSwgY2Fubm90IG1lcmdlLg0KDQoNCiAgICAgICAgICBpZiAoZWEgPT0gLTEgfHwgZWIgPT0gLTEpIHJldHVybiBbLTEsIGVhLCBlYl07IC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgbWVyZ2VkIHBvbHlnb24gd291bGQgYmUgY29udmV4Lg0KDQogICAgICAgICAgdmFyIHZhLCB2YiwgdmM7DQogICAgICAgICAgdmEgPSBwb2x5c1twYSArIChlYSArIG5hIC0gMSkgJSBuYV07DQogICAgICAgICAgdmIgPSBwb2x5c1twYSArIGVhXTsNCiAgICAgICAgICB2YyA9IHBvbHlzW3BiICsgKGViICsgMikgJSBuYl07DQogICAgICAgICAgaWYgKCFSZWNhc3RNZXNoLnVsZWZ0KHZlcnRzLCB2YSAqIDMsIHZiICogMywgdmMgKiAzKSkgcmV0dXJuIFstMSwgZWEsIGViXTsNCiAgICAgICAgICB2YSA9IHBvbHlzW3BiICsgKGViICsgbmIgLSAxKSAlIG5iXTsNCiAgICAgICAgICB2YiA9IHBvbHlzW3BiICsgZWJdOw0KICAgICAgICAgIHZjID0gcG9seXNbcGEgKyAoZWEgKyAyKSAlIG5hXTsNCiAgICAgICAgICBpZiAoIVJlY2FzdE1lc2gudWxlZnQodmVydHMsIHZhICogMywgdmIgKiAzLCB2YyAqIDMpKSByZXR1cm4gWy0xLCBlYSwgZWJdOw0KICAgICAgICAgIHZhID0gcG9seXNbcGEgKyBlYV07DQogICAgICAgICAgdmIgPSBwb2x5c1twYSArIChlYSArIDEpICUgbmFdOw0KICAgICAgICAgIHZhciBkeCA9IHZlcnRzW3ZhICogMyArIDBdIC0gdmVydHNbdmIgKiAzICsgMF07DQogICAgICAgICAgdmFyIGR5ID0gdmVydHNbdmEgKiAzICsgMl0gLSB2ZXJ0c1t2YiAqIDMgKyAyXTsNCiAgICAgICAgICByZXR1cm4gW2R4ICogZHggKyBkeSAqIGR5LCBlYSwgZWJdOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIm1lcmdlUG9seVZlcnRzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlUG9seVZlcnRzKHBvbHlzLCBwYSwgcGIsIGVhLCBlYiwgdG1wLCBudnApIHsNCiAgICAgICAgICB2YXIgbmEgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKHBvbHlzLCBwYSwgbnZwKTsNCiAgICAgICAgICB2YXIgbmIgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKHBvbHlzLCBwYiwgbnZwKTsgLy8gTWVyZ2UgcG9seWdvbnMuDQoNCiAgICAgICAgICBwb2x5cy5maWxsKFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYLCB0bXAsIHRtcCArIG52cCk7DQogICAgICAgICAgdmFyIG4gPSAwOyAvLyBBZGQgcGENCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmEgLSAxOyArK2kpIHsNCiAgICAgICAgICAgIHBvbHlzW3RtcCArIG5dID0gcG9seXNbcGEgKyAoZWEgKyAxICsgaSkgJSBuYV07DQogICAgICAgICAgICBuKys7DQogICAgICAgICAgfSAvLyBBZGQgcGINCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDA7IF9pMTIgPCBuYiAtIDE7ICsrX2kxMikgew0KICAgICAgICAgICAgcG9seXNbdG1wICsgbl0gPSBwb2x5c1twYiArIChlYiArIDEgKyBfaTEyKSAlIG5iXTsNCiAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICB9IC8vYXJyYXljb3B5KHBvbHlzLCB0bXAsIHBvbHlzLCBwYSwgbnZwKTsNCg0KDQogICAgICAgICAgYXJyYXljb3B5JDEocG9seXMsIHRtcCwgcG9seXMsIHBhLCBudnApOyAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG52cDsgaSsrKSB7DQogICAgICAgICAgLy8gCXBvbHlzW3BhICsgaV0gPSBwb2x5c1t0bXAgKyBpXTsNCiAgICAgICAgICAvLyB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicHVzaEZyb250IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hGcm9udCh2LCBhcnIsIGFuKSB7DQogICAgICAgICAgYW4rKzsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSBhbiAtIDE7IGkgPiAwOyAtLWkpIHsNCiAgICAgICAgICAgIGFycltpXSA9IGFycltpIC0gMV07DQogICAgICAgICAgfQ0KDQogICAgICAgICAgYXJyWzBdID0gdjsNCiAgICAgICAgICByZXR1cm4gYW47DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicHVzaEJhY2siLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaEJhY2sodiwgYXJyLCBhbikgew0KICAgICAgICAgIGFyclthbl0gPSB2Ow0KICAgICAgICAgIGFuKys7DQogICAgICAgICAgcmV0dXJuIGFuOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNhblJlbW92ZVZlcnRleCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5SZW1vdmVWZXJ0ZXgoY3R4LCBtZXNoLCByZW0pIHsNCiAgICAgICAgICB2YXIgbnZwID0gbWVzaC5udnA7IC8vIENvdW50IG51bWJlciBvZiBwb2x5Z29ucyB0byByZW1vdmUuDQoNCiAgICAgICAgICB2YXIgbnVtVG91Y2hlZFZlcnRzID0gMDsNCiAgICAgICAgICB2YXIgbnVtUmVtYWluaW5nRWRnZXMgPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNoLm5wb2x5czsgKytpKSB7DQogICAgICAgICAgICB2YXIgcCA9IGkgKiBudnAgKiAyOw0KICAgICAgICAgICAgdmFyIG52ID0gUmVjYXN0TWVzaC5jb3VudFBvbHlWZXJ0cyhtZXNoLnBvbHlzLCBwLCBudnApOw0KICAgICAgICAgICAgdmFyIG51bVJlbW92ZWQgPSAwOw0KICAgICAgICAgICAgdmFyIG51bVZlcnRzID0gMDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudjsgKytqKSB7DQogICAgICAgICAgICAgIGlmIChtZXNoLnBvbHlzW3AgKyBqXSA9PSByZW0pIHsNCiAgICAgICAgICAgICAgICBudW1Ub3VjaGVkVmVydHMrKzsNCiAgICAgICAgICAgICAgICBudW1SZW1vdmVkKys7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBudW1WZXJ0cysrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAobnVtUmVtb3ZlZCAhPSAwKSB7DQogICAgICAgICAgICAgIG51bVJlbWFpbmluZ0VkZ2VzICs9IG51bVZlcnRzIC0gKG51bVJlbW92ZWQgKyAxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIFRoZXJlIHdvdWxkIGJlIHRvbyBmZXcgZWRnZXMgcmVtYWluaW5nIHRvIGNyZWF0ZSBhIHBvbHlnb24uDQogICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGZvciBleGFtcGxlIHdoZW4gYSB0aXAgb2YgYSB0cmlhbmdsZSBpcyBtYXJrZWQNCiAgICAgICAgICAvLyBhcyBkZVBvbHlpb24sIGJ1dCB0aGVyZSBhcmUgbm8gb3RoZXIgcG9seXMgdGhhdCBzaGFyZSB0aGUgdmVydGV4Lg0KICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgdGhlIHZlcnRleCBzaG91bGQgbm90IGJlIHJlbW92ZWQuDQoNCg0KICAgICAgICAgIGlmIChudW1SZW1haW5pbmdFZGdlcyA8PSAyKSByZXR1cm4gZmFsc2U7IC8vIEZpbmQgZWRnZXMgd2hpY2ggc2hhcmUgdGhlIHJlbW92ZWQgdmVydGV4Lg0KDQogICAgICAgICAgdmFyIG1heEVkZ2VzID0gbnVtVG91Y2hlZFZlcnRzICogMjsNCiAgICAgICAgICB2YXIgbmVkZ2VzID0gMDsNCiAgICAgICAgICB2YXIgZWRnZXMgPSBuZXcgQXJyYXkobWF4RWRnZXMgKiAzKTsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMTMgPSAwOyBfaTEzIDwgbWVzaC5ucG9seXM7ICsrX2kxMykgew0KICAgICAgICAgICAgdmFyIF9wMyA9IF9pMTMgKiBudnAgKiAyOw0KDQogICAgICAgICAgICB2YXIgX252ID0gUmVjYXN0TWVzaC5jb3VudFBvbHlWZXJ0cyhtZXNoLnBvbHlzLCBfcDMsIG52cCk7IC8vIENvbGxlY3QgZWRnZXMgd2hpY2ggdG91Y2hlcyB0aGUgcmVtb3ZlZCB2ZXJ0ZXguDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2oyID0gMCwgayA9IF9udiAtIDE7IF9qMiA8IF9udjsgayA9IF9qMisrKSB7DQogICAgICAgICAgICAgIGlmIChtZXNoLnBvbHlzW19wMyArIF9qMl0gPT0gcmVtIHx8IG1lc2gucG9seXNbX3AzICsga10gPT0gcmVtKSB7DQogICAgICAgICAgICAgICAgLy8gQXJyYW5nZSBlZGdlIHNvIHRoYXQgYT1yZW0uDQogICAgICAgICAgICAgICAgdmFyIGEgPSBtZXNoLnBvbHlzW19wMyArIF9qMl0sDQogICAgICAgICAgICAgICAgICAgIGIgPSBtZXNoLnBvbHlzW19wMyArIGtdOw0KDQogICAgICAgICAgICAgICAgaWYgKGIgPT0gcmVtKSB7DQogICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IGE7DQogICAgICAgICAgICAgICAgICBhID0gYjsNCiAgICAgICAgICAgICAgICAgIGIgPSB0ZW1wOw0KICAgICAgICAgICAgICAgIH0gLy8gQ2hlY2sgaWYgdGhlIGVkZ2UgZXhpc3RzDQoNCg0KICAgICAgICAgICAgICAgIHZhciBleGlzdHMgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgbmVkZ2VzOyArK20pIHsNCiAgICAgICAgICAgICAgICAgIHZhciBlID0gbSAqIDM7DQoNCiAgICAgICAgICAgICAgICAgIGlmIChlZGdlc1tlICsgMV0gPT0gYikgew0KICAgICAgICAgICAgICAgICAgICAvLyBFeGlzdHMsIGluY3JlbWVudCB2ZXJ0ZXggc2hhcmUgY291bnQuDQogICAgICAgICAgICAgICAgICAgIGVkZ2VzW2UgKyAyXSsrOw0KICAgICAgICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gLy8gQWRkIG5ldyBlZGdlLg0KDQoNCiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0cykgew0KICAgICAgICAgICAgICAgICAgdmFyIF9lMiA9IG5lZGdlcyAqIDM7DQoNCiAgICAgICAgICAgICAgICAgIGVkZ2VzW19lMiArIDBdID0gYTsNCiAgICAgICAgICAgICAgICAgIGVkZ2VzW19lMiArIDFdID0gYjsNCiAgICAgICAgICAgICAgICAgIGVkZ2VzW19lMiArIDJdID0gMTsNCiAgICAgICAgICAgICAgICAgIG5lZGdlcysrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gVGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdGhhbiAyIG9wZW4gZWRnZXMuDQogICAgICAgICAgLy8gVGhpcyBjYXRjaGVzIHRoZSBjYXNlIHRoYXQgdHdvIG5vbi1hZGphY2VudCBwb2x5Z29ucw0KICAgICAgICAgIC8vIHNoYXJlIHRoZSByZW1vdmVkIHZlcnRleC4gSW4gdGhhdCBjYXNlLCBkbyBub3QgcmVtb3ZlIHRoZSB2ZXJ0ZXguDQoNCg0KICAgICAgICAgIHZhciBudW1PcGVuRWRnZXMgPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kxNCA9IDA7IF9pMTQgPCBuZWRnZXM7ICsrX2kxNCkgew0KICAgICAgICAgICAgaWYgKGVkZ2VzW19pMTQgKiAzICsgMl0gPCAyKSBudW1PcGVuRWRnZXMrKzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobnVtT3BlbkVkZ2VzID4gMikgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInJlbW92ZVZlcnRleCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVWZXJ0ZXgoY3R4LCBtZXNoLCByZW0sIG1heFRyaXMpIHsNCiAgICAgICAgICB2YXIgbnZwID0gbWVzaC5udnA7IC8vIENvdW50IG51bWJlciBvZiBwb2x5Z29ucyB0byByZW1vdmUuDQoNCiAgICAgICAgICB2YXIgbnVtUmVtb3ZlZFZlcnRzID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzaC5ucG9seXM7ICsraSkgew0KICAgICAgICAgICAgdmFyIHAgPSBpICogbnZwICogMjsNCiAgICAgICAgICAgIHZhciBudiA9IFJlY2FzdE1lc2guY291bnRQb2x5VmVydHMobWVzaC5wb2x5cywgcCwgbnZwKTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudjsgKytqKSB7DQogICAgICAgICAgICAgIGlmIChtZXNoLnBvbHlzW3AgKyBqXSA9PSByZW0pIG51bVJlbW92ZWRWZXJ0cysrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBuZWRnZXMgPSAwOw0KICAgICAgICAgIHZhciBlZGdlcyA9IG5ldyBBcnJheShudW1SZW1vdmVkVmVydHMgKiBudnAgKiA0KTsNCiAgICAgICAgICB2YXIgbmhvbGUgPSAwOw0KICAgICAgICAgIHZhciBob2xlID0gbmV3IEFycmF5KG51bVJlbW92ZWRWZXJ0cyAqIG52cCk7DQogICAgICAgICAgdmFyIG5ocmVnID0gMDsNCiAgICAgICAgICB2YXIgaHJlZyA9IG5ldyBBcnJheShudW1SZW1vdmVkVmVydHMgKiBudnApOw0KICAgICAgICAgIHZhciBuaGFyZWEgPSAwOw0KICAgICAgICAgIHZhciBoYXJlYSA9IG5ldyBBcnJheShudW1SZW1vdmVkVmVydHMgKiBudnApOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kxNSA9IDA7IF9pMTUgPCBtZXNoLm5wb2x5czsgKytfaTE1KSB7DQogICAgICAgICAgICB2YXIgX3A0ID0gX2kxNSAqIG52cCAqIDI7DQoNCiAgICAgICAgICAgIHZhciBfbnYyID0gUmVjYXN0TWVzaC5jb3VudFBvbHlWZXJ0cyhtZXNoLnBvbHlzLCBfcDQsIG52cCk7DQoNCiAgICAgICAgICAgIHZhciBoYXNSZW0gPSBmYWxzZTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2ozID0gMDsgX2ozIDwgX252MjsgKytfajMpIHsNCiAgICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbX3A0ICsgX2ozXSA9PSByZW0pIGhhc1JlbSA9IHRydWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChoYXNSZW0pIHsNCiAgICAgICAgICAgICAgLy8gQ29sbGVjdCBlZGdlcyB3aGljaCBkb2VzIG5vdCB0b3VjaCB0aGUgcmVtb3ZlZCB2ZXJ0ZXguDQogICAgICAgICAgICAgIGZvciAodmFyIF9qNCA9IDAsIGsgPSBfbnYyIC0gMTsgX2o0IDwgX252MjsgayA9IF9qNCsrKSB7DQogICAgICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbX3A0ICsgX2o0XSAhPSByZW0gJiYgbWVzaC5wb2x5c1tfcDQgKyBrXSAhPSByZW0pIHsNCiAgICAgICAgICAgICAgICAgIHZhciBlID0gbmVkZ2VzICogNDsNCiAgICAgICAgICAgICAgICAgIGVkZ2VzW2UgKyAwXSA9IG1lc2gucG9seXNbX3A0ICsga107DQogICAgICAgICAgICAgICAgICBlZGdlc1tlICsgMV0gPSBtZXNoLnBvbHlzW19wNCArIF9qNF07DQogICAgICAgICAgICAgICAgICBlZGdlc1tlICsgMl0gPSBtZXNoLnJlZ3NbX2kxNV07DQogICAgICAgICAgICAgICAgICBlZGdlc1tlICsgM10gPSBtZXNoLmFyZWFzW19pMTVdOw0KICAgICAgICAgICAgICAgICAgbmVkZ2VzKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IC8vIFJlbW92ZSB0aGUgcG9seWdvbi4NCg0KDQogICAgICAgICAgICAgIHZhciBwMiA9IChtZXNoLm5wb2x5cyAtIDEpICogbnZwICogMjsNCg0KICAgICAgICAgICAgICBpZiAoX3A0ICE9IHAyKSB7DQogICAgICAgICAgICAgICAgYXJyYXljb3B5JDEobWVzaC5wb2x5cywgcDIsIG1lc2gucG9seXMsIF9wNCwgbnZwKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIG1lc2gucG9seXMuZmlsbChSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCwgX3A0ICsgbnZwLCBfcDQgKyBudnAgKyBudnApOw0KICAgICAgICAgICAgICBtZXNoLnJlZ3NbX2kxNV0gPSBtZXNoLnJlZ3NbbWVzaC5ucG9seXMgLSAxXTsNCiAgICAgICAgICAgICAgbWVzaC5hcmVhc1tfaTE1XSA9IG1lc2guYXJlYXNbbWVzaC5ucG9seXMgLSAxXTsNCiAgICAgICAgICAgICAgbWVzaC5ucG9seXMtLTsNCiAgICAgICAgICAgICAgLS1faTE1Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gUmVtb3ZlIHZlcnRleC4NCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kxNiA9IHJlbTsgX2kxNiA8IG1lc2gubnZlcnRzIC0gMTsgKytfaTE2KSB7DQogICAgICAgICAgICBtZXNoLnZlcnRzW19pMTYgKiAzICsgMF0gPSBtZXNoLnZlcnRzWyhfaTE2ICsgMSkgKiAzICsgMF07DQogICAgICAgICAgICBtZXNoLnZlcnRzW19pMTYgKiAzICsgMV0gPSBtZXNoLnZlcnRzWyhfaTE2ICsgMSkgKiAzICsgMV07DQogICAgICAgICAgICBtZXNoLnZlcnRzW19pMTYgKiAzICsgMl0gPSBtZXNoLnZlcnRzWyhfaTE2ICsgMSkgKiAzICsgMl07DQogICAgICAgICAgfQ0KDQogICAgICAgICAgbWVzaC5udmVydHMtLTsgLy8gQWRqdXN0IGluZGljZXMgdG8gbWF0Y2ggdGhlIHJlbW92ZWQgdmVydGV4IGxheW91dC4NCg0KICAgICAgICAgIGZvciAodmFyIF9pMTcgPSAwOyBfaTE3IDwgbWVzaC5ucG9seXM7ICsrX2kxNykgew0KICAgICAgICAgICAgdmFyIF9wNSA9IF9pMTcgKiBudnAgKiAyOw0KDQogICAgICAgICAgICB2YXIgX252MyA9IFJlY2FzdE1lc2guY291bnRQb2x5VmVydHMobWVzaC5wb2x5cywgX3A1LCBudnApOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfajUgPSAwOyBfajUgPCBfbnYzOyArK19qNSkgew0KICAgICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcDUgKyBfajVdID4gcmVtKSBtZXNoLnBvbHlzW19wNSArIF9qNV0tLTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTE4ID0gMDsgX2kxOCA8IG5lZGdlczsgKytfaTE4KSB7DQogICAgICAgICAgICBpZiAoZWRnZXNbX2kxOCAqIDQgKyAwXSA+IHJlbSkgZWRnZXNbX2kxOCAqIDQgKyAwXS0tOw0KICAgICAgICAgICAgaWYgKGVkZ2VzW19pMTggKiA0ICsgMV0gPiByZW0pIGVkZ2VzW19pMTggKiA0ICsgMV0tLTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobmVkZ2VzID09IDApIHJldHVybjsgLy8gU3RhcnQgd2l0aCBvbmUgdmVydGV4LCBrZWVwIGFwcGVuZGluZyBjb25uZWN0ZWQNCiAgICAgICAgICAvLyBzZWdtZW50cyB0byB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgaG9sZS4NCg0KICAgICAgICAgIFJlY2FzdE1lc2gucHVzaEJhY2soZWRnZXNbMF0sIGhvbGUsIG5ob2xlKTsNCiAgICAgICAgICBSZWNhc3RNZXNoLnB1c2hCYWNrKGVkZ2VzWzJdLCBocmVnLCBuaHJlZyk7DQogICAgICAgICAgUmVjYXN0TWVzaC5wdXNoQmFjayhlZGdlc1szXSwgaGFyZWEsIG5oYXJlYSk7DQoNCiAgICAgICAgICB3aGlsZSAobmVkZ2VzICE9IDApIHsNCiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTE5ID0gMDsgX2kxOSA8IG5lZGdlczsgKytfaTE5KSB7DQogICAgICAgICAgICAgIHZhciBlYSA9IGVkZ2VzW19pMTkgKiA0ICsgMF07DQogICAgICAgICAgICAgIHZhciBlYiA9IGVkZ2VzW19pMTkgKiA0ICsgMV07DQogICAgICAgICAgICAgIHZhciByID0gZWRnZXNbX2kxOSAqIDQgKyAyXTsNCiAgICAgICAgICAgICAgdmFyIGEgPSBlZGdlc1tfaTE5ICogNCArIDNdOw0KICAgICAgICAgICAgICB2YXIgYWRkID0gZmFsc2U7DQoNCiAgICAgICAgICAgICAgaWYgKGhvbGVbMF0gPT0gZWIpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGUgc2VnbWVudCBtYXRjaGVzIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGhvbGUgYm91bmRhcnkuDQogICAgICAgICAgICAgICAgUmVjYXN0TWVzaC5wdXNoRnJvbnQoZWEsIGhvbGUsIG5ob2xlKTsNCiAgICAgICAgICAgICAgICBSZWNhc3RNZXNoLnB1c2hGcm9udChyLCBocmVnLCBuaHJlZyk7DQogICAgICAgICAgICAgICAgUmVjYXN0TWVzaC5wdXNoRnJvbnQoYSwgaGFyZWEsIG5oYXJlYSk7DQogICAgICAgICAgICAgICAgYWRkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChob2xlW25ob2xlIC0gMV0gPT0gZWEpIHsNCiAgICAgICAgICAgICAgICAvLyBUaGUgc2VnbWVudCBtYXRjaGVzIHRoZSBlbmQgb2YgdGhlIGhvbGUgYm91bmRhcnkuDQogICAgICAgICAgICAgICAgbmhvbGUgPSBSZWNhc3RNZXNoLnB1c2hCYWNrKGViLCBob2xlLCBuaG9sZSk7DQogICAgICAgICAgICAgICAgbmhyZWcgPSBSZWNhc3RNZXNoLnB1c2hCYWNrKHIsIGhyZWcsIG5ocmVnKTsNCiAgICAgICAgICAgICAgICBuaGFyZWEgPSBSZWNhc3RNZXNoLnB1c2hCYWNrKGEsIGhhcmVhLCBuaGFyZWEpOw0KICAgICAgICAgICAgICAgIGFkZCA9IHRydWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoYWRkKSB7DQogICAgICAgICAgICAgICAgLy8gVGhlIGVkZ2Ugc2VnbWVudCB3YXMgYWRkZWQsIHJlbW92ZSBpdC4NCiAgICAgICAgICAgICAgICBlZGdlc1tfaTE5ICogNCArIDBdID0gZWRnZXNbKG5lZGdlcyAtIDEpICogNCArIDBdOw0KICAgICAgICAgICAgICAgIGVkZ2VzW19pMTkgKiA0ICsgMV0gPSBlZGdlc1sobmVkZ2VzIC0gMSkgKiA0ICsgMV07DQogICAgICAgICAgICAgICAgZWRnZXNbX2kxOSAqIDQgKyAyXSA9IGVkZ2VzWyhuZWRnZXMgLSAxKSAqIDQgKyAyXTsNCiAgICAgICAgICAgICAgICBlZGdlc1tfaTE5ICogNCArIDNdID0gZWRnZXNbKG5lZGdlcyAtIDEpICogNCArIDNdOw0KICAgICAgICAgICAgICAgIC0tbmVkZ2VzOw0KICAgICAgICAgICAgICAgIG1hdGNoID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAtLV9pMTk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKCFtYXRjaCkgYnJlYWs7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHRyaXMgPSBuZXcgQXJyYXkobmhvbGUgKiAzKTsNCiAgICAgICAgICB2YXIgdHZlcnRzID0gbmV3IEFycmF5KG5ob2xlICogNCk7DQogICAgICAgICAgdmFyIHRob2xlID0gbmV3IEFycmF5KG5ob2xlKTsgLy8gR2VuZXJhdGUgdGVtcCB2ZXJ0ZXggYXJyYXkgZm9yIHRyaWFuZ3VsYXRpb24uDQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIwID0gMDsgX2kyMCA8IG5ob2xlOyArK19pMjApIHsNCiAgICAgICAgICAgIHZhciBwaSA9IGhvbGVbX2kyMF07DQogICAgICAgICAgICB0dmVydHNbX2kyMCAqIDQgKyAwXSA9IG1lc2gudmVydHNbcGkgKiAzICsgMF07DQogICAgICAgICAgICB0dmVydHNbX2kyMCAqIDQgKyAxXSA9IG1lc2gudmVydHNbcGkgKiAzICsgMV07DQogICAgICAgICAgICB0dmVydHNbX2kyMCAqIDQgKyAyXSA9IG1lc2gudmVydHNbcGkgKiAzICsgMl07DQogICAgICAgICAgICB0dmVydHNbX2kyMCAqIDQgKyAzXSA9IDA7DQogICAgICAgICAgICB0aG9sZVtfaTIwXSA9IF9pMjA7DQogICAgICAgICAgfSAvLyBUcmlhbmd1bGF0ZSB0aGUgaG9sZS4NCg0KDQogICAgICAgICAgdmFyIG50cmlzID0gUmVjYXN0TWVzaC50cmlhbmd1bGF0ZShuaG9sZSwgdHZlcnRzLCB0aG9sZSwgdHJpcyk7DQoNCiAgICAgICAgICBpZiAobnRyaXMgPCAwKSB7DQogICAgICAgICAgICBudHJpcyA9IC1udHJpczsNCiAgICAgICAgICAgIGN0eC53YXJuKCJyZW1vdmVWZXJ0ZXg6IHRyaWFuZ3VsYXRlKCkgcmV0dXJuZWQgYmFkIHJlc3VsdHMuIik7DQogICAgICAgICAgfSAvLyBNZXJnZSB0aGUgaG9sZSB0cmlhbmdsZXMgYmFjayB0byBwb2x5Z29ucy4NCg0KDQogICAgICAgICAgdmFyIHBvbHlzID0gbmV3IEFycmF5KChudHJpcyArIDEpICogbnZwKTsNCiAgICAgICAgICB2YXIgcHJlZ3MgPSBuZXcgQXJyYXkobnRyaXMpOw0KICAgICAgICAgIHZhciBwYXJlYXMgPSBuZXcgQXJyYXkobnRyaXMpOw0KDQogICAgICAgICAgdmFyIG5wb2x5cyA9IDA7DQogICAgICAgICAgcG9seXMuZmlsbChSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCwgMCwgbnRyaXMgKiBudnApOw0KDQogICAgICAgICAgZm9yICh2YXIgX2o2ID0gMDsgX2o2IDwgbnRyaXM7ICsrX2o2KSB7DQogICAgICAgICAgICB2YXIgdCA9IF9qNiAqIDM7DQoNCiAgICAgICAgICAgIGlmICh0cmlzW3QgKyAwXSAhPSB0cmlzW3QgKyAxXSAmJiB0cmlzW3QgKyAwXSAhPSB0cmlzW3QgKyAyXSAmJiB0cmlzW3QgKyAxXSAhPSB0cmlzW3QgKyAyXSkgew0KICAgICAgICAgICAgICBwb2x5c1tucG9seXMgKiBudnAgKyAwXSA9IGhvbGVbdHJpc1t0ICsgMF1dOw0KICAgICAgICAgICAgICBwb2x5c1tucG9seXMgKiBudnAgKyAxXSA9IGhvbGVbdHJpc1t0ICsgMV1dOw0KICAgICAgICAgICAgICBwb2x5c1tucG9seXMgKiBudnAgKyAyXSA9IGhvbGVbdHJpc1t0ICsgMl1dOyAvLyBJZiB0aGlzIHBvbHlnb24gY292ZXJzIG11bHRpcGxlIHJlZ2lvbiB0eXBlcyB0aGVuDQogICAgICAgICAgICAgIC8vIG1hcmsgaXQgYXMgc3VjaA0KDQogICAgICAgICAgICAgIGlmIChocmVnW3RyaXNbdCArIDBdXSAhPSBocmVnW3RyaXNbdCArIDFdXSB8fCBocmVnW3RyaXNbdCArIDFdXSAhPSBocmVnW3RyaXNbdCArIDJdXSkgcHJlZ3NbbnBvbHlzXSA9IFJlY2FzdENvbnN0YW50cy5SQ19NVUxUSVBMRV9SRUdTO2Vsc2UgcHJlZ3NbbnBvbHlzXSA9IGhyZWdbdHJpc1t0ICsgMF1dOw0KICAgICAgICAgICAgICBwYXJlYXNbbnBvbHlzXSA9IGhhcmVhW3RyaXNbdCArIDBdXTsNCiAgICAgICAgICAgICAgbnBvbHlzKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKG5wb2x5cyA9PSAwKSByZXR1cm47IC8vIE1lcmdlIHBvbHlnb25zLg0KDQogICAgICAgICAgaWYgKG52cCA+IDMpIHsNCiAgICAgICAgICAgIGZvciAoOzspIHsNCiAgICAgICAgICAgICAgLy8gRmluZCBiZXN0IHBvbHlnb25zIHRvIG1lcmdlLg0KICAgICAgICAgICAgICB2YXIgYmVzdE1lcmdlVmFsID0gMDsNCiAgICAgICAgICAgICAgdmFyIGJlc3RQYSA9IDAsDQogICAgICAgICAgICAgICAgICBiZXN0UGIgPSAwLA0KICAgICAgICAgICAgICAgICAgYmVzdEVhID0gMCwNCiAgICAgICAgICAgICAgICAgIGJlc3RFYiA9IDA7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2o3ID0gMDsgX2o3IDwgbnBvbHlzIC0gMTsgKytfajcpIHsNCiAgICAgICAgICAgICAgICB2YXIgcGogPSBfajcgKiBudnA7DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBfayA9IF9qNyArIDE7IF9rIDwgbnBvbHlzOyArK19rKSB7DQogICAgICAgICAgICAgICAgICB2YXIgcGsgPSBfayAqIG52cDsNCiAgICAgICAgICAgICAgICAgIHZhciB2ZWFlYiA9IFJlY2FzdE1lc2guZ2V0UG9seU1lcmdlVmFsdWUocG9seXMsIHBqLCBwaywgbWVzaC52ZXJ0cywgbnZwKTsNCiAgICAgICAgICAgICAgICAgIHZhciB2ID0gdmVhZWJbMF07DQogICAgICAgICAgICAgICAgICB2YXIgX2VhID0gdmVhZWJbMV07DQogICAgICAgICAgICAgICAgICB2YXIgX2ViID0gdmVhZWJbMl07DQoNCiAgICAgICAgICAgICAgICAgIGlmICh2ID4gYmVzdE1lcmdlVmFsKSB7DQogICAgICAgICAgICAgICAgICAgIGJlc3RNZXJnZVZhbCA9IHY7DQogICAgICAgICAgICAgICAgICAgIGJlc3RQYSA9IF9qNzsNCiAgICAgICAgICAgICAgICAgICAgYmVzdFBiID0gX2s7DQogICAgICAgICAgICAgICAgICAgIGJlc3RFYSA9IF9lYTsNCiAgICAgICAgICAgICAgICAgICAgYmVzdEViID0gX2ViOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChiZXN0TWVyZ2VWYWwgPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gRm91bmQgYmVzdCwgbWVyZ2UuDQogICAgICAgICAgICAgICAgdmFyIHBhID0gYmVzdFBhICogbnZwOw0KICAgICAgICAgICAgICAgIHZhciBwYiA9IGJlc3RQYiAqIG52cDsNCiAgICAgICAgICAgICAgICBSZWNhc3RNZXNoLm1lcmdlUG9seVZlcnRzKHBvbHlzLCBwYSwgcGIsIGJlc3RFYSwgYmVzdEViLCB0bXBQb2x5LCBudnApOw0KICAgICAgICAgICAgICAgIGlmIChwcmVnc1tiZXN0UGFdICE9IHByZWdzW2Jlc3RQYl0pIHByZWdzW2Jlc3RQYV0gPSBSZWNhc3RDb25zdGFudHMuUkNfTVVMVElQTEVfUkVHUzsNCiAgICAgICAgICAgICAgICB2YXIgbGFzdCA9IChucG9seXMgLSAxKSAqIG52cDsNCg0KICAgICAgICAgICAgICAgIGlmIChwYiAhPSBsYXN0KSB7DQogICAgICAgICAgICAgICAgICBhcnJheWNvcHkkMShwb2x5cywgbGFzdCwgcG9seXMsIHBiLCBudnApOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHByZWdzW2Jlc3RQYl0gPSBwcmVnc1tucG9seXMgLSAxXTsNCiAgICAgICAgICAgICAgICBwYXJlYXNbYmVzdFBiXSA9IHBhcmVhc1tucG9seXMgLSAxXTsNCiAgICAgICAgICAgICAgICBucG9seXMtLTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBDb3VsZCBub3QgbWVyZ2UgYW55IHBvbHlnb25zLCBzdG9wLg0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBTdG9yZSBwb2x5Z29ucy4NCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kyMSA9IDA7IF9pMjEgPCBucG9seXM7ICsrX2kyMSkgew0KICAgICAgICAgICAgaWYgKG1lc2gubnBvbHlzID49IG1heFRyaXMpIGJyZWFrOw0KDQogICAgICAgICAgICB2YXIgX3A2ID0gbWVzaC5ucG9seXMgKiBudnAgKiAyOw0KDQogICAgICAgICAgICBtZXNoLnBvbHlzLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgsIF9wNiwgX3A2ICsgbnZwICogMik7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9qOCA9IDA7IF9qOCA8IG52cDsgKytfajgpIHsNCiAgICAgICAgICAgICAgbWVzaC5wb2x5c1tfcDYgKyBfajhdID0gcG9seXNbX2kyMSAqIG52cCArIF9qOF07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIG1lc2gucmVnc1ttZXNoLm5wb2x5c10gPSBwcmVnc1tfaTIxXTsNCiAgICAgICAgICAgIG1lc2guYXJlYXNbbWVzaC5ucG9seXNdID0gcGFyZWFzW19pMjFdOw0KICAgICAgICAgICAgbWVzaC5ucG9seXMrKzsNCg0KICAgICAgICAgICAgaWYgKG1lc2gubnBvbHlzID4gbWF4VHJpcykgew0KICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigicmVtb3ZlVmVydGV4OiBUb28gbWFueSBwb2x5Z29ucyAiICsgbWVzaC5ucG9seXMgKyAiIChtYXg6IiArIG1heFRyaXMgKyAiLiIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBub3RlIElmIHRoZSBtZXNoIGRhdGEgaXMgdG8gYmUgdXNlZCB0byBjb25zdHJ1Y3QgYSBEZXRvdXIgbmF2aWdhdGlvbiBtZXNoLCB0aGVuIHRoZSB1cHBlcg0KICAgICAgICAvLy8gbGltaXQgbXVzdCBiZSByZXRyaWN0ZWQgdG8gPD0gI0RUX1ZFUlRTX1BFUl9QT0xZR09OLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBzZWUgcmNBbGxvY1BvbHlNZXNoLCByY0NvbnRvdXJTZXQsIHJjUG9seU1lc2gsIHJjQ29uZmlnDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYnVpbGRQb2x5TWVzaCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFBvbHlNZXNoKGN0eCwgY3NldCwgbnZwKSB7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIkJVSUxEX1BPTFlNRVNIIik7DQogICAgICAgICAgdmFyIG1lc2ggPSBuZXcgUG9seU1lc2goKTsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTMobWVzaC5ibWluLCBjc2V0LmJtaW4sIDApOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5MyhtZXNoLmJtYXgsIGNzZXQuYm1heCwgMCk7DQogICAgICAgICAgbWVzaC5jcyA9IGNzZXQuY3M7DQogICAgICAgICAgbWVzaC5jaCA9IGNzZXQuY2g7DQogICAgICAgICAgbWVzaC5ib3JkZXJTaXplID0gY3NldC5ib3JkZXJTaXplOw0KICAgICAgICAgIG1lc2gubWF4RWRnZUVycm9yID0gY3NldC5tYXhFcnJvcjsNCiAgICAgICAgICB2YXIgbWF4VmVydGljZXMgPSAwOw0KICAgICAgICAgIHZhciBtYXhUcmlzID0gMDsNCiAgICAgICAgICB2YXIgbWF4VmVydHNQZXJDb250ID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3NldC5jb250cy5sZW5ndGg7ICsraSkgew0KICAgICAgICAgICAgLy8gU2tpcCBudWxsIGNvbnRvdXJzLg0KICAgICAgICAgICAgaWYgKGNzZXQuY29udHNbaV0ubnZlcnRzIDwgMykgY29udGludWU7DQogICAgICAgICAgICBtYXhWZXJ0aWNlcyArPSBjc2V0LmNvbnRzW2ldLm52ZXJ0czsNCiAgICAgICAgICAgIG1heFRyaXMgKz0gY3NldC5jb250c1tpXS5udmVydHMgLSAyOw0KICAgICAgICAgICAgbWF4VmVydHNQZXJDb250ID0gTWF0aC5tYXgobWF4VmVydHNQZXJDb250LCBjc2V0LmNvbnRzW2ldLm52ZXJ0cyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKG1heFZlcnRpY2VzID49IDB4ZmZmZSkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oInJjQnVpbGRQb2x5TWVzaDogVG9vIG1hbnkgdmVydGljZXMgIiArIG1heFZlcnRpY2VzKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgdmZsYWdzID0gbmV3IEFycmF5KG1heFZlcnRpY2VzKS5maWxsKDApOw0KICAgICAgICAgIHZmbGFncy5maWxsKDApOw0KICAgICAgICAgIG1lc2gudmVydHMgPSBuZXcgQXJyYXkobWF4VmVydGljZXMgKiAzKS5maWxsKDApOw0KICAgICAgICAgIG1lc2gucG9seXMgPSBuZXcgQXJyYXkobWF4VHJpcyAqIG52cCAqIDIpLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpOyAvLyBBcnJheXMuZmlsbChtZXNoLnBvbHlzLCBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCk7DQoNCiAgICAgICAgICBtZXNoLnJlZ3MgPSBuZXcgQXJyYXkobWF4VHJpcykuZmlsbCgwKTsNCiAgICAgICAgICBtZXNoLmFyZWFzID0gbmV3IEFycmF5KG1heFRyaXMpLmZpbGwoMCk7DQogICAgICAgICAgbWVzaC5udmVydHMgPSAwOw0KICAgICAgICAgIG1lc2gubnBvbHlzID0gMDsNCiAgICAgICAgICBtZXNoLm52cCA9IG52cDsNCiAgICAgICAgICBtZXNoLm1heHBvbHlzID0gbWF4VHJpczsNCiAgICAgICAgICB2YXIgbmV4dFZlcnQgPSBuZXcgQXJyYXkobWF4VmVydGljZXMpOw0KICAgICAgICAgIHZhciBmaXJzdFZlcnQgPSBuZXcgQXJyYXkoUmVjYXN0TWVzaC5WRVJURVhfQlVDS0VUX0NPVU5UKTsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMjIgPSAwOyBfaTIyIDwgUmVjYXN0TWVzaC5WRVJURVhfQlVDS0VUX0NPVU5UOyArK19pMjIpIHsNCiAgICAgICAgICAgIGZpcnN0VmVydFtfaTIyXSA9IC0xOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBpbmRpY2VzID0gbmV3IEFycmF5KG1heFZlcnRzUGVyQ29udCk7DQogICAgICAgICAgdmFyIHRyaXMgPSBuZXcgQXJyYXkobWF4VmVydHNQZXJDb250ICogMyk7DQogICAgICAgICAgdmFyIHBvbHlzID0gbmV3IEFycmF5KChtYXhWZXJ0c1BlckNvbnQgKyAxKSAqIG52cCk7DQogICAgICAgICAgdmFyIHRtcFBvbHkgPSBtYXhWZXJ0c1BlckNvbnQgKiBudnA7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIzID0gMDsgX2kyMyA8IGNzZXQuY29udHMubGVuZ3RoOyArK19pMjMpIHsNCiAgICAgICAgICAgIHZhciBjb250ID0gY3NldC5jb250c1tfaTIzXTsgLy8gU2tpcCBudWxsIGNvbnRvdXJzLg0KDQogICAgICAgICAgICBpZiAoY29udC5udmVydHMgPCAzKSBjb250aW51ZTsgLy8gVHJpYW5ndWxhdGUgY29udG91cg0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbnQubnZlcnRzOyArK2opIHsNCiAgICAgICAgICAgICAgaW5kaWNlc1tqXSA9IGo7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBudHJpcyA9IFJlY2FzdE1lc2gudHJpYW5ndWxhdGUoY29udC5udmVydHMsIGNvbnQudmVydHMsIGluZGljZXMsIHRyaXMpOw0KDQogICAgICAgICAgICBpZiAobnRyaXMgPD0gMCkgew0KICAgICAgICAgICAgICAvLyBCYWQgdHJpYW5ndWxhdGlvbiwgc2hvdWxkIG5vdCBoYXBwZW4uDQogICAgICAgICAgICAgIGN0eC53YXJuKCJidWlsZFBvbHlNZXNoOiBCYWQgdHJpYW5ndWxhdGlvbiBDb250b3VyICIgKyBfaTIzICsgIi4iKTsNCiAgICAgICAgICAgICAgbnRyaXMgPSAtbnRyaXM7DQogICAgICAgICAgICB9IC8vIEFkZCBhbmQgbWVyZ2UgdmVydGljZXMuDQoNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2o5ID0gMDsgX2o5IDwgY29udC5udmVydHM7ICsrX2o5KSB7DQogICAgICAgICAgICAgIHZhciB2ID0gX2o5ICogNDsNCiAgICAgICAgICAgICAgdmFyIGludiA9IFJlY2FzdE1lc2guYWRkVmVydGV4KGNvbnQudmVydHNbdiArIDBdLCBjb250LnZlcnRzW3YgKyAxXSwgY29udC52ZXJ0c1t2ICsgMl0sIG1lc2gudmVydHMsIGZpcnN0VmVydCwgbmV4dFZlcnQsIG1lc2gubnZlcnRzKTsNCiAgICAgICAgICAgICAgaW5kaWNlc1tfajldID0gaW52WzBdOw0KICAgICAgICAgICAgICBtZXNoLm52ZXJ0cyA9IGludlsxXTsNCg0KICAgICAgICAgICAgICBpZiAoKGNvbnQudmVydHNbdiArIDNdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9WRVJURVgpICE9IDApIHsNCiAgICAgICAgICAgICAgICAvLyBUaGlzIHZlcnRleCBzaG91bGQgYmUgcmVtb3ZlZC4NCiAgICAgICAgICAgICAgICB2ZmxhZ3NbaW5kaWNlc1tfajldXSA9IDE7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gQnVpbGQgaW5pdGlhbCBwb2x5Z29ucy4NCg0KDQogICAgICAgICAgICB2YXIgbnBvbHlzID0gMDsgLy8gQXJyYXlzLmZpbGwocG9seXMsIFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYKTsNCg0KICAgICAgICAgICAgcG9seXMuZmlsbChSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCk7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9qMTAgPSAwOyBfajEwIDwgbnRyaXM7ICsrX2oxMCkgew0KICAgICAgICAgICAgICB2YXIgdCA9IF9qMTAgKiAzOw0KDQogICAgICAgICAgICAgIGlmICh0cmlzW3QgKyAwXSAhPSB0cmlzW3QgKyAxXSAmJiB0cmlzW3QgKyAwXSAhPSB0cmlzW3QgKyAyXSAmJiB0cmlzW3QgKyAxXSAhPSB0cmlzW3QgKyAyXSkgew0KICAgICAgICAgICAgICAgIHBvbHlzW25wb2x5cyAqIG52cCArIDBdID0gaW5kaWNlc1t0cmlzW3QgKyAwXV07DQogICAgICAgICAgICAgICAgcG9seXNbbnBvbHlzICogbnZwICsgMV0gPSBpbmRpY2VzW3RyaXNbdCArIDFdXTsNCiAgICAgICAgICAgICAgICBwb2x5c1tucG9seXMgKiBudnAgKyAyXSA9IGluZGljZXNbdHJpc1t0ICsgMl1dOw0KICAgICAgICAgICAgICAgIG5wb2x5cysrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChucG9seXMgPT0gMCkgY29udGludWU7IC8vIE1lcmdlIHBvbHlnb25zLg0KDQogICAgICAgICAgICBpZiAobnZwID4gMykgew0KICAgICAgICAgICAgICBmb3IgKDs7KSB7DQogICAgICAgICAgICAgICAgLy8gRmluZCBiZXN0IHBvbHlnb25zIHRvIG1lcmdlLg0KICAgICAgICAgICAgICAgIHZhciBiZXN0TWVyZ2VWYWwgPSAwOw0KICAgICAgICAgICAgICAgIHZhciBiZXN0UGEgPSAwLA0KICAgICAgICAgICAgICAgICAgICBiZXN0UGIgPSAwLA0KICAgICAgICAgICAgICAgICAgICBiZXN0RWEgPSAwLA0KICAgICAgICAgICAgICAgICAgICBiZXN0RWIgPSAwOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgX2oxMSA9IDA7IF9qMTEgPCBucG9seXMgLSAxOyArK19qMTEpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBwaiA9IF9qMTEgKiBudnA7DQoNCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSBfajExICsgMTsgayA8IG5wb2x5czsgKytrKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBwayA9IGsgKiBudnA7DQogICAgICAgICAgICAgICAgICAgIHZhciB2ZWFlYiA9IFJlY2FzdE1lc2guZ2V0UG9seU1lcmdlVmFsdWUocG9seXMsIHBqLCBwaywgbWVzaC52ZXJ0cywgbnZwKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIF92NCA9IHZlYWViWzBdOw0KICAgICAgICAgICAgICAgICAgICB2YXIgZWEgPSB2ZWFlYlsxXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGViID0gdmVhZWJbMl07DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKF92NCA+IGJlc3RNZXJnZVZhbCkgew0KICAgICAgICAgICAgICAgICAgICAgIGJlc3RNZXJnZVZhbCA9IF92NDsNCiAgICAgICAgICAgICAgICAgICAgICBiZXN0UGEgPSBfajExOw0KICAgICAgICAgICAgICAgICAgICAgIGJlc3RQYiA9IGs7DQogICAgICAgICAgICAgICAgICAgICAgYmVzdEVhID0gZWE7DQogICAgICAgICAgICAgICAgICAgICAgYmVzdEViID0gZWI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoYmVzdE1lcmdlVmFsID4gMCkgew0KICAgICAgICAgICAgICAgICAgLy8gRm91bmQgYmVzdCwgbWVyZ2UuDQogICAgICAgICAgICAgICAgICB2YXIgcGEgPSBiZXN0UGEgKiBudnA7DQogICAgICAgICAgICAgICAgICB2YXIgcGIgPSBiZXN0UGIgKiBudnA7DQogICAgICAgICAgICAgICAgICBSZWNhc3RNZXNoLm1lcmdlUG9seVZlcnRzKHBvbHlzLCBwYSwgcGIsIGJlc3RFYSwgYmVzdEViLCB0bXBQb2x5LCBudnApOw0KICAgICAgICAgICAgICAgICAgdmFyIGxhc3RQb2x5ID0gKG5wb2x5cyAtIDEpICogbnZwOw0KDQogICAgICAgICAgICAgICAgICBpZiAocGIgIT0gbGFzdFBvbHkpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gYXJyYXljb3B5KHBvbHlzLCBsYXN0UG9seSwgcG9seXMsIHBiLCBudnApOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaTI0ID0gMDsgX2kyNCA8IG52cDsgX2kyNCsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgcG9seXNbcGIgKyBfaTI0XSA9IHBvbHlzW2xhc3RQb2x5ICsgX2kyNF07DQogICAgICAgICAgICAgICAgICAgICAgaWYgKHBvbHlzWzI4XSA9PSA4MCkgY29uc29sZS5sb2coImJyZWFrIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgbnBvbHlzLS07DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIC8vIENvdWxkIG5vdCBtZXJnZSBhbnkgcG9seWdvbnMsIHN0b3AuDQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy9IZXJlIHRoZXkgYXJlIHRoZSBzYW1lDQogICAgICAgICAgICAvLyBTdG9yZSBwb2x5Z29ucy4NCg0KDQogICAgICAgICAgICBmb3IgKHZhciBfajEyID0gMDsgX2oxMiA8IG5wb2x5czsgKytfajEyKSB7DQogICAgICAgICAgICAgIHZhciBwID0gbWVzaC5ucG9seXMgKiBudnAgKiAyOw0KICAgICAgICAgICAgICB2YXIgcSA9IF9qMTIgKiBudnA7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2syID0gMDsgX2syIDwgbnZwOyArK19rMikgew0KICAgICAgICAgICAgICAgIG1lc2gucG9seXNbcCArIF9rMl0gPSBwb2x5c1txICsgX2syXTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIG1lc2gucmVnc1ttZXNoLm5wb2x5c10gPSBjb250LnJlZzsNCiAgICAgICAgICAgICAgbWVzaC5hcmVhc1ttZXNoLm5wb2x5c10gPSBjb250LmFyZWE7DQogICAgICAgICAgICAgIG1lc2gubnBvbHlzKys7DQoNCiAgICAgICAgICAgICAgaWYgKG1lc2gubnBvbHlzID4gbWF4VHJpcykgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJyY0J1aWxkUG9seU1lc2g6IFRvbyBtYW55IHBvbHlnb25zICIgKyBtZXNoLm5wb2x5cyArICIgKG1heDoiICsgbWF4VHJpcyArICIpLiIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBmcy53cml0ZUZpbGVTeW5jKCIuL3BtZXNoanMudHh0IiwgSlNPTi5zdHJpbmdpZnkobWVzaC5wb2x5cykpDQogICAgICAgICAgLy9Ob3cgd2UgYXJlIHRoZSBzYW1lIGhlcmUNCiAgICAgICAgICAvLyBSZW1vdmUgZWRnZSB2ZXJ0aWNlcy4NCg0KDQogICAgICAgICAgZm9yICh2YXIgX2kyNSA9IDA7IF9pMjUgPCBtZXNoLm52ZXJ0czsgKytfaTI1KSB7DQogICAgICAgICAgICBpZiAodmZsYWdzW19pMjVdICE9IDApIHsNCiAgICAgICAgICAgICAgaWYgKCFSZWNhc3RNZXNoLmNhblJlbW92ZVZlcnRleChjdHgsIG1lc2gsIF9pMjUpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgUmVjYXN0TWVzaC5yZW1vdmVWZXJ0ZXgoY3R4LCBtZXNoLCBfaTI1LCBtYXhUcmlzKTsgLy8gUmVtb3ZlIHZlcnRleA0KICAgICAgICAgICAgICAvLyBOb3RlOiBtZXNoLm52ZXJ0cyBpcyBhbHJlYWR5IGRlY3JlbWVudGVkIGluc2lkZSByZW1vdmVWZXJ0ZXgoKSENCiAgICAgICAgICAgICAgLy8gRml4dXAgdmVydGV4IGZsYWdzDQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2oxMyA9IF9pMjU7IF9qMTMgPCBtZXNoLm52ZXJ0czsgKytfajEzKSB7DQogICAgICAgICAgICAgICAgdmZsYWdzW19qMTNdID0gdmZsYWdzW19qMTMgKyAxXTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIC0tX2kyNTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIENhbGN1bGF0ZSBhZGphY2VuY3kuDQoNCg0KICAgICAgICAgIHRoaXMuYnVpbGRNZXNoQWRqYWNlbmN5KG1lc2gucG9seXMsIG1lc2gubnBvbHlzLCBtZXNoLm52ZXJ0cywgbnZwKTsgLy8gRmluZCBwb3J0YWwgZWRnZXMNCg0KICAgICAgICAgIGlmIChtZXNoLmJvcmRlclNpemUgPiAwKSB7DQogICAgICAgICAgICB2YXIgdyA9IGNzZXQud2lkdGg7DQogICAgICAgICAgICB2YXIgaCA9IGNzZXQuaGVpZ2h0Ow0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTI2ID0gMDsgX2kyNiA8IG1lc2gubnBvbHlzOyArK19pMjYpIHsNCiAgICAgICAgICAgICAgdmFyIF9wNyA9IF9pMjYgKiAyICogbnZwOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9qMTQgPSAwOyBfajE0IDwgbnZwOyArK19qMTQpIHsNCiAgICAgICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcDcgKyBfajE0XSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgYnJlYWs7IC8vIFNraXAgY29ubmVjdGVkIGVkZ2VzLg0KDQogICAgICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbX3A3ICsgbnZwICsgX2oxNF0gIT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIHZhciBuaiA9IF9qMTQgKyAxOw0KICAgICAgICAgICAgICAgIGlmIChuaiA+PSBudnAgfHwgbWVzaC5wb2x5c1tfcDcgKyBual0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpIG5qID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgdmEgPSBtZXNoLnBvbHlzW19wNyArIF9qMTRdICogMzsNCiAgICAgICAgICAgICAgICB2YXIgdmIgPSBtZXNoLnBvbHlzW19wNyArIG5qXSAqIDM7DQogICAgICAgICAgICAgICAgaWYgKG1lc2gudmVydHNbdmEgKyAwXSA9PSAwICYmIG1lc2gudmVydHNbdmIgKyAwXSA9PSAwKSBtZXNoLnBvbHlzW19wNyArIG52cCArIF9qMTRdID0gMHg4MDAwIHwgMDtlbHNlIGlmIChtZXNoLnZlcnRzW3ZhICsgMl0gPT0gaCAmJiBtZXNoLnZlcnRzW3ZiICsgMl0gPT0gaCkgbWVzaC5wb2x5c1tfcDcgKyBudnAgKyBfajE0XSA9IDB4ODAwMCB8IDE7ZWxzZSBpZiAobWVzaC52ZXJ0c1t2YSArIDBdID09IHcgJiYgbWVzaC52ZXJ0c1t2YiArIDBdID09IHcpIG1lc2gucG9seXNbX3A3ICsgbnZwICsgX2oxNF0gPSAweDgwMDAgfCAyO2Vsc2UgaWYgKG1lc2gudmVydHNbdmEgKyAyXSA9PSAwICYmIG1lc2gudmVydHNbdmIgKyAyXSA9PSAwKSBtZXNoLnBvbHlzW19wNyArIG52cCArIF9qMTRdID0gMHg4MDAwIHwgMzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gSnVzdCBhbGxvY2F0ZSB0aGUgbWVzaCBmbGFncyBhcnJheS4gVGhlIHVzZXIgaXMgcmVzcG9zaWJsZSB0byBmaWxsIGl0Lg0KDQoNCiAgICAgICAgICBtZXNoLmZsYWdzID0gbmV3IEFycmF5KG1lc2gubnBvbHlzKTsNCiAgICAgICAgICBtZXNoLmZsYWdzLmZpbGwoMCk7DQoNCiAgICAgICAgICBpZiAobWVzaC5udmVydHMgPiAweGZmZmYpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJyY0J1aWxkUG9seU1lc2g6IFRoZSByZXN1bHRpbmcgbWVzaCBoYXMgdG9vIG1hbnkgdmVydGljZXMgIiArIG1lc2gubnZlcnRzICsgIiAobWF4ICIgKyAweGZmZmYgKyAiKS4gRGF0YSBjYW4gYmUgY29ycnVwdGVkLiIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChtZXNoLm5wb2x5cyA+IDB4ZmZmZikgew0KICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oInJjQnVpbGRQb2x5TWVzaDogVGhlIHJlc3VsdGluZyBtZXNoIGhhcyB0b28gbWFueSBwb2x5Z29ucyAiICsgbWVzaC5ucG9seXMgKyAiIChtYXggIiArIDB4ZmZmZiArICIpLiBEYXRhIGNhbiBiZSBjb3JydXB0ZWQuIik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgY3R4LnN0b3BUaW1lcigiQlVJTERfUE9MWU1FU0giKTsNCiAgICAgICAgICByZXR1cm4gbWVzaDsNCiAgICAgICAgfSAvLy8gQHNlZSByY0FsbG9jUG9seU1lc2gsIHJjUG9seU1lc2gNCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtZXJnZVBvbHlNZXNoZXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VQb2x5TWVzaGVzKGN0eCwgbWVzaGVzLCBubWVzaGVzKSB7DQogICAgICAgICAgaWYgKG5tZXNoZXMgPT0gMCB8fCBtZXNoZXMgPT0gbnVsbCkgcmV0dXJuIG51bGw7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIk1FUkdFX1BPTFlNRVNIIik7DQogICAgICAgICAgdmFyIG1lc2ggPSBuZXcgUG9seU1lc2goKTsNCiAgICAgICAgICBtZXNoLm52cCA9IG1lc2hlc1swXS5udnA7DQogICAgICAgICAgbWVzaC5jcyA9IG1lc2hlc1swXS5jczsNCiAgICAgICAgICBtZXNoLmNoID0gbWVzaGVzWzBdLmNoOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KG1lc2guYm1pbiwgbWVzaGVzWzBdLmJtaW4sIDApOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KG1lc2guYm1heCwgbWVzaGVzWzBdLmJtYXgsIDApOw0KICAgICAgICAgIHZhciBtYXhWZXJ0cyA9IDA7DQogICAgICAgICAgdmFyIG1heFBvbHlzID0gMDsNCiAgICAgICAgICB2YXIgbWF4VmVydHNQZXJNZXNoID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm1lc2hlczsgKytpKSB7DQogICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEubWluKG1lc2guYm1pbiwgbWVzaGVzW2ldLmJtaW4sIDApOw0KICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1heChtZXNoLmJtYXgsIG1lc2hlc1tpXS5ibWF4LCAwKTsNCiAgICAgICAgICAgIG1heFZlcnRzUGVyTWVzaCA9IE1hdGgubWF4KG1heFZlcnRzUGVyTWVzaCwgbWVzaGVzW2ldLm52ZXJ0cyk7DQogICAgICAgICAgICBtYXhWZXJ0cyArPSBtZXNoZXNbaV0ubnZlcnRzOw0KICAgICAgICAgICAgbWF4UG9seXMgKz0gbWVzaGVzW2ldLm5wb2x5czsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBtZXNoLm52ZXJ0cyA9IDA7DQogICAgICAgICAgbWVzaC52ZXJ0cyA9IG5ldyBBcnJheShtYXhWZXJ0cyAqIDMpOw0KICAgICAgICAgIG1lc2gubnBvbHlzID0gMDsNCiAgICAgICAgICBtZXNoLnBvbHlzID0gbmV3IEFycmF5KG1heFBvbHlzICogMiAqIG1lc2gubnZwKTsNCiAgICAgICAgICBtZXNoLnBvbHlzLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgsIDAsIG1lc2gucG9seXMubGVuZ3RoKTsNCiAgICAgICAgICBtZXNoLnJlZ3MgPSBuZXcgQXJyYXkobWF4UG9seXMpOw0KICAgICAgICAgIG1lc2guYXJlYXMgPSBuZXcgQXJyYXkobWF4UG9seXMpOw0KICAgICAgICAgIG1lc2guZmxhZ3MgPSBuZXcgQXJyYXkobWF4UG9seXMpOw0KICAgICAgICAgIHZhciBuZXh0VmVydCA9IG5ldyBBcnJheShtYXhWZXJ0cyk7DQogICAgICAgICAgdmFyIGZpcnN0VmVydCA9IG5ldyBBcnJheShSZWNhc3RNZXNoLlZFUlRFWF9CVUNLRVRfQ09VTlQpOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kyNyA9IDA7IF9pMjcgPCBSZWNhc3RNZXNoLlZFUlRFWF9CVUNLRVRfQ09VTlQ7ICsrX2kyNykgew0KICAgICAgICAgICAgZmlyc3RWZXJ0W19pMjddID0gLTE7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHZyZW1hcCA9IG5ldyBBcnJheShtYXhWZXJ0c1Blck1lc2gpOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kyOCA9IDA7IF9pMjggPCBubWVzaGVzOyArK19pMjgpIHsNCiAgICAgICAgICAgIHZhciBwbWVzaCA9IG1lc2hlc1tfaTI4XTsNCiAgICAgICAgICAgIHZhciBveCA9IE1hdGguZmxvb3IoKHBtZXNoLmJtaW5bMF0gLSBtZXNoLmJtaW5bMF0pIC8gbWVzaC5jcyArIDAuNSk7DQogICAgICAgICAgICB2YXIgb3ogPSBNYXRoLmZsb29yKChwbWVzaC5ibWluWzJdIC0gbWVzaC5ibWluWzJdKSAvIG1lc2guY3MgKyAwLjUpOw0KICAgICAgICAgICAgdmFyIGlzTWluWCA9IG94ID09IDA7DQogICAgICAgICAgICB2YXIgaXNNaW5aID0gb3ogPT0gMDsNCiAgICAgICAgICAgIHZhciBpc01heFggPSBNYXRoLmZsb29yKChtZXNoLmJtYXhbMF0gLSBwbWVzaC5ibWF4WzBdKSAvIG1lc2guY3MgKyAwLjUpID09IDA7DQogICAgICAgICAgICB2YXIgaXNNYXhaID0gTWF0aC5mbG9vcigobWVzaC5ibWF4WzJdIC0gcG1lc2guYm1heFsyXSkgLyBtZXNoLmNzICsgMC41KSA9PSAwOw0KICAgICAgICAgICAgdmFyIGlzT25Cb3JkZXIgPSBpc01pblggfHwgaXNNaW5aIHx8IGlzTWF4WCB8fCBpc01heFo7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcG1lc2gubnZlcnRzOyArK2opIHsNCiAgICAgICAgICAgICAgdmFyIHYgPSBqICogMzsNCiAgICAgICAgICAgICAgdmFyIGludiA9IGFkZFZlcnRleChwbWVzaC52ZXJ0c1t2ICsgMF0gKyBveCwgcG1lc2gudmVydHNbdiArIDFdLCBwbWVzaC52ZXJ0c1t2ICsgMl0gKyBveiwgbWVzaC52ZXJ0cywgZmlyc3RWZXJ0LCBuZXh0VmVydCwgbWVzaC5udmVydHMpOw0KICAgICAgICAgICAgICB2cmVtYXBbal0gPSBpbnZbMF07DQogICAgICAgICAgICAgIG1lc2gubnZlcnRzID0gaW52WzFdOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBfajE1ID0gMDsgX2oxNSA8IHBtZXNoLm5wb2x5czsgKytfajE1KSB7DQogICAgICAgICAgICAgIHZhciB0Z3QgPSBtZXNoLm5wb2x5cyAqIDIgKiBtZXNoLm52cDsNCiAgICAgICAgICAgICAgdmFyIHNyYyA9IF9qMTUgKiAyICogbWVzaC5udnA7DQogICAgICAgICAgICAgIG1lc2gucmVnc1ttZXNoLm5wb2x5c10gPSBwbWVzaC5yZWdzW19qMTVdOw0KICAgICAgICAgICAgICBtZXNoLmFyZWFzW21lc2gubnBvbHlzXSA9IHBtZXNoLmFyZWFzW19qMTVdOw0KICAgICAgICAgICAgICBtZXNoLmZsYWdzW21lc2gubnBvbHlzXSA9IHBtZXNoLmZsYWdzW19qMTVdOw0KICAgICAgICAgICAgICBtZXNoLm5wb2x5cysrOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbWVzaC5udnA7ICsraykgew0KICAgICAgICAgICAgICAgIGlmIChwbWVzaC5wb2x5c1tzcmMgKyBrXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgYnJlYWs7DQogICAgICAgICAgICAgICAgbWVzaC5wb2x5c1t0Z3QgKyBrXSA9IHZyZW1hcFtwbWVzaC5wb2x5c1tzcmMgKyBrXV07DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoaXNPbkJvcmRlcikgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIF9rMyA9IG1lc2gubnZwOyBfazMgPCBtZXNoLm52cCAqIDI7ICsrX2szKSB7DQogICAgICAgICAgICAgICAgICBpZiAoKHBtZXNoLnBvbHlzW3NyYyArIF9rM10gJiAweDgwMDApICE9IDAgJiYgcG1lc2gucG9seXNbc3JjICsgX2szXSAhPSAweGZmZmYpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGRpciA9IHBtZXNoLnBvbHlzW3NyYyArIF9rM10gJiAweGY7DQoNCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkaXIpIHsNCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3J0YWwgeC0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01pblgpIG1lc2gucG9seXNbdGd0ICsgX2szXSA9IHBtZXNoLnBvbHlzW3NyYyArIF9rM107DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvcnRhbCB6Kw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWF4WikgbWVzaC5wb2x5c1t0Z3QgKyBfazNdID0gcG1lc2gucG9seXNbc3JjICsgX2szXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9ydGFsIHgrDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXhYKSBtZXNoLnBvbHlzW3RndCArIF9rM10gPSBwbWVzaC5wb2x5c1tzcmMgKyBfazNdOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3J0YWwgei0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01pblopIG1lc2gucG9seXNbdGd0ICsgX2szXSA9IHBtZXNoLnBvbHlzW3NyYyArIF9rM107DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gQ2FsY3VsYXRlIGFkamFjZW5jeS4NCg0KDQogICAgICAgICAgYnVpbGRNZXNoQWRqYWNlbmN5KG1lc2gucG9seXMsIG1lc2gubnBvbHlzLCBtZXNoLm52ZXJ0cywgbWVzaC5udnApOw0KDQogICAgICAgICAgaWYgKG1lc2gubnZlcnRzID4gMHhmZmZmKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigicmNCdWlsZFBvbHlNZXNoOiBUaGUgcmVzdWx0aW5nIG1lc2ggaGFzIHRvbyBtYW55IHZlcnRpY2VzICIgKyBtZXNoLm52ZXJ0cyArICIgKG1heCAiICsgMHhmZmZmICsgIikuIERhdGEgY2FuIGJlIGNvcnJ1cHRlZC4iKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobWVzaC5ucG9seXMgPiAweGZmZmYpIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJyY0J1aWxkUG9seU1lc2g6IFRoZSByZXN1bHRpbmcgbWVzaCBoYXMgdG9vIG1hbnkgcG9seWdvbnMgIiArIG1lc2gubnBvbHlzICsgIiAobWF4ICIgKyAweGZmZmYgKyAiKS4gRGF0YSBjYW4gYmUgY29ycnVwdGVkLiIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIk1FUkdFX1BPTFlNRVNIIik7DQogICAgICAgICAgcmV0dXJuIG1lc2g7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY29weVBvbHlNZXNoIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHlQb2x5TWVzaChjdHgsIHNyYykgew0KICAgICAgICAgIHZhciBkc3QgPSBuZXcgUG9seU1lc2goKTsNCiAgICAgICAgICBkc3QubnZlcnRzID0gc3JjLm52ZXJ0czsNCiAgICAgICAgICBkc3QubnBvbHlzID0gc3JjLm5wb2x5czsNCiAgICAgICAgICBkc3QubWF4cG9seXMgPSBzcmMubnBvbHlzOw0KICAgICAgICAgIGRzdC5udnAgPSBzcmMubnZwOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KGRzdC5ibWluLCBzcmMuYm1pbiwgMCk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkoZHN0LmJtYXgsIHNyYy5ibWF4LCAwKTsNCiAgICAgICAgICBkc3QuY3MgPSBzcmMuY3M7DQogICAgICAgICAgZHN0LmNoID0gc3JjLmNoOw0KICAgICAgICAgIGRzdC5ib3JkZXJTaXplID0gc3JjLmJvcmRlclNpemU7DQogICAgICAgICAgZHN0Lm1heEVkZ2VFcnJvciA9IHNyYy5tYXhFZGdlRXJyb3I7DQogICAgICAgICAgZHN0LnZlcnRzID0gbmV3IEFycmF5KHNyYy5udmVydHMgKiAzKTsNCiAgICAgICAgICBhcnJheWNvcHkkMShzcmMudmVydHMsIDAsIGRzdC52ZXJ0cywgMCwgZHN0LnZlcnRzLmxlbmd0aCk7DQogICAgICAgICAgZHN0LnBvbHlzID0gbmV3IEFycmF5KHNyYy5ucG9seXMgKiAyICogc3JjLm52cCk7DQogICAgICAgICAgYXJyYXljb3B5JDEoc3JjLnBvbHlzLCAwLCBkc3QucG9seXMsIDAsIGRzdC5wb2x5cy5sZW5ndGgpOw0KICAgICAgICAgIGRzdC5yZWdzID0gbmV3IEFycmF5KHNyYy5ucG9seXMpOw0KICAgICAgICAgIGFycmF5Y29weSQxKHNyYy5yZWdzLCAwLCBkc3QucmVncywgMCwgZHN0LnJlZ3MubGVuZ3RoKTsNCiAgICAgICAgICBkc3QuYXJlYXMgPSBuZXcgQXJyYXkoc3JjLm5wb2x5cyk7DQogICAgICAgICAgYXJyYXljb3B5JDEoc3JjLmFyZWFzLCAwLCBkc3QuYXJlYXMsIDAsIGRzdC5hcmVhcy5sZW5ndGgpOw0KICAgICAgICAgIGRzdC5mbGFncyA9IG5ldyBBcnJheShzcmMubnBvbHlzKTsNCiAgICAgICAgICBhcnJheWNvcHkkMShzcmMuZmxhZ3MsIDAsIGRzdC5mbGFncywgMCwgZHN0LmZsYWdzLmxlbmd0aCk7DQogICAgICAgICAgcmV0dXJuIGRzdDsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gUmVjYXN0TWVzaDsNCiAgICB9KCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaCwgIlZFUlRFWF9CVUNLRVRfQ09VTlQiLCAxIDw8IDEyKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiBSZXByZXNlbnRzIGEgc2ltcGxlLCBub24tb3ZlcmxhcHBpbmcgY29udG91ciBpbiBmaWVsZCBzcGFjZS4gKi8NCiAgICB2YXIgQ29udG91ciA9IGZ1bmN0aW9uIENvbnRvdXIoKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91cik7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmVydHMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnZlcnRzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicnZlcnRzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm5ydmVydHMiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhcmVhIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVnIiwgMCk7DQogICAgfTsNCg0KICAgIHZhciBfdGVtcCQyLCBfdGVtcDIkMiwgX3RlbXAzOw0KDQogICAgdmFyIFJlY2FzdENvbnRvdXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gUmVjYXN0Q29udG91cigpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdENvbnRvdXIpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiQ29tcGFyZUhvbGVzIiwgZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgICAgICBpZiAoYS5taW54ID09IGIubWlueCkgew0KICAgICAgICAgICAgaWYgKGEubWlueiA8IGIubWlueikgcmV0dXJuIC0xOw0KICAgICAgICAgICAgaWYgKGEubWlueiA+IGIubWlueikgcmV0dXJuIDE7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmIChhLm1pbnggPCBiLm1pbngpIHJldHVybiAtMTsNCiAgICAgICAgICAgIGlmIChhLm1pbnggPiBiLm1pbngpIHJldHVybiAxOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIkNvbXBhcmVEaWFnRGlzdCIsIGZ1bmN0aW9uICh2YSwgdmIpIHsNCiAgICAgICAgICB2YXIgYSA9IHZhOw0KICAgICAgICAgIHZhciBiID0gdmI7DQogICAgICAgICAgaWYgKGEuZGlzdCA8IGIuZGlzdCkgcmV0dXJuIC0xOw0KICAgICAgICAgIGlmIChhLmRpc3QgPiBiLmRpc3QpIHJldHVybiAxOw0KICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9KTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKFJlY2FzdENvbnRvdXIsIFt7DQogICAgICAgIGtleTogIm1lcmdlUmVnaW9uSG9sZXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VSZWdpb25Ib2xlcyhjdHgsIHJlZ2lvbikgew0KICAgICAgICAgIC8vIFNvcnQgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0Lg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVnaW9uLm5ob2xlczsgaSsrKSB7DQogICAgICAgICAgICB2YXIgbWlubGVmdCA9IGZpbmRMZWZ0TW9zdFZlcnRleChyZWdpb24uaG9sZXNbaV0uY29udG91cik7DQogICAgICAgICAgICByZWdpb24uaG9sZXNbaV0ubWlueCA9IG1pbmxlZnRbMF07DQogICAgICAgICAgICByZWdpb24uaG9sZXNbaV0ubWlueiA9IG1pbmxlZnRbMV07DQogICAgICAgICAgICByZWdpb24uaG9sZXNbaV0ubGVmdG1vc3QgPSBtaW5sZWZ0WzJdOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIEFycmF5cy5zb3J0KHJlZ2lvbi5ob2xlcywgbmV3IENvbXBhcmVIb2xlcygpKTsNCiAgICAgICAgICB2YXIgbWF4VmVydHMgPSByZWdpb24ub3V0bGluZS5udmVydHM7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgcmVnaW9uLm5ob2xlczsgX2krKykgew0KICAgICAgICAgICAgbWF4VmVydHMgKz0gcmVnaW9uLmhvbGVzW19pXS5jb250b3VyLm52ZXJ0czsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBkaWFncyA9IG5ldyBBcnJheShtYXhWZXJ0cyk7DQoNCiAgICAgICAgICBmb3IgKHZhciBwZCA9IDA7IHBkIDwgbWF4VmVydHM7IHBkKyspIHsNCiAgICAgICAgICAgIGRpYWdzW3BkXSA9IG5ldyBQb3RlbnRpYWxEaWFnb25hbCgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBvdXRsaW5lID0gcmVnaW9uLm91dGxpbmU7IC8vIE1lcmdlIGhvbGVzIGludG8gdGhlIG91dGxpbmUgb25lIGJ5IG9uZS4NCg0KICAgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHJlZ2lvbi5uaG9sZXM7IF9pMisrKSB7DQogICAgICAgICAgICB2YXIgaG9sZSA9IHJlZ2lvbi5ob2xlc1tfaTJdLmNvbnRvdXI7DQogICAgICAgICAgICB2YXIgaW5kZXggPSAtMTsNCiAgICAgICAgICAgIHZhciBiZXN0VmVydGV4ID0gcmVnaW9uLmhvbGVzW19pMl0ubGVmdG1vc3Q7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGl0ZXIgPSAwOyBpdGVyIDwgaG9sZS5udmVydHM7IGl0ZXIrKykgew0KICAgICAgICAgICAgICAvLyBGaW5kIHBvdGVudGlhbCBkaWFnb25hbHMuDQogICAgICAgICAgICAgIC8vIFRoZSAnYmVzdCcgdmVydGV4IG11c3QgYmUgaW4gdGhlIGNvbmUgZGVzY3JpYmVkIGJ5IDMgY29zZXF1dGl2ZSB2ZXJ0aWNlcyBvZiB0aGUgb3V0bGluZS4NCiAgICAgICAgICAgICAgLy8gLi5vIGotMQ0KICAgICAgICAgICAgICAvLyAgIHwNCiAgICAgICAgICAgICAgLy8gICB8ICAgKiBiZXN0DQogICAgICAgICAgICAgIC8vICAgfA0KICAgICAgICAgICAgICAvLyBqIG8tLS0tLW8gaisxDQogICAgICAgICAgICAgIC8vICAgICAgICAgOg0KICAgICAgICAgICAgICB2YXIgbmRpYWdzID0gMDsNCiAgICAgICAgICAgICAgdmFyIGNvcm5lciA9IGJlc3RWZXJ0ZXggKiA0Ow0KDQogICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3V0bGluZS5udmVydHM7IGorKykgew0KICAgICAgICAgICAgICAgIGlmIChpbkNvbmUoaiwgb3V0bGluZS5udmVydHMsIG91dGxpbmUudmVydHMsIGNvcm5lciwgaG9sZS52ZXJ0cykpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBkeCA9IG91dGxpbmUudmVydHNbaiAqIDQgKyAwXSAtIGhvbGUudmVydHNbY29ybmVyICsgMF07DQogICAgICAgICAgICAgICAgICB2YXIgZHogPSBvdXRsaW5lLnZlcnRzW2ogKiA0ICsgMl0gLSBob2xlLnZlcnRzW2Nvcm5lciArIDJdOw0KICAgICAgICAgICAgICAgICAgZGlhZ3NbbmRpYWdzXS52ZXJ0ID0gajsNCiAgICAgICAgICAgICAgICAgIGRpYWdzW25kaWFnc10uZGlzdCA9IGR4ICogZHggKyBkeiAqIGR6Ow0KICAgICAgICAgICAgICAgICAgbmRpYWdzKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IC8vIFNvcnQgcG90ZW50aWFsIGRpYWdvbmFscyBieSBkaXN0YW5jZSwgd2Ugd2FudCB0byBtYWtlIHRoZSBjb25uZWN0aW9uIGFzIHNob3J0IGFzIHBvc3NpYmxlLg0KDQoNCiAgICAgICAgICAgICAgQXJyYXlzLnNvcnQoZGlhZ3MsIDAsIG5kaWFncywgbmV3IENvbXBhcmVEaWFnRGlzdCgpKTsgLy8gRmluZCBhIGRpYWdvbmFsIHRoYXQgaXMgbm90IGludGVyc2VjdGluZyB0aGUgb3V0bGluZSBub3QgdGhlIHJlbWFpbmluZyBob2xlcy4NCg0KICAgICAgICAgICAgICBpbmRleCA9IC0xOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBuZGlhZ3M7IF9qKyspIHsNCiAgICAgICAgICAgICAgICB2YXIgcHQgPSBkaWFnc1tfal0udmVydCAqIDQ7DQogICAgICAgICAgICAgICAgdmFyIGludGVyc2VjdCA9IGludGVyc2VjdFNlZ0NvdW50b3VyKHB0LCBjb3JuZXIsIGRpYWdzW19pMl0udmVydCwgb3V0bGluZS5udmVydHMsIG91dGxpbmUudmVydHMsIG91dGxpbmUudmVydHMsIGhvbGUudmVydHMpOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IF9pMjsgayA8IHJlZ2lvbi5uaG9sZXMgJiYgIWludGVyc2VjdDsgaysrKSB7DQogICAgICAgICAgICAgICAgICBpbnRlcnNlY3QgfD0gaW50ZXJzZWN0U2VnQ291bnRvdXIocHQsIGNvcm5lciwgLTEsIHJlZ2lvbi5ob2xlc1trXS5jb250b3VyLm52ZXJ0cywgcmVnaW9uLmhvbGVzW2tdLmNvbnRvdXIudmVydHMsIG91dGxpbmUudmVydHMsIGhvbGUudmVydHMpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghaW50ZXJzZWN0KSB7DQogICAgICAgICAgICAgICAgICBpbmRleCA9IGRpYWdzW19qXS52ZXJ0Ow0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IC8vIElmIGZvdW5kIG5vbi1pbnRlcnNlY3RpbmcgZGlhZ29uYWwsIHN0b3AgbG9va2luZy4NCg0KDQogICAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkgYnJlYWs7IC8vIEFsbCB0aGUgcG90ZW50aWFsIGRpYWdvbmFscyBmb3IgdGhlIGN1cnJlbnQgdmVydGV4IHdlcmUgaW50ZXJzZWN0aW5nLCB0cnkgbmV4dCB2ZXJ0ZXguDQoNCiAgICAgICAgICAgICAgYmVzdFZlcnRleCA9IChiZXN0VmVydGV4ICsgMSkgJSBob2xlLm52ZXJ0czsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGluZGV4ID09IC0xKSB7DQogICAgICAgICAgICAgIGN0eC53YXJuKCJtZXJnZUhvbGVzOiBGYWlsZWQgdG8gZmluZCBtZXJnZSBwb2ludHMgZm9yIik7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBtZXJnZUNvbnRvdXJzKHJlZ2lvbi5vdXRsaW5lLCBob2xlLCBpbmRleCwgYmVzdFZlcnRleCk7DQogICAgICAgICAgfQ0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHJhdyBjb250b3VycyB3aWxsIG1hdGNoIHRoZSByZWdpb24gb3V0bGluZXMgZXhhY3RseS4gVGhlIEBwIG1heEVycm9yIGFuZCBAcCBtYXhFZGdlTGVuDQogICAgICAgIC8vLyBwYXJhbWV0ZXJzIGNvbnRyb2wgaG93IGNsb3NlbHkgdGhlIHNpbXBsaWZpZWQgY29udG91cnMgd2lsbCBtYXRjaCB0aGUgcmF3IGNvbnRvdXJzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFNpbXBsaWZpZWQgY29udG91cnMgYXJlIGdlbmVyYXRlZCBzdWNoIHRoYXQgdGhlIHZlcnRpY2VzIGZvciBwb3J0YWxzIGJldHdlZW4gYXJlYXMgbWF0Y2ggdXAuDQogICAgICAgIC8vLyAoVGhleSBhcmUgY29uc2lkZXJlZCBtYW5kYXRvcnkgdmVydGljZXMuKQ0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFNldHRpbmcgQHAgbWF4RWRnZUxlbmd0aCB0byB6ZXJvIHdpbGwgZGlzYWJsZWQgdGhlIGVkZ2UgbGVuZ3RoIGZlYXR1cmUuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gU2VlIHRoZSAjcmNDb25maWcgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBzZWUgcmNBbGxvY0NvbnRvdXJTZXQsIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY0NvbnRvdXJTZXQsIHJjQ29uZmlnDQoNCiAgICAgIH1dLCBbew0KICAgICAgICBrZXk6ICJnZXRDb3JuZXJIZWlnaHQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29ybmVySGVpZ2h0KHgsIHksIGksIGRpciwgY2hmLCBpc0JvcmRlclZlcnRleCkgew0KICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW2ldOw0KICAgICAgICAgIHZhciBjaCA9IHMueTsNCiAgICAgICAgICB2YXIgZGlycCA9IGRpciArIDEgJiAweDM7DQogICAgICAgICAgdmFyIHJlZ3MgPSBbMCwgMCwgMCwgMF07IC8vIENvbWJpbmUgcmVnaW9uIGFuZCBhcmVhIGNvZGVzIGluIG9yZGVyIHRvIHByZXZlbnQNCiAgICAgICAgICAvLyBib3JkZXIgdmVydGljZXMgd2hpY2ggYXJlIGluIGJldHdlZW4gdHdvIGFyZWFzIHRvIGJlIHJlbW92ZWQuDQoNCiAgICAgICAgICByZWdzWzBdID0gY2hmLnNwYW5zW2ldLnJlZyB8IGNoZi5hcmVhc1tpXSA8PCAxNjsNCg0KICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KICAgICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7DQogICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcik7DQogICAgICAgICAgICB2YXIgYXMgPSBjaGYuc3BhbnNbYWldOw0KICAgICAgICAgICAgY2ggPSBNYXRoLm1heChjaCwgYXMueSk7DQogICAgICAgICAgICByZWdzWzFdID0gY2hmLnNwYW5zW2FpXS5yZWcgfCBjaGYuYXJlYXNbYWldIDw8IDE2Ow0KDQogICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihhcywgZGlycCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgdmFyIGF4MiA9IGF4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlycCk7DQogICAgICAgICAgICAgIHZhciBheTIgPSBheSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcnApOw0KICAgICAgICAgICAgICB2YXIgYWkyID0gY2hmLmNlbGxzW2F4MiArIGF5MiAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXJwKTsNCiAgICAgICAgICAgICAgdmFyIGFzMiA9IGNoZi5zcGFuc1thaTJdOw0KICAgICAgICAgICAgICBjaCA9IE1hdGgubWF4KGNoLCBhczIueSk7DQogICAgICAgICAgICAgIHJlZ3NbMl0gPSBjaGYuc3BhbnNbYWkyXS5yZWcgfCBjaGYuYXJlYXNbYWkyXSA8PCAxNjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXJwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgdmFyIF9heCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXJwKTsNCg0KICAgICAgICAgICAgdmFyIF9heSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXJwKTsNCg0KICAgICAgICAgICAgdmFyIF9haSA9IGNoZi5jZWxsc1tfYXggKyBfYXkgKiBjaGYud2lkdGhdLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXJwKTsNCg0KICAgICAgICAgICAgdmFyIF9hcyA9IGNoZi5zcGFuc1tfYWldOw0KICAgICAgICAgICAgY2ggPSBNYXRoLm1heChjaCwgX2FzLnkpOw0KICAgICAgICAgICAgcmVnc1szXSA9IGNoZi5zcGFuc1tfYWldLnJlZyB8IGNoZi5hcmVhc1tfYWldIDw8IDE2Ow0KDQogICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgdmFyIF9heDIgPSBfYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KDQogICAgICAgICAgICAgIHZhciBfYXkyID0gX2F5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCg0KICAgICAgICAgICAgICB2YXIgX2FpMiA9IGNoZi5jZWxsc1tfYXgyICsgX2F5MiAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hcywgZGlyKTsNCg0KICAgICAgICAgICAgICB2YXIgX2FzMiA9IGNoZi5zcGFuc1tfYWkyXTsNCiAgICAgICAgICAgICAgY2ggPSBNYXRoLm1heChjaCwgX2FzMi55KTsNCiAgICAgICAgICAgICAgcmVnc1syXSA9IGNoZi5zcGFuc1tfYWkyXS5yZWcgfCBjaGYuYXJlYXNbX2FpMl0gPDwgMTY7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBDaGVjayBpZiB0aGUgdmVydGV4IGlzIHNwZWNpYWwgZWRnZSB2ZXJ0ZXgsIHRoZXNlIHZlcnRpY2VzIHdpbGwgYmUgcmVtb3ZlZCBsYXRlci4NCg0KICAgICAgICAgIHJldHVybiBjaDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ3YWxrQ29udG91ciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB3YWxrQ29udG91cih4LCB5LCBpLCBjaGYsIGZsYWdzLCBwb2ludHMpIHsNCiAgICAgICAgICAvLyBDaG9vc2UgdGhlIGZpcnN0IG5vbi1jb25uZWN0ZWQgZWRnZQ0KICAgICAgICAgIHZhciBkaXIgPSAwOw0KDQogICAgICAgICAgd2hpbGUgKChmbGFnc1tpXSAmIDEgPDwgZGlyKSA9PSAwKSB7DQogICAgICAgICAgICBkaXIrKzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgc3RhcnREaXIgPSBkaXI7DQogICAgICAgICAgdmFyIHN0YXJ0aSA9IGk7DQogICAgICAgICAgdmFyIGFyZWEgPSBjaGYuYXJlYXNbaV07DQogICAgICAgICAgdmFyIGl0ZXIgPSAwOw0KDQogICAgICAgICAgd2hpbGUgKCsraXRlciA8IDQwMDAwKSB7DQogICAgICAgICAgICBpZiAoKGZsYWdzW2ldICYgMSA8PCBkaXIpICE9IDApIHsNCiAgICAgICAgICAgICAgLy8gQ2hvb3NlIHRoZSBlZGdlIGNvcm5lcg0KICAgICAgICAgICAgICB2YXIgaXNCb3JkZXJWZXJ0ZXggPSBmYWxzZTsNCiAgICAgICAgICAgICAgdmFyIGlzQXJlYUJvcmRlciA9IGZhbHNlOw0KICAgICAgICAgICAgICB2YXIgcHggPSB4Ow0KICAgICAgICAgICAgICB2YXIgcHkgPSBSZWNhc3RDb250b3VyLmdldENvcm5lckhlaWdodCh4LCB5LCBpLCBkaXIsIGNoZiwgaXNCb3JkZXJWZXJ0ZXgpOw0KICAgICAgICAgICAgICB2YXIgcHogPSB5Ow0KDQogICAgICAgICAgICAgIHN3aXRjaCAoZGlyKSB7DQogICAgICAgICAgICAgICAgY2FzZSAwOg0KICAgICAgICAgICAgICAgICAgcHorKzsNCiAgICAgICAgICAgICAgICAgIGJyZWFrOw0KDQogICAgICAgICAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgICAgICAgcHgrKzsNCiAgICAgICAgICAgICAgICAgIHB6Kys7DQogICAgICAgICAgICAgICAgICBicmVhazsNCg0KICAgICAgICAgICAgICAgIGNhc2UgMjoNCiAgICAgICAgICAgICAgICAgIHB4Kys7DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciByID0gMDsNCiAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07DQoNCiAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KICAgICAgICAgICAgICAgIHZhciBheSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOw0KICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCiAgICAgICAgICAgICAgICByID0gY2hmLnNwYW5zW2FpXS5yZWc7DQogICAgICAgICAgICAgICAgaWYgKGFyZWEgIT0gY2hmLmFyZWFzW2FpXSkgaXNBcmVhQm9yZGVyID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChpc0JvcmRlclZlcnRleCkgciB8PSBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1ZFUlRFWDsNCiAgICAgICAgICAgICAgaWYgKGlzQXJlYUJvcmRlcikgciB8PSBSZWNhc3RDb25zdGFudHMuUkNfQVJFQV9CT1JERVI7DQogICAgICAgICAgICAgIHBvaW50cy5wdXNoKHB4KTsNCiAgICAgICAgICAgICAgcG9pbnRzLnB1c2gocHkpOw0KICAgICAgICAgICAgICBwb2ludHMucHVzaChweik7DQogICAgICAgICAgICAgIHBvaW50cy5wdXNoKHIpOw0KICAgICAgICAgICAgICBmbGFnc1tpXSAmPSB+KDEgPDwgZGlyKTsgLy8gUmVtb3ZlIHZpc2l0ZWQgZWRnZXMNCg0KICAgICAgICAgICAgICBkaXIgPSBkaXIgKyAxICYgMHgzOyAvLyBSb3RhdGUgQ1cNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHZhciBuaSA9IC0xOw0KICAgICAgICAgICAgICB2YXIgbnggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTsNCiAgICAgICAgICAgICAgdmFyIG55ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7DQogICAgICAgICAgICAgIHZhciBfcyA9IGNoZi5zcGFuc1tpXTsNCg0KICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfcywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgew0KICAgICAgICAgICAgICAgIHZhciBuYyA9IGNoZi5jZWxsc1tueCArIG55ICogY2hmLndpZHRoXTsNCiAgICAgICAgICAgICAgICBuaSA9IG5jLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfcywgZGlyKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChuaSA9PSAtMSkgew0KICAgICAgICAgICAgICAgIC8vIFNob3VsZCBub3QgaGFwcGVuLg0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHggPSBueDsNCiAgICAgICAgICAgICAgeSA9IG55Ow0KICAgICAgICAgICAgICBpID0gbmk7DQogICAgICAgICAgICAgIGRpciA9IGRpciArIDMgJiAweDM7IC8vIFJvdGF0ZSBDQ1cNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHN0YXJ0aSA9PSBpICYmIHN0YXJ0RGlyID09IGRpcikgew0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlzdGFuY2VQdFNlZyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0YW5jZVB0U2VnKHgsIHosIHB4LCBweiwgcXgsIHF6KSB7DQogICAgICAgICAgdmFyIHBxeCA9IHF4IC0gcHg7DQogICAgICAgICAgdmFyIHBxeiA9IHF6IC0gcHo7DQogICAgICAgICAgdmFyIGR4ID0geCAtIHB4Ow0KICAgICAgICAgIHZhciBkeiA9IHogLSBwejsNCiAgICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeiAqIHBxejsNCiAgICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF6ICogZHo7DQogICAgICAgICAgaWYgKGQgPiAwKSB0IC89IGQ7DQogICAgICAgICAgaWYgKHQgPCAwKSB0ID0gMDtlbHNlIGlmICh0ID4gMSkgdCA9IDE7DQogICAgICAgICAgZHggPSBweCArIHQgKiBwcXggLSB4Ow0KICAgICAgICAgIGR6ID0gcHogKyB0ICogcHF6IC0gejsNCiAgICAgICAgICByZXR1cm4gZHggKiBkeCArIGR6ICogZHo7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic2ltcGxpZnlDb250b3VyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNpbXBsaWZ5Q29udG91cihwb2ludHMsIHNpbXBsaWZpZWQsIG1heEVycm9yLCBtYXhFZGdlTGVuLCBidWlsZEZsYWdzKSB7DQogICAgICAgICAgLy8gQWRkIGluaXRpYWwgcG9pbnRzLg0KICAgICAgICAgIHZhciBoYXNDb25uZWN0aW9ucyA9IGZhbHNlOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDQpIHsNCiAgICAgICAgICAgIGlmICgocG9pbnRzW2kgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19DT05UT1VSX1JFR19NQVNLKSAhPSAwKSB7DQogICAgICAgICAgICAgIGhhc0Nvbm5lY3Rpb25zID0gdHJ1ZTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKGhhc0Nvbm5lY3Rpb25zKSB7DQogICAgICAgICAgICAvLyBUaGUgY29udG91ciBoYXMgc29tZSBwb3J0YWxzIHRvIG90aGVyIHJlZ2lvbnMuDQogICAgICAgICAgICAvLyBBZGQgYSBuZXcgcG9Qb2x5IHRvIGV2ZXJ5IGxvY2F0aW9uIHdoZXJlIHRoZSByZWdpb24gY2hhbmdlcy4NCiAgICAgICAgICAgIGZvciAodmFyIF9pMyA9IDAsIG5pID0gcG9pbnRzLmxlbmd0aCAvIDQ7IF9pMyA8IG5pOyArK19pMykgew0KICAgICAgICAgICAgICB2YXIgaWkgPSAoX2kzICsgMSkgJSBuaTsNCiAgICAgICAgICAgICAgdmFyIGRpZmZlcmVudFJlZ3MgPSAocG9pbnRzW19pMyAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19DT05UT1VSX1JFR19NQVNLKSAhPSAocG9pbnRzW2lpICogNCArIDNdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfUkVHX01BU0spOw0KICAgICAgICAgICAgICB2YXIgYXJlYUJvcmRlcnMgPSAocG9pbnRzW19pMyAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19BUkVBX0JPUkRFUikgIT0gKHBvaW50c1tpaSAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19BUkVBX0JPUkRFUik7DQoNCiAgICAgICAgICAgICAgaWYgKGRpZmZlcmVudFJlZ3MgfHwgYXJlYUJvcmRlcnMpIHsNCiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkLnB1c2gocG9pbnRzW19pMyAqIDQgKyAwXSk7DQogICAgICAgICAgICAgICAgc2ltcGxpZmllZC5wdXNoKHBvaW50c1tfaTMgKiA0ICsgMV0pOw0KICAgICAgICAgICAgICAgIHNpbXBsaWZpZWQucHVzaChwb2ludHNbX2kzICogNCArIDJdKTsNCiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkLnB1c2goX2kzKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChzaW1wbGlmaWVkLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBjb25uZWN0aW9ucyBhdCBhbGwsDQogICAgICAgICAgICAvLyBjcmVhdGUgc29tZSBpbml0aWFsIHBvaW50cyBmb3IgdGhlIHNpbXBsaWZpY2F0aW9uIHByb2Nlc3MuDQogICAgICAgICAgICAvLyBGaW5kIGxvd2VyLWxlZnQgYW5kIHVwcGVyLXJpZ2h0IHZlcnRpY2VzIG9mIHRoZSBjb250b3VyLg0KICAgICAgICAgICAgdmFyIGxseCA9IHBvaW50c1swXTsNCiAgICAgICAgICAgIHZhciBsbHkgPSBwb2ludHNbMV07DQogICAgICAgICAgICB2YXIgbGx6ID0gcG9pbnRzWzJdOw0KICAgICAgICAgICAgdmFyIGxsaSA9IDA7DQogICAgICAgICAgICB2YXIgdXJ4ID0gcG9pbnRzWzBdOw0KICAgICAgICAgICAgdmFyIHVyeSA9IHBvaW50c1sxXTsNCiAgICAgICAgICAgIHZhciB1cnogPSBwb2ludHNbMl07DQogICAgICAgICAgICB2YXIgdXJpID0gMDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgcG9pbnRzLmxlbmd0aDsgX2k0ICs9IDQpIHsNCiAgICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbX2k0ICsgMF07DQogICAgICAgICAgICAgIHZhciB5ID0gcG9pbnRzW19pNCArIDFdOw0KICAgICAgICAgICAgICB2YXIgeiA9IHBvaW50c1tfaTQgKyAyXTsNCg0KICAgICAgICAgICAgICBpZiAoeCA8IGxseCB8fCB4ID09IGxseCAmJiB6IDwgbGx6KSB7DQogICAgICAgICAgICAgICAgbGx4ID0geDsNCiAgICAgICAgICAgICAgICBsbHkgPSB5Ow0KICAgICAgICAgICAgICAgIGxseiA9IHo7DQogICAgICAgICAgICAgICAgbGxpID0gX2k0IC8gNDsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmICh4ID4gdXJ4IHx8IHggPT0gdXJ4ICYmIHogPiB1cnopIHsNCiAgICAgICAgICAgICAgICB1cnggPSB4Ow0KICAgICAgICAgICAgICAgIHVyeSA9IHk7DQogICAgICAgICAgICAgICAgdXJ6ID0gejsNCiAgICAgICAgICAgICAgICB1cmkgPSBfaTQgLyA0Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHNpbXBsaWZpZWQucHVzaChsbHgpOw0KICAgICAgICAgICAgc2ltcGxpZmllZC5wdXNoKGxseSk7DQogICAgICAgICAgICBzaW1wbGlmaWVkLnB1c2gobGx6KTsNCiAgICAgICAgICAgIHNpbXBsaWZpZWQucHVzaChsbGkpOw0KICAgICAgICAgICAgc2ltcGxpZmllZC5wdXNoKHVyeCk7DQogICAgICAgICAgICBzaW1wbGlmaWVkLnB1c2godXJ5KTsNCiAgICAgICAgICAgIHNpbXBsaWZpZWQucHVzaCh1cnopOw0KICAgICAgICAgICAgc2ltcGxpZmllZC5wdXNoKHVyaSk7DQogICAgICAgICAgfSAvLyBBZGQgcG9pbnRzIHVudGlsIGFsbCByYXcgcG9pbnRzIGFyZSB3aXRoaW4NCiAgICAgICAgICAvLyBlcnJvciB0b2xlcmFuY2UgdG8gdGhlIHNpbXBsaWZpZWQgc2hhcGUuDQoNCg0KICAgICAgICAgIHZhciBwbiA9IHBvaW50cy5sZW5ndGggLyA0Ow0KDQogICAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgc2ltcGxpZmllZC5sZW5ndGggLyA0Oykgew0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc2ltcGxpZmllZC5sZW5ndGgpDQogICAgICAgICAgICB2YXIgX2lpID0gKF9pNSArIDEpICUgKHNpbXBsaWZpZWQubGVuZ3RoIC8gNCk7DQoNCiAgICAgICAgICAgIHZhciBheCA9IHNpbXBsaWZpZWRbX2k1ICogNCArIDBdOw0KICAgICAgICAgICAgdmFyIGF6ID0gc2ltcGxpZmllZFtfaTUgKiA0ICsgMl07DQogICAgICAgICAgICB2YXIgYWkgPSBzaW1wbGlmaWVkW19pNSAqIDQgKyAzXTsNCiAgICAgICAgICAgIHZhciBieCA9IHNpbXBsaWZpZWRbX2lpICogNCArIDBdOw0KICAgICAgICAgICAgdmFyIGJ6ID0gc2ltcGxpZmllZFtfaWkgKiA0ICsgMl07DQogICAgICAgICAgICB2YXIgYmkgPSBzaW1wbGlmaWVkW19paSAqIDQgKyAzXTsgLy8gRmluZCBtYXhpbXVtIGRldmlhdGlvbiBmcm9tIHRoZSBzZWdtZW50Lg0KDQogICAgICAgICAgICB2YXIgbWF4ZCA9IDA7DQogICAgICAgICAgICB2YXIgbWF4aSA9IC0xOw0KICAgICAgICAgICAgdmFyIGNpID0gdm9pZCAwLA0KICAgICAgICAgICAgICAgIGNpbmMgPSB2b2lkIDAsDQogICAgICAgICAgICAgICAgZW5kaSA9IHZvaWQgMDsgLy8gVHJhdmVyc2UgdGhlIHNlZ21lbnQgaW4gbGV4aWxvZ2ljYWwgb3JkZXIgc28gdGhhdCB0aGUNCiAgICAgICAgICAgIC8vIG1heCBkZXZpYXRpb24gaXMgY2FsY3VsYXRlZCBzaW1pbGFybHkgd2hlbiB0cmF2ZXJzaW5nDQogICAgICAgICAgICAvLyBvcHBvc2l0ZSBzZWdtZW50cy4NCg0KICAgICAgICAgICAgaWYgKGJ4ID4gYXggfHwgYnggPT0gYXggJiYgYnogPiBheikgew0KICAgICAgICAgICAgICBjaW5jID0gMTsNCiAgICAgICAgICAgICAgY2kgPSAoYWkgKyBjaW5jKSAlIHBuOw0KICAgICAgICAgICAgICBlbmRpID0gYmk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBjaW5jID0gcG4gLSAxOw0KICAgICAgICAgICAgICBjaSA9IChiaSArIGNpbmMpICUgcG47DQogICAgICAgICAgICAgIGVuZGkgPSBhaTsNCiAgICAgICAgICAgICAgdmFyIHRlbXAgPSBheDsNCiAgICAgICAgICAgICAgYXggPSBieDsNCiAgICAgICAgICAgICAgYnggPSB0ZW1wOw0KICAgICAgICAgICAgICB0ZW1wID0gYXo7DQogICAgICAgICAgICAgIGF6ID0gYno7DQogICAgICAgICAgICAgIGJ6ID0gdGVtcDsNCiAgICAgICAgICAgIH0gLy8gVGVzc2VsbGF0ZSBvbmx5IG91dGVyIGVkZ2VzIG9yIGVkZ2VzIGJldHdlZW4gYXJlYXMuDQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygic3RhcnQiKQ0KDQoNCiAgICAgICAgICAgIGlmICgocG9pbnRzW2NpICogNCArIDNdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfUkVHX01BU0spID09IDAgfHwgKHBvaW50c1tjaSAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19BUkVBX0JPUkRFUikgIT0gMCkgew0KICAgICAgICAgICAgICB3aGlsZSAoY2kgIT0gZW5kaSkgew0KICAgICAgICAgICAgICAgIC8vIGlmKE1hdGgucmFuZG9tKCkgPCAuMDEpIGNvbnNvbGUubG9nKGAke2NpfSAke2VuZGl9YCk7DQogICAgICAgICAgICAgICAgdmFyIGQgPSBSZWNhc3RDb250b3VyLmRpc3RhbmNlUHRTZWcocG9pbnRzW2NpICogNCArIDBdLCBwb2ludHNbY2kgKiA0ICsgMl0sIGF4LCBheiwgYngsIGJ6KTsNCg0KICAgICAgICAgICAgICAgIGlmIChkID4gbWF4ZCkgew0KICAgICAgICAgICAgICAgICAgbWF4ZCA9IGQ7DQogICAgICAgICAgICAgICAgICBtYXhpID0gY2k7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgY2kgPSAoY2kgKyBjaW5jKSAlIHBuOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIGNvbnNvbGUubG9nKCJzdG9wIikNCiAgICAgICAgICAgIC8vIElmIHRoZSBtYXggZGV2aWF0aW9uIGlzIGxhcmdlciB0aGFuIGFjY2VwdGVkIGVycm9yLA0KICAgICAgICAgICAgLy8gYWRkIG5ldyBwb2ludCwgZWxzZSBjb250aW51ZSB0byBuZXh0IHNlZ21lbnQuDQoNCg0KICAgICAgICAgICAgaWYgKG1heGkgIT0gLTEgJiYgbWF4ZCA+IG1heEVycm9yICogbWF4RXJyb3IpIHsNCiAgICAgICAgICAgICAgLy8gQWRkIHRoZSBwb2ludC4NCiAgICAgICAgICAgICAgc2ltcGxpZmllZC5zcGxpY2UoKF9pNSArIDEpICogNCArIDAsIDAsIHBvaW50c1ttYXhpICogNCArIDBdKTsNCiAgICAgICAgICAgICAgc2ltcGxpZmllZC5zcGxpY2UoKF9pNSArIDEpICogNCArIDEsIDAsIHBvaW50c1ttYXhpICogNCArIDFdKTsNCiAgICAgICAgICAgICAgc2ltcGxpZmllZC5zcGxpY2UoKF9pNSArIDEpICogNCArIDIsIDAsIHBvaW50c1ttYXhpICogNCArIDJdKTsNCiAgICAgICAgICAgICAgc2ltcGxpZmllZC5zcGxpY2UoKF9pNSArIDEpICogNCArIDMsIDAsIG1heGkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgKytfaTU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBTcGxpdCB0b28gbGV0IGVkZ2VzLg0KDQoNCiAgICAgICAgICBpZiAobWF4RWRnZUxlbiA+IDAgJiYgKGJ1aWxkRmxhZ3MgJiAoUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfVEVTU19XQUxMX0VER0VTIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfVEVTU19BUkVBX0VER0VTKSkgIT0gMCkgew0KICAgICAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgc2ltcGxpZmllZC5sZW5ndGggLyA0Oykgew0KICAgICAgICAgICAgICB2YXIgX2lpMiA9IChfaTYgKyAxKSAlIChzaW1wbGlmaWVkLmxlbmd0aCAvIDQpOw0KDQogICAgICAgICAgICAgIHZhciBfYXgzID0gc2ltcGxpZmllZFtfaTYgKiA0ICsgMF07DQogICAgICAgICAgICAgIHZhciBfYXogPSBzaW1wbGlmaWVkW19pNiAqIDQgKyAyXTsNCiAgICAgICAgICAgICAgdmFyIF9haTMgPSBzaW1wbGlmaWVkW19pNiAqIDQgKyAzXTsNCiAgICAgICAgICAgICAgdmFyIF9ieCA9IHNpbXBsaWZpZWRbX2lpMiAqIDQgKyAwXTsNCiAgICAgICAgICAgICAgdmFyIF9ieiA9IHNpbXBsaWZpZWRbX2lpMiAqIDQgKyAyXTsNCiAgICAgICAgICAgICAgdmFyIF9iaSA9IHNpbXBsaWZpZWRbX2lpMiAqIDQgKyAzXTsgLy8gRmluZCBtYXhpbXVtIGRldmlhdGlvbiBmcm9tIHRoZSBzZWdtZW50Lg0KDQogICAgICAgICAgICAgIHZhciBfbWF4aSA9IC0xOw0KDQogICAgICAgICAgICAgIHZhciBfY2kgPSAoX2FpMyArIDEpICUgcG47IC8vIFRlc3NlbGxhdGUgb25seSBvdXRlciBlZGdlcyBvciBlZGdlcyBiZXR3ZWVuIGFyZWFzLg0KDQoNCiAgICAgICAgICAgICAgdmFyIHRlc3MgPSBmYWxzZTsgLy8gV2FsbCBlZGdlcy4NCg0KICAgICAgICAgICAgICBpZiAoKGJ1aWxkRmxhZ3MgJiBSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9URVNTX1dBTExfRURHRVMpICE9IDAgJiYgKHBvaW50c1tfY2kgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9SRUdfTUFTSykgPT0gMCkgdGVzcyA9IHRydWU7IC8vIEVkZ2VzIGJldHdlZW4gYXJlYXMuDQoNCiAgICAgICAgICAgICAgaWYgKChidWlsZEZsYWdzICYgUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfVEVTU19BUkVBX0VER0VTKSAhPSAwICYmIChwb2ludHNbX2NpICogNCArIDNdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0FSRUFfQk9SREVSKSAhPSAwKSB0ZXNzID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICBpZiAodGVzcykgew0KICAgICAgICAgICAgICAgIHZhciBkeCA9IF9ieCAtIF9heDM7DQogICAgICAgICAgICAgICAgdmFyIGR6ID0gX2J6IC0gX2F6Ow0KDQogICAgICAgICAgICAgICAgaWYgKGR4ICogZHggKyBkeiAqIGR6ID4gbWF4RWRnZUxlbiAqIG1heEVkZ2VMZW4pIHsNCiAgICAgICAgICAgICAgICAgIC8vIFJvdW5kIGJhc2VkIG9uIHRoZSBzZWdtZW50cyBpbiBsZXhpbG9naWNhbCBvcmRlciBzbyB0aGF0IHRoZQ0KICAgICAgICAgICAgICAgICAgLy8gbWF4IHRlc3NlbGF0aW9uIGlzIGNvbnNpc3RlbnQgcmVnYXJkbGVzIGluIHdoaWNoIGRpcmVjdGlvbg0KICAgICAgICAgICAgICAgICAgLy8gc2VnbWVudHMgYXJlIHRyYXZlcnNlZC4NCiAgICAgICAgICAgICAgICAgIHZhciBuID0gX2JpIDwgX2FpMyA/IF9iaSArIHBuIC0gX2FpMyA6IF9iaSAtIF9haTM7DQoNCiAgICAgICAgICAgICAgICAgIGlmIChuID4gMSkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoX2J4ID4gX2F4MyB8fCBfYnggPT0gX2F4MyAmJiBfYnogPiBfYXopIF9tYXhpID0gTWF0aC5mbG9vcigoX2FpMyArIG4gLyAyKSAlIHBuKTtlbHNlIF9tYXhpID0gTWF0aC5mbG9vcigoX2FpMyArIChuICsgMSkgLyAyKSAlIHBuKTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gLy8gSWYgdGhlIG1heCBkZXZpYXRpb24gaXMgbGFyZ2VyIHRoYW4gYWNjZXB0ZWQgZXJyb3IsDQogICAgICAgICAgICAgIC8vIGFkZCBuZXcgcG9pbnQsIGVsc2UgY29udGludWUgdG8gbmV4dCBzZWdtZW50Lg0KDQoNCiAgICAgICAgICAgICAgaWYgKF9tYXhpICE9IC0xKSB7DQogICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBwb2ludC4NCiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMCwgMCwgcG9pbnRzW19tYXhpICogNCArIDBdKTsNCiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMSwgMCwgcG9pbnRzW19tYXhpICogNCArIDFdKTsNCiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMiwgMCwgcG9pbnRzW19tYXhpICogNCArIDJdKTsNCiAgICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMywgMCwgX21heGkpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICsrX2k2Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgc2ltcGxpZmllZC5sZW5ndGggLyA0OyArK19pNykgew0KICAgICAgICAgICAgLy8gVGhlIGVkZ2UgdmVydGV4IGZsYWcgaXMgdGFrZSBmcm9tIHRoZSBjdXJyZW50IHJhdyBwb2ludCwNCiAgICAgICAgICAgIC8vIGFuZCB0aGUgbmVpZ2hib3VyIHJlZ2lvbiBpcyB0YWtlIGZyb20gdGhlIG5leHQgcmF3IHBvaW50Lg0KICAgICAgICAgICAgdmFyIF9haTQgPSAoc2ltcGxpZmllZFtfaTcgKiA0ICsgM10gKyAxKSAlIHBuOw0KDQogICAgICAgICAgICB2YXIgX2JpMiA9IHNpbXBsaWZpZWRbX2k3ICogNCArIDNdOw0KICAgICAgICAgICAgc2ltcGxpZmllZFtfaTcgKiA0ICsgM10gPSBwb2ludHNbX2FpNCAqIDQgKyAzXSAmIChSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9SRUdfTUFTSyB8IFJlY2FzdENvbnN0YW50cy5SQ19BUkVBX0JPUkRFUikgfCBwb2ludHNbX2JpMiAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfVkVSVEVYOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjYWxjQXJlYU9mUG9seWdvbjJEIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNBcmVhT2ZQb2x5Z29uMkQodmVydHMsIG52ZXJ0cykgew0KICAgICAgICAgIHZhciBhcmVhID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gbnZlcnRzIC0gMTsgaSA8IG52ZXJ0czsgaiA9IGkrKykgew0KICAgICAgICAgICAgdmFyIHZpID0gaSAqIDQ7DQogICAgICAgICAgICB2YXIgdmogPSBqICogNDsNCiAgICAgICAgICAgIGFyZWEgKz0gdmVydHNbdmkgKyAwXSAqIHZlcnRzW3ZqICsgMl0gLSB2ZXJ0c1t2aiArIDBdICogdmVydHNbdmkgKyAyXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gKGFyZWEgKyAxKSAvIDI7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaW50ZXJzZWN0U2VnQ291bnRvdXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJzZWN0U2VnQ291bnRvdXIoZDAsIGQxLCBpLCBuLCB2ZXJ0cywgZDB2ZXJ0cywgZDF2ZXJ0cykgew0KICAgICAgICAgIC8vIEZvciBlYWNoIGVkZ2UgKGssaysxKSBvZiBQDQogICAgICAgICAgdmFyIHB2ZXJ0cyA9IG5ldyBBcnJheSg0ICogNCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBnID0gMDsgZyA8IDQ7IGcrKykgew0KICAgICAgICAgICAgcHZlcnRzW2ddID0gZDB2ZXJ0c1tkMCArIGddOw0KICAgICAgICAgICAgcHZlcnRzWzQgKyBnXSA9IGQxdmVydHNbZDEgKyBnXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBkMCA9IDA7DQogICAgICAgICAgZDEgPSA0Ow0KDQogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHsNCiAgICAgICAgICAgIHZhciBrMSA9IFJlY2FzdE1lc2gubmV4dChrLCBuKTsgLy8gU2tpcCBlZGdlcyBpbmNpZGVudCB0byBpLg0KDQogICAgICAgICAgICBpZiAoaSA9PSBrIHx8IGkgPT0gazEpIGNvbnRpbnVlOw0KICAgICAgICAgICAgdmFyIHAwID0gayAqIDQ7DQogICAgICAgICAgICB2YXIgcDEgPSBrMSAqIDQ7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9nID0gMDsgX2cgPCA0OyBfZysrKSB7DQogICAgICAgICAgICAgIHB2ZXJ0c1s4ICsgX2ddID0gdmVydHNbcDAgKyBfZ107DQogICAgICAgICAgICAgIHB2ZXJ0c1sxMiArIF9nXSA9IHZlcnRzW3AxICsgX2ddOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBwMCA9IDg7DQogICAgICAgICAgICBwMSA9IDEyOw0KICAgICAgICAgICAgaWYgKFJlY2FzdE1lc2gudmVxdWFsKHB2ZXJ0cywgZDAsIHAwKSB8fCBSZWNhc3RNZXNoLnZlcXVhbChwdmVydHMsIGQxLCBwMCkgfHwgUmVjYXN0TWVzaC52ZXF1YWwocHZlcnRzLCBkMCwgcDEpIHx8IFJlY2FzdE1lc2gudmVxdWFsKHB2ZXJ0cywgZDEsIHAxKSkgY29udGludWU7DQogICAgICAgICAgICBpZiAoUmVjYXN0TWVzaC5pbnRlcnNlY3QocHZlcnRzLCBkMCwgZDEsIHAwLCBwMSkpIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpbkNvbmUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5Db25lKGksIG4sIHZlcnRzLCBwaiwgdmVydHBqKSB7DQogICAgICAgICAgcGkgPSBpICogNDsNCiAgICAgICAgICBwaTEgPSBSZWNhc3RNZXNoLm5leHQoaSwgbikgKiA0Ow0KICAgICAgICAgIHBpbjEgPSBSZWNhc3RNZXNoLnByZXYoaSwgbikgKiA0Ow0KICAgICAgICAgIHB2ZXJ0cyA9IG5ldyBBcnJheSg0ICogNCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBnID0gMDsgZyA8IDQ7IGcrKykgew0KICAgICAgICAgICAgcHZlcnRzW2ddID0gdmVydHNbcGkgKyBnXTsNCiAgICAgICAgICAgIHB2ZXJ0c1s0ICsgZ10gPSB2ZXJ0c1twaTEgKyBnXTsNCiAgICAgICAgICAgIHB2ZXJ0c1s4ICsgZ10gPSB2ZXJ0c1twaW4xICsgZ107DQogICAgICAgICAgICBwdmVydHNbMTIgKyBnXSA9IHZlcnRwaltwaiArIGddOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHBpID0gMDsNCiAgICAgICAgICBwaTEgPSA0Ow0KICAgICAgICAgIHBpbjEgPSA4Ow0KICAgICAgICAgIHBqID0gMTI7IC8vIElmIFBbaV0gaXMgYSBjb252ZXggdmVydGV4IFsgaSsxIGxlZnQgb3Igb24gKGktMSxpKSBdLg0KDQogICAgICAgICAgaWYgKFJlY2FzdE1lc2gubGVmdE9uKHB2ZXJ0cywgcGluMSwgcGksIHBpMSkpIHJldHVybiBSZWNhc3RNZXNoLmxlZnQocHZlcnRzLCBwaSwgcGosIHBpbjEpICYmIFJlY2FzdE1lc2gubGVmdChwdmVydHMsIHBqLCBwaSwgcGkxKTsgLy8gQXNzdW1lIChpLTEsaSxpKzEpIG5vdCBjb2xsaW5lYXIuDQogICAgICAgICAgLy8gZWxzZSBQW2ldIGlzIHJlZmxleC4NCg0KICAgICAgICAgIHJldHVybiAhKFJlY2FzdE1lc2gubGVmdE9uKHB2ZXJ0cywgcGksIHBqLCBwaTEpICYmIFJlY2FzdE1lc2gubGVmdE9uKHB2ZXJ0cywgcGosIHBpLCBwaW4xKSk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmVtb3ZlRGVnZW5lcmF0ZVNlZ21lbnRzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZURlZ2VuZXJhdGVTZWdtZW50cyhzaW1wbGlmaWVkKSB7DQogICAgICAgICAgLy8gUmVtb3ZlIGFkamFjZW50IHZlcnRpY2VzIHdoaWNoIGFyZSBlcXVhbCBvbiB4ei1wbGFuZSwNCiAgICAgICAgICAvLyBvciBlbHNlIHRoZSB0cmlhbmd1bGF0b3Igd2lsbCBnZXQgY29uZnVzZWQuDQogICAgICAgICAgdmFyIG5wdHMgPSBzaW1wbGlmaWVkLmxlbmd0aCAvIDQ7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5wdHM7ICsraSkgew0KICAgICAgICAgICAgdmFyIG5pID0gUmVjYXN0TWVzaC5uZXh0KGksIG5wdHMpOyAvLwkJCWlmICh2ZXF1YWwoJnNpbXBsaWZpZWRbaSo0XSwgJnNpbXBsaWZpZWRbbmkqNF0pKQ0KDQogICAgICAgICAgICBpZiAoc2ltcGxpZmllZFtpICogNF0gPT0gc2ltcGxpZmllZFtuaSAqIDRdICYmIHNpbXBsaWZpZWRbaSAqIDQgKyAyXSA9PSBzaW1wbGlmaWVkW25pICogNCArIDJdKSB7DQogICAgICAgICAgICAgIC8vIERlZ2VuZXJhdGUgc2VnbWVudCwgcmVtb3ZlLg0KICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZShpICogNCwgMSk7DQogICAgICAgICAgICAgIHNpbXBsaWZpZWQuc3BsaWNlKGkgKiA0LCAxKTsNCiAgICAgICAgICAgICAgc2ltcGxpZmllZC5zcGxpY2UoaSAqIDQsIDEpOw0KICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZShpICogNCwgMSk7DQogICAgICAgICAgICAgIG5wdHMtLTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibWVyZ2VDb250b3VycyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJnZUNvbnRvdXJzKGNhLCBjYiwgaWEsIGliKSB7DQogICAgICAgICAgdmFyIG1heFZlcnRzID0gY2EubnZlcnRzICsgY2IubnZlcnRzICsgMjsNCiAgICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkobWF4VmVydHMgKiA0KTsNCiAgICAgICAgICB2YXIgbnYgPSAwOyAvLyBDb3B5IGNvbnRvdXIgQS4NCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGNhLm52ZXJ0czsgKytpKSB7DQogICAgICAgICAgICB2YXIgZHN0ID0gbnYgKiA0Ow0KICAgICAgICAgICAgdmFyIHNyYyA9IChpYSArIGkpICUgY2EubnZlcnRzICogNDsNCiAgICAgICAgICAgIHZlcnRzW2RzdCArIDBdID0gY2EudmVydHNbc3JjICsgMF07DQogICAgICAgICAgICB2ZXJ0c1tkc3QgKyAxXSA9IGNhLnZlcnRzW3NyYyArIDFdOw0KICAgICAgICAgICAgdmVydHNbZHN0ICsgMl0gPSBjYS52ZXJ0c1tzcmMgKyAyXTsNCiAgICAgICAgICAgIHZlcnRzW2RzdCArIDNdID0gY2EudmVydHNbc3JjICsgM107DQogICAgICAgICAgICBudisrOw0KICAgICAgICAgIH0gLy8gQ29weSBjb250b3VyIEINCg0KDQogICAgICAgICAgZm9yICh2YXIgX2k4ID0gMDsgX2k4IDw9IGNiLm52ZXJ0czsgKytfaTgpIHsNCiAgICAgICAgICAgIHZhciBfZHN0ID0gbnYgKiA0Ow0KDQogICAgICAgICAgICB2YXIgX3NyYyA9IChpYiArIF9pOCkgJSBjYi5udmVydHMgKiA0Ow0KDQogICAgICAgICAgICB2ZXJ0c1tfZHN0ICsgMF0gPSBjYi52ZXJ0c1tfc3JjICsgMF07DQogICAgICAgICAgICB2ZXJ0c1tfZHN0ICsgMV0gPSBjYi52ZXJ0c1tfc3JjICsgMV07DQogICAgICAgICAgICB2ZXJ0c1tfZHN0ICsgMl0gPSBjYi52ZXJ0c1tfc3JjICsgMl07DQogICAgICAgICAgICB2ZXJ0c1tfZHN0ICsgM10gPSBjYi52ZXJ0c1tfc3JjICsgM107DQogICAgICAgICAgICBudisrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGNhLnZlcnRzID0gdmVydHM7DQogICAgICAgICAgY2EubnZlcnRzID0gbnY7DQogICAgICAgICAgY2IudmVydHMgPSBudWxsOw0KICAgICAgICAgIGNiLm52ZXJ0cyA9IDA7DQogICAgICAgIH0gLy8gRmluZHMgdGhlIGxvd2VzdCBsZWZ0bW9zdCB2ZXJ0ZXggb2YgYSBjb250b3VyLg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmRMZWZ0TW9zdFZlcnRleCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTGVmdE1vc3RWZXJ0ZXgoY29udG91cikgew0KICAgICAgICAgIHZhciBtaW54ID0gY29udG91ci52ZXJ0c1swXTsNCiAgICAgICAgICB2YXIgbWlueiA9IGNvbnRvdXIudmVydHNbMl07DQogICAgICAgICAgdmFyIGxlZnRtb3N0ID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgY29udG91ci5udmVydHM7IGkrKykgew0KICAgICAgICAgICAgdmFyIHggPSBjb250b3VyLnZlcnRzW2kgKiA0ICsgMF07DQogICAgICAgICAgICB2YXIgeiA9IGNvbnRvdXIudmVydHNbaSAqIDQgKyAyXTsNCg0KICAgICAgICAgICAgaWYgKHggPCBtaW54IHx8IHggPT0gbWlueCAmJiB6IDwgbWlueikgew0KICAgICAgICAgICAgICBtaW54ID0geDsNCiAgICAgICAgICAgICAgbWlueiA9IHo7DQogICAgICAgICAgICAgIGxlZnRtb3N0ID0gaTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gW21pbngsIG1pbnosIGxlZnRtb3N0XTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJidWlsZENvbnRvdXJzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkQ29udG91cnMoY3R4LCBjaGYsIG1heEVycm9yLCBtYXhFZGdlTGVuLCBidWlsZEZsYWdzKSB7DQogICAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7DQogICAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0Ow0KICAgICAgICAgIHZhciBib3JkZXJTaXplID0gY2hmLmJvcmRlclNpemU7DQogICAgICAgICAgdmFyIGNzZXQgPSBuZXcgQ29udG91clNldCgpOw0KICAgICAgICAgIGN0eC5zdGFydFRpbWVyKCJCVUlMRF9DT05UT1VSUyIpOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5Myhjc2V0LmJtaW4sIGNoZi5ibWluLCAwKTsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTMoY3NldC5ibWF4LCBjaGYuYm1heCwgMCk7DQoNCiAgICAgICAgICBpZiAoYm9yZGVyU2l6ZSA+IDApIHsNCiAgICAgICAgICAgIC8vIElmIHRoZSBoZWlnaHRmaWVsZCB3YXMgYnVpbGQgd2l0aCBib3JkZXJzaXplLCByZW1vdmUgdGhlIG9mZnNldC4NCiAgICAgICAgICAgIHBhZCA9IGJvcmRlclNpemUgKiBjaGYuY3M7DQogICAgICAgICAgICBjc2V0LmJtaW5bMF0gKz0gcGFkOw0KICAgICAgICAgICAgY3NldC5ibWluWzJdICs9IHBhZDsNCiAgICAgICAgICAgIGNzZXQuYm1heFswXSAtPSBwYWQ7DQogICAgICAgICAgICBjc2V0LmJtYXhbMl0gLT0gcGFkOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGNzZXQuY3MgPSBjaGYuY3M7DQogICAgICAgICAgY3NldC5jaCA9IGNoZi5jaDsNCiAgICAgICAgICBjc2V0LndpZHRoID0gY2hmLndpZHRoIC0gY2hmLmJvcmRlclNpemUgKiAyOw0KICAgICAgICAgIGNzZXQuaGVpZ2h0ID0gY2hmLmhlaWdodCAtIGNoZi5ib3JkZXJTaXplICogMjsNCiAgICAgICAgICBjc2V0LmJvcmRlclNpemUgPSBjaGYuYm9yZGVyU2l6ZTsNCiAgICAgICAgICBjc2V0Lm1heEVycm9yID0gbWF4RXJyb3I7DQogICAgICAgICAgdmFyIGZsYWdzID0gbmV3IEFycmF5KGNoZi5zcGFuQ291bnQpLmZpbGwoMCk7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIkJVSUxEX0NPTlRPVVJTX1RSQUNFIik7IC8vIE1hcmsgYm91bmRhcmllcy4NCg0KICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7DQogICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7ICsreCkgew0KICAgICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgeSAqIHddOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkgew0KICAgICAgICAgICAgICAgIC8vIGlmKHkgPT0gMyAmJiB4ID09IDMgJiYgaSA9PSAxMzQ0KQ0KICAgICAgICAgICAgICAgIC8vIAljb25zb2xlLmxvZygiZWFybGllciIpOw0KICAgICAgICAgICAgICAgIHZhciByZXMgPSAwOw0KICAgICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW2ldOw0KDQogICAgICAgICAgICAgICAgaWYgKGNoZi5zcGFuc1tpXS5yZWcgPT0gMCB8fCAoY2hmLnNwYW5zW2ldLnJlZyAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICBmbGFnc1tpXSA9IDA7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgICAgdmFyIHIgPSAwOw0KDQogICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgYXkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTsNCiAgICAgICAgICAgICAgICAgICAgciA9IGNoZi5zcGFuc1thaV0ucmVnOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBpZiAociA9PSBjaGYuc3BhbnNbaV0ucmVnKSByZXMgfD0gMSA8PCBkaXI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZmxhZ3NbaV0gPSByZXMgXiAweGY7IC8vIEludmVyc2UsIG1hcmsgbm9uIGNvbm5lY3RlZCBlZGdlcy4NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX0NPTlRPVVJTX1RSQUNFIik7DQogICAgICAgICAgdmFyIHZlcnRzID0gbmV3IEFycmF5KDI1Nik7DQogICAgICAgICAgdmFyIHNpbXBsaWZpZWQgPSBuZXcgQXJyYXkoNjQpOw0KDQogICAgICAgICAgZm9yICh2YXIgX3kgPSAwOyBfeSA8IGg7ICsrX3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIF94ID0gMDsgX3ggPCB3OyArK194KSB7DQogICAgICAgICAgICAgIHZhciBfYyA9IGNoZi5jZWxsc1tfeCArIF95ICogd107DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2k5ID0gX2MuaW5kZXgsIF9uaSA9IF9jLmluZGV4ICsgX2MuY291bnQ7IF9pOSA8IF9uaTsgKytfaTkpIHsNCiAgICAgICAgICAgICAgICAvLyBpZih5PT0zICYmIHggPT0gMyAmJiBpID09IDEzNDQpDQogICAgICAgICAgICAgICAgLy8gCWNvbnNvbGUubG9nKCJkYWsiKTsNCiAgICAgICAgICAgICAgICBpZiAoZmxhZ3NbX2k5XSA9PSAwIHx8IGZsYWdzW19pOV0gPT0gMHhmKSB7DQogICAgICAgICAgICAgICAgICBmbGFnc1tfaTldID0gMDsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciByZWcgPSBjaGYuc3BhbnNbX2k5XS5yZWc7DQogICAgICAgICAgICAgICAgaWYgKHJlZyA9PSAwIHx8IChyZWcgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkgY29udGludWU7DQogICAgICAgICAgICAgICAgdmFyIGFyZWEgPSBjaGYuYXJlYXNbX2k5XTsNCiAgICAgICAgICAgICAgICB2ZXJ0cyA9IFtdOw0KICAgICAgICAgICAgICAgIHNpbXBsaWZpZWQgPSBbXTsNCiAgICAgICAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfQ09OVE9VUlNfVFJBQ0UiKTsNCiAgICAgICAgICAgICAgICBSZWNhc3RDb250b3VyLndhbGtDb250b3VyKF94LCBfeSwgX2k5LCBjaGYsIGZsYWdzLCB2ZXJ0cyk7DQogICAgICAgICAgICAgICAgY3R4LnN0b3BUaW1lcigiQlVJTERfQ09OVE9VUlNfVFJBQ0UiKTsNCiAgICAgICAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfQ09OVE9VUlNfU0lNUExJRlkiKTsNCiAgICAgICAgICAgICAgICBSZWNhc3RDb250b3VyLnNpbXBsaWZ5Q29udG91cih2ZXJ0cywgc2ltcGxpZmllZCwgbWF4RXJyb3IsIG1heEVkZ2VMZW4sIGJ1aWxkRmxhZ3MpOw0KICAgICAgICAgICAgICAgIFJlY2FzdENvbnRvdXIucmVtb3ZlRGVnZW5lcmF0ZVNlZ21lbnRzKHNpbXBsaWZpZWQpOw0KICAgICAgICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX0NPTlRPVVJTX1NJTVBMSUZZIik7IC8vIFN0b3JlIHJlZ2lvbj0+Y29udG91ciByZW1hcCBpbmZvLg0KICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjb250b3VyLg0KDQogICAgICAgICAgICAgICAgaWYgKHNpbXBsaWZpZWQubGVuZ3RoIC8gNCA+PSAzKSB7DQogICAgICAgICAgICAgICAgICB2YXIgY29udCA9IG5ldyBDb250b3VyKCk7DQogICAgICAgICAgICAgICAgICBjc2V0LmNvbnRzLnB1c2goY29udCk7DQogICAgICAgICAgICAgICAgICBjb250Lm52ZXJ0cyA9IHNpbXBsaWZpZWQubGVuZ3RoIC8gNDsNCiAgICAgICAgICAgICAgICAgIGNvbnQudmVydHMgPSBuZXcgQXJyYXkoc2ltcGxpZmllZC5sZW5ndGgpOw0KDQogICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGNvbnQudmVydHMubGVuZ3RoOyBsKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29udC52ZXJ0c1tsXSA9IHNpbXBsaWZpZWRbbF07DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGlmIChib3JkZXJTaXplID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVpZ2h0ZmllbGQgd2FzIGJ1aWxkIHdpdGggYm9yZGVyc2l6ZSwgcmVtb3ZlIHRoZSBvZmZzZXQuDQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY29udC5udmVydHM7ICsraikgew0KICAgICAgICAgICAgICAgICAgICAgIGNvbnQudmVydHNbaiAqIDRdIC09IGJvcmRlclNpemU7DQogICAgICAgICAgICAgICAgICAgICAgY29udC52ZXJ0c1tqICogNCArIDJdIC09IGJvcmRlclNpemU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgY29udC5ucnZlcnRzID0gdmVydHMubGVuZ3RoIC8gNDsNCiAgICAgICAgICAgICAgICAgIGNvbnQucnZlcnRzID0gbmV3IEFycmF5KHZlcnRzLmxlbmd0aCk7DQoNCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9sID0gMDsgX2wgPCBjb250LnJ2ZXJ0cy5sZW5ndGg7IF9sKyspIHsNCiAgICAgICAgICAgICAgICAgICAgY29udC5ydmVydHNbX2xdID0gdmVydHNbX2xdOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBpZiAoYm9yZGVyU2l6ZSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlaWdodGZpZWxkIHdhcyBidWlsZCB3aXRoIGJvcmRlcnNpemUsIHJlbW92ZSB0aGUgb2Zmc2V0Lg0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfajIgPSAwOyBfajIgPCBjb250Lm5ydmVydHM7ICsrX2oyKSB7DQogICAgICAgICAgICAgICAgICAgICAgY29udC5ydmVydHNbX2oyICogNF0gLT0gYm9yZGVyU2l6ZTsNCiAgICAgICAgICAgICAgICAgICAgICBjb250LnJ2ZXJ0c1tfajIgKiA0ICsgMl0gLT0gYm9yZGVyU2l6ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBjb250LnJlZyA9IHJlZzsNCiAgICAgICAgICAgICAgICAgIGNvbnQuYXJlYSA9IGFyZWE7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBNZXJnZSBob2xlcyBpZiBuZWVkZWQuDQoNCg0KICAgICAgICAgIGlmIChjc2V0LmNvbnRzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB3aW5kaW5nIG9mIGFsbCBwb2x5Z29ucy4NCiAgICAgICAgICAgIHZhciB3aW5kaW5nID0gbmV3IEFycmF5KGNzZXQuY29udHMubGVuZ3RoKTsNCiAgICAgICAgICAgIHZhciBuaG9sZXMgPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTEwID0gMDsgX2kxMCA8IGNzZXQuY29udHMubGVuZ3RoOyArK19pMTApIHsNCiAgICAgICAgICAgICAgdmFyIF9jb250ID0gY3NldC5jb250c1tfaTEwXTsgLy8gSWYgdGhlIGNvbnRvdXIgaXMgd291bmQgYmFja3dhcmRzLCBpdCBpcyBhIGhvbGUuDQoNCiAgICAgICAgICAgICAgd2luZGluZ1tfaTEwXSA9IFJlY2FzdENvbnRvdXIuY2FsY0FyZWFPZlBvbHlnb24yRChfY29udC52ZXJ0cywgX2NvbnQubnZlcnRzKSA8IDAgPyAtMSA6IDE7DQogICAgICAgICAgICAgIGlmICh3aW5kaW5nW19pMTBdIDwgMCkgbmhvbGVzKys7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChuaG9sZXMgPiAwKSB7DQogICAgICAgICAgICAgIC8vIENvbGxlY3Qgb3V0bGluZSBjb250b3VyIGFuZCBob2xlcyBjb250b3VycyBwZXIgcmVnaW9uLg0KICAgICAgICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCB0aGVyZSBpcyBvbmUgb3V0bGluZSBhbmQgbXVsdGlwbGUgaG9sZXMuDQogICAgICAgICAgICAgIHZhciBucmVnaW9ucyA9IGNoZi5tYXhSZWdpb25zICsgMTsNCiAgICAgICAgICAgICAgdmFyIHJlZ2lvbnMgPSBuZXcgQXJyYXkobnJlZ2lvbnMpOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pMTEgPSAwOyBfaTExIDwgbnJlZ2lvbnM7IF9pMTErKykgew0KICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2kxMV0gPSBuZXcgQ29udG91clJlZ2lvbigpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDA7IF9pMTIgPCBjc2V0LmNvbnRzLmxlbmd0aDsgKytfaTEyKSB7DQogICAgICAgICAgICAgICAgdmFyIF9jb250MiA9IGNzZXQuY29udHNbX2kxMl07IC8vIFBvc2l0aXZlbHkgd291bGQgY29udG91cnMgYXJlIG91dGxpbmVzLCBuZWdhdGl2ZSBob2xlcy4NCg0KICAgICAgICAgICAgICAgIGlmICh3aW5kaW5nW19pMTJdID4gMCkgew0KICAgICAgICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2NvbnQyLnJlZ10ub3V0bGluZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJyY0J1aWxkQ29udG91cnM6IE11bHRpcGxlIG91dGxpbmVzIGZvciByZWdpb24gIiArIF9jb250Mi5yZWcgKyAiLiIpOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICByZWdpb25zW19jb250Mi5yZWddLm91dGxpbmUgPSBfY29udDI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2NvbnQyLnJlZ10ubmhvbGVzKys7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kxMyA9IDA7IF9pMTMgPCBucmVnaW9uczsgX2kxMysrKSB7DQogICAgICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2kxM10ubmhvbGVzID4gMCkgew0KICAgICAgICAgICAgICAgICAgcmVnaW9uc1tfaTEzXS5ob2xlcyA9IG5ldyBDb250b3VySG9sZVtyZWdpb25zW19pMTNdLm5ob2xlc10oKTsNCg0KICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbmggPSAwOyBuaCA8IHJlZ2lvbnNbX2kxM10ubmhvbGVzOyBuaCsrKSB7DQogICAgICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2kxM10uaG9sZXNbbmhdID0gbmV3IENvbnRvdXJIb2xlKCk7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2kxM10ubmhvbGVzID0gMDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfaTE0ID0gMDsgX2kxNCA8IGNzZXQuY29udHMubGVuZ3RoOyArK19pMTQpIHsNCiAgICAgICAgICAgICAgICB2YXIgX2NvbnQzID0gY3NldC5jb250c1tfaTE0XTsNCiAgICAgICAgICAgICAgICB2YXIgX3JlZyA9IHJlZ2lvbnNbX2NvbnQzLnJlZ107DQogICAgICAgICAgICAgICAgaWYgKHdpbmRpbmdbX2kxNF0gPCAwKSBfcmVnLmhvbGVzW19yZWcubmhvbGVzKytdLmNvbnRvdXIgPSBfY29udDM7DQogICAgICAgICAgICAgIH0gLy8gRmluYWxseSBtZXJnZSBlYWNoIHJlZ2lvbnMgaG9sZXMgaW50byB0aGUgb3V0bGluZS4NCg0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9pMTUgPSAwOyBfaTE1IDwgbnJlZ2lvbnM7IF9pMTUrKykgew0KICAgICAgICAgICAgICAgIHZhciBfcmVnMiA9IHJlZ2lvbnNbX2kxNV07DQogICAgICAgICAgICAgICAgaWYgKF9yZWcyLm5ob2xlcyA9PSAwKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgIGlmIChfcmVnMi5vdXRsaW5lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgIG1lcmdlUmVnaW9uSG9sZXMoY3R4LCBfcmVnMik7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIC8vIFRoZSByZWdpb24gZG9lcyBub3QgaGF2ZSBhbiBvdXRsaW5lLg0KICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb250b3VyIGJlY2FvbWVzIHNlbGZvdmVybGFwcGluZyBiZWNhdXNlIG9mDQogICAgICAgICAgICAgICAgICAvLyB0b28gYWdncmVzc2l2ZSBzaW1wbGlmaWNhdGlvbiBzZXR0aW5ncy4NCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJyY0J1aWxkQ29udG91cnM6IEJhZCBvdXRsaW5lIGZvciByZWdpb24gIiArIF9pMTUgKyAiLCBjb250b3VyIHNpbXBsaWZpY2F0aW9uIGlzIGxpa2VseSB0b28gYWdncmVzc2l2ZS4iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjdHguc3RvcFRpbWVyKCJCVUlMRF9DT05UT1VSUyIpOw0KICAgICAgICAgIHJldHVybiBjc2V0Ow0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBSZWNhc3RDb250b3VyOw0KICAgIH0oKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb250b3VyLCAiQ29udG91clJlZ2lvbiIsIChfdGVtcCQyID0gZnVuY3Rpb24gQ29udG91clJlZ2lvbigpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VyUmVnaW9uKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvdXRsaW5lIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJob2xlcyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJuaG9sZXMiLCB2b2lkIDApOw0KICAgIH0sIF90ZW1wJDIpKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb250b3VyLCAiQ29udG91ckhvbGUiLCAoX3RlbXAyJDIgPSBmdW5jdGlvbiBDb250b3VySG9sZSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VySG9sZSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibGVmdG1vc3QiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1pbngiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1pbnoiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNvbnRvdXIiLCB2b2lkIDApOw0KICAgIH0sIF90ZW1wMiQyKSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29udG91ciwgIlBvdGVudGlhbERpYWdvbmFsIiwgKF90ZW1wMyA9IGZ1bmN0aW9uIFBvdGVudGlhbERpYWdvbmFsKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvdGVudGlhbERpYWdvbmFsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkaXN0Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJ0Iiwgdm9pZCAwKTsNCiAgICB9LCBfdGVtcDMpKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiBDb250YWlucyB0cmlhbmdsZSBtZXNoZXMgdGhhdCByZXByZXNlbnQgZGV0YWlsZWQgaGVpZ2h0IGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBwb2x5Z29ucyBpbiBpdHMgYXNzb2NpYXRlZCBwb2x5Z29uIG1lc2ggb2JqZWN0LiAqLw0KICAgIHZhciBQb2x5TWVzaERldGFpbCA9IGZ1bmN0aW9uIFBvbHlNZXNoRGV0YWlsKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvbHlNZXNoRGV0YWlsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtZXNoZXMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmVydHMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidHJpcyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJubWVzaGVzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnZlcnRzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnRyaXMiLCAwKTsNCiAgICB9Ow0KDQogICAgZnVuY3Rpb24gYXJyYXljb3B5JDIob25lLCBvbmVTdGFydCwgdHdvLCB0d29TdGFydCwgbGVuKSB7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQogICAgICAgIHR3b1t0d29TdGFydCArIGldID0gb25lW29uZVN0YXJ0ICsgaV07DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIEhlaWdodFBhdGNoID0gZnVuY3Rpb24gSGVpZ2h0UGF0Y2goKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVpZ2h0UGF0Y2gpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInhtaW4iLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ5bWluIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2lkdGgiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoZWlnaHQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkYXRhIiwgW10pOw0KICAgIH07DQoNCiAgICB2YXIgUmVjYXN0TWVzaERldGFpbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBSZWNhc3RNZXNoRGV0YWlsKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0TWVzaERldGFpbCk7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RNZXNoRGV0YWlsLCBbew0KICAgICAgICBrZXk6ICJtZXJnZVBvbHlNZXNoRGV0YWlscyIsDQogICAgICAgIC8vLyBAc2VlIHJjQWxsb2NQb2x5TWVzaERldGFpbCwgcmNQb2x5TWVzaERldGFpbA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VQb2x5TWVzaERldGFpbHMoY3R4LCBtZXNoZXMsIG5tZXNoZXMpIHsNCiAgICAgICAgICBtZXNoID0gbmV3IFBvbHlNZXNoRGV0YWlsKCk7DQogICAgICAgICAgY3R4LnN0YXJ0VGltZXIoIk1FUkdFX1BPTFlNRVNIREVUQUlMIik7DQogICAgICAgICAgdmFyIG1heFZlcnRzID0gMDsNCiAgICAgICAgICB2YXIgbWF4VHJpcyA9IDA7DQogICAgICAgICAgdmFyIG1heE1lc2hlcyA9IDA7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5tZXNoZXM7ICsraSkgew0KICAgICAgICAgICAgaWYgKG1lc2hlc1tpXSA9PSBudWxsKSBjb250aW51ZTsNCiAgICAgICAgICAgIG1heFZlcnRzICs9IG1lc2hlc1tpXS5udmVydHM7DQogICAgICAgICAgICBtYXhUcmlzICs9IG1lc2hlc1tpXS5udHJpczsNCiAgICAgICAgICAgIG1heE1lc2hlcyArPSBtZXNoZXNbaV0ubm1lc2hlczsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBtZXNoLm5tZXNoZXMgPSAwOw0KICAgICAgICAgIG1lc2gubWVzaGVzID0gbmV3IEFycmF5KG1heE1lc2hlcyAqIDQpOw0KICAgICAgICAgIG1lc2gubnRyaXMgPSAwOw0KICAgICAgICAgIG1lc2gudHJpcyA9IG5ldyBBcnJheShtYXhUcmlzICogNCk7DQogICAgICAgICAgbWVzaC5udmVydHMgPSAwOw0KICAgICAgICAgIG1lc2gudmVydHMgPSBuZXcgQXJyYXkobWF4VmVydHMgKiAzKTsgLy8gTWVyZ2UgZGF0YXMuDQoNCiAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbm1lc2hlczsgKytfaSkgew0KICAgICAgICAgICAgdmFyIGRtID0gbWVzaGVzW19pXTsNCiAgICAgICAgICAgIGlmIChkbSA9PSBudWxsKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBkbS5ubWVzaGVzOyArK2opIHsNCiAgICAgICAgICAgICAgdmFyIGRzdCA9IG1lc2gubm1lc2hlcyAqIDQ7DQogICAgICAgICAgICAgIHZhciBzcmMgPSBqICogNDsNCiAgICAgICAgICAgICAgbWVzaC5tZXNoZXNbZHN0ICsgMF0gPSBtZXNoLm52ZXJ0cyArIGRtLm1lc2hlc1tzcmMgKyAwXTsNCiAgICAgICAgICAgICAgbWVzaC5tZXNoZXNbZHN0ICsgMV0gPSBkbS5tZXNoZXNbc3JjICsgMV07DQogICAgICAgICAgICAgIG1lc2gubWVzaGVzW2RzdCArIDJdID0gbWVzaC5udHJpcyArIGRtLm1lc2hlc1tzcmMgKyAyXTsNCiAgICAgICAgICAgICAgbWVzaC5tZXNoZXNbZHN0ICsgM10gPSBkbS5tZXNoZXNbc3JjICsgM107DQogICAgICAgICAgICAgIG1lc2gubm1lc2hlcysrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRtLm52ZXJ0czsgKytrKSB7DQogICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KG1lc2gudmVydHMsIG1lc2gubnZlcnRzICogMywgZG0udmVydHMsIGsgKiAzKTsNCiAgICAgICAgICAgICAgbWVzaC5udmVydHMrKzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IGRtLm50cmlzOyArK19rKSB7DQogICAgICAgICAgICAgIG1lc2gudHJpc1ttZXNoLm50cmlzICogNCArIDBdID0gZG0udHJpc1tfayAqIDQgKyAwXTsNCiAgICAgICAgICAgICAgbWVzaC50cmlzW21lc2gubnRyaXMgKiA0ICsgMV0gPSBkbS50cmlzW19rICogNCArIDFdOw0KICAgICAgICAgICAgICBtZXNoLnRyaXNbbWVzaC5udHJpcyAqIDQgKyAyXSA9IGRtLnRyaXNbX2sgKiA0ICsgMl07DQogICAgICAgICAgICAgIG1lc2gudHJpc1ttZXNoLm50cmlzICogNCArIDNdID0gZG0udHJpc1tfayAqIDQgKyAzXTsNCiAgICAgICAgICAgICAgbWVzaC5udHJpcysrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIk1FUkdFX1BPTFlNRVNIREVUQUlMIik7DQogICAgICAgICAgcmV0dXJuIG1lc2g7DQogICAgICAgIH0NCiAgICAgIH1dLCBbew0KICAgICAgICBrZXk6ICJ2ZGlzdFNxMl8zIiwNCiAgICAgICAgLy8gTWF4IHRyaXMgZm9yIGRlbGF1bmF5IGlzIDJuLTItayAobj1udW0gdmVydHMsIGs9bnVtIGh1bGwgdmVydHMpLg0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmRpc3RTcTJfMyh2ZXJ0cywgcCwgcSkgew0KICAgICAgICAgIHZhciBkeCA9IHZlcnRzW3EgKyAwXSAtIHZlcnRzW3AgKyAwXTsNCiAgICAgICAgICB2YXIgZHkgPSB2ZXJ0c1txICsgMl0gLSB2ZXJ0c1twICsgMl07DQogICAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZkaXN0MiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZGlzdDIodmVydHMsIHAsIHEpIHsNCiAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KFJlY2FzdE1lc2hEZXRhaWwudmRpc3RTcTJfMyh2ZXJ0cywgcCwgcSkpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZkaXN0U3EyXzIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmRpc3RTcTJfMihwLCBxKSB7DQogICAgICAgICAgdmFyIGR4ID0gcVswXSAtIHBbMF07DQogICAgICAgICAgdmFyIGR5ID0gcVsyXSAtIHBbMl07DQogICAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZkaXN0MiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZGlzdDIocCwgcSkgew0KICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoUmVjYXN0TWVzaERldGFpbC52ZGlzdFNxMl8yKHAsIHEpKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ2ZGlzdFNxMiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZGlzdFNxMihwLCB2ZXJ0cywgcSkgew0KICAgICAgICAgIGR4ID0gdmVydHNbcSArIDBdIC0gcFswXTsNCiAgICAgICAgICBkeSA9IHZlcnRzW3EgKyAyXSAtIHBbMl07DQogICAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZkaXN0MiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZGlzdDIocCwgdmVydHMsIHEpIHsNCiAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KFJlY2FzdE1lc2hEZXRhaWwudmRpc3RTcTJfMyhwLCB2ZXJ0cywgcSkpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZjcm9zczIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmNyb3NzMih2ZXJ0cywgcDEsIHAyLCBwMykgew0KICAgICAgICAgIHUxID0gdmVydHNbcDIgKyAwXSAtIHZlcnRzW3AxICsgMF07DQogICAgICAgICAgdjEgPSB2ZXJ0c1twMiArIDJdIC0gdmVydHNbcDEgKyAyXTsNCiAgICAgICAgICB1MiA9IHZlcnRzW3AzICsgMF0gLSB2ZXJ0c1twMSArIDBdOw0KICAgICAgICAgIHYyID0gdmVydHNbcDMgKyAyXSAtIHZlcnRzW3AxICsgMl07DQogICAgICAgICAgcmV0dXJuIHUxICogdjIgLSB2MSAqIHUyOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInZjcm9zczIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdmNyb3NzMihwMSwgcDIsIHAzKSB7DQogICAgICAgICAgdTEgPSBwMlswXSAtIHAxWzBdOw0KICAgICAgICAgIHYxID0gcDJbMl0gLSBwMVsyXTsNCiAgICAgICAgICB1MiA9IHAzWzBdIC0gcDFbMF07DQogICAgICAgICAgdjIgPSBwM1syXSAtIHAxWzJdOw0KICAgICAgICAgIHJldHVybiB1MSAqIHYyIC0gdjEgKiB1MjsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjaXJjdW1DaXJjbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2lyY3VtQ2lyY2xlKHZlcnRzLCBwMSwgcDIsIHAzLCBjLCByKSB7DQogICAgICAgICAgRVBTID0gMWUtNjsgLy8gQ2FsY3VsYXRlIHRoZSBjaXJjbGUgcmVsYXRpdmUgdG8gcDEsIHRvIGFzb21lIHByZWNpc2lvbiBpc3N1ZXMuDQoNCiAgICAgICAgICB2MSA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICB2MiA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICB2MyA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuc3ViKHYyLCB2ZXJ0cywgcDIsIHAxKTsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuc3ViKHYzLCB2ZXJ0cywgcDMsIHAxKTsNCiAgICAgICAgICBjcCA9IHZjcm9zczIodjEsIHYyLCB2Myk7DQoNCiAgICAgICAgICBpZiAoTWF0aC5hYnMoY3ApID4gRVBTKSB7DQogICAgICAgICAgICB2MVNxID0gUmVjYXN0TWVzaERldGFpbC52ZG90Mih2MSwgdjEpOw0KICAgICAgICAgICAgdjJTcSA9IFJlY2FzdE1lc2hEZXRhaWwudmRvdDIodjIsIHYyKTsNCiAgICAgICAgICAgIHYzU3EgPSBSZWNhc3RNZXNoRGV0YWlsLnZkb3QyKHYzLCB2Myk7DQogICAgICAgICAgICBjWzBdID0gKHYxU3EgKiAodjJbMl0gLSB2M1syXSkgKyB2MlNxICogKHYzWzJdIC0gdjFbMl0pICsgdjNTcSAqICh2MVsyXSAtIHYyWzJdKSkgLyAoMiAqIGNwKTsNCiAgICAgICAgICAgIGNbMV0gPSAwOw0KICAgICAgICAgICAgY1syXSA9ICh2MVNxICogKHYzWzBdIC0gdjJbMF0pICsgdjJTcSAqICh2MVswXSAtIHYzWzBdKSArIHYzU3EgKiAodjJbMF0gLSB2MVswXSkpIC8gKDIgKiBjcCk7DQogICAgICAgICAgICByLnNldChSZWNhc3RNZXNoRGV0YWlsLnZkaXN0MihjLCB2MSkpOw0KICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmFkZChjLCBjLCB2ZXJ0cywgcDEpOw0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkoYywgdmVydHMsIHAxKTsNCiAgICAgICAgICByLnNldCgwKTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlzdFB0VHJpIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3RQdFRyaShwLCB2ZXJ0cywgYSwgYiwgYykgew0KICAgICAgICAgIHZhciB2MCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICB2YXIgdjEgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgdmFyIHYyID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5zdWJBKHYwLCB2ZXJ0cywgYywgYSk7DQogICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLnN1YkEodjEsIHZlcnRzLCBiLCBhKTsNCiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuc3ViQih2MiwgcCwgdmVydHMsIGEpOw0KICAgICAgICAgIHZhciBkb3QwMCA9IFJlY2FzdE1lc2hEZXRhaWwudmRvdDIodjAsIHYwKTsNCiAgICAgICAgICB2YXIgZG90MDEgPSBSZWNhc3RNZXNoRGV0YWlsLnZkb3QyKHYwLCB2MSk7DQogICAgICAgICAgdmFyIGRvdDAyID0gUmVjYXN0TWVzaERldGFpbC52ZG90Mih2MCwgdjIpOw0KICAgICAgICAgIHZhciBkb3QxMSA9IFJlY2FzdE1lc2hEZXRhaWwudmRvdDIodjEsIHYxKTsNCiAgICAgICAgICB2YXIgZG90MTIgPSBSZWNhc3RNZXNoRGV0YWlsLnZkb3QyKHYxLCB2Mik7IC8vIENvbXB1dGUgYmFyeWNlbnRyaWMgY29vcmRpbmF0ZXMNCg0KICAgICAgICAgIHZhciBpbnZEZW5vbSA9IDEuMCAvIChkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMSk7DQogICAgICAgICAgdmFyIHUgPSAoZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpICogaW52RGVub207DQogICAgICAgICAgdmFyIHYgPSAoZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpICogaW52RGVub207IC8vIElmIHBvUG9seSBsaWVzIGluc2lkZSB0aGUgdHJpYW5nbGUsIHJldHVybiBpbnRlcnBvbGF0ZWQgeS1jb29yZC4NCg0KICAgICAgICAgIHZhciBFUFMgPSAxZS00Ow0KDQogICAgICAgICAgaWYgKHUgPj0gLUVQUyAmJiB2ID49IC1FUFMgJiYgdSArIHYgPD0gMSArIEVQUykgew0KICAgICAgICAgICAgdmFyIHkgPSB2ZXJ0c1thICsgMV0gKyB2MFsxXSAqIHUgKyB2MVsxXSAqIHY7DQogICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoeSAtIHBbMV0pOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBOdW1iZXIuTUFYX1ZBTFVFOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImRpc3RhbmNlUHRTZWciLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdGFuY2VQdFNlZyh2ZXJ0cywgcHQsIHAsIHEpIHsNCiAgICAgICAgICB2YXIgcHF4ID0gdmVydHNbcSArIDBdIC0gdmVydHNbcCArIDBdOw0KICAgICAgICAgIHZhciBwcXkgPSB2ZXJ0c1txICsgMV0gLSB2ZXJ0c1twICsgMV07DQogICAgICAgICAgdmFyIHBxeiA9IHZlcnRzW3EgKyAyXSAtIHZlcnRzW3AgKyAyXTsNCiAgICAgICAgICB2YXIgZHggPSB2ZXJ0c1twdCArIDBdIC0gdmVydHNbcCArIDBdOw0KICAgICAgICAgIHZhciBkeSA9IHZlcnRzW3B0ICsgMV0gLSB2ZXJ0c1twICsgMV07DQogICAgICAgICAgdmFyIGR6ID0gdmVydHNbcHQgKyAyXSAtIHZlcnRzW3AgKyAyXTsNCiAgICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeSAqIHBxeSArIHBxeiAqIHBxejsNCiAgICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF5ICogZHkgKyBwcXogKiBkejsNCiAgICAgICAgICBpZiAoZCA+IDApIHQgLz0gZDsNCiAgICAgICAgICBpZiAodCA8IDApIHQgPSAwO2Vsc2UgaWYgKHQgPiAxKSB0ID0gMTsNCiAgICAgICAgICBkeCA9IHZlcnRzW3AgKyAwXSArIHQgKiBwcXggLSB2ZXJ0c1twdCArIDBdOw0KICAgICAgICAgIGR5ID0gdmVydHNbcCArIDFdICsgdCAqIHBxeSAtIHZlcnRzW3B0ICsgMV07DQogICAgICAgICAgZHogPSB2ZXJ0c1twICsgMl0gKyB0ICogcHF6IC0gdmVydHNbcHQgKyAyXTsNCiAgICAgICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImRpc3RhbmNlUHRTZWcyZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0YW5jZVB0U2VnMmQodmVydHMsIHB0LCBwb2x5LCBwLCBxKSB7DQogICAgICAgICAgdmFyIHBxeCA9IHBvbHlbcSArIDBdIC0gcG9seVtwICsgMF07DQogICAgICAgICAgdmFyIHBxeiA9IHBvbHlbcSArIDJdIC0gcG9seVtwICsgMl07DQogICAgICAgICAgdmFyIGR4ID0gdmVydHNbcHQgKyAwXSAtIHBvbHlbcCArIDBdOw0KICAgICAgICAgIHZhciBkeiA9IHZlcnRzW3B0ICsgMl0gLSBwb2x5W3AgKyAyXTsNCiAgICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeiAqIHBxejsNCiAgICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF6ICogZHo7DQogICAgICAgICAgaWYgKGQgPiAwKSB0IC89IGQ7DQogICAgICAgICAgaWYgKHQgPCAwKSB0ID0gMDtlbHNlIGlmICh0ID4gMSkgdCA9IDE7DQogICAgICAgICAgZHggPSBwb2x5W3AgKyAwXSArIHQgKiBwcXggLSB2ZXJ0c1twdCArIDBdOw0KICAgICAgICAgIGR6ID0gcG9seVtwICsgMl0gKyB0ICogcHF6IC0gdmVydHNbcHQgKyAyXTsNCiAgICAgICAgICByZXR1cm4gZHggKiBkeCArIGR6ICogZHo7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZGlzdFRvVHJpTWVzaCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0VG9UcmlNZXNoKHAsIHZlcnRzLCBudmVydHMsIHRyaXMsIG50cmlzKSB7DQogICAgICAgICAgdmFyIGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudHJpczsgKytpKSB7DQogICAgICAgICAgICB2YXIgdmEgPSB0cmlzW2kgKiA0ICsgMF0gKiAzOw0KICAgICAgICAgICAgdmFyIHZiID0gdHJpc1tpICogNCArIDFdICogMzsNCiAgICAgICAgICAgIHZhciB2YyA9IHRyaXNbaSAqIDQgKyAyXSAqIDM7DQoNCiAgICAgICAgICAgIHZhciBfZCA9IFJlY2FzdE1lc2hEZXRhaWwuZGlzdFB0VHJpKHAsIHZlcnRzLCB2YSwgdmIsIHZjKTsNCg0KICAgICAgICAgICAgaWYgKF9kIDwgZG1pbikgZG1pbiA9IF9kOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChkbWluID09IE51bWJlci5NQVhfVkFMVUUpIHJldHVybiAtMTsNCiAgICAgICAgICByZXR1cm4gZG1pbjsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJkaXN0VG9Qb2x5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3RUb1BvbHkobnZlcnQsIHZlcnRzLCBwKSB7DQogICAgICAgICAgdmFyIGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFOw0KICAgICAgICAgIHZhciBjID0gZmFsc2U7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfaiA9IG52ZXJ0IC0gMTsgX2kyIDwgbnZlcnQ7IF9qID0gX2kyKyspIHsNCiAgICAgICAgICAgIHZhciB2aSA9IF9pMiAqIDM7DQogICAgICAgICAgICB2YXIgdmogPSBfaiAqIDM7DQogICAgICAgICAgICBpZiAodmVydHNbdmkgKyAyXSA+IHBbMl0gIT0gdmVydHNbdmogKyAyXSA+IHBbMl0gJiYgcFswXSA8ICh2ZXJ0c1t2aiArIDBdIC0gdmVydHNbdmkgKyAwXSkgKiAocFsyXSAtIHZlcnRzW3ZpICsgMl0pIC8gKHZlcnRzW3ZqICsgMl0gLSB2ZXJ0c1t2aSArIDJdKSArIHZlcnRzW3ZpICsgMF0pIGMgPSAhYzsNCiAgICAgICAgICAgIGRtaW4gPSBNYXRoLm1pbihkbWluLCBSZWNhc3RNZXNoRGV0YWlsLmRpc3RhbmNlUHRTZWcyZChwLCAwLCB2ZXJ0cywgdmosIHZpKSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGMgPyAtZG1pbiA6IGRtaW47DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0SGVpZ2h0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEhlaWdodChmeCwgZnksIGZ6LCBjcywgaWNzLCBjaCwgcmFkaXVzLCBocCkgew0KICAgICAgICAgIHZhciBpeCA9IE1hdGguZmxvb3IoZnggKiBpY3MgKyAwLjAxKTsNCiAgICAgICAgICB2YXIgaXogPSBNYXRoLmZsb29yKGZ6ICogaWNzICsgMC4wMSk7DQogICAgICAgICAgaXggPSBSZWNhc3RDb21tb24uY2xhbXAoaXggLSBocC54bWluLCAwLCBocC53aWR0aCAtIDEpOw0KICAgICAgICAgIGl6ID0gUmVjYXN0Q29tbW9uLmNsYW1wKGl6IC0gaHAueW1pbiwgMCwgaHAuaGVpZ2h0IC0gMSk7DQogICAgICAgICAgdmFyIGggPSBocC5kYXRhW2l4ICsgaXogKiBocC53aWR0aF07DQoNCiAgICAgICAgICBpZiAoaCA9PSBSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVCkgew0KICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIHdoZW4gZGF0YSBtaWdodCBiZSBiYWQuDQogICAgICAgICAgICAvLyBXYWxrIGFkamFjZW50IGNlbGxzIF9pbiBhIHNwaXJhbCB1cCB0byAncmFkaXVzJywgYW5kIGxvb2sNCiAgICAgICAgICAgIC8vIGZvciBhIHBpeGVsIHdoaWNoIGhhcyBhIHZhbGlkIGhlaWdodC4NCiAgICAgICAgICAgIHZhciB4ID0gMSwNCiAgICAgICAgICAgICAgICB6ID0gMCwNCiAgICAgICAgICAgICAgICBfZHggPSAxLA0KICAgICAgICAgICAgICAgIGR6ID0gMDsNCiAgICAgICAgICAgIHZhciBtYXhTaXplID0gcmFkaXVzICogMiArIDE7DQogICAgICAgICAgICB2YXIgbWF4SXRlciA9IG1heFNpemUgKiBtYXhTaXplIC0gMTsNCiAgICAgICAgICAgIHZhciBuZXh0UmluZ0l0ZXJTdGFydCA9IDg7DQogICAgICAgICAgICB2YXIgbmV4dFJpbmdJdGVycyA9IDE2Ow0KICAgICAgICAgICAgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4SXRlcjsgKytpKSB7DQogICAgICAgICAgICAgIHZhciBueCA9IGl4ICsgeDsNCiAgICAgICAgICAgICAgdmFyIG56ID0gaXogKyB6Ow0KDQogICAgICAgICAgICAgIGlmIChueCA+PSAwICYmIG56ID49IDAgJiYgbnggPCBocC53aWR0aCAmJiBueiA8IGhwLmhlaWdodCkgew0KICAgICAgICAgICAgICAgIHZhciBuaCA9IGhwLmRhdGFbbnggKyBueiAqIGhwLndpZHRoXTsNCg0KICAgICAgICAgICAgICAgIGlmIChuaCAhPSBSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVCkgew0KICAgICAgICAgICAgICAgICAgZCA9IE1hdGguYWJzKG5oICogY2ggLSBmeSk7DQoNCiAgICAgICAgICAgICAgICAgIGlmIChkIDwgZG1pbikgew0KICAgICAgICAgICAgICAgICAgICBoID0gbmg7DQogICAgICAgICAgICAgICAgICAgIGRtaW4gPSBkOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSAvLyBXZSBhcmUgc2VhcmNoaW5nIF9pbiBhIGdyaWQgd2hpY2ggbG9va3MgYXBwcm94aW1hdGVseSBsaWtlIHRoaXM6DQogICAgICAgICAgICAgIC8vICBfX19fX19fX19fDQogICAgICAgICAgICAgIC8vIHwyIF9fX19fXyAyfA0KICAgICAgICAgICAgICAvLyB8IHwxIF9fIDF8IHwNCiAgICAgICAgICAgICAgLy8gfCB8IHxfX3wgfCB8DQogICAgICAgICAgICAgIC8vIHwgfF9fX19fX3wgfA0KICAgICAgICAgICAgICAvLyB8X19fX19fX19fX3wNCiAgICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBmaW5kIHRoZSBiZXN0IGhlaWdodCBhcyBjbG9zZSB0byB0aGUgY2VudGVyIGNlbGwgYXMgcG9zc2libGUuIFRoaXMgbWVhbnMgdGhhdA0KICAgICAgICAgICAgICAvLyBpZiB3ZSBmaW5kIGEgaGVpZ2h0IF9pbiBvbmUgb2YgdGhlIG5laWdoYm9yIGNlbGxzIHRvIHRoZSBjZW50ZXIsIHdlIGRvbid0IHdhbnQgdG8NCiAgICAgICAgICAgICAgLy8gZXhwYW5kIGZ1cnRoZXIgb3V0IHRoYW4gdGhlIDggbmVpZ2hib3JzIC0gd2Ugd2FudCB0byBsaW1pdCBvdXIgc2VhcmNoIHRvIHRoZSBjbG9zZXN0DQogICAgICAgICAgICAgIC8vIG9mIHRoZXNlICJyaW5ncyIsIGJ1dCB0aGUgYmVzdCBoZWlnaHQgX2luIHRoZSByaW5nLg0KICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgdGhlIGNlbnRlciBpcyBqdXN0IDEgY2VsbC4gV2UgY2hlY2tlZCB0aGF0IGF0IHRoZSBlbnRyYW5jZSB0byB0aGUgZnVuY3Rpb24uDQogICAgICAgICAgICAgIC8vIFRoZSBuZXh0ICJyaW5nIiBjb250YWlucyA4IGNlbGxzIChtYXJrZWQgMSBhYm92ZSkuIFRob3NlIGFyZSBhbGwgdGhlIG5laWdoYm9ycyB0byB0aGUgY2VudGVyIGNlbGwuDQogICAgICAgICAgICAgIC8vIFRoZSBuZXh0IG9uZSBhZ2FpbiBjb250YWlucyAxNiBjZWxscyAobWFya2VkIDIpLiBJbiBnZW5lcmFsIGVhY2ggcmluZyBoYXMgOCBhZGRpdGlvbmFsIGNlbGxzLCB3aGljaA0KICAgICAgICAgICAgICAvLyBjYW4gYmUgdGhvdWdodCBvZiBhcyBhZGRpbmcgMiBjZWxscyBhcm91bmQgdGhlICJjZW50ZXIiIG9mIGVhY2ggc2lkZSB3aGVuIHdlIGV4cGFuZCB0aGUgcmluZy4NCiAgICAgICAgICAgICAgLy8gSGVyZSB3ZSBkZXRlY3QgaWYgd2UgYXJlIGFib3V0IHRvIGVudGVyIHRoZSBuZXh0IHJpbmcsIGFuZCBpZiB3ZSBhcmUgYW5kIHdlIGhhdmUgZm91bmQNCiAgICAgICAgICAgICAgLy8gYSBoZWlnaHQsIHdlIGFib3J0IHRoZSBzZWFyY2guDQoNCg0KICAgICAgICAgICAgICBpZiAoaSArIDEgPT0gbmV4dFJpbmdJdGVyU3RhcnQpIHsNCiAgICAgICAgICAgICAgICBpZiAoaCAhPSBSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVCkgYnJlYWs7DQogICAgICAgICAgICAgICAgbmV4dFJpbmdJdGVyU3RhcnQgKz0gbmV4dFJpbmdJdGVyczsNCiAgICAgICAgICAgICAgICBuZXh0UmluZ0l0ZXJzICs9IDg7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoeCA9PSB6IHx8IHggPCAwICYmIHggPT0gLXogfHwgeCA+IDAgJiYgeCA9PSAxIC0geikgew0KICAgICAgICAgICAgICAgIHZhciB0bXAgPSBfZHg7DQogICAgICAgICAgICAgICAgX2R4ID0gLWR6Ow0KICAgICAgICAgICAgICAgIGR6ID0gdG1wOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgeCArPSBfZHg7DQogICAgICAgICAgICAgIHogKz0gZHo7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGg7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmluZEVkZ2UiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEVkZ2UoZWRnZXMsIHMsIHQpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aCAvIDQ7IGkrKykgew0KICAgICAgICAgICAgdmFyIGUgPSBpICogNDsNCiAgICAgICAgICAgIGlmIChlZGdlc1tlICsgMF0gPT0gcyAmJiBlZGdlc1tlICsgMV0gPT0gdCB8fCBlZGdlc1tlICsgMF0gPT0gdCAmJiBlZGdlc1tlICsgMV0gPT0gcykgcmV0dXJuIGk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIEVWX1VOREVGOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZEVkZ2UiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRWRnZShjdHgsIGVkZ2VzLCBtYXhFZGdlcywgcywgdCwgbCwgcikgew0KICAgICAgICAgIGlmIChlZGdlcy5sZW5ndGggLyA0ID49IG1heEVkZ2VzKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiYWRkRWRnZTogVG9vIG1hbnkgZWRnZXMgKCIgKyBlZGdlcy5sZW5ndGggLyA0ICsgIi8iICsgbWF4RWRnZXMgKyAiKS4iKTsNCiAgICAgICAgICB9IC8vIEFkZCBlZGdlIGlmIG5vdCBhbHJlYWR5IF9pbiB0aGUgdHJpYW5ndWxhdGlvbi4NCg0KDQogICAgICAgICAgdmFyIGUgPSBmaW5kRWRnZShlZGdlcywgcywgdCk7DQoNCiAgICAgICAgICBpZiAoZSA9PSBFVl9VTkRFRikgew0KICAgICAgICAgICAgZWRnZXMucHVzaChzKTsNCiAgICAgICAgICAgIGVkZ2VzLnB1c2godCk7DQogICAgICAgICAgICBlZGdlcy5wdXNoKGwpOw0KICAgICAgICAgICAgZWRnZXMucHVzaChyKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidXBkYXRlTGVmdEZhY2UiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTGVmdEZhY2UoZWRnZXMsIGUsIHMsIHQsIGYpIHsNCiAgICAgICAgICBpZiAoZWRnZXNbZSArIDBdID09IHMgJiYgZWRnZXNbZSArIDFdID09IHQgJiYgZWRnZXNbZSArIDJdID09IEVWX1VOREVGKSBlZGdlcy5zZXQoZSArIDIsIGYpO2Vsc2UgaWYgKGVkZ2VzW2UgKyAxXSA9PSBzICYmIGVkZ2VzW2UgKyAwXSA9PSB0ICYmIGVkZ2VzW2UgKyAzXSA9PSBFVl9VTkRFRikgZWRnZXMuc2V0KGUgKyAzLCBmKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJvdmVybGFwU2VnU2VnMmQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb3ZlcmxhcFNlZ1NlZzJkKHZlcnRzLCBhLCBiLCBjLCBkKSB7DQogICAgICAgICAgYTEgPSB2Y3Jvc3MyKHZlcnRzLCBhLCBiLCBkKTsNCiAgICAgICAgICBhMiA9IHZjcm9zczIodmVydHMsIGEsIGIsIGMpOw0KDQogICAgICAgICAgaWYgKGExICogYTIgPCAwLjApIHsNCiAgICAgICAgICAgIGEzID0gdmNyb3NzMih2ZXJ0cywgYywgZCwgYSk7DQogICAgICAgICAgICBhNCA9IGEzICsgYTIgLSBhMTsNCiAgICAgICAgICAgIGlmIChhMyAqIGE0IDwgMC4wKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3ZlcmxhcEVkZ2VzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJsYXBFZGdlcyhwdHMsIGVkZ2VzLCBzMSwgdDEpIHsNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aCAvIDQ7ICsraSkgew0KICAgICAgICAgICAgdmFyIHMwID0gZWRnZXNbaSAqIDQgKyAwXTsNCiAgICAgICAgICAgIHZhciB0MCA9IGVkZ2VzW2kgKiA0ICsgMV07IC8vIFNhbWUgb3IgY29ubmVjdGVkIGVkZ2VzIGRvIG5vdCBvdmVybGFwLg0KDQogICAgICAgICAgICBpZiAoczAgPT0gczEgfHwgczAgPT0gdDEgfHwgdDAgPT0gczEgfHwgdDAgPT0gdDEpIGNvbnRpbnVlOw0KICAgICAgICAgICAgaWYgKG92ZXJsYXBTZWdTZWcyZChwdHMsIHMwICogMywgdDAgKiAzLCBzMSAqIDMsIHQxICogMykpIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjb21wbGV0ZUZhY2V0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBsZXRlRmFjZXQoY3R4LCBwdHMsIG5wdHMsIGVkZ2VzLCBtYXhFZGdlcywgbmZhY2VzLCBlKSB7DQogICAgICAgICAgRVBTID0gMWUtNTsNCiAgICAgICAgICB2YXIgZWRnZSA9IGUgKiA0OyAvLyBDYWNoZSBzIGFuZCB0Lg0KDQogICAgICAgICAgdmFyIHMsIHQ7DQoNCiAgICAgICAgICBpZiAoZWRnZXNbZWRnZSArIDJdID09IEVWX1VOREVGKSB7DQogICAgICAgICAgICBzID0gZWRnZXNbZWRnZSArIDBdOw0KICAgICAgICAgICAgdCA9IGVkZ2VzW2VkZ2UgKyAxXTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGVkZ2VzW2VkZ2UgKyAzXSA9PSBFVl9VTkRFRikgew0KICAgICAgICAgICAgcyA9IGVkZ2VzW2VkZ2UgKyAxXTsNCiAgICAgICAgICAgIHQgPSBlZGdlc1tlZGdlICsgMF07DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIEVkZ2UgYWxyZWFkeSBjb21wbGV0ZWQuDQogICAgICAgICAgICByZXR1cm4gbmZhY2VzOw0KICAgICAgICAgIH0gLy8gRmluZCBiZXN0IHBvUG9seSBvbiBsZWZ0IG9mIGVkZ2UuDQoNCg0KICAgICAgICAgIHZhciBwdCA9IG5wdHM7DQogICAgICAgICAgdmFyIGMgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgdmFyIHIgPSBuZXcgQXRvbWljUmVmZXJlbmNlKC0xKTsNCg0KICAgICAgICAgIGZvciAodmFyIHUgPSAwOyB1IDwgbnB0czsgKyt1KSB7DQogICAgICAgICAgICBpZiAodSA9PSBzIHx8IHUgPT0gdCkgY29udGludWU7DQoNCiAgICAgICAgICAgIGlmICh2Y3Jvc3MyKHB0cywgcyAqIDMsIHQgKiAzLCB1ICogMykgPiBFUFMpIHsNCiAgICAgICAgICAgICAgaWYgKHIuZ2V0KCkgPCAwKSB7DQogICAgICAgICAgICAgICAgLy8gVGhlIGNpcmNsZSBpcyBub3QgdXBkYXRlZCB5ZXQsIGRvIGl0IG5vdy4NCiAgICAgICAgICAgICAgICBwdCA9IHU7DQogICAgICAgICAgICAgICAgY2lyY3VtQ2lyY2xlKHB0cywgcyAqIDMsIHQgKiAzLCB1ICogMywgYywgcik7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBkID0gUmVjYXN0TWVzaERldGFpbC52ZGlzdDIoYywgcHRzLCB1ICogMyk7DQogICAgICAgICAgICAgIHRvbCA9IDAuMDAxOw0KDQogICAgICAgICAgICAgIGlmIChkID4gci5nZXQoKSAqICgxICsgdG9sKSkgew0KICAgICAgICAgICAgICAgIC8vIE91dHNpZGUgY3VycmVudCBjaXJjdW1jaXJjbGUsIHNraXAuDQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZCA8IHIuZ2V0KCkgKiAoMSAtIHRvbCkpIHsNCiAgICAgICAgICAgICAgICAvLyBJbnNpZGUgc2FmZSBjaXJjdW1jaXJjbGUsIHVwZGF0ZSBjaXJjbGUuDQogICAgICAgICAgICAgICAgcHQgPSB1Ow0KICAgICAgICAgICAgICAgIGNpcmN1bUNpcmNsZShwdHMsIHMgKiAzLCB0ICogMywgdSAqIDMsIGMsIHIpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIEluc2lkZSBlcHNpbG9uIGNpcmN1bSBjaXJjbGUsIGRvIGV4dHJhIHRlc3RzIHRvIG1ha2Ugc3VyZSB0aGUgZWRnZSBpcyB2YWxpZC4NCiAgICAgICAgICAgICAgICAvLyBzLXUgYW5kIHQtdSBjYW5ub3Qgb3ZlcmxhcCB3aXRoIHMtcHQgbm9yIHQtcHQgaWYgdGhleSBleGlzdHMuDQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXBFZGdlcyhwdHMsIGVkZ2VzLCBzLCB1KSkgY29udGludWU7DQogICAgICAgICAgICAgICAgaWYgKG92ZXJsYXBFZGdlcyhwdHMsIGVkZ2VzLCB0LCB1KSkgY29udGludWU7IC8vIEVkZ2UgaXMgdmFsaWQuDQoNCiAgICAgICAgICAgICAgICBwdCA9IHU7DQogICAgICAgICAgICAgICAgY2lyY3VtQ2lyY2xlKHB0cywgcyAqIDMsIHQgKiAzLCB1ICogMywgYywgcik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIEFkZCBuZXcgdHJpYW5nbGUgb3IgdXBkYXRlIGVkZ2UgaW5mbyBpZiBzLXQgaXMgb24gaHVsbC4NCg0KDQogICAgICAgICAgaWYgKHB0IDwgbnB0cykgew0KICAgICAgICAgICAgLy8gVXBkYXRlIGZhY2UgaW5mb3JtYXRpb24gb2YgZWRnZSBiZWluZyBjb21wUG9seWVkLg0KICAgICAgICAgICAgdXBkYXRlTGVmdEZhY2UoZWRnZXMsIGUgKiA0LCBzLCB0LCBuZmFjZXMpOyAvLyBBZGQgbmV3IGVkZ2Ugb3IgdXBkYXRlIGZhY2UgaW5mbyBvZiBvbGQgZWRnZS4NCg0KICAgICAgICAgICAgZSA9IGZpbmRFZGdlKGVkZ2VzLCBwdCwgcyk7DQogICAgICAgICAgICBpZiAoZSA9PSBFVl9VTkRFRikgYWRkRWRnZShjdHgsIGVkZ2VzLCBtYXhFZGdlcywgcHQsIHMsIG5mYWNlcywgRVZfVU5ERUYpO2Vsc2UgdXBkYXRlTGVmdEZhY2UoZWRnZXMsIGUgKiA0LCBwdCwgcywgbmZhY2VzKTsgLy8gQWRkIG5ldyBlZGdlIG9yIHVwZGF0ZSBmYWNlIGluZm8gb2Ygb2xkIGVkZ2UuDQoNCiAgICAgICAgICAgIGUgPSBmaW5kRWRnZShlZGdlcywgdCwgcHQpOw0KICAgICAgICAgICAgaWYgKGUgPT0gRVZfVU5ERUYpIGFkZEVkZ2UoY3R4LCBlZGdlcywgbWF4RWRnZXMsIHQsIHB0LCBuZmFjZXMsIEVWX1VOREVGKTtlbHNlIHVwZGF0ZUxlZnRGYWNlKGVkZ2VzLCBlICogNCwgdCwgcHQsIG5mYWNlcyk7DQogICAgICAgICAgICBuZmFjZXMrKzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdXBkYXRlTGVmdEZhY2UoZWRnZXMsIGUgKiA0LCBzLCB0LCBFVl9IVUxMKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbmZhY2VzOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImRlbGF1bmF5SHVsbCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxhdW5heUh1bGwoY3R4LCBucHRzLCBwdHMsIG5odWxsLCBodWxsLCB0cmlzKSB7DQogICAgICAgICAgdmFyIG5mYWNlcyA9IDA7DQogICAgICAgICAgdmFyIG1heEVkZ2VzID0gbnB0cyAqIDEwOw0KICAgICAgICAgIHZhciBlZGdlcyA9IG5ldyBBcnJheSg2NCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IG5odWxsIC0gMTsgaSA8IG5odWxsOyBqID0gaSsrKSB7DQogICAgICAgICAgICBhZGRFZGdlKGN0eCwgZWRnZXMsIG1heEVkZ2VzLCBodWxsW2pdLCBodWxsW2ldLCBFVl9IVUxMLCBFVl9VTkRFRik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGN1cnJlbnRFZGdlID0gMDsNCg0KICAgICAgICAgIHdoaWxlIChjdXJyZW50RWRnZSA8IGVkZ2VzLmxlbmd0aCAvIDQpIHsNCiAgICAgICAgICAgIGlmIChlZGdlc1tjdXJyZW50RWRnZSAqIDQgKyAyXSA9PSBFVl9VTkRFRikgew0KICAgICAgICAgICAgICBuZmFjZXMgPSBjb21wbGV0ZUZhY2V0KGN0eCwgcHRzLCBucHRzLCBlZGdlcywgbWF4RWRnZXMsIG5mYWNlcywgY3VycmVudEVkZ2UpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoZWRnZXNbY3VycmVudEVkZ2UgKiA0ICsgM10gPT0gRVZfVU5ERUYpIHsNCiAgICAgICAgICAgICAgbmZhY2VzID0gY29tcGxldGVGYWNldChjdHgsIHB0cywgbnB0cywgZWRnZXMsIG1heEVkZ2VzLCBuZmFjZXMsIGN1cnJlbnRFZGdlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY3VycmVudEVkZ2UrKzsNCiAgICAgICAgICB9IC8vIENyZWF0ZSB0cmlzDQoNCg0KICAgICAgICAgIHRyaXMgPSBbXTsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IG5mYWNlcyAqIDQ7ICsrX2kzKSB7DQogICAgICAgICAgICB0cmlzLnB1c2goLTEpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IGVkZ2VzLmxlbmd0aCAvIDQ7ICsrX2k0KSB7DQogICAgICAgICAgICB2YXIgZSA9IF9pNCAqIDQ7DQoNCiAgICAgICAgICAgIGlmIChlZGdlc1tlICsgM10gPj0gMCkgew0KICAgICAgICAgICAgICAvLyBMZWZ0IGZhY2UNCiAgICAgICAgICAgICAgdmFyIHQgPSBlZGdlc1tlICsgM10gKiA0Ow0KDQogICAgICAgICAgICAgIGlmICh0cmlzW3QgKyAwXSA9PSAtMSkgew0KICAgICAgICAgICAgICAgIHRyaXMuc2V0KHQgKyAwLCBlZGdlc1tlICsgMF0pOw0KICAgICAgICAgICAgICAgIHRyaXMuc2V0KHQgKyAxLCBlZGdlc1tlICsgMV0pOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyaXNbdCArIDBdID09IGVkZ2VzW2UgKyAxXSkgdHJpcy5zZXQodCArIDIsIGVkZ2VzW2UgKyAwXSk7ZWxzZSBpZiAodHJpc1t0ICsgMV0gPT0gZWRnZXNbZSArIDBdKSB0cmlzLnNldCh0ICsgMiwgZWRnZXNbZSArIDFdKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGVkZ2VzW2UgKyAyXSA+PSAwKSB7DQogICAgICAgICAgICAgIC8vIFJpZ2h0DQogICAgICAgICAgICAgIHZhciBfdCA9IGVkZ2VzW2UgKyAyXSAqIDQ7DQoNCiAgICAgICAgICAgICAgaWYgKHRyaXNbX3QgKyAwXSA9PSAtMSkgew0KICAgICAgICAgICAgICAgIHRyaXMuc2V0KF90ICsgMCwgZWRnZXNbZSArIDFdKTsNCiAgICAgICAgICAgICAgICB0cmlzLnNldChfdCArIDEsIGVkZ2VzW2UgKyAwXSk7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJpc1tfdCArIDBdID09IGVkZ2VzW2UgKyAwXSkgdHJpcy5zZXQoX3QgKyAyLCBlZGdlc1tlICsgMV0pO2Vsc2UgaWYgKHRyaXNbX3QgKyAxXSA9PSBlZGdlc1tlICsgMV0pIHRyaXMuc2V0KF90ICsgMiwgZWRnZXNbZSArIDBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCB0cmlzLmxlbmd0aCAvIDQ7ICsrX2k1KSB7DQogICAgICAgICAgICB2YXIgX3QyID0gX2k1ICogNDsNCg0KICAgICAgICAgICAgaWYgKHRyaXNbX3QyICsgMF0gPT0gLTEgfHwgdHJpc1tfdDIgKyAxXSA9PSAtMSB8fCB0cmlzW190MiArIDJdID09IC0xKSB7DQogICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbigiRGFuZ2xpbmchICIgKyB0cmlzW190Ml0gKyAiICIgKyB0cmlzW190MiArIDFdICsgIiAgIiArIHRyaXNbX3QyICsgMl0pOyAvL2N0eC5sb2coUkNfTE9HX1dBUk5JTkcsICJkZWxhdW5heUh1bGw6IFJlbW92aW5nIGRhbmdsaW5nIGZhY2UgJWQgWyVkLCVkLCVkXS4iLCBpLCB0WzBdLHRbMV0sdFsyXSk7DQoNCiAgICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMCwgdHJpc1t0cmlzLmxlbmd0aCAtIDRdKTsNCiAgICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMSwgdHJpc1t0cmlzLmxlbmd0aCAtIDNdKTsNCiAgICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMiwgdHJpc1t0cmlzLmxlbmd0aCAtIDJdKTsNCiAgICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMywgdHJpc1t0cmlzLmxlbmd0aCAtIDFdKTsNCiAgICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTsNCiAgICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTsNCiAgICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTsNCiAgICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTsNCiAgICAgICAgICAgICAgLS1faTU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9IC8vIENhbGN1bGF0ZSBtaW5pbXVtIGV4dGVuZCBvZiB0aGUgcG9seWdvbi4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJwb2x5TWluRXh0ZW50IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBvbHlNaW5FeHRlbnQodmVydHMsIG52ZXJ0cykgew0KICAgICAgICAgIHZhciBtaW5EaXN0ID0gTnVtYmVyLk1BWF9WQUxVRTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnZlcnRzOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBuaSA9IChpICsgMSkgJSBudmVydHM7DQogICAgICAgICAgICB2YXIgcDEgPSBpICogMzsNCiAgICAgICAgICAgIHZhciBwMiA9IG5pICogMzsNCiAgICAgICAgICAgIHZhciBtYXhFZGdlRGlzdCA9IDA7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnZlcnRzOyBqKyspIHsNCiAgICAgICAgICAgICAgaWYgKGogPT0gaSB8fCBqID09IG5pKSBjb250aW51ZTsNCg0KICAgICAgICAgICAgICB2YXIgX2QyID0gUmVjYXN0TWVzaERldGFpbC5kaXN0YW5jZVB0U2VnMmQodmVydHMsIGogKiAzLCB2ZXJ0cywgcDEsIHAyKTsNCg0KICAgICAgICAgICAgICBtYXhFZGdlRGlzdCA9IE1hdGgubWF4KG1heEVkZ2VEaXN0LCBfZDIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBtaW5EaXN0ID0gTWF0aC5taW4obWluRGlzdCwgbWF4RWRnZURpc3QpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQobWluRGlzdCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidHJpYW5ndWxhdGVIdWxsIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWFuZ3VsYXRlSHVsbChudmVydHMsIHZlcnRzLCBuaHVsbCwgaHVsbCwgdHJpcykgew0KICAgICAgICAgIHZhciBzdGFydCA9IDAsDQogICAgICAgICAgICAgIGxlZnQgPSAxLA0KICAgICAgICAgICAgICByaWdodCA9IG5odWxsIC0gMTsgLy8gU3RhcnQgZnJvbSBhbiBlYXIgd2l0aCBzaG9ydGVzdCBwZXJpbWV0ZXIuDQogICAgICAgICAgLy8gVGhpcyB0ZW5kcyB0byBmYXZvciB3ZWxsIGZvcm1lZCB0cmlhbmdsZXMgYXMgc3RhcnRpbmcgcG9pbnQuDQoNCiAgICAgICAgICB2YXIgZG1pbiA9IDA7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5odWxsOyBpKyspIHsNCiAgICAgICAgICAgIHZhciBwaSA9IFJlY2FzdE1lc2gucHJldihpLCBuaHVsbCk7DQogICAgICAgICAgICB2YXIgbmkgPSBSZWNhc3RNZXNoLm5leHQoaSwgbmh1bGwpOw0KICAgICAgICAgICAgdmFyIHB2ID0gaHVsbFtwaV0gKiAzOw0KICAgICAgICAgICAgdmFyIGN2ID0gaHVsbFtpXSAqIDM7DQogICAgICAgICAgICB2YXIgbnYgPSBodWxsW25pXSAqIDM7DQoNCiAgICAgICAgICAgIHZhciBfZDMgPSBSZWNhc3RNZXNoRGV0YWlsLnZkaXN0Mih2ZXJ0cywgcHYsIGN2KSArIFJlY2FzdE1lc2hEZXRhaWwudmRpc3QyKHZlcnRzLCBjdiwgbnYpICsgUmVjYXN0TWVzaERldGFpbC52ZGlzdDIodmVydHMsIG52LCBwdik7DQoNCiAgICAgICAgICAgIGlmIChfZDMgPCBkbWluKSB7DQogICAgICAgICAgICAgIHN0YXJ0ID0gaTsNCiAgICAgICAgICAgICAgbGVmdCA9IG5pOw0KICAgICAgICAgICAgICByaWdodCA9IHBpOw0KICAgICAgICAgICAgICBkbWluID0gX2QzOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gQWRkIGZpcnN0IHRyaWFuZ2xlDQoNCg0KICAgICAgICAgIHRyaXMucHVzaChodWxsW3N0YXJ0XSk7DQogICAgICAgICAgdHJpcy5wdXNoKGh1bGxbbGVmdF0pOw0KICAgICAgICAgIHRyaXMucHVzaChodWxsW3JpZ2h0XSk7DQogICAgICAgICAgdHJpcy5wdXNoKDApOyAvLyBUcmlhbmd1bGF0ZSB0aGUgcG9seWdvbiBieSBtb3ZpbmcgbGVmdCBvciByaWdodCwNCiAgICAgICAgICAvLyBkZXBlbmRpbmcgb24gd2hpY2ggdHJpYW5nbGUgaGFzIHNob3J0ZXIgcGVyaW1ldGVyLg0KICAgICAgICAgIC8vIFRoaXMgaGV1cmlzdGljIHdhcyBjaG9zZSBlbXByaWNhbGx5LCBzaW5jZSBpdCBzZWVtcw0KICAgICAgICAgIC8vIGhhbmRsZSB0ZXNzZWxhdGVkIHN0cmFpZ2h0IGVkZ2VzIHdlbGwuDQoNCiAgICAgICAgICB3aGlsZSAoUmVjYXN0TWVzaC5uZXh0KGxlZnQsIG5odWxsKSAhPSByaWdodCkgew0KICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHNlIHNob3VsZCBhZHZhbmNlIGxlZnQgb3IgcmlnaHQuDQogICAgICAgICAgICB2YXIgbmxlZnQgPSBSZWNhc3RNZXNoLm5leHQobGVmdCwgbmh1bGwpOw0KICAgICAgICAgICAgdmFyIG5yaWdodCA9IFJlY2FzdE1lc2gucHJldihyaWdodCwgbmh1bGwpOw0KICAgICAgICAgICAgdmFyIGN2bGVmdCA9IGh1bGxbbGVmdF0gKiAzOw0KICAgICAgICAgICAgdmFyIG52bGVmdCA9IGh1bGxbbmxlZnRdICogMzsNCiAgICAgICAgICAgIHZhciBjdnJpZ2h0ID0gaHVsbFtyaWdodF0gKiAzOw0KICAgICAgICAgICAgdmFyIG52cmlnaHQgPSBodWxsW25yaWdodF0gKiAzOw0KICAgICAgICAgICAgdmFyIGRsZWZ0ID0gUmVjYXN0TWVzaERldGFpbC52ZGlzdDIodmVydHMsIGN2bGVmdCwgbnZsZWZ0KSArIFJlY2FzdE1lc2hEZXRhaWwudmRpc3QyKHZlcnRzLCBudmxlZnQsIGN2cmlnaHQpOw0KICAgICAgICAgICAgdmFyIGRyaWdodCA9IFJlY2FzdE1lc2hEZXRhaWwudmRpc3QyKHZlcnRzLCBjdnJpZ2h0LCBudnJpZ2h0KSArIFJlY2FzdE1lc2hEZXRhaWwudmRpc3QyKHZlcnRzLCBjdmxlZnQsIG52cmlnaHQpOw0KDQogICAgICAgICAgICBpZiAoZGxlZnQgPCBkcmlnaHQpIHsNCiAgICAgICAgICAgICAgdHJpcy5wdXNoKGh1bGxbbGVmdF0pOw0KICAgICAgICAgICAgICB0cmlzLnB1c2goaHVsbFtubGVmdF0pOw0KICAgICAgICAgICAgICB0cmlzLnB1c2goaHVsbFtyaWdodF0pOw0KICAgICAgICAgICAgICB0cmlzLnB1c2goMCk7DQogICAgICAgICAgICAgIGxlZnQgPSBubGVmdDsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRyaXMucHVzaChodWxsW2xlZnRdKTsNCiAgICAgICAgICAgICAgdHJpcy5wdXNoKGh1bGxbbnJpZ2h0XSk7DQogICAgICAgICAgICAgIHRyaXMucHVzaChodWxsW3JpZ2h0XSk7DQogICAgICAgICAgICAgIHRyaXMucHVzaCgwKTsNCiAgICAgICAgICAgICAgcmlnaHQgPSBucmlnaHQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEppdHRlclgiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Sml0dGVyWChpKSB7DQogICAgICAgICAgcmV0dXJuIChpICogMHg4ZGE2YjM0MyAmIDB4ZmZmZikgLyA2NTUzNS4wICogMi4wIC0gMS4wOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEppdHRlclkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Sml0dGVyWShpKSB7DQogICAgICAgICAgcmV0dXJuIChpICogMHhkODE2Mzg0MSAmIDB4ZmZmZikgLyA2NTUzNS4wICogMi4wIC0gMS4wOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImJ1aWxkUG9seURldGFpbCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFBvbHlEZXRhaWwoY3R4LCBfaW4sIG5pbiwgc2FtcGxlRGlzdCwgc2FtcGxlTWF4RXJyb3IsIGhlaWdodFNlYXJjaFJhZGl1cywgY2hmLCBocCwgdmVydHMsIHRyaXMpIHsNCiAgICAgICAgICB2YXIgc2FtcGxlcyA9IFtdOw0KICAgICAgICAgIHZhciBudmVydHMgPSAwOw0KICAgICAgICAgIHZhciBlZGdlID0gbmV3IEFycmF5KChSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUU19QRVJfRURHRSArIDEpICogMyk7DQogICAgICAgICAgdmFyIGh1bGwgPSBuZXcgQXJyYXkoUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFMpOw0KICAgICAgICAgIHZhciBuaHVsbCA9IDA7DQogICAgICAgICAgbnZlcnRzID0gbmluOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuaW47ICsraSkgew0KICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KHZlcnRzLCBpICogMywgX2luLCBpICogMyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdHJpcyA9IFtdOw0KICAgICAgICAgIHZhciBjcyA9IGNoZi5jczsNCiAgICAgICAgICB2YXIgaWNzID0gMS4wIC8gY3M7IC8vIENhbGN1bGF0ZSBtaW5pbXVtIGV4dGVudHMgb2YgdGhlIHBvbHlnb24gYmFzZWQgb24gaW5wdXQgZGF0YS4NCg0KICAgICAgICAgIHZhciBtaW5FeHRlbnQgPSBSZWNhc3RNZXNoRGV0YWlsLnBvbHlNaW5FeHRlbnQodmVydHMsIG52ZXJ0cyk7IC8vIFRlc3NlbGxhdGUgb3V0bGluZXMuDQogICAgICAgICAgLy8gVGhpcyBpcyBkb25lIF9pbiBzZXBhcmF0ZSBwYXNzIF9pbiBvcmRlciB0byBlbnN1cmUNCiAgICAgICAgICAvLyBzZWFtbGVzcyBoZWlnaHQgdmFsdWVzIGFjcm9zcyB0aGUgcGx5IGJvdW5kYXJpZXMuDQoNCiAgICAgICAgICBpZiAoc2FtcGxlRGlzdCA+IDApIHsNCiAgICAgICAgICAgIGZvciAodmFyIF9pNiA9IDAsIGogPSBuaW4gLSAxOyBfaTYgPCBuaW47IGogPSBfaTYrKykgew0KICAgICAgICAgICAgICB2YXIgdmogPSBqICogMzsNCiAgICAgICAgICAgICAgdmFyIHZpID0gX2k2ICogMzsNCiAgICAgICAgICAgICAgdmFyIHN3YXBwZWQgPSBmYWxzZTsgLy8gTWFrZSBzdXJlIHRoZSBzZWdtZW50cyBhcmUgYWx3YXlzIGhhbmRsZWQgX2luIHNhbWUgb3JkZXINCiAgICAgICAgICAgICAgLy8gdXNpbmcgbGV4b2xvZ2ljYWwgc29ydCBvciBlbHNlIHRoZXJlIHdpbGwgYmUgc2VhbXMuDQoNCiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKF9pblt2aiArIDBdIC0gX2luW3ZpICsgMF0pIDwgMWUtNikgew0KICAgICAgICAgICAgICAgIGlmIChfaW5bdmogKyAyXSA+IF9pblt2aSArIDJdKSB7DQogICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHZpOw0KICAgICAgICAgICAgICAgICAgdmkgPSB2ajsNCiAgICAgICAgICAgICAgICAgIHZqID0gdGVtcDsNCiAgICAgICAgICAgICAgICAgIHN3YXBwZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAoX2luW3ZqICsgMF0gPiBfaW5bdmkgKyAwXSkgew0KICAgICAgICAgICAgICAgICAgdmFyIF90ZW1wID0gdmk7DQogICAgICAgICAgICAgICAgICB2aSA9IHZqOw0KICAgICAgICAgICAgICAgICAgdmogPSBfdGVtcDsNCiAgICAgICAgICAgICAgICAgIHN3YXBwZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSAvLyBDcmVhdGUgc2FtcGxlcyBhbGV0IHRoZSBlZGdlLg0KDQoNCiAgICAgICAgICAgICAgdmFyIF9keDIgPSBfaW5bdmkgKyAwXSAtIF9pblt2aiArIDBdOw0KDQogICAgICAgICAgICAgIHZhciBfZHkgPSBfaW5bdmkgKyAxXSAtIF9pblt2aiArIDFdOw0KDQogICAgICAgICAgICAgIHZhciBkeiA9IF9pblt2aSArIDJdIC0gX2luW3ZqICsgMl07DQoNCiAgICAgICAgICAgICAgdmFyIF9kNCA9IE1hdGguc3FydChfZHgyICogX2R4MiArIGR6ICogZHopOw0KDQogICAgICAgICAgICAgIHZhciBubiA9IDEgKyBNYXRoLmZsb29yKF9kNCAvIHNhbXBsZURpc3QpOw0KICAgICAgICAgICAgICBpZiAobm4gPj0gUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFNfUEVSX0VER0UpIG5uID0gUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFNfUEVSX0VER0UgLSAxOw0KICAgICAgICAgICAgICBpZiAobnZlcnRzICsgbm4gPj0gUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFMpIG5uID0gUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFMgLSAxIC0gbnZlcnRzOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDw9IG5uOyArK2spIHsNCiAgICAgICAgICAgICAgICB2YXIgdSA9IGsgLyBubjsNCiAgICAgICAgICAgICAgICB2YXIgcG9zID0gayAqIDM7DQogICAgICAgICAgICAgICAgZWRnZVtwb3MgKyAwXSA9IF9pblt2aiArIDBdICsgX2R4MiAqIHU7DQogICAgICAgICAgICAgICAgZWRnZVtwb3MgKyAxXSA9IF9pblt2aiArIDFdICsgX2R5ICogdTsNCiAgICAgICAgICAgICAgICBlZGdlW3BvcyArIDJdID0gX2luW3ZqICsgMl0gKyBkeiAqIHU7DQogICAgICAgICAgICAgICAgZWRnZVtwb3MgKyAxXSA9IFJlY2FzdE1lc2hEZXRhaWwuZ2V0SGVpZ2h0KGVkZ2VbcG9zICsgMF0sIGVkZ2VbcG9zICsgMV0sIGVkZ2VbcG9zICsgMl0sIGNzLCBpY3MsIGNoZi5jaCwgaGVpZ2h0U2VhcmNoUmFkaXVzLCBocCkgKiBjaGYuY2g7DQogICAgICAgICAgICAgIH0gLy8gU2ltcGxpZnkgc2FtcGxlcy4NCg0KDQogICAgICAgICAgICAgIHZhciBpZHggPSBuZXcgQXJyYXkoUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFNfUEVSX0VER0UpOw0KICAgICAgICAgICAgICBpZHhbMF0gPSAwOw0KICAgICAgICAgICAgICBpZHhbMV0gPSBubjsNCiAgICAgICAgICAgICAgdmFyIG5pZHggPSAyOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9rMiA9IDA7IF9rMiA8IG5pZHggLSAxOykgew0KICAgICAgICAgICAgICAgIHZhciBhID0gaWR4W19rMl07DQogICAgICAgICAgICAgICAgdmFyIGIgPSBpZHhbX2syICsgMV07DQogICAgICAgICAgICAgICAgdmFyIHZhID0gYSAqIDM7DQogICAgICAgICAgICAgICAgdmFyIHZiID0gYiAqIDM7IC8vIEZpbmQgbWF4aW11bSBkZXZpYXRpb24gYWxldCB0aGUgc2VnbWVudC4NCg0KICAgICAgICAgICAgICAgIHZhciBtYXhkID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgbWF4aSA9IC0xOw0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IGEgKyAxOyBtIDwgYjsgKyttKSB7DQogICAgICAgICAgICAgICAgICB2YXIgZGV2ID0gUmVjYXN0TWVzaERldGFpbC5kaXN0YW5jZVB0U2VnKGVkZ2UsIG0gKiAzLCB2YSwgdmIpOw0KDQogICAgICAgICAgICAgICAgICBpZiAoZGV2ID4gbWF4ZCkgew0KICAgICAgICAgICAgICAgICAgICBtYXhkID0gZGV2Ow0KICAgICAgICAgICAgICAgICAgICBtYXhpID0gbTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IC8vIElmIHRoZSBtYXggZGV2aWF0aW9uIGlzIGxhcmdlciB0aGFuIGFjY2VwdGVkIGVycm9yLA0KICAgICAgICAgICAgICAgIC8vIGFkZCBuZXcgcG9pbnQsIGVsc2UgY29udGludWUgdG8gbmV4dCBzZWdtZW50Lg0KDQoNCiAgICAgICAgICAgICAgICBpZiAobWF4aSAhPSAtMSAmJiBtYXhkID4gc2FtcGxlTWF4RXJyb3IgKiBzYW1wbGVNYXhFcnJvcikgew0KICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX20gPSBuaWR4OyBfbSA+IF9rMjsgLS1fbSkgew0KICAgICAgICAgICAgICAgICAgICBpZHhbX21dID0gaWR4W19tIC0gMV07DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGlkeFtfazIgKyAxXSA9IG1heGk7DQogICAgICAgICAgICAgICAgICBuaWR4Kys7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICsrX2syOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGh1bGxbbmh1bGwrK10gPSBqOyAvLyBBZGQgbmV3IHZlcnRpY2VzLg0KDQogICAgICAgICAgICAgIGlmIChzd2FwcGVkKSB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgX2szID0gbmlkeCAtIDI7IF9rMyA+IDA7IC0tX2szKSB7DQogICAgICAgICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weSh2ZXJ0cywgbnZlcnRzICogMywgZWRnZSwgaWR4W19rM10gKiAzKTsNCiAgICAgICAgICAgICAgICAgIGh1bGxbbmh1bGwrK10gPSBudmVydHM7DQogICAgICAgICAgICAgICAgICBudmVydHMrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgX2s0ID0gMTsgX2s0IDwgbmlkeCAtIDE7ICsrX2s0KSB7DQogICAgICAgICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weSh2ZXJ0cywgbnZlcnRzICogMywgZWRnZSwgaWR4W19rNF0gKiAzKTsNCiAgICAgICAgICAgICAgICAgIGh1bGxbbmh1bGwrK10gPSBudmVydHM7DQogICAgICAgICAgICAgICAgICBudmVydHMrKzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIElmIHRoZSBwb2x5Z29uIG1pbmltdW0gZXh0ZW50IGlzIHNtYWxsIChzbGl2ZXIgb3Igc21hbGwgdHJpYW5nbGUpLCBkbyBub3QgdHJ5IHRvIGFkZCBpbnRlcm5hbCBwb2ludHMuDQoNCg0KICAgICAgICAgIGlmIChtaW5FeHRlbnQgPCBzYW1wbGVEaXN0ICogMikgew0KICAgICAgICAgICAgUmVjYXN0TWVzaERldGFpbC50cmlhbmd1bGF0ZUh1bGwobnZlcnRzLCB2ZXJ0cywgbmh1bGwsIGh1bGwsIHRyaXMpOw0KICAgICAgICAgICAgcmV0dXJuIFtudmVydHMsIHRyaXNdOw0KICAgICAgICAgIH0gLy8gVGVzc2VsbGF0ZSB0aGUgYmFzZSBtZXNoLg0KICAgICAgICAgIC8vIFdlJ3JlIHVzaW5nIHRoZSB0cmlhbmd1bGF0ZUh1bGwgaW5zdGVhZCBvZiBkZWxhdW5heUh1bGwgYXMgaXQgdGVuZHMgdG8NCiAgICAgICAgICAvLyBjcmVhdGUgYSBiaXQgYmV0dGVyIHRyaWFuZ3VsYXRpb24gZm9yIGxldCB0aGluIHRyaWFuZ2xlcyB3aGVuIHRoZXJlDQogICAgICAgICAgLy8gYXJlIG5vIGludGVybmFsIHBvaW50cy4NCg0KDQogICAgICAgICAgUmVjYXN0TWVzaERldGFpbC50cmlhbmd1bGF0ZUh1bGwobnZlcnRzLCB2ZXJ0cywgbmh1bGwsIGh1bGwsIHRyaXMpOw0KDQogICAgICAgICAgaWYgKHRyaXMubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIC8vIENvdWxkIG5vdCB0cmlhbmd1bGF0ZSB0aGUgcG9seSwgbWFrZSBzdXJlIHRoZXJlIGlzIHNvbWUgdmFsaWQgZGF0YSB0aGVyZS4NCiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKCJidWlsZFBvbHlEZXRhaWw6IENvdWxkIG5vdCB0cmlhbmd1bGF0ZSBwb2x5Z29uICgiICsgbnZlcnRzICsgIikgdmVydHMpLiIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChzYW1wbGVEaXN0ID4gMCkgew0KICAgICAgICAgICAgLy8gQ3JlYXRlIHNhbXBsZSBsb2NhdGlvbnMgX2luIGEgZ3JpZC4NCiAgICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgdmFyIGJtYXggPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTMoYm1pbiwgX2luLCAwKTsNCiAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5MyhibWF4LCBfaW4sIDApOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTcgPSAxOyBfaTcgPCBuaW47ICsrX2k3KSB7DQogICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5taW4oYm1pbiwgX2luLCBfaTcgKiAzKTsNCiAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1heChibWF4LCBfaW4sIF9pNyAqIDMpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgeDAgPSBNYXRoLmZsb29yKGJtaW5bMF0gLyBzYW1wbGVEaXN0KTsNCiAgICAgICAgICAgIHZhciB4MSA9IE1hdGguY2VpbChibWF4WzBdIC8gc2FtcGxlRGlzdCk7DQogICAgICAgICAgICB2YXIgejAgPSBNYXRoLmZsb29yKGJtaW5bMl0gLyBzYW1wbGVEaXN0KTsNCiAgICAgICAgICAgIHZhciB6MSA9IE1hdGguY2VpbChibWF4WzJdIC8gc2FtcGxlRGlzdCk7DQogICAgICAgICAgICBzYW1wbGVzID0gW107DQoNCiAgICAgICAgICAgIGZvciAodmFyIHogPSB6MDsgeiA8IHoxOyArK3opIHsNCiAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IHgwOyB4IDwgeDE7ICsreCkgew0KICAgICAgICAgICAgICAgIHZhciBwdCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgICAgICBwdFswXSA9IHggKiBzYW1wbGVEaXN0Ow0KICAgICAgICAgICAgICAgIHB0WzFdID0gKGJtYXhbMV0gKyBibWluWzFdKSAqIDAuNTsNCiAgICAgICAgICAgICAgICBwdFsyXSA9IHogKiBzYW1wbGVEaXN0OyAvLyBNYWtlIHN1cmUgdGhlIHNhbXBsZXMgYXJlIG5vdCB0b28gY2xvc2UgdG8gdGhlIGVkZ2VzLg0KDQogICAgICAgICAgICAgICAgaWYgKFJlY2FzdE1lc2hEZXRhaWwuZGlzdFRvUG9seShuaW4sIF9pbiwgcHQpID4gLXNhbXBsZURpc3QgLyAyKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goeCk7DQogICAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKFJlY2FzdE1lc2hEZXRhaWwuZ2V0SGVpZ2h0KHB0WzBdLCBwdFsxXSwgcHRbMl0sIGNzLCBpY3MsIGNoZi5jaCwgaGVpZ2h0U2VhcmNoUmFkaXVzLCBocCkpOw0KICAgICAgICAgICAgICAgIHNhbXBsZXMucHVzaCh6KTsNCiAgICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goMCk7IC8vIE5vdCBhZGRlZA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIEFkZCB0aGUgc2FtcGxlcyBzdGFydGluZyBmcm9tIHRoZSBvbmUgdGhhdCBoYXMgdGhlIG1vc3QNCiAgICAgICAgICAgIC8vIGVycm9yLiBUaGUgcHJvY2VkdXJlIHN0b3BzIHdoZW4gYWxsIHNhbXBsZXMgYXJlIGFkZGVkDQogICAgICAgICAgICAvLyBvciB3aGVuIHRoZSBtYXggZXJyb3IgaXMgd2l0aGluIHRyZXNob2xkLg0KDQoNCiAgICAgICAgICAgIHZhciBuc2FtcGxlcyA9IHNhbXBsZXMubGVuZ3RoIC8gNDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaXRlciA9IDA7IGl0ZXIgPCBuc2FtcGxlczsgKytpdGVyKSB7DQogICAgICAgICAgICAgIGlmIChudmVydHMgPj0gUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFMpIGJyZWFrOyAvLyBGaW5kIHNhbXBsZSB3aXRoIG1vc3QgZXJyb3IuDQoNCiAgICAgICAgICAgICAgdmFyIGJlc3RwdCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgICAgdmFyIGJlc3RkID0gMDsNCiAgICAgICAgICAgICAgdmFyIGJlc3RpID0gLTE7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2k4ID0gMDsgX2k4IDwgbnNhbXBsZXM7ICsrX2k4KSB7DQogICAgICAgICAgICAgICAgdmFyIHMgPSBfaTggKiA0Ow0KICAgICAgICAgICAgICAgIGlmIChzYW1wbGVzW3MgKyAzXSAhPSAwKSBjb250aW51ZTsgLy8gc2tpcCBhZGRlZC4NCg0KICAgICAgICAgICAgICAgIHZhciBfcHQgPSBuZXcgQXJyYXkoMyk7IC8vIFRoZSBzYW1wbGUgbG9jYXRpb24gaXMgaml0dGVyZWQgdG8gZ2V0IHJpZCBvZiBzb21lIGJhZCB0cmlhbmd1bGF0aW9ucw0KICAgICAgICAgICAgICAgIC8vIHdoaWNoIGFyZSBjYXVzZSBieSBzeW1tZXRyaWNhbCBkYXRhIGZyb20gdGhlIGdyaWQgc3RydWN0dXJlLg0KDQoNCiAgICAgICAgICAgICAgICBfcHRbMF0gPSBzYW1wbGVzW3MgKyAwXSAqIHNhbXBsZURpc3QgKyBSZWNhc3RNZXNoRGV0YWlsLmdldEppdHRlclgoX2k4KSAqIGNzICogMC4xOw0KICAgICAgICAgICAgICAgIF9wdFsxXSA9IHNhbXBsZXNbcyArIDFdICogY2hmLmNoOw0KICAgICAgICAgICAgICAgIF9wdFsyXSA9IHNhbXBsZXNbcyArIDJdICogc2FtcGxlRGlzdCArIFJlY2FzdE1lc2hEZXRhaWwuZ2V0Sml0dGVyWShfaTgpICogY3MgKiAwLjE7DQoNCiAgICAgICAgICAgICAgICB2YXIgX2Q1ID0gUmVjYXN0TWVzaERldGFpbC5kaXN0VG9UcmlNZXNoKF9wdCwgdmVydHMsIG52ZXJ0cywgdHJpcywgdHJpcy5sZW5ndGggLyA0KTsNCg0KICAgICAgICAgICAgICAgIGlmIChfZDUgPCAwKSBjb250aW51ZTsgLy8gZGlkIG5vdCBoaXQgdGhlIG1lc2guDQoNCiAgICAgICAgICAgICAgICBpZiAoX2Q1ID4gYmVzdGQpIHsNCiAgICAgICAgICAgICAgICAgIGJlc3RkID0gX2Q1Ow0KICAgICAgICAgICAgICAgICAgYmVzdGkgPSBfaTg7DQogICAgICAgICAgICAgICAgICBiZXN0cHQgPSBfcHQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IC8vIElmIHRoZSBtYXggZXJyb3IgaXMgd2l0aGluIGFjY2VwdGVkIHRocmVzaG9sZCwgc3RvcCB0ZXNzZWxhdGluZy4NCg0KDQogICAgICAgICAgICAgIGlmIChiZXN0ZCA8PSBzYW1wbGVNYXhFcnJvciB8fCBiZXN0aSA9PSAtMSkgYnJlYWs7IC8vIE1hcmsgc2FtcGxlIGFzIGFkZGVkLg0KDQogICAgICAgICAgICAgIHNhbXBsZXMuc2V0KGJlc3RpICogNCArIDMsIDEpOyAvLyBBZGQgdGhlIG5ldyBzYW1wbGUgcG9pbnQuDQoNCiAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkodmVydHMsIG52ZXJ0cyAqIDMsIGJlc3RwdCwgMCk7DQogICAgICAgICAgICAgIG52ZXJ0cysrOyAvLyBDcmVhdGUgbmV3IHRyaWFuZ3VsYXRpb24uDQogICAgICAgICAgICAgIC8vIFRPRE86IEluY3JlbWVudGFsIGFkZCBpbnN0ZWFkIG9mIGZ1bGwgcmVidWlsZC4NCg0KICAgICAgICAgICAgICBkZWxhdW5heUh1bGwoY3R4LCBudmVydHMsIHZlcnRzLCBuaHVsbCwgaHVsbCwgdHJpcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIG50cmlzID0gdHJpcy5sZW5ndGggLyA0Ow0KDQogICAgICAgICAgaWYgKG50cmlzID4gUmVjYXN0TWVzaERldGFpbC5NQVhfVFJJUykgew0KICAgICAgICAgICAgdmFyIHN1Ykxpc3QgPSB0cmlzLnN1Ykxpc3QoMCwgUmVjYXN0TWVzaERldGFpbC5NQVhfVFJJUyAqIDQpOw0KICAgICAgICAgICAgdHJpcyA9IFtdOw0KICAgICAgICAgICAgdHJpcy5hZGRBbGwoc3ViTGlzdCk7DQogICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigicmNCdWlsZFBvbHlNZXNoRGV0YWlsOiBTaHJpbmtpbmcgdHJpYW5nbGUgY291bnQgZnJvbSAiICsgbnRyaXMgKyAiIHRvIG1heCAiICsgUmVjYXN0TWVzaERldGFpbC5NQVhfVFJJUyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIFtudmVydHMsIHRyaXNdOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInNlZWRBcnJheVdpdGhQb2x5Q2VudGVyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlZWRBcnJheVdpdGhQb2x5Q2VudGVyKGN0eCwgY2hmLCBtZXNocG9seSwgcG9seSwgbnBvbHksIHZlcnRzLCBicywgaHAsIGFycmF5KSB7DQogICAgICAgICAgLy8gTm90ZTogUmVhZHMgdG8gdGhlIGNvbXBhY3QgaGVpZ2h0ZmllbGQgYXJlIG9mZnNldCBieSBib3JkZXIgc2l6ZSAoYnMpDQogICAgICAgICAgLy8gc2luY2UgYm9yZGVyIHNpemUgb2Zmc2V0IGlzIGFscmVhZHkgcmVtb3ZlZCBmcm9tIHRoZSBwb2x5bWVzaCB2ZXJ0aWNlcy4NCiAgICAgICAgICB2YXIgb2Zmc2V0ID0gWzAsIDAsIC0xLCAtMSwgMCwgLTEsIDEsIC0xLCAxLCAwLCAxLCAxLCAwLCAxLCAtMSwgMSwgLTEsIDBdOyAvLyBGaW5kIGNlbGwgY2xvc2VzdCB0byBhIGxldCB2ZXJ0ZXgNCg0KICAgICAgICAgIHZhciBzdGFydENlbGxYID0gMCwNCiAgICAgICAgICAgICAgc3RhcnRDZWxsWSA9IDAsDQogICAgICAgICAgICAgIHN0YXJ0U3BhbkluZGV4ID0gLTE7DQogICAgICAgICAgdmFyIGRtaW4gPSBSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVDsNCg0KICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnBvbHkgJiYgZG1pbiA+IDA7ICsraikgew0KICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCA5ICYmIGRtaW4gPiAwOyArK2spIHsNCiAgICAgICAgICAgICAgdmFyIGF4ID0gdmVydHNbbWVzaHBvbHlbcG9seSArIGpdICogMyArIDBdICsgb2Zmc2V0W2sgKiAyICsgMF07DQogICAgICAgICAgICAgIHZhciBheSA9IHZlcnRzW21lc2hwb2x5W3BvbHkgKyBqXSAqIDMgKyAxXTsNCiAgICAgICAgICAgICAgdmFyIGF6ID0gdmVydHNbbWVzaHBvbHlbcG9seSArIGpdICogMyArIDJdICsgb2Zmc2V0W2sgKiAyICsgMV07DQogICAgICAgICAgICAgIGlmIChheCA8IGhwLnhtaW4gfHwgYXggPj0gaHAueG1pbiArIGhwLndpZHRoIHx8IGF6IDwgaHAueW1pbiB8fCBheiA+PSBocC55bWluICsgaHAuaGVpZ2h0KSBjb250aW51ZTsNCiAgICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbYXggKyBicyArIChheiArIGJzKSAqIGNoZi53aWR0aF07DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IGkgPCBuaSAmJiBkbWluID4gMDsgKytpKSB7DQogICAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07DQoNCiAgICAgICAgICAgICAgICB2YXIgX2Q2ID0gTWF0aC5hYnMoYXkgLSBzLnkpOw0KDQogICAgICAgICAgICAgICAgaWYgKF9kNiA8IGRtaW4pIHsNCiAgICAgICAgICAgICAgICAgIHN0YXJ0Q2VsbFggPSBheDsNCiAgICAgICAgICAgICAgICAgIHN0YXJ0Q2VsbFkgPSBhejsNCiAgICAgICAgICAgICAgICAgIHN0YXJ0U3BhbkluZGV4ID0gaTsNCiAgICAgICAgICAgICAgICAgIGRtaW4gPSBfZDY7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBGaW5kIGNlbnRlciBvZiB0aGUgcG9seWdvbg0KDQoNCiAgICAgICAgICB2YXIgcGN4ID0gMCwNCiAgICAgICAgICAgICAgcGN5ID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIF9qMiA9IDA7IF9qMiA8IG5wb2x5OyArK19qMikgew0KICAgICAgICAgICAgcGN4ICs9IHZlcnRzW21lc2hwb2x5W3BvbHkgKyBfajJdICogMyArIDBdOw0KICAgICAgICAgICAgcGN5ICs9IHZlcnRzW21lc2hwb2x5W3BvbHkgKyBfajJdICogMyArIDJdOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHBjeCAvPSBucG9seTsNCiAgICAgICAgICBwY3kgLz0gbnBvbHk7DQogICAgICAgICAgYXJyYXkgPSBbXTsNCiAgICAgICAgICBhcnJheS5wdXNoKHN0YXJ0Q2VsbFgpOw0KICAgICAgICAgIGFycmF5LnB1c2goc3RhcnRDZWxsWSk7DQogICAgICAgICAgYXJyYXkucHVzaChzdGFydFNwYW5JbmRleCk7DQogICAgICAgICAgdmFyIGRpcnMgPSBbMCwgMSwgMiwgM107DQogICAgICAgICAgaHAuZGF0YS5maWxsKDAsIDAsIGhwLndpZHRoICogaHAuaGVpZ2h0KTsgLy8gREZTIHRvIG1vdmUgdG8gdGhlIGNlbnRlci4gTm90ZSB0aGF0IHdlIG5lZWQgYSBERlMgaGVyZSBhbmQgY2FuIG5vdCBqdXN0IG1vdmUNCiAgICAgICAgICAvLyBkaXJlY3RseSB0b3dhcmRzIHRoZSBjZW50ZXIgd2l0aG91dCByZWNvcmRpbmcgaW50ZXJtZWRpYXRlIG5vZGVzLCBldmVuIHRob3VnaCB0aGUgcG9seWdvbnMNCiAgICAgICAgICAvLyBhcmUgY29udmV4LiBJbiB2ZXJ5IHJhcmUgd2UgY2FuIGdldCBzdHVjayBkdWUgdG8gY29udG91ciBzaW1wbGlmaWNhdGlvbiBpZiB3ZSBkbyBub3QNCiAgICAgICAgICAvLyByZWNvcmQgbm9kZXMuDQoNCiAgICAgICAgICB2YXIgY3ggPSAtMSwNCiAgICAgICAgICAgICAgY3kgPSAtMSwNCiAgICAgICAgICAgICAgY2kgPSAtMTsNCg0KICAgICAgICAgIHdoaWxlICh0cnVlKSB7DQogICAgICAgICAgICBpZiAoYXJyYXkubGVuZ3RoIDwgMykgew0KICAgICAgICAgICAgICBjdHgud2FybigiV2FsayB0b3dhcmRzIHBvbHlnb24gY2VudGVyIGZhaWxlZCB0byByZWFjaCBjZW50ZXIiKTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNpID0gYXJyYXkuc3BsaWNlKGFycmF5Lmxlbmd0aCAtIDEsIDEpWzBdOw0KICAgICAgICAgICAgY3kgPSBhcnJheS5zcGxpY2UoYXJyYXkubGVuZ3RoIC0gMSwgMSlbMF07DQogICAgICAgICAgICBjeCA9IGFycmF5LnNwbGljZShhcnJheS5sZW5ndGggLSAxLCAxKVswXTsgLy8gQ2hlY2sgaWYgY2xvc2UgdG8gY2VudGVyIG9mIHRoZSBwb2x5Z29uLg0KDQogICAgICAgICAgICBpZiAoY3ggPT0gcGN4ICYmIGN5ID09IHBjeSkgew0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0gLy8gSWYgd2UgYXJlIGFscmVhZHkgYXQgdGhlIGNvcnJlY3QgWC1wb3NpdGlvbiwgcHJlZmVyIGRpcmVjdGlvbg0KICAgICAgICAgICAgLy8gZGlyZWN0bHkgdG93YXJkcyB0aGUgY2VudGVyIF9pbiB0aGUgWS1heGlzOyBvdGhlcndpc2UgcHJlZmVyDQogICAgICAgICAgICAvLyBkaXJlY3Rpb24gX2luIHRoZSBYLWF4aXMNCg0KDQogICAgICAgICAgICB2YXIgZGlyZWN0RGlyID0gdm9pZCAwOw0KICAgICAgICAgICAgaWYgKGN4ID09IHBjeCkgZGlyZWN0RGlyID0gUmVjYXN0Q29tbW9uLnJjR2V0RGlyRm9yT2Zmc2V0KDAsIHBjeSA+IGN5ID8gMSA6IC0xKTtlbHNlIGRpcmVjdERpciA9IFJlY2FzdENvbW1vbi5yY0dldERpckZvck9mZnNldChwY3ggPiBjeCA/IDEgOiAtMSwgMCk7IC8vIFB1c2ggdGhlIGRpcmVjdCBkaXIgbGFzdCBzbyB3ZSBzdGFydCB3aXRoIHRoaXMgb24gbmV4dCBpdGVyYXRpb24NCg0KICAgICAgICAgICAgdmFyIHRtcCA9IGRpcnNbM107DQogICAgICAgICAgICBkaXJzWzNdID0gZGlyc1tkaXJlY3REaXJdOw0KICAgICAgICAgICAgZGlyc1tkaXJlY3REaXJdID0gdG1wOw0KICAgICAgICAgICAgdmFyIF9jcyA9IGNoZi5zcGFuc1tjaV07DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pOSA9IDA7IF9pOSA8IDQ7ICsrX2k5KSB7DQogICAgICAgICAgICAgIHZhciBkaXIgPSBkaXJzW19pOV07DQogICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9jcywgZGlyKSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgY29udGludWU7DQogICAgICAgICAgICAgIHZhciBuZXdYID0gY3ggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KICAgICAgICAgICAgICB2YXIgbmV3WSA9IGN5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsNCiAgICAgICAgICAgICAgdmFyIGhweCA9IG5ld1ggLSBocC54bWluOw0KICAgICAgICAgICAgICB2YXIgaHB5ID0gbmV3WSAtIGhwLnltaW47DQogICAgICAgICAgICAgIGlmIChocHggPCAwIHx8IGhweCA+PSBocC53aWR0aCB8fCBocHkgPCAwIHx8IGhweSA+PSBocC5oZWlnaHQpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICBpZiAoaHAuZGF0YVtocHggKyBocHkgKiBocC53aWR0aF0gIT0gMCkgY29udGludWU7DQogICAgICAgICAgICAgIGhwLmRhdGFbaHB4ICsgaHB5ICogaHAud2lkdGhdID0gMTsNCiAgICAgICAgICAgICAgYXJyYXkucHVzaChuZXdYKTsNCiAgICAgICAgICAgICAgYXJyYXkucHVzaChuZXdZKTsNCiAgICAgICAgICAgICAgYXJyYXkucHVzaChjaGYuY2VsbHNbbmV3WCArIGJzICsgKG5ld1kgKyBicykgKiBjaGYud2lkdGhdLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfY3MsIGRpcikpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0bXAgPSBkaXJzWzNdOw0KICAgICAgICAgICAgZGlyc1szXSA9IGRpcnNbZGlyZWN0RGlyXTsNCiAgICAgICAgICAgIGRpcnNbZGlyZWN0RGlyXSA9IHRtcDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBhcnJheSA9IFtdOyAvLyBnZXRIZWlnaHREYXRhIHNlZWRzIGFyZSBnaXZlbiBfaW4gY29vcmRpbmF0ZXMgd2l0aCBib3JkZXJzDQoNCiAgICAgICAgICBhcnJheS5wdXNoKGN4ICsgYnMpOw0KICAgICAgICAgIGFycmF5LnB1c2goY3kgKyBicyk7DQogICAgICAgICAgYXJyYXkucHVzaChjaSk7DQogICAgICAgICAgaHAuZGF0YS5maWxsKFJlY2FzdE1lc2hEZXRhaWwuUkNfVU5TRVRfSEVJR0hULCAwLCBocC53aWR0aCAqIGhwLmhlaWdodCk7DQogICAgICAgICAgdmFyIGNzID0gY2hmLnNwYW5zW2NpXTsNCiAgICAgICAgICBocC5kYXRhW2N4IC0gaHAueG1pbiArIChjeSAtIGhwLnltaW4pICogaHAud2lkdGhdID0gY3MueTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJwdXNoMyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwdXNoMyhxdWV1ZSwgdjEsIHYyLCB2Mykgew0KICAgICAgICAgIHF1ZXVlLnB1c2godjEpOw0KICAgICAgICAgIHF1ZXVlLnB1c2godjIpOw0KICAgICAgICAgIHF1ZXVlLnB1c2godjMpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEhlaWdodERhdGEiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SGVpZ2h0RGF0YShjdHgsIGNoZiwgbWVzaHBvbHlzLCBwb2x5LCBucG9seSwgdmVydHMsIGJzLCBocCwgcmVnaW9uKSB7DQogICAgICAgICAgLy8gTm90ZTogUmVhZHMgdG8gdGhlIGNvbXBhY3QgaGVpZ2h0ZmllbGQgYXJlIG9mZnNldCBieSBib3JkZXIgc2l6ZSAoYnMpDQogICAgICAgICAgLy8gc2luY2UgYm9yZGVyIHNpemUgb2Zmc2V0IGlzIGFscmVhZHkgcmVtb3ZlZCBmcm9tIHRoZSBwb2x5bWVzaCB2ZXJ0aWNlcy4NCiAgICAgICAgICB2YXIgcXVldWUgPSBbXTsNCiAgICAgICAgICBocC5kYXRhLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX1VOU0VUX0hFSUdIVCwgMCwgaHAud2lkdGggKiBocC5oZWlnaHQpOw0KICAgICAgICAgIHZhciBlbXB0eSA9IHRydWU7IC8vIFdlIGNhbm5vdCBzYW1wbGUgZnJvbSB0aGlzIGxldCBpZiBpdCB3YXMgY3JlYXRlZCBmcm9tIHBvbHlzDQogICAgICAgICAgLy8gb2YgZGlmZmVyZW50IHJlZ2lvbnMuIElmIGl0IHdhcyB0aGVuIGl0IGNvdWxkIHBvdGVudGlhbGx5IGJlIG92ZXJsYXBwaW5nDQogICAgICAgICAgLy8gd2l0aCBwb2x5cyBvZiB0aGF0IHJlZ2lvbiBhbmQgdGhlIGhlaWdodHMgc2FtcGxlZCBoZXJlIGNvdWxkIGJlIHdyb25nLg0KDQogICAgICAgICAgaWYgKHJlZ2lvbiAhPSBSZWNhc3RDb25zdGFudHMuUkNfTVVMVElQTEVfUkVHUykgew0KICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVpZ2h0IGZyb20gdGhlIHNhbWUgcmVnaW9uLCBhbmQgbWFyayByZWdpb24gYm9yZGVycw0KICAgICAgICAgICAgLy8gYXMgc2VlZCBwb2ludHMgdG8gZmlsbCB0aGUgcmVzdC4NCiAgICAgICAgICAgIGZvciAodmFyIGh5ID0gMDsgaHkgPCBocC5oZWlnaHQ7IGh5KyspIHsNCiAgICAgICAgICAgICAgdmFyIHkgPSBocC55bWluICsgaHkgKyBiczsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBoeCA9IDA7IGh4IDwgaHAud2lkdGg7IGh4KyspIHsNCiAgICAgICAgICAgICAgICB2YXIgeCA9IGhwLnhtaW4gKyBoeCArIGJzOw0KICAgICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW3ggKyB5ICogY2hmLndpZHRoXTsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkgew0KICAgICAgICAgICAgICAgICAgLy8gaWYoaHkgPT0gMSAmJiBoeCA9PSAxICYmIGkgPT0gMTM0NCkNCiAgICAgICAgICAgICAgICAgIC8vIAljb25zb2xlLmxvZygiQmFkIikNCiAgICAgICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW2ldOw0KDQogICAgICAgICAgICAgICAgICBpZiAocy5yZWcgPT0gcmVnaW9uKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIGhlaWdodA0KICAgICAgICAgICAgICAgICAgICBocC5kYXRhW2h4ICsgaHkgKiBocC53aWR0aF0gPSBzLnk7DQogICAgICAgICAgICAgICAgICAgIGVtcHR5ID0gZmFsc2U7IC8vIElmIGFueSBvZiB0aGUgbmVpZ2hib3VycyBpcyBub3QgX2luIHNhbWUgcmVnaW9uLA0KICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGN1cnJlbnQgbG9jYXRpb24gYXMgZmxvb2QgZmlsbCBzdGFydA0KDQogICAgICAgICAgICAgICAgICAgIHZhciBib3JkZXIgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcik7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXMgPSBjaGYuc3BhbnNbYWldOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXMucmVnICE9IHJlZ2lvbikgew0KICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXIgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBpZiAoYm9yZGVyKSB7DQogICAgICAgICAgICAgICAgICAgICAgUmVjYXN0TWVzaERldGFpbC5wdXNoMyhxdWV1ZSwgeCwgeSwgaSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIGlmIHRoZSBwb2x5Z29uIGRvZXMgbm90IGNvbnRhaW4gYW55IHBvaW50cyBmcm9tIHRoZSBjdXJyZW50IHJlZ2lvbiAocmFyZSwgYnV0IGhhcHBlbnMpDQogICAgICAgICAgLy8gb3IgaWYgaXQgY291bGQgcG90ZW50aWFsbHkgYmUgb3ZlcmxhcHBpbmcgcG9seWdvbnMgb2YgdGhlIHNhbWUgcmVnaW9uLA0KICAgICAgICAgIC8vIHRoZW4gdXNlIHRoZSBjZW50ZXIgYXMgdGhlIHNlZWQgcG9pbnQuCQkNCg0KDQogICAgICAgICAgaWYgKGVtcHR5KSBSZWNhc3RNZXNoRGV0YWlsLnNlZWRBcnJheVdpdGhQb2x5Q2VudGVyKGN0eCwgY2hmLCBtZXNocG9seXMsIHBvbHksIG5wb2x5LCB2ZXJ0cywgYnMsIGhwLCBxdWV1ZSk7DQogICAgICAgICAgdmFyIGhlYWQgPSAwOyAvLyBXZSBhc3N1bWUgdGhlIHNlZWQgaXMgY2VudGVyZWQgX2luIHRoZSBwb2x5Z29uLCBzbyBhIEJGUyB0byBjb2xsZWN0DQogICAgICAgICAgLy8gaGVpZ2h0IGRhdGEgd2lsbCBlbnN1cmUgd2UgZG8gbm90IG1vdmUgb250byBvdmVybGFwcGluZyBwb2x5Z29ucyBhbmQNCiAgICAgICAgICAvLyBzYW1wbGUgd3JvbmcgaGVpZ2h0cy4NCg0KICAgICAgICAgIHdoaWxlIChoZWFkICogMyA8IHF1ZXVlLmxlbmd0aCkgew0KICAgICAgICAgICAgdmFyIGN4ID0gcXVldWVbaGVhZCAqIDMgKyAwXTsNCiAgICAgICAgICAgIHZhciBjeSA9IHF1ZXVlW2hlYWQgKiAzICsgMV07DQogICAgICAgICAgICB2YXIgY2kgPSBxdWV1ZVtoZWFkICogMyArIDJdOw0KICAgICAgICAgICAgaGVhZCsrOw0KDQogICAgICAgICAgICBpZiAoaGVhZCA+PSBSZWNhc3RNZXNoRGV0YWlsLlJFVFJBQ1RfU0laRSkgew0KICAgICAgICAgICAgICBoZWFkID0gMDsNCiAgICAgICAgICAgICAgcXVldWUgPSBxdWV1ZS5zbGljZShSZWNhc3RNZXNoRGV0YWlsLlJFVFJBQ1RfU0laRSAqIDMsIHF1ZXVlLmxlbmd0aCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBjcyA9IGNoZi5zcGFuc1tjaV07DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9kaXIgPSAwOyBfZGlyIDwgNDsgKytfZGlyKSB7DQogICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGNzLCBfZGlyKSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkgY29udGludWU7DQoNCiAgICAgICAgICAgICAgdmFyIF9heCA9IGN4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoX2Rpcik7DQoNCiAgICAgICAgICAgICAgdmFyIF9heSA9IGN5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoX2Rpcik7DQoNCiAgICAgICAgICAgICAgdmFyIF9oeCA9IF9heCAtIGhwLnhtaW4gLSBiczsNCg0KICAgICAgICAgICAgICB2YXIgX2h5ID0gX2F5IC0gaHAueW1pbiAtIGJzOw0KDQogICAgICAgICAgICAgIGlmIChfaHggPCAwIHx8IF9oeCA+PSBocC53aWR0aCB8fCBfaHkgPCAwIHx8IF9oeSA+PSBocC5oZWlnaHQpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICBpZiAoaHAuZGF0YVtfaHggKyBfaHkgKiBocC53aWR0aF0gIT0gUmVjYXN0TWVzaERldGFpbC5SQ19VTlNFVF9IRUlHSFQpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgIHZhciBfYWkgPSBjaGYuY2VsbHNbX2F4ICsgX2F5ICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oY3MsIF9kaXIpOw0KDQogICAgICAgICAgICAgIHZhciBfYXMgPSBjaGYuc3BhbnNbX2FpXTsNCiAgICAgICAgICAgICAgaHAuZGF0YVtfaHggKyBfaHkgKiBocC53aWR0aF0gPSBfYXMueTsNCiAgICAgICAgICAgICAgUmVjYXN0TWVzaERldGFpbC5wdXNoMyhxdWV1ZSwgX2F4LCBfYXksIF9haSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEVkZ2VGbGFncyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFZGdlRmxhZ3ModmVydHMsIHZhLCB2YiwgdnBvbHksIG5wb2x5KSB7DQogICAgICAgICAgLy8gUmV0dXJuIHRydWUgaWYgZWRnZSAodmEsdmIpIGlzIHBhcnQgb2YgdGhlIHBvbHlnb24uDQogICAgICAgICAgdmFyIHRoclNxciA9IDAuMDAxICogMC4wMDE7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IG5wb2x5IC0gMTsgaSA8IG5wb2x5OyBqID0gaSsrKSB7DQogICAgICAgICAgICBpZiAoUmVjYXN0TWVzaERldGFpbC5kaXN0YW5jZVB0U2VnMmQodmVydHMsIHZhLCB2cG9seSwgaiAqIDMsIGkgKiAzKSA8IHRoclNxciAmJiBSZWNhc3RNZXNoRGV0YWlsLmRpc3RhbmNlUHRTZWcyZCh2ZXJ0cywgdmIsIHZwb2x5LCBqICogMywgaSAqIDMpIDwgdGhyU3FyKSByZXR1cm4gMTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRUcmlGbGFncyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUcmlGbGFncyh2ZXJ0cywgdmEsIHZiLCB2YywgdnBvbHksIG5wb2x5KSB7DQogICAgICAgICAgdmFyIGZsYWdzID0gMDsNCiAgICAgICAgICBmbGFncyB8PSBSZWNhc3RNZXNoRGV0YWlsLmdldEVkZ2VGbGFncyh2ZXJ0cywgdmEsIHZiLCB2cG9seSwgbnBvbHkpIDw8IDA7DQogICAgICAgICAgZmxhZ3MgfD0gUmVjYXN0TWVzaERldGFpbC5nZXRFZGdlRmxhZ3ModmVydHMsIHZiLCB2YywgdnBvbHksIG5wb2x5KSA8PCAyOw0KICAgICAgICAgIGZsYWdzIHw9IFJlY2FzdE1lc2hEZXRhaWwuZ2V0RWRnZUZsYWdzKHZlcnRzLCB2YywgdmEsIHZwb2x5LCBucG9seSkgPDwgNDsNCiAgICAgICAgICByZXR1cm4gZmxhZ3M7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBTZWUgdGhlICNyY0NvbmZpZyBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHNlZSByY0FsbG9jUG9seU1lc2hEZXRhaWwsIHJjUG9seU1lc2gsIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY1BvbHlNZXNoRGV0YWlsLCByY0NvbmZpZw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImJ1aWxkUG9seU1lc2hEZXRhaWwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRQb2x5TWVzaERldGFpbChjdHgsIG1lc2gsIGNoZiwgc2FtcGxlRGlzdCwgc2FtcGxlTWF4RXJyb3IpIHsNCiAgICAgICAgICBjdHguc3RhcnRUaW1lcigiQlVJTERfUE9MWU1FU0hERVRBSUwiKTsNCiAgICAgICAgICBpZiAobWVzaC5udmVydHMgPT0gMCB8fCBtZXNoLm5wb2x5cyA9PSAwKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICB2YXIgZG1lc2ggPSBuZXcgUG9seU1lc2hEZXRhaWwoKTsNCiAgICAgICAgICB2YXIgbnZwID0gbWVzaC5udnA7DQogICAgICAgICAgdmFyIGNzID0gbWVzaC5jczsNCiAgICAgICAgICB2YXIgY2ggPSBtZXNoLmNoOw0KICAgICAgICAgIHZhciBvcmlnID0gbWVzaC5ibWluOw0KICAgICAgICAgIHZhciBib3JkZXJTaXplID0gbWVzaC5ib3JkZXJTaXplOw0KICAgICAgICAgIHZhciBoZWlnaHRTZWFyY2hSYWRpdXMgPSBNYXRoLmZsb29yKE1hdGgubWF4KDEsIE1hdGguY2VpbChtZXNoLm1heEVkZ2VFcnJvcikpKTsNCiAgICAgICAgICB2YXIgdHJpcyA9IFtdOw0KICAgICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBBcnJheSgyNTYgKiAzKS5maWxsKDApOw0KICAgICAgICAgIHZhciBocCA9IG5ldyBIZWlnaHRQYXRjaCgpOw0KICAgICAgICAgIHZhciBuUG9seVZlcnRzID0gMDsNCiAgICAgICAgICB2YXIgbWF4aHcgPSAwLA0KICAgICAgICAgICAgICBtYXhoaCA9IDA7DQogICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBBcnJheShtZXNoLm5wb2x5cyAqIDQpLmZpbGwoMCk7DQogICAgICAgICAgdmFyIHBvbHkgPSBuZXcgQXJyYXkobnZwICogMykuZmlsbCgwKTsNCiAgICAgICAgICBwb2x5LmZpbGwoMCk7IC8vIEZpbmQgbWF4IHNpemUgZm9yIGEgcG9seWdvbiBhcmVhLg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNoLm5wb2x5czsgKytpKSB7DQogICAgICAgICAgICB2YXIgcCA9IGkgKiBudnAgKiAyOw0KICAgICAgICAgICAgYm91bmRzW2kgKiA0ICsgMF0gPSBjaGYud2lkdGg7DQogICAgICAgICAgICBib3VuZHNbaSAqIDQgKyAxXSA9IDA7DQogICAgICAgICAgICBib3VuZHNbaSAqIDQgKyAyXSA9IGNoZi5oZWlnaHQ7DQogICAgICAgICAgICBib3VuZHNbaSAqIDQgKyAzXSA9IDA7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnZwOyArK2opIHsNCiAgICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbcCArIGpdID09IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYKSB7DQogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaSArICIgIiArIGopDQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgdiA9IG1lc2gucG9seXNbcCArIGpdICogMzsNCiAgICAgICAgICAgICAgYm91bmRzW2kgKiA0ICsgMF0gPSBNYXRoLm1pbihib3VuZHNbaSAqIDQgKyAwXSwgbWVzaC52ZXJ0c1t2ICsgMF0pOw0KICAgICAgICAgICAgICBib3VuZHNbaSAqIDQgKyAxXSA9IE1hdGgubWF4KGJvdW5kc1tpICogNCArIDFdLCBtZXNoLnZlcnRzW3YgKyAwXSk7DQogICAgICAgICAgICAgIGJvdW5kc1tpICogNCArIDJdID0gTWF0aC5taW4oYm91bmRzW2kgKiA0ICsgMl0sIG1lc2gudmVydHNbdiArIDJdKTsNCiAgICAgICAgICAgICAgYm91bmRzW2kgKiA0ICsgM10gPSBNYXRoLm1heChib3VuZHNbaSAqIDQgKyAzXSwgbWVzaC52ZXJ0c1t2ICsgMl0pOw0KICAgICAgICAgICAgICBuUG9seVZlcnRzKys7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGJvdW5kc1tpICogNCArIDBdID0gTWF0aC5tYXgoMCwgYm91bmRzW2kgKiA0ICsgMF0gLSAxKTsNCiAgICAgICAgICAgIGJvdW5kc1tpICogNCArIDFdID0gTWF0aC5taW4oY2hmLndpZHRoLCBib3VuZHNbaSAqIDQgKyAxXSArIDEpOw0KICAgICAgICAgICAgYm91bmRzW2kgKiA0ICsgMl0gPSBNYXRoLm1heCgwLCBib3VuZHNbaSAqIDQgKyAyXSAtIDEpOw0KICAgICAgICAgICAgYm91bmRzW2kgKiA0ICsgM10gPSBNYXRoLm1pbihjaGYuaGVpZ2h0LCBib3VuZHNbaSAqIDQgKyAzXSArIDEpOw0KICAgICAgICAgICAgaWYgKGJvdW5kc1tpICogNCArIDBdID49IGJvdW5kc1tpICogNCArIDFdIHx8IGJvdW5kc1tpICogNCArIDJdID49IGJvdW5kc1tpICogNCArIDNdKSBjb250aW51ZTsNCiAgICAgICAgICAgIG1heGh3ID0gTWF0aC5tYXgobWF4aHcsIGJvdW5kc1tpICogNCArIDFdIC0gYm91bmRzW2kgKiA0ICsgMF0pOw0KICAgICAgICAgICAgbWF4aGggPSBNYXRoLm1heChtYXhoaCwgYm91bmRzW2kgKiA0ICsgM10gLSBib3VuZHNbaSAqIDQgKyAyXSk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaHAuZGF0YSA9IG5ldyBBcnJheShtYXhodyAqIG1heGhoKTsNCiAgICAgICAgICBocC5kYXRhLmZpbGwoMCk7DQogICAgICAgICAgZG1lc2gubm1lc2hlcyA9IG1lc2gubnBvbHlzOw0KICAgICAgICAgIGRtZXNoLm52ZXJ0cyA9IDA7DQogICAgICAgICAgZG1lc2gubnRyaXMgPSAwOw0KICAgICAgICAgIGRtZXNoLm1lc2hlcyA9IG5ldyBBcnJheShkbWVzaC5ubWVzaGVzICogNCk7DQogICAgICAgICAgZG1lc2gubWVzaGVzLmZpbGwoMCk7DQogICAgICAgICAgdmFyIHZjYXAgPSBuUG9seVZlcnRzICsgTWF0aC5mbG9vcihuUG9seVZlcnRzIC8gMik7DQogICAgICAgICAgdmFyIHRjYXAgPSB2Y2FwICogMjsNCiAgICAgICAgICBkbWVzaC5udmVydHMgPSAwOw0KICAgICAgICAgIGRtZXNoLnZlcnRzID0gbmV3IEFycmF5KHZjYXAgKiAzKS5maWxsKDApOw0KICAgICAgICAgIGRtZXNoLm50cmlzID0gMDsNCiAgICAgICAgICBkbWVzaC50cmlzID0gbmV3IEFycmF5KHRjYXAgKiA0KS5maWxsKDApOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCBtZXNoLm5wb2x5czsgKytfaTEwKSB7DQogICAgICAgICAgICB2YXIgX3AgPSBfaTEwICogbnZwICogMjsgLy8gU3RvcmUgcG9seWdvbiB2ZXJ0aWNlcyBmb3IgcHJvY2Vzc2luZy4NCg0KDQogICAgICAgICAgICB2YXIgbnBvbHkgPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfajMgPSAwOyBfajMgPCBudnA7ICsrX2ozKSB7DQogICAgICAgICAgICAgIGlmIChtZXNoLnBvbHlzW19wICsgX2ozXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgYnJlYWs7DQoNCiAgICAgICAgICAgICAgdmFyIF92ID0gbWVzaC5wb2x5c1tfcCArIF9qM10gKiAzOw0KDQogICAgICAgICAgICAgIHBvbHlbX2ozICogMyArIDBdID0gbWVzaC52ZXJ0c1tfdiArIDBdICogY3M7DQogICAgICAgICAgICAgIHBvbHlbX2ozICogMyArIDFdID0gbWVzaC52ZXJ0c1tfdiArIDFdICogY2g7DQogICAgICAgICAgICAgIHBvbHlbX2ozICogMyArIDJdID0gbWVzaC52ZXJ0c1tfdiArIDJdICogY3M7DQogICAgICAgICAgICAgIG5wb2x5Kys7DQogICAgICAgICAgICB9IC8vIEdldCB0aGUgaGVpZ2h0IGRhdGEgZnJvbSB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbi4NCg0KDQogICAgICAgICAgICBocC54bWluID0gYm91bmRzW19pMTAgKiA0ICsgMF07DQogICAgICAgICAgICBocC55bWluID0gYm91bmRzW19pMTAgKiA0ICsgMl07DQogICAgICAgICAgICBocC53aWR0aCA9IGJvdW5kc1tfaTEwICogNCArIDFdIC0gYm91bmRzW19pMTAgKiA0ICsgMF07DQogICAgICAgICAgICBocC5oZWlnaHQgPSBib3VuZHNbX2kxMCAqIDQgKyAzXSAtIGJvdW5kc1tfaTEwICogNCArIDJdOw0KICAgICAgICAgICAgUmVjYXN0TWVzaERldGFpbC5nZXRIZWlnaHREYXRhKGN0eCwgY2hmLCBtZXNoLnBvbHlzLCBfcCwgbnBvbHksIG1lc2gudmVydHMsIGJvcmRlclNpemUsIGhwLCBtZXNoLnJlZ3NbX2kxMF0pOyAvLyBCdWlsZCBkZXRhaWwgbWVzaC4NCg0KICAgICAgICAgICAgdmFyIG52ZXJ0cyA9IHZvaWQgMDsNCg0KICAgICAgICAgICAgdmFyIF9SZWNhc3RNZXNoRGV0YWlsJGJ1aSA9IFJlY2FzdE1lc2hEZXRhaWwuYnVpbGRQb2x5RGV0YWlsKGN0eCwgcG9seSwgbnBvbHksIHNhbXBsZURpc3QsIHNhbXBsZU1heEVycm9yLCBoZWlnaHRTZWFyY2hSYWRpdXMsIGNoZiwgaHAsIHZlcnRzLCB0cmlzKTsNCg0KICAgICAgICAgICAgdmFyIF9SZWNhc3RNZXNoRGV0YWlsJGJ1aTIgPSBfc2xpY2VkVG9BcnJheShfUmVjYXN0TWVzaERldGFpbCRidWksIDIpOw0KDQogICAgICAgICAgICBudmVydHMgPSBfUmVjYXN0TWVzaERldGFpbCRidWkyWzBdOw0KICAgICAgICAgICAgdHJpcyA9IF9SZWNhc3RNZXNoRGV0YWlsJGJ1aTJbMV07DQoNCiAgICAgICAgICAgIC8vIE1vdmUgZGV0YWlsIHZlcnRzIHRvIHdvcmxkIHNwYWNlLg0KICAgICAgICAgICAgZm9yICh2YXIgX2o0ID0gMDsgX2o0IDwgbnZlcnRzOyArK19qNCkgew0KICAgICAgICAgICAgICB2ZXJ0c1tfajQgKiAzICsgMF0gKz0gb3JpZ1swXTsNCiAgICAgICAgICAgICAgdmVydHNbX2o0ICogMyArIDFdICs9IG9yaWdbMV0gKyBjaGYuY2g7IC8vIElzIHRoaXMgb2Zmc2V0IG5lY2Vzc2FyeT8NCg0KICAgICAgICAgICAgICB2ZXJ0c1tfajQgKiAzICsgMl0gKz0gb3JpZ1syXTsNCiAgICAgICAgICAgIH0gLy8gT2Zmc2V0IGxldCB0b28sIHdpbGwgYmUgdXNlZCB0byBmbGFnIGNoZWNraW5nLg0KDQoNCiAgICAgICAgICAgIGZvciAodmFyIF9qNSA9IDA7IF9qNSA8IG5wb2x5OyArK19qNSkgew0KICAgICAgICAgICAgICBwb2x5W19qNSAqIDMgKyAwXSArPSBvcmlnWzBdOw0KICAgICAgICAgICAgICBwb2x5W19qNSAqIDMgKyAxXSArPSBvcmlnWzFdOw0KICAgICAgICAgICAgICBwb2x5W19qNSAqIDMgKyAyXSArPSBvcmlnWzJdOw0KICAgICAgICAgICAgfSAvLyBTdG9yZSBkZXRhaWwgc3VibWVzaC4NCg0KDQogICAgICAgICAgICB2YXIgbnRyaXMgPSB0cmlzLmxlbmd0aCAvIDQ7DQogICAgICAgICAgICBkbWVzaC5tZXNoZXNbX2kxMCAqIDQgKyAwXSA9IGRtZXNoLm52ZXJ0czsNCiAgICAgICAgICAgIGRtZXNoLm1lc2hlc1tfaTEwICogNCArIDFdID0gbnZlcnRzOw0KICAgICAgICAgICAgZG1lc2gubWVzaGVzW19pMTAgKiA0ICsgMl0gPSBkbWVzaC5udHJpczsNCiAgICAgICAgICAgIGRtZXNoLm1lc2hlc1tfaTEwICogNCArIDNdID0gbnRyaXM7IC8vIFN0b3JlIHZlcnRpY2VzLCBhbGxvY2F0ZSBtb3JlIG1lbW9yeSBpZiBuZWNlc3NhcnkuDQoNCiAgICAgICAgICAgIGlmIChkbWVzaC5udmVydHMgKyBudmVydHMgPiB2Y2FwKSB7DQogICAgICAgICAgICAgIHdoaWxlIChkbWVzaC5udmVydHMgKyBudmVydHMgPiB2Y2FwKSB7DQogICAgICAgICAgICAgICAgdmNhcCArPSAyNTY7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgbmV3diA9IG5ldyBBcnJheSh2Y2FwICogMyk7DQogICAgICAgICAgICAgIGlmIChkbWVzaC5udmVydHMgIT0gMCkgYXJyYXljb3B5JDIoZG1lc2gudmVydHMsIDAsIG5ld3YsIDAsIDMgKiBkbWVzaC5udmVydHMpOw0KICAgICAgICAgICAgICBkbWVzaC52ZXJ0cyA9IG5ld3Y7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9qNiA9IDA7IF9qNiA8IG52ZXJ0czsgKytfajYpIHsNCiAgICAgICAgICAgICAgZG1lc2gudmVydHNbZG1lc2gubnZlcnRzICogMyArIDBdID0gdmVydHNbX2o2ICogMyArIDBdOw0KICAgICAgICAgICAgICBkbWVzaC52ZXJ0c1tkbWVzaC5udmVydHMgKiAzICsgMV0gPSB2ZXJ0c1tfajYgKiAzICsgMV07DQogICAgICAgICAgICAgIGRtZXNoLnZlcnRzW2RtZXNoLm52ZXJ0cyAqIDMgKyAyXSA9IHZlcnRzW19qNiAqIDMgKyAyXTsNCiAgICAgICAgICAgICAgZG1lc2gubnZlcnRzKys7DQogICAgICAgICAgICB9IC8vIFN0b3JlIHRyaWFuZ2xlcywgYWxsb2NhdGUgbW9yZSBtZW1vcnkgaWYgbmVjZXNzYXJ5Lg0KDQoNCiAgICAgICAgICAgIGlmIChkbWVzaC5udHJpcyArIG50cmlzID4gdGNhcCkgew0KICAgICAgICAgICAgICB3aGlsZSAoZG1lc2gubnRyaXMgKyBudHJpcyA+IHRjYXApIHsNCiAgICAgICAgICAgICAgICB0Y2FwICs9IDI1NjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciBuZXd0ID0gbmV3IEFycmF5KHRjYXAgKiA0KTsNCiAgICAgICAgICAgICAgaWYgKGRtZXNoLm50cmlzICE9IDApIGFycmF5Y29weSQyKGRtZXNoLnRyaXMsIDAsIG5ld3QsIDAsIDQgKiBkbWVzaC5udHJpcyk7DQogICAgICAgICAgICAgIGRtZXNoLnRyaXMgPSBuZXd0Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBfajcgPSAwOyBfajcgPCBudHJpczsgKytfajcpIHsNCiAgICAgICAgICAgICAgdmFyIHQgPSBfajcgKiA0Ow0KICAgICAgICAgICAgICBkbWVzaC50cmlzW2RtZXNoLm50cmlzICogNCArIDBdID0gdHJpc1t0ICsgMF07DQogICAgICAgICAgICAgIGRtZXNoLnRyaXNbZG1lc2gubnRyaXMgKiA0ICsgMV0gPSB0cmlzW3QgKyAxXTsNCiAgICAgICAgICAgICAgZG1lc2gudHJpc1tkbWVzaC5udHJpcyAqIDQgKyAyXSA9IHRyaXNbdCArIDJdOw0KICAgICAgICAgICAgICBkbWVzaC50cmlzW2RtZXNoLm50cmlzICogNCArIDNdID0gUmVjYXN0TWVzaERldGFpbC5nZXRUcmlGbGFncyh2ZXJ0cywgdHJpc1t0ICsgMF0gKiAzLCB0cmlzW3QgKyAxXSAqIDMsIHRyaXNbdCArIDJdICogMywgcG9seSwgbnBvbHkpOw0KICAgICAgICAgICAgICBkbWVzaC5udHJpcysrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGN0eC5zdG9wVGltZXIoIkJVSUxEX1BPTFlNRVNIREVUQUlMIik7DQogICAgICAgICAgcmV0dXJuIGRtZXNoOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBSZWNhc3RNZXNoRGV0YWlsOw0KICAgIH0oKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RNZXNoRGV0YWlsLCAiTUFYX1ZFUlRTIiwgMTI3KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RNZXNoRGV0YWlsLCAiTUFYX1RSSVMiLCAyNTUpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdE1lc2hEZXRhaWwsICJNQVhfVkVSVFNfUEVSX0VER0UiLCAzMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgIlJDX1VOU0VUX0hFSUdIVCIsIDB4ZmZmKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RNZXNoRGV0YWlsLCAiRVZfVU5ERUYiLCAtMSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgIkVWX0hVTEwiLCAtMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgInZkb3QyIiwgZnVuY3Rpb24gKGEsIGIpIHsNCiAgICAgIHJldHVybiBhWzBdICogYlswXSArIGFbMl0gKiBiWzJdOw0KICAgIH0pOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdE1lc2hEZXRhaWwsICJSRVRSQUNUX1NJWkUiLCAyNTYpOw0KDQogICAgdmFyIFJlY2FzdEJ1aWxkZXJSZXN1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gUmVjYXN0QnVpbGRlclJlc3VsdChwbWVzaCwgZG1lc2gpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdEJ1aWxkZXJSZXN1bHQpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicG1lc2giLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZG1lc2giLCB2b2lkIDApOw0KDQogICAgICAgIHRoaXMucG1lc2ggPSBwbWVzaDsNCiAgICAgICAgdGhpcy5kbWVzaCA9IGRtZXNoOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0QnVpbGRlclJlc3VsdCwgW3sNCiAgICAgICAga2V5OiAiZ2V0TWVzaCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNZXNoKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnBtZXNoOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldE1lc2hEZXRhaWwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWVzaERldGFpbCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5kbWVzaDsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gUmVjYXN0QnVpbGRlclJlc3VsdDsNCiAgICB9KCk7DQoNCiAgICB2YXIgUmVjYXN0QnVpbGRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICAvLyBjbGFzcyBSZWNhc3RCdWlsZGVyUHJvZ3Jlc3NMaXN0ZW5lciB7DQogICAgICAvLyAgICAgb25Qcm9ncmVzcyhjb21wbGV0ZWQsIHRvdGFsKTsNCiAgICAgIC8vIH0NCiAgICAgIC8vIFJlY2FzdEJ1aWxkZXIoKSB7DQogICAgICAvLyAgICAgcHJvZ3Jlc3NMaXN0ZW5lciA9IG51bGw7DQogICAgICAvLyB9DQogICAgICBmdW5jdGlvbiBSZWNhc3RCdWlsZGVyKCkgew0KICAgICAgICB2YXIgcHJvZ3Jlc3NMaXN0ZW5lciA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbnVsbDsNCg0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0QnVpbGRlcik7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwcm9ncmVzc0xpc3RlbmVyIiwgdm9pZCAwKTsNCg0KICAgICAgICB0aGlzLnByb2dyZXNzTGlzdGVuZXIgPSBwcm9ncmVzc0xpc3RlbmVyOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0QnVpbGRlciwgW3sNCiAgICAgICAga2V5OiAiYnVpbGRUaWxlcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFRpbGVzKGdlb20sIGNmZywgdGhyZWFkcykgew0KICAgICAgICAgIHZhciBibWluID0gZ2VvbS5nZXRNZXNoQm91bmRzTWluKCk7DQogICAgICAgICAgdmFyIGJtYXggPSBnZW9tLmdldE1lc2hCb3VuZHNNYXgoKTsNCiAgICAgICAgICB2YXIgdHdoID0gUmVjYXN0LmNhbGNUaWxlQ291bnQoYm1pbiwgYm1heCwgY2ZnLmNzLCBjZmcudGlsZVNpemUpOw0KICAgICAgICAgIHZhciB0dyA9IHR3aFswXTsNCiAgICAgICAgICB2YXIgdGggPSB0d2hbMV07DQogICAgICAgICAgcmVzdWx0ID0gbnVsbDsNCg0KICAgICAgICAgIGlmICh0aHJlYWRzID09IDEpIHsNCiAgICAgICAgICAgIHJlc3VsdCA9IGJ1aWxkU2luZ2xlVGhyZWFkKGdlb20sIGNmZywgYm1pbiwgYm1heCwgdHcsIHRoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmVzdWx0ID0gYnVpbGRNdWx0aVRocmVhZChnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHR3LCB0aCwgdGhyZWFkcyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJidWlsZFNpbmdsZVRocmVhZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFNpbmdsZVRocmVhZChnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHR3LCB0aCkgew0KICAgICAgICAgIHJlc3VsdCA9IG5ldyBSZWNhc3RCdWlsZGVyUmVzdWx0W3R3XVt0aF0oKTsNCiAgICAgICAgICBjb3VudGVyID0gbmV3IEF0b21pY0ludGVnZXIoKTsNCg0KICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdHc7ICsreCkgew0KICAgICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aDsgKyt5KSB7DQogICAgICAgICAgICAgIHJlc3VsdFt4XVt5XSA9IGJ1aWxkVGlsZShnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHgsIHksIGNvdW50ZXIsIHR3ICogdGgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYnVpbGRNdWx0aVRocmVhZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZE11bHRpVGhyZWFkKGdlb20sIGNmZywgYm1pbiwgYm1heCwgdHcsIHRoLCB0aHJlYWRzKSB7DQogICAgICAgICAgZWMgPSBFeGVjdXRvcnMubmV3Rml4ZWRUaHJlYWRQb29sKHRocmVhZHMpOw0KICAgICAgICAgIHJlc3VsdCA9IG5ldyBSZWNhc3RCdWlsZGVyUmVzdWx0W3R3XVt0aF0oKTsNCiAgICAgICAgICBjb3VudGVyID0gbmV3IEF0b21pY0ludGVnZXIoKTsNCg0KICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdHc7ICsreCkgew0KICAgICAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoeSkgew0KICAgICAgICAgICAgICB2YXIgdHggPSB4Ow0KICAgICAgICAgICAgICB2YXIgdHkgPSB5Ow0KICAgICAgICAgICAgICBlYy5zdWJtaXQoZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgICAgIHJlc3VsdFt0eF1bdHldID0gYnVpbGRUaWxlKGdlb20sIGNmZywgYm1pbiwgYm1heCwgdHgsIHR5LCBjb3VudGVyLCB0dyAqIHRoKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoOyArK3kpIHsNCiAgICAgICAgICAgICAgX2xvb3AoeSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZWMuc2h1dGRvd24oKTsNCg0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBlYy5hd2FpdFRlcm1pbmF0aW9uKDEwMDAsIFRpbWVVbml0LkhPVVJTKTsNCiAgICAgICAgICB9IGNhdGNoIChlKSB7fQ0KDQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJidWlsZFRpbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRUaWxlKGdlb20sIGNmZywgYm1pbiwgYm1heCwgdHgsIHR5LCBjb3VudGVyLCB0b3RhbCkgew0KICAgICAgICAgIHJlc3VsdCA9IGJ1aWxkKGdlb20sIG5ldyBSZWNhc3RCdWlsZGVyQ29uZmlnKGNmZywgYm1pbiwgYm1heCwgdHgsIHR5LCB0cnVlKSk7DQoNCiAgICAgICAgICBpZiAocHJvZ3Jlc3NMaXN0ZW5lciAhPSBudWxsKSB7DQogICAgICAgICAgICBwcm9ncmVzc0xpc3RlbmVyLm9uUHJvZ3Jlc3MoY291bnRlci5pbmNyZW1lbnRBbmRHZXQoKSwgdG90YWwpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYnVpbGQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGQoZ2VvbSwgYnVpbGRlckNmZykgew0KICAgICAgICAgIHZhciBjZmcgPSBidWlsZGVyQ2ZnLmNmZzsNCiAgICAgICAgICB2YXIgY3R4ID0gbmV3IENvbnRleHQoKTsNCiAgICAgICAgICB2YXIgY2hmID0gdGhpcy5idWlsZENvbXBhY3RIZWlnaHRmaWVsZChnZW9tLCBidWlsZGVyQ2ZnLCBjdHgpOyAvLyBQYXJ0aXRpb24gdGhlIGhlaWdodGZpZWxkIHNvIHRoYXQgd2UgY2FuIHVzZSBzaW1wbGUgYWxnb3JpdGhtIGxhdGVyDQogICAgICAgICAgLy8gdG8gdHJpYW5ndWxhdGUgdGhlIHdhbGthYmxlIGFyZWFzLg0KICAgICAgICAgIC8vIFRoZXJlIGFyZSAzIG1hcnRpdGlvbmluZyBtZXRob2RzLCBlYWNoIHdpdGggc29tZSBwcm9zIGFuZCBjb25zOg0KICAgICAgICAgIC8vIDEpIFdhdGVyc2hlZCBwYXJ0aXRpb25pbmcNCiAgICAgICAgICAvLyAtIHRoZSBjbGFzc2ljIFJlY2FzdCBwYXJ0aXRpb25pbmcNCiAgICAgICAgICAvLyAtIGNyZWF0ZXMgdGhlIG5pY2VzdCB0ZXNzZWxsYXRpb24NCiAgICAgICAgICAvLyAtIHVzdWFsbHkgc2xvd2VzdA0KICAgICAgICAgIC8vIC0gcGFydGl0aW9ucyB0aGUgaGVpZ2h0ZmllbGQgaW50byBuaWNlIHJlZ2lvbnMgd2l0aG91dCBob2xlcyBvcg0KICAgICAgICAgIC8vIG92ZXJsYXBzDQogICAgICAgICAgLy8gLSB0aGUgYXJlIHNvbWUgY29ybmVyIGNhc2VzIHdoZXJlIHRoaXMgbWV0aG9kIGNyZWF0ZXMgcHJvZHVjZXMgaG9sZXMNCiAgICAgICAgICAvLyBhbmQgb3ZlcmxhcHMNCiAgICAgICAgICAvLyAtIGhvbGVzIG1heSBhcHBlYXIgd2hlbiBhIHNtYWxsIG9ic3RhY2xlcyBpcyBjbG9zZSB0byBsYXJnZSBvcGVuIGFyZWENCiAgICAgICAgICAvLyAodHJpYW5ndWxhdGlvbiBjYW4gaGFuZGxlIHRoaXMpDQogICAgICAgICAgLy8gLSBvdmVybGFwcyBtYXkgb2NjdXIgaWYgeW91IGhhdmUgbmFycm93IHNwaXJhbCBjb3JyaWRvcnMgKGkuZQ0KICAgICAgICAgIC8vIHN0YWlycyksIHRoaXMgbWFrZSB0cmlhbmd1bGF0aW9uIHRvIGZhaWwNCiAgICAgICAgICAvLyAqIGdlbmVyYWxseSB0aGUgYmVzdCBjaG9pY2UgaWYgeW91IHByZWNvbXB1dGUgdGhlIG5hY21lc2gsIHVzZSB0aGlzDQogICAgICAgICAgLy8gaWYgeW91IGhhdmUgbGFyZ2Ugb3BlbiBhcmVhcw0KICAgICAgICAgIC8vIDIpIE1vbm90b25lIHBhcnRpb25pbmcNCiAgICAgICAgICAvLyAtIGZhc3Rlc3QNCiAgICAgICAgICAvLyAtIHBhcnRpdGlvbnMgdGhlIGhlaWdodGZpZWxkIGludG8gcmVnaW9ucyB3aXRob3V0IGhvbGVzIGFuZCBvdmVybGFwcw0KICAgICAgICAgIC8vIChndWFyYW50ZWVkKQ0KICAgICAgICAgIC8vIC0gY3JlYXRlcyBsZXQgdGhpbiBwb2x5Z29ucywgd2hpY2ggc29tZXRpbWVzIGNhdXNlcyBwYXRocyB3aXRoDQogICAgICAgICAgLy8gZGV0b3Vycw0KICAgICAgICAgIC8vICogdXNlIHRoaXMgaWYgeW91IHdhbnQgZmFzdCBuYXZtZXNoIGdlbmVyYXRpb24NCiAgICAgICAgICAvLyAzKSBMYXllciBwYXJ0aXRvaW5pbmcNCiAgICAgICAgICAvLyAtIHF1aXRlIGZhc3QNCiAgICAgICAgICAvLyAtIHBhcnRpdGlvbnMgdGhlIGhlaWdoZmllbGQgaW50byBub24tb3ZlcmxhcHBpbmcgcmVnaW9ucw0KICAgICAgICAgIC8vIC0gcmVsaWVzIG9uIHRoZSB0cmlhbmd1bGF0aW9uIGNvZGUgdG8gY29wZSB3aXRoIGhvbGVzICh0aHVzIHNsb3dlcg0KICAgICAgICAgIC8vIHRoYW4gbW9ub3RvbmUgcGFydGl0aW9uaW5nKQ0KICAgICAgICAgIC8vIC0gcHJvZHVjZXMgYmV0dGVyIHRyaWFuZ2xlcyB0aGFuIG1vbm90b25lIHBhcnRpdGlvbmluZw0KICAgICAgICAgIC8vIC0gZG9lcyBub3QgaGF2ZSB0aGUgY29ybmVyIGNhc2VzIG9mIHdhdGVyc2hlZCBwYXJ0aXRpb25pbmcNCiAgICAgICAgICAvLyAtIGNhbiBiZSBzbG93IGFuZCBjcmVhdGUgYSBiaXQgdWdseSB0ZXNzZWxsYXRpb24gKHN0aWxsIGJldHRlciB0aGFuDQogICAgICAgICAgLy8gbW9ub3RvbmUpDQogICAgICAgICAgLy8gaWYgeW91IGhhdmUgbGFyZ2Ugb3BlbiBhcmVhcyB3aXRoIHNtYWxsIG9ic3RhY2xlcyAobm90IGEgcHJvYmxlbSBpZg0KICAgICAgICAgIC8vIHlvdSB1c2UgdGlsZXMpDQogICAgICAgICAgLy8gKiBnb29kIGNob2ljZSB0byB1c2UgZm9yIHRpbGVkIG5hdm1lc2ggd2l0aCBtZWRpdW0gYW5kIHNtYWxsIHNpemVkDQogICAgICAgICAgLy8gdGlsZXMNCg0KICAgICAgICAgIGlmIChjZmcucGFydGl0aW9uVHlwZSA9PSBSZWNhc3RDb25zdGFudHMuV0FURVJTSEVEKSB7DQogICAgICAgICAgICAvLyBQcmVwYXJlIGZvciByZWdpb24gcGFydGl0aW9uaW5nLCBieSBjYWxjdWxhdGluZyBkaXN0YW5jZSBmaWVsZA0KICAgICAgICAgICAgLy8gYVBvbHkgdGhlIHdhbGthYmxlIHN1cmZhY2UuDQogICAgICAgICAgICBSZWNhc3RSZWdpb24uYnVpbGREaXN0YW5jZUZpZWxkKGN0eCwgY2hmKTsgLy8gUGFydGl0aW9uIHRoZSB3YWxrYWJsZSBzdXJmYWNlIGludG8gc2ltcGxlIHJlZ2lvbnMgd2l0aG91dCBob2xlcy4NCg0KICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmJ1aWxkUmVnaW9ucyhjdHgsIGNoZiwgYnVpbGRlckNmZy5ib3JkZXJTaXplLCBjZmcubWluUmVnaW9uQXJlYSwgY2ZnLm1lcmdlUmVnaW9uQXJlYSk7DQogICAgICAgICAgfSBlbHNlIGlmIChjZmcucGFydGl0aW9uVHlwZSA9PSBQYXJ0aXRpb25UeXBlLk1PTk9UT05FKSB7DQogICAgICAgICAgICAvLyBQYXJ0aXRpb24gdGhlIHdhbGthYmxlIHN1cmZhY2UgaW50byBzaW1wbGUgcmVnaW9ucyB3aXRob3V0IGhvbGVzLg0KICAgICAgICAgICAgLy8gTW9ub3RvbmUgcGFydGl0aW9uaW5nIGRvZXMgbm90IG5lZWQgZGlzdGFuY2VmaWVsZC4NCiAgICAgICAgICAgIFJlY2FzdFJlZ2lvbi5idWlsZFJlZ2lvbnNNb25vdG9uZShjdHgsIGNoZiwgYnVpbGRlckNmZy5ib3JkZXJTaXplLCBjZmcubWluUmVnaW9uQXJlYSwgY2ZnLm1lcmdlUmVnaW9uQXJlYSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIFBhcnRpdGlvbiB0aGUgd2Fsa2FibGUgc3VyZmFjZSBpbnRvIHNpbXBsZSByZWdpb25zIHdpdGhvdXQgaG9sZXMuDQogICAgICAgICAgICBSZWNhc3RSZWdpb24uYnVpbGRMYXllclJlZ2lvbnMoY3R4LCBjaGYsIGJ1aWxkZXJDZmcuYm9yZGVyU2l6ZSwgY2ZnLm1pblJlZ2lvbkFyZWEpOw0KICAgICAgICAgIH0gLy8NCiAgICAgICAgICAvLyBTdGVwIDUuIFRyYWNlIGFuZCBzaW1wbGlmeSByZWdpb24gY29udG91cnMuDQogICAgICAgICAgLy8NCiAgICAgICAgICAvLyBDcmVhdGUgY29udG91cnMuDQoNCg0KICAgICAgICAgIHZhciBjc2V0ID0gUmVjYXN0Q29udG91ci5idWlsZENvbnRvdXJzKGN0eCwgY2hmLCBjZmcubWF4U2ltcGxpZmljYXRpb25FcnJvciwgY2ZnLm1heEVkZ2VMZW4sIFJlY2FzdENvbnN0YW50cy5SQ19DT05UT1VSX1RFU1NfV0FMTF9FREdFUyk7IC8vDQogICAgICAgICAgLy8gU3RlcCA2LiBCdWlsZCBwb2x5Z29ucyBtZXNoIGZyb20gY29udG91cnMuDQogICAgICAgICAgLy8NCg0KICAgICAgICAgIHZhciBwbWVzaCA9IFJlY2FzdE1lc2guYnVpbGRQb2x5TWVzaChjdHgsIGNzZXQsIGNmZy5tYXhWZXJ0c1BlclBvbHkpOyAvLw0KICAgICAgICAgIC8vIFN0ZXAgNy4gQ3JlYXRlIGRldGFpbCBtZXNoIHdoaWNoIGFsbG93cyB0byBhY2Nlc3MgYXBwcm94aW1hdGUgaGVpZ2h0DQogICAgICAgICAgLy8gb24gZWFjaCBwb2x5Z29uLg0KICAgICAgICAgIC8vDQoNCiAgICAgICAgICB2YXIgZG1lc2ggPSBidWlsZGVyQ2ZnLmJ1aWxkTWVzaERldGFpbCA/IFJlY2FzdE1lc2hEZXRhaWwuYnVpbGRQb2x5TWVzaERldGFpbChjdHgsIHBtZXNoLCBjaGYsIGNmZy5kZXRhaWxTYW1wbGVEaXN0LCBjZmcuZGV0YWlsU2FtcGxlTWF4RXJyb3IpIDogbnVsbDsNCiAgICAgICAgICByZXR1cm4gbmV3IFJlY2FzdEJ1aWxkZXJSZXN1bHQocG1lc2gsIGRtZXNoKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJidWlsZENvbXBhY3RIZWlnaHRmaWVsZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZENvbXBhY3RIZWlnaHRmaWVsZChnZW9tUHJvdmlkZXIsIGJ1aWxkZXJDZmcsIGN0eCkgew0KICAgICAgICAgIHZhciBjZmcgPSBidWlsZGVyQ2ZnLmNmZzsgLy8NCiAgICAgICAgICAvLyBTdGVwIDIuIFJhc3Rlcml6ZSBpbnB1dCBwb2x5Z29uIHNvdXAuDQogICAgICAgICAgLy8NCiAgICAgICAgICAvLyBBbGxvY2F0ZSB2b3hlbCBoZWlnaHRmaWVsZCB3aGVyZSB3ZSByYXN0ZXJpemUgb3VyIGlucHV0IGRhdGEgdG8uDQoNCiAgICAgICAgICB2YXIgc29saWQgPSBuZXcgSGVpZ2h0ZmllbGQoYnVpbGRlckNmZy53aWR0aCwgYnVpbGRlckNmZy5oZWlnaHQsIGJ1aWxkZXJDZmcuYm1pbiwgYnVpbGRlckNmZy5ibWF4LCBjZmcuY3MsIGNmZy5jaCk7IC8vIEFsbG9jYXRlIGFycmF5IHRoYXQgY2FuIGhvbGQgdHJpYW5nbGUgYXJlYSB0eXBlcy4NCiAgICAgICAgICAvLyBJZiB5b3UgaGF2ZSBtdWx0aXBsZSBtZXNoZXMgeW91IG5lZWQgdG8gcHJvY2VzcywgYWxsb2NhdGUNCiAgICAgICAgICAvLyBhbmQgYXJyYXkgd2hpY2ggY2FuIGhvbGQgdGhlIG1heCBudW1iZXIgb2YgdHJpYW5nbGVzIHlvdSBuZWVkIHRvDQogICAgICAgICAgLy8gcHJvY2Vzcy4NCiAgICAgICAgICAvLyBGaW5kIHRyaWFuZ2xlcyB3aGljaCBhcmUgd2Fsa2FibGUgYmFzZWQgb24gdGhlaXIgc2xvcGUgYW5kIHJhc3Rlcml6ZQ0KICAgICAgICAgIC8vIHRoZW0uDQogICAgICAgICAgLy8gSWYgeW91ciBpbnB1dCBkYXRhIGlzIG11bHRpcGxlIG1lc2hlcywgeW91IGNhbiB0cmFuc2Zvcm0gdGhlbSBoZXJlLA0KICAgICAgICAgIC8vIGNhbGN1bGF0ZQ0KICAgICAgICAgIC8vIHRoZSBhcmUgdHlwZSBmb3IgZWFjaCBvZiB0aGUgbWVzaGVzIGFuZCByYXN0ZXJpemUgdGhlbS4NCg0KICAgICAgICAgIHZhciBtZXNoZXMgPSBnZW9tUHJvdmlkZXIubWVzaGVzKCk7DQoNCiAgICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzaGVzKSwNCiAgICAgICAgICAgICAgX3N0ZXA7DQoNCiAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsNCiAgICAgICAgICAgICAgdmFyIGdlb20gPSBfc3RlcC52YWx1ZTsNCiAgICAgICAgICAgICAgdmFyIHZlcnRzID0gZ2VvbS5nZXRWZXJ0cygpOw0KICAgICAgICAgICAgICB2YXIgdGlsZWQgPSBjZmcudGlsZVNpemUgPiAwOw0KICAgICAgICAgICAgICB2YXIgdG90YWx0cmlzID0gMDsNCg0KICAgICAgICAgICAgICBpZiAodGlsZWQpIHsNCiAgICAgICAgICAgICAgICB2YXIgdGJtaW4gPSBuZXcgQXJyYXkoMik7DQogICAgICAgICAgICAgICAgdmFyIHRibWF4ID0gbmV3IEFycmF5KDIpOw0KICAgICAgICAgICAgICAgIHRibWluWzBdID0gYnVpbGRlckNmZy5ibWluWzBdOw0KICAgICAgICAgICAgICAgIHRibWluWzFdID0gYnVpbGRlckNmZy5ibWluWzJdOw0KICAgICAgICAgICAgICAgIHRibWF4WzBdID0gYnVpbGRlckNmZy5ibWF4WzBdOw0KICAgICAgICAgICAgICAgIHRibWF4WzFdID0gYnVpbGRlckNmZy5ibWF4WzJdOw0KICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IGdlb20uZ2V0Q2h1bmtzT3ZlcmxhcHBpbmdSZWN0KHRibWluLCB0Ym1heCk7DQoNCiAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSwNCiAgICAgICAgICAgICAgICAgICAgX3N0ZXAzOw0KDQogICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAzLnZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdHJpcyA9IG5vZGUudHJpczsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG50cmlzID0gdHJpcy5sZW5ndGggLyAzOw0KICAgICAgICAgICAgICAgICAgICB0b3RhbHRyaXMgKz0gbnRyaXM7DQogICAgICAgICAgICAgICAgICAgIHZhciBtX3RyaWFyZWFzID0gUmVjYXN0Lm1hcmtXYWxrYWJsZVRyaWFuZ2xlcyhjdHgsIGNmZy53YWxrYWJsZVNsb3BlQW5nbGUsIHZlcnRzLCB0cmlzLCBudHJpcywgY2ZnLndhbGthYmxlQXJlYU1vZCk7DQogICAgICAgICAgICAgICAgICAgIFJlY2FzdFJhc3Rlcml6YXRpb24ucmFzdGVyaXplVHJpYW5nbGVzKGN0eCwgdmVydHMsIHRyaXMsIG1fdHJpYXJlYXMsIG50cmlzLCBzb2xpZCwgY2ZnLndhbGthYmxlQ2xpbWIpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7DQogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIgX3RyaXMgPSBnZW9tLmdldFRyaXMoKTsNCg0KICAgICAgICAgICAgICAgIHZhciBfbnRyaXMgPSBfdHJpcy5sZW5ndGggLyAzOw0KDQogICAgICAgICAgICAgICAgdmFyIF9tX3RyaWFyZWFzID0gUmVjYXN0Lm1hcmtXYWxrYWJsZVRyaWFuZ2xlcyhjdHgsIGNmZy53YWxrYWJsZVNsb3BlQW5nbGUsIHZlcnRzLCBfdHJpcywgX250cmlzLCBjZmcud2Fsa2FibGVBcmVhTW9kKTsNCg0KICAgICAgICAgICAgICAgIHRvdGFsdHJpcyA9IF9udHJpczsNCiAgICAgICAgICAgICAgICBSZWNhc3RSYXN0ZXJpemF0aW9uLnJhc3Rlcml6ZVRyaWFuZ2xlc0EoY3R4LCB2ZXJ0cywgX3RyaXMsIF9tX3RyaWFyZWFzLCBfbnRyaXMsIHNvbGlkLCBjZmcud2Fsa2FibGVDbGltYik7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gY29uc29sZS5sb2coc29saWQuc3BhbnNbMF0pDQogICAgICAgICAgICAvLw0KICAgICAgICAgICAgLy8gU3RlcCAzLiBGaWx0ZXIgd2Fsa2FibGVzIHN1cmZhY2VzLg0KICAgICAgICAgICAgLy8NCiAgICAgICAgICAgIC8vIE9uY2UgYWxsIGdlb21ldHJ5IGlzIHJhc3Rlcml6ZWQsIHdlIGRvIGluaXRpYWwgcGFzcyBvZiBmaWx0ZXJpbmcgdG8NCiAgICAgICAgICAgIC8vIHJlbW92ZSB1bndhbnRlZCBvdmVyaGFuZ3MgY2F1c2VkIGJ5IHRoZSBjb25zZXJ2YXRpdmUgcmFzdGVyaXphdGlvbg0KICAgICAgICAgICAgLy8gYXMgd2VsbCBhcyBmaWx0ZXIgc3BhbnMgd2hlcmUgdGhlIGNoYXJhY3RlciBjYW5ub3QgcG9zc2libHkgc3RhbmQuDQoNCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7DQogICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgUmVjYXN0RmlsdGVyLmZpbHRlckxvd0hhbmdpbmdXYWxrYWJsZU9ic3RhY2xlcyhjdHgsIGNmZy53YWxrYWJsZUNsaW1iLCBzb2xpZCk7DQogICAgICAgICAgUmVjYXN0RmlsdGVyLmZpbHRlckxlZGdlU3BhbnMoY3R4LCBjZmcud2Fsa2FibGVIZWlnaHQsIGNmZy53YWxrYWJsZUNsaW1iLCBzb2xpZCk7DQogICAgICAgICAgUmVjYXN0RmlsdGVyLmZpbHRlcldhbGthYmxlTG93SGVpZ2h0U3BhbnMoY3R4LCBjZmcud2Fsa2FibGVIZWlnaHQsIHNvbGlkKTsgLy8NCiAgICAgICAgICAvLyBTdGVwIDQuIFBhcnRpdGlvbiB3YWxrYWJsZSBzdXJmYWNlIHRvIHNpbXBsZSByZWdpb25zLg0KICAgICAgICAgIC8vDQogICAgICAgICAgLy8gQ29tcGFjdCB0aGUgaGVpZ2h0ZmllbGQgc28gdGhhdCBpdCBpcyBmYXN0ZXIgdG8gaGFuZGxlIGZyb20gbm93IG9uLg0KICAgICAgICAgIC8vIFRoaXMgd2lsbCByZXN1bHQgbW9yZSBjYWNoZSBjb2hlcmVudCBkYXRhIGFzIHdlbGwgYXMgdGhlIG5laWdoYm91cnMNCiAgICAgICAgICAvLyBiZXR3ZWVuIHdhbGthYmxlIGNlbGxzIHdpbGwgYmUgY2FsY3VsYXRlZC4NCg0KICAgICAgICAgIHZhciBjaGYgPSBSZWNhc3QuYnVpbGRDb21wYWN0SGVpZ2h0ZmllbGQoY3R4LCBjZmcud2Fsa2FibGVIZWlnaHQsIGNmZy53YWxrYWJsZUNsaW1iLCBzb2xpZCk7IC8vIGNvbnNvbGUubG9nKGNoZi5zcGFuc1s0NTAyNDBdKQ0KICAgICAgICAgIC8vIEVyb2RlIHRoZSB3YWxrYWJsZSBhcmVhIGJ5IGFnZW50IHJhZGl1cy4NCg0KICAgICAgICAgIFJlY2FzdEFyZWEuZXJvZGVXYWxrYWJsZUFyZWEoY3R4LCBjZmcud2Fsa2FibGVSYWRpdXMsIGNoZik7IC8vIChPcHRpb25hbCkgTWFyayBhcmVhcy4NCg0KICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZ2VvbVByb3ZpZGVyLmdldENvbnZleFZvbHVtZXMoKSksDQogICAgICAgICAgICAgIF9zdGVwMjsNCg0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgew0KICAgICAgICAgICAgICB2YXIgdm9sID0gX3N0ZXAyLnZhbHVlOw0KICAgICAgICAgICAgICBSZWNhc3RBcmVhLm1hcmtDb252ZXhQb2x5QXJlYShjdHgsIHZvbC52ZXJ0cywgdm9sLmhtaW4sIHZvbC5obWF4LCB2b2wuYXJlYU1vZCwgY2hmKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOw0KICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gY2hmOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImJ1aWxkTGF5ZXJzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkTGF5ZXJzKGdlb20sIGNmZykgew0KICAgICAgICAgIHZhciBjdHggPSBuZXcgQ29udGV4dCgpOw0KICAgICAgICAgIHZhciBjaGYgPSBidWlsZENvbXBhY3RIZWlnaHRmaWVsZChnZW9tLCBjZmcsIGN0eCk7DQogICAgICAgICAgcmV0dXJuIFJlY2FzdExheWVycy5idWlsZEhlaWdodGZpZWxkTGF5ZXJzKGN0eCwgY2hmLCBjZmcuYm9yZGVyU2l6ZSwgY2ZnLmNmZy53YWxrYWJsZUhlaWdodCk7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIFJlY2FzdEJ1aWxkZXI7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIC8vLyBSZXByZXNlbnRzIHRoZSBzb3VyY2UgZGF0YSB1c2VkIHRvIGJ1aWxkIGFuIG5hdmlnYXRpb24gbWVzaCB0aWxlLg0KICAgIHZhciBOYXZNZXNoRGF0YUNyZWF0ZVBhcmFtcyA9IGZ1bmN0aW9uIE5hdk1lc2hEYXRhQ3JlYXRlUGFyYW1zKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5hdk1lc2hEYXRhQ3JlYXRlUGFyYW1zKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJ0cyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJ0Q291bnQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwb2x5cyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwb2x5RmxhZ3MiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicG9seUFyZWFzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBvbHlDb3VudCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm52cCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRldGFpbE1lc2hlcyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxWZXJ0cyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxWZXJ0c0NvdW50IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGV0YWlsVHJpcyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxUcmlDb3VudCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9mZk1lc2hDb25WZXJ0cyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvZmZNZXNoQ29uUmFkIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9mZk1lc2hDb25GbGFncyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvZmZNZXNoQ29uQXJlYXMiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib2ZmTWVzaENvbkRpciIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvZmZNZXNoQ29uVXNlcklEIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9mZk1lc2hDb25Db3VudCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInVzZXJJZCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRpbGVYIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidGlsZVkiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0aWxlTGF5ZXIiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJtYXgiLCBbXSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2Fsa2FibGVIZWlnaHQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YWxrYWJsZVJhZGl1cyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndhbGthYmxlQ2xpbWIiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjcyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNoIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYnVpbGRCdlRyZWUiLCBmYWxzZSk7DQogICAgfSAvLy8gQH0NCiAgICA7DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQoNCiAgICAvKiogUHJvdmlkZXMgaGlnaCBsZXZlbCBpbmZvcm1hdGlvbiByZWxhdGVkIHRvIGEgZHQgb2JqZWN0LiovDQogICAgdmFyIE1lc2hIZWFkZXIgPSBmdW5jdGlvbiBNZXNoSGVhZGVyKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lc2hIZWFkZXIpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1hZ2ljIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJzaW9uIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ4Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ5Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsYXllciIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidXNlcklkIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwb2x5Q291bnQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZlcnRDb3VudCIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibWF4TGlua0NvdW50Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxNZXNoQ291bnQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRldGFpbFZlcnRDb3VudCIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGV0YWlsVHJpQ291bnQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJ2Tm9kZUNvdW50Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvZmZNZXNoQ29uQ291bnQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9mZk1lc2hCYXNlIiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ3YWxrYWJsZUhlaWdodCIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2Fsa2FibGVSYWRpdXMiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndhbGthYmxlQ2xpbWIiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJtaW4iLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJtYXgiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJ2UXVhbnRGYWN0b3IiLCB2b2lkIDApOw0KICAgIH07DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTWVzaEhlYWRlciwgIkRUX05BVk1FU0hfTUFHSUMiLCAnRCcgPDwgMjQgfCAnTicgPDwgMTYgfCAnQScgPDwgOCB8ICdWJyk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTWVzaEhlYWRlciwgIkRUX05BVk1FU0hfVkVSU0lPTiIsIDcpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE1lc2hIZWFkZXIsICJEVF9OQVZNRVNIX1ZFUlNJT05fUkVDQVNUNEoiLCAweDg4MDcpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE1lc2hIZWFkZXIsICJEVF9OQVZNRVNIX1NUQVRFX01BR0lDIiwgJ0QnIDw8IDI0IHwgJ04nIDw8IDE2IHwgJ00nIDw8IDggfCAnUycpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE1lc2hIZWFkZXIsICJEVF9OQVZNRVNIX1NUQVRFX1ZFUlNJT04iLCAxKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCg0KICAgIC8qKiBEZWZpbmVzIHRoZSBsb2NhdGlvbiBvZiBkZXRhaWwgc3ViLW1lc2ggZGF0YSB3aXRoaW4gYSBkdE1lc2hUaWxlLiAqLw0KICAgIHZhciBQb2x5RGV0YWlsID0gZnVuY3Rpb24gUG9seURldGFpbCgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb2x5RGV0YWlsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJ0QmFzZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRyaUJhc2UiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZXJ0Q291bnQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0cmlDb3VudCIsIDApOw0KICAgIH07DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQoNCiAgICAvKioNCiAgICAgKiBCb3VuZGluZyB2b2x1bWUgbm9kZS4NCiAgICAgKiANCiAgICAgKiBAbm90ZSBUaGlzIHN0cnVjdHVyZSBpcyByYXJlbHkgaWYgZXZlciB1c2VkIGJ5IHRoZSBlbmQgdXNlci4NCiAgICAgKiBAc2VlIE1lc2hUaWxlDQogICAgICovDQogICAgdmFyIEJWTm9kZSA9IGZ1bmN0aW9uIEJWTm9kZSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCVk5vZGUpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJtaW4iLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJtYXgiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImkiLCAwKTsNCiAgICB9Ow0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBNZXNoRGF0YSA9IGZ1bmN0aW9uIE1lc2hEYXRhKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1lc2hEYXRhKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJoZWFkZXIiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInZlcnRzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBvbHlzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRldGFpbE1lc2hlcyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxWZXJ0cyIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXRhaWxUcmlzIiwgW10pOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJ2VHJlZSIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvZmZNZXNoQ29ucyIsIFtdKTsNCiAgICB9Ow0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KDQogICAgLyoqDQogICAgICogRGVmaW5lcyBhbiBuYXZpZ2F0aW9uIG1lc2ggb2ZmLW1lc2ggY29ubmVjdGlvbiB3aXRoaW4gYSBkdFBvbHkgb2JqZWN0LiBBbiBvZmYtbWVzaCBjb25uZWN0aW9uIGlzIGEgdXNlciBkZWZpbmVkDQogICAgICogdHJhdmVyc2FibGUgY29ubmVjdGlvbiBtYWRlIHVwIHRvIHR3byB2ZXJ0aWNlcy4NCiAgICAgKi8NCiAgICB2YXIgT2ZmTWVzaENvbm5lY3Rpb24gPSBmdW5jdGlvbiBPZmZNZXNoQ29ubmVjdGlvbigpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPZmZNZXNoQ29ubmVjdGlvbik7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicG9zIiwgbmV3IEFycmF5KDYpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyYWQiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwb2x5IiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZmxhZ3MiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzaWRlIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidXNlcklkIiwgMCk7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGFycmF5Y29weSQzKG9uZSwgb25lU3RhcnQsIHR3bywgdHdvU3RhcnQsIGxlbikgew0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgew0KICAgICAgICB0d29bdHdvU3RhcnQgKyBpXSA9IG9uZVtvbmVTdGFydCArIGldOw0KICAgICAgfQ0KICAgIH0NCg0KICAgIHZhciBCVkl0ZW0gPSBmdW5jdGlvbiBCVkl0ZW0oKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQlZJdGVtKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJibWluIiwgbmV3IEFycmF5KDMpLmZpbGwoMCkpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImJtYXgiLCBuZXcgQXJyYXkoMykuZmlsbCgwKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaSIsIDApOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7DQogICAgICBpZiAoYS5ibWluWzBdIDwgYi5ibWluWzBdKSByZXR1cm4gLTE7DQogICAgICBpZiAoYS5ibWluWzBdID4gYi5ibWluWzBdKSByZXR1cm4gMTsNCiAgICAgIHJldHVybiAwOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNvbXBhcmVZKGEsIGIpIHsNCiAgICAgIGlmIChhLmJtaW5bMV0gPCBiLmJtaW5bMV0pIHJldHVybiAtMTsNCiAgICAgIGlmIChhLmJtaW5bMV0gPiBiLmJtaW5bMV0pIHJldHVybiAxOw0KICAgICAgcmV0dXJuIDA7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY29tcGFyZVooYSwgYikgew0KICAgICAgaWYgKGEuYm1pblsyXSA8IGIuYm1pblsyXSkgcmV0dXJuIC0xOw0KICAgICAgaWYgKGEuYm1pblsyXSA+IGIuYm1pblsyXSkgcmV0dXJuIDE7DQogICAgICByZXR1cm4gMDsNCiAgICB9DQoNCiAgICB2YXIgTmF2TWVzaEJ1aWxkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gTmF2TWVzaEJ1aWxkZXIoKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOYXZNZXNoQnVpbGRlcik7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhOYXZNZXNoQnVpbGRlciwgbnVsbCwgW3sNCiAgICAgICAga2V5OiAiY2FsY0V4dGVuZHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY0V4dGVuZHMoaXRlbXMsIG5pdGVtcywgaW1pbiwgaW1heCkgew0KICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIHZhciBibWF4ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIGJtaW5bMF0gPSBpdGVtc1tpbWluXS5ibWluWzBdOw0KICAgICAgICAgIGJtaW5bMV0gPSBpdGVtc1tpbWluXS5ibWluWzFdOw0KICAgICAgICAgIGJtaW5bMl0gPSBpdGVtc1tpbWluXS5ibWluWzJdOw0KICAgICAgICAgIGJtYXhbMF0gPSBpdGVtc1tpbWluXS5ibWF4WzBdOw0KICAgICAgICAgIGJtYXhbMV0gPSBpdGVtc1tpbWluXS5ibWF4WzFdOw0KICAgICAgICAgIGJtYXhbMl0gPSBpdGVtc1tpbWluXS5ibWF4WzJdOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IGltaW4gKyAxOyBpIDwgaW1heDsgKytpKSB7DQogICAgICAgICAgICB2YXIgaXQgPSBpdGVtc1tpXTsNCiAgICAgICAgICAgIGlmIChpdC5ibWluWzBdIDwgYm1pblswXSkgYm1pblswXSA9IGl0LmJtaW5bMF07DQogICAgICAgICAgICBpZiAoaXQuYm1pblsxXSA8IGJtaW5bMV0pIGJtaW5bMV0gPSBpdC5ibWluWzFdOw0KICAgICAgICAgICAgaWYgKGl0LmJtaW5bMl0gPCBibWluWzJdKSBibWluWzJdID0gaXQuYm1pblsyXTsNCiAgICAgICAgICAgIGlmIChpdC5ibWF4WzBdID4gYm1heFswXSkgYm1heFswXSA9IGl0LmJtYXhbMF07DQogICAgICAgICAgICBpZiAoaXQuYm1heFsxXSA+IGJtYXhbMV0pIGJtYXhbMV0gPSBpdC5ibWF4WzFdOw0KICAgICAgICAgICAgaWYgKGl0LmJtYXhbMl0gPiBibWF4WzJdKSBibWF4WzJdID0gaXQuYm1heFsyXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gW2JtaW4sIGJtYXhdOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImxvbmdlc3RBeGlzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvbmdlc3RBeGlzKHgsIHksIHopIHsNCiAgICAgICAgICB2YXIgYXhpcyA9IDA7DQogICAgICAgICAgdmFyIG1heFZhbCA9IHg7DQoNCiAgICAgICAgICBpZiAoeSA+IG1heFZhbCkgew0KICAgICAgICAgICAgYXhpcyA9IDE7DQogICAgICAgICAgICBtYXhWYWwgPSB5Ow0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICh6ID4gbWF4VmFsKSB7DQogICAgICAgICAgICBheGlzID0gMjsNCiAgICAgICAgICAgIG1heFZhbCA9IHo7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGF4aXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic3ViZGl2aWRlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1YmRpdmlkZShpdGVtcywgbml0ZW1zLCBpbWluLCBpbWF4LCBjdXJOb2RlLCBub2Rlcykgew0KICAgICAgICAgIHZhciBpbnVtID0gaW1heCAtIGltaW47DQogICAgICAgICAgdmFyIGljdXIgPSBjdXJOb2RlOw0KICAgICAgICAgIHZhciBub2RlID0gbmV3IEJWTm9kZSgpOw0KICAgICAgICAgIG5vZGVzW2N1ck5vZGUrK10gPSBub2RlOw0KDQogICAgICAgICAgaWYgKGludW0gPT0gMSkgew0KICAgICAgICAgICAgLy8gTGVhZg0KICAgICAgICAgICAgbm9kZS5ibWluWzBdID0gaXRlbXNbaW1pbl0uYm1pblswXTsNCiAgICAgICAgICAgIG5vZGUuYm1pblsxXSA9IGl0ZW1zW2ltaW5dLmJtaW5bMV07DQogICAgICAgICAgICBub2RlLmJtaW5bMl0gPSBpdGVtc1tpbWluXS5ibWluWzJdOw0KICAgICAgICAgICAgbm9kZS5ibWF4WzBdID0gaXRlbXNbaW1pbl0uYm1heFswXTsNCiAgICAgICAgICAgIG5vZGUuYm1heFsxXSA9IGl0ZW1zW2ltaW5dLmJtYXhbMV07DQogICAgICAgICAgICBub2RlLmJtYXhbMl0gPSBpdGVtc1tpbWluXS5ibWF4WzJdOw0KICAgICAgICAgICAgbm9kZS5pID0gaXRlbXNbaW1pbl0uaTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gU3BsaXQNCiAgICAgICAgICAgIHZhciBtaW5tYXggPSBOYXZNZXNoQnVpbGRlci5jYWxjRXh0ZW5kcyhpdGVtcywgbml0ZW1zLCBpbWluLCBpbWF4KTsNCiAgICAgICAgICAgIG5vZGUuYm1pbiA9IG1pbm1heFswXTsNCiAgICAgICAgICAgIG5vZGUuYm1heCA9IG1pbm1heFsxXTsNCiAgICAgICAgICAgIHZhciBheGlzID0gTmF2TWVzaEJ1aWxkZXIubG9uZ2VzdEF4aXMobm9kZS5ibWF4WzBdIC0gbm9kZS5ibWluWzBdLCBub2RlLmJtYXhbMV0gLSBub2RlLmJtaW5bMV0sIG5vZGUuYm1heFsyXSAtIG5vZGUuYm1pblsyXSk7DQoNCiAgICAgICAgICAgIGlmIChheGlzID09IDApIHsNCiAgICAgICAgICAgICAgLy8gU29ydCBhUG9seSB4LWF4aXMNCiAgICAgICAgICAgICAgLy9BcnJheXMuc29ydChpdGVtcywgaW1pbiwgaW1pbiArIGludW0sIG5ldyBDb21wYXJlSXRlbVgoKSk7DQogICAgICAgICAgICAgIC8vVE9ETzogaXMgdGhpcyByaWdodD8NCiAgICAgICAgICAgICAgdmFyIHNoYWxsb3dDb3B5ID0gaXRlbXMuc2xpY2UoaW1pbiwgaW1pbiArIGludW0pOw0KICAgICAgICAgICAgICBzaGFsbG93Q29weSA9IHNoYWxsb3dDb3B5LnNvcnQoY29tcGFyZVgpOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSBpbWluOyBpIDwgaW1pbiArIGludW07IGkrKykgew0KICAgICAgICAgICAgICAgIGl0ZW1zW2ldID0gc2hhbGxvd0NvcHlbaSAtIGltaW5dOw0KICAgICAgICAgICAgICAgIGlmICghaXRlbXNbaV0pIGNvbnNvbGUubG9nKCJ1aC1vaCIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKGF4aXMgPT0gMSkgew0KICAgICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHktYXhpcw0KICAgICAgICAgICAgICAvL0FycmF5cy5zb3J0KGl0ZW1zLCBpbWluLCBpbWluICsgaW51bSwgbmV3IENvbXBhcmVJdGVtWSgpKTsNCiAgICAgICAgICAgICAgdmFyIF9zaGFsbG93Q29weSA9IGl0ZW1zLnNsaWNlKGltaW4sIGltaW4gKyBpbnVtKTsNCg0KICAgICAgICAgICAgICBfc2hhbGxvd0NvcHkgPSBfc2hhbGxvd0NvcHkuc29ydChjb21wYXJlWSk7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSBpbWluOyBfaSA8IGltaW4gKyBpbnVtOyBfaSsrKSB7DQogICAgICAgICAgICAgICAgaXRlbXNbX2ldID0gX3NoYWxsb3dDb3B5W19pIC0gaW1pbl07DQogICAgICAgICAgICAgICAgaWYgKCFpdGVtc1tfaV0pIGNvbnNvbGUubG9nKCJ1aC1vaCIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHotYXhpcw0KICAgICAgICAgICAgICAvL0FycmF5cy5zb3J0KGl0ZW1zLCBpbWluLCBpbWluICsgaW51bSwgbmV3IENvbXBhcmVJdGVtWigpKTsNCiAgICAgICAgICAgICAgdmFyIF9zaGFsbG93Q29weTIgPSBpdGVtcy5zbGljZShpbWluLCBpbWluICsgaW51bSk7DQoNCiAgICAgICAgICAgICAgX3NoYWxsb3dDb3B5MiA9IF9zaGFsbG93Q29weTIuc29ydChjb21wYXJlWik7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kyID0gaW1pbjsgX2kyIDwgaW1pbiArIGludW07IF9pMisrKSB7DQogICAgICAgICAgICAgICAgaXRlbXNbX2kyXSA9IF9zaGFsbG93Q29weTJbX2kyIC0gaW1pbl07DQogICAgICAgICAgICAgICAgaWYgKCFpdGVtc1tfaTJdKSBjb25zb2xlLmxvZygidWgtb2giKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgaXNwbGl0ID0gTWF0aC5mbG9vcihpbWluICsgaW51bSAvIDIpOyAvLyBMZWZ0DQoNCiAgICAgICAgICAgIGN1ck5vZGUgPSBOYXZNZXNoQnVpbGRlci5zdWJkaXZpZGUoaXRlbXMsIG5pdGVtcywgaW1pbiwgaXNwbGl0LCBjdXJOb2RlLCBub2Rlcyk7IC8vIFJpZ2h0DQoNCiAgICAgICAgICAgIGN1ck5vZGUgPSBOYXZNZXNoQnVpbGRlci5zdWJkaXZpZGUoaXRlbXMsIG5pdGVtcywgaXNwbGl0LCBpbWF4LCBjdXJOb2RlLCBub2Rlcyk7DQogICAgICAgICAgICB2YXIgaWVzY2FwZSA9IGN1ck5vZGUgLSBpY3VyOyAvLyBOZWdhdGl2ZSBpbmRleCBtZWFucyBlc2NhcGUuDQoNCiAgICAgICAgICAgIG5vZGUuaSA9IC1pZXNjYXBlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBjdXJOb2RlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImNyZWF0ZUJWVHJlZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVCVlRyZWUocGFyYW1zLCBub2Rlcykgew0KICAgICAgICAgIC8vIEJ1aWxkIHRyZWUNCiAgICAgICAgICB2YXIgcXVhbnRGYWN0b3IgPSAxIC8gcGFyYW1zLmNzOw0KICAgICAgICAgIHZhciBpdGVtcyA9IG5ldyBBcnJheShwYXJhbXMucG9seUNvdW50KS5maWxsKG51bGwpOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMucG9seUNvdW50OyBpKyspIHsNCiAgICAgICAgICAgIHZhciBpdCA9IG5ldyBCVkl0ZW0oKTsNCiAgICAgICAgICAgIGl0ZW1zW2ldID0gaXQ7DQogICAgICAgICAgICBpdC5pID0gaTsgLy8gQ2FsYyBwb2x5Z29uIGJvdW5kcy4gVXNlIGRldGFpbCBtZXNoZXMgaWYgYXZhaWxhYmxlLg0KDQogICAgICAgICAgICBpZiAocGFyYW1zLmRldGFpbE1lc2hlcyAhPSBudWxsKSB7DQogICAgICAgICAgICAgIHZhciB2YiA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbaSAqIDQgKyAwXTsNCiAgICAgICAgICAgICAgdmFyIG5kdiA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbaSAqIDQgKyAxXTsNCiAgICAgICAgICAgICAgdmFyIGJtaW4gPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgICAgIHZhciBibWF4ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgICB2YXIgZHYgPSB2YiAqIDM7DQogICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShibWluLCBwYXJhbXMuZGV0YWlsVmVydHMsIGR2KTsNCiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGJtYXgsIHBhcmFtcy5kZXRhaWxWZXJ0cywgZHYpOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgbmR2OyBqKyspIHsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udk1pbihibWluLCBwYXJhbXMuZGV0YWlsVmVydHMsIGR2ICsgaiAqIDMpOw0KICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52TWF4KGJtYXgsIHBhcmFtcy5kZXRhaWxWZXJ0cywgZHYgKyBqICogMyk7DQogICAgICAgICAgICAgIH0gLy8gQlYtdHJlZSB1c2VzIGNzIGZvciBhbGwgZGltZW5zaW9ucw0KDQoNCiAgICAgICAgICAgICAgaXQuYm1pblswXSA9IERldG91ckNvbW1vbi5jbGFtcChNYXRoLnJvdW5kKChibWluWzBdIC0gcGFyYW1zLmJtaW5bMF0pICogcXVhbnRGYWN0b3IpLCAwLCAweGZmZmYpOw0KICAgICAgICAgICAgICBpdC5ibWluWzFdID0gRGV0b3VyQ29tbW9uLmNsYW1wKE1hdGgucm91bmQoKGJtaW5bMV0gLSBwYXJhbXMuYm1pblsxXSkgKiBxdWFudEZhY3RvciksIDAsIDB4ZmZmZik7DQogICAgICAgICAgICAgIGl0LmJtaW5bMl0gPSBEZXRvdXJDb21tb24uY2xhbXAoTWF0aC5yb3VuZCgoYm1pblsyXSAtIHBhcmFtcy5ibWluWzJdKSAqIHF1YW50RmFjdG9yKSwgMCwgMHhmZmZmKTsNCiAgICAgICAgICAgICAgaXQuYm1heFswXSA9IERldG91ckNvbW1vbi5jbGFtcChNYXRoLnJvdW5kKChibWF4WzBdIC0gcGFyYW1zLmJtaW5bMF0pICogcXVhbnRGYWN0b3IpLCAwLCAweGZmZmYpOw0KICAgICAgICAgICAgICBpdC5ibWF4WzFdID0gRGV0b3VyQ29tbW9uLmNsYW1wKE1hdGgucm91bmQoKGJtYXhbMV0gLSBwYXJhbXMuYm1pblsxXSkgKiBxdWFudEZhY3RvciksIDAsIDB4ZmZmZik7DQogICAgICAgICAgICAgIGl0LmJtYXhbMl0gPSBEZXRvdXJDb21tb24uY2xhbXAoTWF0aC5yb3VuZCgoYm1heFsyXSAtIHBhcmFtcy5ibWluWzJdKSAqIHF1YW50RmFjdG9yKSwgMCwgMHhmZmZmKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHZhciBwID0gaSAqIHBhcmFtcy5udnAgKiAyOw0KICAgICAgICAgICAgICBpdC5ibWluWzBdID0gaXQuYm1heFswXSA9IHBhcmFtcy52ZXJ0c1twYXJhbXMucG9seXNbcF0gKiAzICsgMF07DQogICAgICAgICAgICAgIGl0LmJtaW5bMV0gPSBpdC5ibWF4WzFdID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twXSAqIDMgKyAxXTsNCiAgICAgICAgICAgICAgaXQuYm1pblsyXSA9IGl0LmJtYXhbMl0gPSBwYXJhbXMudmVydHNbcGFyYW1zLnBvbHlzW3BdICogMyArIDJdOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9qID0gMTsgX2ogPCBwYXJhbXMubnZwOyArK19qKSB7DQogICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5wb2x5c1twICsgX2pdID09IE5hdk1lc2hCdWlsZGVyLk1FU0hfTlVMTF9JRFgpIGJyZWFrOw0KICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twICsgX2pdICogMyArIDBdOw0KICAgICAgICAgICAgICAgIHZhciB5ID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twICsgX2pdICogMyArIDFdOw0KICAgICAgICAgICAgICAgIHZhciB6ID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twICsgX2pdICogMyArIDJdOw0KICAgICAgICAgICAgICAgIGlmICh4IDwgaXQuYm1pblswXSkgaXQuYm1pblswXSA9IHg7DQogICAgICAgICAgICAgICAgaWYgKHkgPCBpdC5ibWluWzFdKSBpdC5ibWluWzFdID0geTsNCiAgICAgICAgICAgICAgICBpZiAoeiA8IGl0LmJtaW5bMl0pIGl0LmJtaW5bMl0gPSB6Ow0KICAgICAgICAgICAgICAgIGlmICh4ID4gaXQuYm1heFswXSkgaXQuYm1heFswXSA9IHg7DQogICAgICAgICAgICAgICAgaWYgKHkgPiBpdC5ibWF4WzFdKSBpdC5ibWF4WzFdID0geTsNCiAgICAgICAgICAgICAgICBpZiAoeiA+IGl0LmJtYXhbMl0pIGl0LmJtYXhbMl0gPSB6Ow0KICAgICAgICAgICAgICB9IC8vIFJlbWFwIHkNCg0KDQogICAgICAgICAgICAgIGl0LmJtaW5bMV0gPSBNYXRoLmZsb29yKGl0LmJtaW5bMV0gKiBwYXJhbXMuY2ggLyBwYXJhbXMuY3MpOw0KICAgICAgICAgICAgICBpdC5ibWF4WzFdID0gTWF0aC5jZWlsKGl0LmJtYXhbMV0gKiBwYXJhbXMuY2ggLyBwYXJhbXMuY3MpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBOYXZNZXNoQnVpbGRlci5zdWJkaXZpZGUoaXRlbXMsIHBhcmFtcy5wb2x5Q291bnQsIDAsIHBhcmFtcy5wb2x5Q291bnQsIDAsIG5vZGVzKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjbGFzc2lmeU9mZk1lc2hQb2ludCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGFzc2lmeU9mZk1lc2hQb2ludChwdCwgYm1pbiwgYm1heCkgew0KICAgICAgICAgIHZhciBvdXRjb2RlID0gMDsNCiAgICAgICAgICBvdXRjb2RlIHw9IHB0WzBdID49IGJtYXhbMF0gPyBOYXZNZXNoQnVpbGRlci5YUCA6IDA7DQogICAgICAgICAgb3V0Y29kZSB8PSBwdFsyXSA+PSBibWF4WzJdID8gWlAgOiAwOw0KICAgICAgICAgIG91dGNvZGUgfD0gcHRbMF0gPCBibWluWzBdID8gWE0gOiAwOw0KICAgICAgICAgIG91dGNvZGUgfD0gcHRbMl0gPCBibWluWzJdID8gWk0gOiAwOw0KDQogICAgICAgICAgc3dpdGNoIChvdXRjb2RlKSB7DQogICAgICAgICAgICBjYXNlIE5hdk1lc2hCdWlsZGVyLlhQOg0KICAgICAgICAgICAgICByZXR1cm4gMDsNCg0KICAgICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5YUCB8IE5hdk1lc2hCdWlsZGVyLlpQOg0KICAgICAgICAgICAgICByZXR1cm4gMTsNCg0KICAgICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5aUDoNCiAgICAgICAgICAgICAgcmV0dXJuIDI7DQoNCiAgICAgICAgICAgIGNhc2UgTmF2TWVzaEJ1aWxkZXIuWE0gfCBOYXZNZXNoQnVpbGRlci5aUDoNCiAgICAgICAgICAgICAgcmV0dXJuIDM7DQoNCiAgICAgICAgICAgIGNhc2UgTmF2TWVzaEJ1aWxkZXIuWE06DQogICAgICAgICAgICAgIHJldHVybiA0Ow0KDQogICAgICAgICAgICBjYXNlIE5hdk1lc2hCdWlsZGVyLlhNIHwgTmF2TWVzaEJ1aWxkZXIuWk06DQogICAgICAgICAgICAgIHJldHVybiA1Ow0KDQogICAgICAgICAgICBjYXNlIE5hdk1lc2hCdWlsZGVyLlpNOg0KICAgICAgICAgICAgICByZXR1cm4gNjsNCg0KICAgICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5YUCB8IE5hdk1lc2hCdWlsZGVyLlpNOg0KICAgICAgICAgICAgICByZXR1cm4gNzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gMHhmZjsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogQnVpbGRzIG5hdmlnYXRpb24gbWVzaCB0aWxlIGRhdGEgZnJvbSB0aGUgcHJvdmlkZWQgdGlsZSBjcmVhdGlvbiBkYXRhLg0KICAgICAgICAgKiANCiAgICAgICAgICogQHBhcmFtIHBhcmFtcw0KICAgICAgICAgKiAgICAgICAgICAgIFRpbGUgY3JlYXRpb24gZGF0YS4NCiAgICAgICAgICogDQogICAgICAgICAqIEByZXR1cm4gY3JlYXRlZCB0aWxlIGRhdGENCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY3JlYXRlTmF2TWVzaERhdGEiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTmF2TWVzaERhdGEocGFyYW1zKSB7DQogICAgICAgICAgaWYgKHBhcmFtcy52ZXJ0Q291bnQgPj0gMHhmZmZmKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICBpZiAocGFyYW1zLnZlcnRDb3VudCA9PSAwIHx8IHBhcmFtcy52ZXJ0cyA9PSBudWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICBpZiAocGFyYW1zLnBvbHlDb3VudCA9PSAwIHx8IHBhcmFtcy5wb2x5cyA9PSBudWxsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgICB2YXIgbnZwID0gcGFyYW1zLm52cDsgLy8gQ2xhc3NpZnkgb2ZmLW1lc2ggY29ubmVjdGlvbiBwb2ludHMuIFdlIHN0b3JlIG9ubHkgdGhlIGNvbm5lY3Rpb25zDQogICAgICAgICAgLy8gd2hvc2Ugc3RhcnQgcG9Qb2x5IGlzIGluc2lkZSB0aGUgdGlsZS4NCg0KICAgICAgICAgIHZhciBvZmZNZXNoQ29uQ2xhc3MgPSBudWxsOw0KICAgICAgICAgIHZhciBzdG9yZWRPZmZNZXNoQ29uQ291bnQgPSAwOw0KICAgICAgICAgIHZhciBvZmZNZXNoQ29uTGlua0NvdW50ID0gMDsNCg0KICAgICAgICAgIGlmIChwYXJhbXMub2ZmTWVzaENvbkNvdW50ID4gMCkgew0KICAgICAgICAgICAgb2ZmTWVzaENvbkNsYXNzID0gbmV3IEFycmF5KHBhcmFtcy5vZmZNZXNoQ29uQ291bnQgKiAyKTsgLy8gRmluZCB0aWdodCBoZWlnaCBib3VuZHMsIHVzZWQgZm9yIGN1bGxpbmcgb3V0IG9mZi1tZXNoIHN0YXJ0DQogICAgICAgICAgICAvLyBsb2NhdGlvbnMuDQoNCiAgICAgICAgICAgIHZhciBobWluID0gTnVtYmVyLk1BWF9WQUxVRTsNCiAgICAgICAgICAgIHZhciBobWF4ID0gLU51bWJlci5NQVhfVkFMVUU7DQoNCiAgICAgICAgICAgIGlmIChwYXJhbXMuZGV0YWlsVmVydHMgIT0gbnVsbCAmJiBwYXJhbXMuZGV0YWlsVmVydHNDb3VudCAhPSAwKSB7DQogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmRldGFpbFZlcnRzQ291bnQ7ICsraSkgew0KICAgICAgICAgICAgICAgIHZhciBfaCA9IHBhcmFtcy5kZXRhaWxWZXJ0c1tpICogMyArIDFdOw0KICAgICAgICAgICAgICAgIGhtaW4gPSBNYXRoLm1pbihobWluLCBfaCk7DQogICAgICAgICAgICAgICAgaG1heCA9IE1hdGgubWF4KGhtYXgsIF9oKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgcGFyYW1zLnZlcnRDb3VudDsgKytfaTMpIHsNCiAgICAgICAgICAgICAgICB2YXIgaXYgPSBfaTMgKiAzOw0KICAgICAgICAgICAgICAgIGggPSBwYXJhbXMuYm1pblsxXSArIHBhcmFtcy52ZXJ0c1tpdiArIDFdICogcGFyYW1zLmNoOw0KICAgICAgICAgICAgICAgIGhtaW4gPSBNYXRoLm1pbihobWluLCBoKTsNCiAgICAgICAgICAgICAgICBobWF4ID0gTWF0aC5tYXgoaG1heCwgaCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaG1pbiAtPSBwYXJhbXMud2Fsa2FibGVDbGltYjsNCiAgICAgICAgICAgIGhtYXggKz0gcGFyYW1zLndhbGthYmxlQ2xpbWI7DQogICAgICAgICAgICB2YXIgYm1pbiA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgIHZhciBibWF4ID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGJtaW4sIHBhcmFtcy5ibWluKTsNCiAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShibWF4LCBwYXJhbXMuYm1heCk7DQogICAgICAgICAgICBibWluWzFdID0gaG1pbjsNCiAgICAgICAgICAgIGJtYXhbMV0gPSBobWF4Ow0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBwYXJhbXMub2ZmTWVzaENvbkNvdW50OyArK19pNCkgew0KICAgICAgICAgICAgICB2YXIgcDAgPSBuZXcgVmVjdG9yUHRyJDEocGFyYW1zLm9mZk1lc2hDb25WZXJ0cywgKF9pNCAqIDIgKyAwKSAqIDMpOw0KICAgICAgICAgICAgICB2YXIgcDEgPSBuZXcgVmVjdG9yUHRyJDEocGFyYW1zLm9mZk1lc2hDb25WZXJ0cywgKF9pNCAqIDIgKyAxKSAqIDMpOw0KICAgICAgICAgICAgICBvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDBdID0gTmF2TWVzaEJ1aWxkZXIuY2xhc3NpZnlPZmZNZXNoUG9pbnQocDAsIGJtaW4sIGJtYXgpOw0KICAgICAgICAgICAgICBvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDFdID0gTmF2TWVzaEJ1aWxkZXIuY2xhc3NpZnlPZmZNZXNoUG9pbnQocDEsIGJtaW4sIGJtYXgpOyAvLyBaZXJvIG91dCBvZmYtbWVzaCBzdGFydCBwb3NpdGlvbnMgd2hpY2ggYXJlIG5vdCBldmVuDQogICAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IHRvdWNoaW5nIHRoZSBtZXNoLg0KDQogICAgICAgICAgICAgIGlmIChvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDBdID09IDB4ZmYpIHsNCiAgICAgICAgICAgICAgICBpZiAocDBbMV0gPCBibWluWzFdIHx8IHAwWzFdID4gYm1heFsxXSkgb2ZmTWVzaENvbkNsYXNzW19pNCAqIDIgKyAwXSA9IDA7DQogICAgICAgICAgICAgIH0gLy8gQ291bnQgaG93IG1hbnkgbGlua3Mgc2hvdWxkIGJlIGFsbG9jYXRlZCBmb3Igb2ZmLW1lc2gNCiAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbnMuDQoNCg0KICAgICAgICAgICAgICBpZiAob2ZmTWVzaENvbkNsYXNzW19pNCAqIDIgKyAwXSA9PSAweGZmKSBvZmZNZXNoQ29uTGlua0NvdW50Kys7DQogICAgICAgICAgICAgIGlmIChvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDFdID09IDB4ZmYpIG9mZk1lc2hDb25MaW5rQ291bnQrKzsNCiAgICAgICAgICAgICAgaWYgKG9mZk1lc2hDb25DbGFzc1tfaTQgKiAyICsgMF0gPT0gMHhmZikgc3RvcmVkT2ZmTWVzaENvbkNvdW50Kys7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBPZmYtbWVzaCBjb25uZWN0aW9uc3MgYXJlIHN0b3JlZCBhcyBwb2x5Z29ucywgYWRqdXN0IHZhbHVlcy4NCg0KDQogICAgICAgICAgdmFyIHRvdFBvbHlDb3VudCA9IHBhcmFtcy5wb2x5Q291bnQgKyBzdG9yZWRPZmZNZXNoQ29uQ291bnQ7DQogICAgICAgICAgdmFyIHRvdFZlcnRDb3VudCA9IHBhcmFtcy52ZXJ0Q291bnQgKyBzdG9yZWRPZmZNZXNoQ29uQ291bnQgKiAyOyAvLyBGaW5kIHBvcnRhbCBlZGdlcyB3aGljaCBhcmUgYXQgdGlsZSBib3JkZXJzLg0KDQogICAgICAgICAgdmFyIGVkZ2VDb3VudCA9IDA7DQogICAgICAgICAgdmFyIHBvcnRhbENvdW50ID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIF9pNSA9IDA7IF9pNSA8IHBhcmFtcy5wb2x5Q291bnQ7ICsrX2k1KSB7DQogICAgICAgICAgICB2YXIgcCA9IF9pNSAqIDIgKiBudnA7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnZwOyArK2opIHsNCiAgICAgICAgICAgICAgaWYgKHBhcmFtcy5wb2x5c1twICsgal0gPT0gTmF2TWVzaEJ1aWxkZXIuTUVTSF9OVUxMX0lEWCkgYnJlYWs7DQogICAgICAgICAgICAgIGVkZ2VDb3VudCsrOw0KDQogICAgICAgICAgICAgIGlmICgocGFyYW1zLnBvbHlzW3AgKyBudnAgKyBqXSAmIDB4ODAwMCkgIT0gMCkgew0KICAgICAgICAgICAgICAgIHZhciBkaXIgPSBwYXJhbXMucG9seXNbcCArIG52cCArIGpdICYgMHhmOw0KICAgICAgICAgICAgICAgIGlmIChkaXIgIT0gMHhmKSBwb3J0YWxDb3VudCsrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIG1heExpbmtDb3VudCA9IGVkZ2VDb3VudCArIHBvcnRhbENvdW50ICogMiArIG9mZk1lc2hDb25MaW5rQ291bnQgKiAyOyAvLyBGaW5kIHVuaXF1ZSBkZXRhaWwgdmVydGljZXMuDQoNCiAgICAgICAgICB2YXIgdW5pcXVlRGV0YWlsVmVydENvdW50ID0gMDsNCiAgICAgICAgICB2YXIgZGV0YWlsVHJpQ291bnQgPSAwOw0KDQogICAgICAgICAgaWYgKHBhcmFtcy5kZXRhaWxNZXNoZXMgIT0gbnVsbCkgew0KICAgICAgICAgICAgLy8gSGFzIGRldGFpbCBtZXNoLCBjb3VudCB1bmlxdWUgZGV0YWlsIHZlcnRleCBjb3VudCBhbmQgdXNlIGlucHV0DQogICAgICAgICAgICAvLyBkZXRhaWwgdHJpIGNvdW50Lg0KICAgICAgICAgICAgZGV0YWlsVHJpQ291bnQgPSBwYXJhbXMuZGV0YWlsVHJpQ291bnQ7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IHBhcmFtcy5wb2x5Q291bnQ7ICsrX2k2KSB7DQogICAgICAgICAgICAgIHZhciBfcCA9IF9pNiAqIG52cCAqIDI7DQoNCiAgICAgICAgICAgICAgdmFyIG5kdiA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbX2k2ICogNCArIDFdOw0KICAgICAgICAgICAgICB2YXIgbnYgPSAwOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9qMiA9IDA7IF9qMiA8IG52cDsgKytfajIpIHsNCiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnBvbHlzW19wICsgX2oyXSA9PSBOYXZNZXNoQnVpbGRlci5NRVNIX05VTExfSURYKSBicmVhazsNCiAgICAgICAgICAgICAgICBudisrOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgbmR2IC09IG52Ow0KICAgICAgICAgICAgICB1bmlxdWVEZXRhaWxWZXJ0Q291bnQgKz0gbmR2Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBObyBpbnB1dCBkZXRhaWwgbWVzaCwgYnVpbGQgZGV0YWlsIG1lc2ggZnJvbSBuYXYgcG9seXMuDQogICAgICAgICAgICB1bmlxdWVEZXRhaWxWZXJ0Q291bnQgPSAwOyAvLyBObyBleHRyYSBkZXRhaWwgdmVydHMuDQoNCiAgICAgICAgICAgIGRldGFpbFRyaUNvdW50ID0gMDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgcGFyYW1zLnBvbHlDb3VudDsgKytfaTcpIHsNCiAgICAgICAgICAgICAgdmFyIF9wMiA9IF9pNyAqIG52cCAqIDI7DQoNCiAgICAgICAgICAgICAgdmFyIF9udiA9IDA7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2ozID0gMDsgX2ozIDwgbnZwOyArK19qMykgew0KICAgICAgICAgICAgICAgIGlmIChwYXJhbXMucG9seXNbX3AyICsgX2ozXSA9PSBOYXZNZXNoQnVpbGRlci5NRVNIX05VTExfSURYKSBicmVhazsNCiAgICAgICAgICAgICAgICBfbnYrKzsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGRldGFpbFRyaUNvdW50ICs9IF9udiAtIDI7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGJ2VHJlZVNpemUgPSBwYXJhbXMuYnVpbGRCdlRyZWUgPyBwYXJhbXMucG9seUNvdW50ICogMiA6IDA7DQogICAgICAgICAgdmFyIGhlYWRlciA9IG5ldyBNZXNoSGVhZGVyKCk7DQogICAgICAgICAgdmFyIG5hdlZlcnRzID0gbmV3IEFycmF5KDMgKiB0b3RWZXJ0Q291bnQpOw0KICAgICAgICAgIHZhciBuYXZQb2x5cyA9IG5ldyBBcnJheSh0b3RQb2x5Q291bnQpOw0KICAgICAgICAgIHZhciBuYXZETWVzaGVzID0gbmV3IEFycmF5KHBhcmFtcy5wb2x5Q291bnQpOw0KICAgICAgICAgIHZhciBuYXZEVmVydHMgPSBuZXcgQXJyYXkoMyAqIHVuaXF1ZURldGFpbFZlcnRDb3VudCk7DQogICAgICAgICAgdmFyIG5hdkRUcmlzID0gbmV3IEFycmF5KDQgKiBkZXRhaWxUcmlDb3VudCk7DQogICAgICAgICAgdmFyIG5hdkJ2dHJlZSA9IG5ldyBBcnJheShidlRyZWVTaXplKTsNCiAgICAgICAgICB2YXIgb2ZmTWVzaENvbnMgPSBuZXcgQXJyYXkoc3RvcmVkT2ZmTWVzaENvbkNvdW50KTsgLy8gU3RvcmUgaGVhZGVyDQoNCiAgICAgICAgICBoZWFkZXIubWFnaWMgPSBNZXNoSGVhZGVyLkRUX05BVk1FU0hfTUFHSUM7DQogICAgICAgICAgaGVhZGVyLnZlcnNpb24gPSBNZXNoSGVhZGVyLkRUX05BVk1FU0hfVkVSU0lPTjsNCiAgICAgICAgICBoZWFkZXIueCA9IHBhcmFtcy50aWxlWDsNCiAgICAgICAgICBoZWFkZXIueSA9IHBhcmFtcy50aWxlWTsNCiAgICAgICAgICBoZWFkZXIubGF5ZXIgPSBwYXJhbXMudGlsZUxheWVyOw0KICAgICAgICAgIGhlYWRlci51c2VySWQgPSBwYXJhbXMudXNlcklkOw0KICAgICAgICAgIGhlYWRlci5wb2x5Q291bnQgPSB0b3RQb2x5Q291bnQ7DQogICAgICAgICAgaGVhZGVyLnZlcnRDb3VudCA9IHRvdFZlcnRDb3VudDsNCiAgICAgICAgICBoZWFkZXIubWF4TGlua0NvdW50ID0gbWF4TGlua0NvdW50Ow0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShoZWFkZXIuYm1pbiwgcGFyYW1zLmJtaW4pOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShoZWFkZXIuYm1heCwgcGFyYW1zLmJtYXgpOw0KICAgICAgICAgIGhlYWRlci5kZXRhaWxNZXNoQ291bnQgPSBwYXJhbXMucG9seUNvdW50Ow0KICAgICAgICAgIGhlYWRlci5kZXRhaWxWZXJ0Q291bnQgPSB1bmlxdWVEZXRhaWxWZXJ0Q291bnQ7DQogICAgICAgICAgaGVhZGVyLmRldGFpbFRyaUNvdW50ID0gZGV0YWlsVHJpQ291bnQ7DQogICAgICAgICAgaGVhZGVyLmJ2UXVhbnRGYWN0b3IgPSAxLjAgLyBwYXJhbXMuY3M7DQogICAgICAgICAgaGVhZGVyLm9mZk1lc2hCYXNlID0gcGFyYW1zLnBvbHlDb3VudDsNCiAgICAgICAgICBoZWFkZXIud2Fsa2FibGVIZWlnaHQgPSBwYXJhbXMud2Fsa2FibGVIZWlnaHQ7DQogICAgICAgICAgaGVhZGVyLndhbGthYmxlUmFkaXVzID0gcGFyYW1zLndhbGthYmxlUmFkaXVzOw0KICAgICAgICAgIGhlYWRlci53YWxrYWJsZUNsaW1iID0gcGFyYW1zLndhbGthYmxlQ2xpbWI7DQogICAgICAgICAgaGVhZGVyLm9mZk1lc2hDb25Db3VudCA9IHN0b3JlZE9mZk1lc2hDb25Db3VudDsNCiAgICAgICAgICBoZWFkZXIuYnZOb2RlQ291bnQgPSBidlRyZWVTaXplOw0KICAgICAgICAgIHZhciBvZmZNZXNoVmVydHNCYXNlID0gcGFyYW1zLnZlcnRDb3VudDsNCiAgICAgICAgICB2YXIgb2ZmTWVzaFBvbHlCYXNlID0gcGFyYW1zLnBvbHlDb3VudDsgLy8gU3RvcmUgdmVydGljZXMNCiAgICAgICAgICAvLyBNZXNoIHZlcnRpY2VzDQoNCiAgICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBwYXJhbXMudmVydENvdW50OyArK19pOCkgew0KICAgICAgICAgICAgdmFyIF9pdiA9IF9pOCAqIDM7DQoNCiAgICAgICAgICAgIHZhciB2ID0gX2k4ICogMzsNCiAgICAgICAgICAgIG5hdlZlcnRzW3ZdID0gcGFyYW1zLmJtaW5bMF0gKyBwYXJhbXMudmVydHNbX2l2XSAqIHBhcmFtcy5jczsNCiAgICAgICAgICAgIG5hdlZlcnRzW3YgKyAxXSA9IHBhcmFtcy5ibWluWzFdICsgcGFyYW1zLnZlcnRzW19pdiArIDFdICogcGFyYW1zLmNoOw0KICAgICAgICAgICAgbmF2VmVydHNbdiArIDJdID0gcGFyYW1zLmJtaW5bMl0gKyBwYXJhbXMudmVydHNbX2l2ICsgMl0gKiBwYXJhbXMuY3M7IC8vIGNvbnNvbGUubG9nKG5hdlZlcnRzKQ0KICAgICAgICAgIH0gLy8gT2ZmLW1lc2ggbGluayB2ZXJ0aWNlcy4NCg0KDQogICAgICAgICAgdmFyIG4gPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgX2k5ID0gMDsgX2k5IDwgcGFyYW1zLm9mZk1lc2hDb25Db3VudDsgKytfaTkpIHsNCiAgICAgICAgICAgIC8vIE9ubHkgc3RvcmUgY29ubmVjdGlvbnMgd2hpY2ggc3RhcnQgZnJvbSB0aGlzIHRpbGUuDQogICAgICAgICAgICBpZiAob2ZmTWVzaENvbkNsYXNzW19pOSAqIDIgKyAwXSA9PSAweGZmKSB7DQogICAgICAgICAgICAgIHZhciBsaW5rdiA9IF9pOSAqIDIgKiAzOw0KDQogICAgICAgICAgICAgIHZhciBfdiA9IChvZmZNZXNoVmVydHNCYXNlICsgbiAqIDIpICogMzsNCg0KICAgICAgICAgICAgICBhcnJheWNvcHkkMyhwYXJhbXMub2ZmTWVzaENvblZlcnRzLCBsaW5rdiwgbmF2VmVydHMsIF92LCA2KTsNCiAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gU3RvcmUgcG9seWdvbnMNCiAgICAgICAgICAvLyBNZXNoIHBvbHlzDQoNCg0KICAgICAgICAgIHZhciBzcmMgPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCBwYXJhbXMucG9seUNvdW50OyArK19pMTApIHsNCiAgICAgICAgICAgIHZhciBfcDMgPSBuZXcgUG9seShfaTEwLCBudnApOw0KDQogICAgICAgICAgICBuYXZQb2x5c1tfaTEwXSA9IF9wMzsNCiAgICAgICAgICAgIF9wMy52ZXJ0Q291bnQgPSAwOw0KICAgICAgICAgICAgX3AzLmZsYWdzID0gcGFyYW1zLnBvbHlGbGFnc1tfaTEwXTsNCg0KICAgICAgICAgICAgX3AzLnNldEFyZWEocGFyYW1zLnBvbHlBcmVhc1tfaTEwXSk7DQoNCiAgICAgICAgICAgIF9wMy5zZXRUeXBlKFBvbHkuRFRfUE9MWVRZUEVfR1JPVU5EKTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2o0ID0gMDsgX2o0IDwgbnZwOyArK19qNCkgew0KICAgICAgICAgICAgICBpZiAocGFyYW1zLnBvbHlzW3NyYyArIF9qNF0gPT0gTmF2TWVzaEJ1aWxkZXIuTUVTSF9OVUxMX0lEWCkgYnJlYWs7DQogICAgICAgICAgICAgIF9wMy52ZXJ0c1tfajRdID0gcGFyYW1zLnBvbHlzW3NyYyArIF9qNF07DQoNCiAgICAgICAgICAgICAgaWYgKChwYXJhbXMucG9seXNbc3JjICsgbnZwICsgX2o0XSAmIDB4ODAwMCkgIT0gMCkgew0KICAgICAgICAgICAgICAgIC8vIEJvcmRlciBvciBwb3J0YWwgZWRnZS4NCiAgICAgICAgICAgICAgICB2YXIgX2RpciA9IHBhcmFtcy5wb2x5c1tzcmMgKyBudnAgKyBfajRdICYgMHhmOw0KDQogICAgICAgICAgICAgICAgaWYgKF9kaXIgPT0gMHhmKSAvLyBCb3JkZXINCiAgICAgICAgICAgICAgICAgIF9wMy5uZWlzW19qNF0gPSAwO2Vsc2UgaWYgKF9kaXIgPT0gMCkgLy8gUG9ydGFsIHgtDQogICAgICAgICAgICAgICAgICBfcDMubmVpc1tfajRdID0gTmF2TWVzaC5EVF9FWFRfTElOSyB8IDQ7ZWxzZSBpZiAoX2RpciA9PSAxKSAvLyBQb3J0YWwgeisNCiAgICAgICAgICAgICAgICAgIF9wMy5uZWlzW19qNF0gPSBOYXZNZXNoLkRUX0VYVF9MSU5LIHwgMjtlbHNlIGlmIChfZGlyID09IDIpIC8vIFBvcnRhbCB4Kw0KICAgICAgICAgICAgICAgICAgX3AzLm5laXNbX2o0XSA9IE5hdk1lc2guRFRfRVhUX0xJTksgfCAwO2Vsc2UgaWYgKF9kaXIgPT0gMykgLy8gUG9ydGFsIHotDQogICAgICAgICAgICAgICAgICBfcDMubmVpc1tfajRdID0gTmF2TWVzaC5EVF9FWFRfTElOSyB8IDY7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gTm9ybWFsIGNvbm5lY3Rpb24NCiAgICAgICAgICAgICAgICBfcDMubmVpc1tfajRdID0gcGFyYW1zLnBvbHlzW3NyYyArIG52cCArIF9qNF0gKyAxOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgX3AzLnZlcnRDb3VudCsrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBzcmMgKz0gbnZwICogMjsNCiAgICAgICAgICB9IC8vIE9mZi1tZXNoIGNvbm5lY3Rpb24gdmVydGljZXMuDQoNCg0KICAgICAgICAgIG4gPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kxMSA9IDA7IF9pMTEgPCBwYXJhbXMub2ZmTWVzaENvbkNvdW50OyArK19pMTEpIHsNCiAgICAgICAgICAgIC8vIE9ubHkgc3RvcmUgY29ubmVjdGlvbnMgd2hpY2ggc3RhcnQgZnJvbSB0aGlzIHRpbGUuDQogICAgICAgICAgICBpZiAob2ZmTWVzaENvbkNsYXNzW19pMTEgKiAyICsgMF0gPT0gMHhmZikgew0KICAgICAgICAgICAgICB2YXIgX3A0ID0gbmV3IFBvbHkob2ZmTWVzaFBvbHlCYXNlICsgbiwgbnZwKTsNCg0KICAgICAgICAgICAgICBuYXZQb2x5c1tvZmZNZXNoUG9seUJhc2UgKyBuXSA9IF9wNDsNCiAgICAgICAgICAgICAgX3A0LnZlcnRDb3VudCA9IDI7DQogICAgICAgICAgICAgIF9wNC52ZXJ0c1swXSA9IG9mZk1lc2hWZXJ0c0Jhc2UgKyBuICogMjsNCiAgICAgICAgICAgICAgX3A0LnZlcnRzWzFdID0gb2ZmTWVzaFZlcnRzQmFzZSArIG4gKiAyICsgMTsNCiAgICAgICAgICAgICAgX3A0LmZsYWdzID0gcGFyYW1zLm9mZk1lc2hDb25GbGFnc1tfaTExXTsNCg0KICAgICAgICAgICAgICBfcDQuc2V0QXJlYShwYXJhbXMub2ZmTWVzaENvbkFyZWFzW19pMTFdKTsNCg0KICAgICAgICAgICAgICBfcDQuc2V0VHlwZShQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTik7DQoNCiAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gU3RvcmUgZGV0YWlsIG1lc2hlcyBhbmQgdmVydGljZXMuDQogICAgICAgICAgLy8gVGhlIG5hdiBwb2x5Z29uIHZlcnRpY2VzIGFyZSBzdG9yZWQgYXMgdGhlIGZpcnN0IHZlcnRpY2VzIG9uIGVhY2gNCiAgICAgICAgICAvLyBtZXNoLg0KICAgICAgICAgIC8vIFdlIGNvbXByZXNzIHRoZSBtZXNoIGRhdGEgYnkgc2tpcHBpbmcgdGhlbSBhbmQgdXNpbmcgdGhlIG5hdm1lc2gNCiAgICAgICAgICAvLyBjb29yZGluYXRlcy4NCg0KDQogICAgICAgICAgaWYgKHBhcmFtcy5kZXRhaWxNZXNoZXMgIT0gbnVsbCkgew0KICAgICAgICAgICAgdmFyIHZiYXNlID0gMDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDA7IF9pMTIgPCBwYXJhbXMucG9seUNvdW50OyArK19pMTIpIHsNCiAgICAgICAgICAgICAgdmFyIGR0bCA9IG5ldyBQb2x5RGV0YWlsKCk7DQogICAgICAgICAgICAgIG5hdkRNZXNoZXNbX2kxMl0gPSBkdGw7DQogICAgICAgICAgICAgIHZhciB2YiA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbX2kxMiAqIDQgKyAwXTsNCiAgICAgICAgICAgICAgdmFyIF9uZHYgPSBwYXJhbXMuZGV0YWlsTWVzaGVzW19pMTIgKiA0ICsgMV07DQogICAgICAgICAgICAgIHZhciBfbnYyID0gbmF2UG9seXNbX2kxMl0udmVydENvdW50Ow0KICAgICAgICAgICAgICBkdGwudmVydEJhc2UgPSB2YmFzZTsNCiAgICAgICAgICAgICAgZHRsLnZlcnRDb3VudCA9IF9uZHYgLSBfbnYyOw0KICAgICAgICAgICAgICBkdGwudHJpQmFzZSA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbX2kxMiAqIDQgKyAyXTsNCiAgICAgICAgICAgICAgZHRsLnRyaUNvdW50ID0gcGFyYW1zLmRldGFpbE1lc2hlc1tfaTEyICogNCArIDNdOyAvLyBDb3B5IHZlcnRpY2VzIGV4Y2VwdCB0aGUgZmlyc3QgJ252JyB2ZXJ0cyB3aGljaCBhcmUgZXF1YWwgdG8NCiAgICAgICAgICAgICAgLy8gbmF2IGxldCB2ZXJ0cy4NCg0KICAgICAgICAgICAgICBpZiAoX25kdiAtIF9udjIgIT0gMCkgew0KICAgICAgICAgICAgICAgIGFycmF5Y29weSQzKHBhcmFtcy5kZXRhaWxWZXJ0cywgKHZiICsgX252MikgKiAzLCBuYXZEVmVydHMsIHZiYXNlICogMywgMyAqIChfbmR2IC0gX252MikpOw0KICAgICAgICAgICAgICAgIHZiYXNlICs9IF9uZHYgLSBfbnYyOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIFN0b3JlIHRyaWFuZ2xlcy4NCg0KDQogICAgICAgICAgICBhcnJheWNvcHkkMyhwYXJhbXMuZGV0YWlsVHJpcywgMCwgbmF2RFRyaXMsIDAsIDQgKiBwYXJhbXMuZGV0YWlsVHJpQ291bnQpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBDcmVhdGUgZHVtbXkgZGV0YWlsIG1lc2ggYnkgdHJpYW5ndWxhdGluZyBwb2x5cy4NCiAgICAgICAgICAgIHZhciB0YmFzZSA9IDA7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pMTMgPSAwOyBfaTEzIDwgcGFyYW1zLnBvbHlDb3VudDsgKytfaTEzKSB7DQogICAgICAgICAgICAgIHZhciBfZHRsID0gbmV3IFBvbHlEZXRhaWwoKTsNCg0KICAgICAgICAgICAgICBuYXZETWVzaGVzW19pMTNdID0gX2R0bDsNCiAgICAgICAgICAgICAgdmFyIF9udjMgPSBuYXZQb2x5c1tfaTEzXS52ZXJ0Q291bnQ7DQogICAgICAgICAgICAgIF9kdGwudmVydEJhc2UgPSAwOw0KICAgICAgICAgICAgICBfZHRsLnZlcnRDb3VudCA9IDA7DQogICAgICAgICAgICAgIF9kdGwudHJpQmFzZSA9IHRiYXNlOw0KICAgICAgICAgICAgICBfZHRsLnRyaUNvdW50ID0gX252MyAtIDI7IC8vIFRyaWFuZ3VsYXRlIHBvbHlnb24gKGxvY2FsIGluZGljZXMpLg0KDQogICAgICAgICAgICAgIGZvciAodmFyIF9qNSA9IDI7IF9qNSA8IF9udjM7ICsrX2o1KSB7DQogICAgICAgICAgICAgICAgdmFyIHQgPSB0YmFzZSAqIDQ7DQogICAgICAgICAgICAgICAgbmF2RFRyaXNbdCArIDBdID0gMDsNCiAgICAgICAgICAgICAgICBuYXZEVHJpc1t0ICsgMV0gPSBfajUgLSAxOw0KICAgICAgICAgICAgICAgIG5hdkRUcmlzW3QgKyAyXSA9IF9qNTsgLy8gQml0IGZvciBlYWNoIGVkZ2UgdGhhdCBiZWxvbmdzIHRvIGxldCBib3VuZGFyeS4NCg0KICAgICAgICAgICAgICAgIG5hdkRUcmlzW3QgKyAzXSA9IDEgPDwgMjsNCiAgICAgICAgICAgICAgICBpZiAoX2o1ID09IDIpIG5hdkRUcmlzW3QgKyAzXSB8PSAxIDw8IDA7DQogICAgICAgICAgICAgICAgaWYgKF9qNSA9PSBfbnYzIC0gMSkgbmF2RFRyaXNbdCArIDNdIHw9IDEgPDwgNDsNCiAgICAgICAgICAgICAgICB0YmFzZSsrOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBTdG9yZSBhbmQgY3JlYXRlIEJWdHJlZS4NCiAgICAgICAgICAvLyBUT0RPOiB0YWtlIGRldGFpbCBtZXNoIGludG8gYWNjb3VudCEgdXNlIGJ5dGUgcGVyIGJib3ggZXh0ZW50Pw0KDQoNCiAgICAgICAgICBpZiAocGFyYW1zLmJ1aWxkQnZUcmVlKSB7DQogICAgICAgICAgICAvLyBEbyBub3Qgc2V0IGhlYWRlci5idk5vZGVDb3VudCBzZXQgdG8gbWFrZSBpdCB3b3JrIGxvb2sgZXhhY3RseSB0aGUgc2FtZSBhcyBpbiBvcmlnaW5hbCBEZXRvdXIgIA0KICAgICAgICAgICAgaGVhZGVyLmJ2Tm9kZUNvdW50ID0gTmF2TWVzaEJ1aWxkZXIuY3JlYXRlQlZUcmVlKHBhcmFtcywgbmF2QnZ0cmVlKTsNCiAgICAgICAgICB9IC8vIFN0b3JlIE9mZi1NZXNoIGNvbm5lY3Rpb25zLg0KDQoNCiAgICAgICAgICBuID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwgcGFyYW1zLm9mZk1lc2hDb25Db3VudDsgKytfaTE0KSB7DQogICAgICAgICAgICAvLyBPbmx5IHN0b3JlIGNvbm5lY3Rpb25zIHdoaWNoIHN0YXJ0IGZyb20gdGhpcyB0aWxlLg0KICAgICAgICAgICAgaWYgKG9mZk1lc2hDb25DbGFzc1tfaTE0ICogMiArIDBdID09IDB4ZmYpIHsNCiAgICAgICAgICAgICAgdmFyIGNvbiA9IG5ldyBPZmZNZXNoQ29ubmVjdGlvbigpOw0KICAgICAgICAgICAgICBvZmZNZXNoQ29uc1tuXSA9IGNvbjsNCiAgICAgICAgICAgICAgY29uLnBvbHkgPSBvZmZNZXNoUG9seUJhc2UgKyBuOyAvLyBDb3B5IGNvbm5lY3Rpb24gZW5kLXBvaW50cy4NCg0KICAgICAgICAgICAgICB2YXIgZW5kUHRzID0gX2kxNCAqIDIgKiAzOw0KICAgICAgICAgICAgICBhcnJheWNvcHkkMyhwYXJhbXMub2ZmTWVzaENvblZlcnRzLCBlbmRQdHMsIGNvbi5wb3MsIDAsIDYpOw0KICAgICAgICAgICAgICBjb24ucmFkID0gcGFyYW1zLm9mZk1lc2hDb25SYWRbX2kxNF07DQogICAgICAgICAgICAgIGNvbi5mbGFncyA9IHBhcmFtcy5vZmZNZXNoQ29uRGlyW19pMTRdICE9IDAgPyBOYXZNZXNoLkRUX09GRk1FU0hfQ09OX0JJRElSIDogMDsNCiAgICAgICAgICAgICAgY29uLnNpZGUgPSBvZmZNZXNoQ29uQ2xhc3NbX2kxNCAqIDIgKyAxXTsNCiAgICAgICAgICAgICAgaWYgKHBhcmFtcy5vZmZNZXNoQ29uVXNlcklEICE9IG51bGwpIGNvbi51c2VySWQgPSBwYXJhbXMub2ZmTWVzaENvblVzZXJJRFtfaTE0XTsNCiAgICAgICAgICAgICAgbisrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBubWQgPSBuZXcgTWVzaERhdGEoKTsNCiAgICAgICAgICBubWQuaGVhZGVyID0gaGVhZGVyOw0KICAgICAgICAgIG5tZC52ZXJ0cyA9IG5hdlZlcnRzOw0KICAgICAgICAgIG5tZC5wb2x5cyA9IG5hdlBvbHlzOw0KICAgICAgICAgIG5tZC5kZXRhaWxNZXNoZXMgPSBuYXZETWVzaGVzOw0KICAgICAgICAgIG5tZC5kZXRhaWxWZXJ0cyA9IG5hdkRWZXJ0czsNCiAgICAgICAgICBubWQuZGV0YWlsVHJpcyA9IG5hdkRUcmlzOw0KICAgICAgICAgIG5tZC5idlRyZWUgPSBuYXZCdnRyZWU7DQogICAgICAgICAgbm1kLm9mZk1lc2hDb25zID0gb2ZmTWVzaENvbnM7DQogICAgICAgICAgcmV0dXJuIG5tZDsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gTmF2TWVzaEJ1aWxkZXI7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2hCdWlsZGVyLCAiTUVTSF9OVUxMX0lEWCIsIDB4ZmZmZik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsICJYUCIsIDEgPDwgMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsICJaUCIsIDEgPDwgMSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsICJYTSIsIDEgPDwgMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsICJaTSIsIDEgPDwgMyk7DQoNCiAgICB2YXIgUmVjYXN0VGVzdE1lc2hCdWlsZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFJlY2FzdFRlc3RNZXNoQnVpbGRlcihtX2dlb20sIG1fcGFydGl0aW9uVHlwZSwgbV9jZWxsU2l6ZSwgbV9jZWxsSGVpZ2h0LCBtX2FnZW50SGVpZ2h0LCBtX2FnZW50UmFkaXVzLCBtX2FnZW50TWF4Q2xpbWIsIG1fYWdlbnRNYXhTbG9wZSwgbV9yZWdpb25NaW5TaXplLCBtX3JlZ2lvbk1lcmdlU2l6ZSwgbV9lZGdlTWF4TGVuLCBtX2VkZ2VNYXhFcnJvciwgbV92ZXJ0c1BlclBvbHksIG1fZGV0YWlsU2FtcGxlRGlzdCwgbV9kZXRhaWxTYW1wbGVNYXhFcnJvcikgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0VGVzdE1lc2hCdWlsZGVyKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1lc2hEYXRhIiwgdm9pZCAwKTsNCg0KICAgICAgICB2YXIgY2ZnID0gbmV3IFJlY2FzdENvbmZpZyhtX3BhcnRpdGlvblR5cGUsIG1fY2VsbFNpemUsIG1fY2VsbEhlaWdodCwgbV9hZ2VudEhlaWdodCwgbV9hZ2VudFJhZGl1cywgbV9hZ2VudE1heENsaW1iLCBtX2FnZW50TWF4U2xvcGUsIG1fcmVnaW9uTWluU2l6ZSwgbV9yZWdpb25NZXJnZVNpemUsIG1fZWRnZU1heExlbiwgbV9lZGdlTWF4RXJyb3IsIG1fdmVydHNQZXJQb2x5LCBtX2RldGFpbFNhbXBsZURpc3QsIG1fZGV0YWlsU2FtcGxlTWF4RXJyb3IsIDAsIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9BUkVBTU9EX0dST1VORCk7DQogICAgICAgIHZhciBiY2ZnID0gbmV3IFJlY2FzdEJ1aWxkZXJDb25maWckMShjZmcsIG1fZ2VvbS5nZXRNZXNoQm91bmRzTWluKCksIG1fZ2VvbS5nZXRNZXNoQm91bmRzTWF4KCkpOw0KICAgICAgICB2YXIgcmNCdWlsZGVyID0gbmV3IFJlY2FzdEJ1aWxkZXIoKTsNCiAgICAgICAgdmFyIHJjUmVzdWx0ID0gcmNCdWlsZGVyLmJ1aWxkKG1fZ2VvbSwgYmNmZyk7DQogICAgICAgIHZhciBtX3BtZXNoID0gcmNSZXN1bHQuZ2V0TWVzaCgpOw0KDQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbV9wbWVzaC5ucG9seXM7ICsraSkgew0KICAgICAgICAgIG1fcG1lc2guZmxhZ3NbaV0gPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIG1fZG1lc2ggPSByY1Jlc3VsdC5nZXRNZXNoRGV0YWlsKCk7DQogICAgICAgIHZhciBwYXJhbXMgPSBuZXcgTmF2TWVzaERhdGFDcmVhdGVQYXJhbXMoKTsNCiAgICAgICAgcGFyYW1zLnZlcnRzID0gbV9wbWVzaC52ZXJ0czsNCiAgICAgICAgcGFyYW1zLnZlcnRDb3VudCA9IG1fcG1lc2gubnZlcnRzOw0KICAgICAgICBwYXJhbXMucG9seXMgPSBtX3BtZXNoLnBvbHlzOw0KICAgICAgICBwYXJhbXMucG9seUFyZWFzID0gbV9wbWVzaC5hcmVhczsNCiAgICAgICAgcGFyYW1zLnBvbHlGbGFncyA9IG1fcG1lc2guZmxhZ3M7DQogICAgICAgIHBhcmFtcy5wb2x5Q291bnQgPSBtX3BtZXNoLm5wb2x5czsNCiAgICAgICAgcGFyYW1zLm52cCA9IG1fcG1lc2gubnZwOw0KICAgICAgICBwYXJhbXMuZGV0YWlsTWVzaGVzID0gbV9kbWVzaC5tZXNoZXM7DQogICAgICAgIHBhcmFtcy5kZXRhaWxWZXJ0cyA9IG1fZG1lc2gudmVydHM7DQogICAgICAgIHBhcmFtcy5kZXRhaWxWZXJ0c0NvdW50ID0gbV9kbWVzaC5udmVydHM7DQogICAgICAgIHBhcmFtcy5kZXRhaWxUcmlzID0gbV9kbWVzaC50cmlzOw0KICAgICAgICBwYXJhbXMuZGV0YWlsVHJpQ291bnQgPSBtX2RtZXNoLm50cmlzOw0KICAgICAgICBwYXJhbXMud2Fsa2FibGVIZWlnaHQgPSBtX2FnZW50SGVpZ2h0Ow0KICAgICAgICBwYXJhbXMud2Fsa2FibGVSYWRpdXMgPSBtX2FnZW50UmFkaXVzOw0KICAgICAgICBwYXJhbXMud2Fsa2FibGVDbGltYiA9IG1fYWdlbnRNYXhDbGltYjsNCiAgICAgICAgcGFyYW1zLmJtaW4gPSBtX3BtZXNoLmJtaW47DQogICAgICAgIHBhcmFtcy5ibWF4ID0gbV9wbWVzaC5ibWF4Ow0KICAgICAgICBwYXJhbXMuY3MgPSBtX2NlbGxTaXplOw0KICAgICAgICBwYXJhbXMuY2ggPSBtX2NlbGxIZWlnaHQ7DQogICAgICAgIHBhcmFtcy5idWlsZEJ2VHJlZSA9IHRydWU7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHMgPSBuZXcgQXJyYXkoNik7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHNbMF0gPSAwLjE7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHNbMV0gPSAwLjI7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHNbMl0gPSAwLjM7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHNbM10gPSAwLjQ7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHNbNF0gPSAwLjU7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVmVydHNbNV0gPSAwLjY7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uUmFkID0gbmV3IEFycmF5KDEpOw0KICAgICAgICBwYXJhbXMub2ZmTWVzaENvblJhZFswXSA9IDAuMTsNCiAgICAgICAgcGFyYW1zLm9mZk1lc2hDb25EaXIgPSBuZXcgQXJyYXkoMSk7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uRGlyWzBdID0gMTsNCiAgICAgICAgcGFyYW1zLm9mZk1lc2hDb25BcmVhcyA9IG5ldyBBcnJheSgxKTsNCiAgICAgICAgcGFyYW1zLm9mZk1lc2hDb25BcmVhc1swXSA9IDI7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uRmxhZ3MgPSBuZXcgQXJyYXkoMSk7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uRmxhZ3NbMF0gPSAxMjsNCiAgICAgICAgcGFyYW1zLm9mZk1lc2hDb25Vc2VySUQgPSBuZXcgQXJyYXkoMSk7DQogICAgICAgIHBhcmFtcy5vZmZNZXNoQ29uVXNlcklEWzBdID0gMHg0NTY3Ow0KICAgICAgICBwYXJhbXMub2ZmTWVzaENvbkNvdW50ID0gMTsNCiAgICAgICAgdGhpcy5tZXNoRGF0YSA9IE5hdk1lc2hCdWlsZGVyLmNyZWF0ZU5hdk1lc2hEYXRhKHBhcmFtcyk7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFt7DQogICAgICAgIGtleTogImdldE1lc2hEYXRhIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1lc2hEYXRhKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1lc2hEYXRhOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBSZWNhc3RUZXN0TWVzaEJ1aWxkZXI7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFRlc3RNZXNoQnVpbGRlciwgIm1fY2VsbFNpemUiLCAwLjMpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFRlc3RNZXNoQnVpbGRlciwgIm1fY2VsbEhlaWdodCIsIDAuMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCAibV9hZ2VudEhlaWdodCIsIDIuMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCAibV9hZ2VudFJhZGl1cyIsIDAuNik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCAibV9hZ2VudE1heENsaW1iIiwgMC45KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsICJtX2FnZW50TWF4U2xvcGUiLCA0NS4wKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsICJtX3JlZ2lvbk1pblNpemUiLCA4KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsICJtX3JlZ2lvbk1lcmdlU2l6ZSIsIDIwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsICJtX2VkZ2VNYXhMZW4iLCAxMi4wKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsICJtX2VkZ2VNYXhFcnJvciIsIDEuMyk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCAibV92ZXJ0c1BlclBvbHkiLCA2KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsICJtX2RldGFpbFNhbXBsZURpc3QiLCA2LjApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFRlc3RNZXNoQnVpbGRlciwgIm1fZGV0YWlsU2FtcGxlTWF4RXJyb3IiLCAxLjApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFRlc3RNZXNoQnVpbGRlciwgImZyb21GaWxlIiwgZnVuY3Rpb24gKG9iakZpbGVDb250ZW50cykgew0KICAgICAgcmV0dXJuIG5ldyBSZWNhc3RUZXN0TWVzaEJ1aWxkZXIobmV3IE9iakltcG9ydGVyKCkubG9hZChvYmpGaWxlQ29udGVudHMpLCBSZWNhc3RDb25zdGFudHMuV0FURVJTSEVELCB0aGlzLm1fY2VsbFNpemUsIHRoaXMubV9jZWxsSGVpZ2h0LCB0aGlzLm1fYWdlbnRIZWlnaHQsIHRoaXMubV9hZ2VudFJhZGl1cywgdGhpcy5tX2FnZW50TWF4Q2xpbWIsIHRoaXMubV9hZ2VudE1heFNsb3BlLCB0aGlzLm1fcmVnaW9uTWluU2l6ZSwgdGhpcy5tX3JlZ2lvbk1lcmdlU2l6ZSwgdGhpcy5tX2VkZ2VNYXhMZW4sIHRoaXMubV9lZGdlTWF4RXJyb3IsIHRoaXMubV92ZXJ0c1BlclBvbHksIHRoaXMubV9kZXRhaWxTYW1wbGVEaXN0LCB0aGlzLm1fZGV0YWlsU2FtcGxlTWF4RXJyb3IpOw0KICAgIH0pOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBOb2RlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIC8qKiBwYXJlbnQgb2YgdGhlIG5vZGUgaXMgbm90IGFkamFjZW50LiBGb3VuZCB1c2luZyByYXljYXN0LiAqLw0KDQogICAgICAvKiogUG9zaXRpb24gb2YgdGhlIG5vZGUuICovDQoNCiAgICAgIC8qKiBDb3N0IGZyb20gcHJldmlvdXMgbm9kZSB0byBjdXJyZW50IG5vZGUuICovDQoNCiAgICAgIC8qKiBDb3N0IHVwIHRvIHRoZSBub2RlLiAqLw0KDQogICAgICAvKiogSW5kZXggdG8gcGFyZW50IG5vZGUuICovDQoNCiAgICAgIC8qKiBleHRyYSBzdGF0ZSBpbmZvcm1hdGlvbi4gQSBwb2x5UmVmIGNhbiBoYXZlIG11bHRpcGxlIG5vZGVzIHdpdGggZGlmZmVyZW50IGV4dHJhIGluZm8uIHNlZSBEVF9NQVhfU1RBVEVTX1BFUl9OT0RFICovDQoNCiAgICAgIC8qKiBOb2RlIGZsYWdzLiBBIGNvbWJpbmF0aW9uIG9mIGR0Tm9kZUZsYWdzLiAqLw0KDQogICAgICAvKiogUG9seWdvbiByZWYgdGhlIG5vZGUgY29ycmVzcG9uZHMgdG8uICovDQogICAgICBmdW5jdGlvbiBOb2RlKGluZGV4KSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb2RlKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImluZGV4IiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwb3MiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29zdCIsIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidG90YWwiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBpZHgiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXRlIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmbGFncyIsIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaWQiLCAwKTsNCg0KICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhOb2RlLCBbew0KICAgICAgICBrZXk6ICJ0b1N0cmluZyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHsNCiAgICAgICAgICByZXR1cm4gIk5vZGUgW2lkPSIgKyBpZCArICJdIjsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gTm9kZTsNCiAgICB9KCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTm9kZSwgIkRUX05PREVfT1BFTiIsIDB4MDEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5vZGUsICJEVF9OT0RFX0NMT1NFRCIsIDB4MDIpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5vZGUsICJEVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCIsIDB4MDQpOw0KDQogICAgdmFyIE5vZGVQb29sID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIE5vZGVQb29sKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm9kZVBvb2wpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9tYXAiLCBbXSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX25vZGVzIiwgW10pOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoTm9kZVBvb2wsIFt7DQogICAgICAgIGtleTogImNsZWFyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgew0KICAgICAgICAgIHRoaXMubV9ub2RlcyA9IFtdOw0KICAgICAgICAgIHRoaXMubV9tYXAgPSBbXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJmaW5kTm9kZXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZE5vZGVzKGlkKSB7DQogICAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5tX21hcFtpZF07DQoNCiAgICAgICAgICBpZiAobm9kZXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgbm9kZXMgPSBbXTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbm9kZXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmluZE5vZGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZE5vZGUoaWQpIHsNCiAgICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLm1fbWFwW2lkXTsNCg0KICAgICAgICAgIGlmIChub2RlcyAhPSBudWxsICYmICFub2Rlcy5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuIG5vZGVzWzBdOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmROb2RlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmROb2RlKGlkLCBzdGF0ZSkgew0KICAgICAgICAgIHZhciBub2RlcyA9IHRoaXMubV9tYXBbaWRdOw0KDQogICAgICAgICAgaWYgKG5vZGVzICE9IG51bGwpIHsNCiAgICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksDQogICAgICAgICAgICAgICAgX3N0ZXA7DQoNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcC52YWx1ZTsNCg0KICAgICAgICAgICAgICAgIGlmIChub2RlLnN0YXRlID09IHN0YXRlKSB7DQogICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXROb2RlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5vZGUoaWQpIHsNCiAgICAgICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7DQogICAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5tX21hcFtpZF07DQoNCiAgICAgICAgICBpZiAobm9kZXMgIT0gbnVsbCkgew0KICAgICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksDQogICAgICAgICAgICAgICAgX3N0ZXAyOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgew0KICAgICAgICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAyLnZhbHVlOw0KDQogICAgICAgICAgICAgICAgaWYgKG5vZGUuc3RhdGUgPT0gc3RhdGUpIHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOw0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlKGlkLCBzdGF0ZSk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY3JlYXRlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShpZCwgc3RhdGUpIHsNCiAgICAgICAgICB2YXIgbm9kZSA9IG5ldyBOb2RlKHRoaXMubV9ub2Rlcy5sZW5ndGggKyAxKTsNCiAgICAgICAgICBub2RlLmlkID0gaWQ7DQogICAgICAgICAgbm9kZS5zdGF0ZSA9IHN0YXRlOw0KICAgICAgICAgIHRoaXMubV9ub2Rlcy5wdXNoKG5vZGUpOw0KICAgICAgICAgIHZhciBub2RlcyA9IHRoaXMubV9tYXBbaWRdOw0KDQogICAgICAgICAgaWYgKG5vZGVzID09IG51bGwpIHsNCiAgICAgICAgICAgIG5vZGVzID0gW107DQogICAgICAgICAgICB0aGlzLm1fbWFwW2lkXSA9IG5vZGVzOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7DQogICAgICAgICAgcmV0dXJuIG5vZGU7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0Tm9kZUlkeCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROb2RlSWR4KG5vZGUpIHsNCiAgICAgICAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5pbmRleCA6IDA7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0Tm9kZUF0SWR4IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5vZGVBdElkeChpZHgpIHsNCiAgICAgICAgICByZXR1cm4gaWR4ICE9IDAgPyB0aGlzLm1fbm9kZXNbaWR4IC0gMV0gOiBudWxsOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldE5vZGVDb3VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROb2RlQ291bnQoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9ub2Rlcy5sZW5ndGg7DQogICAgICAgIH0gLy8gZ2V0Tm9kZShyZWYpIHsNCiAgICAgICAgLy8gcmV0dXJuIHRoaXMuZ2V0Tm9kZShyZWYsIDApOw0KICAgICAgICAvLyB9DQoNCiAgICAgICAgLyoNCiAgICAgICAgDQogICAgICAgIGlubGluZSBsZXQgZ2V0TWF4Tm9kZXMoKSBjb25zdCB7IHJldHVybiBtX21heE5vZGVzOyB9DQogICAgICAgIGlubGluZSBkdE5vZGVJbmRleCBnZXRGaXJzdChidWNrZXQpIGNvbnN0IHsgcmV0dXJuIG1fZmlyc3RbYnVja2V0XTsgfQ0KICAgICAgICBpbmxpbmUgZHROb2RlSW5kZXggZ2V0TmV4dChpKSBjb25zdCB7IHJldHVybiBtX25leHRbaV07IH0NCiAgICAgICAgKi8NCg0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gTm9kZVBvb2w7DQogICAgfSgpOw0KDQogICAgLy9odHRwczovL3RydWV0b2NvZGUuY29tL2JpbmFyeS10cmVlbWF4LWhlYXAtcHJpb3JpdHktcXVldWUtYW5kLWltcGxlbWVudGF0aW9uLXVzaW5nLWphdmFzY3JpcHQvNDI3Lw0KICAgIHZhciBQcmlvcml0eVF1ZXVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUoY29tcGFyYXRvcikgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJpb3JpdHlRdWV1ZSk7DQoNCiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gY29tcGFyYXRvcjsNCiAgICAgICAgdGhpcy5hcnJheSA9IFtdOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoUHJpb3JpdHlRdWV1ZSwgW3sNCiAgICAgICAga2V5OiAiaXNFbXB0eSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA9PSAwOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInBvbGwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcG9sbCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5hcnJheS5zcGxpY2UoMCwgMSlbMF07DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaW5zZXJ0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluc2VydChlbGVtZW50KSB7DQogICAgICAgICAgdGhpcy5wdXNoKGVsZW1lbnQpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInB1c2giLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaChlbGVtZW50KSB7DQogICAgICAgICAgdGhpcy5hcnJheS5wdXNoKGVsZW1lbnQpOw0KICAgICAgICAgIHRoaXMuYXJyYXkuc29ydCh0aGlzLmNvbXBhcmF0b3IpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogIm9mZmVyIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9mZmVyKGVsZW1lbnQpIHsNCiAgICAgICAgICB0aGlzLnB1c2goZWxlbWVudCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmVtb3ZlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShlbGVtZW50KSB7DQogICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5hcnJheS5pbmRleE9mKGVsZW1lbnQpOw0KICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB0aGlzLmFycmF5LnNwbGljZShpbmRleCwgMSk7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIFByaW9yaXR5UXVldWU7DQogICAgfSgpOw0KDQogICAgZnVuY3Rpb24gY29tcGFyZShvbmUsIHR3bykgew0KICAgICAgaWYgKG9uZSA9PSB0d28pIHJldHVybiAwOw0KICAgICAgaWYgKG9uZSA8IHR3bykgcmV0dXJuIC0xO2Vsc2UgcmV0dXJuIDE7DQogICAgfQ0KDQogICAgdmFyIE5vZGVRdWV1ZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBOb2RlUXVldWUoKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb2RlUXVldWUpOw0KDQogICAgICAgIHRoaXMubV9oZWFwID0gbmV3IFByaW9yaXR5UXVldWUoZnVuY3Rpb24gKG4xLCBuMikgew0KICAgICAgICAgIHJldHVybiBjb21wYXJlKG4xLnRvdGFsLCBuMi50b3RhbCk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoTm9kZVF1ZXVlLCBbew0KICAgICAgICBrZXk6ICJjbGVhciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsNCiAgICAgICAgICB0aGlzLm1faGVhcCA9IG5ldyBQcmlvcml0eVF1ZXVlKGZ1bmN0aW9uIChuMSwgbjIpIHsNCiAgICAgICAgICAgIHJldHVybiBjb21wYXJlKG4xLnRvdGFsLCBuMi50b3RhbCk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidG9wIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvcCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX2hlYXAucGVlaygpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInBvcCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwb3AoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9oZWFwLnBvbGwoKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJwdXNoIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2gobm9kZSkgew0KICAgICAgICAgIHRoaXMubV9oZWFwLmluc2VydChub2RlKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtb2RpZnkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kaWZ5KG5vZGUpIHsNCiAgICAgICAgICB0aGlzLm1faGVhcC5yZW1vdmUobm9kZSk7DQogICAgICAgICAgdGhpcy5tX2hlYXAub2ZmZXIobm9kZSk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaXNFbXB0eSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1faGVhcC5pc0VtcHR5KCk7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIE5vZGVRdWV1ZTsNCiAgICB9KCk7DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQogICAgdmFyIFF1ZXJ5RGF0YSA9IGZ1bmN0aW9uIFF1ZXJ5RGF0YSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBRdWVyeURhdGEpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXR1cyIsIG51bGwpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxhc3RCZXN0Tm9kZSIsIG51bGwpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxhc3RCZXN0Tm9kZUNvc3QiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdGFydFJlZiIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgNSwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJlbmRSZWYiLCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdGFydFBvcyIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZW5kUG9zIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJmaWx0ZXIiLCBudWxsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvcHRpb25zIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmF5Y2FzdExpbWl0U3FyIiwgMCk7DQogICAgfTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCiAgICB2YXIgU3RhdHVzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFN0YXR1cyhpblZhbHVlKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0dXMpOw0KDQogICAgICAgIHRoaXMudmFsdWUgPSBpblZhbHVlOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoU3RhdHVzLCBbew0KICAgICAgICBrZXk6ICJpc0ZhaWxlZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZhaWxlZCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PSBTdGF0dXMuRkFJTFVSRTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc0luUHJvZ3Jlc3MiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNJblByb2dyZXNzKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09IFN0YXR1cy5JTl9QUk9HUkVTUzsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc1N1Y2Nlc3MiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNTdWNjZXNzKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09IFN0YXR1cy5TVUNDU0VTUyB8fCB0aGlzLnZhbHVlID09IFN0YXR1cy5QQVJUSUFMX1JFU1VMVDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc1BhcnRpYWwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNQYXJ0aWFsKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09IFN0YXR1cy5QQVJUSUFMX1JFU1VMVDsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gU3RhdHVzOw0KICAgIH0oKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTdGF0dXMsICJGQUlMVVJFIiwgMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoU3RhdHVzLCAiU1VDQ1NFU1MiLCAxKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShTdGF0dXMsICJJTl9QUk9HUkVTUyIsIDIpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFN0YXR1cywgIlBBUlRJQUxfUkVTVUxUIiwgMyk7DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQogICAgLy9UT0RPOiAoUFApIEFkZCBjb21tZW50cw0KICAgIHZhciBVcGRhdGVTbGljZWRQYXRoUmVzdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQoc3RhdHVzLCBpdGVyYXRpb25zKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVcGRhdGVTbGljZWRQYXRoUmVzdWx0KTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXR1cyIsIG51bGwpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXRlcmF0aW9ucyIsIDApOw0KDQogICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzOw0KICAgICAgICB0aGlzLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCwgW3sNCiAgICAgICAga2V5OiAiZ2V0U3RhdHVzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0YXR1cygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0SXRlcmF0aW9ucyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVyYXRpb25zKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLml0ZXJhdGlvbnM7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQ7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBGaW5kUGF0aFJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICAvLy8gIEBwYXJhbVtvdXRdCXBhdGgJCUFuIG9yZGVyZWQgbGlzdCBvZiBwb2x5Z29uIHJlZmVyZW5jZXMgcmVwcmVzZW50aW5nIHRoZSBwYXRoLiAoU3RhcnQgdG8gZW5kLikgDQogICAgICBmdW5jdGlvbiBGaW5kUGF0aFJlc3VsdChzdGF0dXMsIHJlZnMpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbmRQYXRoUmVzdWx0KTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXR1cyIsIG51bGwpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVmcyIsIFtdKTsNCg0KICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1czsNCiAgICAgICAgdGhpcy5yZWZzID0gcmVmczsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKEZpbmRQYXRoUmVzdWx0LCBbew0KICAgICAgICBrZXk6ICJnZXRTdGF0dXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U3RhdHVzKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnN0YXR1czsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRSZWZzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlZnMoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMucmVmczsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gRmluZFBhdGhSZXN1bHQ7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIC8vVE9ETzogKFBQKSBBZGQgY29tbWVudHMNCiAgICB2YXIgRmluZExvY2FsTmVpZ2hib3VyaG9vZFJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBGaW5kTG9jYWxOZWlnaGJvdXJob29kUmVzdWx0KHJlZnMsIHBhcmVudFJlZnMpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbmRMb2NhbE5laWdoYm91cmhvb2RSZXN1bHQpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicmVmcyIsIFtdKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBhcmVudFJlZnMiLCBbXSk7DQoNCiAgICAgICAgdGhpcy5yZWZzID0gcmVmczsNCiAgICAgICAgdGhpcy5wYXJlbnRSZWZzID0gcGFyZW50UmVmczsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKEZpbmRMb2NhbE5laWdoYm91cmhvb2RSZXN1bHQsIFt7DQogICAgICAgIGtleTogImdldFJlZnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVmcygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5yZWZzOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFBhcmVudFJlZnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyZW50UmVmcygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRSZWZzOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBGaW5kTG9jYWxOZWlnaGJvdXJob29kUmVzdWx0Ow0KICAgIH0oKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCiAgICB2YXIgR2V0UG9seVdhbGxTZWdtZW50c1Jlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBmdW5jdGlvbiBHZXRQb2x5V2FsbFNlZ21lbnRzUmVzdWx0KHNlZ21lbnRWZXJ0cywgc2VnbWVudFJlZnMpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdldFBvbHlXYWxsU2VnbWVudHNSZXN1bHQpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2VnbWVudFZlcnRzIiwgW10pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2VnbWVudFJlZnMiLCBbXSk7DQoNCiAgICAgICAgdGhpcy5zZWdtZW50VmVydHMgPSBzZWdtZW50VmVydHM7DQogICAgICAgIHRoaXMuc2VnbWVudFJlZnMgPSBzZWdtZW50UmVmczsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKEdldFBvbHlXYWxsU2VnbWVudHNSZXN1bHQsIFt7DQogICAgICAgIGtleTogImdldFNlZ21lbnRWZXJ0cyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWdtZW50VmVydHMoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudFZlcnRzOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFNlZ21lbnRSZWZzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlZ21lbnRSZWZzKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRSZWZzOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBHZXRQb2x5V2FsbFNlZ21lbnRzUmVzdWx0Ow0KICAgIH0oKTsNCg0KICAgIHZhciBTdHJhaWdodFBhdGhJdGVtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFN0cmFpZ2h0UGF0aEl0ZW0ocG9zLCBmbGFncywgcmVmKSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdHJhaWdodFBhdGhJdGVtKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBvcyIsIFtdKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImZsYWdzIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWYiLCAwKTsNCg0KICAgICAgICB0aGlzLnBvcyA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9zKTsNCiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzOw0KICAgICAgICB0aGlzLnJlZiA9IHJlZjsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKFN0cmFpZ2h0UGF0aEl0ZW0sIFt7DQogICAgICAgIGtleTogImdldFBvcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3MoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMucG9zOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEZsYWdzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZsYWdzKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLmZsYWdzOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFJlZiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWYoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMucmVmOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBTdHJhaWdodFBhdGhJdGVtOw0KICAgIH0oKTsNCg0KICAgIC8qDQogICAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnDQogICAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnDQoNCiAgICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZA0KICAgIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXMNCiAgICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLg0KICAgIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLA0KICAgIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXQNCiAgICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6DQogICAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3QNCiAgICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmUNCiAgICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlDQogICAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuDQogICAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmUNCiAgICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLg0KICAgIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uDQogICAgKi8NCiAgICB2YXIgTW92ZUFsb25nU3VyZmFjZVJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICAvKiogVGhlIHJlc3VsdCBwb3NpdGlvbiBvZiB0aGUgbW92ZXIuIFsoeCwgeSwgeildICovDQoNCiAgICAgIC8qKiBUaGUgcmVmZXJlbmNlIGlkcyBvZiB0aGUgcG9seWdvbnMgdmlzaXRlZCBkdXJpbmcgdGhlIG1vdmUuICovDQogICAgICBmdW5jdGlvbiBNb3ZlQWxvbmdTdXJmYWNlUmVzdWx0KHJlc3VsdFBvcywgdmlzaXRlZCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW92ZUFsb25nU3VyZmFjZVJlc3VsdCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZXN1bHRQb3MiLCBbXSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2aXNpdGVkIiwgW10pOw0KDQogICAgICAgIHRoaXMucmVzdWx0UG9zID0gcmVzdWx0UG9zOw0KICAgICAgICB0aGlzLnZpc2l0ZWQgPSB2aXNpdGVkOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoTW92ZUFsb25nU3VyZmFjZVJlc3VsdCwgW3sNCiAgICAgICAga2V5OiAiZ2V0UmVzdWx0UG9zIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlc3VsdFBvcygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb3M7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0VmlzaXRlZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWaXNpdGVkKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0ZWQ7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIE1vdmVBbG9uZ1N1cmZhY2VSZXN1bHQ7DQogICAgfSgpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KDQogICAgLyoqDQogICAgICogUHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgcmF5Y2FzdCBoaXQuIEZpbGxlZCBieSBOYXZNZXNoUXVlcnk6OnJheWNhc3QNCiAgICAgKi8NCiAgICB2YXIgUmF5Y2FzdEhpdCA9IGZ1bmN0aW9uIFJheWNhc3RIaXQoKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmF5Y2FzdEhpdCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhpdE5vcm1hbCIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicGF0aCIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwYXRoQ29zdCIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhpdEVkZ2VJbmRleCIsIDApOw0KICAgIH07DQoNCiAgICB2YXIgX3RlbXAkMzsNCg0KICAgIGZ1bmN0aW9uIG9yKHYxLCB2Mikgew0KICAgICAgdmFyIGhpID0gMHg4MDAwMDAwMDsNCiAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmOw0KICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpOw0KICAgICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpOw0KICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdzsNCiAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7DQogICAgICB2YXIgaCA9IGhpMSB8IGhpMjsNCiAgICAgIHZhciBsID0gbG93MSB8IGxvdzI7DQogICAgICByZXR1cm4gaCAqIGhpICsgbDsNCiAgICB9DQoNCiAgICB2YXIgUG9ydGFsUmVzdWx0ID0gZnVuY3Rpb24gUG9ydGFsUmVzdWx0KGxlZnQsIHJpZ2h0LCBmcm9tVHlwZSwgdG9UeXBlKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9ydGFsUmVzdWx0KTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJsZWZ0Iiwgdm9pZCAwKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyaWdodCIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZnJvbVR5cGUiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRvVHlwZSIsIHZvaWQgMCk7DQoNCiAgICAgIHRoaXMubGVmdCA9IGxlZnQ7DQogICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7DQogICAgICB0aGlzLmZyb21UeXBlID0gZnJvbVR5cGU7DQogICAgICB0aGlzLnRvVHlwZSA9IHRvVHlwZTsNCiAgICB9Ow0KDQogICAgZnVuY3Rpb24gYXJyYXljb3B5JDQob25lLCBvbmVTdGFydCwgdHdvLCB0d29TdGFydCwgbGVuKSB7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQogICAgICAgIHR3b1t0d29TdGFydCArIGldID0gb25lW29uZVN0YXJ0ICsgaV07DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIE5hdk1lc2hRdWVyeSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICAvKioNCiAgICAgICAqIFVzZSByYXljYXN0cyBkdXJpbmcgcGF0aGZpbmQgdG8gInNob3J0Y3V0IiAocmF5Y2FzdCBzdGlsbCBjb25zaWRlciBjb3N0cykNCiAgICAgICAqIE9wdGlvbnMgZm9yIE5hdk1lc2hRdWVyeTo6aW5pdFNsaWNlZEZpbmRQYXRoIGFuZCB1cGRhdGVTbGljZWRGaW5kUGF0aA0KICAgICAgICovDQoNCiAgICAgIC8qKiBSYXljYXN0IHNob3VsZCBjYWxjdWxhdGUgbW92ZW1lbnQgY29zdCBhUG9seSB0aGUgcmF5IGFuZCBmaWxsIFJheWNhc3RIaXQ6OmNvc3QgKi8NCiAgICAgIC8vLyBWZXJ0ZXggZmxhZ3MgcmV0dXJuZWQgYnkgZmluZFN0cmFpZ2h0UGF0aC4NCg0KICAgICAgLyoqIFRoZSB2ZXJ0ZXggaXMgdGhlIHN0YXJ0IHBvc2l0aW9uIGluIHRoZSBwYXRoLiAqLw0KDQogICAgICAvKiogVGhlIHZlcnRleCBpcyB0aGUgZW5kIHBvc2l0aW9uIGluIHRoZSBwYXRoLiAqLw0KDQogICAgICAvKiogVGhlIHZlcnRleCBpcyB0aGUgc3RhcnQgb2YgYW4gb2ZmLW1lc2ggY29ubmVjdGlvbi4gKi8NCiAgICAgIC8vLyBPcHRpb25zIGZvciBmaW5kU3RyYWlnaHRQYXRoLg0KICAgICAgLy8vPCBBZGQgYSB2ZXJ0ZXggYXQgZXZlcnkgcG9seWdvbiBlZGdlIGNyb3NzaW5nIHdoZXJlIGFyZWEgY2hhbmdlcy4NCiAgICAgIC8vLzwgQWRkIGEgdmVydGV4IGF0IGV2ZXJ5IHBvbHlnb24gZWRnZSBjcm9zc2luZy4NCiAgICAgIC8vIFNlYXJjaCBoZXVyaXN0aWMgc2NhbGUuDQogICAgICAvLy8gPCBTbGljZWQgcXVlcnkgc3RhdGUuDQogICAgICBmdW5jdGlvbiBOYXZNZXNoUXVlcnkobmF2KSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOYXZNZXNoUXVlcnkpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9uYXYiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9ub2RlUG9vbCIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3RpbnlOb2RlUG9vbCIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX29wZW5MaXN0Iiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fcXVlcnkiLCB2b2lkIDApOw0KDQogICAgICAgIHRoaXMubV9uYXYgPSBuYXY7DQogICAgICAgIHRoaXMubV9ub2RlUG9vbCA9IG5ldyBOb2RlUG9vbCgpOw0KICAgICAgICB0aGlzLm1fdGlueU5vZGVQb29sID0gbmV3IE5vZGVQb29sKCk7DQogICAgICAgIHRoaXMubV9vcGVuTGlzdCA9IG5ldyBOb2RlUXVldWUoKTsNCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKE5hdk1lc2hRdWVyeSwgW3sNCiAgICAgICAga2V5OiAiZmluZFJhbmRvbVBvaW50IiwNCg0KICAgICAgICAvKioNCiAgICAgICAgICogUmV0dXJucyByYW5kb20gbG9jYXRpb24gb24gbmF2bWVzaC4NCiAgICAgICAgICogUG9seWdvbnMgYXJlIGNob3NlbiB3ZWlnaHRlZCBieSBhcmVhLiBUaGUgc2VhcmNoIHJ1bnMgaW4gbGluZWFyIHJlbGF0ZWQgdG8gbnVtYmVyIG9mIHBvbHlnb24uDQogICAgICAgICAqIEBwYXJhbSBmaWx0ZXIgVGhlIHBvbHlnb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoZSBxdWVyeS4NCiAgICAgICAgICogQHBhcmFtIGZyYW5kIEZ1bmN0aW9uIHJldHVybmluZyBhIHJhbmRvbSBudW1iZXIgWzAuLjEpLg0KICAgICAgICAgKiBAcmV0dXJuIFJhbmRvbSBsb2NhdGlvbg0KICAgICAgICAgKi8NCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRSYW5kb21Qb2ludChmaWx0ZXIsIGZyYW5kKSB7DQogICAgICAgICAgLy8gUmFuZG9tbHkgcGljayBvbmUgdGlsZS4gQXNzdW1lIHRoYXQgYWxsIHRpbGVzIGNvdmVyIHJvdWdobHkgdGhlIHNhbWUgYXJlYS4NCiAgICAgICAgICB0aWxlID0gbnVsbDsNCiAgICAgICAgICB0c3VtID0gMC4wOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbmF2LmdldE1heFRpbGVzKCk7IGkrKykgew0KICAgICAgICAgICAgdmFyIF90ID0gdGhpcy5tX25hdi5nZXRUaWxlKGkpOw0KDQogICAgICAgICAgICBpZiAoX3QgPT0gbnVsbCB8fCBfdC5kYXRhID09IG51bGwgfHwgX3QuZGF0YS5oZWFkZXIgPT0gbnVsbCkgY29udGludWU7IC8vIENob29zZSByYW5kb20gdGlsZSB1c2luZyByZXNlcnZvaSBzYW1wbGluZy4NCg0KICAgICAgICAgICAgYXJlYSA9IDEuMDsgLy8gQ291bGQgYmUgdGlsZSBhcmVhIHRvby4NCg0KICAgICAgICAgICAgdHN1bSArPSBhcmVhOw0KICAgICAgICAgICAgdSA9IGZyYW5kLmZyYW5kKCk7DQogICAgICAgICAgICBpZiAodSAqIHRzdW0gPD0gYXJlYSkgdGlsZSA9IF90Ow0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICh0aWxlID09IG51bGwpIHJldHVybiBuZXcgRmluZFJhbmRvbVBvaW50UmVzdWx0KFN0YXR1cy5GQUlMVVJFLCAwLCBudWxsKTsgLy8gUmFuZG9tbHkgcGljayBvbmUgcG9seWdvbiB3ZWlnaHRlZCBieSBwb2x5Z29uIGFyZWEuDQoNCiAgICAgICAgICB2YXIgcG9seSA9IG51bGw7DQogICAgICAgICAgdmFyIHBvbHlSZWYgPSAwOw0KICAgICAgICAgIHZhciBiYXNlID0gdGhpcy5tX25hdi5nZXRQb2x5UmVmQmFzZSh0aWxlKTsNCiAgICAgICAgICBhcmVhU3VtID0gMC4wOw0KDQogICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK19pKSB7DQogICAgICAgICAgICB2YXIgcCA9IHRpbGUuZGF0YS5wb2x5c1tfaV07IC8vIERvIG5vdCByZXR1cm4gb2ZmLW1lc2ggY29ubmVjdGlvbiBwb2x5Z29ucy4NCg0KICAgICAgICAgICAgaWYgKHAuZ2V0VHlwZSgpICE9IFBvbHkuRFRfUE9MWVRZUEVfR1JPVU5EKSBjb250aW51ZTsgLy8gTXVzdCBwYXNzIGZpbHRlcg0KDQogICAgICAgICAgICB2YXIgcmVmID0gdGhpcy5vcihiYXNlLCBfaSk7DQogICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKHJlZiwgdGlsZSwgcCkpIGNvbnRpbnVlOyAvLyBDYWxjIGFyZWEgb2YgdGhlIHBvbHlnb24uDQoNCiAgICAgICAgICAgIHBvbHlBcmVhID0gMC4wOw0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IHAudmVydENvdW50OyArK2opIHsNCiAgICAgICAgICAgICAgdmFyIHZhID0gcC52ZXJ0c1swXSAqIDM7DQogICAgICAgICAgICAgIHZhciB2YiA9IHAudmVydHNbaiAtIDFdICogMzsNCiAgICAgICAgICAgICAgdmFyIHZjID0gcC52ZXJ0c1tqXSAqIDM7DQogICAgICAgICAgICAgIHBvbHlBcmVhICs9IERldG91ckNvbW1vbi50cmlBcmVhMkQ0KHRpbGUuZGF0YS52ZXJ0cywgdmEsIHZiLCB2Yyk7DQogICAgICAgICAgICB9IC8vIENob29zZSByYW5kb20gcG9seWdvbiB3ZWlnaHRlZCBieSBhcmVhLCB1c2luZyByZXNlcnZvaSBzYW1wbGluZy4NCg0KDQogICAgICAgICAgICBhcmVhU3VtICs9IHBvbHlBcmVhOw0KICAgICAgICAgICAgdSA9IGZyYW5kLmZyYW5kKCk7DQoNCiAgICAgICAgICAgIGlmICh1ICogYXJlYVN1bSA8PSBwb2x5QXJlYSkgew0KICAgICAgICAgICAgICBwb2x5ID0gcDsNCiAgICAgICAgICAgICAgcG9seVJlZiA9IHJlZjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAocG9seSA9PSBudWxsKSByZXR1cm4gbmV3IEZpbmRSYW5kb21Qb2ludFJlc3VsdChTdGF0dXMuRkFJTFVSRSwgMCwgbnVsbCk7IC8vIFJhbmRvbWx5IHBpY2sgcG9Qb2x5IG9uIHBvbHlnb24uDQoNCiAgICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkoMyAqIHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkpOw0KICAgICAgICAgIHZhciBhcmVhcyA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpKTsNCiAgICAgICAgICBhcnJheWNvcHkkNCh0aWxlLmRhdGEudmVydHMsIHBvbHkudmVydHNbMF0gKiAzLCB2ZXJ0cywgMCwgMyk7DQoNCiAgICAgICAgICBmb3IgKHZhciBfaiA9IDE7IF9qIDwgcG9seS52ZXJ0Q291bnQ7ICsrX2opIHsNCiAgICAgICAgICAgIGFycmF5Y29weSQ0KHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tfal0gKiAzLCB2ZXJ0cywgX2ogKiAzLCAzKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBzID0gZnJhbmQuZnJhbmQoKTsNCiAgICAgICAgICB0ID0gZnJhbmQuZnJhbmQoKTsNCiAgICAgICAgICB2YXIgcHQgPSBEZXRvdXJDb21tb24ucmFuZG9tUG9pbnRJbkNvbnZleFBvbHkodmVydHMsIHBvbHkudmVydENvdW50LCBhcmVhcywgcywgdCk7DQogICAgICAgICAgcHRbMV0gPSBnZXRQb2x5SGVpZ2h0KHBvbHlSZWYsIHB0KTsNCiAgICAgICAgICByZXR1cm4gbmV3IEZpbmRSYW5kb21Qb2ludFJlc3VsdChTdGF0dXMuU1VDQ1NFU1MsIHBvbHlSZWYsIHB0KTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogUmV0dXJucyByYW5kb20gbG9jYXRpb24gb24gbmF2bWVzaCB3aXRoaW4gdGhlIHJlYWNoIG9mIHNwZWNpZmllZCBsb2NhdGlvbi4NCiAgICAgICAgICogUG9seWdvbnMgYXJlIGNob3NlbiB3ZWlnaHRlZCBieSBhcmVhLiBUaGUgc2VhcmNoIHJ1bnMgaW4gbGluZWFyIHJlbGF0ZWQgdG8gbnVtYmVyIG9mIHBvbHlnb24uDQogICAgICAgICAqIFRoZSBsb2NhdGlvbiBpcyBub3QgZXhhY3RseSBjb25zdHJhaW5lZCBieSB0aGUgY2lyY2xlLCBidXQgaXQgbGltaXRzIHRoZSB2aXNpdGVkIHBvbHlnb25zLg0KICAgICAgICAgKiANCiAgICAgICAgICogQHBhcmFtIHN0YXJ0UmVmIFRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHBvbHlnb24gd2hlcmUgdGhlIHNlYXJjaCBzdGFydHMuDQogICAgICAgICAqIEBwYXJhbSBjZW50ZXJQb3MgVGhlIGNlbnRlciBvZiB0aGUgc2VhcmNoIGNpcmNsZS4gWyh4LCB5LCB6KV0NCiAgICAgICAgICogQHBhcmFtIG1heFJhZGl1cyANCiAgICAgICAgICogQHBhcmFtIGZpbHRlciBUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5Lg0KICAgICAgICAgKiBAcGFyYW0gZnJhbmQgRnVuY3Rpb24gcmV0dXJuaW5nIGEgcmFuZG9tIG51bWJlciBbMC4uMSkuDQogICAgICAgICAqIEByZXR1cm4gUmFuZG9tIGxvY2F0aW9uDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmRSYW5kb21Qb2ludEFyb3VuZENpcmNsZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUmFuZG9tUG9pbnRBcm91bmRDaXJjbGUoc3RhcnRSZWYsIGNlbnRlclBvcywgbWF4UmFkaXVzLCBmaWx0ZXIsIGZyYW5kKSB7DQogICAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXQNCiAgICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgc3RhcnQgcmVmIik7DQogICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHN0YXJ0UmVmKTsNCiAgICAgICAgICB2YXIgc3RhcnRUaWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgdmFyIHN0YXJ0UG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIoc3RhcnRSZWYsIHN0YXJ0VGlsZSwgc3RhcnRQb2x5KSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCIpOw0KICAgICAgICAgIG1fbm9kZVBvb2wgPSBbXTsNCiAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QgPSBbXTsNCiAgICAgICAgICB2YXIgc3RhcnROb2RlID0gbV9ub2RlUG9vbC5nZXROb2RlKHN0YXJ0UmVmKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc3RhcnROb2RlLnBvcywgY2VudGVyUG9zKTsNCiAgICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7DQogICAgICAgICAgc3RhcnROb2RlLmNvc3QgPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS50b3RhbCA9IDA7DQogICAgICAgICAgc3RhcnROb2RlLmlkID0gc3RhcnRSZWY7DQogICAgICAgICAgc3RhcnROb2RlLmZsYWdzID0gRFRfTk9ERV9PUEVOOw0KICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKHN0YXJ0Tm9kZSk7DQogICAgICAgICAgcmFkaXVzU3FyID0gbWF4UmFkaXVzICogbWF4UmFkaXVzOw0KICAgICAgICAgIGFyZWFTdW0gPSAwLjA7DQogICAgICAgICAgdmFyIHJhbmRvbVRpbGUgPSBudWxsOw0KICAgICAgICAgIHZhciByYW5kb21Qb2x5ID0gbnVsbDsNCiAgICAgICAgICB2YXIgcmFuZG9tUG9seVJlZiA9IDA7DQoNCiAgICAgICAgICB3aGlsZSAoIXRoaXMubV9vcGVuTGlzdC5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgdmFyIGJlc3ROb2RlID0gdGhpcy5tX29wZW5MaXN0LnBvcCgpOw0KICAgICAgICAgICAgYmVzdE5vZGUuZmxhZ3MgJj0gfkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzIHw9IERUX05PREVfQ0xPU0VEOyAvLyBHZXQgbGV0IGFuZCB0aWxlLg0KICAgICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLg0KDQogICAgICAgICAgICB2YXIgYmVzdFJlZiA9IGJlc3ROb2RlLmlkOw0KICAgICAgICAgICAgdmFyIGJlc3RUaWxlUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShiZXN0UmVmKTsNCiAgICAgICAgICAgIHZhciBiZXN0VGlsZSA9IGJlc3RUaWxlUG9seVswXTsNCiAgICAgICAgICAgIHZhciBiZXN0UG9seSA9IGJlc3RUaWxlUG9seVsxXTsgLy8gUGxhY2UgcmFuZG9tIGxvY2F0aW9ucyBvbiBvbiBncm91bmQuDQoNCiAgICAgICAgICAgIGlmIChiZXN0UG9seS5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9HUk9VTkQpIHsNCiAgICAgICAgICAgICAgLy8gQ2FsYyBhcmVhIG9mIHRoZSBwb2x5Z29uLg0KICAgICAgICAgICAgICBwb2x5QXJlYSA9IDAuMDsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IGJlc3RQb2x5LnZlcnRDb3VudDsgKytqKSB7DQogICAgICAgICAgICAgICAgdmFyIHZhID0gYmVzdFBvbHkudmVydHNbMF0gKiAzOw0KICAgICAgICAgICAgICAgIHZhciB2YiA9IGJlc3RQb2x5LnZlcnRzW2ogLSAxXSAqIDM7DQogICAgICAgICAgICAgICAgdmFyIHZjID0gYmVzdFBvbHkudmVydHNbal0gKiAzOw0KICAgICAgICAgICAgICAgIHBvbHlBcmVhICs9IERldG91ckNvbW1vbi50cmlBcmVhMkQ0KGJlc3RUaWxlLmRhdGEudmVydHMsIHZhLCB2YiwgdmMpOw0KICAgICAgICAgICAgICB9IC8vIENob29zZSByYW5kb20gcG9seWdvbiB3ZWlnaHRlZCBieSBhcmVhLCB1c2luZyByZXNlcnZvaSBzYW1wbGluZy4NCg0KDQogICAgICAgICAgICAgIGFyZWFTdW0gKz0gcG9seUFyZWE7DQogICAgICAgICAgICAgIHUgPSBmcmFuZC5mcmFuZCgpOw0KDQogICAgICAgICAgICAgIGlmICh1ICogYXJlYVN1bSA8PSBwb2x5QXJlYSkgew0KICAgICAgICAgICAgICAgIHJhbmRvbVRpbGUgPSBiZXN0VGlsZTsNCiAgICAgICAgICAgICAgICByYW5kb21Qb2x5ID0gYmVzdFBvbHk7DQogICAgICAgICAgICAgICAgcmFuZG9tUG9seVJlZiA9IGJlc3RSZWY7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gLy8gR2V0IHBhcmVudCBsZXQgYW5kIHRpbGUuDQoNCg0KICAgICAgICAgICAgdmFyIHBhcmVudFJlZiA9IDA7DQogICAgICAgICAgICBpZiAoYmVzdE5vZGUucGlkeCAhPSAwKSBwYXJlbnRSZWYgPSBtX25vZGVQb29sLmdldE5vZGVBdElkeChiZXN0Tm9kZS5waWR4KS5pZDsNCg0KICAgICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7DQogICAgICAgICAgICAgIHZhciBwYXJlbnRUaWxlUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShwYXJlbnRSZWYpOw0KICAgICAgICAgICAgICB2YXIgcGFyZW50VGlsZSA9IHBhcmVudFRpbGVQb2x5WzBdOw0KICAgICAgICAgICAgICB2YXIgcGFyZW50UG9seSA9IHBhcmVudFRpbGVQb2x5WzFdOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gYmVzdFRpbGUubGlua3NbaV0ubmV4dCkgew0KICAgICAgICAgICAgICB2YXIgbGluayA9IGJlc3RUaWxlLmxpbmtzW2ldOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUmVmID0gbGluay5yZWY7IC8vIFNraXAgaW52YWxpZCBuZWlnaGJvdXJzIGFuZCBkbyBub3QgZm9sbG93IGJhY2sgdG8gcGFyZW50Lg0KDQogICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gMCB8fCBuZWlnaGJvdXJSZWYgPT0gcGFyZW50UmVmKSBjb250aW51ZTsgLy8gRXhwYW5kIHRvIG5laWdoYm91cg0KDQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IG5laWdoYm91clRpbGVQb2x5WzBdOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IG5laWdoYm91clRpbGVQb2x5WzFdOyAvLyBEbyBub3QgYWR2YW5jZSBpZiB0aGUgcG9seWdvbiBpcyBleGNsdWRlZCBieSB0aGUgZmlsdGVyLg0KDQogICAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KSkgY29udGludWU7IC8vIEZpbmQgZWRnZSBhbmQgY2FsYyBkaXN0YW5jZSB0byB0aGUgZWRnZS4NCg0KICAgICAgICAgICAgICB2YXIgcG9ydGFscG9pbnRzID0gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGJlc3RSZWYsIGJlc3RQb2x5LCBiZXN0VGlsZSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJQb2x5LCBuZWlnaGJvdXJUaWxlLCAwLCAwKTsNCiAgICAgICAgICAgICAgdmFyIF92YSA9IHBvcnRhbHBvaW50cy5sZWZ0Ow0KICAgICAgICAgICAgICB2YXIgX3ZiID0gcG9ydGFscG9pbnRzLnJpZ2h0OyAvLyBJZiB0aGUgY2lyY2xlIGlzIG5vdCB0b3VjaGluZyB0aGUgbmV4dCBwb2x5Z29uLCBza2lwIGl0Lg0KDQogICAgICAgICAgICAgIHZhciBkaXN0c2VnID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDMoY2VudGVyUG9zLCBfdmEsIF92Yik7DQogICAgICAgICAgICAgIGRpc3RTcXIgPSBkaXN0c2VnWzBdOw0KICAgICAgICAgICAgICBpZiAoZGlzdFNxciA+IHJhZGl1c1NxcikgY29udGludWU7DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gbV9ub2RlUG9vbC5nZXROb2RlKG5laWdoYm91clJlZik7DQogICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDApIGNvbnRpbnVlOyAvLyBDb3N0DQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91ck5vZGUuZmxhZ3MgPT0gMCkgbmVpZ2hib3VyTm9kZS5wb3MgPSBEZXRvdXJDb21tb24udkxlcnAzKF92YSwgX3ZiLCAwLjUpOw0KICAgICAgICAgICAgICB0b3RhbCA9IGJlc3ROb2RlLnRvdGFsICsgRGV0b3VyQ29tbW9uLnZEaXN0MihiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zKTsgLy8gVGhlIG5vZGUgaXMgYWxyZWFkeSBpbiBvcGVuIGxpc3QgYW5kIHRoZSBuZXcgcmVzdWx0IGlzIHdvcnNlLCBza2lwLg0KDQogICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwICYmIHRvdGFsID49IG5laWdoYm91ck5vZGUudG90YWwpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmlkID0gbmVpZ2hib3VyUmVmOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzID0gbmVpZ2hib3VyTm9kZS5mbGFncyAmIH5Ob2RlLkRUX05PREVfQ0xPU0VEOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnBpZHggPSBtX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gdG90YWw7DQoNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QubW9kaWZ5KG5laWdoYm91ck5vZGUpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgPSBOb2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChuZWlnaGJvdXJOb2RlKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChyYW5kb21Qb2x5ID09IG51bGwpIHJldHVybiBuZXcgRmluZFJhbmRvbVBvaW50UmVzdWx0KFN0YXR1cy5GQUlMVVJFLCAwLCBudWxsKTsgLy8gUmFuZG9tbHkgcGljayBwb1BvbHkgb24gcG9seWdvbi4NCg0KICAgICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBBcnJheSgzICogdGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSk7DQogICAgICAgICAgdmFyIGFyZWFzID0gbmV3IEFycmF5KHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkpOw0KICAgICAgICAgIGFycmF5Y29weSQ0KHJhbmRvbVRpbGUuZGF0YS52ZXJ0cywgcmFuZG9tUG9seS52ZXJ0c1swXSAqIDMsIHZlcnRzLCAwLCAzKTsNCg0KICAgICAgICAgIGZvciAodmFyIF9qMiA9IDE7IF9qMiA8IHJhbmRvbVBvbHkudmVydENvdW50OyArK19qMikgew0KICAgICAgICAgICAgYXJyYXljb3B5JDQocmFuZG9tVGlsZS5kYXRhLnZlcnRzLCByYW5kb21Qb2x5LnZlcnRzW19qMl0gKiAzLCB2ZXJ0cywgX2oyICogMywgMyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcyA9IGZyYW5kLmZyYW5kKCk7DQogICAgICAgICAgdCA9IGZyYW5kLmZyYW5kKCk7DQogICAgICAgICAgdmFyIHB0ID0gRGV0b3VyQ29tbW9uLnJhbmRvbVBvaW50SW5Db252ZXhQb2x5KHZlcnRzLCByYW5kb21Qb2x5LnZlcnRDb3VudCwgYXJlYXMsIHMsIHQpOw0KICAgICAgICAgIHB0WzFdID0gZ2V0UG9seUhlaWdodChyYW5kb21Qb2x5UmVmLCBwdCk7DQogICAgICAgICAgcmV0dXJuIG5ldyBGaW5kUmFuZG9tUG9pbnRSZXN1bHQoU3RhdHVzLlNVQ0NTRVNTLCByYW5kb21Qb2x5UmVmLCBwdCk7DQogICAgICAgIH0gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQogICAgICAgIC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVXNlcyB0aGUgZGV0YWlsIHBvbHlnb25zIHRvIGZpbmQgdGhlIHN1cmZhY2UgaGVpZ2h0LiAoTW9zdCBhY2N1cmF0ZS4pDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHAgcG9zIGRvZXMgbm90IGhhdmUgdG8gYmUgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHBvbHlnb24gb3IgbmF2aWdhdGlvbiBtZXNoLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFNlZSBjbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeSgpIGZvciBhIGxpbWl0ZWQgYnV0IGZhc3RlciBvcHRpb24uDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gRmluZHMgdGhlIGNsb3Nlc3QgcG9Qb2x5IG9uIHRoZSBzcGVjaWZpZWQgcG9seWdvbi4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlyZWYJCQlUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBwb2x5Z29uLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXBvcwkJCVRoZSBwb3NpdGlvbiB0byBjaGVjay4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQljbG9zZXN0CQkNCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlwb3NPdmVyUG9seQkNCiAgICAgICAgLy8vIEByZXR1cm5zIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBxdWVyeS4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjbG9zZXN0UG9pbnRPblBvbHkiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VzdFBvaW50T25Qb2x5KHJlZiwgcG9zKSB7DQogICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHJlZik7DQogICAgICAgICAgdmFyIHRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICB2YXIgcG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBPZmYtbWVzaCBjb25uZWN0aW9ucyBkb24ndCBoYXZlIGRldGFpbCBwb2x5Z29ucy4NCg0KICAgICAgICAgIGlmIChwb2x5LmdldFR5cGUoKSA9PSBQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTikgew0KICAgICAgICAgICAgdmFyIF92ID0gcG9seS52ZXJ0c1swXSAqIDM7DQoNCiAgICAgICAgICAgIHZhciBfdjIgPSBwb2x5LnZlcnRzWzFdICogMzsNCg0KICAgICAgICAgICAgdmFyIF9kID0gRGV0b3VyQ29tbW9uLnZEaXN0Myhwb3MsIHRpbGUuZGF0YS52ZXJ0cywgX3YpOw0KDQogICAgICAgICAgICB2YXIgX2QyID0gRGV0b3VyQ29tbW9uLnZEaXN0Myhwb3MsIHRpbGUuZGF0YS52ZXJ0cywgX3YyKTsNCg0KICAgICAgICAgICAgdmFyIF91ID0gX2QgLyAoX2QgKyBfZDIpOw0KDQogICAgICAgICAgICB2YXIgX2Nsb3Nlc3QgPSBEZXRvdXJDb21tb24udkxlcnA0KHRpbGUuZGF0YS52ZXJ0cywgX3YsIF92MiwgX3UpOw0KDQogICAgICAgICAgICByZXR1cm4gbmV3IENsb3Nlc1BvaW50T25Qb2x5UmVzdWx0KGZhbHNlLCBfY2xvc2VzdCk7DQogICAgICAgICAgfSAvLyBDbGFtcCBwb1BvbHkgdG8gYmUgaW5zaWRlIHRoZSBwb2x5Z29uLg0KDQoNCiAgICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSAqIDMpOw0KICAgICAgICAgIHZhciBlZGdlZCA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpKTsNCiAgICAgICAgICB2YXIgZWRnZXQgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSk7DQogICAgICAgICAgdmFyIG52ID0gcG9seS52ZXJ0Q291bnQ7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG52OyArK2kpIHsNCiAgICAgICAgICAgIGFycmF5Y29weSQ0KHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tpXSAqIDMsIHZlcnRzLCBpICogMywgMyk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHBvc092ZXJQb2x5ID0gZmFsc2U7DQogICAgICAgICAgdmFyIGNsb3Nlc3QgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGNsb3Nlc3QsIHBvcyk7DQoNCiAgICAgICAgICBpZiAoIURldG91ckNvbW1vbi5kaXN0YW5jZVB0UG9seUVkZ2VzU3FyKHBvcywgdmVydHMsIG52LCBlZGdlZCwgZWRnZXQpKSB7DQogICAgICAgICAgICAvLyBQb1BvbHkgaXMgb3V0c2lkZSB0aGUgcG9seWdvbiwgZHRDbGFtcCB0byBuZWFyZXN0IGVkZ2UuDQogICAgICAgICAgICB2YXIgZG1pbiA9IGVkZ2VkWzBdOw0KICAgICAgICAgICAgdmFyIGltaW4gPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTIgPSAxOyBfaTIgPCBudjsgKytfaTIpIHsNCiAgICAgICAgICAgICAgaWYgKGVkZ2VkW19pMl0gPCBkbWluKSB7DQogICAgICAgICAgICAgICAgZG1pbiA9IGVkZ2VkW19pMl07DQogICAgICAgICAgICAgICAgaW1pbiA9IF9pMjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgdmEgPSBpbWluICogMzsNCiAgICAgICAgICAgIHZhciB2YiA9IChpbWluICsgMSkgJSBudiAqIDM7DQogICAgICAgICAgICBjbG9zZXN0ID0gRGV0b3VyQ29tbW9uLnZMZXJwNCh2ZXJ0cywgdmEsIHZiLCBlZGdldFtpbWluXSk7DQogICAgICAgICAgICBwb3NPdmVyUG9seSA9IGZhbHNlOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBwb3NPdmVyUG9seSA9IHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGlwID0gcG9seS5pbmRleDsNCg0KICAgICAgICAgIGlmICh0aWxlLmRhdGEuZGV0YWlsTWVzaGVzICE9IG51bGwgJiYgdGlsZS5kYXRhLmRldGFpbE1lc2hlcy5sZW5ndGggPiBpcCkgew0KICAgICAgICAgICAgdmFyIHBkID0gdGlsZS5kYXRhLmRldGFpbE1lc2hlc1tpcF07IC8vIEZpbmQgaGVpZ2h0IGF0IHRoZSBsb2NhdGlvbi4NCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwZC50cmlDb3VudDsgKytqKSB7DQogICAgICAgICAgICAgIHZhciBfdDIgPSAocGQudHJpQmFzZSArIGopICogNDsNCg0KICAgICAgICAgICAgICB2YXIgdiA9IG5ldyBBcnJheSgzKTsgLy9XYXMgbmV3IEFycmF5KDMpW10NCg0KICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDM7ICsraykgew0KICAgICAgICAgICAgICAgIGlmICh0aWxlLmRhdGEuZGV0YWlsVHJpc1tfdDIgKyBrXSA8IHBvbHkudmVydENvdW50KSB7DQogICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBwb2x5LnZlcnRzW3RpbGUuZGF0YS5kZXRhaWxUcmlzW190MiArIGtdXSAqIDM7DQogICAgICAgICAgICAgICAgICB2W2tdID0gW3RpbGUuZGF0YS52ZXJ0c1tpbmRleF0sIHRpbGUuZGF0YS52ZXJ0c1tpbmRleCArIDFdLCB0aWxlLmRhdGEudmVydHNbaW5kZXggKyAyXV07DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHZhciBfaW5kZXggPSAocGQudmVydEJhc2UgKyAodGlsZS5kYXRhLmRldGFpbFRyaXNbX3QyICsga10gLSBwb2x5LnZlcnRDb3VudCkpICogMzsNCg0KICAgICAgICAgICAgICAgICAgdltrXSA9IFt0aWxlLmRhdGEuZGV0YWlsVmVydHNbX2luZGV4XSwgdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleCArIDFdLCB0aWxlLmRhdGEuZGV0YWlsVmVydHNbX2luZGV4ICsgMl1dOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciBoZWlnaHRSZXN1bHQgPSBEZXRvdXJDb21tb24uY2xvc2VzdEhlaWdodFBvaW50VHJpYW5nbGUoY2xvc2VzdCwgdlswXSwgdlsxXSwgdlsyXSk7DQoNCiAgICAgICAgICAgICAgaWYgKGhlaWdodFJlc3VsdFswXSkgew0KICAgICAgICAgICAgICAgIGNsb3Nlc3RbMV0gPSBoZWlnaHRSZXN1bHRbMV07DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbmV3IENsb3Nlc3RQb2ludE9uUG9seVJlc3VsdChwb3NPdmVyUG9seSwgY2xvc2VzdCk7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBNdWNoIGZhc3RlciB0aGFuIGNsb3Nlc3RQb2ludE9uUG9seSgpLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIElmIHRoZSBwcm92aWRlZCBwb3NpdGlvbiBsaWVzIHdpdGhpbiB0aGUgcG9seWdvbidzIHh6LWJvdW5kcyAoYWJvdmUgb3IgYmVsb3cpLA0KICAgICAgICAvLy8gdGhlbiBAcCBwb3MgYW5kIEBwIGNsb3Nlc3Qgd2lsbCBiZSBlcXVhbC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgaGVpZ2h0IG9mIEBwIGNsb3Nlc3Qgd2lsbCBiZSB0aGUgcG9seWdvbiBib3VuZGFyeS4gVGhlIGhlaWdodCBkZXRhaWwgaXMgbm90IHVzZWQuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHAgcG9zIGRvZXMgbm90IGhhdmUgdG8gYmUgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHBvbHlib24gb3IgdGhlIG5hdmlnYXRpb24gbWVzaC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBSZXR1cm5zIGEgcG9Qb2x5IG9uIHRoZSBib3VuZGFyeSBjbG9zZXN0IHRvIHRoZSBzb3VyY2UgcG9Qb2x5IGlmIHRoZSBzb3VyY2UgcG9Qb2x5IGlzIG91dHNpZGUgdGhlIA0KICAgICAgICAvLy8gcG9seWdvbidzIHh6LWJvdW5kcy4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlyZWYJCQlUaGUgcmVmZXJlbmNlIGlkIHRvIHRoZSBwb2x5Z29uLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXBvcwkJCVRoZSBwb3NpdGlvbiB0byBjaGVjay4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQljbG9zZXN0CQlUaGUgY2xvc2VzdCBwb2ludC4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEByZXR1cm5zIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBxdWVyeS4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeShyZWYsIHBvcykgew0KICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihyZWYpOw0KICAgICAgICAgIHZhciB0aWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgdmFyIHBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gQ29sbGVjdCB2ZXJ0aWNlcy4NCg0KICAgICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpICogMyk7DQogICAgICAgICAgdmFyIGVkZ2VkID0gbmV3IEFycmF5KHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkpOw0KICAgICAgICAgIHZhciBlZGdldCA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpKTsNCiAgICAgICAgICB2YXIgbnYgPSBwb2x5LnZlcnRDb3VudDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnY7ICsraSkgew0KICAgICAgICAgICAgYXJyYXljb3B5JDQodGlsZS5kYXRhLnZlcnRzLCBwb2x5LnZlcnRzW2ldICogMywgdmVydHMsIGkgKiAzLCAzKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgY2xvc2VzdDsNCg0KICAgICAgICAgIGlmIChEZXRvdXJDb21tb24uZGlzdGFuY2VQdFBvbHlFZGdlc1Nxcihwb3MsIHZlcnRzLCBudiwgZWRnZWQsIGVkZ2V0KSkgew0KICAgICAgICAgICAgY2xvc2VzdCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9zKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gUG9Qb2x5IGlzIG91dHNpZGUgdGhlIHBvbHlnb24sIGR0Q2xhbXAgdG8gbmVhcmVzdCBlZGdlLg0KICAgICAgICAgICAgdmFyIGRtaW4gPSBlZGdlZFswXTsNCiAgICAgICAgICAgIHZhciBpbWluID0gMDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2kzID0gMTsgX2kzIDwgbnY7ICsrX2kzKSB7DQogICAgICAgICAgICAgIGlmIChlZGdlZFtfaTNdIDwgZG1pbikgew0KICAgICAgICAgICAgICAgIGRtaW4gPSBlZGdlZFtfaTNdOw0KICAgICAgICAgICAgICAgIGltaW4gPSBfaTM7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHZhID0gaW1pbiAqIDM7DQogICAgICAgICAgICB2YXIgdmIgPSAoaW1pbiArIDEpICUgbnYgKiAzOw0KICAgICAgICAgICAgY2xvc2VzdCA9IERldG91ckNvbW1vbi52TGVycDQodmVydHMsIHZhLCB2YiwgZWRnZXRbaW1pbl0pOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBjbG9zZXN0Ow0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gV2lsbCByZXR1cm4gI0RUX0ZBSUxVUkUgaWYgdGhlIHByb3ZpZGVkIHBvc2l0aW9uIGlzIG91dHNpZGUgdGhlIHh6LWJvdW5kcw0KICAgICAgICAvLy8gb2YgdGhlIHBvbHlnb24uDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gR2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBwb2x5Z29uIGF0IHRoZSBwcm92aWRlZCBwb3NpdGlvbiB1c2luZyB0aGUgaGVpZ2h0IGRldGFpbC4gKE1vc3QgYWNjdXJhdGUuKQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXJlZgkJCVRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHBvbHlnb24uDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJcG9zCQkJQSBwb3NpdGlvbiB3aXRoaW4gdGhlIHh6LWJvdW5kcyBvZiB0aGUgcG9seWdvbi4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQloZWlnaHQJCVRoZSBoZWlnaHQgYXQgdGhlIHN1cmZhY2Ugb2YgdGhlIHBvbHlnb24uDQogICAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UG9seUhlaWdodCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb2x5SGVpZ2h0KHJlZiwgcG9zKSB7DQogICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHJlZik7DQogICAgICAgICAgdmFyIHRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICB2YXIgcG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KDQogICAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB7DQogICAgICAgICAgICB2YXIgaSA9IHBvbHkudmVydHNbMF0gKiAzOw0KICAgICAgICAgICAgaSA9IHBvbHkudmVydHNbMV0gKiAzOw0KICAgICAgICAgICAgbGV0djEgPSBbdGlsZS5kYXRhLnZlcnRzW2ldLCB0aWxlLmRhdGEudmVydHNbaSArIDFdLCB0aWxlLmRhdGEudmVydHNbaSArIDJdXTsNCiAgICAgICAgICAgIGQwID0gRGV0b3VyQ29tbW9uLnZEaXN0MkQocG9zLCB2MCk7DQogICAgICAgICAgICBkMSA9IERldG91ckNvbW1vbi52RGlzdDJEKHBvcywgdjEpOw0KICAgICAgICAgICAgdSA9IGQwIC8gKGQwICsgZDEpOw0KICAgICAgICAgICAgcmV0dXJuIHYwWzFdICsgKHYxWzFdIC0gdjBbMV0pICogdTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdmFyIGlwID0gcG9seS5pbmRleDsNCiAgICAgICAgICAgIHZhciBwZCA9IHRpbGUuZGF0YS5kZXRhaWxNZXNoZXNbaXBdOw0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBkLnRyaUNvdW50OyArK2opIHsNCiAgICAgICAgICAgICAgdmFyIF90MyA9IChwZC50cmlCYXNlICsgaikgKiA0Ow0KDQogICAgICAgICAgICAgIHZhciB2ID0gbmV3IEFycmF5KDMpOyAvL25ldyBBcnJheSgzKVtdOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgMzsgKytrKSB7DQogICAgICAgICAgICAgICAgaWYgKHRpbGUuZGF0YS5kZXRhaWxUcmlzW190MyArIGtdIDwgcG9seS52ZXJ0Q291bnQpIHsNCiAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBvbHkudmVydHNbdGlsZS5kYXRhLmRldGFpbFRyaXNbX3QzICsga11dICogMzsNCiAgICAgICAgICAgICAgICAgIHZba10gPSBbdGlsZS5kYXRhLnZlcnRzW2luZGV4XSwgdGlsZS5kYXRhLnZlcnRzW2luZGV4ICsgMV0sIHRpbGUuZGF0YS52ZXJ0c1tpbmRleCArIDJdXTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgdmFyIF9pbmRleDIgPSAocGQudmVydEJhc2UgKyAodGlsZS5kYXRhLmRldGFpbFRyaXNbX3QzICsga10gLSBwb2x5LnZlcnRDb3VudCkpICogMzsNCg0KICAgICAgICAgICAgICAgICAgdltrXSA9IFt0aWxlLmRhdGEuZGV0YWlsVmVydHNbX2luZGV4Ml0sIHRpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXgyICsgMV0sIHRpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXgyICsgMl1dOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciBoZWlnaHRSZXN1bHQgPSBEZXRvdXJDb21tb24uY2xvc2VzdEhlaWdodFBvaW50VHJpYW5nbGUocG9zLCB2WzBdLCB2WzFdLCB2WzJdKTsNCg0KICAgICAgICAgICAgICBpZiAoaGVpZ2h0UmVzdWx0WzBdKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGhlaWdodFJlc3VsdFsxXTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgcmVmICIgKyByZWYgKyAiIHBvcyAiICsgQXJyYXlzLnRvU3RyaW5nKHBvcykpOw0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQG5vdGUgSWYgdGhlIHNlYXJjaCBib3ggZG9lcyBub3QgaW50ZXJzZWN0IGFueSBwb2x5Z29ucyB0aGUgc2VhcmNoIHdpbGwNCiAgICAgICAgLy8vIHJldHVybiAjRFRfU1VDQ0VTUywgYnV0IEBwIG5lYXJlc3RSZWYgd2lsbCBiZSB6ZXJvLiBTbyBpZiBpbiBkb3VidCwgY2hlY2sNCiAgICAgICAgLy8vIEBwIG5lYXJlc3RSZWYgYmVmb3JlIHVzaW5nIEBwIG5lYXJlc3RQdC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAfQ0KICAgICAgICAvLy8gQG5hbWUgTG9jYWwgUXVlcnkgRnVuY3Rpb25zDQogICAgICAgIC8vL0B7DQogICAgICAgIC8vLyBGaW5kcyB0aGUgcG9seWdvbiBuZWFyZXN0IHRvIHRoZSBzcGVjaWZpZWQgY2VudGVyIHBvaW50Lg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWNlbnRlcgkJVGhlIGNlbnRlciBvZiB0aGUgc2VhcmNoIGJveC4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlleHRlbnRzCQlUaGUgc2VhcmNoIGRpc3RhbmNlIGFQb2x5IGVhY2ggYXhpcy4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlmaWx0ZXIJCVRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuDQogICAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmluZE5lYXJlc3RQb2x5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmROZWFyZXN0UG9seShjZW50ZXIsIGV4dGVudHMsIGZpbHRlcikgew0KICAgICAgICAgIHZhciBuZWFyZXN0UHQgPSBudWxsOyAvLyBHZXQgbmVhcmJ5IHBvbHlnb25zIGZyb20gcHJveGltaXR5IGdyaWQuDQoNCiAgICAgICAgICB2YXIgcG9seXMgPSB0aGlzLnF1ZXJ5UG9seWdvbnMoY2VudGVyLCBleHRlbnRzLCBmaWx0ZXIpOyAvLyBGaW5kIG5lYXJlc3QgcG9seWdvbiBhbW9uZ3N0IHRoZSBuZWFyYnkgcG9seWdvbnMuDQoNCiAgICAgICAgICB2YXIgbmVhcmVzdCA9IDA7DQogICAgICAgICAgdmFyIG5lYXJlc3REaXN0YW5jZVNxciA9IE51bWJlci5NQVhfVkFMVUU7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlzLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICB2YXIgcmVmID0gcG9seXNbaV07DQogICAgICAgICAgICB2YXIgY2xvc2VzdCA9IHRoaXMuY2xvc2VzdFBvaW50T25Qb2x5KHJlZiwgY2VudGVyKTsNCiAgICAgICAgICAgIHZhciBwb3NPdmVyUG9seSA9IGNsb3Nlc3QuaXNQb3NPdmVyUG9seSgpOw0KICAgICAgICAgICAgdmFyIGNsb3Nlc3RQdFBvbHkgPSBjbG9zZXN0LmdldENsb3Nlc3QoKTsgLy8gSWYgYSBwb1BvbHkgaXMgZGlyZWN0bHkgb3ZlciBhIHBvbHlnb24gYW5kIGNsb3NlciB0aGFuDQogICAgICAgICAgICAvLyBjbGltYiBoZWlnaHQsIGZhdm9yIHRoYXQgaW5zdGVhZCBvZiBzdHJhaWdodCBsaW5lIG5lYXJlc3QgcG9pbnQuDQoNCiAgICAgICAgICAgIHZhciBkID0gMDsNCiAgICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIoY2VudGVyLCBjbG9zZXN0UHRQb2x5KTsNCg0KICAgICAgICAgICAgaWYgKHBvc092ZXJQb2x5KSB7DQogICAgICAgICAgICAgIHZhciB0aWxhQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShwb2x5c1tpXSk7DQogICAgICAgICAgICAgIHZhciBfdGlsZSA9IHRpbGFBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICBkID0gTWF0aC5hYnMoZGlmZlsxXSkgLSBfdGlsZS5kYXRhLmhlYWRlci53YWxrYWJsZUNsaW1iOw0KICAgICAgICAgICAgICBkID0gZCA+IDAgPyBkICogZCA6IDA7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBkID0gRGV0b3VyQ29tbW9uLnZMZW5TcXIoZGlmZik7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChkIDwgbmVhcmVzdERpc3RhbmNlU3FyKSB7DQogICAgICAgICAgICAgIG5lYXJlc3RQdCA9IGNsb3Nlc3RQdFBvbHk7DQogICAgICAgICAgICAgIG5lYXJlc3REaXN0YW5jZVNxciA9IGQ7DQogICAgICAgICAgICAgIG5lYXJlc3QgPSByZWY7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG5ldyBGaW5kTmVhcmVzdFBvbHlSZXN1bHQobmVhcmVzdCwgbmVhcmVzdFB0KTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhbmQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYW5kKHYxLCB2Mikgew0KICAgICAgICAgIHZhciBoaSA9IDB4ODAwMDAwMDA7DQogICAgICAgICAgdmFyIGxvdyA9IDB4N2ZmZmZmZmY7DQogICAgICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpOw0KICAgICAgICAgIHZhciBoaTIgPSB+fih2MiAvIGhpKTsNCiAgICAgICAgICB2YXIgbG93MSA9IHYxICYgbG93Ow0KICAgICAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7DQogICAgICAgICAgdmFyIGggPSBoaTEgJiBoaTI7DQogICAgICAgICAgdmFyIGwgPSBsb3cxICYgbG93MjsNCiAgICAgICAgICByZXR1cm4gaCAqIGhpICsgbDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJvciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcih2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwOw0KICAgICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmOw0KICAgICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTsNCiAgICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7DQogICAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdzsNCiAgICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93Ow0KICAgICAgICAgIHZhciBoID0gaGkxIHwgaGkyOw0KICAgICAgICAgIHZhciBsID0gbG93MSB8IGxvdzI7DQogICAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7DQogICAgICAgIH0gLy8gRklYTUU6IChQUCkgZHVwbGljYXRlPw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInF1ZXJ5UG9seWdvbnNJblRpbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcXVlcnlQb2x5Z29uc0luVGlsZSh0aWxlLCBxbWluLCBxbWF4LCBmaWx0ZXIpIHsNCiAgICAgICAgICB2YXIgcG9seXMgPSBbXTsNCg0KICAgICAgICAgIGlmICh0aWxlLmRhdGEuYnZUcmVlICE9IG51bGwpIHsNCiAgICAgICAgICAgIHZhciBub2RlSW5kZXggPSAwOw0KICAgICAgICAgICAgdmFyIHRibWluID0gdGlsZS5kYXRhLmhlYWRlci5ibWluOw0KICAgICAgICAgICAgdmFyIHRibWF4ID0gdGlsZS5kYXRhLmhlYWRlci5ibWF4Ow0KICAgICAgICAgICAgdmFyIHFmYWMgPSB0aWxlLmRhdGEuaGVhZGVyLmJ2UXVhbnRGYWN0b3I7IC8vIENhbGN1bGF0ZSBxdWFudGl6ZWQgYm94DQoNCiAgICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgdmFyIGJtYXggPSBuZXcgQXJyYXkoMyk7IC8vIGR0Q2xhbXAgcXVlcnkgYm94IHRvIHdvcmxkIGJveC4NCg0KICAgICAgICAgICAgdmFyIG1pbnggPSBEZXRvdXJDb21tb24uY2xhbXAocW1pblswXSwgdGJtaW5bMF0sIHRibWF4WzBdKSAtIHRibWluWzBdOw0KICAgICAgICAgICAgdmFyIG1pbnkgPSBEZXRvdXJDb21tb24uY2xhbXAocW1pblsxXSwgdGJtaW5bMV0sIHRibWF4WzFdKSAtIHRibWluWzFdOw0KICAgICAgICAgICAgdmFyIG1pbnogPSBEZXRvdXJDb21tb24uY2xhbXAocW1pblsyXSwgdGJtaW5bMl0sIHRibWF4WzJdKSAtIHRibWluWzJdOw0KICAgICAgICAgICAgdmFyIG1heHggPSBEZXRvdXJDb21tb24uY2xhbXAocW1heFswXSwgdGJtaW5bMF0sIHRibWF4WzBdKSAtIHRibWluWzBdOw0KICAgICAgICAgICAgdmFyIG1heHkgPSBEZXRvdXJDb21tb24uY2xhbXAocW1heFsxXSwgdGJtaW5bMV0sIHRibWF4WzFdKSAtIHRibWluWzFdOw0KICAgICAgICAgICAgdmFyIG1heHogPSBEZXRvdXJDb21tb24uY2xhbXAocW1heFsyXSwgdGJtaW5bMl0sIHRibWF4WzJdKSAtIHRibWluWzJdOyAvLyBRdWFudGl6ZQ0KDQogICAgICAgICAgICBibWluWzBdID0gdGhpcy5hbmQoTWF0aC5mbG9vcihxZmFjICogbWlueCksIDB4ZmZmZSk7DQogICAgICAgICAgICBibWluWzFdID0gdGhpcy5hbmQoTWF0aC5mbG9vcihxZmFjICogbWlueSksIDB4ZmZmZSk7DQogICAgICAgICAgICBibWluWzJdID0gdGhpcy5hbmQoTWF0aC5mbG9vcihxZmFjICogbWlueiksIDB4ZmZmZSk7DQogICAgICAgICAgICBibWF4WzBdID0gdGhpcy5vcihNYXRoLmZsb29yKHFmYWMgKiBtYXh4ICsgMSksIDEpOw0KICAgICAgICAgICAgYm1heFsxXSA9IHRoaXMub3IoTWF0aC5mbG9vcihxZmFjICogbWF4eSArIDEpLCAxKTsNCiAgICAgICAgICAgIGJtYXhbMl0gPSB0aGlzLm9yKE1hdGguZmxvb3IocWZhYyAqIG1heHogKyAxKSwgMSk7IC8vIFRyYXZlcnNlIHRyZWUNCg0KICAgICAgICAgICAgdmFyIGJhc2UgPSB0aGlzLm1fbmF2LmdldFBvbHlSZWZCYXNlKHRpbGUpOw0KICAgICAgICAgICAgdmFyIGVuZCA9IHRpbGUuZGF0YS5oZWFkZXIuYnZOb2RlQ291bnQ7DQoNCiAgICAgICAgICAgIHdoaWxlIChub2RlSW5kZXggPCBlbmQpIHsNCiAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aWxlLmRhdGEuYnZUcmVlW25vZGVJbmRleF07DQogICAgICAgICAgICAgIHZhciBvdmVybGFwID0gRGV0b3VyQ29tbW9uLm92ZXJsYXBRdWFudEJvdW5kcyhibWluLCBibWF4LCBub2RlLmJtaW4sIG5vZGUuYm1heCk7DQogICAgICAgICAgICAgIHZhciBpc0xlYWZOb2RlID0gbm9kZS5pID49IDA7DQoNCiAgICAgICAgICAgICAgaWYgKGlzTGVhZk5vZGUgJiYgb3ZlcmxhcCkgew0KICAgICAgICAgICAgICAgIHZhciByZWYgPSB0aGlzLm9yKGJhc2UsIG5vZGUuaSk7DQoNCiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBhc3NGaWx0ZXIocmVmLCB0aWxlLCB0aWxlLmRhdGEucG9seXNbbm9kZS5pXSkpIHsNCiAgICAgICAgICAgICAgICAgIHBvbHlzLnB1c2gocmVmKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAob3ZlcmxhcCB8fCBpc0xlYWZOb2RlKSBub2RlSW5kZXgrKztlbHNlIHsNCiAgICAgICAgICAgICAgICB2YXIgZXNjYXBlSW5kZXggPSAtbm9kZS5pOw0KICAgICAgICAgICAgICAgIG5vZGVJbmRleCArPSBlc2NhcGVJbmRleDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gcG9seXM7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhciBfYm1pbiA9IG5ldyBBcnJheSgzKTsNCg0KICAgICAgICAgICAgdmFyIF9ibWF4ID0gbmV3IEFycmF5KDMpOw0KDQogICAgICAgICAgICB2YXIgX2Jhc2UgPSB0aGlzLm1fbmF2LmdldFBvbHlSZWZCYXNlKHRpbGUpOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK2kpIHsNCiAgICAgICAgICAgICAgdmFyIHAgPSB0aWxlLmRhdGEucG9seXNbaV07IC8vIERvIG5vdCByZXR1cm4gb2ZmLW1lc2ggY29ubmVjdGlvbiBwb2x5Z29ucy4NCg0KICAgICAgICAgICAgICBpZiAocC5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgIHZhciBfcmVmID0gX2Jhc2UgfCBpOw0KDQogICAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIoX3JlZiwgdGlsZSwgcCkpIGNvbnRpbnVlOyAvLyBDYWxjIHBvbHlnb24gYm91bmRzLg0KDQogICAgICAgICAgICAgIHZhciB2ID0gcC52ZXJ0c1swXSAqIDM7DQogICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShfYm1pbiwgdGlsZS5kYXRhLnZlcnRzLCB2KTsNCiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KF9ibWF4LCB0aWxlLmRhdGEudmVydHMsIHYpOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgcC52ZXJ0Q291bnQ7ICsraikgew0KICAgICAgICAgICAgICAgIHYgPSBwLnZlcnRzW2pdICogMzsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udk1pbihfYm1pbiwgdGlsZS5kYXRhLnZlcnRzLCB2KTsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udk1heChfYm1heCwgdGlsZS5kYXRhLnZlcnRzLCB2KTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChvdmVybGFwQm91bmRzKHFtaW4sIHFtYXgsIF9ibWluLCBfYm1heCkpIHsNCiAgICAgICAgICAgICAgICBwb2x5cy5wdXNoKF9yZWYpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBwb2x5czsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIEZpbmRzIHBvbHlnb25zIHRoYXQgb3ZlcmxhcCB0aGUgc2VhcmNoIGJveC4NCiAgICAgICAgICogDQogICAgICAgICAqIElmIG5vIHBvbHlnb25zIGFyZSBmb3VuZCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHdpdGggYSBwb2x5Q291bnQgb2YgemVyby4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSBjZW50ZXINCiAgICAgICAgICogICAgICAgICAgICBUaGUgY2VudGVyIG9mIHRoZSBzZWFyY2ggYm94LiBbKHgsIHksIHopXQ0KICAgICAgICAgKiBAcGFyYW0gZXh0ZW50cw0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBzZWFyY2ggZGlzdGFuY2UgYVBvbHkgZWFjaCBheGlzLiBbKHgsIHksIHopXQ0KICAgICAgICAgKiBAcGFyYW0gKGZpbHRlcikNCiAgICAgICAgICogICAgICAgICAgICBUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5Lg0KICAgICAgICAgKiBAcmV0dXJuIFRoZSByZWZlcmVuY2UgaWRzIG9mIHRoZSBwb2x5Z29ucyB0aGF0IG92ZXJsYXAgdGhlIHF1ZXJ5IGJveC4NCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicXVlcnlQb2x5Z29ucyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeVBvbHlnb25zKGNlbnRlciwgZXh0ZW50cywgZmlsdGVyKSB7DQogICAgICAgICAgdmFyIGJtaW4gPSBEZXRvdXJDb21tb24udlN1YihjZW50ZXIsIGV4dGVudHMpOw0KICAgICAgICAgIHZhciBibWF4ID0gRGV0b3VyQ29tbW9uLnZBZGQoY2VudGVyLCBleHRlbnRzKTsgLy8gRmluZCB0aWxlcyB0aGUgcXVlcnkgdG91Y2hlcy4NCg0KICAgICAgICAgIHZhciBtaW54eSA9IHRoaXMubV9uYXYuY2FsY1RpbGVMb2MoYm1pbik7DQogICAgICAgICAgdmFyIG1pbnggPSBtaW54eVswXTsNCiAgICAgICAgICB2YXIgbWlueSA9IG1pbnh5WzFdOw0KICAgICAgICAgIHZhciBtYXh4eSA9IHRoaXMubV9uYXYuY2FsY1RpbGVMb2MoYm1heCk7DQogICAgICAgICAgdmFyIG1heHggPSBtYXh4eVswXTsNCiAgICAgICAgICB2YXIgbWF4eSA9IG1heHh5WzFdOw0KICAgICAgICAgIHZhciBwb2x5cyA9IFtdOw0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IG1pbnk7IHkgPD0gbWF4eTsgKyt5KSB7DQogICAgICAgICAgICBmb3IgKHZhciBfeCA9IG1pbng7IF94IDw9IG1heHg7ICsrX3gpIHsNCiAgICAgICAgICAgICAgdmFyIG5laXMgPSB0aGlzLm1fbmF2LmdldFRpbGVzQXQoX3gsIHkpOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmVpcy5sZW5ndGg7ICsraikgew0KICAgICAgICAgICAgICAgIHZhciBwb2x5c0luVGlsZSA9IHRoaXMucXVlcnlQb2x5Z29uc0luVGlsZShuZWlzW2pdLCBibWluLCBibWF4LCBmaWx0ZXIpOw0KICAgICAgICAgICAgICAgIHBvbHlzLnB1c2guYXBwbHkocG9seXMsIF90b0NvbnN1bWFibGVBcnJheShwb2x5c0luVGlsZSkpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHBvbHlzOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBGaW5kcyBhIHBhdGggZnJvbSB0aGUgc3RhcnQgcG9seWdvbiB0byB0aGUgZW5kIHBvbHlnb24uDQogICAgICAgICAqIA0KICAgICAgICAgKiBJZiB0aGUgZW5kIHBvbHlnb24gY2Fubm90IGJlIHJlYWNoZWQgdGhyb3VnaCB0aGUgbmF2aWdhdGlvbiBncmFwaCwgdGhlIGxhc3QgcG9seWdvbiBpbiB0aGUgcGF0aCB3aWxsIGJlIHRoZQ0KICAgICAgICAgKiBuZWFyZXN0IHRoZSBlbmQgcG9seWdvbi4NCiAgICAgICAgICogDQogICAgICAgICAqIFRoZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyBhcmUgdXNlZCB0byBjYWxjdWxhdGUgdHJhdmVyc2FsIGNvc3RzLiAoVGhlIHktdmFsdWVzIGltcGFjdCB0aGUgcmVzdWx0LikNCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSBzdGFydFJlZg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSByZWZyZW5jZSBpZCBvZiB0aGUgc3RhcnQgcG9seWdvbi4NCiAgICAgICAgICogQHBhcmFtIGVuZFJlZg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIGVuZCBwb2x5Z29uLg0KICAgICAgICAgKiBAcGFyYW0gc3RhcnRQb3MNCiAgICAgICAgICogICAgICAgICAgICBBIHBvc2l0aW9uIHdpdGhpbiB0aGUgc3RhcnQgcG9seWdvbi4gWyh4LCB5LCB6KV0NCiAgICAgICAgICogQHBhcmFtIGVuZFBvcw0KICAgICAgICAgKiAgICAgICAgICAgIEEgcG9zaXRpb24gd2l0aGluIHRoZSBlbmQgcG9seWdvbi4gWyh4LCB5LCB6KV0NCiAgICAgICAgICogQHBhcmFtIGZpbHRlcg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuDQogICAgICAgICAqIEByZXR1cm4gRm91bmQgcGF0aA0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJmaW5kUGF0aCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUGF0aChzdGFydFJlZiwgZW5kUmVmLCBzdGFydFBvcywgZW5kUG9zLCBmaWx0ZXIpIHsNCiAgICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCBlbmRSZWYgPT0gMCkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiU3RhcnQgb3IgZW5kIHJlZiA9IDAiKTsgLy8gVmFsaWRhdGUgaW5wdXQNCg0KICAgICAgICAgIGlmICghdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikgfHwgIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYoZW5kUmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCBvciBlbmQgcmVmIik7DQoNCiAgICAgICAgICBpZiAoc3RhcnRSZWYgPT0gZW5kUmVmKSB7DQogICAgICAgICAgICB2YXIgX3BhdGggPSBuZXcgQXJyYXkoMSk7DQoNCiAgICAgICAgICAgIF9wYXRoLnB1c2goc3RhcnRSZWYpOw0KDQogICAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KFN0YXR1cy5TVUNDU0VTUywgX3BhdGgpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHRoaXMubV9ub2RlUG9vbCA9IFtdOw0KICAgICAgICAgIHRoaXMubV9vcGVuTGlzdCA9IFtdOw0KICAgICAgICAgIHZhciBzdGFydE5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHN0YXJ0Tm9kZS5wb3MsIHN0YXJ0UG9zKTsNCiAgICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7DQogICAgICAgICAgc3RhcnROb2RlLmNvc3QgPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS50b3RhbCA9IERldG91ckNvbW1vbi52RGlzdDIoc3RhcnRQb3MsIGVuZFBvcykgKiBOYXZNZXNoUXVlcnkuSF9TQ0FMRTsNCiAgICAgICAgICBzdGFydE5vZGUuaWQgPSBzdGFydFJlZjsNCiAgICAgICAgICBzdGFydE5vZGUuZmxhZ3MgPSBOb2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChzdGFydE5vZGUpOw0KICAgICAgICAgIHZhciBsYXN0QmVzdE5vZGUgPSBzdGFydE5vZGU7DQogICAgICAgICAgbGFzdEJlc3ROb2RlQ29zdCA9IHN0YXJ0Tm9kZS50b3RhbDsNCiAgICAgICAgICB2YXIgc3RhdHVzID0gU3RhdHVzLlNVQ0NTRVNTOw0KDQogICAgICAgICAgd2hpbGUgKCF0aGlzLm1fb3Blbkxpc3QubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIC8vIFJlbW92ZSBub2RlIGZyb20gb3BlbiBsaXN0IGFuZCBwdXQgaXQgaW4gY2xvc2VkIGxpc3QuDQogICAgICAgICAgICB2YXIgYmVzdE5vZGUgPSB0aGlzLm1fb3Blbkxpc3QucG9wKCk7DQogICAgICAgICAgICBiZXN0Tm9kZS5mbGFncyAmPSB+Tm9kZS5EVF9OT0RFX09QRU47DQogICAgICAgICAgICBiZXN0Tm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEOyAvLyBSZWFjaGVkIHRoZSBnb2FsLCBzdG9wIHNlYXJjaGluZy4NCg0KICAgICAgICAgICAgaWYgKGJlc3ROb2RlLmlkID09IGVuZFJlZikgew0KICAgICAgICAgICAgICBsYXN0QmVzdE5vZGUgPSBiZXN0Tm9kZTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9IC8vIEdldCBjdXJyZW50IGxldCBhbmQgdGlsZS4NCiAgICAgICAgICAgIC8vIFRoZSBBUEkgaW5wdXQgaGFzIGJlZW4gY2hla2VkIGFscmVhZHksIHNraXAgY2hlY2tpbmcgaW50ZXJuYWwgZGF0YS4NCg0KDQogICAgICAgICAgICB2YXIgYmVzdFJlZiA9IGJlc3ROb2RlLmlkOw0KICAgICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGJlc3RSZWYpOw0KICAgICAgICAgICAgdmFyIGJlc3RUaWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgICB2YXIgYmVzdFBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gR2V0IHBhcmVudCBsZXQgYW5kIHRpbGUuDQoNCiAgICAgICAgICAgIHZhciBwYXJlbnRSZWYgPSAwOw0KICAgICAgICAgICAgdmFyIHBhcmVudFRpbGUgPSBudWxsOw0KICAgICAgICAgICAgdmFyIHBhcmVudFBvbHkgPSBudWxsOw0KICAgICAgICAgICAgaWYgKGJlc3ROb2RlLnBpZHggIT0gMCkgcGFyZW50UmVmID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVBdElkeChiZXN0Tm9kZS5waWR4KS5pZDsNCg0KICAgICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7DQogICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBhcmVudFJlZik7DQogICAgICAgICAgICAgIHBhcmVudFRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgICAgcGFyZW50UG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gYmVzdFRpbGUubGlua3NbaV0ubmV4dCkgew0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUmVmID0gYmVzdFRpbGUubGlua3NbaV0ucmVmOyAvLyBTa2lwIGludmFsaWQgaWRzIGFuZCBkbyBub3QgZXhwYW5kIGJhY2sgdG8gd2hlcmUgd2UgY2FtZSBmcm9tLg0KDQogICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gMCB8fCBuZWlnaGJvdXJSZWYgPT0gcGFyZW50UmVmKSBjb250aW51ZTsgLy8gR2V0IG5laWdoYm91ciBsZXQgYW5kIHRpbGUuDQogICAgICAgICAgICAgIC8vIFRoZSBBUEkgaW5wdXQgaGFzIGJlZW4gY2hla2VkIGFscmVhZHksIHNraXAgY2hlY2tpbmcgaW50ZXJuYWwgZGF0YS4NCg0KICAgICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KICAgICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBkZWFsIGV4cGxpY2l0bHkgd2l0aCBjcm9zc2luZyB0aWxlIGJvdW5kYXJpZXMNCg0KICAgICAgICAgICAgICB2YXIgY3Jvc3NTaWRlID0gMDsNCiAgICAgICAgICAgICAgaWYgKGJlc3RUaWxlLmxpbmtzW2ldLnNpZGUgIT0gMHhmZikgY3Jvc3NTaWRlID0gYmVzdFRpbGUubGlua3NbaV0uc2lkZSA+PiAxOyAvLyBnZXQgdGhlIG5vZGUNCg0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyTm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlKG5laWdoYm91clJlZiwgY3Jvc3NTaWRlKTsgLy8gSWYgdGhlIG5vZGUgaXMgdmlzaXRlZCB0aGUgZmlyc3QgdGltZSwgY2FsY3VsYXRlIG5vZGUgcG9zaXRpb24uDQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91ck5vZGUuZmxhZ3MgPT0gMCkgew0KICAgICAgICAgICAgICAgIG5laWdoYm91ck5vZGUucG9zID0gdGhpcy5nZXRFZGdlTWlkUG9pbnQ2KGJlc3RSZWYsIGJlc3RQb2x5LCBiZXN0VGlsZSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJQb2x5LCBuZWlnaGJvdXJUaWxlKTsNCiAgICAgICAgICAgICAgfSAvLyBDYWxjdWxhdGUgY29zdCBhbmQgaGV1cmlzdGljLg0KDQoNCiAgICAgICAgICAgICAgY29zdCA9IDA7DQogICAgICAgICAgICAgIGhldXJpc3RpYyA9IDA7IC8vIFNwZWNpYWwgY2FzZSBmb3IgbGFzdCBub2RlLg0KDQogICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gZW5kUmVmKSB7DQogICAgICAgICAgICAgICAgLy8gQ29zdA0KICAgICAgICAgICAgICAgIGN1ckNvc3QgPSBmaWx0ZXIuZ2V0Q29zdChiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCBwYXJlbnRSZWYsIHBhcmVudFRpbGUsIHBhcmVudFBvbHksIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KTsNCiAgICAgICAgICAgICAgICB2YXIgZW5kQ29zdCA9IGZpbHRlci5nZXRDb3N0KG5laWdoYm91ck5vZGUucG9zLCBlbmRQb3MsIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5LCAwLCBudWxsLCBudWxsKTsNCiAgICAgICAgICAgICAgICBjb3N0ID0gYmVzdE5vZGUuY29zdCArIGN1ckNvc3QgKyBlbmRDb3N0Ow0KICAgICAgICAgICAgICAgIGhldXJpc3RpYyA9IDA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gQ29zdA0KICAgICAgICAgICAgICAgIGN1ckNvc3QgPSBmaWx0ZXIuZ2V0Q29zdChiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCBwYXJlbnRSZWYsIHBhcmVudFRpbGUsIHBhcmVudFBvbHksIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KTsNCiAgICAgICAgICAgICAgICBjb3N0ID0gYmVzdE5vZGUuY29zdCArIGN1ckNvc3Q7DQogICAgICAgICAgICAgICAgaGV1cmlzdGljID0gRGV0b3VyQ29tbW9uLnZEaXN0MihuZWlnaGJvdXJOb2RlLnBvcywgZW5kUG9zKSAqIE5hdk1lc2hRdWVyeS5IX1NDQUxFOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgdG90YWwgPSBjb3N0ICsgaGV1cmlzdGljOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsIHNraXAuDQoNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDAgJiYgdG90YWwgPj0gbmVpZ2hib3VyTm9kZS50b3RhbCkgY29udGludWU7IC8vIFRoZSBub2RlIGlzIGFscmVhZHkgdmlzaXRlZCBhbmQgcHJvY2VzcywgYW5kIHRoZSBuZXcgcmVzdWx0IGlzIHdvcnNlLCBza2lwLg0KDQogICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDAgJiYgdG90YWwgPj0gbmVpZ2hib3VyTm9kZS50b3RhbCkgY29udGludWU7IC8vIEFkZCBvciB1cGRhdGUgdGhlIG5vZGUuDQoNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmlkID0gbmVpZ2hib3VyUmVmOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzID0gbmVpZ2hib3VyTm9kZS5mbGFncyAmIH5Ob2RlLkRUX05PREVfQ0xPU0VEOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmNvc3QgPSBjb3N0Ow0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gdG90YWw7DQoNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDApIHsNCiAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IGluIG9wZW4sIHVwZGF0ZSBub2RlIGxvY2F0aW9uLg0KICAgICAgICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5tb2RpZnkobmVpZ2hib3VyTm9kZSk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gUHV0IHRoZSBub2RlIGluIG9wZW4gbGlzdC4NCiAgICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzIHw9IE5vZGUuRFRfTk9ERV9PUEVOOw0KICAgICAgICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKG5laWdoYm91ck5vZGUpOw0KICAgICAgICAgICAgICB9IC8vIFVwZGF0ZSBuZWFyZXN0IG5vZGUgdG8gdGFyZ2V0IHNvIGZhci4NCg0KDQogICAgICAgICAgICAgIGlmIChoZXVyaXN0aWMgPCBsYXN0QmVzdE5vZGVDb3N0KSB7DQogICAgICAgICAgICAgICAgbGFzdEJlc3ROb2RlQ29zdCA9IGhldXJpc3RpYzsNCiAgICAgICAgICAgICAgICBsYXN0QmVzdE5vZGUgPSBuZWlnaGJvdXJOb2RlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIHBhdGggPSBnZXRQYXRoVG9Ob2RlKGxhc3RCZXN0Tm9kZSk7DQogICAgICAgICAgaWYgKGxhc3RCZXN0Tm9kZS5pZCAhPSBlbmRSZWYpIHN0YXR1cyA9IFN0YXR1cy5QQVJUSUFMX1JFU1VMVDsNCiAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KHN0YXR1cywgcGF0aCk7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIEludGlhbGl6ZXMgYSBzbGljZWQgcGF0aCBxdWVyeS4NCiAgICAgICAgICogDQogICAgICAgICAqIENvbW1vbiB1c2UgY2FzZTogLSMgQ2FsbCBpbml0U2xpY2VkRmluZFBhdGgoKSB0byBpbml0aWFsaXplIHRoZSBzbGljZWQgcGF0aCBxdWVyeS4gLSMgQ2FsbCB1cGRhdGVTbGljZWRGaW5kUGF0aCgpDQogICAgICAgICAqIHVudGlsIGl0IHJldHVybnMgY29tcFBvbHllLiAtIyBDYWxsIGZpbmFsaXplU2xpY2VkRmluZFBhdGgoKSB0byBnZXQgdGhlIHBhdGguDQogICAgICAgICAqIA0KICAgICAgICAgKiBAcGFyYW0gc3RhcnRSZWYNCiAgICAgICAgICogICAgICAgICAgICBUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBzdGFydCBwb2x5Z29uLg0KICAgICAgICAgKiBAcGFyYW0gZW5kUmVmDQogICAgICAgICAqICAgICAgICAgICAgVGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgZW5kIHBvbHlnb24uDQogICAgICAgICAqIEBwYXJhbSBzdGFydFBvcw0KICAgICAgICAgKiAgICAgICAgICAgIEEgcG9zaXRpb24gd2l0aGluIHRoZSBzdGFydCBwb2x5Z29uLiBbKHgsIHksIHopXQ0KICAgICAgICAgKiBAcGFyYW0gZW5kUG9zDQogICAgICAgICAqICAgICAgICAgICAgQSBwb3NpdGlvbiB3aXRoaW4gdGhlIGVuZCBwb2x5Z29uLiBbKHgsIHksIHopXQ0KICAgICAgICAgKiBAcGFyYW0gZmlsdGVyDQogICAgICAgICAqICAgICAgICAgICAgVGhlIHBvbHlnb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoZSBxdWVyeS4NCiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMNCiAgICAgICAgICogICAgICAgICAgICBxdWVyeSBvcHRpb25zIChzZWU6ICNGaW5kUGF0aE9wdGlvbnMpDQogICAgICAgICAqIEByZXR1cm4NCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiaW5pdFNsaWNlZEZpbmRQYXRoIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXRTbGljZWRGaW5kUGF0aChzdGFydFJlZiwgZW5kUmVmLCBzdGFydFBvcywgZW5kUG9zLCBmaWx0ZXIsIG9wdGlvbnMpIHsNCiAgICAgICAgICAvLyBJbml0IHBhdGggc3RhdGUuDQogICAgICAgICAgdGhpcy5tX3F1ZXJ5ID0gbmV3IFF1ZXJ5RGF0YSgpOw0KICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuRkFJTFVSRTsNCiAgICAgICAgICB0aGlzLm1fcXVlcnkuc3RhcnRSZWYgPSBzdGFydFJlZjsNCiAgICAgICAgICB0aGlzLm1fcXVlcnkuZW5kUmVmID0gZW5kUmVmOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcXVlcnkuc3RhcnRQb3MsIHN0YXJ0UG9zKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3F1ZXJ5LmVuZFBvcywgZW5kUG9zKTsNCiAgICAgICAgICB0aGlzLm1fcXVlcnkuZmlsdGVyID0gZmlsdGVyOw0KICAgICAgICAgIHRoaXMubV9xdWVyeS5vcHRpb25zID0gb3B0aW9uczsNCiAgICAgICAgICB0aGlzLm1fcXVlcnkucmF5Y2FzdExpbWl0U3FyID0gTnVtYmVyLk1BWF9WQUxVRTsNCiAgICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCBlbmRSZWYgPT0gMCkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiU3RhcnQgb3IgZW5kIHJlZiA9IDAiKTsgLy8gVmFsaWRhdGUgaW5wdXQNCg0KICAgICAgICAgIGlmICghdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikgfHwgIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYoZW5kUmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCBvciBlbmQgcmVmIik7IC8vIHRyYWRlIHF1YWxpdHkgd2l0aCBwZXJmb3JtYW5jZT8NCg0KICAgICAgICAgIGlmICgob3B0aW9ucyAmIE5hdk1lc2hRdWVyeS5EVF9GSU5EUEFUSF9BTllfQU5HTEUpICE9IDApIHsNCiAgICAgICAgICAgIC8vIGxpbWl0aW5nIHRvIHNldmVyYWwgdGltZXMgdGhlIGNoYXJhY3RlciByYWRpdXMgeWllbGRzIG5pY2UgcmVzdWx0cy4gSXQgaXMgbm90IHNlbnNpdGl2ZQ0KICAgICAgICAgICAgLy8gc28gaXQgaXMgZW5vdWdoIHRvIGNvbXB1dGUgaXQgZnJvbSB0aGUgZmlyc3QgdGlsZS4NCiAgICAgICAgICAgIHZhciBfdGlsZTIgPSB0aGlzLm1fbmF2LmdldFRpbGVCeVJlZihzdGFydFJlZik7DQoNCiAgICAgICAgICAgIGFnZW50UmFkaXVzID0gX3RpbGUyLmRhdGEuaGVhZGVyLndhbGthYmxlUmFkaXVzOw0KICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5LnJheWNhc3RMaW1pdFNxciA9IERldG91ckNvbW1vbi5zcXIoYWdlbnRSYWRpdXMgKiBOYXZNZXNoLkRUX1JBWV9DQVNUX0xJTUlUX1BST1BPUlRJT05TKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoc3RhcnRSZWYgPT0gZW5kUmVmKSB7DQogICAgICAgICAgICB0aGlzLm1fcXVlcnkuc3RhdHVzID0gU3RhdHVzLlNVQ0NTRVNTOw0KICAgICAgICAgICAgcmV0dXJuIFN0YXR1cy5TVUNDU0VTUzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB0aGlzLm1fbm9kZVBvb2wuY2xlYXIoKTsNCiAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QuY2xlYXIoKTsNCiAgICAgICAgICB2YXIgc3RhcnROb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUoc3RhcnRSZWYpOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShzdGFydE5vZGUucG9zLCBzdGFydFBvcyk7DQogICAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5jb3N0ID0gMDsNCiAgICAgICAgICBzdGFydE5vZGUudG90YWwgPSBEZXRvdXJDb21tb24udkRpc3QyKHN0YXJ0UG9zLCBlbmRQb3MpICogTmF2TWVzaFF1ZXJ5LkhfU0NBTEU7DQogICAgICAgICAgc3RhcnROb2RlLmlkID0gc3RhcnRSZWY7DQogICAgICAgICAgc3RhcnROb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX09QRU47DQogICAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2goc3RhcnROb2RlKTsNCiAgICAgICAgICB0aGlzLm1fcXVlcnkuc3RhdHVzID0gU3RhdHVzLklOX1BST0dSRVNTOw0KICAgICAgICAgIHRoaXMubV9xdWVyeS5sYXN0QmVzdE5vZGUgPSBzdGFydE5vZGU7DQogICAgICAgICAgdGhpcy5tX3F1ZXJ5Lmxhc3RCZXN0Tm9kZUNvc3QgPSBzdGFydE5vZGUudG90YWw7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9xdWVyeS5zdGF0dXM7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIFVwZGF0ZXMgYW4gaW4tcHJvZ3Jlc3Mgc2xpY2VkIHBhdGggcXVlcnkuDQogICAgICAgICAqIA0KICAgICAgICAgKiBAcGFyYW0gbWF4SXRlcg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVyYXRpb25zIHRvIHBlcmZvcm0uDQogICAgICAgICAqIEByZXR1cm4gVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5Lg0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ1cGRhdGVTbGljZWRGaW5kUGF0aCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVTbGljZWRGaW5kUGF0aChtYXhJdGVyKSB7DQogICAgICAgICAgaWYgKHRoaXMubV9xdWVyeS5zdGF0dXMgIT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gbmV3IFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQodGhpcy5tX3F1ZXJ5LnN0YXR1cywgMCk7IC8vIE1ha2Ugc3VyZSB0aGUgcmVxdWVzdCBpcyBzdGlsbCB2YWxpZC4NCg0KICAgICAgICAgIGlmICghdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZih0aGlzLm1fcXVlcnkuc3RhcnRSZWYpIHx8ICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHRoaXMubV9xdWVyeS5lbmRSZWYpKSB7DQogICAgICAgICAgICB0aGlzLm1fcXVlcnkuc3RhdHVzID0gU3RhdHVzLkZBSUxVUkU7DQogICAgICAgICAgICByZXR1cm4gbmV3IFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQodGhpcy5tX3F1ZXJ5LnN0YXR1cywgMCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGl0ZXIgPSAwOw0KDQogICAgICAgICAgd2hpbGUgKGl0ZXIgPCBtYXhJdGVyICYmICF0aGlzLm1fb3Blbkxpc3QuaXNFbXB0eSgpKSB7DQogICAgICAgICAgICBpdGVyKys7IC8vIFJlbW92ZSBub2RlIGZyb20gb3BlbiBsaXN0IGFuZCBwdXQgaXQgaW4gY2xvc2VkIGxpc3QuDQoNCiAgICAgICAgICAgIHZhciBiZXN0Tm9kZSA9IHRoaXMubV9vcGVuTGlzdC5wb3AoKTsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzICY9IH5Ob2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzIHw9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7IC8vIFJlYWNoZWQgdGhlIGdvYWwsIHN0b3Agc2VhcmNoaW5nLg0KDQogICAgICAgICAgICBpZiAoYmVzdE5vZGUuaWQgPT0gdGhpcy5tX3F1ZXJ5LmVuZFJlZikgew0KICAgICAgICAgICAgICB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlID0gYmVzdE5vZGU7DQogICAgICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuU1VDQ1NFU1M7DQogICAgICAgICAgICAgIHJldHVybiBuZXcgVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCh0aGlzLm1fcXVlcnkuc3RhdHVzLCBpdGVyKTsNCiAgICAgICAgICAgIH0gLy8gR2V0IGN1cnJlbnQgbGV0IGFuZCB0aWxlLg0KICAgICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbA0KICAgICAgICAgICAgLy8gZGF0YS4NCg0KDQogICAgICAgICAgICB2YXIgYmVzdFJlZiA9IGJlc3ROb2RlLmlkOw0KICAgICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdm9pZCAwOw0KDQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihiZXN0UmVmKTsNCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5GQUlMVVJFOyAvLyBUaGUgcG9seWdvbiBoYXMgZGlzYXBwZWFyZWQgZHVyaW5nIHRoZSBzbGljZWQgcXVlcnksIGZhaWwuDQoNCiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGVTbGljZWRQYXRoUmVzdWx0KHRoaXMubV9xdWVyeS5zdGF0dXMsIGl0ZXIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgYmVzdFRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgIHZhciBiZXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgcGFyZW50IGFuZCBncmFuZCBwYXJlbnQgbGV0IGFuZCB0aWxlLg0KDQogICAgICAgICAgICB2YXIgcGFyZW50UmVmID0gMCwNCiAgICAgICAgICAgICAgICBncmFuZHBhUmVmID0gMDsNCiAgICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gbnVsbDsNCiAgICAgICAgICAgIHZhciBwYXJlbnRQb2x5ID0gbnVsbDsNCiAgICAgICAgICAgIHZhciBwYXJlbnROb2RlID0gbnVsbDsNCg0KICAgICAgICAgICAgaWYgKGJlc3ROb2RlLnBpZHggIT0gMCkgew0KICAgICAgICAgICAgICBwYXJlbnROb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVBdElkeChiZXN0Tm9kZS5waWR4KTsNCiAgICAgICAgICAgICAgcGFyZW50UmVmID0gcGFyZW50Tm9kZS5pZDsNCiAgICAgICAgICAgICAgaWYgKHBhcmVudE5vZGUucGlkeCAhPSAwKSBncmFuZHBhUmVmID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVBdElkeChwYXJlbnROb2RlLnBpZHgpLmlkOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAocGFyZW50UmVmICE9IDApIHsNCiAgICAgICAgICAgICAgdmFyIGludmFsaWRQYXJlbnQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHBhcmVudFJlZik7DQogICAgICAgICAgICAgICAgcGFyZW50VGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICAgIHBhcmVudFBvbHkgPSB0aWxlQW5kUG9seVsxXTsNCiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgIGludmFsaWRQYXJlbnQgPSB0cnVlOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgaWYgKGludmFsaWRQYXJlbnQgfHwgZ3JhbmRwYVJlZiAhPSAwICYmICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKGdyYW5kcGFSZWYpKSB7DQogICAgICAgICAgICAgICAgLy8gVGhlIHBvbHlnb24gaGFzIGRpc2FwcGVhcmVkIGR1cmluZyB0aGUgc2xpY2VkIHF1ZXJ5LA0KICAgICAgICAgICAgICAgIC8vIGZhaWwuDQogICAgICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5GQUlMVVJFOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCh0aGlzLm1fcXVlcnkuc3RhdHVzLCBpdGVyKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSAvLyBkZWNpZGUgd2hldGhlciB0byB0ZXN0IHJheWNhc3QgdG8gcHJldmlvdXMgbm9kZXMNCg0KDQogICAgICAgICAgICB2YXIgdHJ5TE9TID0gZmFsc2U7DQoNCiAgICAgICAgICAgIGlmICgodGhpcy5tX3F1ZXJ5Lm9wdGlvbnMgJiBOYXZNZXNoUXVlcnkuRFRfRklORFBBVEhfQU5ZX0FOR0xFKSAhPSAwKSB7DQogICAgICAgICAgICAgIGlmIChwYXJlbnRSZWYgIT0gMCAmJiBEZXRvdXJDb21tb24udkRpc3RTcXIocGFyZW50Tm9kZS5wb3MsIGJlc3ROb2RlLnBvcykgPCB0aGlzLm1fcXVlcnkucmF5Y2FzdExpbWl0U3FyKSB0cnlMT1MgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gYmVzdFRpbGUubGlua3NbaV0ubmV4dCkgew0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUmVmID0gYmVzdFRpbGUubGlua3NbaV0ucmVmOyAvLyBiZXN0VGlsZS5saW5rcy5mb3JFYWNoKHo9PmNvbnNvbGUubG9nKHoucmVmKSk7DQogICAgICAgICAgICAgIC8vIFNraXAgaW52YWxpZCBpZHMgYW5kIGRvIG5vdCBleHBhbmQgYmFjayB0byB3aGVyZSB3ZSBjYW1lDQogICAgICAgICAgICAgIC8vIGZyb20uDQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91clJlZiA9PSAwIHx8IG5laWdoYm91clJlZiA9PSBwYXJlbnRSZWYpIGNvbnRpbnVlOyAvLyBHZXQgbmVpZ2hib3VyIGxldCBhbmQgdGlsZS4NCiAgICAgICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbA0KICAgICAgICAgICAgICAvLyBkYXRhLg0KDQogICAgICAgICAgICAgIHZhciB0aWxlQW5kUG9seVVucyA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IHRpbGVBbmRQb2x5VW5zWzBdOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IHRpbGVBbmRQb2x5VW5zWzFdOw0KICAgICAgICAgICAgICBpZiAoIXRoaXMubV9xdWVyeS5maWx0ZXIucGFzc0ZpbHRlcihuZWlnaGJvdXJSZWYsIG5laWdoYm91clRpbGUsIG5laWdoYm91clBvbHkpKSBjb250aW51ZTsgLy8gZ2V0IHRoZSBuZWlnaGJvciBub2RlDQoNCiAgICAgICAgICAgICAgdmFyIG5laWdoYm91ck5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShuZWlnaGJvdXJSZWYsIDApOyAvLyBkbyBub3QgZXhwYW5kIHRvIG5vZGVzIHRoYXQgd2VyZSBhbHJlYWR5IHZpc2l0ZWQgZnJvbSB0aGUNCiAgICAgICAgICAgICAgLy8gc2FtZSBwYXJlbnQNCg0KICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5waWR4ICE9IDAgJiYgbmVpZ2hib3VyTm9kZS5waWR4ID09IGJlc3ROb2RlLnBpZHgpIGNvbnRpbnVlOyAvLyBJZiB0aGUgbm9kZSBpcyB2aXNpdGVkIHRoZSBmaXJzdCB0aW1lLCBjYWxjdWxhdGUgbm9kZQ0KICAgICAgICAgICAgICAvLyBwb3NpdGlvbi4NCg0KICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSB7DQogICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5wb3MgPSB0aGlzLmdldEVkZ2VNaWRQb2ludDYoYmVzdFJlZiwgYmVzdFBvbHksIGJlc3RUaWxlLCBuZWlnaGJvdXJSZWYsIG5laWdoYm91clBvbHksIG5laWdoYm91clRpbGUpOw0KICAgICAgICAgICAgICB9IC8vIENhbGN1bGF0ZSBjb3N0IGFuZCBoZXVyaXN0aWMuDQoNCg0KICAgICAgICAgICAgICB2YXIgX2Nvc3QgPSAwOw0KICAgICAgICAgICAgICB2YXIgX2hldXJpc3RpYyA9IDA7IC8vIHJheWNhc3QgcGFyZW50DQoNCiAgICAgICAgICAgICAgdmFyIGZvdW5kU2hvcnRDdXQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICBpZiAodHJ5TE9TKSB7DQogICAgICAgICAgICAgICAgdmFyIHJheUhpdCA9IHJheWNhc3QocGFyZW50UmVmLCBwYXJlbnROb2RlLnBvcywgbmVpZ2hib3VyTm9kZS5wb3MsIHRoaXMubV9xdWVyeS5maWx0ZXIsIE5hdk1lc2hRdWVyeS5EVF9SQVlDQVNUX1VTRV9DT1NUUywgZ3JhbmRwYVJlZik7DQogICAgICAgICAgICAgICAgZm91bmRTaG9ydEN1dCA9IHJheUhpdC50ID49IDEuMDsNCg0KICAgICAgICAgICAgICAgIGlmIChmb3VuZFNob3J0Q3V0KSB7DQogICAgICAgICAgICAgICAgICAvLyBzaG9ydGN1dCBmb3VuZCB1c2luZyByYXljYXN0LiBVc2luZyBzaG9ydGVyIGNvc3QNCiAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQNCiAgICAgICAgICAgICAgICAgIF9jb3N0ID0gcGFyZW50Tm9kZS5jb3N0ICsgcmF5SGl0LnBhdGhDb3N0Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSAvLyB1cGRhdGUgbW92ZSBjb3N0DQoNCg0KICAgICAgICAgICAgICBpZiAoIWZvdW5kU2hvcnRDdXQpIHsNCiAgICAgICAgICAgICAgICAvLyBObyBzaG9ydGN1dCBmb3VuZC4NCiAgICAgICAgICAgICAgICB2YXIgX2N1ckNvc3QgPSB0aGlzLm1fcXVlcnkuZmlsdGVyLmdldENvc3QoYmVzdE5vZGUucG9zLCBuZWlnaGJvdXJOb2RlLnBvcywgcGFyZW50UmVmLCBwYXJlbnRUaWxlLCBwYXJlbnRQb2x5LCBiZXN0UmVmLCBiZXN0VGlsZSwgYmVzdFBvbHksIG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSk7DQoNCiAgICAgICAgICAgICAgICBfY29zdCA9IGJlc3ROb2RlLmNvc3QgKyBfY3VyQ29zdDsNCiAgICAgICAgICAgICAgfSAvLyBTcGVjaWFsIGNhc2UgZm9yIGxhc3Qgbm9kZS4NCg0KDQogICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gdGhpcy5tX3F1ZXJ5LmVuZFJlZikgew0KICAgICAgICAgICAgICAgIHZhciBlbmRDb3N0ID0gdGhpcy5tX3F1ZXJ5LmZpbHRlci5nZXRDb3N0KG5laWdoYm91ck5vZGUucG9zLCB0aGlzLm1fcXVlcnkuZW5kUG9zLCBiZXN0UmVmLCBiZXN0VGlsZSwgYmVzdFBvbHksIG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSwgMCwgbnVsbCwgbnVsbCk7DQogICAgICAgICAgICAgICAgX2Nvc3QgPSBfY29zdCArIGVuZENvc3Q7DQogICAgICAgICAgICAgICAgX2hldXJpc3RpYyA9IDA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgX2hldXJpc3RpYyA9IERldG91ckNvbW1vbi52RGlzdDIobmVpZ2hib3VyTm9kZS5wb3MsIHRoaXMubV9xdWVyeS5lbmRQb3MpICogTmF2TWVzaFF1ZXJ5LkhfU0NBTEU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgX3RvdGFsID0gX2Nvc3QgKyBfaGV1cmlzdGljOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsDQogICAgICAgICAgICAgIC8vIHNraXAuDQoNCg0KICAgICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCAmJiBfdG90YWwgPj0gbmVpZ2hib3VyTm9kZS50b3RhbCkgY29udGludWU7IC8vIFRoZSBub2RlIGlzIGFscmVhZHkgdmlzaXRlZCBhbmQgcHJvY2VzcywgYW5kIHRoZSBuZXcgcmVzdWx0DQogICAgICAgICAgICAgIC8vIGlzIHdvcnNlLCBza2lwLg0KDQogICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDAgJiYgX3RvdGFsID49IG5laWdoYm91ck5vZGUudG90YWwpIGNvbnRpbnVlOyAvLyBBZGQgb3IgdXBkYXRlIHRoZSBub2RlLg0KDQogICAgICAgICAgICAgIG5laWdoYm91ck5vZGUucGlkeCA9IGZvdW5kU2hvcnRDdXQgPyBiZXN0Tm9kZS5waWR4IDogdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmlkID0gbmVpZ2hib3VyUmVmOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzID0gdGhpcy5hbmQobmVpZ2hib3VyTm9kZS5mbGFncywgfnRoaXMub3IoTm9kZS5EVF9OT0RFX0NMT1NFRCwgTm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCkpOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmNvc3QgPSBfY29zdDsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS50b3RhbCA9IF90b3RhbDsNCiAgICAgICAgICAgICAgaWYgKGZvdW5kU2hvcnRDdXQpIG5laWdoYm91ck5vZGUuZmxhZ3MgPSB0aGlzLm9yKG5laWdoYm91ck5vZGUuZmxhZ3MsIE5vZGUuRFRfTk9ERV9QQVJFTlRfREVUQUNIRUQpOw0KDQogICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBpbiBvcGVuLCB1cGRhdGUgbm9kZSBsb2NhdGlvbi4NCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QubW9kaWZ5KG5laWdoYm91ck5vZGUpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgbm9kZSBpbiBvcGVuIGxpc3QuDQogICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChuZWlnaGJvdXJOb2RlKTsNCiAgICAgICAgICAgICAgfSAvLyBVcGRhdGUgbmVhcmVzdCBub2RlIHRvIHRhcmdldCBzbyBmYXIuDQoNCg0KICAgICAgICAgICAgICBpZiAoX2hldXJpc3RpYyA8IHRoaXMubV9xdWVyeS5sYXN0QmVzdE5vZGVDb3N0KSB7DQogICAgICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5Lmxhc3RCZXN0Tm9kZUNvc3QgPSBfaGV1cmlzdGljOw0KICAgICAgICAgICAgICAgIHRoaXMubV9xdWVyeS5sYXN0QmVzdE5vZGUgPSBuZWlnaGJvdXJOb2RlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBFeGhhdXN0ZWQgYWxsIG5vZGVzLCBidXQgY291bGQgbm90IGZpbmQgcGF0aC4NCg0KDQogICAgICAgICAgaWYgKHRoaXMubV9vcGVuTGlzdC5pc0VtcHR5KCkpIHsNCiAgICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuUEFSVElBTF9SRVNVTFQ7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGVTbGljZWRQYXRoUmVzdWx0KHRoaXMubV9xdWVyeS5zdGF0dXMsIGl0ZXIpOw0KICAgICAgICB9IC8vLyBGaW5hbGl6ZXMgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgb2YgYSBzbGljZWQgcGF0aCBxdWVyeS4NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlwYXRoCQlBbiBvcmRlcmVkIGxpc3Qgb2YgcG9seWdvbiByZWZlcmVuY2VzIHJlcHJlc2VudGluZyB0aGUgcGF0aC4gKFN0YXJ0IHRvIGVuZC4pIA0KICAgICAgICAvLy8gIAkJCQkJCQlbKHBvbHlSZWYpICogQHAgcGF0aENvdW50XQ0KICAgICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmFsaXplU2xpY2VkRmluZFBhdGgiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluYWxpemVTbGljZWRGaW5kUGF0aCgpIHsNCiAgICAgICAgICB2YXIgcGF0aCA9IFtdOw0KDQogICAgICAgICAgaWYgKHRoaXMubV9xdWVyeS5zdGF0dXMgPT0gU3RhdHVzLkZBSUxVUkUpIHsNCiAgICAgICAgICAgIC8vIFJlc2V0IHF1ZXJ5Lg0KICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5ID0gbmV3IFF1ZXJ5RGF0YSgpOw0KICAgICAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChTdGF0dXMuRkFJTFVSRSwgcGF0aCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKHRoaXMubV9xdWVyeS5zdGFydFJlZiA9PSB0aGlzLm1fcXVlcnkuZW5kUmVmKSB7DQogICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSBzZWFyY2ggc3RhcnRzIGFuZCBlbmRzIGF0IHNhbWUgcG9seS4NCiAgICAgICAgICAgIHBhdGgucHVzaCh0aGlzLm1fcXVlcnkuc3RhcnRSZWYpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyBSZXZlcnNlIHRoZSBwYXRoLg0KICAgICAgICAgICAgaWYgKHRoaXMubV9xdWVyeS5sYXN0QmVzdE5vZGUuaWQgIT0gdGhpcy5tX3F1ZXJ5LmVuZFJlZikgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5QQVJUSUFMX1JFU1VMVDsNCiAgICAgICAgICAgIHZhciBwcmV2ID0gbnVsbDsNCiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5tX3F1ZXJ5Lmxhc3RCZXN0Tm9kZTsNCiAgICAgICAgICAgIHZhciBwcmV2UmF5ID0gMDsNCg0KICAgICAgICAgICAgZG8gew0KICAgICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTsNCiAgICAgICAgICAgICAgbm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgocHJldik7DQogICAgICAgICAgICAgIHByZXYgPSBub2RlOw0KICAgICAgICAgICAgICB2YXIgbmV4dFJheSA9IG5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfUEFSRU5UX0RFVEFDSEVEOyAvLyBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgcGFyZW50IGlzIG5vdCBhZGphY2VudCAoaS5lLiBkdWUgdG8gcmF5Y2FzdCBzaG9ydGN1dCkNCg0KICAgICAgICAgICAgICBub2RlLmZsYWdzID0gdGhpcy5vcih0aGlzLmFuZChub2RlLmZsYWdzLCB+Tm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCksIHByZXZSYXkpOyAvLyBhbmQgc3RvcmUgaXQgaW4gdGhlIHJldmVyc2VkIHBhdGgncyBub2RlDQoNCiAgICAgICAgICAgICAgcHJldlJheSA9IG5leHRSYXk7DQogICAgICAgICAgICAgIG5vZGUgPSBuZXh0Ow0KICAgICAgICAgICAgfSB3aGlsZSAobm9kZSAhPSBudWxsKTsgLy8gU3RvcmUgcGF0aA0KDQoNCiAgICAgICAgICAgIG5vZGUgPSBwcmV2Ow0KDQogICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgIHZhciBfbmV4dCA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTsNCg0KICAgICAgICAgICAgICBpZiAoKG5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfUEFSRU5UX0RFVEFDSEVEKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgdmFyIGlyZXN1bHQgPSByYXljYXN0KG5vZGUuaWQsIG5vZGUucG9zLCBfbmV4dC5wb3MsIHRoaXMubV9xdWVyeS5maWx0ZXIsIDAsIDApOw0KICAgICAgICAgICAgICAgIHBhdGguYWRkQWxsKGlyZXN1bHQucGF0aCk7IC8vIHJheWNhc3QgZW5kcyBvbiBsZXQgYm91bmRhcnkgYW5kIHRoZSBwYXRoIG1pZ2h0IGluY2x1ZGUgdGhlIG5leHQgbGV0IGJvdW5kYXJ5Lg0KDQogICAgICAgICAgICAgICAgaWYgKHBhdGhbcGF0aC5sZW5ndGggLSAxXSA9PSBfbmV4dC5pZCkgcGF0aC5yZW1vdmUocGF0aC5sZW5ndGggLSAxKTsgLy8gcmVtb3ZlIHRvIGFkdXBsaWNhdGVzDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUuaWQpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgbm9kZSA9IF9uZXh0Ow0KICAgICAgICAgICAgfSB3aGlsZSAobm9kZSAhPSBudWxsKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgc3RhdHVzID0gdGhpcy5tX3F1ZXJ5LnN0YXR1czsgLy8gUmVzZXQgcXVlcnkuDQoNCiAgICAgICAgICB0aGlzLm1fcXVlcnkgPSBuZXcgUXVlcnlEYXRhKCk7DQogICAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChzdGF0dXMsIHBhdGgpOw0KICAgICAgICB9IC8vLyBGaW5hbGl6ZXMgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgb2YgYW4gaW5jb21wUG9seWUgc2xpY2VkIHBhdGggcXVlcnksIHJldHVybmluZyB0aGUgcGF0aCB0byB0aGUgZnVydGhlc3QNCiAgICAgICAgLy8vIHBvbHlnb24gb24gdGhlIGV4aXN0aW5nIHBhdGggdGhhdCB3YXMgdmlzaXRlZCBkdXJpbmcgdGhlIHNlYXJjaC4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlleGlzdGluZwkJQW4gYXJyYXkgb2YgcG9seWdvbiByZWZlcmVuY2VzIGZvciB0aGUgZXhpc3RpbmcgcGF0aC4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlleGlzdGluZ1NpemUJVGhlIG51bWJlciBvZiBwb2x5Z29uIGluIHRoZSBAcCBleGlzdGluZyBhcnJheS4NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlwYXRoCQkJQW4gb3JkZXJlZCBsaXN0IG9mIHBvbHlnb24gcmVmZXJlbmNlcyByZXByZXNlbnRpbmcgdGhlIHBhdGguIChTdGFydCB0byBlbmQuKSANCiAgICAgICAgLy8vICAJCQkJCQkJCVsocG9seVJlZikgKiBAcCBwYXRoQ291bnRdDQogICAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmluYWxpemVTbGljZWRGaW5kUGF0aFBhcnRpYWwiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZmluYWxpemVTbGljZWRGaW5kUGF0aFBhcnRpYWwoZXhpc3RpbmcpIHsNCiAgICAgICAgICB2YXIgcGF0aCA9IFtdOw0KDQogICAgICAgICAgaWYgKGV4aXN0aW5nLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KFN0YXR1cy5GQUlMVVJFLCBwYXRoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAodGhpcy5tX3F1ZXJ5LnN0YXR1cyA9PSBTdGF0dXMuRkFJTFVSRSkgew0KICAgICAgICAgICAgLy8gUmVzZXQgcXVlcnkuDQogICAgICAgICAgICB0aGlzLm1fcXVlcnkgPSBuZXcgUXVlcnlEYXRhKCk7DQogICAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KFN0YXR1cy5GQUlMVVJFLCBwYXRoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAodGhpcy5tX3F1ZXJ5LnN0YXJ0UmVmID09IHRoaXMubV9xdWVyeS5lbmRSZWYpIHsNCiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIHNlYXJjaCBzdGFydHMgYW5kIGVuZHMgYXQgc2FtZSBwb2x5Lg0KICAgICAgICAgICAgcGF0aC5wdXNoKHRoaXMubV9xdWVyeS5zdGFydFJlZik7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIEZpbmQgZnVydGhlc3QgZXhpc3Rpbmcgbm9kZSB0aGF0IHdhcyB2aXNpdGVkLg0KICAgICAgICAgICAgdmFyIHByZXYgPSBudWxsOw0KICAgICAgICAgICAgdmFyIG5vZGUgPSBudWxsOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gZXhpc3RpbmcubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHsNCiAgICAgICAgICAgICAgbm9kZSA9IHRoaXMubV9ub2RlUG9vbC5maW5kTm9kZShleGlzdGluZ1tpXSk7DQogICAgICAgICAgICAgIGlmIChub2RlICE9IG51bGwpIGJyZWFrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7DQogICAgICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuUEFSVElBTF9SRVNVTFQ7DQogICAgICAgICAgICAgIG5vZGUgPSB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlOw0KICAgICAgICAgICAgfSAvLyBSZXZlcnNlIHRoZSBwYXRoLg0KDQoNCiAgICAgICAgICAgIHZhciBwcmV2UmF5ID0gMDsNCg0KICAgICAgICAgICAgZG8gew0KICAgICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTsNCiAgICAgICAgICAgICAgbm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgocHJldik7DQogICAgICAgICAgICAgIHByZXYgPSBub2RlOw0KICAgICAgICAgICAgICB2YXIgbmV4dFJheSA9IHRoaXMuYW5kKG5vZGUuZmxhZ3MsIE5vZGUuRFRfTk9ERV9QQVJFTlRfREVUQUNIRUQpOyAvLyBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgcGFyZW50IGlzIG5vdCBhZGphY2VudCAoaS5lLiBkdWUgdG8gcmF5Y2FzdCBzaG9ydGN1dCkNCg0KICAgICAgICAgICAgICBub2RlLmZsYWdzID0gdGhpcy5vcih0aGlzLmFuZChub2RlLmZsYWdzICYgfk5vZGUuRFRfTk9ERV9QQVJFTlRfREVUQUNIRUQpLCBwcmV2UmF5KTsgLy8gYW5kIHN0b3JlIGl0IGluIHRoZSByZXZlcnNlZCBwYXRoJ3Mgbm9kZQ0KDQogICAgICAgICAgICAgIHByZXZSYXkgPSBuZXh0UmF5Ow0KICAgICAgICAgICAgICBub2RlID0gbmV4dDsNCiAgICAgICAgICAgIH0gd2hpbGUgKG5vZGUgIT0gbnVsbCk7IC8vIFN0b3JlIHBhdGgNCg0KDQogICAgICAgICAgICBub2RlID0gcHJldjsNCg0KICAgICAgICAgICAgZG8gew0KICAgICAgICAgICAgICB2YXIgX25leHQyID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVBdElkeChub2RlLnBpZHgpOw0KDQogICAgICAgICAgICAgIGlmICgobm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9QQVJFTlRfREVUQUNIRUQpICE9IDApIHsNCiAgICAgICAgICAgICAgICB2YXIgaXJlc3VsdCA9IHJheWNhc3Qobm9kZS5pZCwgbm9kZS5wb3MsIF9uZXh0Mi5wb3MsIHRoaXMubV9xdWVyeS5maWx0ZXIsIDAsIDApOw0KICAgICAgICAgICAgICAgIHBhdGguYWRkQWxsKGlyZXN1bHQucGF0aCk7IC8vIHJheWNhc3QgZW5kcyBvbiBsZXQgYm91bmRhcnkgYW5kIHRoZSBwYXRoIG1pZ2h0IGluY2x1ZGUgdGhlIG5leHQgbGV0IGJvdW5kYXJ5Lg0KDQogICAgICAgICAgICAgICAgaWYgKHBhdGhbcGF0aC5sZW5ndGggLSAxXSA9PSBfbmV4dDIuaWQpIHBhdGgucmVtb3ZlKHBhdGgubGVuZ3RoIC0gMSk7IC8vIHJlbW92ZSB0byBhZHVwbGljYXRlcw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHBhdGgucHVzaChub2RlLmlkKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIG5vZGUgPSBfbmV4dDI7DQogICAgICAgICAgICB9IHdoaWxlIChub2RlICE9IG51bGwpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBzdGF0dXMgPSB0aGlzLm1fcXVlcnkuc3RhdHVzOyAvLyBSZXNldCBxdWVyeS4NCg0KICAgICAgICAgIHRoaXMubV9xdWVyeSA9IG5ldyBRdWVyeURhdGEoKTsNCiAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KHN0YXR1cywgcGF0aCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiYXBwZW5kVmVydGV4IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZFZlcnRleChwb3MsIGZsYWdzLCByZWYsIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoKSB7DQogICAgICAgICAgaWYgKHN0cmFpZ2h0UGF0aC5sZW5ndGggPiAwICYmIERldG91ckNvbW1vbi52RXF1YWwoc3RyYWlnaHRQYXRoW3N0cmFpZ2h0UGF0aC5sZW5ndGggLSAxXS5wb3MsIHBvcykpIHsNCiAgICAgICAgICAgIC8vIFRoZSB2ZXJ0aWNlcyBhcmUgZXF1YWwsIHVwZGF0ZSBmbGFncyBhbmQgcG9seS4NCiAgICAgICAgICAgIHN0cmFpZ2h0UGF0aFtzdHJhaWdodFBhdGgubGVuZ3RoIC0gMV0uZmxhZ3MgPSBmbGFnczsNCiAgICAgICAgICAgIHN0cmFpZ2h0UGF0aFtzdHJhaWdodFBhdGgubGVuZ3RoIC0gMV0ucmVmID0gcmVmOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoc3RyYWlnaHRQYXRoLmxlbmd0aCA8IG1heFN0cmFpZ2h0UGF0aCkgew0KICAgICAgICAgICAgICAvLyBBcHBlbmQgbmV3IHZlcnRleC4NCiAgICAgICAgICAgICAgc3RyYWlnaHRQYXRoLnB1c2gobmV3IFN0cmFpZ2h0UGF0aEl0ZW0ocG9zLCBmbGFncywgcmVmKSk7DQogICAgICAgICAgICB9IC8vIElmIHJlYWNoZWQgZW5kIG9mIHBhdGggb3IgdGhlcmUgaXMgbm8gc3BhY2UgdG8gYXBwZW5kIG1vcmUgdmVydGljZXMsIHJldHVybi4NCg0KDQogICAgICAgICAgICBpZiAoZmxhZ3MgPT0gTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9FTkQgfHwgc3RyYWlnaHRQYXRoLmxlbmd0aCA+PSBtYXhTdHJhaWdodFBhdGgpIHsNCiAgICAgICAgICAgICAgcmV0dXJuIFN0YXR1cy5TVUNDU0VTUzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gU3RhdHVzLklOX1BST0dSRVNTOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFwcGVuZFBvcnRhbHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kUG9ydGFscyhzdGFydElkeCwgZW5kSWR4LCBlbmRQb3MsIHBhdGgsIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoLCBvcHRpb25zKSB7DQogICAgICAgICAgdmFyIHN0YXJ0UG9zID0gc3RyYWlnaHRQYXRoW3N0cmFpZ2h0UGF0aC5sZW5ndGggLSAxXS5wb3M7IC8vIEFwcGVuZCBvciB1cGRhdGUgbGFzdCB2ZXJ0ZXgNCg0KICAgICAgICAgIHZhciBzdGF0ID0gbnVsbDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydElkeDsgaSA8IGVuZElkeDsgaSsrKSB7DQogICAgICAgICAgICAvLyBDYWxjdWxhdGUgcG9ydGFsDQogICAgICAgICAgICB2YXIgZnJvbSA9IHBhdGhbaV07DQogICAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWYoZnJvbSk7DQogICAgICAgICAgICB2YXIgZnJvbVRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgIHZhciBmcm9tUG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KICAgICAgICAgICAgdmFyIHRvID0gcGF0aFtpICsgMV07DQogICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZih0byk7DQogICAgICAgICAgICB2YXIgdG9UaWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgICB2YXIgdG9Qb2x5ID0gdGlsZUFuZFBvbHlbMV07DQogICAgICAgICAgICB2YXIgcG9ydGFscyA9IHRoaXMuZ2V0UG9ydGFsUG9pbnRzNyhmcm9tLCBmcm9tUG9seSwgZnJvbVRpbGUsIHRvLCB0b1BvbHksIHRvVGlsZSwgMCwgMCk7DQogICAgICAgICAgICB2YXIgbGVmdCA9IHBvcnRhbHMubGVmdDsNCiAgICAgICAgICAgIHZhciByaWdodCA9IHBvcnRhbHMucmlnaHQ7DQoNCiAgICAgICAgICAgIGlmICgob3B0aW9ucyAmIE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfQVJFQV9DUk9TU0lOR1MpICE9IDApIHsNCiAgICAgICAgICAgICAgLy8gU2tpcCBpbnRlcnNlY3Rpb24gaWYgb25seSBhcmVhIGNyb3NzaW5ncyBhcmUgcmVxdWVzdGVkLg0KICAgICAgICAgICAgICBpZiAoZnJvbVBvbHkuZ2V0QXJlYSgpID09IHRvUG9seS5nZXRBcmVhKCkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBBcHBlbmQgaW50ZXJzZWN0aW9uDQoNCg0KICAgICAgICAgICAgdmFyIGludGVyZWN0ID0gRGV0b3VyQ29tbW9uLmludGVyc2VjdFNlZ1NlZzJEKHN0YXJ0UG9zLCBlbmRQb3MsIGxlZnQsIHJpZ2h0KTsNCg0KICAgICAgICAgICAgaWYgKGludGVyZWN0WzBdKSB7DQogICAgICAgICAgICAgIHQgPSBpbnRlcmVjdC50aGlyZDsNCiAgICAgICAgICAgICAgdmFyIHB0ID0gRGV0b3VyQ29tbW9uLnZMZXJwMyhsZWZ0LCByaWdodCwgdCk7DQogICAgICAgICAgICAgIHN0YXQgPSB0aGlzLmFwcGVuZFZlcnRleChwdCwgMCwgcGF0aFtpICsgMV0sIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoKTsNCiAgICAgICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0YXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIFN0YXR1cy5JTl9QUk9HUkVTUzsNCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8gRmluZHMgdGhlIHN0cmFpZ2h0IHBhdGggZnJvbSB0aGUgc3RhcnQgdG8gdGhlIGVuZCBwb3NpdGlvbiB3aXRoaW4gdGhlIHBvbHlnb24gY29ycmlkb3IuDQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIFRoaXMgbWV0aG9kIHBlZm9ybXMgd2hhdCBpcyBvZnRlbiBjYWxsZWQgJ3N0cmluZyBwdWxsaW5nJy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgc3RhcnQgcG9zaXRpb24gaXMgY2xhbXBlZCB0byB0aGUgZmlyc3QgcG9seWdvbiBpbiB0aGUgcGF0aCwgYW5kIHRoZSANCiAgICAgICAgLy8vIGVuZCBwb3NpdGlvbiBpcyBjbGFtcGVkIHRvIHRoZSBsYXN0LiBTbyB0aGUgc3RhcnQgYW5kIGVuZCBwb3NpdGlvbnMgc2hvdWxkIA0KICAgICAgICAvLy8gbm9ybWFsbHkgYmUgd2l0aGluIG9yIHZlcnkgbmVhciB0aGUgZmlyc3QgYW5kIGxhc3QgcG9seWdvbnMgcmVzcGVjdGl2ZWx5Lg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSByZXR1cm5lZCBwb2x5Z29uIHJlZmVyZW5jZXMgcmVwcmVzZW50IHRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHBvbHlnb24gDQogICAgICAgIC8vLyB0aGF0IGlzIGVudGVyZWQgYXQgdGhlIGFzc29jaWF0ZWQgcGF0aCBwb3NpdGlvbi4gVGhlIHJlZmVyZW5jZSBpZCBhc3NvY2lhdGVkIA0KICAgICAgICAvLy8gd2l0aCB0aGUgZW5kIHBvUG9seSB3aWxsIGFsd2F5cyBiZSB6ZXJvLiAgVGhpcyBhbGxvd3MsIGZvciBleGFtcGxlLCBtYXRjaGluZyANCiAgICAgICAgLy8vIG9mZi1tZXNoIGxpbmsgcG9pbnRzIHRvIHRoZWlyIHJlcHJlc2VudGF0aXZlIHBvbHlnb25zLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIElmIHRoZSBwcm92aWRlZCByZXN1bHQgYnVmZmVycyBhcmUgdG9vIHNtYWxsIGZvciB0aGUgZW50aXJlIHJlc3VsdCBzZXQsIA0KICAgICAgICAvLy8gdGhleSB3aWxsIGJlIGZpbGxlZCBhcyBmYXIgYXMgcG9zc2libGUgZnJvbSB0aGUgc3RhcnQgdG93YXJkIHRoZSBlbmQgDQogICAgICAgIC8vLyBwb3NpdGlvbi4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJc3RhcnRQb3MJCQlQYXRoIHN0YXJ0IHBvc2l0aW9uLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWVuZFBvcwkJCQlQYXRoIGVuZCBwb3NpdGlvbi4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlwYXRoCQkJCUFuIGFycmF5IG9mIHBvbHlnb24gcmVmZXJlbmNlcyB0aGF0IHJlcHJlc2VudCB0aGUgcGF0aCBjb3JyaWRvci4NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlzdHJhaWdodFBhdGgJCVBvaW50cyBkZXNjcmliaW5nIHRoZSBzdHJhaWdodCBwYXRoLiBbKHgsIHksIHopICogQHAgc3RyYWlnaHRQYXRoQ291bnRdLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCW1heFN0cmFpZ2h0UGF0aAkJVGhlIG1heGltdW0gbnVtYmVyIG9mIHBvaW50cyB0aGUgc3RyYWlnaHQgcGF0aCBhcnJheXMgY2FuIGhvbGQuICBbTGltaXQ6ID4gMF0NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlvcHRpb25zCQkJCVF1ZXJ5IG9wdGlvbnMuIChzZWU6ICNkdFN0cmFpZ2h0UGF0aE9wdGlvbnMpDQogICAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmluZFN0cmFpZ2h0UGF0aCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kU3RyYWlnaHRQYXRoKHN0YXJ0UG9zLCBlbmRQb3MsIHBhdGgsIG1heFN0cmFpZ2h0UGF0aCwgb3B0aW9ucykgew0KICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJFbXB0eSBwYXRoIik7DQogICAgICAgICAgfSAvLyBUT0RPOiBTaG91bGQgdGhpcyBiZSBjYWxsZXJzIHJlc3BvbnNpYmlsaXR5Pw0KDQoNCiAgICAgICAgICB2YXIgY2xvc2VzdFN0YXJ0UG9zID0gdGhpcy5jbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeShwYXRoWzBdLCBzdGFydFBvcyk7DQogICAgICAgICAgdmFyIGNsb3Nlc3RFbmRQb3MgPSB0aGlzLmNsb3Nlc3RQb2ludE9uUG9seUJvdW5kYXJ5KHBhdGhbcGF0aC5sZW5ndGggLSAxXSwgZW5kUG9zKTsNCiAgICAgICAgICB2YXIgc3RyYWlnaHRQYXRoID0gW107IC8vIEFkZCBzdGFydCBwb2ludC4NCg0KICAgICAgICAgIHZhciBzdGF0ID0gdGhpcy5hcHBlbmRWZXJ0ZXgoY2xvc2VzdFN0YXJ0UG9zLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX1NUQVJULCBwYXRoWzBdLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCk7DQogICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0cmFpZ2h0UGF0aDsNCg0KICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgICAgIHZhciBwb3J0YWxBcGV4ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihjbG9zZXN0U3RhcnRQb3MpOw0KICAgICAgICAgICAgdmFyIHBvcnRhbExlZnQgPSBEZXRvdXJDb21tb24udkNvcHlfcmV0dXJuKHBvcnRhbEFwZXgpOw0KICAgICAgICAgICAgdmFyIHBvcnRhbFJpZ2h0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3J0YWxBcGV4KTsNCiAgICAgICAgICAgIHZhciBhcGV4SW5kZXggPSAwOw0KICAgICAgICAgICAgdmFyIGxlZnRJbmRleCA9IDA7DQogICAgICAgICAgICB2YXIgcmlnaHRJbmRleCA9IDA7DQogICAgICAgICAgICB2YXIgbGVmdFBvbHlUeXBlID0gMDsNCiAgICAgICAgICAgIHZhciByaWdodFBvbHlUeXBlID0gMDsNCiAgICAgICAgICAgIHZhciBsZWZ0UG9seVJlZiA9IHBhdGhbMF07DQogICAgICAgICAgICB2YXIgcmlnaHRQb2x5UmVmID0gcGF0aFswXTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICAgIHZhciBsZWZ0ID0gdm9pZCAwOw0KICAgICAgICAgICAgICB2YXIgcmlnaHQgPSB2b2lkIDA7DQogICAgICAgICAgICAgIHZhciB0b1R5cGUgPSB2b2lkIDA7DQoNCiAgICAgICAgICAgICAgaWYgKGkgKyAxIDwgcGF0aC5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgICAvLyBOZXh0IHBvcnRhbC4NCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgdmFyIHBvcnRhbFBvaW50cyA9IHRoaXMuZ2V0UG9ydGFsUG9pbnRzMihwYXRoW2ldLCBwYXRoW2kgKyAxXSk7DQogICAgICAgICAgICAgICAgICBsZWZ0ID0gcG9ydGFsUG9pbnRzLmxlZnQ7DQogICAgICAgICAgICAgICAgICByaWdodCA9IHBvcnRhbFBvaW50cy5yaWdodDsNCiAgICAgICAgICAgICAgICAgIHRvVHlwZSA9IHBvcnRhbFBvaW50cy50b1R5cGU7DQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICAgY2xvc2VzdEVuZFBvcyA9IHRoaXMuY2xvc2VzdFBvaW50T25Qb2x5Qm91bmRhcnkocGF0aFtpXSwgZW5kUG9zKTsgLy8gQXBwZW5kIHBvcnRhbHMgYVBvbHkgdGhlIGN1cnJlbnQgc3RyYWlnaHQgcGF0aCBzZWdtZW50Lg0KDQogICAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmQob3B0aW9ucywgdGhpcy5vcihOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FSRUFfQ1JPU1NJTkdTLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FMTF9DUk9TU0lOR1MpKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHN0YXQgPSBhcHBlbmRQb3J0YWxzKGFwZXhJbmRleCwgaSwgY2xvc2VzdEVuZFBvcywgcGF0aCwgc3RyYWlnaHRQYXRoLCBvcHRpb25zLCBtYXhTdHJhaWdodFBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXQgPT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gc3RyYWlnaHRQYXRoOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFZlcnRleChjbG9zZXN0RW5kUG9zLCAwLCBwYXRoW2ldLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCk7DQogICAgICAgICAgICAgICAgICByZXR1cm4gc3RyYWlnaHRQYXRoOw0KICAgICAgICAgICAgICAgIH0gLy8gSWYgc3RhcnRpbmcgcmVhbGx5IGNsb3NlIHRoZSBwb3J0YWwsIGFkdmFuY2UuDQoNCg0KICAgICAgICAgICAgICAgIGlmIChpID09IDApIHsNCiAgICAgICAgICAgICAgICAgIHZhciBkdCA9IERldG91ckNvbW1vbi5kaXN0YW5jZVB0U2VnU3FyMkQzKHBvcnRhbEFwZXgsIGxlZnQsIHJpZ2h0KTsNCiAgICAgICAgICAgICAgICAgIGlmIChkdFswXSA8IERldG91ckNvbW1vbi5zcXIoMC4wMDEpKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gRW5kIG9mIHRoZSBwYXRoLg0KICAgICAgICAgICAgICAgIGxlZnQgPSBEZXRvdXJDb21tb24udkNvcHlfcmV0dXJuKGNsb3Nlc3RFbmRQb3MpOw0KICAgICAgICAgICAgICAgIHJpZ2h0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihjbG9zZXN0RW5kUG9zKTsNCiAgICAgICAgICAgICAgICB0b1R5cGUgPSBQb2x5LkRUX1BPTFlUWVBFX0dST1VORDsNCiAgICAgICAgICAgICAgfSAvLyBSaWdodCB2ZXJ0ZXguDQoNCg0KICAgICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDMocG9ydGFsQXBleCwgcG9ydGFsUmlnaHQsIHJpZ2h0KSA8PSAwLjApIHsNCiAgICAgICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnZFcXVhbChwb3J0YWxBcGV4LCBwb3J0YWxSaWdodCkgfHwgRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDMocG9ydGFsQXBleCwgcG9ydGFsTGVmdCwgcmlnaHQpID4gMC4wKSB7DQogICAgICAgICAgICAgICAgICBwb3J0YWxSaWdodCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocmlnaHQpOw0KICAgICAgICAgICAgICAgICAgcmlnaHRQb2x5UmVmID0gaSArIDEgPCBwYXRoLmxlbmd0aCA/IHBhdGhbaSArIDFdIDogMDsNCiAgICAgICAgICAgICAgICAgIHJpZ2h0UG9seVR5cGUgPSB0b1R5cGU7DQogICAgICAgICAgICAgICAgICByaWdodEluZGV4ID0gaTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIHBvcnRhbHMgYVBvbHkgdGhlIGN1cnJlbnQgc3RyYWlnaHQgcGF0aCBzZWdtZW50Lg0KICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5kKG9wdGlvbnMsIHRoaXMub3IoTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9BUkVBX0NST1NTSU5HUywgTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9BTExfQ1JPU1NJTkdTKSkgIT0gMCkgew0KICAgICAgICAgICAgICAgICAgICBzdGF0ID0gYXBwZW5kUG9ydGFscyhhcGV4SW5kZXgsIGxlZnRJbmRleCwgcG9ydGFsTGVmdCwgcGF0aCwgc3RyYWlnaHRQYXRoLCBvcHRpb25zLCBtYXhTdHJhaWdodFBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXQgPT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gc3RyYWlnaHRQYXRoOw0KICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICBwb3J0YWxBcGV4ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3J0YWxMZWZ0KTsNCiAgICAgICAgICAgICAgICAgIGFwZXhJbmRleCA9IGxlZnRJbmRleDsNCiAgICAgICAgICAgICAgICAgIHZhciBmbGFncyA9IDA7DQogICAgICAgICAgICAgICAgICBpZiAobGVmdFBvbHlSZWYgPT0gMCkgZmxhZ3MgPSBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0VORDtlbHNlIGlmIChsZWZ0UG9seVR5cGUgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIGZsYWdzID0gTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9PRkZNRVNIX0NPTk5FQ1RJT047DQogICAgICAgICAgICAgICAgICB2YXIgcmVmID0gbGVmdFBvbHlSZWY7IC8vIEFwcGVuZCBvciB1cGRhdGUgdmVydGV4DQoNCiAgICAgICAgICAgICAgICAgIHN0YXQgPSB0aGlzLmFwcGVuZFZlcnRleChwb3J0YWxBcGV4LCBmbGFncywgcmVmLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCk7DQogICAgICAgICAgICAgICAgICBpZiAoIXN0YXQgPT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gc3RyYWlnaHRQYXRoOw0KICAgICAgICAgICAgICAgICAgcG9ydGFsTGVmdCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7DQogICAgICAgICAgICAgICAgICBwb3J0YWxSaWdodCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7DQogICAgICAgICAgICAgICAgICBsZWZ0SW5kZXggPSBhcGV4SW5kZXg7DQogICAgICAgICAgICAgICAgICByaWdodEluZGV4ID0gYXBleEluZGV4OyAvLyBSZXN0YXJ0DQoNCiAgICAgICAgICAgICAgICAgIGkgPSBhcGV4SW5kZXg7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gLy8gTGVmdCB2ZXJ0ZXguDQoNCg0KICAgICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDMocG9ydGFsQXBleCwgcG9ydGFsTGVmdCwgbGVmdCkgPj0gMC4wKSB7DQogICAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi52RXF1YWwocG9ydGFsQXBleCwgcG9ydGFsTGVmdCkgfHwgRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDMocG9ydGFsQXBleCwgcG9ydGFsUmlnaHQsIGxlZnQpIDwgMC4wKSB7DQogICAgICAgICAgICAgICAgICBwb3J0YWxMZWZ0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihsZWZ0KTsNCiAgICAgICAgICAgICAgICAgIGxlZnRQb2x5UmVmID0gaSArIDEgPCBwYXRoLmxlbmd0aCA/IHBhdGhbaSArIDFdIDogMDsNCiAgICAgICAgICAgICAgICAgIGxlZnRQb2x5VHlwZSA9IHRvVHlwZTsNCiAgICAgICAgICAgICAgICAgIGxlZnRJbmRleCA9IGk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBwb3J0YWxzIGFQb2x5IHRoZSBjdXJyZW50IHN0cmFpZ2h0IHBhdGggc2VnbWVudC4NCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuZChvcHRpb25zICYgdGhpcy5vcihOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FSRUFfQ1JPU1NJTkdTLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FMTF9DUk9TU0lOR1MpKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHN0YXQgPSBhcHBlbmRQb3J0YWxzKGFwZXhJbmRleCwgcmlnaHRJbmRleCwgcG9ydGFsUmlnaHQsIHBhdGgsIHN0cmFpZ2h0UGF0aCwgb3B0aW9ucywgbWF4U3RyYWlnaHRQYXRoKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0cmFpZ2h0UGF0aDsNCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgcG9ydGFsQXBleCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsUmlnaHQpOw0KICAgICAgICAgICAgICAgICAgYXBleEluZGV4ID0gcmlnaHRJbmRleDsNCiAgICAgICAgICAgICAgICAgIHZhciBfZmxhZ3MgPSAwOw0KICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0UG9seVJlZiA9PSAwKSBfZmxhZ3MgPSBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0VORDtlbHNlIGlmIChyaWdodFBvbHlUeXBlID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSBfZmxhZ3MgPSBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX09GRk1FU0hfQ09OTkVDVElPTjsNCiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IHJpZ2h0UG9seVJlZjsgLy8gQXBwZW5kIG9yIHVwZGF0ZSB2ZXJ0ZXgNCg0KICAgICAgICAgICAgICAgICAgc3RhdCA9IHRoaXMuYXBwZW5kVmVydGV4KHBvcnRhbEFwZXgsIF9mbGFncywgX3JlZjIsIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoKTsNCiAgICAgICAgICAgICAgICAgIGlmICghc3RhdCA9PSBTdGF0dXMuSU5fUFJPR1JFU1MpIHJldHVybiBzdHJhaWdodFBhdGg7DQogICAgICAgICAgICAgICAgICBwb3J0YWxMZWZ0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3J0YWxBcGV4KTsNCiAgICAgICAgICAgICAgICAgIHBvcnRhbFJpZ2h0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3J0YWxBcGV4KTsNCiAgICAgICAgICAgICAgICAgIGxlZnRJbmRleCA9IGFwZXhJbmRleDsNCiAgICAgICAgICAgICAgICAgIHJpZ2h0SW5kZXggPSBhcGV4SW5kZXg7IC8vIFJlc3RhcnQNCg0KICAgICAgICAgICAgICAgICAgaSA9IGFwZXhJbmRleDsNCiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSAvLyBBcHBlbmQgcG9ydGFscyBhUG9seSB0aGUgY3VycmVudCBzdHJhaWdodCBwYXRoIHNlZ21lbnQuDQoNCg0KICAgICAgICAgICAgaWYgKHRoaXMuYW5kKG9wdGlvbnMgJiB0aGlzLm9yKE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfQVJFQV9DUk9TU0lOR1MsIE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfQUxMX0NST1NTSU5HUykpICE9IDApIHsNCiAgICAgICAgICAgICAgc3RhdCA9IGFwcGVuZFBvcnRhbHMoYXBleEluZGV4LCBwYXRoLmxlbmd0aCAtIDEsIGNsb3Nlc3RFbmRQb3MsIHBhdGgsIHN0cmFpZ2h0UGF0aCwgb3B0aW9ucywgbWF4U3RyYWlnaHRQYXRoKTsNCiAgICAgICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0cmFpZ2h0UGF0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICB0aGlzLmFwcGVuZFZlcnRleChjbG9zZXN0RW5kUG9zLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0VORCwgMCwgc3RyYWlnaHRQYXRoLCBtYXhTdHJhaWdodFBhdGgpOw0KICAgICAgICAgIHJldHVybiBzdHJhaWdodFBhdGg7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyBvcHRpbWl6ZWQgZm9yIHNtYWxsIGRlbHRhIG1vdmVtZW50IGFuZCBhIHNtYWxsIG51bWJlciBvZiANCiAgICAgICAgLy8vIHBvbHlnb25zLiBJZiB1c2VkIGZvciB0b28gZ3JlYXQgYSBkaXN0YW5jZSwgdGhlIHJlc3VsdCBzZXQgd2lsbCBmb3JtIGFuIA0KICAgICAgICAvLy8gaW5jb21wUG9seWUgcGF0aC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAcCByZXN1bHRQb3Mgd2lsbCBlcXVhbCB0aGUgQHAgZW5kUG9zIGlmIHRoZSBlbmQgaXMgcmVhY2hlZC4gDQogICAgICAgIC8vLyBPdGhlcndpc2UgdGhlIGNsb3Nlc3QgcmVhY2hhYmxlIHBvc2l0aW9uIHdpbGwgYmUgcmV0dXJuZWQuDQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIEBwIHJlc3VsdFBvcyBpcyBub3QgcHJvamVjdGVkIG9udG8gdGhlIHN1cmZhY2Ugb2YgdGhlIG5hdmlnYXRpb24gDQogICAgICAgIC8vLyBtZXNoLiBVc2UgI2dldFBvbHlIZWlnaHQgaWYgdGhpcyBpcyBuZWVkZWQuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhpcyBtZXRob2QgdHJlYXRzIHRoZSBlbmQgcG9zaXRpb24gaW4gdGhlIHNhbWUgbWFubmVyIGFzIA0KICAgICAgICAvLy8gdGhlICNyYXljYXN0IG1ldGhvZC4gKEFzIGEgMkQgcG9pbnQuKSBTZWUgdGhhdCBtZXRob2QncyBkb2N1bWVudGF0aW9uIA0KICAgICAgICAvLy8gZm9yIGRldGFpbHMuDQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIElmIHRoZSBAcCB2aXNpdGVkIGFycmF5IGlzIHRvbyBzbWFsbCB0byBob2xkIHRoZSBlbnRpcmUgcmVzdWx0IHNldCwgaXQgd2lsbCANCiAgICAgICAgLy8vIGJlIGZpbGxlZCBhcyBmYXIgYXMgcG9zc2libGUgZnJvbSB0aGUgc3RhcnQgcG9zaXRpb24gdG93YXJkIHRoZSBlbmQgDQogICAgICAgIC8vLyBwb3NpdGlvbi4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBNb3ZlcyBmcm9tIHRoZSBzdGFydCB0byB0aGUgZW5kIHBvc2l0aW9uIGNvbnN0cmFpbmVkIHRvIHRoZSBuYXZpZ2F0aW9uIG1lc2guDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJc3RhcnRSZWYJCVRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHN0YXJ0IHBvbHlnb24uDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJc3RhcnRQb3MJCUEgcG9zaXRpb24gb2YgdGhlIG1vdmVyIHdpdGhpbiB0aGUgc3RhcnQgcG9seWdvbi4gWyh4LCB5LCB4KV0NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQllbmRQb3MJCQlUaGUgZGVzaXJlZCBlbmQgcG9zaXRpb24gb2YgdGhlIG1vdmVyLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWZpbHRlcgkJCVRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuDQogICAgICAgIC8vLyBAcmV0dXJucyBQYXRoDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibW92ZUFsb25nU3VyZmFjZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlQWxvbmdTdXJmYWNlKHN0YXJ0UmVmLCBzdGFydFBvcywgZW5kUG9zLCBmaWx0ZXIpIHsNCiAgICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dA0KICAgICAgICAgIGlmIChzdGFydFJlZiA9PSAwKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJTdGFydCByZWYgPSAwIik7DQogICAgICAgICAgaWYgKCF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCByZWYiKTsNCiAgICAgICAgICB0aGlzLm1fdGlueU5vZGVQb29sID0gbmV3IE5vZGVQb29sKCk7DQogICAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHRoaXMubV90aW55Tm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7DQogICAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5jb3N0ID0gMDsNCiAgICAgICAgICBzdGFydE5vZGUudG90YWwgPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7DQogICAgICAgICAgdmFyIHN0YWNrID0gW107DQogICAgICAgICAgc3RhY2sucHVzaChzdGFydE5vZGUpOw0KICAgICAgICAgIHZhciBiZXN0UG9zID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIHZhciBiZXN0RGlzdCA9IE51bWJlci5NQVhfVkFMVUU7DQogICAgICAgICAgdmFyIGJlc3ROb2RlID0gbnVsbDsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYmVzdFBvcywgc3RhcnRQb3MpOyAvLyBTZWFyY2ggY29uc3RyYWludHMNCg0KICAgICAgICAgIHZhciBzZWFyY2hQb3MgPSBEZXRvdXJDb21tb24udkxlcnAzKHN0YXJ0UG9zLCBlbmRQb3MsIDAuNSk7DQogICAgICAgICAgdmFyIHNlYXJjaFJhZFNxciA9IERldG91ckNvbW1vbi5zcXIoRGV0b3VyQ29tbW9uLnZEaXN0MihzdGFydFBvcywgZW5kUG9zKSAvIDIuMCArIDAuMDAxKTsNCiAgICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSAqIDMpLmZpbGwoMCk7DQoNCiAgICAgICAgICB3aGlsZSAoIXN0YWNrLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAvLyBQb3AgZnJvbnQuDQogICAgICAgICAgICB2YXIgY3VyTm9kZSA9IHN0YWNrLnBvcCgpOyAvLyBHZXQgbGV0IGFuZCB0aWxlLg0KICAgICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLg0KDQogICAgICAgICAgICB2YXIgY3VyUmVmID0gY3VyTm9kZS5pZDsNCiAgICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShjdXJSZWYpOw0KICAgICAgICAgICAgdmFyIGN1clRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgIHZhciBjdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIENvbGxlY3QgdmVydGljZXMuDQoNCiAgICAgICAgICAgIHZhciBudmVydHMgPSBjdXJQb2x5LnZlcnRDb3VudDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudmVydHM7ICsraSkgew0KICAgICAgICAgICAgICBhcnJheWNvcHkkNChjdXJUaWxlLmRhdGEudmVydHMsIGN1clBvbHkudmVydHNbaV0gKiAzLCB2ZXJ0cywgaSAqIDMsIDMpOw0KICAgICAgICAgICAgfSAvLyBJZiB0YXJnZXQgaXMgaW5zaWRlIHRoZSBwb2x5LCBzdG9wIHNlYXJjaC4NCg0KDQogICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnBvaW50SW5Qb2x5Z29uKGVuZFBvcywgdmVydHMsIG52ZXJ0cykpIHsNCiAgICAgICAgICAgICAgYmVzdE5vZGUgPSBjdXJOb2RlOw0KICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYmVzdFBvcywgZW5kUG9zKTsNCiAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9IC8vIEZpbmQgd2FsbCBlZGdlcyBhbmQgZmluZCBuZWFyZXN0IHBvUG9seSBpbnNpZGUgdGhlIHdhbGxzLg0KDQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pNCA9IDAsIGogPSBjdXJQb2x5LnZlcnRDb3VudCAtIDE7IF9pNCA8IGN1clBvbHkudmVydENvdW50OyBqID0gX2k0KyspIHsNCiAgICAgICAgICAgICAgLy8gRmluZCBsaW5rcyB0byBuZWlnaGJvdXJzLg0KICAgICAgICAgICAgICB2YXIgTUFYX05FSVMgPSA4Ow0KICAgICAgICAgICAgICB2YXIgbm5laXMgPSAwOw0KICAgICAgICAgICAgICB2YXIgbmVpcyA9IG5ldyBBcnJheShNQVhfTkVJUyk7DQoNCiAgICAgICAgICAgICAgaWYgKChjdXJQb2x5Lm5laXNbal0gJiBOYXZNZXNoLkRUX0VYVF9MSU5LKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgLy8gVGlsZSBib3JkZXIuDQogICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IGN1clBvbHkuZmlyc3RMaW5rOyBrICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBrID0gY3VyVGlsZS5saW5rc1trXS5uZXh0KSB7DQogICAgICAgICAgICAgICAgICB2YXIgbGluayA9IGN1clRpbGUubGlua3Nba107DQoNCiAgICAgICAgICAgICAgICAgIGlmIChsaW5rLmVkZ2UgPT0gaikgew0KICAgICAgICAgICAgICAgICAgICBpZiAobGluay5yZWYgIT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGxpbmsucmVmKTsNCiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmVpVGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBuZWlQb2x5ID0gdGlsZUFuZFBvbHlbMV07DQoNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBhc3NGaWx0ZXIobGluay5yZWYsIG5laVRpbGUsIG5laVBvbHkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobm5laXMgPCBNQVhfTkVJUykgbmVpc1tubmVpcysrXSA9IGxpbmsucmVmOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJQb2x5Lm5laXNbal0gIT0gMCkgew0KICAgICAgICAgICAgICAgIHZhciBpZHggPSBjdXJQb2x5Lm5laXNbal0gLSAxOw0KICAgICAgICAgICAgICAgIHZhciByZWYgPSBvcih0aGlzLm1fbmF2LmdldFBvbHlSZWZCYXNlKGN1clRpbGUpLCBpZHgpOw0KDQogICAgICAgICAgICAgICAgaWYgKGZpbHRlci5wYXNzRmlsdGVyKHJlZiwgY3VyVGlsZSwgY3VyVGlsZS5kYXRhLnBvbHlzW2lkeF0pKSB7DQogICAgICAgICAgICAgICAgICAvLyBJbnRlcm5hbCBlZGdlLCBlbmNvZGUgaWQuDQogICAgICAgICAgICAgICAgICBuZWlzW25uZWlzKytdID0gcmVmOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChubmVpcyA9PSAwKSB7DQogICAgICAgICAgICAgICAgLy8gV2FsbCBlZGdlLCBjYWxjIGRpc3RhbmNlLg0KICAgICAgICAgICAgICAgIHZhciB2aiA9IGogKiAzOw0KICAgICAgICAgICAgICAgIHZhciB2aSA9IF9pNCAqIDM7DQogICAgICAgICAgICAgICAgdmFyIGRpc3RTZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJENChlbmRQb3MsIHZlcnRzLCB2aiwgdmkpOw0KICAgICAgICAgICAgICAgIHZhciBfZGlzdFNxciA9IGRpc3RTZWdbMF07DQogICAgICAgICAgICAgICAgdmFyIF90c2VnID0gZGlzdFNlZ1sxXTsNCg0KICAgICAgICAgICAgICAgIGlmIChfZGlzdFNxciA8IGJlc3REaXN0KSB7DQogICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbmVhcmVzdCBkaXN0YW5jZS4NCiAgICAgICAgICAgICAgICAgIGJlc3RQb3MgPSBEZXRvdXJDb21tb24udkxlcnA0KHZlcnRzLCB2aiwgdmksIF90c2VnKTsNCiAgICAgICAgICAgICAgICAgIGJlc3REaXN0ID0gX2Rpc3RTcXI7DQogICAgICAgICAgICAgICAgICBiZXN0Tm9kZSA9IGN1ck5vZGU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZvciAodmFyIF9rID0gMDsgX2sgPCBubmVpczsgKytfaykgew0KICAgICAgICAgICAgICAgICAgLy8gU2tpcCBpZiBubyBub2RlIGNhbiBiZSBhbGxvY2F0ZWQuDQogICAgICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyTm9kZSA9IHRoaXMubV90aW55Tm9kZVBvb2wuZ2V0Tm9kZShuZWlzW19rXSk7DQogICAgICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZSA9PSBudWxsKSBjb250aW51ZTsgLy8gU2tpcCBpZiBhbHJlYWR5IHZpc2l0ZWQuDQoNCiAgICAgICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDApIGNvbnRpbnVlOyAvLyBTa2lwIHRoZSBsaW5rIGlmIGl0IGlzIHRvbyBmYXIgZnJvbSBzZWFyY2ggY29uc3RyYWludC4NCiAgICAgICAgICAgICAgICAgIC8vIFRPRE86IE1heWJlIHNob3VsZCB1c2UgZ2V0UG9ydGFsUG9pbnRzKCksIGJ1dCB0aGlzIG9uZSBpcyB3YXkgZmFzdGVyLg0KDQogICAgICAgICAgICAgICAgICB2YXIgX3ZqID0gaiAqIDM7DQoNCiAgICAgICAgICAgICAgICAgIHZhciBfdmkgPSBfaTQgKiAzOw0KDQogICAgICAgICAgICAgICAgICB2YXIgZGlzdHNlZyA9IERldG91ckNvbW1vbi5kaXN0YW5jZVB0U2VnU3FyMkQ0KHNlYXJjaFBvcywgdmVydHMsIF92aiwgX3ZpKTsNCiAgICAgICAgICAgICAgICAgIHZhciBfZGlzdFNxcjIgPSBkaXN0c2VnWzBdOw0KICAgICAgICAgICAgICAgICAgaWYgKF9kaXN0U3FyMiA+IHNlYXJjaFJhZFNxcikgY29udGludWU7IC8vIE1hcmsgYXMgdGhlIG5vZGUgYXMgdmlzaXRlZCBhbmQgcHVzaCB0byBxdWV1ZS4NCg0KICAgICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlSWR4KGN1ck5vZGUpOw0KICAgICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEOw0KICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChuZWlnaGJvdXJOb2RlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgdmlzaXRlZCA9IFtdOw0KDQogICAgICAgICAgaWYgKGJlc3ROb2RlICE9IG51bGwpIHsNCiAgICAgICAgICAgIC8vIFJldmVyc2UgdGhlIHBhdGguDQogICAgICAgICAgICB2YXIgcHJldiA9IG51bGw7DQogICAgICAgICAgICB2YXIgbm9kZSA9IGJlc3ROb2RlOw0KDQogICAgICAgICAgICBkbyB7DQogICAgICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTsNCiAgICAgICAgICAgICAgbm9kZS5waWR4ID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlSWR4KHByZXYpOw0KICAgICAgICAgICAgICBwcmV2ID0gbm9kZTsNCiAgICAgICAgICAgICAgbm9kZSA9IG5leHQ7DQogICAgICAgICAgICB9IHdoaWxlIChub2RlICE9IG51bGwpOyAvLyBTdG9yZSByZXN1bHQNCg0KDQogICAgICAgICAgICBub2RlID0gcHJldjsNCg0KICAgICAgICAgICAgZG8gew0KICAgICAgICAgICAgICB2aXNpdGVkLnB1c2gobm9kZS5pZCk7DQogICAgICAgICAgICAgIG5vZGUgPSB0aGlzLm1fdGlueU5vZGVQb29sLmdldE5vZGVBdElkeChub2RlLnBpZHgpOw0KICAgICAgICAgICAgfSB3aGlsZSAobm9kZSAhPSBudWxsKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbmV3IE1vdmVBbG9uZ1N1cmZhY2VSZXN1bHQoYmVzdFBvcywgdmlzaXRlZCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UG9ydGFsUG9pbnRzMiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3J0YWxQb2ludHMyKGZyb20sIHRvKSB7DQogICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKGZyb20pOw0KICAgICAgICAgIHZhciBmcm9tVGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgIHZhciBmcm9tUG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KICAgICAgICAgIHZhciBmcm9tVHlwZSA9IGZyb21Qb2x5LmdldFR5cGUoKTsNCiAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZih0byk7DQogICAgICAgICAgdmFyIHRvVGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgIHZhciB0b1BvbHkgPSB0aWxlQW5kUG9seVsxXTsNCiAgICAgICAgICB2YXIgdG9UeXBlID0gdG9Qb2x5LmdldFR5cGUoKTsNCiAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGZyb20sIGZyb21Qb2x5LCBmcm9tVGlsZSwgdG8sIHRvUG9seSwgdG9UaWxlLCBmcm9tVHlwZSwgdG9UeXBlKTsNCiAgICAgICAgfSAvLyBSZXR1cm5zIHBvcnRhbCBwb2ludHMgYmV0d2VlbiB0d28gcG9seWdvbnMuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UG9ydGFsUG9pbnRzNyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3J0YWxQb2ludHM3KGZyb20sIGZyb21Qb2x5LCBmcm9tVGlsZSwgdG8sIHRvUG9seSwgdG9UaWxlLCBmcm9tVHlwZSwgdG9UeXBlKSB7DQogICAgICAgICAgdmFyIGxlZnQgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgdmFyIHJpZ2h0ID0gbmV3IEFycmF5KDMpOyAvLyBGaW5kIHRoZSBsaW5rIHRoYXQgcG9pbnRzIHRvIHRoZSAndG8nIHBvbHlnb24uDQoNCiAgICAgICAgICB2YXIgbGluayA9IG51bGw7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gZnJvbVBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gZnJvbVRpbGUubGlua3NbaV0ubmV4dCkgew0KICAgICAgICAgICAgaWYgKGZyb21UaWxlLmxpbmtzW2ldLnJlZiA9PSB0bykgew0KICAgICAgICAgICAgICBsaW5rID0gZnJvbVRpbGUubGlua3NbaV07DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChsaW5rID09IG51bGwpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIk51bGwgbGluayIpOyAvLyBIYW5kbGUgb2ZmLW1lc2ggY29ubmVjdGlvbnMuDQoNCiAgICAgICAgICBpZiAoZnJvbVBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB7DQogICAgICAgICAgICAvLyBGaW5kIGxpbmsgdGhhdCBwb2ludHMgdG8gZmlyc3QgdmVydGV4Lg0KICAgICAgICAgICAgZm9yICh2YXIgX2k1ID0gZnJvbVBvbHkuZmlyc3RMaW5rOyBfaTUgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IF9pNSA9IGZyb21UaWxlLmxpbmtzW19pNV0ubmV4dCkgew0KICAgICAgICAgICAgICBpZiAoZnJvbVRpbGUubGlua3NbX2k1XS5yZWYgPT0gdG8pIHsNCiAgICAgICAgICAgICAgICB2YXIgdiA9IGZyb21UaWxlLmxpbmtzW19pNV0uZWRnZTsNCiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNChmcm9tVGlsZS5kYXRhLnZlcnRzLCBmcm9tUG9seS52ZXJ0c1t2XSAqIDMsIGxlZnQsIDAsIDMpOw0KICAgICAgICAgICAgICAgIGFycmF5Y29weSQ0KGZyb21UaWxlLmRhdGEudmVydHMsIGZyb21Qb2x5LnZlcnRzW3ZdICogMywgcmlnaHQsIDAsIDMpOw0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUG9ydGFsUmVzdWx0KGxlZnQsIHJpZ2h0LCBmcm9tVHlwZSwgdG9UeXBlKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIG9mZm1lc2ggZnJvbSBjb25uZWN0aW9uIik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKHRvUG9seS5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIHsNCiAgICAgICAgICAgIGZvciAodmFyIF9pNiA9IHRvUG9seS5maXJzdExpbms7IF9pNiAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgX2k2ID0gdG9UaWxlLmxpbmtzW19pNl0ubmV4dCkgew0KICAgICAgICAgICAgICBpZiAodG9UaWxlLmxpbmtzW19pNl0ucmVmID09IGZyb20pIHsNCiAgICAgICAgICAgICAgICB2YXIgX3YzID0gdG9UaWxlLmxpbmtzW19pNl0uZWRnZTsNCiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNCh0b1RpbGUuZGF0YS52ZXJ0cywgdG9Qb2x5LnZlcnRzW192M10gKiAzLCBsZWZ0LCAwLCAzKTsNCiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNCh0b1RpbGUuZGF0YS52ZXJ0cywgdG9Qb2x5LnZlcnRzW192M10gKiAzLCByaWdodCwgMCwgMyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQb3J0YWxSZXN1bHQobGVmdCwgcmlnaHQsIGZyb21UeXBlLCB0b1R5cGUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgb2ZmbWVzaCB0byBjb25uZWN0aW9uIik7DQogICAgICAgICAgfSAvLyBGaW5kIHBvcnRhbCB2ZXJ0aWNlcy4NCg0KDQogICAgICAgICAgdmFyIHYwID0gZnJvbVBvbHkudmVydHNbbGluay5lZGdlXTsNCiAgICAgICAgICB2YXIgdjEgPSBmcm9tUG9seS52ZXJ0c1sobGluay5lZGdlICsgMSkgJSBmcm9tUG9seS52ZXJ0Q291bnRdOw0KICAgICAgICAgIGFycmF5Y29weSQ0KGZyb21UaWxlLmRhdGEudmVydHMsIHYwICogMywgbGVmdCwgMCwgMyk7DQogICAgICAgICAgYXJyYXljb3B5JDQoZnJvbVRpbGUuZGF0YS52ZXJ0cywgdjEgKiAzLCByaWdodCwgMCwgMyk7IC8vIElmIHRoZSBsaW5rIGlzIGF0IHRpbGUgYm91bmRhcnksIGR0Q2xhbXAgdGhlIHZlcnRpY2VzIHRvDQogICAgICAgICAgLy8gdGhlIGxpbmsgd2lkdGguDQoNCiAgICAgICAgICBpZiAobGluay5zaWRlICE9IDB4ZmYpIHsNCiAgICAgICAgICAgIC8vIFVucGFjayBwb3J0YWwgbGltaXRzLg0KICAgICAgICAgICAgaWYgKGxpbmsuYm1pbiAhPSAwIHx8IGxpbmsuYm1heCAhPSAyNTUpIHsNCiAgICAgICAgICAgICAgcyA9IDEuMCAvIDI1NS4wOw0KICAgICAgICAgICAgICB0bWluID0gbGluay5ibWluICogczsNCiAgICAgICAgICAgICAgdG1heCA9IGxpbmsuYm1heCAqIHM7DQogICAgICAgICAgICAgIGxlZnQgPSBEZXRvdXJDb21tb24udkxlcnAzKGZyb21UaWxlLmRhdGEudmVydHMsIHYwICogMywgdjEgKiAzLCB0bWluKTsNCiAgICAgICAgICAgICAgcmlnaHQgPSBEZXRvdXJDb21tb24udkxlcnAzKGZyb21UaWxlLmRhdGEudmVydHMsIHYwICogMywgdjEgKiAzLCB0bWF4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbmV3IFBvcnRhbFJlc3VsdChsZWZ0LCByaWdodCwgZnJvbVR5cGUsIHRvVHlwZSk7DQogICAgICAgIH0gLy8gUmV0dXJucyBlZGdlIG1pZCBwb1BvbHkgYmV0d2VlbiB0d28gcG9seWdvbnMuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0RWRnZU1pZFBvaW50MiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFZGdlTWlkUG9pbnQyKGZyb20sIHRvKSB7DQogICAgICAgICAgdmFyIHBwb2ludHMgPSB0aGlzLmdldFBvcnRhbFBvaW50czIoZnJvbSwgdG8pOw0KICAgICAgICAgIHZhciBsZWZ0ID0gcHBvaW50cy5sZWZ0Ow0KICAgICAgICAgIHZhciByaWdodCA9IHBwb2ludHMucmlnaHQ7DQogICAgICAgICAgdmFyIG1pZCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBtaWRbMF0gPSAobGVmdFswXSArIHJpZ2h0WzBdKSAqIDAuNTsNCiAgICAgICAgICBtaWRbMV0gPSAobGVmdFsxXSArIHJpZ2h0WzFdKSAqIDAuNTsNCiAgICAgICAgICBtaWRbMl0gPSAobGVmdFsyXSArIHJpZ2h0WzJdKSAqIDAuNTsNCiAgICAgICAgICByZXR1cm4gbWlkOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEVkZ2VNaWRQb2ludDYiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RWRnZU1pZFBvaW50Nihmcm9tLCBmcm9tUG9seSwgZnJvbVRpbGUsIHRvLCB0b1BvbHksIHRvVGlsZSkgew0KICAgICAgICAgIHZhciBwcG9pbnRzID0gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGZyb20sIGZyb21Qb2x5LCBmcm9tVGlsZSwgdG8sIHRvUG9seSwgdG9UaWxlLCAwLCAwKTsNCiAgICAgICAgICB2YXIgbGVmdCA9IHBwb2ludHMubGVmdDsNCiAgICAgICAgICB2YXIgcmlnaHQgPSBwcG9pbnRzLnJpZ2h0Ow0KICAgICAgICAgIHZhciBtaWQgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgbWlkWzBdID0gKGxlZnRbMF0gKyByaWdodFswXSkgKiAwLjU7DQogICAgICAgICAgbWlkWzFdID0gKGxlZnRbMV0gKyByaWdodFsxXSkgKiAwLjU7DQogICAgICAgICAgbWlkWzJdID0gKGxlZnRbMl0gKyByaWdodFsyXSkgKiAwLjU7DQogICAgICAgICAgcmV0dXJuIG1pZDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyYXljYXN0IiwNCiAgICAgICAgLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyBtZWFudCB0byBiZSB1c2VkIGZvciBxdWljaywgc2hvcnQgZGlzdGFuY2UgY2hlY2tzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIElmIHRoZSBwYXRoIGFycmF5IGlzIHRvbyBzbWFsbCB0byBob2xkIHRoZSByZXN1bHQsIGl0IHdpbGwgYmUgZmlsbGVkIGFzIA0KICAgICAgICAvLy8gZmFyIGFzIHBvc3NpYmxlIGZyb20gdGhlIHN0YXJ0IHBvc3Rpb24gdG93YXJkIHRoZSBlbmQgcG9zaXRpb24uDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gPGI+VXNpbmcgdGhlIEhpdCBQYXJhbWV0ZXIgdCBvZiBSYXljYXN0SGl0PC9iPg0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBJZiB0aGUgaGl0IHBhcmFtZXRlciBpcyBhIHZlcnkgaGlnaCB2YWx1ZSAoRkxUX01BWCksIHRoZW4gdGhlIHJheSBoYXMgaGl0IA0KICAgICAgICAvLy8gdGhlIGVuZCBwb3NpdGlvbi4gSW4gdGhpcyBjYXNlIHRoZSBwYXRoIHJlcHJlc2VudHMgYSB2YWxpZCBjb3JyaWRvciB0byB0aGUgDQogICAgICAgIC8vLyBlbmQgcG9zaXRpb24gYW5kIHRoZSB2YWx1ZSBvZiBAcCBoaXROb3JtYWwgaXMgdW5kZWZpbmVkLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIElmIHRoZSBoaXQgcGFyYW1ldGVyIGlzIHplcm8sIHRoZW4gdGhlIHN0YXJ0IHBvc2l0aW9uIGlzIG9uIHRoZSB3YWxsIHRoYXQgDQogICAgICAgIC8vLyB3YXMgaGl0IGFuZCB0aGUgdmFsdWUgb2YgQHAgaGl0Tm9ybWFsIGlzIHVuZGVmaW5lZC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBJZiAwIDwgdCA8IDEuMCB0aGVuIHRoZSBmb2xsb3dpbmcgYXBwbGllczoNCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBAY29kZQ0KICAgICAgICAvLy8gZGlzdGFuY2VUb0hpdEJvcmRlciA9IGRpc3RhbmNlVG9FbmRQb3NpdGlvbiAqIHQNCiAgICAgICAgLy8vIGhpdFBvUG9seSA9IHN0YXJ0UG9zICsgKGVuZFBvcyAtIHN0YXJ0UG9zKSAqIHQNCiAgICAgICAgLy8vIEBlbmRjb2RlDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gPGI+VXNlIENhc2UgUmVzdHJpY3Rpb248L2I+DQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHJheWNhc3QgaWdub3JlcyB0aGUgeS12YWx1ZSBvZiB0aGUgZW5kIHBvc2l0aW9uLiAoMkQgY2hlY2suKSBUaGlzIA0KICAgICAgICAvLy8gcGxhY2VzIHNpZ25pZmljYW50IGxpbWl0cyBvbiBob3cgaXQgY2FuIGJlIHVzZWQuIEZvciBleGFtcGxlOg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIENvbnNpZGVyIGEgc2NlbmUgd2hlcmUgdGhlcmUgaXMgYSBtYWluIGZsb29yIHdpdGggYSBzZWNvbmQgZmxvb3IgYmFsY29ueSANCiAgICAgICAgLy8vIHRoYXQgaGFuZ3Mgb3ZlciB0aGUgbWFpbiBmbG9vci4gU28gdGhlIGZpcnN0IGZsb29yIG1lc2ggZXh0ZW5kcyBiZWxvdyB0aGUgDQogICAgICAgIC8vLyBiYWxjb255IG1lc2guIFRoZSBzdGFydCBwb3NpdGlvbiBpcyBzb21ld2hlcmUgb24gdGhlIGZpcnN0IGZsb29yLiBUaGUgZW5kIA0KICAgICAgICAvLy8gcG9zaXRpb24gaXMgb24gdGhlIGJhbGNvbnkuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIHJheWNhc3Qgd2lsbCBzZWFyY2ggdG93YXJkIHRoZSBlbmQgcG9zaXRpb24gYVBvbHkgdGhlIGZpcnN0IGZsb29yIG1lc2guIA0KICAgICAgICAvLy8gSWYgaXQgcmVhY2hlcyB0aGUgZW5kIHBvc2l0aW9uJ3MgeHotY29vcmRpbmF0ZXMgaXQgd2lsbCBpbmRpY2F0ZSBGTFRfTUFYDQogICAgICAgIC8vLyAobm8gd2FsbCBoaXQpLCBtZWFuaW5nIGl0IHJlYWNoZWQgdGhlIGVuZCBwb3NpdGlvbi4gVGhpcyBpcyBvbmUgZXhhbXBsZSBvZiB3aHkNCiAgICAgICAgLy8vIHRoaXMgbWV0aG9kIGlzIG1lYW50IGZvciBzaG9ydCBkaXN0YW5jZSBjaGVja3MuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQ2FzdHMgYSAnd2Fsa2FiaWxpdHknIHJheSBhUG9seSB0aGUgc3VyZmFjZSBvZiB0aGUgbmF2aWdhdGlvbiBtZXNoIGZyb20gDQogICAgICAgIC8vLyB0aGUgc3RhcnQgcG9zaXRpb24gdG93YXJkIHRoZSBlbmQgcG9zaXRpb24uDQogICAgICAgIC8vLyBAbm90ZSBBIHdyYXBwZXIgYXJvdW5kIHJheWNhc3QoLi4uLCBSYXljYXN0SGl0KikuIFJldGFpbmVkIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5Lg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXN0YXJ0UmVmCVRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHN0YXJ0IHBvbHlnb24uDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJc3RhcnRQb3MJQSBwb3NpdGlvbiB3aXRoaW4gdGhlIHN0YXJ0IHBvbHlnb24gcmVwcmVzZW50aW5nIA0KICAgICAgICAvLy8gIAkJCQkJCQl0aGUgc3RhcnQgb2YgdGhlIHJheS4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQllbmRQb3MJCVRoZSBwb3NpdGlvbiB0byBjYXN0IHRoZSByYXkgdG93YXJkLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXQJCQlUaGUgaGl0IHBhcmFtZXRlci4gKEZMVF9NQVggaWYgbm8gd2FsbCBoaXQuKQ0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCWhpdE5vcm1hbAlUaGUgbm9ybWFsIG9mIHRoZSBuZWFyZXN0IHdhbGwgaGl0LiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWZpbHRlcgkJVGhlIHBvbHlnb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoZSBxdWVyeS4NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlwYXRoCQlUaGUgcmVmZXJlbmNlIGlkcyBvZiB0aGUgdmlzaXRlZCBwb2x5Z29ucy4gW29wdF0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlwYXRoQ291bnQJVGhlIG51bWJlciBvZiB2aXNpdGVkIHBvbHlnb25zLiBbb3B0XQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCW1heFBhdGgJCVRoZSBtYXhpbXVtIG51bWJlciBvZiBwb2x5Z29ucyB0aGUgQHAgcGF0aCBhcnJheSBjYW4gaG9sZC4NCiAgICAgICAgLy8vIEByZXR1cm5zIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBxdWVyeS4NCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJheWNhc3Qoc3RhcnRSZWYsIHN0YXJ0UG9zLCBlbmRQb3MsIGZpbHRlciwgb3B0aW9ucywgcHJldlJlZikgew0KICAgICAgICAgIC8vIFZhbGlkYXRlIGlucHV0DQogICAgICAgICAgaWYgKHN0YXJ0UmVmID09IDAgfHwgIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYoc3RhcnRSZWYpKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIHN0YXJ0IHJlZiIpOw0KICAgICAgICAgIGlmIChwcmV2UmVmICE9IDAgJiYgIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYocHJldlJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgcHJlZiByZWYiKTsNCiAgICAgICAgICB2YXIgaGl0ID0gbmV3IFJheWNhc3RIaXQoKTsNCiAgICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSAqIDMgKyAzKTsNCiAgICAgICAgICB2YXIgY3VyUG9zID0gbmV3IEFycmF5KDMpLA0KICAgICAgICAgICAgICBsYXN0UG9zID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShjdXJQb3MsIHN0YXJ0UG9zKTsNCiAgICAgICAgICB2YXIgZGlyID0gRGV0b3VyQ29tbW9uLnZTdWIoZW5kUG9zLCBzdGFydFBvcyk7DQogICAgICAgICAgdmFyIHByZXZUaWxlLCB0aWxlLCBuZXh0VGlsZTsNCiAgICAgICAgICB2YXIgcHJldlBvbHksIHBvbHksIG5leHRQb2x5OyAvLyBUaGUgQVBJIGlucHV0IGhhcyBiZWVuIGNoZWNrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLg0KDQogICAgICAgICAgdmFyIGN1clJlZiA9IHN0YXJ0UmVmOw0KICAgICAgICAgIHZhciB0aWxlQW5kUG9seVVucyA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShjdXJSZWYpOw0KICAgICAgICAgIHRpbGUgPSB0aWxlQW5kUG9seVVuc1swXTsNCiAgICAgICAgICBwb2x5ID0gdGlsZUFuZFBvbHlVbnNbMV07DQogICAgICAgICAgbmV4dFRpbGUgPSBwcmV2VGlsZSA9IHRpbGU7DQogICAgICAgICAgbmV4dFBvbHkgPSBwcmV2UG9seSA9IHBvbHk7DQoNCiAgICAgICAgICBpZiAocHJldlJlZiAhPSAwKSB7DQogICAgICAgICAgICB0aWxlQW5kUG9seVVucyA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShwcmV2UmVmKTsNCiAgICAgICAgICAgIHByZXZUaWxlID0gdGlsZUFuZFBvbHlVbnNbMF07DQogICAgICAgICAgICBwcmV2UG9seSA9IHRpbGVBbmRQb2x5VW5zWzFdOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHdoaWxlIChjdXJSZWYgIT0gMCkgew0KICAgICAgICAgICAgLy8gQ2FzdCByYXkgYWdhaW5zdCBjdXJyZW50IHBvbHlnb24uDQogICAgICAgICAgICAvLyBDb2xsZWN0IHZlcnRpY2VzLg0KICAgICAgICAgICAgdmFyIG52ID0gMDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5LnZlcnRDb3VudDsgKytpKSB7DQogICAgICAgICAgICAgIGFycmF5Y29weSQ0KHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tpXSAqIDMsIHZlcnRzLCBudiAqIDMsIDMpOw0KICAgICAgICAgICAgICBudisrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgaXJlc3VsdCA9IERldG91ckNvbW1vbi5pbnRlcnNlY3RTZWdtZW50UG9seTJEKHN0YXJ0UG9zLCBlbmRQb3MsIHZlcnRzLCBudik7DQoNCiAgICAgICAgICAgIGlmICghaXJlc3VsdC5pbnRlcnNlY3RzKSB7DQogICAgICAgICAgICAgIC8vIENvdWxkIG5vdCBoaXQgdGhlIHBvbHlnb24sIGtlZXAgdGhlIG9sZCB0IGFuZCByZXBvcnQgaGl0Lg0KICAgICAgICAgICAgICByZXR1cm4gaGl0Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBoaXQuaGl0RWRnZUluZGV4ID0gaXJlc3VsdC5zZWdNYXg7IC8vIEtlZXAgdHJhY2sgb2YgZnVydGhlc3QgdCBzbyBmYXIuDQoNCiAgICAgICAgICAgIGlmIChpcmVzdWx0LnRtYXggPiBoaXQudCkgaGl0LnQgPSBpcmVzdWx0LnRtYXg7IC8vIFN0b3JlIHZpc2l0ZWQgcG9seWdvbnMuDQoNCiAgICAgICAgICAgIGhpdC5wYXRoLnB1c2goY3VyUmVmKTsgLy8gUmF5IGVuZCBpcyBjb21wUG9seWVseSBpbnNpZGUgdGhlIHBvbHlnb24uDQoNCiAgICAgICAgICAgIGlmIChpcmVzdWx0LnNlZ01heCA9PSAtMSkgew0KICAgICAgICAgICAgICBoaXQudCA9IE51bWJlci5NQVhfVkFMVUU7IC8vIGFkZCB0aGUgY29zdA0KDQogICAgICAgICAgICAgIGlmICgob3B0aW9ucyAmIE5hdk1lc2hRdWVyeS5EVF9SQVlDQVNUX1VTRV9DT1NUUykgIT0gMCkgaGl0LnBhdGhDb3N0ICs9IGZpbHRlci5nZXRDb3N0KGN1clBvcywgZW5kUG9zLCBwcmV2UmVmLCBwcmV2VGlsZSwgcHJldlBvbHksIGN1clJlZiwgdGlsZSwgcG9seSwgY3VyUmVmLCB0aWxlLCBwb2x5KTsNCiAgICAgICAgICAgICAgcmV0dXJuIGhpdDsNCiAgICAgICAgICAgIH0gLy8gRm9sbG93IG5laWdoYm91cnMuDQoNCg0KICAgICAgICAgICAgdmFyIG5leHRSZWYgPSAwOw0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTcgPSBwb2x5LmZpcnN0TGluazsgX2k3ICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBfaTcgPSB0aWxlLmxpbmtzW19pN10ubmV4dCkgew0KICAgICAgICAgICAgICB2YXIgbGluayA9IHRpbGUubGlua3NbX2k3XTsgLy8gRmluZCBsaW5rIHdoaWNoIGNvbnRhaW5zIHRoaXMgZWRnZS4NCg0KICAgICAgICAgICAgICBpZiAobGluay5lZGdlICE9IGlyZXN1bHQuc2VnTWF4KSBjb250aW51ZTsgLy8gR2V0IHBvaW50ZXIgdG8gdGhlIG5leHQgcG9seWdvbi4NCg0KICAgICAgICAgICAgICB0aWxlQW5kUG9seVVucyA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShsaW5rLnJlZik7DQogICAgICAgICAgICAgIG5leHRUaWxlID0gdGlsZUFuZFBvbHlVbnNbMF07DQogICAgICAgICAgICAgIG5leHRQb2x5ID0gdGlsZUFuZFBvbHlVbnNbMV07IC8vIFNraXAgb2ZmLW1lc2ggY29ubmVjdGlvbnMuDQoNCiAgICAgICAgICAgICAgaWYgKG5leHRQb2x5LmdldFR5cGUoKSA9PSBQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTikgY29udGludWU7IC8vIFNraXAgbGlua3MgYmFzZWQgb24gZmlsdGVyLg0KDQogICAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobGluay5yZWYsIG5leHRUaWxlLCBuZXh0UG9seSkpIGNvbnRpbnVlOyAvLyBJZiB0aGUgbGluayBpcyBpbnRlcm5hbCwganVzdCByZXR1cm4gdGhlIHJlZi4NCg0KICAgICAgICAgICAgICBpZiAobGluay5zaWRlID09IDB4ZmYpIHsNCiAgICAgICAgICAgICAgICBuZXh0UmVmID0gbGluay5yZWY7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIH0gLy8gSWYgdGhlIGxpbmsgaXMgYXQgdGlsZSBib3VuZGFyeSwNCiAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGxpbmsgc3BhbnMgdGhlIHdob2xlIGVkZ2UsIGFuZCBhY2NlcHQuDQoNCg0KICAgICAgICAgICAgICBpZiAobGluay5ibWluID09IDAgJiYgbGluay5ibWF4ID09IDI1NSkgew0KICAgICAgICAgICAgICAgIG5leHRSZWYgPSBsaW5rLnJlZjsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgfSAvLyBDaGVjayBmb3IgcGFydGlhbCBlZGdlIGxpbmtzLg0KDQoNCiAgICAgICAgICAgICAgdmFyIF92NCA9IHBvbHkudmVydHNbbGluay5lZGdlXTsNCiAgICAgICAgICAgICAgdmFyIF92NSA9IHBvbHkudmVydHNbKGxpbmsuZWRnZSArIDEpICUgcG9seS52ZXJ0Q291bnRdOw0KICAgICAgICAgICAgICB2YXIgbGVmdCA9IF92NCAqIDM7DQogICAgICAgICAgICAgIHZhciByaWdodCA9IF92NSAqIDM7IC8vIENoZWNrIHRoYXQgdGhlIGludGVyc2VjdGlvbiBsaWVzIGluc2lkZSB0aGUgbGluayBwb3J0YWwuDQoNCiAgICAgICAgICAgICAgaWYgKGxpbmsuc2lkZSA9PSAwIHx8IGxpbmsuc2lkZSA9PSA0KSB7DQogICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGxpbmsgc2l6ZS4NCiAgICAgICAgICAgICAgICBsbWluID0gdGlsZS5kYXRhLnZlcnRzW2xlZnQgKyAyXSArICh0aWxlLmRhdGEudmVydHNbcmlnaHQgKyAyXSAtIHRpbGUuZGF0YS52ZXJ0c1tsZWZ0ICsgMl0pICogKGxpbmsuYm1pbiAqIHMpOw0KICAgICAgICAgICAgICAgIGxtYXggPSB0aWxlLmRhdGEudmVydHNbbGVmdCArIDJdICsgKHRpbGUuZGF0YS52ZXJ0c1tyaWdodCArIDJdIC0gdGlsZS5kYXRhLnZlcnRzW2xlZnQgKyAyXSkgKiAobGluay5ibWF4ICogcyk7DQoNCiAgICAgICAgICAgICAgICBpZiAobG1pbiA+IGxtYXgpIHsNCiAgICAgICAgICAgICAgICAgIHRlbXAgPSBsbWluOw0KICAgICAgICAgICAgICAgICAgbG1pbiA9IGxtYXg7DQogICAgICAgICAgICAgICAgICBsbWF4ID0gdGVtcDsNCiAgICAgICAgICAgICAgICB9IC8vIEZpbmQgWiBpbnRlcnNlY3Rpb24uDQoNCg0KICAgICAgICAgICAgICAgIHogPSBzdGFydFBvc1syXSArIChlbmRQb3NbMl0gLSBzdGFydFBvc1syXSkgKiBpcmVzdWx0LnRtYXg7DQoNCiAgICAgICAgICAgICAgICBpZiAoeiA+PSBsbWluICYmIHogPD0gbG1heCkgew0KICAgICAgICAgICAgICAgICAgbmV4dFJlZiA9IGxpbmsucmVmOw0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmsuc2lkZSA9PSAyIHx8IGxpbmsuc2lkZSA9PSA2KSB7DQogICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGxpbmsgc2l6ZS4NCiAgICAgICAgICAgICAgICBsbWluID0gdGlsZS5kYXRhLnZlcnRzW2xlZnRdICsgKHRpbGUuZGF0YS52ZXJ0c1tyaWdodF0gLSB0aWxlLmRhdGEudmVydHNbbGVmdF0pICogKGxpbmsuYm1pbiAqIHMpOw0KICAgICAgICAgICAgICAgIGxtYXggPSB0aWxlLmRhdGEudmVydHNbbGVmdF0gKyAodGlsZS5kYXRhLnZlcnRzW3JpZ2h0XSAtIHRpbGUuZGF0YS52ZXJ0c1tsZWZ0XSkgKiAobGluay5ibWF4ICogcyk7DQoNCiAgICAgICAgICAgICAgICBpZiAobG1pbiA+IGxtYXgpIHsNCiAgICAgICAgICAgICAgICAgIHRlbXAgPSBsbWluOw0KICAgICAgICAgICAgICAgICAgbG1pbiA9IGxtYXg7DQogICAgICAgICAgICAgICAgICBsbWF4ID0gdGVtcDsNCiAgICAgICAgICAgICAgICB9IC8vIEZpbmQgWCBpbnRlcnNlY3Rpb24uDQoNCg0KICAgICAgICAgICAgICAgIHggPSBzdGFydFBvc1swXSArIChlbmRQb3NbMF0gLSBzdGFydFBvc1swXSkgKiBpcmVzdWx0LnRtYXg7DQoNCiAgICAgICAgICAgICAgICBpZiAoeCA+PSBsbWluICYmIHggPD0gbG1heCkgew0KICAgICAgICAgICAgICAgICAgbmV4dFJlZiA9IGxpbmsucmVmOw0KICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIGFkZCB0aGUgY29zdA0KDQoNCiAgICAgICAgICAgIGlmICgob3B0aW9ucyAmIE5hdk1lc2hRdWVyeS5EVF9SQVlDQVNUX1VTRV9DT1NUUykgIT0gMCkgew0KICAgICAgICAgICAgICAvLyBjb21wdXRlIHRoZSBpbnRlcnNlY3Rpb24gcG9Qb2x5IGF0IHRoZSBmdXJ0aGVzdCBlbmQgb2YgdGhlIHBvbHlnb24NCiAgICAgICAgICAgICAgLy8gYW5kIGNvcnJlY3QgdGhlIGhlaWdodCAoc2luY2UgdGhlIHJheWNhc3QgbW92ZXMgaW4gMmQpDQogICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShsYXN0UG9zLCBjdXJQb3MpOw0KICAgICAgICAgICAgICBjdXJQb3MgPSBEZXRvdXJDb21tb24udk1hZChzdGFydFBvcywgZGlyLCBoaXQudCk7DQogICAgICAgICAgICAgIHZhciBlMSA9IG5ldyBWZWN0b3JQdHIodmVydHMsIGlyZXN1bHQuc2VnTWF4ICogMyk7DQogICAgICAgICAgICAgIHZhciBlMiA9IG5ldyBWZWN0b3JQdHIodmVydHMsIChpcmVzdWx0LnNlZ01heCArIDEpICUgbnYgKiAzKTsNCiAgICAgICAgICAgICAgdmFyIGVEaXIgPSBEZXRvdXJDb21tb24udlN1YihlMiwgZTEpOw0KICAgICAgICAgICAgICB2YXIgZGlmZiA9IERldG91ckNvbW1vbi52U3ViKG5ldyBWZWN0b3JQdHIoY3VyUG9zKSwgZTEpOw0KICAgICAgICAgICAgICBzID0gRGV0b3VyQ29tbW9uLnNxcihlRGlyWzBdKSA+IERldG91ckNvbW1vbi5zcXIoZURpclsyXSkgPyBkaWZmWzBdIC8gZURpclswXSA6IGRpZmZbMl0gLyBlRGlyWzJdOw0KICAgICAgICAgICAgICBjdXJQb3NbMV0gPSBlMVsxXSArIGVEaXJbMV0gKiBzOw0KICAgICAgICAgICAgICBoaXQucGF0aENvc3QgKz0gZmlsdGVyLmdldENvc3QobGFzdFBvcywgY3VyUG9zLCBwcmV2UmVmLCBwcmV2VGlsZSwgcHJldlBvbHksIGN1clJlZiwgdGlsZSwgcG9seSwgbmV4dFJlZiwgbmV4dFRpbGUsIG5leHRQb2x5KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG5leHRSZWYgPT0gMCkgew0KICAgICAgICAgICAgICAvLyBObyBuZWlnaGJvdXIsIHdlIGhpdCBhIHdhbGwuDQogICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBoaXQgbm9ybWFsLg0KICAgICAgICAgICAgICB2YXIgYSA9IGlyZXN1bHQuc2VnTWF4Ow0KICAgICAgICAgICAgICB2YXIgYiA9IGlyZXN1bHQuc2VnTWF4ICsgMSA8IG52ID8gaXJlc3VsdC5zZWdNYXggKyAxIDogMDsNCiAgICAgICAgICAgICAgdmFyIHZhID0gYSAqIDM7DQogICAgICAgICAgICAgIHZhciB2YiA9IGIgKiAzOw0KICAgICAgICAgICAgICBkeCA9IHZlcnRzW3ZiXSAtIHZlcnRzW3ZhXTsNCiAgICAgICAgICAgICAgZHogPSB2ZXJ0c1t2YiArIDJdIC0gdmVydHNbdmEgKyAyXTsNCiAgICAgICAgICAgICAgaGl0LmhpdE5vcm1hbFswXSA9IGR6Ow0KICAgICAgICAgICAgICBoaXQuaGl0Tm9ybWFsWzFdID0gMDsNCiAgICAgICAgICAgICAgaGl0LmhpdE5vcm1hbFsyXSA9IC1keDsNCiAgICAgICAgICAgICAgdk5vcm1hbGl6ZShoaXQuaGl0Tm9ybWFsKTsNCiAgICAgICAgICAgICAgcmV0dXJuIGhpdDsNCiAgICAgICAgICAgIH0gLy8gTm8gaGl0LCBhZHZhbmNlIHRvIG5laWdoYm91ciBwb2x5Z29uLg0KDQoNCiAgICAgICAgICAgIHByZXZSZWYgPSBjdXJSZWY7DQogICAgICAgICAgICBjdXJSZWYgPSBuZXh0UmVmOw0KICAgICAgICAgICAgcHJldlRpbGUgPSB0aWxlOw0KICAgICAgICAgICAgdGlsZSA9IG5leHRUaWxlOw0KICAgICAgICAgICAgcHJldlBvbHkgPSBwb2x5Ow0KICAgICAgICAgICAgcG9seSA9IG5leHRQb2x5Ow0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBoaXQ7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBBdCBsZWFzdCBvbmUgcmVzdWx0IGFycmF5IG11c3QgYmUgcHJvdmlkZWQuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gVGhlIG9yZGVyIG9mIHRoZSByZXN1bHQgc2V0IGlzIGZyb20gbGVhc3QgdG8gaGlnaGVzdCBjb3N0IHRvIHJlYWNoIHRoZSBwb2x5Z29uLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEEgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIG1ldGhvZCBpcyB0byBwZXJmb3JtIERpamtzdHJhIHNlYXJjaGVzLiANCiAgICAgICAgLy8vIENhbmRpZGF0ZSBwb2x5Z29ucyBhcmUgZm91bmQgYnkgc2VhcmNoaW5nIHRoZSBncmFwaCBiZWdpbm5pbmcgYXQgdGhlIHN0YXJ0IHBvbHlnb24uDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gSWYgYSBwb2x5Z29uIGlzIG5vdCBmb3VuZCB2aWEgdGhlIGdyYXBoIHNlYXJjaCwgZXZlbiBpZiBpdCBpbnRlcnNlY3RzIHRoZSANCiAgICAgICAgLy8vIHNlYXJjaCBjaXJjbGUsIGl0IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHQgc2V0LiBGb3IgZXhhbXBsZToNCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBwb2x5QSBpcyB0aGUgc3RhcnQgcG9seWdvbi4NCiAgICAgICAgLy8vIHBvbHlCIHNoYXJlcyBhbiBlZGdlIHdpdGggcG9seUEuIChJcyBhZGphY2VudC4pDQogICAgICAgIC8vLyBwb2x5QyBzaGFyZXMgYW4gZWRnZSB3aXRoIHBvbHlCLCBidXQgbm90IHdpdGggcG9seUENCiAgICAgICAgLy8vIEV2ZW4gaWYgdGhlIHNlYXJjaCBjaXJjbGUgb3ZlcmxhcHMgcG9seUMsIGl0IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIHRoZSANCiAgICAgICAgLy8vIHJlc3VsdCBzZXQgdW5sZXNzIHBvbHlCIGlzIGFsc28gaW4gdGhlIHNldC4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gVGhlIHZhbHVlIG9mIHRoZSBjZW50ZXIgcG9Qb2x5IGlzIHVzZWQgYXMgdGhlIHN0YXJ0IHBvc2l0aW9uIGZvciBjb3N0IA0KICAgICAgICAvLy8gY2FsY3VsYXRpb25zLiBJdCBpcyBub3QgcHJvamVjdGVkIG9udG8gdGhlIHN1cmZhY2Ugb2YgdGhlIG1lc2gsIHNvIGl0cyANCiAgICAgICAgLy8vIHktdmFsdWUgd2lsbCBlZmZlY3QgdGhlIGNvc3RzLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEludGVyc2VjdGlvbiB0ZXN0cyBvY2N1ciBpbiAyRC4gQWxsIHBvbHlnb25zIGFuZCB0aGUgc2VhcmNoIGNpcmNsZSBhcmUgDQogICAgICAgIC8vLyBwcm9qZWN0ZWQgb250byB0aGUgeHotcGxhbmUuIFNvIHRoZSB5LXZhbHVlIG9mIHRoZSBjZW50ZXIgcG9Qb2x5IGRvZXMgbm90IA0KICAgICAgICAvLy8gZWZmZWN0IGludGVyc2VjdGlvbiB0ZXN0cy4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBJZiB0aGUgcmVzdWx0IGFycmF5cyBhcmUgdG8gc21hbGwgdG8gaG9sZCB0aGUgZW50aXJlIHJlc3VsdCBzZXQsIHRoZXkgd2lsbCBiZSANCiAgICAgICAgLy8vIGZpbGxlZCB0byBjYXBhY2l0eS4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy9AfQ0KICAgICAgICAvLy8gQG5hbWUgRGlqa3N0cmEgU2VhcmNoIEZ1bmN0aW9ucw0KICAgICAgICAvLy8gQHsgDQogICAgICAgIC8vLyBGaW5kcyB0aGUgcG9seWdvbnMgYVBvbHkgdGhlIG5hdmlnYXRpb24gZ3JhcGggdGhhdCB0b3VjaCB0aGUgc3BlY2lmaWVkIGNpcmNsZS4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlzdGFydFJlZgkJVGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiB3aGVyZSB0aGUgc2VhcmNoIHN0YXJ0cy4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQljZW50ZXJQb3MJCVRoZSBjZW50ZXIgb2YgdGhlIHNlYXJjaCBjaXJjbGUuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJcmFkaXVzCQkJVGhlIHJhZGl1cyBvZiB0aGUgc2VhcmNoIGNpcmNsZS4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlmaWx0ZXIJCQlUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5Lg0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXJlc3VsdFJlZgkJVGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBvbHlnb25zIHRvdWNoZWQgYnkgdGhlIGNpcmNsZS4gW29wdF0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlyZXN1bHRQYXJlbnQJVGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBhcmVudCBwb2x5Z29ucyBmb3IgZWFjaCByZXN1bHQuIA0KICAgICAgICAvLy8gIAkJCQkJCQkJWmVybyBpZiBhIHJlc3VsdCBwb2x5Z29uIGhhcyBubyBwYXJlbnQuIFtvcHRdDQogICAgICAgIC8vLyAgQHBhcmFtW291dF0JcmVzdWx0Q29zdAkJVGhlIHNlYXJjaCBjb3N0IGZyb20gQHAgY2VudGVyUG9zIHRvIHRoZSBwb2x5Z29uLiBbb3B0XQ0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXJlc3VsdENvdW50CQlUaGUgbnVtYmVyIG9mIHBvbHlnb25zIGZvdW5kLiBbb3B0XQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCW1heFJlc3VsdAkJVGhlIG1heGltdW0gbnVtYmVyIG9mIHBvbHlnb25zIHRoZSByZXN1bHQgYXJyYXlzIGNhbiBob2xkLg0KICAgICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmRQb2x5c0Fyb3VuZENpcmNsZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUG9seXNBcm91bmRDaXJjbGUoc3RhcnRSZWYsIGNlbnRlclBvcywgcmFkaXVzLCBmaWx0ZXIpIHsNCiAgICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dA0KICAgICAgICAgIGlmIChzdGFydFJlZiA9PSAwIHx8ICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCByZWYiKTsNCiAgICAgICAgICB2YXIgcmVzdWx0UmVmID0gW107DQogICAgICAgICAgdmFyIHJlc3VsdFBhcmVudCA9IFtdOw0KICAgICAgICAgIHZhciByZXN1bHRDb3N0ID0gW107DQogICAgICAgICAgdGhpcy5tX25vZGVQb29sID0gW107DQogICAgICAgICAgdGhpcy5tX29wZW5MaXN0ID0gW107DQogICAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlKHN0YXJ0UmVmKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc3RhcnROb2RlLnBvcywgY2VudGVyUG9zKTsNCiAgICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7DQogICAgICAgICAgc3RhcnROb2RlLmNvc3QgPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS50b3RhbCA9IDA7DQogICAgICAgICAgc3RhcnROb2RlLmlkID0gc3RhcnRSZWY7DQogICAgICAgICAgc3RhcnROb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX09QRU47DQogICAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2goc3RhcnROb2RlKTsNCiAgICAgICAgICByYWRpdXNTcXIgPSBEZXRvdXJDb21tb24uc3FyKHJhZGl1cyk7DQoNCiAgICAgICAgICB3aGlsZSAoIXRoaXMubV9vcGVuTGlzdC5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgdmFyIGJlc3ROb2RlID0gbV9vcGVuTGlzdC5wb3AoKTsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzICY9IH5Ob2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzIHw9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7IC8vIEdldCBsZXQgYW5kIHRpbGUuDQogICAgICAgICAgICAvLyBUaGUgQVBJIGlucHV0IGhhcyBiZWVuIGNoZWtlZCBhbHJlYWR5LCBza2lwIGNoZWNraW5nIGludGVybmFsIGRhdGEuDQoNCiAgICAgICAgICAgIHZhciBiZXN0UmVmID0gYmVzdE5vZGUuaWQ7DQogICAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUoYmVzdFJlZik7DQogICAgICAgICAgICB2YXIgYmVzdFRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgIHZhciBiZXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgcGFyZW50IGxldCBhbmQgdGlsZS4NCg0KICAgICAgICAgICAgdmFyIHBhcmVudFJlZiA9IDA7DQogICAgICAgICAgICB2YXIgcGFyZW50VGlsZSA9IG51bGw7DQogICAgICAgICAgICB2YXIgcGFyZW50UG9seSA9IG51bGw7DQogICAgICAgICAgICBpZiAoYmVzdE5vZGUucGlkeCAhPSAwKSBwYXJlbnRSZWYgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KGJlc3ROb2RlLnBpZHgpLmlkOw0KDQogICAgICAgICAgICBpZiAocGFyZW50UmVmICE9IDApIHsNCiAgICAgICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUocGFyZW50UmVmKTsNCiAgICAgICAgICAgICAgcGFyZW50VGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICBwYXJlbnRQb2x5ID0gdGlsZUFuZFBvbHlbMV07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJlc3VsdFJlZi5wdXNoKGJlc3RSZWYpOw0KICAgICAgICAgICAgcmVzdWx0UGFyZW50LnB1c2gocGFyZW50UmVmKTsNCiAgICAgICAgICAgIHJlc3VsdENvc3QucHVzaChiZXN0Tm9kZS50b3RhbCk7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSBiZXN0UG9seS5maXJzdExpbms7IGkgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IGkgPSBiZXN0VGlsZS5saW5rc1tpXS5uZXh0KSB7DQogICAgICAgICAgICAgIHZhciBsaW5rID0gYmVzdFRpbGUubGlua3NbaV07DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBsaW5rLnJlZjsgLy8gU2tpcCBpbnZhbGlkIG5laWdoYm91cnMgYW5kIGRvIG5vdCBmb2xsb3cgYmFjayB0byBwYXJlbnQuDQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91clJlZiA9PSAwIHx8IG5laWdoYm91clJlZiA9PSBwYXJlbnRSZWYpIGNvbnRpbnVlOyAvLyBFeHBhbmQgdG8gbmVpZ2hib3VyDQoNCiAgICAgICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUobmVpZ2hib3VyUmVmKTsNCiAgICAgICAgICAgICAgdmFyIG5laWdoYm91clRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgICAgdmFyIG5laWdoYm91clBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gRG8gbm90IGFkdmFuY2UgaWYgdGhlIHBvbHlnb24gaXMgZXhjbHVkZWQgYnkgdGhlIGZpbHRlci4NCg0KICAgICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBGaW5kIGVkZ2UgYW5kIGNhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuDQoNCiAgICAgICAgICAgICAgdmFyIHBwID0gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGJlc3RSZWYsIGJlc3RQb2x5LCBiZXN0VGlsZSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJQb2x5LCBuZWlnaGJvdXJUaWxlLCAwLCAwKTsNCiAgICAgICAgICAgICAgdmFyIHZhID0gcHAubGVmdDsNCiAgICAgICAgICAgICAgdmFyIHZiID0gcHAucmlnaHQ7IC8vIElmIHRoZSBjaXJjbGUgaXMgbm90IHRvdWNoaW5nIHRoZSBuZXh0IHBvbHlnb24sIHNraXAgaXQuDQoNCiAgICAgICAgICAgICAgdmFyIGRpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJEMyhjZW50ZXJQb3MsIHZhLCB2Yik7DQogICAgICAgICAgICAgIGRpc3RTcXIgPSBkaXN0c2VnWzBdOw0KICAgICAgICAgICAgICBpZiAoZGlzdFNxciA+IHJhZGl1c1NxcikgY29udGludWU7DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmKTsNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX0NMT1NFRCkgIT0gMCkgY29udGludWU7IC8vIENvc3QNCg0KICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSBuZWlnaGJvdXJOb2RlLnBvcyA9IHZMZXJwMyh2YSwgdmIsIDAuNSk7DQogICAgICAgICAgICAgIGNvc3QgPSBmaWx0ZXIuZ2V0Q29zdChiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCBwYXJlbnRSZWYsIHBhcmVudFRpbGUsIHBhcmVudFBvbHksIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KTsNCiAgICAgICAgICAgICAgdG90YWwgPSBiZXN0Tm9kZS50b3RhbCArIGNvc3Q7IC8vIFRoZSBub2RlIGlzIGFscmVhZHkgaW4gb3BlbiBsaXN0IGFuZCB0aGUgbmV3IHJlc3VsdCBpcyB3b3JzZSwgc2tpcC4NCg0KICAgICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCAmJiB0b3RhbCA+PSBuZWlnaGJvdXJOb2RlLnRvdGFsKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5pZCA9IG5laWdoYm91clJlZjsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gdG90YWw7DQoNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QubW9kaWZ5KG5laWdoYm91ck5vZGUpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgPSBOb2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChuZWlnaGJvdXJOb2RlKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBuZXcgRmluZFBvbHlzQXJvdW5kUmVzdWx0KHJlc3VsdFJlZiwgcmVzdWx0UGFyZW50LCByZXN1bHRDb3N0KTsNCiAgICAgICAgfSAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSBvcmRlciBvZiB0aGUgcmVzdWx0IHNldCBpcyBmcm9tIGxlYXN0IHRvIGhpZ2hlc3QgY29zdC4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gQXQgbGVhc3Qgb25lIHJlc3VsdCBhcnJheSBtdXN0IGJlIHByb3ZpZGVkLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEEgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIG1ldGhvZCBpcyB0byBwZXJmb3JtIERpamtzdHJhIHNlYXJjaGVzLiANCiAgICAgICAgLy8vIENhbmRpZGF0ZSBwb2x5Z29ucyBhcmUgZm91bmQgYnkgc2VhcmNoaW5nIHRoZSBncmFwaCBiZWdpbm5pbmcgYXQgdGhlIHN0YXJ0IA0KICAgICAgICAvLy8gcG9seWdvbi4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gVGhlIHNhbWUgaW50ZXJzZWN0aW9uIHRlc3QgcmVzdHJpY3Rpb25zIHRoYXQgYXBwbHkgdG8gZmluZFBvbHlzQXJvdW5kQ2lyY2xlKCkNCiAgICAgICAgLy8vIG1ldGhvZCBhcHBseSB0byB0aGlzIG1ldGhvZC4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gVGhlIDNEIGNlbnRyb2lkIG9mIHRoZSBzZWFyY2ggcG9seWdvbiBpcyB1c2VkIGFzIHRoZSBzdGFydCBwb3NpdGlvbiBmb3IgY29zdCANCiAgICAgICAgLy8vIGNhbGN1bGF0aW9ucy4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gSW50ZXJzZWN0aW9uIHRlc3RzIG9jY3VyIGluIDJELiBBbGwgcG9seWdvbnMgYXJlIHByb2plY3RlZCBvbnRvIHRoZSANCiAgICAgICAgLy8vIHh6LXBsYW5lLiBTbyB0aGUgeS12YWx1ZXMgb2YgdGhlIHZlcnRpY2VzIGRvIG5vdCBlZmZlY3QgaW50ZXJzZWN0aW9uIHRlc3RzLg0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBJZiB0aGUgcmVzdWx0IGFycmF5cyBhcmUgaXMgdG9vIHNtYWxsIHRvIGhvbGQgdGhlIGVudGlyZSByZXN1bHQgc2V0LCB0aGV5IHdpbGwgDQogICAgICAgIC8vLyBiZSBmaWxsZWQgdG8gY2FwYWNpdHkuDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gRmluZHMgdGhlIHBvbHlnb25zIGFQb2x5IHRoZSBuYXZpYXRpb24gZ3JhcGggdGhhdCB0b3VjaCB0aGUgc3BlY2lmaWVkIGNvbnZleCBwb2x5Z29uLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXN0YXJ0UmVmCQlUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBwb2x5Z29uIHdoZXJlIHRoZSBzZWFyY2ggc3RhcnRzLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXZlcnRzCQkJVGhlIHZlcnRpY2VzIGRlc2NyaWJpbmcgdGhlIGNvbnZleCBwb2x5Z29uLiAoQ0NXKSANCiAgICAgICAgLy8vICAJCQkJCQkJCVsoeCwgeSwgeikgKiBAcCBudmVydHNdDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJbnZlcnRzCQkJVGhlIG51bWJlciBvZiB2ZXJ0aWNlcyBpbiB0aGUgcG9seWdvbi4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlmaWx0ZXIJCQlUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5Lg0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXJlc3VsdFJlZgkJVGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBvbHlnb25zIHRvdWNoZWQgYnkgdGhlIHNlYXJjaCBwb2x5Z29uLiBbb3B0XQ0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXJlc3VsdFBhcmVudAlUaGUgcmVmZXJlbmNlIGlkcyBvZiB0aGUgcGFyZW50IHBvbHlnb25zIGZvciBlYWNoIHJlc3VsdC4gWmVybyBpZiBhIA0KICAgICAgICAvLy8gIAkJCQkJCQkJcmVzdWx0IHBvbHlnb24gaGFzIG5vIHBhcmVudC4gW29wdF0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlyZXN1bHRDb3N0CQlUaGUgc2VhcmNoIGNvc3QgZnJvbSB0aGUgY2VudHJvaWQgcG9Qb2x5IHRvIHRoZSBwb2x5Z29uLiBbb3B0XQ0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXJlc3VsdENvdW50CQlUaGUgbnVtYmVyIG9mIHBvbHlnb25zIGZvdW5kLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCW1heFJlc3VsdAkJVGhlIG1heGltdW0gbnVtYmVyIG9mIHBvbHlnb25zIHRoZSByZXN1bHQgYXJyYXlzIGNhbiBob2xkLg0KICAgICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmRQb2x5c0Fyb3VuZFNoYXBlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRQb2x5c0Fyb3VuZFNoYXBlKHN0YXJ0UmVmLCB2ZXJ0cywgbnZlcnRzLCBmaWx0ZXIpIHsNCiAgICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dA0KICAgICAgICAgIGlmIChzdGFydFJlZiA9PSAwIHx8ICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCByZWYiKTsNCiAgICAgICAgICB2YXIgcmVzdWx0UmVmID0gW107DQogICAgICAgICAgdmFyIHJlc3VsdFBhcmVudCA9IFtdOw0KICAgICAgICAgIHZhciByZXN1bHRDb3N0ID0gW107DQogICAgICAgICAgdGhpcy5tX25vZGVQb29sID0gW107DQogICAgICAgICAgdGhpcy5tX29wZW5MaXN0ID0gW107DQogICAgICAgICAgdmFyIGNlbnRlclBvcyA9IFswLCAwLCAwXTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnZlcnRzOyArK2kpIHsNCiAgICAgICAgICAgIGNlbnRlclBvc1swXSArPSB2ZXJ0c1tpICogM107DQogICAgICAgICAgICBjZW50ZXJQb3NbMV0gKz0gdmVydHNbaSAqIDMgKyAxXTsNCiAgICAgICAgICAgIGNlbnRlclBvc1syXSArPSB2ZXJ0c1tpICogMyArIDJdOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHNjYWxlID0gMS4wIC8gbnZlcnRzOw0KICAgICAgICAgIGNlbnRlclBvc1swXSAqPSBzY2FsZTsNCiAgICAgICAgICBjZW50ZXJQb3NbMV0gKj0gc2NhbGU7DQogICAgICAgICAgY2VudGVyUG9zWzJdICo9IHNjYWxlOw0KICAgICAgICAgIHZhciBzdGFydE5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHN0YXJ0Tm9kZS5wb3MsIGNlbnRlclBvcyk7DQogICAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5jb3N0ID0gMDsNCiAgICAgICAgICBzdGFydE5vZGUudG90YWwgPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9PUEVOOw0KICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKHN0YXJ0Tm9kZSk7DQoNCiAgICAgICAgICB3aGlsZSAoIXRoaXMubV9vcGVuTGlzdC5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgdmFyIGJlc3ROb2RlID0gdGhpcy5tX29wZW5MaXN0LnBvcCgpOw0KICAgICAgICAgICAgYmVzdE5vZGUuZmxhZ3MgJj0gfk5vZGUuRFRfTk9ERV9PUEVOOw0KICAgICAgICAgICAgYmVzdE5vZGUuZmxhZ3MgfD0gTm9kZS5EVF9OT0RFX0NMT1NFRDsgLy8gR2V0IGxldCBhbmQgdGlsZS4NCiAgICAgICAgICAgIC8vIFRoZSBBUEkgaW5wdXQgaGFzIGJlZW4gY2hla2VkIGFscmVhZHksIHNraXAgY2hlY2tpbmcgaW50ZXJuYWwgZGF0YS4NCg0KICAgICAgICAgICAgdmFyIGJlc3RSZWYgPSBiZXN0Tm9kZS5pZDsNCiAgICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShiZXN0UmVmKTsNCiAgICAgICAgICAgIHZhciBiZXN0VGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgdmFyIGJlc3RQb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIEdldCBwYXJlbnQgbGV0IGFuZCB0aWxlLg0KDQogICAgICAgICAgICB2YXIgcGFyZW50UmVmID0gMDsNCiAgICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gbnVsbDsNCiAgICAgICAgICAgIHZhciBwYXJlbnRQb2x5ID0gbnVsbDsNCiAgICAgICAgICAgIGlmIChiZXN0Tm9kZS5waWR4ICE9IDApIHBhcmVudFJlZiA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgoYmVzdE5vZGUucGlkeCkuaWQ7DQoNCiAgICAgICAgICAgIGlmIChwYXJlbnRSZWYgIT0gMCkgew0KICAgICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShwYXJlbnRSZWYpOw0KICAgICAgICAgICAgICBwYXJlbnRUaWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgICAgIHBhcmVudFBvbHkgPSB0aWxlQW5kUG9seVsxXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmVzdWx0UmVmLnB1c2goYmVzdFJlZik7DQogICAgICAgICAgICByZXN1bHRQYXJlbnQucHVzaChwYXJlbnRSZWYpOw0KICAgICAgICAgICAgcmVzdWx0Q29zdC5wdXNoKGJlc3ROb2RlLnRvdGFsKTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2k4ID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBfaTggIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IF9pOCA9IGJlc3RUaWxlLmxpbmtzW19pOF0ubmV4dCkgew0KICAgICAgICAgICAgICB2YXIgbGluayA9IGJlc3RUaWxlLmxpbmtzW19pOF07DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBsaW5rLnJlZjsgLy8gU2tpcCBpbnZhbGlkIG5laWdoYm91cnMgYW5kIGRvIG5vdCBmb2xsb3cgYmFjayB0byBwYXJlbnQuDQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91clJlZiA9PSAwIHx8IG5laWdoYm91clJlZiA9PSBwYXJlbnRSZWYpIGNvbnRpbnVlOyAvLyBFeHBhbmQgdG8gbmVpZ2hib3VyDQoNCiAgICAgICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUobmVpZ2hib3VyUmVmKTsNCiAgICAgICAgICAgICAgdmFyIG5laWdoYm91clRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgICAgdmFyIG5laWdoYm91clBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gRG8gbm90IGFkdmFuY2UgaWYgdGhlIHBvbHlnb24gaXMgZXhjbHVkZWQgYnkgdGhlIGZpbHRlci4NCg0KICAgICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBGaW5kIGVkZ2UgYW5kIGNhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuDQoNCiAgICAgICAgICAgICAgdmFyIHBwID0gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGJlc3RSZWYsIGJlc3RQb2x5LCBiZXN0VGlsZSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJQb2x5LCBuZWlnaGJvdXJUaWxlLCAwLCAwKTsNCiAgICAgICAgICAgICAgdmFyIHZhID0gcHAubGVmdDsNCiAgICAgICAgICAgICAgdmFyIHZiID0gcHAucmlnaHQ7IC8vIElmIHRoZSBsZXQgaXMgbm90IHRvdWNoaW5nIHRoZSBlZGdlIHRvIHRoZSBuZXh0IHBvbHlnb24sIHNraXAgdGhlIGNvbm5lY3Rpb24gaXQuDQoNCiAgICAgICAgICAgICAgdmFyIGlyID0gRGV0b3VyQ29tbW9uLmludGVyc2VjdFNlZ21lbnRQb2x5MkQodmEsIHZiLCB2ZXJ0cywgbnZlcnRzKTsNCiAgICAgICAgICAgICAgaWYgKCFpci5pbnRlcnNlY3RzKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgaWYgKGlyLnRtaW4gPiAxLjAgfHwgaXIudG1heCA8IDAuMCkgY29udGludWU7DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmKTsNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX0NMT1NFRCkgIT0gMCkgY29udGludWU7IC8vIENvc3QNCg0KICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSBuZWlnaGJvdXJOb2RlLnBvcyA9IERldG91ckNvbW1vbi52TGVycDModmEsIHZiLCAwLjUpOw0KICAgICAgICAgICAgICBjb3N0ID0gZmlsdGVyLmdldENvc3QoYmVzdE5vZGUucG9zLCBuZWlnaGJvdXJOb2RlLnBvcywgcGFyZW50UmVmLCBwYXJlbnRUaWxlLCBwYXJlbnRQb2x5LCBiZXN0UmVmLCBiZXN0VGlsZSwgYmVzdFBvbHksIG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSk7DQogICAgICAgICAgICAgIHRvdGFsID0gYmVzdE5vZGUudG90YWwgKyBjb3N0OyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsIHNraXAuDQoNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDAgJiYgdG90YWwgPj0gbmVpZ2hib3VyTm9kZS50b3RhbCkgY29udGludWU7DQogICAgICAgICAgICAgIG5laWdoYm91ck5vZGUuaWQgPSBuZWlnaGJvdXJSZWY7DQogICAgICAgICAgICAgIG5laWdoYm91ck5vZGUucGlkeCA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlSWR4KGJlc3ROb2RlKTsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS50b3RhbCA9IHRvdGFsOw0KDQogICAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0Lm1vZGlmeShuZWlnaGJvdXJOb2RlKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX09QRU47DQogICAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2gobmVpZ2hib3VyTm9kZSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQb2x5c0Fyb3VuZFJlc3VsdChyZXN1bHRSZWYsIHJlc3VsdFBhcmVudCwgcmVzdWx0Q29zdCk7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyBvcHRpbWl6ZWQgZm9yIGEgc21hbGwgc2VhcmNoIHJhZGl1cyBhbmQgc21hbGwgbnVtYmVyIG9mIHJlc3VsdCANCiAgICAgICAgLy8vIHBvbHlnb25zLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIENhbmRpZGF0ZSBwb2x5Z29ucyBhcmUgZm91bmQgYnkgc2VhcmNoaW5nIHRoZSBuYXZpZ2F0aW9uIGdyYXBoIGJlZ2lubmluZyBhdCANCiAgICAgICAgLy8vIHRoZSBzdGFydCBwb2x5Z29uLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSBzYW1lIGludGVyc2VjdGlvbiB0ZXN0IHJlc3RyaWN0aW9ucyB0aGF0IGFwcGx5IHRvIHRoZSBmaW5kUG9seXNBcm91bmRDaXJjbGUgDQogICAgICAgIC8vLyBtZWh0b2QgYXBwbGllcyB0byB0aGlzIG1ldGhvZC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwb1BvbHkgaXMgdXNlZCBhcyB0aGUgc3RhcnQgcG9Qb2x5IGZvciBjb3N0IGNhbGN1bGF0aW9ucy4gDQogICAgICAgIC8vLyBJdCBpcyBub3QgcHJvamVjdGVkIG9udG8gdGhlIHN1cmZhY2Ugb2YgdGhlIG1lc2gsIHNvIGl0cyB5LXZhbHVlIHdpbGwgZWZmZWN0IA0KICAgICAgICAvLy8gdGhlIGNvc3RzLg0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBJbnRlcnNlY3Rpb24gdGVzdHMgb2NjdXIgaW4gMkQuIEFsbCBwb2x5Z29ucyBhbmQgdGhlIHNlYXJjaCBjaXJjbGUgYXJlIA0KICAgICAgICAvLy8gcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lLiBTbyB0aGUgeS12YWx1ZSBvZiB0aGUgY2VudGVyIHBvUG9seSBkb2VzIG5vdCANCiAgICAgICAgLy8vIGVmZmVjdCBpbnRlcnNlY3Rpb24gdGVzdHMuDQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIElmIHRoZSByZXN1bHQgYXJyYXlzIGFyZSBpcyB0b28gc21hbGwgdG8gaG9sZCB0aGUgZW50aXJlIHJlc3VsdCBzZXQsIHRoZXkgd2lsbCANCiAgICAgICAgLy8vIGJlIGZpbGxlZCB0byBjYXBhY2l0eS4NCiAgICAgICAgLy8vIA0KICAgICAgICAvLy8gRmluZHMgdGhlIG5vbi1vdmVybGFwcGluZyBuYXZpZ2F0aW9uIHBvbHlnb25zIGluIHRoZSBsb2NhbCBuZWlnaGJvdXJob29kIGFyb3VuZCB0aGUgY2VudGVyIHBvc2l0aW9uLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXN0YXJ0UmVmCQlUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBwb2x5Z29uIHdoZXJlIHRoZSBzZWFyY2ggc3RhcnRzLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWNlbnRlclBvcwkJVGhlIGNlbnRlciBvZiB0aGUgcXVlcnkgY2lyY2xlLiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXJhZGl1cwkJCVRoZSByYWRpdXMgb2YgdGhlIHF1ZXJ5IGNpcmNsZS4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlmaWx0ZXIJCQlUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5Lg0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCXJlc3VsdFJlZgkJVGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBvbHlnb25zIHRvdWNoZWQgYnkgdGhlIGNpcmNsZS4NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlyZXN1bHRQYXJlbnQJVGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBhcmVudCBwb2x5Z29ucyBmb3IgZWFjaCByZXN1bHQuIA0KICAgICAgICAvLy8gIAkJCQkJCQkJWmVybyBpZiBhIHJlc3VsdCBwb2x5Z29uIGhhcyBubyBwYXJlbnQuIFtvcHRdDQogICAgICAgIC8vLyAgQHBhcmFtW291dF0JcmVzdWx0Q291bnQJCVRoZSBudW1iZXIgb2YgcG9seWdvbnMgZm91bmQuDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJbWF4UmVzdWx0CQlUaGUgbWF4aW11bSBudW1iZXIgb2YgcG9seWdvbnMgdGhlIHJlc3VsdCBhcnJheXMgY2FuIGhvbGQuDQogICAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZmluZExvY2FsTmVpZ2hib3VyaG9vZCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTG9jYWxOZWlnaGJvdXJob29kKHN0YXJ0UmVmLCBjZW50ZXJQb3MsIHJhZGl1cywgZmlsdGVyKSB7DQogICAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXQNCiAgICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkludmFsaWQgc3RhcnQgcmVmIik7DQogICAgICAgICAgdmFyIHJlc3VsdFJlZiA9IFtdOw0KICAgICAgICAgIHZhciByZXN1bHRQYXJlbnQgPSBbXTsNCiAgICAgICAgICB0aGlzLm1fdGlueU5vZGVQb29sID0gbmV3IE5vZGVQb29sKCk7DQogICAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHRoaXMubV90aW55Tm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7DQogICAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7DQogICAgICAgICAgdmFyIHN0YWNrID0gW107DQogICAgICAgICAgc3RhY2sucHVzaChzdGFydE5vZGUpOw0KICAgICAgICAgIHJlc3VsdFJlZi5wdXNoKHN0YXJ0Tm9kZS5pZCk7DQogICAgICAgICAgcmVzdWx0UGFyZW50LnB1c2goMCk7DQogICAgICAgICAgdmFyIHJhZGl1c1NxciA9IERldG91ckNvbW1vbi5zcXIocmFkaXVzKTsNCiAgICAgICAgICB2YXIgcGEgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSAqIDMpOw0KICAgICAgICAgIHZhciBwYiA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpICogMyk7DQoNCiAgICAgICAgICB3aGlsZSAoIXN0YWNrLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAvLyBQb3AgZnJvbnQuDQogICAgICAgICAgICB2YXIgY3VyTm9kZSA9IHN0YWNrLnBvcCgpOyAvLyBHZXQgbGV0IGFuZCB0aWxlLg0KICAgICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLg0KDQogICAgICAgICAgICB2YXIgY3VyUmVmID0gY3VyTm9kZS5pZDsNCiAgICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShjdXJSZWYpOw0KICAgICAgICAgICAgdmFyIGN1clRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgIHZhciBjdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07DQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjdXJQb2x5LmZpcnN0TGluazsgaSAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgaSA9IGN1clRpbGUubGlua3NbaV0ubmV4dCkgew0KICAgICAgICAgICAgICB2YXIgbGluayA9IGN1clRpbGUubGlua3NbaV07DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBsaW5rLnJlZjsgLy8gU2tpcCBpbnZhbGlkIG5laWdoYm91cnMuDQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91clJlZiA9PSAwKSBjb250aW51ZTsgLy8gU2tpcCBpZiBjYW5ub3QgYWxsb2NhIG1vcmUgbm9kZXMuDQoNCiAgICAgICAgICAgICAgdmFyIG5laWdoYm91ck5vZGUgPSB0aGlzLm1fdGlueU5vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmKTsNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91ck5vZGUgPT0gbnVsbCkgY29udGludWU7IC8vIFNraXAgdmlzaXRlZC4NCg0KICAgICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfQ0xPU0VEKSAhPSAwKSBjb250aW51ZTsgLy8gRXhwYW5kIHRvIG5laWdoYm91cg0KDQogICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKG5laWdoYm91clJlZik7DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIFNraXAgb2ZmLW1lc2ggY29ubmVjdGlvbnMuDQoNCiAgICAgICAgICAgICAgaWYgKG5laWdoYm91clBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSBjb250aW51ZTsgLy8gRG8gbm90IGFkdmFuY2UgaWYgdGhlIHBvbHlnb24gaXMgZXhjbHVkZWQgYnkgdGhlIGZpbHRlci4NCg0KICAgICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBGaW5kIGVkZ2UgYW5kIGNhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuDQoNCiAgICAgICAgICAgICAgdmFyIHBwID0gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGN1clJlZiwgY3VyUG9seSwgY3VyVGlsZSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJQb2x5LCBuZWlnaGJvdXJUaWxlLCAwLCAwKTsNCiAgICAgICAgICAgICAgdmFyIHZhID0gcHAubGVmdDsNCiAgICAgICAgICAgICAgdmFyIHZiID0gcHAucmlnaHQ7IC8vIElmIHRoZSBjaXJjbGUgaXMgbm90IHRvdWNoaW5nIHRoZSBuZXh0IHBvbHlnb24sIHNraXAgaXQuDQoNCiAgICAgICAgICAgICAgdmFyIGRpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJEMyhjZW50ZXJQb3MsIHZhLCB2Yik7DQogICAgICAgICAgICAgIHZhciBfZGlzdFNxcjMgPSBkaXN0c2VnWzBdOw0KICAgICAgICAgICAgICBpZiAoX2Rpc3RTcXIzID4gcmFkaXVzU3FyKSBjb250aW51ZTsgLy8gTWFyayBub2RlIHZpc2l0ZWQsIHRoaXMgaXMgZG9uZSBiZWZvcmUgdGhlIG92ZXJsYXAgdGVzdCBzbyB0aGF0DQogICAgICAgICAgICAgIC8vIHdlIHdpbGwgbm90IHZpc2l0IHRoZSBsZXQgYWdhaW4gaWYgdGhlIHRlc3QgZmFpbHMuDQoNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnBpZHggPSB0aGlzLm1fdGlueU5vZGVQb29sLmdldE5vZGVJZHgoY3VyTm9kZSk7IC8vIENoZWNrIHRoYXQgdGhlIHBvbHlnb24gZG9lcyBub3QgY29sbGlkZSB3aXRoIGV4aXN0aW5nIHBvbHlnb25zLg0KICAgICAgICAgICAgICAvLyBDb2xsZWN0IHZlcnRpY2VzIG9mIHRoZSBuZWlnaGJvdXIgcG9seS4NCg0KICAgICAgICAgICAgICB2YXIgbnBhID0gbmVpZ2hib3VyUG9seS52ZXJ0Q291bnQ7DQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBucGE7ICsraykgew0KICAgICAgICAgICAgICAgIGFycmF5Y29weSQ0KG5laWdoYm91clRpbGUuZGF0YS52ZXJ0cywgbmVpZ2hib3VyUG9seS52ZXJ0c1trXSAqIDMsIHBhLCBrICogMywgMyk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgb3ZlcmxhcCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVzdWx0UmVmLmxlbmd0aDsgKytqKSB7DQogICAgICAgICAgICAgICAgdmFyIHBhc3RSZWYgPSByZXN1bHRSZWZbal07IC8vIENvbm5lY3RlZCBwb2x5cyBkbyBub3Qgb3ZlcmxhcC4NCg0KICAgICAgICAgICAgICAgIHZhciBjb25uZWN0ZWQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIF9rMiA9IGN1clBvbHkuZmlyc3RMaW5rOyBfazIgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IF9rMiA9IGN1clRpbGUubGlua3NbX2syXS5uZXh0KSB7DQogICAgICAgICAgICAgICAgICBpZiAoY3VyVGlsZS5saW5rc1tfazJdLnJlZiA9PSBwYXN0UmVmKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChjb25uZWN0ZWQpIGNvbnRpbnVlOyAvLyBQb3RlbnRpYWxseSBvdmVybGFwcGluZy4NCg0KICAgICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBhc3RSZWYpOw0KICAgICAgICAgICAgICAgIHZhciBwYXN0VGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICAgIHZhciBwYXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgdmVydGljZXMgYW5kIHRlc3Qgb3ZlcmxhcA0KDQogICAgICAgICAgICAgICAgdmFyIG5wYiA9IHBhc3RQb2x5LnZlcnRDb3VudDsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIF9rMyA9IDA7IF9rMyA8IG5wYjsgKytfazMpIHsNCiAgICAgICAgICAgICAgICAgIGFycmF5Y29weSQ0KHBhc3RUaWxlLmRhdGEudmVydHMsIHBhc3RQb2x5LnZlcnRzW19rM10gKiAzLCBwYiwgX2szICogMywgMyk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi5vdmVybGFwUG9seVBvbHkyRChwYSwgbnBhLCBwYiwgbnBiKSkgew0KICAgICAgICAgICAgICAgICAgb3ZlcmxhcCA9IHRydWU7DQogICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAob3ZlcmxhcCkgY29udGludWU7DQogICAgICAgICAgICAgIHJlc3VsdFJlZi5wdXNoKG5laWdoYm91clJlZik7DQogICAgICAgICAgICAgIHJlc3VsdFBhcmVudC5wdXNoKGN1clJlZik7DQogICAgICAgICAgICAgIHN0YWNrLnB1c2gobmVpZ2hib3VyTm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG5ldyBGaW5kTG9jYWxOZWlnaGJvdXJob29kUmVzdWx0KHJlc3VsdFJlZiwgcmVzdWx0UGFyZW50KTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpbnNlcnRJbnRlcnZhbCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnNlcnRJbnRlcnZhbChpbnRzLCB0bWluLCB0bWF4LCByZWYpIHsNCiAgICAgICAgICAvLyBGaW5kIGluc2VydGlvbiBwb2ludC4NCiAgICAgICAgICB2YXIgaWR4ID0gMDsNCg0KICAgICAgICAgIHdoaWxlIChpZHggPCBpbnRzLmxlbmd0aCkgew0KICAgICAgICAgICAgaWYgKHRtYXggPD0gaW50c1tpZHhdLnRtaW4pIGJyZWFrOw0KICAgICAgICAgICAgaWR4Kys7DQogICAgICAgICAgfSAvLyBTdG9yZQ0KDQoNCiAgICAgICAgICBpbnRzLmFkZChpZHgsIG5ldyBTZWdJbnRlcnZhbChyZWYsIHRtaW4sIHRtYXgpKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJvciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcih2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwOw0KICAgICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmOw0KICAgICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTsNCiAgICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7DQogICAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdzsNCiAgICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93Ow0KICAgICAgICAgIHZhciBoID0gaGkxIHwgaGkyOw0KICAgICAgICAgIHZhciBsID0gbG93MSB8IGxvdzI7DQogICAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7DQogICAgICAgIH0gLy8vIEBwYXINCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBJZiB0aGUgQHAgc2VnbWVudFJlZnMgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB0aGVuIGFsbCBwb2x5Z29uIHNlZ21lbnRzIHdpbGwgYmUgcmV0dXJuZWQuIA0KICAgICAgICAvLy8gT3RoZXJ3aXNlIG9ubHkgdGhlIHdhbGwgc2VnbWVudHMgYXJlIHJldHVybmVkLg0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBBIHNlZ21lbnQgdGhhdCBpcyBub3JtYWxseSBhIHBvcnRhbCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXN1bHQgc2V0IGFzIGEgDQogICAgICAgIC8vLyB3YWxsIGlmIHRoZSBAcCBmaWx0ZXIgcmVzdWx0cyBpbiB0aGUgbmVpZ2hib3IgcG9seWdvbiBiZWNvb21taW5nIGltcGFzc2FibGUuDQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIFRoZSBAcCBzZWdtZW50VmVydHMgYW5kIEBwIHNlZ21lbnRSZWZzIGJ1ZmZlcnMgc2hvdWxkIG5vcm1hbGx5IGJlIHNpemVkIGZvciB0aGUgDQogICAgICAgIC8vLyBtYXhpbXVtIHNlZ21lbnRzIHBlciBwb2x5Z29uIG9mIHRoZSBzb3VyY2UgbmF2aWdhdGlvbiBtZXNoLg0KICAgICAgICAvLy8gDQogICAgICAgIC8vLyBSZXR1cm5zIHRoZSBzZWdtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBwb2x5Z29uLCBvcHRpb25hbGx5IGluY2x1ZGluZyBwb3J0YWxzLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCXJlZgkJCQlUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBwb2x5Z29uLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWZpbHRlcgkJCVRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuDQogICAgICAgIC8vLyAgQHBhcmFtW291dF0Jc2VnbWVudFZlcnRzCVRoZSBzZWdtZW50cy4gWyhheCwgYXksIGF6LCBieCwgYnksIGJ6KSAqIHNlZ21lbnRDb3VudF0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlzZWdtZW50UmVmcwkJVGhlIHJlZmVyZW5jZSBpZHMgb2YgZWFjaCBzZWdtZW50J3MgbmVpZ2hib3IgcG9seWdvbi4gDQogICAgICAgIC8vLyAgCQkJCQkJCQlPciB6ZXJvIGlmIHRoZSBzZWdtZW50IGlzIGEgd2FsbC4gW29wdF0gWyhwYXJlbnRSZWYpICogQHAgc2VnbWVudENvdW50XSANCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQlzZWdtZW50Q291bnQJVGhlIG51bWJlciBvZiBzZWdtZW50cyByZXR1cm5lZC4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQltYXhTZWdtZW50cwkJVGhlIG1heGltdW0gbnVtYmVyIG9mIHNlZ21lbnRzIHRoZSByZXN1bHQgYXJyYXlzIGNhbiBob2xkLg0KICAgICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFBvbHlXYWxsU2VnbWVudHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9seVdhbGxTZWdtZW50cyhyZWYsIHN0b3JlUG9ydGFscywgZmlsdGVyKSB7DQogICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHJlZik7DQogICAgICAgICAgdmFyIHRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICB2YXIgcG9seSA9IHRpbGVBbmRQb2x5WzFdOw0KICAgICAgICAgIHZhciBzZWdtZW50UmVmcyA9IFtdOw0KICAgICAgICAgIHZhciBzZWdtZW50VmVydHMgPSBbXTsNCiAgICAgICAgICB2YXIgaW50cyA9IG5ldyBBcnJheSgxNik7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IHBvbHkudmVydENvdW50IC0gMTsgaSA8IHBvbHkudmVydENvdW50OyBqID0gaSsrKSB7DQogICAgICAgICAgICAvLyBTa2lwIG5vbi1zb2xpZCBlZGdlcy4NCiAgICAgICAgICAgIGludHMgPSBbXTsNCg0KICAgICAgICAgICAgaWYgKChwb2x5Lm5laXNbal0gJiBOYXZNZXNoLkRUX0VYVF9MSU5LKSAhPSAwKSB7DQogICAgICAgICAgICAgIC8vIFRpbGUgYm9yZGVyLg0KICAgICAgICAgICAgICBmb3IgKHZhciBrID0gcG9seS5maXJzdExpbms7IGsgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IGsgPSB0aWxlLmxpbmtzW2tdLm5leHQpIHsNCiAgICAgICAgICAgICAgICB2YXIgbGluayA9IHRpbGUubGlua3Nba107DQoNCiAgICAgICAgICAgICAgICBpZiAobGluay5lZGdlID09IGopIHsNCiAgICAgICAgICAgICAgICAgIGlmIChsaW5rLnJlZiAhPSAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGxpbmsucmVmKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5laVRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5laVBvbHkgPSB0aWxlQW5kUG9seVsxXTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBhc3NGaWx0ZXIobGluay5yZWYsIG5laVRpbGUsIG5laVBvbHkpKSB7DQogICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0SW50ZXJ2YWwoaW50cywgbGluay5ibWluLCBsaW5rLmJtYXgsIGxpbmsucmVmKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgLy8gSW50ZXJuYWwgZWRnZQ0KICAgICAgICAgICAgICB2YXIgbmVpUmVmID0gMDsNCg0KICAgICAgICAgICAgICBpZiAocG9seS5uZWlzW2pdICE9IDApIHsNCiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gcG9seS5uZWlzW2pdIC0gMTsNCiAgICAgICAgICAgICAgICBuZWlSZWYgPSB0aGlzLm9yKHRoaXMubV9uYXYuZ2V0UG9seVJlZkJhc2UodGlsZSksIGlkeCk7DQogICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIucGFzc0ZpbHRlcihuZWlSZWYsIHRpbGUsIHRpbGUuZGF0YS5wb2x5c1tpZHhdKSkgbmVpUmVmID0gMDsNCiAgICAgICAgICAgICAgfSAvLyBJZiB0aGUgZWRnZSBsZWFkcyB0byBhbm90aGVyIHBvbHlnb24gYW5kIHBvcnRhbHMgYXJlIG5vdCBzdG9yZWQsIHNraXAuDQoNCg0KICAgICAgICAgICAgICBpZiAobmVpUmVmICE9IDAgJiYgIXN0b3JlUG9ydGFscykgY29udGludWU7DQoNCiAgICAgICAgICAgICAgdmFyIF92ajIgPSBwb2x5LnZlcnRzW2pdICogMzsNCg0KICAgICAgICAgICAgICB2YXIgX3ZpMiA9IHBvbHkudmVydHNbaV0gKiAzOw0KDQogICAgICAgICAgICAgIHZhciBzZWcgPSBuZXcgQXJyYXkoNik7DQogICAgICAgICAgICAgIGFycmF5Y29weSQ0KHRpbGUuZGF0YS52ZXJ0cywgX3ZqMiwgc2VnLCAwLCAzKTsNCiAgICAgICAgICAgICAgYXJyYXljb3B5JDQodGlsZS5kYXRhLnZlcnRzLCBfdmkyLCBzZWcsIDMsIDMpOw0KICAgICAgICAgICAgICBzZWdtZW50VmVydHMucHVzaChzZWcpOw0KICAgICAgICAgICAgICBzZWdtZW50UmVmcy5wdXNoKG5laVJlZik7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBBZGQgc2VudGluZWxzDQoNCg0KICAgICAgICAgICAgaW5zZXJ0SW50ZXJ2YWwoaW50cywgLTEsIDAsIDApOw0KICAgICAgICAgICAgaW5zZXJ0SW50ZXJ2YWwoaW50cywgMjU1LCAyNTYsIDApOyAvLyBTdG9yZSBzZWdtZW50cy4NCg0KICAgICAgICAgICAgdmFyIHZqID0gcG9seS52ZXJ0c1tqXSAqIDM7DQogICAgICAgICAgICB2YXIgdmkgPSBwb2x5LnZlcnRzW2ldICogMzsNCg0KICAgICAgICAgICAgZm9yICh2YXIgX2s0ID0gMTsgX2s0IDwgaW50cy5sZW5ndGg7ICsrX2s0KSB7DQogICAgICAgICAgICAgIC8vIFBvcnRhbCBzZWdtZW50Lg0KICAgICAgICAgICAgICBpZiAoc3RvcmVQb3J0YWxzICYmIGludHNbX2s0XS5yZWYgIT0gMCkgew0KICAgICAgICAgICAgICAgIHRtaW4gPSBpbnRzW19rNF0udG1pbiAvIDI1NS4wOw0KICAgICAgICAgICAgICAgIHRtYXggPSBpbnRzW19rNF0udG1heCAvIDI1NS4wOw0KDQogICAgICAgICAgICAgICAgdmFyIF9zZWcgPSBuZXcgQXJyYXkoNik7DQoNCiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNCh2TGVycDQodGlsZS5kYXRhLnZlcnRzLCB2aiwgdmksIHRtaW4pLCAwLCBfc2VnLCAwLCAzKTsNCiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNCh2TGVycDQodGlsZS5kYXRhLnZlcnRzLCB2aiwgdmksIHRtYXgpLCAwLCBfc2VnLCAzLCAzKTsNCiAgICAgICAgICAgICAgICBzZWdtZW50VmVydHMucHVzaChfc2VnKTsNCiAgICAgICAgICAgICAgICBzZWdtZW50UmVmcy5wdXNoKGludHNbX2s0XS5yZWYpOw0KICAgICAgICAgICAgICB9IC8vIFdhbGwgc2VnbWVudC4NCg0KDQogICAgICAgICAgICAgIHZhciBpbWluID0gaW50c1tfazQgLSAxXS50bWF4Ow0KICAgICAgICAgICAgICB2YXIgaW1heCA9IGludHNbX2s0XS50bWluOw0KDQogICAgICAgICAgICAgIGlmIChpbWluICE9IGltYXgpIHsNCiAgICAgICAgICAgICAgICB0bWluID0gaW1pbiAvIDI1NS4wOw0KICAgICAgICAgICAgICAgIHRtYXggPSBpbWF4IC8gMjU1LjA7DQoNCiAgICAgICAgICAgICAgICB2YXIgX3NlZzIgPSBuZXcgQXJyYXkoNik7DQoNCiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNCh2TGVycDQodGlsZS5kYXRhLnZlcnRzLCB2aiwgdmksIHRtaW4pLCAwLCBfc2VnMiwgMCwgMyk7DQogICAgICAgICAgICAgICAgYXJyYXljb3B5JDQodkxlcnA0KHRpbGUuZGF0YS52ZXJ0cywgdmosIHZpLCB0bWF4KSwgMCwgX3NlZzIsIDMsIDMpOw0KICAgICAgICAgICAgICAgIHNlZ21lbnRWZXJ0cy5wdXNoKF9zZWcyKTsNCiAgICAgICAgICAgICAgICBzZWdtZW50UmVmcy5wdXNoKDApOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIG5ldyBHZXRQb2x5V2FsbFNlZ21lbnRzUmVzdWx0KHNlZ21lbnRWZXJ0cywgc2VnbWVudFJlZnMpOw0KICAgICAgICB9IC8vLyBAcGFyDQogICAgICAgIC8vLw0KICAgICAgICAvLy8gQHAgaGl0UG9zIGlzIG5vdCBhZGp1c3RlZCB1c2luZyB0aGUgaGVpZ2h0IGRldGFpbCBkYXRhLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIEBwIGhpdERpc3Qgd2lsbCBlcXVhbCB0aGUgc2VhcmNoIHJhZGl1cyBpZiB0aGVyZSBpcyBubyB3YWxsIHdpdGhpbiB0aGUgDQogICAgICAgIC8vLyByYWRpdXMuIEluIHRoaXMgY2FzZSB0aGUgdmFsdWVzIG9mIEBwIGhpdFBvcyBhbmQgQHAgaGl0Tm9ybWFsIGFyZQ0KICAgICAgICAvLy8gdW5kZWZpbmVkLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSBub3JtYWwgd2lsbCBiZWNvbWUgdW5wcmVkaWNhYmxlIGlmIEBwIGhpdERpc3QgaXMgYSB2ZXJ5IHNtYWxsIG51bWJlci4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBGaW5kcyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3BlY2lmaWVkIHBvc2l0aW9uIHRvIHRoZSBuZWFyZXN0IHBvbHlnb24gd2FsbC4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlzdGFydFJlZgkJVGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiBjb250YWluaW5nIEBwIGNlbnRlclBvcy4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQljZW50ZXJQb3MJCVRoZSBjZW50ZXIgb2YgdGhlIHNlYXJjaCBjaXJjbGUuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJbWF4UmFkaXVzCQlUaGUgcmFkaXVzIG9mIHRoZSBzZWFyY2ggY2lyY2xlLg0KICAgICAgICAvLy8gIEBwYXJhbVtpbl0JCWZpbHRlcgkJCVRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuDQogICAgICAgIC8vLyAgQHBhcmFtW291dF0JaGl0RGlzdAkJCVRoZSBkaXN0YW5jZSB0byB0aGUgbmVhcmVzdCB3YWxsIGZyb20gQHAgY2VudGVyUG9zLg0KICAgICAgICAvLy8gIEBwYXJhbVtvdXRdCWhpdFBvcwkJCVRoZSBuZWFyZXN0IHBvc2l0aW9uIG9uIHRoZSB3YWxsIHRoYXQgd2FzIGhpdC4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vICBAcGFyYW1bb3V0XQloaXROb3JtYWwJCVRoZSBub3JtYWxpemVkIHJheSBmb3JtZWQgZnJvbSB0aGUgd2FsbCBwb1BvbHkgdG8gdGhlIA0KICAgICAgICAvLy8gIAkJCQkJCQkJc291cmNlIHBvaW50LiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmREaXN0YW5jZVRvV2FsbCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRGlzdGFuY2VUb1dhbGwoc3RhcnRSZWYsIGNlbnRlclBvcywgbWF4UmFkaXVzLCBmaWx0ZXIpIHsNCiAgICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dA0KICAgICAgICAgIGlmIChzdGFydFJlZiA9PSAwIHx8ICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiSW52YWxpZCBzdGFydCByZWYiKTsNCiAgICAgICAgICB0aGlzLm1fbm9kZVBvb2wgPSBbXTsNCiAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QgPSBbXTsNCiAgICAgICAgICB2YXIgc3RhcnROb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUoc3RhcnRSZWYpOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShzdGFydE5vZGUucG9zLCBjZW50ZXJQb3MpOw0KICAgICAgICAgIHN0YXJ0Tm9kZS5waWR4ID0gMDsNCiAgICAgICAgICBzdGFydE5vZGUuY29zdCA9IDA7DQogICAgICAgICAgc3RhcnROb2RlLnRvdGFsID0gMDsNCiAgICAgICAgICBzdGFydE5vZGUuaWQgPSBzdGFydFJlZjsNCiAgICAgICAgICBzdGFydE5vZGUuZmxhZ3MgPSBOb2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChzdGFydE5vZGUpOw0KICAgICAgICAgIHJhZGl1c1NxciA9IERldG91ckNvbW1vbi5zcXIobWF4UmFkaXVzKTsNCiAgICAgICAgICB2YXIgaGl0UG9zID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIHZhciBiZXN0dmogPSBudWxsOw0KICAgICAgICAgIHZhciBiZXN0dmkgPSBudWxsOw0KDQogICAgICAgICAgd2hpbGUgKCF0aGlzLm1fb3Blbkxpc3QubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIHZhciBiZXN0Tm9kZSA9IHRoaXMubV9vcGVuTGlzdC5wb3AoKTsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzICY9IH5Ob2RlLkRUX05PREVfT1BFTjsNCiAgICAgICAgICAgIGJlc3ROb2RlLmZsYWdzIHw9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7IC8vIEdldCBsZXQgYW5kIHRpbGUuDQogICAgICAgICAgICAvLyBUaGUgQVBJIGlucHV0IGhhcyBiZWVuIGNoZWtlZCBhbHJlYWR5LCBza2lwIGNoZWNraW5nIGludGVybmFsIGRhdGEuDQoNCiAgICAgICAgICAgIHZhciBiZXN0UmVmID0gYmVzdE5vZGUuaWQ7DQogICAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUoYmVzdFJlZik7DQogICAgICAgICAgICB2YXIgYmVzdFRpbGUgPSB0aWxlQW5kUG9seVswXTsNCiAgICAgICAgICAgIHZhciBiZXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgcGFyZW50IGxldCBhbmQgdGlsZS4NCg0KICAgICAgICAgICAgdmFyIHBhcmVudFJlZiA9IDA7DQogICAgICAgICAgICB2YXIgcGFyZW50VGlsZSA9IG51bGw7DQogICAgICAgICAgICB2YXIgcGFyZW50UG9seSA9IG51bGw7DQogICAgICAgICAgICBpZiAoYmVzdE5vZGUucGlkeCAhPSAwKSBwYXJlbnRSZWYgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KGJlc3ROb2RlLnBpZHgpLmlkOw0KDQogICAgICAgICAgICBpZiAocGFyZW50UmVmICE9IDApIHsNCiAgICAgICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUocGFyZW50UmVmKTsNCiAgICAgICAgICAgICAgcGFyZW50VGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICBwYXJlbnRQb2x5ID0gdGlsZUFuZFBvbHlbMV07DQogICAgICAgICAgICB9IC8vIEhpdCB0ZXN0IHdhbGxzLg0KDQoNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gYmVzdFBvbHkudmVydENvdW50IC0gMTsgaSA8IGJlc3RQb2x5LnZlcnRDb3VudDsgaiA9IGkrKykgew0KICAgICAgICAgICAgICAvLyBTa2lwIG5vbi1zb2xpZCBlZGdlcy4NCiAgICAgICAgICAgICAgaWYgKChiZXN0UG9seS5uZWlzW2pdICYgTmF2TWVzaC5EVF9FWFRfTElOSykgIT0gMCkgew0KICAgICAgICAgICAgICAgIC8vIFRpbGUgYm9yZGVyLg0KICAgICAgICAgICAgICAgIHZhciBzb2xpZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBrICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBrID0gYmVzdFRpbGUubGlua3Nba10ubmV4dCkgew0KICAgICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBiZXN0VGlsZS5saW5rc1trXTsNCg0KICAgICAgICAgICAgICAgICAgaWYgKGxpbmsuZWRnZSA9PSBqKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChsaW5rLnJlZiAhPSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUobGluay5yZWYpOw0KICAgICAgICAgICAgICAgICAgICAgIHZhciBuZWlUaWxlID0gdGlsZUFuZFBvbHlbMF07DQogICAgICAgICAgICAgICAgICAgICAgdmFyIG5laVBvbHkgPSB0aWxlQW5kUG9seVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBhc3NGaWx0ZXIobGluay5yZWYsIG5laVRpbGUsIG5laVBvbHkpKSBzb2xpZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCFzb2xpZCkgY29udGludWU7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmVzdFBvbHkubmVpc1tqXSAhPSAwKSB7DQogICAgICAgICAgICAgICAgLy8gSW50ZXJuYWwgZWRnZQ0KICAgICAgICAgICAgICAgIHZhciBpZHggPSBiZXN0UG9seS5uZWlzW2pdIC0gMTsNCiAgICAgICAgICAgICAgICB2YXIgcmVmID0gdGhpcy5tX25hdi5nZXRQb2x5UmVmQmFzZShiZXN0VGlsZSkgfCBpZHg7DQogICAgICAgICAgICAgICAgaWYgKGZpbHRlci5wYXNzRmlsdGVyKHJlZiwgYmVzdFRpbGUsIGJlc3RUaWxlLmRhdGEucG9seXNbaWR4XSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB9IC8vIENhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuDQoNCg0KICAgICAgICAgICAgICB2YXIgdmogPSBiZXN0UG9seS52ZXJ0c1tqXSAqIDM7DQogICAgICAgICAgICAgIHZhciB2aSA9IGJlc3RQb2x5LnZlcnRzW2ldICogMzsNCiAgICAgICAgICAgICAgdmFyIGRpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJENChjZW50ZXJQb3MsIGJlc3RUaWxlLmRhdGEudmVydHMsIHZqLCB2aSk7DQogICAgICAgICAgICAgIGRpc3RTcXIgPSBkaXN0c2VnWzBdOw0KICAgICAgICAgICAgICB0c2VnID0gZGlzdHNlZ1sxXTsgLy8gRWRnZSBpcyB0b28gZmFyLCBza2lwLg0KDQogICAgICAgICAgICAgIGlmIChkaXN0U3FyID4gcmFkaXVzU3FyKSBjb250aW51ZTsgLy8gSGl0IHdhbGwsIHVwZGF0ZSByYWRpdXMuDQoNCiAgICAgICAgICAgICAgcmFkaXVzU3FyID0gZGlzdFNxcjsgLy8gQ2FsY3VsYXRlIGhpdCBwb3MuDQoNCiAgICAgICAgICAgICAgaGl0UG9zWzBdID0gYmVzdFRpbGUuZGF0YS52ZXJ0c1t2al0gKyAoYmVzdFRpbGUuZGF0YS52ZXJ0c1t2aV0gLSBiZXN0VGlsZS5kYXRhLnZlcnRzW3ZqXSkgKiB0c2VnOw0KICAgICAgICAgICAgICBoaXRQb3NbMV0gPSBiZXN0VGlsZS5kYXRhLnZlcnRzW3ZqICsgMV0gKyAoYmVzdFRpbGUuZGF0YS52ZXJ0c1t2aSArIDFdIC0gYmVzdFRpbGUuZGF0YS52ZXJ0c1t2aiArIDFdKSAqIHRzZWc7DQogICAgICAgICAgICAgIGhpdFBvc1syXSA9IGJlc3RUaWxlLmRhdGEudmVydHNbdmogKyAyXSArIChiZXN0VGlsZS5kYXRhLnZlcnRzW3ZpICsgMl0gLSBiZXN0VGlsZS5kYXRhLnZlcnRzW3ZqICsgMl0pICogdHNlZzsNCiAgICAgICAgICAgICAgYmVzdHZqID0gbmV3IFZlY3RvclB0cihiZXN0VGlsZS5kYXRhLnZlcnRzLCB2aik7DQogICAgICAgICAgICAgIGJlc3R2aSA9IG5ldyBWZWN0b3JQdHIoYmVzdFRpbGUuZGF0YS52ZXJ0cywgdmkpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKHZhciBfaTkgPSBiZXN0UG9seS5maXJzdExpbms7IF9pOSAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgX2k5ID0gYmVzdFRpbGUubGlua3NbX2k5XS5uZXh0KSB7DQogICAgICAgICAgICAgIHZhciBfbGluayA9IGJlc3RUaWxlLmxpbmtzW19pOV07DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBfbGluay5yZWY7IC8vIFNraXAgaW52YWxpZCBuZWlnaGJvdXJzIGFuZCBkbyBub3QgZm9sbG93IGJhY2sgdG8gcGFyZW50Lg0KDQogICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gMCB8fCBuZWlnaGJvdXJSZWYgPT0gcGFyZW50UmVmKSBjb250aW51ZTsgLy8gRXhwYW5kIHRvIG5laWdoYm91ci4NCg0KICAgICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IHRpbGVBbmRQb2x5WzBdOw0KICAgICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBTa2lwIG9mZi1tZXNoIGNvbm5lY3Rpb25zLg0KDQogICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJQb2x5LmdldFR5cGUoKSA9PSBQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTikgY29udGludWU7IC8vIENhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuDQoNCiAgICAgICAgICAgICAgdmFyIHZhID0gYmVzdFBvbHkudmVydHNbX2xpbmsuZWRnZV0gKiAzOw0KICAgICAgICAgICAgICB2YXIgdmIgPSBiZXN0UG9seS52ZXJ0c1soX2xpbmsuZWRnZSArIDEpICUgYmVzdFBvbHkudmVydENvdW50XSAqIDM7DQoNCiAgICAgICAgICAgICAgdmFyIF9kaXN0c2VnID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDQoY2VudGVyUG9zLCBiZXN0VGlsZS5kYXRhLnZlcnRzLCB2YSwgdmIpOw0KDQogICAgICAgICAgICAgIGRpc3RTcXIgPSBfZGlzdHNlZ1swXTsgLy8gSWYgdGhlIGNpcmNsZSBpcyBub3QgdG91Y2hpbmcgdGhlIG5leHQgcG9seWdvbiwgc2tpcCBpdC4NCg0KICAgICAgICAgICAgICBpZiAoZGlzdFNxciA+IHJhZGl1c1NxcikgY29udGludWU7DQogICAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KSkgY29udGludWU7DQogICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmKTsNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX0NMT1NFRCkgIT0gMCkgY29udGludWU7IC8vIENvc3QNCg0KICAgICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSB7DQogICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5wb3MgPSB0aGlzLmdldEVkZ2VNaWRQb2ludDYoYmVzdFJlZiwgYmVzdFBvbHksIGJlc3RUaWxlLCBuZWlnaGJvdXJSZWYsIG5laWdoYm91clBvbHksIG5laWdoYm91clRpbGUpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgdG90YWwgPSBiZXN0Tm9kZS50b3RhbCArIERldG91ckNvbW1vbi52RGlzdDIoYmVzdE5vZGUucG9zLCBuZWlnaGJvdXJOb2RlLnBvcyk7IC8vIFRoZSBub2RlIGlzIGFscmVhZHkgaW4gb3BlbiBsaXN0IGFuZCB0aGUgbmV3IHJlc3VsdCBpcyB3b3JzZSwgc2tpcC4NCg0KICAgICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCAmJiB0b3RhbCA+PSBuZWlnaGJvdXJOb2RlLnRvdGFsKSBjb250aW51ZTsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5pZCA9IG5laWdoYm91clJlZjsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyA9IG5laWdoYm91ck5vZGUuZmxhZ3MgJiB+Tm9kZS5EVF9OT0RFX0NMT1NFRDsNCiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpOw0KICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gdG90YWw7DQoNCiAgICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QubW9kaWZ5KG5laWdoYm91ck5vZGUpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgfD0gTm9kZS5EVF9OT0RFX09QRU47DQogICAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2gobmVpZ2hib3VyTm9kZSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIENhbGMgaGl0IG5vcm1hbC4NCg0KDQogICAgICAgICAgdmFyIGhpdE5vcm1hbCA9IG5ldyBBcnJheSgzKTsNCg0KICAgICAgICAgIGlmIChiZXN0dmkgIT0gbnVsbCAmJiBiZXN0dmogIT0gbnVsbCkgew0KICAgICAgICAgICAgdmFyIHRhbmdlbnQgPSBEZXRvdXJDb21tb24udlN1YihiZXN0dmksIGJlc3R2aik7DQogICAgICAgICAgICBoaXROb3JtYWxbMF0gPSB0YW5nZW50WzJdOw0KICAgICAgICAgICAgaGl0Tm9ybWFsWzFdID0gMDsNCiAgICAgICAgICAgIGhpdE5vcm1hbFsyXSA9IC10YW5nZW50WzBdOw0KICAgICAgICAgICAgdk5vcm1hbGl6ZShoaXROb3JtYWwpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBuZXcgRmluZERpc3RhbmNlVG9XYWxsUmVzdWx0KE1hdGguc3FydChyYWRpdXNTcXIpLCBoaXRQb3MsIGhpdE5vcm1hbCk7DQogICAgICAgIH0gLy8vIFJldHVybnMgdHJ1ZSBpZiB0aGUgcG9seWdvbiByZWZlcmVuY2UgaXMgdmFsaWQgYW5kIHBhc3NlcyB0aGUgZmlsdGVyIHJlc3RyaWN0aW9ucy4NCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlyZWYJCQlUaGUgcG9seWdvbiByZWZlcmVuY2UgdG8gY2hlY2suDQogICAgICAgIC8vLyAgQHBhcmFtW2luXQkJZmlsdGVyCQlUaGUgZmlsdGVyIHRvIGFwcGx5Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImlzVmFsaWRQb2x5UmVmIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWRQb2x5UmVmKHJlZiwgZmlsdGVyKSB7DQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihyZWYpOyAvLyBJZiBjYW5ub3QgcGFzcyBmaWx0ZXIsIGFzc3VtZSBmbGFncyBoYXMgY2hhbmdlZCBhbmQgYm91bmRhcnkgaXMgaW52YWxpZC4NCg0KICAgICAgICAgICAgaWYgKGZpbHRlci5wYXNzRmlsdGVyKHJlZiwgdGlsZUFuZFBvbHlbMF0sIHRpbGVBbmRQb2x5WzFdKSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgfSBjYXRjaCAoZSkgey8vIElmIGNhbm5vdCBnZXQgcG9seWdvbiwgYXNzdW1lIGl0IGRvZXMgbm90IGV4aXN0cyBhbmQgYm91bmRhcnkgaXMgaW52YWxpZC4NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0gLy8vIEdldHMgdGhlIG5hdmlnYXRpb24gbWVzaCB0aGUgcXVlcnkgb2JqZWN0IGlzIHVzaW5nLg0KICAgICAgICAvLy8gQHJldHVybiBUaGUgbmF2aWdhdGlvbiBtZXNoIHRoZSBxdWVyeSBvYmplY3QgaXMgdXNpbmcuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0QXR0YWNoZWROYXZNZXNoIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEF0dGFjaGVkTmF2TWVzaCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX25hdjsNCiAgICAgICAgfQ0KICAgICAgICAvKg0KICAgICAgICAvLy8gQHBhcg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSBjbG9zZWQgbGlzdCBpcyB0aGUgbGlzdCBvZiBwb2x5Z29ucyB0aGF0IHdlcmUgZnVsbHkgZXZhbHVhdGVkIGR1cmluZyANCiAgICAgICAgLy8vIHRoZSBsYXN0IG5hdmlnYXRpb24gZ3JhcGggc2VhcmNoLiAoQSogb3IgRGlqa3N0cmEpDQogICAgICAgIC8vLyANCiAgICAgICAgLy8vIFJldHVybnMgdHJ1ZSBpZiB0aGUgcG9seWdvbiByZWZlcmVuY2UgaXMgaW4gdGhlIGNsb3NlZCBsaXN0LiANCiAgICAgICAgLy8vICBAcGFyYW1baW5dCQlyZWYJCVRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHBvbHlnb24gdG8gY2hlY2suDQogICAgICAgIC8vLyBAcmV0dXJucyBUcnVlIGlmIHRoZSBwb2x5Z29uIGlzIGluIGNsb3NlZCBsaXN0Lg0KICAgICAgICBsZXQgaXNJbkNsb3NlZExpc3QobGV0IHJlZikNCiAgICAgICAgew0KICAgICAgICAJaWYgKG1fbm9kZVBvb2wgPT0gbnVsbCkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAJDQogICAgICAgIAlsZXQgbm9kZXNbRFRfTUFYX1NUQVRFU19QRVJfTk9ERV07DQogICAgICAgIAlsZXQgbj0gbV9ub2RlUG9vbD0+ZmluZE5vZGVzKHJlZiwgbm9kZXMsIERUX01BWF9TVEFURVNfUEVSX05PREUpOw0KICAgICAgICAJDQogICAgICAgIAlmb3IgKGxldCBpPTA7IGk8bjsgaSsrKQ0KICAgICAgICAJew0KICAgICAgICAJCWlmIChub2Rlc1tpXT0+ZmxhZ3MgJiBEVF9OT0RFX0NMT1NFRCkNCiAgICAgICAgCQkJcmV0dXJuIHRydWU7DQogICAgICAgIAl9CQkNCiAgICAgICAgCQ0KICAgICAgICAJcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIAkNCiAgICAgICAgKi8NCg0KICAgICAgICAvKioNCiAgICAgICAgICogR2V0cyBhIHBhdGggZnJvbSB0aGUgZXhwbG9yZWQgbm9kZXMgaW4gdGhlIHByZXZpb3VzIHNlYXJjaC4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSBlbmRSZWYNCiAgICAgICAgICogICAgICAgICAgICBUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBlbmQgcG9seWdvbi4NCiAgICAgICAgICogQHJldHVybnMgQW4gb3JkZXJlZCBsaXN0IG9mIHBvbHlnb24gcmVmZXJlbmNlcyByZXByZXNlbnRpbmcgdGhlIHBhdGguIChTdGFydCB0byBlbmQuKQ0KICAgICAgICAgKiBAcmVtYXJrcyBUaGUgcmVzdWx0IG9mIHRoaXMgZnVuY3Rpb24gZGVwZW5kcyBvbiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXJ5IG9iamVjdC4gRm9yIHRoYXQgcmVhc29uIGl0IHNob3VsZCBvbmx5IGJlDQogICAgICAgICAqICAgICAgICAgIHVzZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgb25lIG9mIHRoZSB0d28gRGlqa3N0cmEgc2VhcmNoZXMsIGZpbmRQb2x5c0Fyb3VuZENpcmNsZSBvciBmaW5kUG9seXNBcm91bmRTaGFwZS4NCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UGF0aEZyb21EaWprc3RyYVNlYXJjaCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXRoRnJvbURpamtzdHJhU2VhcmNoKGVuZFJlZikgew0KICAgICAgICAgIGlmICghdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihlbmRSZWYpKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIGVuZCByZWYiKTsNCiAgICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLm1fbm9kZVBvb2wuZmluZE5vZGVzKGVuZFJlZik7DQogICAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCAhPSAxKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIGVuZCByZWYiKTsNCiAgICAgICAgICB2YXIgZW5kTm9kZSA9IG5vZGVzWzBdOw0KICAgICAgICAgIGlmICgoZW5kTm9kZS5mbGFncyAmIERUX05PREVfQ0xPU0VEKSA9PSAwKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJJbnZhbGlkIGVuZCByZWYiKTsNCiAgICAgICAgICByZXR1cm4gZ2V0UGF0aFRvTm9kZShlbmROb2RlKTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogR2V0cyB0aGUgcGF0aCBsZWFkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZW5kIG5vZGUuDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFBhdGhUb05vZGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGF0aFRvTm9kZShlbmROb2RlKSB7DQogICAgICAgICAgdmFyIHBhdGggPSBbXTsgLy8gUmV2ZXJzZSB0aGUgcGF0aC4NCg0KICAgICAgICAgIHZhciBjdXJOb2RlID0gZW5kTm9kZTsNCg0KICAgICAgICAgIGRvIHsNCiAgICAgICAgICAgIHBhdGguYWRkKDAsIGN1ck5vZGUuaWQpOw0KICAgICAgICAgICAgY3VyTm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgoY3VyTm9kZS5waWR4KTsNCiAgICAgICAgICB9IHdoaWxlIChjdXJOb2RlICE9IG51bGwpOw0KDQogICAgICAgICAgcmV0dXJuIHBhdGg7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIE5hdk1lc2hRdWVyeTsNCiAgICB9KCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCAiRFRfRklORFBBVEhfQU5ZX0FOR0xFIiwgMHgwMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCAiRFRfUkFZQ0FTVF9VU0VfQ09TVFMiLCAweDAxKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksICJEVF9TVFJBSUdIVFBBVEhfU1RBUlQiLCAweDAxKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksICJEVF9TVFJBSUdIVFBBVEhfRU5EIiwgMHgwMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCAiRFRfU1RSQUlHSFRQQVRIX09GRk1FU0hfQ09OTkVDVElPTiIsIDB4MDQpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2hRdWVyeSwgIkRUX1NUUkFJR0hUUEFUSF9BUkVBX0NST1NTSU5HUyIsIDB4MDEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2hRdWVyeSwgIkRUX1NUUkFJR0hUUEFUSF9BTExfQ1JPU1NJTkdTIiwgMHgwMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCAiSF9TQ0FMRSIsIDAuOTk5KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksICJGUmFuZCIsIGZ1bmN0aW9uIEZSYW5kKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZSYW5kKTsNCg0KICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCk7DQogICAgfSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCAicyIsIDEuMCAvIDI1NS4wKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksICJTZWdJbnRlcm52YWwiLCAoX3RlbXAkMyA9IGZ1bmN0aW9uIFNlZ0ludGVydmFsKHJlZiwgdG1pbiwgdG1heCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlZ0ludGVydmFsKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZWYiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRtaW4iLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRtYXgiLCB2b2lkIDApOw0KDQogICAgICB0aGlzLnJlZiA9IHJlZjsNCiAgICAgIHRoaXMudG1pbiA9IHRtaW47DQogICAgICB0aGlzLnRtYXggPSB0bWF4Ow0KICAgIH0sIF90ZW1wJDMpKTsNCg0KICAgIHZhciBPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcyA9IC8vLzwgZ3JpZA0KICAgIC8vLzwgYWRhcHRpdmUNCiAgICAvLy88IGFkYXB0aXZlDQogICAgLy8vPCBhZGFwdGl2ZQ0KICAgIGZ1bmN0aW9uIE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZWxCaWFzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2VpZ2h0RGVzVmVsIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2VpZ2h0Q3VyVmVsIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAid2VpZ2h0U2lkZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIndlaWdodFRvaSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImhvcml6VGltZSIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdyaWRTaXplIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYWRhcHRpdmVEaXZzIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYWRhcHRpdmVSaW5ncyIsIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFkYXB0aXZlRGVwdGgiLCAwKTsNCg0KICAgICAgdGhpcy52ZWxCaWFzID0gMC40Ow0KICAgICAgdGhpcy53ZWlnaHREZXNWZWwgPSAyLjA7DQogICAgICB0aGlzLndlaWdodEN1clZlbCA9IDAuNzU7DQogICAgICB0aGlzLndlaWdodFNpZGUgPSAwLjc1Ow0KICAgICAgdGhpcy53ZWlnaHRUb2kgPSAyLjU7DQogICAgICB0aGlzLmhvcml6VGltZSA9IDIuNTsNCiAgICAgIHRoaXMuZ3JpZFNpemUgPSAzMzsNCiAgICAgIHRoaXMuYWRhcHRpdmVEaXZzID0gNzsNCiAgICAgIHRoaXMuYWRhcHRpdmVSaW5ncyA9IDI7DQogICAgICB0aGlzLmFkYXB0aXZlRGVwdGggPSA1Ow0KICAgIH07DQoNCiAgICB2YXIgT2JzdGFjbGVDaXJjbGUgPSBmdW5jdGlvbiBPYnN0YWNsZUNpcmNsZSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnN0YWNsZUNpcmNsZSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicCIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidmVsIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkdmVsIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyYWQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRwIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJucCIsIG5ldyBBcnJheSgzKSk7DQogICAgfTsNCg0KICAgIHZhciBPYnN0YWNsZVNlZ21lbnQgPSBmdW5jdGlvbiBPYnN0YWNsZVNlZ21lbnQoKSB7DQogICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JzdGFjbGVTZWdtZW50KTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJwIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJxIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0b3VjaCIsIGZhbHNlKTsNCiAgICB9Ow0KDQogICAgdmFyIFN3ZWVwQ2lyY2xlQ2lyY2xlUmVzdWx0ID0gZnVuY3Rpb24gU3dlZXBDaXJjbGVDaXJjbGVSZXN1bHQoaW50ZXJzZWN0aW9uLCBodG1pbiwgaHRtYXgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTd2VlcENpcmNsZUNpcmNsZVJlc3VsdCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaW50ZXJzZWN0aW9uIiwgZmFsc2UpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImh0bWluIiwgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaHRtYXgiLCAwKTsNCg0KICAgICAgdGhpcy5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247DQogICAgICB0aGlzLmh0bWluID0gaHRtaW47DQogICAgICB0aGlzLmh0bWF4ID0gaHRtYXg7DQogICAgfTsNCg0KICAgIHZhciBPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIC8vLzwgTWF4IG51bXZlciBvZiBhZGFwdGl2ZSBkaXZzLg0KICAgICAgLy8vPCBNYXggbnVtYmVyIG9mIGFkYXB0aXZlIHJpbmdzLg0KICAgICAgZnVuY3Rpb24gT2JzdGFjbGVBdm9pZGFuY2VRdWVyeShtYXhDaXJjbGVzLCBtYXhTZWdtZW50cykgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2JzdGFjbGVBdm9pZGFuY2VRdWVyeSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3BhcmFtcyIsIG5ldyBPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcygpKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1faW52SG9yaXpUaW1lIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3ZtYXgiLCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1faW52Vm1heCIsIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9tYXhDaXJjbGVzIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX2NpcmNsZXMiLCBbXSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX25jaXJjbGVzIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX21heFNlZ21lbnRzIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3NlZ21lbnRzIiwgW10pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9uc2VnbWVudHMiLCAwKTsNCg0KICAgICAgICB0aGlzLm1fbWF4Q2lyY2xlcyA9IG1heENpcmNsZXM7DQogICAgICAgIHRoaXMubV9uY2lyY2xlcyA9IDA7DQogICAgICAgIHRoaXMubV9jaXJjbGVzID0gbmV3IEFycmF5KHRoaXMubV9tYXhDaXJjbGVzKTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9tYXhDaXJjbGVzOyBpKyspIHsNCiAgICAgICAgICB0aGlzLm1fY2lyY2xlc1tpXSA9IG5ldyBPYnN0YWNsZUNpcmNsZSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5tX21heFNlZ21lbnRzID0gbWF4U2VnbWVudHM7DQogICAgICAgIHRoaXMubV9uc2VnbWVudHMgPSAwOw0KICAgICAgICB0aGlzLm1fc2VnbWVudHMgPSBuZXcgQXJyYXkodGhpcy5tX21heFNlZ21lbnRzKTsNCg0KICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgdGhpcy5tX21heFNlZ21lbnRzOyBfaSsrKSB7DQogICAgICAgICAgdGhpcy5tX3NlZ21lbnRzW19pXSA9IG5ldyBPYnN0YWNsZVNlZ21lbnQoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoT2JzdGFjbGVBdm9pZGFuY2VRdWVyeSwgW3sNCiAgICAgICAga2V5OiAicmVzZXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7DQogICAgICAgICAgdGhpcy5tX25jaXJjbGVzID0gMDsNCiAgICAgICAgICB0aGlzLm1fbnNlZ21lbnRzID0gMDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRDaXJjbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2lyY2xlKHBvcywgcmFkLCB2ZWwsIGR2ZWwpIHsNCiAgICAgICAgICBpZiAodGhpcy5tX25jaXJjbGVzID49IHRoaXMubV9tYXhDaXJjbGVzKSByZXR1cm47DQogICAgICAgICAgdmFyIGNpciA9IHRoaXMubV9jaXJjbGVzW3RoaXMubV9uY2lyY2xlcysrXTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoY2lyLnAsIHBvcyk7DQogICAgICAgICAgY2lyLnJhZCA9IHJhZDsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoY2lyLnZlbCwgdmVsKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoY2lyLmR2ZWwsIGR2ZWwpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZFNlZ21lbnQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU2VnbWVudChwLCBxKSB7DQogICAgICAgICAgaWYgKHRoaXMubV9uc2VnbWVudHMgPj0gdGhpcy5tX21heFNlZ21lbnRzKSByZXR1cm47DQogICAgICAgICAgdmFyIHNlZyA9IHRoaXMubV9zZWdtZW50c1t0aGlzLm1fbnNlZ21lbnRzKytdOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShzZWcucCwgcCk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHNlZy5xLCBxKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRPYnN0YWNsZUNpcmNsZUNvdW50IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9ic3RhY2xlQ2lyY2xlQ291bnQoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9uY2lyY2xlczsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRPYnN0YWNsZUNpcmNsZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPYnN0YWNsZUNpcmNsZShpKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9jaXJjbGVzW2ldOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldE9ic3RhY2xlU2VnbWVudENvdW50IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9ic3RhY2xlU2VnbWVudENvdW50KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzWyJ0aGlzIl0ubV9uc2VnbWVudHM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0T2JzdGFjbGVTZWdtZW50IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9ic3RhY2xlU2VnbWVudChpKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9zZWdtZW50c1tpXTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJwcmVwYXJlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXBhcmUocG9zLCBkdmVsKSB7DQogICAgICAgICAgLy8gUHJlcGFyZSBvYnN0YWNsZXMNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9uY2lyY2xlczsgKytpKSB7DQogICAgICAgICAgICB2YXIgY2lyID0gdGhpcy5tX2NpcmNsZXNbaV07IC8vIFNpZGUNCg0KICAgICAgICAgICAgdmFyIHBhID0gcG9zOw0KICAgICAgICAgICAgdmFyIHBiID0gY2lyLnA7DQogICAgICAgICAgICB2YXIgb3JpZyA9IFswLCAwLCAwXTsNCiAgICAgICAgICAgIHZhciBkdiA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShjaXIuZHAsIERldG91ckNvbW1vbi52U3ViKHBiLCBwYSkpOw0KICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZOb3JtYWxpemUoY2lyLmRwKTsNCiAgICAgICAgICAgIGR2ID0gRGV0b3VyQ29tbW9uLnZTdWIoY2lyLmR2ZWwsIGR2ZWwpOw0KICAgICAgICAgICAgdmFyIGEgPSBEZXRvdXJDb21tb24udHJpQXJlYTJEMyhvcmlnLCBjaXIuZHAsIGR2KTsNCg0KICAgICAgICAgICAgaWYgKGEgPCAwLjAxKSB7DQogICAgICAgICAgICAgIGNpci5ucFswXSA9IC1jaXIuZHBbMl07DQogICAgICAgICAgICAgIGNpci5ucFsyXSA9IGNpci5kcFswXTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGNpci5ucFswXSA9IGNpci5kcFsyXTsNCiAgICAgICAgICAgICAgY2lyLm5wWzJdID0gLWNpci5kcFswXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLm1fbnNlZ21lbnRzOyArK19pMikgew0KICAgICAgICAgICAgdmFyIHNlZyA9IHRoaXMubV9zZWdtZW50c1tfaTJdOyAvLyBQcmVjYWxjIGlmIHRoZSBhZ2VudCBpcyByZWFsbHkgY2xvc2UgdG8gdGhlIHNlZ21lbnQuDQoNCiAgICAgICAgICAgIHZhciByID0gMC4wMTsNCiAgICAgICAgICAgIHZhciBkdCA9IERldG91ckNvbW1vbi5kaXN0YW5jZVB0U2VnU3FyMkQzKHBvcywgc2VnLnAsIHNlZy5xKTsNCiAgICAgICAgICAgIHNlZy50b3VjaCA9IGR0WzBdIDwgRGV0b3VyQ29tbW9uLnNxcihyKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic3dlZXBDaXJjbGVDaXJjbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3dlZXBDaXJjbGVDaXJjbGUoYzAsIHIwLCB2LCBjMSwgcjEpIHsNCiAgICAgICAgICB2YXIgRVBTID0gMC4wMDAxOw0KICAgICAgICAgIHZhciBzID0gRGV0b3VyQ29tbW9uLnZTdWIoYzEsIGMwKTsNCiAgICAgICAgICB2YXIgciA9IHIwICsgcjE7DQogICAgICAgICAgdmFyIGMgPSBEZXRvdXJDb21tb24udkRvdDJEKHMsIHMpIC0gciAqIHI7DQogICAgICAgICAgdmFyIGEgPSBEZXRvdXJDb21tb24udkRvdDJEKHYsIHYpOw0KICAgICAgICAgIGlmIChhIDwgRVBTKSByZXR1cm4gbmV3IFN3ZWVwQ2lyY2xlQ2lyY2xlUmVzdWx0KGZhbHNlLCAwLCAwKTsgLy8gbm90IG1vdmluZw0KICAgICAgICAgIC8vIE92ZXJsYXAsIGNhbGMgdGltZSB0byBleGl0Lg0KDQogICAgICAgICAgdmFyIGIgPSBEZXRvdXJDb21tb24udkRvdDJEKHYsIHMpOw0KICAgICAgICAgIHZhciBkID0gYiAqIGIgLSBhICogYzsNCiAgICAgICAgICBpZiAoZCA8IDAuMCkgcmV0dXJuIG5ldyBTd2VlcENpcmNsZUNpcmNsZVJlc3VsdChmYWxzZSwgMCwgMCk7IC8vIG5vIGludGVyc2VjdGlvbi4NCg0KICAgICAgICAgIGEgPSAxLjAgLyBhOw0KICAgICAgICAgIHZhciByZCA9IE1hdGguc3FydChkKTsNCiAgICAgICAgICByZXR1cm4gbmV3IFN3ZWVwQ2lyY2xlQ2lyY2xlUmVzdWx0KHRydWUsIChiIC0gcmQpICogYSwgKGIgKyByZCkgKiBhKTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc2VjdFJheVNlZyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc2VjdFJheVNlZyhhcCwgdSwgYnAsIGJxKSB7DQogICAgICAgICAgdmFyIHYgPSBEZXRvdXJDb21tb24udlN1YihicSwgYnApOw0KICAgICAgICAgIHZhciB3ID0gRGV0b3VyQ29tbW9uLnZTdWIoYXAsIGJwKTsNCiAgICAgICAgICB2YXIgZCA9IERldG91ckNvbW1vbi52UGVycDJEKHUsIHYpOw0KICAgICAgICAgIGlmIChNYXRoLmFicyhkKSA8IDFlLTYpIHJldHVybiBbZmFsc2UsIDBdOw0KICAgICAgICAgIGQgPSAxLjAgLyBkOw0KICAgICAgICAgIHZhciB0ID0gRGV0b3VyQ29tbW9uLnZQZXJwMkQodiwgdykgKiBkOw0KICAgICAgICAgIGlmICh0IDwgMCB8fCB0ID4gMSkgcmV0dXJuIFtmYWxzZSwgMF07DQogICAgICAgICAgdmFyIHMgPSBEZXRvdXJDb21tb24udlBlcnAyRCh1LCB3KSAqIGQ7DQogICAgICAgICAgaWYgKHMgPCAwIHx8IHMgPiAxKSByZXR1cm4gW2ZhbHNlLCAwXTsNCiAgICAgICAgICByZXR1cm4gW3RydWUsIHRdOw0KICAgICAgICB9DQogICAgICAgIC8qKiBDYWxjdWxhdGUgdGhlIGNvbGxpc2lvbiBwZW5hbHR5IGZvciBhIGdpdmVuIHZlbG9jaXR5IHZlY3Rvcg0KICAgICAgICAgKiANCiAgICAgICAgICogQHBhcmFtIHZjYW5kIHNhbXBsZWQgdmVsb2NpdHkNCiAgICAgICAgICogQHBhcmFtIGR2ZWwgZGVzaXJlZCB2ZWxvY2l0eQ0KICAgICAgICAgKiBAcGFyYW0gbWluUGVuYWx0eSB0aHJlc2hvbGQgcGVuYWx0eSBmb3IgZWFybHkgb3V0DQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInByb2Nlc3NTYW1wbGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc1NhbXBsZSh2Y2FuZCwgY3MsIHBvcywgcmFkLCB2ZWwsIGR2ZWwsIG1pblBlbmFsdHksIGRlYnVnKSB7DQogICAgICAgICAgLy8gcGVuYWx0eSBmb3Igc3RyYXlpbmcgYXdheSBmcm9tIHRoZSBkZXNpcmVkIGFuZCBjdXJyZW50IHZlbG9jaXRpZXMNCiAgICAgICAgICB2YXIgdnBlbiA9IHRoaXMubV9wYXJhbXMud2VpZ2h0RGVzVmVsICogKERldG91ckNvbW1vbi52RGlzdDJEKHZjYW5kLCBkdmVsKSAqIHRoaXMubV9pbnZWbWF4KTsNCiAgICAgICAgICB2YXIgdmNwZW4gPSB0aGlzLm1fcGFyYW1zLndlaWdodEN1clZlbCAqIChEZXRvdXJDb21tb24udkRpc3QyRCh2Y2FuZCwgdmVsKSAqIHRoaXMubV9pbnZWbWF4KTsgLy8gZmluZCB0aGUgdGhyZXNob2xkIGhpdCB0aW1lIHRvIGJhaWwgb3V0IGJhc2VkIG9uIHRoZSBlYXJseSBvdXQgcGVuYWx0eQ0KICAgICAgICAgIC8vIChzZWUgaG93IHRoZSBwZW5hbHR5IGlzIGNhbGN1bGF0ZWQgYmVsb3cgdG8gdW5kZXJzdG5hZCkNCg0KICAgICAgICAgIHZhciBtaW5QZW4gPSBtaW5QZW5hbHR5IC0gdnBlbiAtIHZjcGVuOw0KICAgICAgICAgIHZhciB0VGhyZXNvbGQgPSAodGhpcy5tX3BhcmFtcy53ZWlnaHRUb2kgLyBtaW5QZW4gLSAwLjEpICogdGhpcy5tX3BhcmFtcy5ob3JpelRpbWU7DQogICAgICAgICAgaWYgKHRUaHJlc29sZCAtIHRoaXMubV9wYXJhbXMuaG9yaXpUaW1lID4gLU51bWJlci5NSU5fVkFMVUUpIHJldHVybiBtaW5QZW5hbHR5OyAvLyBhbHJlYWR5IHRvbyBtdWNoDQogICAgICAgICAgLy8gRmluZCBtaW4gdGltZSBvZiBpbXBhY3QgYW5kIGV4aXQgYW1vbmdzdCBhbGwgb2JzdGFjbGVzLg0KDQogICAgICAgICAgdmFyIHRtaW4gPSB0aGlzLm1fcGFyYW1zLmhvcml6VGltZTsNCiAgICAgICAgICB2YXIgc2lkZSA9IDA7DQogICAgICAgICAgdmFyIG5zaWRlID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX25jaXJjbGVzOyArK2kpIHsNCiAgICAgICAgICAgIHZhciBjaXIgPSB0aGlzLm1fY2lyY2xlc1tpXTsgLy8gUlZPDQoNCiAgICAgICAgICAgIHZhciB2YWIgPSBEZXRvdXJDb21tb24udlNjYWxlKHZjYW5kLCAyKTsNCiAgICAgICAgICAgIHZhYiA9IERldG91ckNvbW1vbi52U3ViKHZhYiwgdmVsKTsNCiAgICAgICAgICAgIHZhYiA9IERldG91ckNvbW1vbi52U3ViKHZhYiwgY2lyLnZlbCk7IC8vIFNpZGUNCg0KICAgICAgICAgICAgc2lkZSArPSBEZXRvdXJDb21tb24uY2xhbXAoTWF0aC5taW4oRGV0b3VyQ29tbW9uLnZEb3QyRChjaXIuZHAsIHZhYikgKiAwLjUgKyAwLjUsIERldG91ckNvbW1vbi52RG90MkQoY2lyLm5wLCB2YWIpICogMiksIDAuMCwgMS4wKTsNCiAgICAgICAgICAgIG5zaWRlKys7DQogICAgICAgICAgICB2YXIgc3JlcyA9IHRoaXMuc3dlZXBDaXJjbGVDaXJjbGUocG9zLCByYWQsIHZhYiwgY2lyLnAsIGNpci5yYWQpOw0KICAgICAgICAgICAgaWYgKCFzcmVzLmludGVyc2VjdGlvbikgY29udGludWU7DQogICAgICAgICAgICB2YXIgaHRtaW4gPSBzcmVzLmh0bWluLA0KICAgICAgICAgICAgICAgIGh0bWF4ID0gc3Jlcy5odG1heDsgLy8gSGFuZGxlIG92ZXJsYXBwaW5nIG9ic3RhY2xlcy4NCg0KICAgICAgICAgICAgaWYgKGh0bWluIDwgMC4wICYmIGh0bWF4ID4gMC4wKSB7DQogICAgICAgICAgICAgIC8vIEFtb3JlIHdoZW4gb3ZlcmxhcHBlZC4NCiAgICAgICAgICAgICAgaHRtaW4gPSAtaHRtaW4gKiAwLjU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChodG1pbiA+PSAwLjApIHsNCiAgICAgICAgICAgICAgLy8gVGhlIGNsb3Nlc3Qgb2JzdGFjbGUgaXMgc29tZXdoZXJlIGFoZWFkIG9mIHVzLCBrZWVwIHRyYWNrIG9mIG5lYXJlc3Qgb2JzdGFjbGUuDQogICAgICAgICAgICAgIGlmIChodG1pbiA8IHRtaW4pIHsNCiAgICAgICAgICAgICAgICB0bWluID0gaHRtaW47DQogICAgICAgICAgICAgICAgaWYgKHRtaW4gPCB0VGhyZXNvbGQpIHJldHVybiBtaW5QZW5hbHR5Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgdGhpcy5tX25zZWdtZW50czsgKytfaTMpIHsNCiAgICAgICAgICAgIHZhciBzZWcgPSB0aGlzLm1fc2VnbWVudHNbX2kzXTsNCiAgICAgICAgICAgIHZhciBfaHRtaW4gPSAwOw0KDQogICAgICAgICAgICBpZiAoc2VnLnRvdWNoKSB7DQogICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIHRoZSBhZ2VudCBpcyB2ZXJ5IGNsb3NlIHRvIHRoZSBzZWdtZW50Lg0KICAgICAgICAgICAgICB2YXIgc2RpciA9IERldG91ckNvbW1vbi52U3ViKHNlZy5xLCBzZWcucCk7DQogICAgICAgICAgICAgIHZhciBzbm9ybSA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgICAgc25vcm1bMF0gPSAtc2RpclsyXTsNCiAgICAgICAgICAgICAgc25vcm1bMl0gPSBzZGlyWzBdOyAvLyBJZiB0aGUgdmVsb2NpdHkgaXMgcG9pbnRpbmcgdG93YXJkcyB0aGUgc2VnbWVudCwgbm8gY29sbGlzaW9uLg0KDQogICAgICAgICAgICAgIGlmIChEZXRvdXJDb21tb24udkRvdDJEKHNub3JtLCB2Y2FuZCkgPCAwLjApIGNvbnRpbnVlOyAvLyBFbHNlIGltbWVkaWF0ZSBjb2xsaXNpb24uDQoNCiAgICAgICAgICAgICAgX2h0bWluID0gMC4wOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdmFyIGlyZXMgPSB0aGlzLmlzZWN0UmF5U2VnKHBvcywgdmNhbmQsIHNlZy5wLCBzZWcucSk7DQogICAgICAgICAgICAgIGlmICghaXJlc1swXSkgY29udGludWU7DQogICAgICAgICAgICAgIF9odG1pbiA9IGlyZXNbMV07DQogICAgICAgICAgICB9IC8vIEFsZXNzIHdoZW4gZmFjaW5nIHdhbGxzLg0KDQoNCiAgICAgICAgICAgIF9odG1pbiAqPSAyLjA7IC8vIFRoZSBjbG9zZXN0IG9ic3RhY2xlIGlzIHNvbWV3aGVyZSBhaGVhZCBvZiB1cywga2VlcCB0cmFjayBvZiBuZWFyZXN0IG9ic3RhY2xlLg0KDQogICAgICAgICAgICBpZiAoX2h0bWluIDwgdG1pbikgew0KICAgICAgICAgICAgICB0bWluID0gX2h0bWluOw0KICAgICAgICAgICAgICBpZiAodG1pbiA8IHRUaHJlc29sZCkgcmV0dXJuIG1pblBlbmFsdHk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBOb3JtYWxpemUgc2lkZSBiaWFzLCB0byBwcmV2ZW50IGl0IGRvbWluYXRpbmcgdG9vIG11Y2guDQoNCg0KICAgICAgICAgIGlmIChuc2lkZSAhPSAwKSBzaWRlIC89IG5zaWRlOw0KICAgICAgICAgIHZhciBzcGVuID0gdGhpcy5tX3BhcmFtcy53ZWlnaHRTaWRlICogc2lkZTsNCiAgICAgICAgICB2YXIgdHBlbiA9IHRoaXMubV9wYXJhbXMud2VpZ2h0VG9pICogKDEuMCAvICgwLjEgKyB0bWluICogdGhpcy5tX2ludkhvcml6VGltZSkpOw0KICAgICAgICAgIHZhciBwZW5hbHR5ID0gdnBlbiArIHZjcGVuICsgc3BlbiArIHRwZW47IC8vIFN0b3JlIGRpZmZlcmVudCBwZW5hbHRpZXMgZm9yIGRlYnVnIHZpZXdpbmcNCg0KICAgICAgICAgIGlmIChkZWJ1ZyAhPSBudWxsKSBkZWJ1Zy5hZGRTYW1wbGUodmNhbmQsIGNzLCBwZW5hbHR5LCB2cGVuLCB2Y3Blbiwgc3BlbiwgdHBlbik7DQogICAgICAgICAgcmV0dXJuIHBlbmFsdHk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic2FtcGxlVmVsb2NpdHlHcmlkIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNhbXBsZVZlbG9jaXR5R3JpZChwb3MsIHJhZCwgdm1heCwgdmVsLCBkdmVsLCBwYXJhbXMsIGRlYnVnKSB7DQogICAgICAgICAgdGhpcy5wcmVwYXJlKHBvcywgZHZlbCk7DQogICAgICAgICAgdGhpcy5tX3BhcmFtcyA9IHBhcmFtczsNCiAgICAgICAgICB0aGlzLm1faW52SG9yaXpUaW1lID0gMS4wIC8gdGhpcy5tX3BhcmFtcy5ob3JpelRpbWU7DQogICAgICAgICAgdGhpcy5tX3ZtYXggPSB2bWF4Ow0KICAgICAgICAgIHRoaXMubV9pbnZWbWF4ID0gdm1heCA+IDAgPyAxLjAgLyB2bWF4IDogTnVtYmVyLk1BWF9WQUxVRTsNCiAgICAgICAgICB2YXIgbnZlbCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udlNldChudmVsLCAwLCAwLCAwKTsNCiAgICAgICAgICBpZiAoZGVidWcgIT0gbnVsbCkgZGVidWcucmVzZXQoKTsNCiAgICAgICAgICBjdnggPSBkdmVsWzBdICogdGhpcy5tX3BhcmFtcy52ZWxCaWFzOw0KICAgICAgICAgIGN2eiA9IGR2ZWxbMl0gKiB0aGlzLm1fcGFyYW1zLnZlbEJpYXM7DQogICAgICAgICAgY3MgPSB2bWF4ICogMiAqICgxIC0gdGhpcy5tX3BhcmFtcy52ZWxCaWFzKSAvICh0aGlzLm1fcGFyYW1zLmdyaWRTaXplIC0gMSk7DQogICAgICAgICAgaGFsZiA9ICh0aGlzLm1fcGFyYW1zLmdyaWRTaXplIC0gMSkgKiBjcyAqIDAuNTsNCiAgICAgICAgICBtaW5QZW5hbHR5ID0gTnVtYmVyLk1BWF9WQUxVRTsNCiAgICAgICAgICB2YXIgbnMgPSAwOw0KDQogICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLm1fcGFyYW1zLmdyaWRTaXplOyArK3kpIHsNCiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy5tX3BhcmFtcy5ncmlkU2l6ZTsgKyt4KSB7DQogICAgICAgICAgICAgIHZhciB2Y2FuZCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQodmNhbmQsIGN2eCArIHggKiBjcyAtIGhhbGYsIDAsIGN2eiArIHkgKiBjcyAtIGhhbGYpOw0KICAgICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnNxcih2Y2FuZFswXSkgKyBEZXRvdXJDb21tb24uc3FyKHZjYW5kWzJdKSA+IERldG91ckNvbW1vbi5zcXIodm1heCArIGNzIC8gMikpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICBwZW5hbHR5ID0gdGhpcy5wcm9jZXNzU2FtcGxlKHZjYW5kLCBjcywgcG9zLCByYWQsIHZlbCwgZHZlbCwgbWluUGVuYWx0eSwgZGVidWcpOw0KICAgICAgICAgICAgICBucysrOw0KDQogICAgICAgICAgICAgIGlmIChwZW5hbHR5IDwgbWluUGVuYWx0eSkgew0KICAgICAgICAgICAgICAgIG1pblBlbmFsdHkgPSBwZW5hbHR5Ow0KICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShudmVsLCB2Y2FuZCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gW25zLCBudmVsXTsNCiAgICAgICAgfSAvLyB2ZWN0b3Igbm9ybWFsaXphdGlvbiB0aGF0IGlnbm9yZXMgdGhlIHktY29tcG9uZW50Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImR0Tm9ybWFsaXplMkQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHROb3JtYWxpemUyRCh2KSB7DQogICAgICAgICAgdmFyIGQgPSBNYXRoLnNxcnQodlswXSAqIHZbMF0gKyB2WzJdICogdlsyXSk7DQogICAgICAgICAgaWYgKGQgPT0gMCkgcmV0dXJuOw0KICAgICAgICAgIGQgPSAxLjAgLyBkOw0KICAgICAgICAgIHZbMF0gKj0gZDsNCiAgICAgICAgICB2WzJdICo9IGQ7DQogICAgICAgIH0gLy8gdmVjdG9yIG5vcm1hbGl6YXRpb24gdGhhdCBpZ25vcmVzIHRoZSB5LWNvbXBvbmVudC4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJkdFJvdGF0ZTJEIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGR0Um90YXRlMkQodiwgYW5nKSB7DQogICAgICAgICAgdmFyIGRlc3QgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgdmFyIGMgPSBNYXRoLmNvcyhhbmcpOw0KICAgICAgICAgIHZhciBzID0gTWF0aC5zaW4oYW5nKTsNCiAgICAgICAgICBkZXN0WzBdID0gdlswXSAqIGMgLSB2WzJdICogczsNCiAgICAgICAgICBkZXN0WzJdID0gdlswXSAqIHMgKyB2WzJdICogYzsNCiAgICAgICAgICBkZXN0WzFdID0gdlsxXTsNCiAgICAgICAgICByZXR1cm4gZGVzdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJzYW1wbGVWZWxvY2l0eUFkYXB0aXZlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNhbXBsZVZlbG9jaXR5QWRhcHRpdmUocG9zLCByYWQsIHZtYXgsIHZlbCwgZHZlbCwgcGFyYW1zLCBkZWJ1Zykgew0KICAgICAgICAgIHRoaXMucHJlcGFyZShwb3MsIGR2ZWwpOw0KICAgICAgICAgIHRoaXMubV9wYXJhbXMgPSBwYXJhbXM7DQogICAgICAgICAgdGhpcy5tX2ludkhvcml6VGltZSA9IDEuMCAvIHRoaXMubV9wYXJhbXMuaG9yaXpUaW1lOw0KICAgICAgICAgIHRoaXMubV92bWF4ID0gdm1heDsNCiAgICAgICAgICB0aGlzLm1faW52Vm1heCA9IHZtYXggPiAwID8gMS4wIC8gdm1heCA6IE51bWJlci5NQVhfVkFMVUU7DQogICAgICAgICAgdmFyIG52ZWwgPSBuZXcgQXJyYXkoMyk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQobnZlbCwgMCwgMCwgMCk7DQogICAgICAgICAgaWYgKGRlYnVnICE9IG51bGwpIGRlYnVnLnJlc2V0KCk7IC8vIEJ1aWxkIHNhbXBsaW5nIHBhdHRlcm4gYWxpZ25lZCB0byBkZXNpcmVkIHZlbG9jaXR5Lg0KDQogICAgICAgICAgdmFyIHBhdCA9IG5ldyBBcnJheSgoT2JzdGFjbGVBdm9pZGFuY2VRdWVyeS5EVF9NQVhfUEFUVEVSTl9ESVZTICogT2JzdGFjbGVBdm9pZGFuY2VRdWVyeS5EVF9NQVhfUEFUVEVSTl9SSU5HUyArIDEpICogMik7DQogICAgICAgICAgdmFyIG5wYXQgPSAwOw0KICAgICAgICAgIHZhciBuZGl2cyA9IHRoaXMubV9wYXJhbXMuYWRhcHRpdmVEaXZzOw0KICAgICAgICAgIHZhciBucmluZ3MgPSB0aGlzLm1fcGFyYW1zLmFkYXB0aXZlUmluZ3M7DQogICAgICAgICAgdmFyIGRlcHRoID0gdGhpcy5tX3BhcmFtcy5hZGFwdGl2ZURlcHRoOw0KICAgICAgICAgIHZhciBuZCA9IERldG91ckNvbW1vbi5jbGFtcChuZGl2cywgMSwgT2JzdGFjbGVBdm9pZGFuY2VRdWVyeS5EVF9NQVhfUEFUVEVSTl9ESVZTKTsNCiAgICAgICAgICB2YXIgbnIgPSBEZXRvdXJDb21tb24uY2xhbXAobnJpbmdzLCAxLCBPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5LkRUX01BWF9QQVRURVJOX1JJTkdTKTsNCiAgICAgICAgICB2YXIgZGEgPSAxLjAgLyBuZCAqIE9ic3RhY2xlQXZvaWRhbmNlUXVlcnkuRFRfUEkgKiAyOw0KICAgICAgICAgIHZhciBjYSA9IE1hdGguY29zKGRhKTsNCiAgICAgICAgICB2YXIgc2EgPSBNYXRoLnNpbihkYSk7IC8vIGRlc2lyZWQgZGlyZWN0aW9uDQoNCiAgICAgICAgICB2YXIgZGRpciA9IG5ldyBBcnJheSg2KTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoZGRpciwgZHZlbCk7DQogICAgICAgICAgdGhpcy5kdE5vcm1hbGl6ZTJEKGRkaXIpOw0KICAgICAgICAgIHZhciByb3RhdGVkID0gdGhpcy5kdFJvdGF0ZTJEKGRkaXIsIGRhICogMC41KTsgLy8gcm90YXRlZCBieSBkYS8yDQoNCiAgICAgICAgICBkZGlyWzNdID0gcm90YXRlZFswXTsNCiAgICAgICAgICBkZGlyWzRdID0gcm90YXRlZFsxXTsNCiAgICAgICAgICBkZGlyWzVdID0gcm90YXRlZFsyXTsgLy8gQWx3YXlzIGFkZCBzYW1wbGUgYXQgemVybw0KDQogICAgICAgICAgcGF0W25wYXQgKiAyICsgMF0gPSAwOw0KICAgICAgICAgIHBhdFtucGF0ICogMiArIDFdID0gMDsNCiAgICAgICAgICBucGF0Kys7DQoNCiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5yOyArK2opIHsNCiAgICAgICAgICAgIHZhciByID0gKG5yIC0gaikgLyBucjsNCiAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDBdID0gZGRpcltqICUgMiAqIDNdICogcjsNCiAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDFdID0gZGRpcltqICUgMiAqIDMgKyAyXSAqIHI7DQogICAgICAgICAgICB2YXIgbGFzdDEgPSBucGF0ICogMjsNCiAgICAgICAgICAgIHZhciBsYXN0MiA9IGxhc3QxOw0KICAgICAgICAgICAgbnBhdCsrOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG5kIC0gMTsgaSArPSAyKSB7DQogICAgICAgICAgICAgIC8vIGdldCBuZXh0IHBvUG9seSBvbiB0aGUgInJpZ2h0IiAocm90YXRlIENXKQ0KICAgICAgICAgICAgICBwYXRbbnBhdCAqIDIgKyAwXSA9IHBhdFtsYXN0MV0gKiBjYSArIHBhdFtsYXN0MSArIDFdICogc2E7DQogICAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDFdID0gLXBhdFtsYXN0MV0gKiBzYSArIHBhdFtsYXN0MSArIDFdICogY2E7IC8vIGdldCBuZXh0IHBvUG9seSBvbiB0aGUgImxlZnQiIChyb3RhdGUgQ0NXKQ0KDQogICAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDJdID0gcGF0W2xhc3QyXSAqIGNhIC0gcGF0W2xhc3QyICsgMV0gKiBzYTsNCiAgICAgICAgICAgICAgcGF0W25wYXQgKiAyICsgM10gPSBwYXRbbGFzdDJdICogc2EgKyBwYXRbbGFzdDIgKyAxXSAqIGNhOw0KICAgICAgICAgICAgICBsYXN0MSA9IG5wYXQgKiAyOw0KICAgICAgICAgICAgICBsYXN0MiA9IGxhc3QxICsgMjsNCiAgICAgICAgICAgICAgbnBhdCArPSAyOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoKG5kICYgMSkgPT0gMCkgew0KICAgICAgICAgICAgICBwYXRbbnBhdCAqIDIgKyAyXSA9IHBhdFtsYXN0Ml0gKiBjYSAtIHBhdFtsYXN0MiArIDFdICogc2E7DQogICAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDNdID0gcGF0W2xhc3QyXSAqIHNhICsgcGF0W2xhc3QyICsgMV0gKiBjYTsNCiAgICAgICAgICAgICAgbnBhdCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gU3RhcnQgc2FtcGxpbmcuDQoNCg0KICAgICAgICAgIHZhciBjciA9IHZtYXggKiAoMS4wIC0gdGhpcy5tX3BhcmFtcy52ZWxCaWFzKTsNCiAgICAgICAgICB2YXIgcmVzID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KHJlcywgZHZlbFswXSAqIHRoaXMubV9wYXJhbXMudmVsQmlhcywgMCwgZHZlbFsyXSAqIHRoaXMubV9wYXJhbXMudmVsQmlhcyk7DQogICAgICAgICAgdmFyIG5zID0gMDsNCg0KICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZGVwdGg7ICsraykgew0KICAgICAgICAgICAgdmFyIF9taW5QZW5hbHR5ID0gTnVtYmVyLk1BWF9WQUxVRTsNCiAgICAgICAgICAgIHZhciBidmVsID0gbmV3IEFycmF5KDMpOw0KICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYnZlbCwgMCwgMCwgMCk7DQoNCiAgICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IG5wYXQ7ICsrX2k0KSB7DQogICAgICAgICAgICAgIHZhciB2Y2FuZCA9IG5ldyBBcnJheSgzKTsNCiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQodmNhbmQsIHJlc1swXSArIHBhdFtfaTQgKiAyICsgMF0gKiBjciwgMCwgcmVzWzJdICsgcGF0W19pNCAqIDIgKyAxXSAqIGNyKTsNCiAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi5zcXIodmNhbmRbMF0pICsgRGV0b3VyQ29tbW9uLnNxcih2Y2FuZFsyXSkgPiBEZXRvdXJDb21tb24uc3FyKHZtYXggKyAwLjAwMSkpIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgIHZhciBfcGVuYWx0eSA9IHRoaXMucHJvY2Vzc1NhbXBsZSh2Y2FuZCwgY3IgLyAxMCwgcG9zLCByYWQsIHZlbCwgZHZlbCwgX21pblBlbmFsdHksIGRlYnVnKTsNCg0KICAgICAgICAgICAgICBucysrOw0KDQogICAgICAgICAgICAgIGlmIChfcGVuYWx0eSA8IF9taW5QZW5hbHR5KSB7DQogICAgICAgICAgICAgICAgX21pblBlbmFsdHkgPSBfcGVuYWx0eTsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYnZlbCwgdmNhbmQpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShyZXMsIGJ2ZWwpOw0KICAgICAgICAgICAgY3IgKj0gMC41Ow0KICAgICAgICAgIH0NCg0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShudmVsLCByZXMpOw0KICAgICAgICAgIHJldHVybiBbbnMsIG52ZWxdOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5Ow0KICAgIH0oKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5LCAiRFRfTUFYX1BBVFRFUk5fRElWUyIsIDMyKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5LCAiRFRfTUFYX1BBVFRFUk5fUklOR1MiLCA0KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5LCAiRFRfUEkiLCAzLjE0MTU5MjY1KTsNCg0KICAgIHZhciBfdGVtcCQ0Ow0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBQcm94aW1pdHlHcmlkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIFByb3hpbWl0eUdyaWQobV9jZWxsU2l6ZSwgbV9pbnZDZWxsU2l6ZSkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJveGltaXR5R3JpZCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX2NlbGxTaXplIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1faW52Q2VsbFNpemUiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXRlbXMiLCB7fSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX2JvdW5kcyIsIG5ldyBBcnJheSg0KSk7DQoNCiAgICAgICAgdGhpcy5tX2NlbGxTaXplID0gbV9jZWxsU2l6ZTsNCiAgICAgICAgdGhpcy5tX2ludkNlbGxTaXplID0gbV9pbnZDZWxsU2l6ZTsNCiAgICAgICAgdGhpcy5pdGVtcyA9IHt9Ow0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoUHJveGltaXR5R3JpZCwgW3sNCiAgICAgICAga2V5OiAiY2xlYXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7DQogICAgICAgICAgdGhpcy5pdGVtcyA9IHt9Ow0KICAgICAgICAgIHRoaXMubV9ib3VuZHNbMF0gPSAweGZmZjsNCiAgICAgICAgICB0aGlzLm1fYm91bmRzWzFdID0gMHhmZmY7DQogICAgICAgICAgdGhpcy5tX2JvdW5kc1syXSA9IC0weGZmZjsNCiAgICAgICAgICB0aGlzLm1fYm91bmRzWzNdID0gLTB4ZmZmOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZEl0ZW0iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkSXRlbShpZCwgbWlueCwgbWlueSwgbWF4eCwgbWF4eSkgew0KICAgICAgICAgIHZhciBpbWlueCA9IE1hdGguZmxvb3IobWlueCAqIHRoaXMubV9pbnZDZWxsU2l6ZSk7DQogICAgICAgICAgdmFyIGltaW55ID0gTWF0aC5mbG9vcihtaW55ICogdGhpcy5tX2ludkNlbGxTaXplKTsNCiAgICAgICAgICB2YXIgaW1heHggPSBNYXRoLmZsb29yKG1heHggKiB0aGlzLm1faW52Q2VsbFNpemUpOw0KICAgICAgICAgIHZhciBpbWF4eSA9IE1hdGguZmxvb3IobWF4eSAqIHRoaXMubV9pbnZDZWxsU2l6ZSk7DQogICAgICAgICAgdGhpcy5tX2JvdW5kc1swXSA9IE1hdGgubWluKHRoaXMubV9ib3VuZHNbMF0sIGltaW54KTsNCiAgICAgICAgICB0aGlzLm1fYm91bmRzWzFdID0gTWF0aC5taW4odGhpcy5tX2JvdW5kc1sxXSwgaW1pbnkpOw0KICAgICAgICAgIHRoaXMubV9ib3VuZHNbMl0gPSBNYXRoLm1pbih0aGlzLm1fYm91bmRzWzJdLCBpbWF4eCk7DQogICAgICAgICAgdGhpcy5tX2JvdW5kc1szXSA9IE1hdGgubWluKHRoaXMubV9ib3VuZHNbM10sIGltYXh5KTsNCg0KICAgICAgICAgIGZvciAodmFyIF95ID0gaW1pbnk7IF95IDw9IGltYXh5OyArK195KSB7DQogICAgICAgICAgICBmb3IgKHZhciBfeCA9IGltaW54OyBfeCA8PSBpbWF4eDsgKytfeCkgew0KICAgICAgICAgICAgICB2YXIgX2tleSA9IG5ldyBQcm94aW1pdHlHcmlkLkl0ZW1LZXkoX3gsIF95KTsNCg0KICAgICAgICAgICAgICB2YXIgX2lkcyA9IHRoaXMuaXRlbXNbSlNPTi5zdHJpbmdpZnkoX2tleSldOw0KDQogICAgICAgICAgICAgIGlmIChfaWRzID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICBfaWRzID0gW107DQogICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tKU09OLnN0cmluZ2lmeShfa2V5KV0gPSBfaWRzOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgX2lkcy5wdXNoKGlkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicXVlcnlJdGVtcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeUl0ZW1zKG1pbngsIG1pbnksIG1heHgsIG1heHkpIHsNCiAgICAgICAgICB2YXIgaW1pbnggPSBNYXRoLmZsb29yKG1pbnggKiB0aGlzLm1faW52Q2VsbFNpemUpOw0KICAgICAgICAgIHZhciBpbWlueSA9IE1hdGguZmxvb3IobWlueSAqIHRoaXMubV9pbnZDZWxsU2l6ZSk7DQogICAgICAgICAgdmFyIGltYXh4ID0gTWF0aC5mbG9vcihtYXh4ICogdGhpcy5tX2ludkNlbGxTaXplKTsNCiAgICAgICAgICB2YXIgaW1heHkgPSBNYXRoLmZsb29yKG1heHkgKiB0aGlzLm1faW52Q2VsbFNpemUpOw0KICAgICAgICAgIHZhciByZXN1bHQgPSBuZXcgU2V0KCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBfeTIgPSBpbWlueTsgX3kyIDw9IGltYXh5OyArK195Mikgew0KICAgICAgICAgICAgZm9yICh2YXIgX3gyID0gaW1pbng7IF94MiA8PSBpbWF4eDsgKytfeDIpIHsNCiAgICAgICAgICAgICAgdmFyIF9rZXkyID0gbmV3IFByb3hpbWl0eUdyaWQuSXRlbUtleShfeDIsIF95Mik7DQoNCiAgICAgICAgICAgICAgdmFyIF9pZHMyID0gdGhpcy5pdGVtc1tKU09OLnN0cmluZ2lmeShfa2V5MildOw0KDQogICAgICAgICAgICAgIGlmIChfaWRzMiAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmVzdWx0LmFkZC5hcHBseShyZXN1bHQsIF90b0NvbnN1bWFibGVBcnJheShfaWRzMikpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRJdGVtQ291bnRBdCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtQ291bnRBdCh4LCB5KSB7DQogICAgICAgICAga2V5ID0gbmV3IEl0ZW1LZXkoeCwgeSk7DQogICAgICAgICAgaWRzID0gdGhpcy5pdGVtc1trZXldOw0KICAgICAgICAgIHJldHVybiBpZHMgIT0gbnVsbCA/IGlkcy5sZW5ndGggOiAwOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBQcm94aW1pdHlHcmlkOw0KICAgIH0oKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShQcm94aW1pdHlHcmlkLCAiSXRlbUtleSIsIChfdGVtcCQ0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIGZ1bmN0aW9uIEl0ZW1LZXkoeCwgeSkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSXRlbUtleSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ4Iiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInkiLCB2b2lkIDApOw0KDQogICAgICAgIHRoaXMueCA9IHg7DQogICAgICAgIHRoaXMueSA9IHk7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhJdGVtS2V5LCBbew0KICAgICAgICBrZXk6ICJoYXNoQ29kZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNoQ29kZSgpIHsNCiAgICAgICAgICBwcmltZSA9IDMxOw0KICAgICAgICAgIHJlc3VsdCA9IDE7DQogICAgICAgICAgcmVzdWx0ID0gcHJpbWUgKiByZXN1bHQgKyB4Ow0KICAgICAgICAgIHJlc3VsdCA9IHByaW1lICogcmVzdWx0ICsgeTsNCiAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImVxdWFscyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcXVhbHMob2JqKSB7DQogICAgICAgICAgaWYgKHRoaXMgPT0gb2JqKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICBpZiAoZ2V0Q2xhc3MoKSAhPSBvYmouZ2V0Q2xhc3MoKSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIG90aGVyID0gb2JqOw0KICAgICAgICAgIGlmICh4ICE9IG90aGVyLngpIHJldHVybiBmYWxzZTsNCiAgICAgICAgICBpZiAoeSAhPSBvdGhlci55KSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIEl0ZW1LZXk7DQogICAgfSgpLCBfdGVtcCQ0KSk7DQoNCiAgICAvKg0KICAgIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZw0KICAgIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZw0KDQogICAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWQNCiAgICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzDQogICAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS4NCiAgICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSwNCiAgICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0DQogICAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOg0KICAgIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90DQogICAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlDQogICAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZQ0KICAgICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLg0KICAgIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlDQogICAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4NCiAgICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLg0KICAgICovDQogICAgdmFyIFBhdGhRdWVyeSA9IGZ1bmN0aW9uIFBhdGhRdWVyeSgpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXRoUXVlcnkpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlZiIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RhcnRQb3MiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImVuZFBvcyIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic3RhcnRSZWYiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImVuZFJlZiIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicGF0aCIsIFtdKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdGF0dXMiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImtlZXBBbGl2ZSIsIHZvaWQgMCk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZmlsdGVyIiwgdm9pZCAwKTsNCiAgICB9IC8vLyA8IFRPRE86IFRoaXMgaXMgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIQ0KICAgIDsNCg0KICAgIHZhciBQYXRoUXVldWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgLy8gaW4gdXBkYXRlIHRpY2tzLg0KICAgICAgZnVuY3Rpb24gUGF0aFF1ZXVlKG1heFNlYXJjaE5vZGVDb3VudCwgbmF2KSB7DQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXRoUXVldWUpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9xdWV1ZSIsIG5ldyBBcnJheShQYXRoUXVldWUuTUFYX1FVRVVFKSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX25leHRIYW5kbGUiLCAxKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fcXVldWVIZWFkIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fbmF2cXVlcnkiLCB2b2lkIDApOw0KDQogICAgICAgIHRoaXMubV9uYXZxdWVyeSA9IG5ldyBOYXZNZXNoUXVlcnkobmF2KTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBhdGhRdWV1ZS5NQVhfUVVFVUU7ICsraSkgew0KICAgICAgICAgIHRoaXMubV9xdWV1ZVtpXSA9IG5ldyBQYXRoUXVlcnkoKTsNCiAgICAgICAgICB0aGlzLm1fcXVldWVbaV0ucmVmID0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQ7DQogICAgICAgICAgdGhpcy5tX3F1ZXVlW2ldLnBhdGggPSBuZXcgQXJyYXkoMjU2KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMubV9xdWV1ZUhlYWQgPSAwOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoUGF0aFF1ZXVlLCBbew0KICAgICAgICBrZXk6ICJ1cGRhdGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKG1heEl0ZXJzKSB7DQogICAgICAgICAgLy8gVXBkYXRlIHBhdGggcmVxdWVzdCB1bnRpbCB0aGVyZSBpcyBub3RoaW5nIHRvIHVwZGF0ZQ0KICAgICAgICAgIC8vIG9yIHVwdG8gbWF4SXRlcnMgcGF0aGZpbmRlciBpdGVyYXRpb25zIGhhcyBiZWVuIGNvbnN1bWVkLg0KICAgICAgICAgIHZhciBpdGVyQ291bnQgPSBtYXhJdGVyczsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGF0aFF1ZXVlLk1BWF9RVUVVRTsgKytpKSB7DQogICAgICAgICAgICB2YXIgcSA9IHRoaXMubV9xdWV1ZVt0aGlzLm1fcXVldWVIZWFkICUgUGF0aFF1ZXVlLk1BWF9RVUVVRV07IC8vIFNraXAgaW5hY3RpdmUgcmVxdWVzdHMuDQoNCiAgICAgICAgICAgIGlmIChxLnJlZiA9PSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRCkgew0KICAgICAgICAgICAgICB0aGlzLm1fcXVldWVIZWFkKys7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBIYW5kbGUgY29tcFBvbHllZCByZXF1ZXN0Lg0KDQoNCiAgICAgICAgICAgIGlmIChxLnN0YXR1cyAhPSBudWxsICYmIChxLnN0YXR1cyA9PSBTdGF0dXMuU1VDQ1NFU1MgfHwgcS5zdGF0dXMgPT0gU3RhdHVzLlBBUlRJQUxfUkVTVUxUIHx8IHEuc3RhdHVzID09IFN0YXR1cy5GQUlMVVJFKSkgew0KICAgICAgICAgICAgICAvLyBJZiB0aGUgcGF0aCByZXN1bHQgaGFzIG5vdCBiZWVuIHJlYWQgaW4gZmV3IGZyYW1lcywgZnJlZSB0aGUgc2xvdC4NCiAgICAgICAgICAgICAgcS5rZWVwQWxpdmUrKzsNCg0KICAgICAgICAgICAgICBpZiAocS5rZWVwQWxpdmUgPiBQYXRoUXVldWUuTUFYX0tFRVBfQUxJVkUpIHsNCiAgICAgICAgICAgICAgICBxLnJlZiA9IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEOw0KICAgICAgICAgICAgICAgIHEuc3RhdHVzID0gbnVsbDsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHRoaXMubV9xdWV1ZUhlYWQrKzsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9IC8vIEhhbmRsZSBxdWVyeSBzdGFydC4NCg0KDQogICAgICAgICAgICBpZiAocS5zdGF0dXMgPT0gbnVsbCkgew0KICAgICAgICAgICAgICBxLnN0YXR1cyA9IHRoaXMubV9uYXZxdWVyeS5pbml0U2xpY2VkRmluZFBhdGgocS5zdGFydFJlZiwgcS5lbmRSZWYsIHEuc3RhcnRQb3MsIHEuZW5kUG9zLCBxLmZpbHRlciwgMCk7DQogICAgICAgICAgICB9IC8vIEhhbmRsZSBxdWVyeSBpbiBwcm9ncmVzcy4NCg0KDQogICAgICAgICAgICBpZiAocS5zdGF0dXMgPT0gU3RhdHVzLklOX1BST0dSRVNTKSB7DQogICAgICAgICAgICAgIHZhciBpdGVycyA9IDA7DQogICAgICAgICAgICAgIHZhciByZXMgPSB0aGlzLm1fbmF2cXVlcnkudXBkYXRlU2xpY2VkRmluZFBhdGgoaXRlckNvdW50KTsNCiAgICAgICAgICAgICAgaXRlcnMgPSByZXMuZ2V0SXRlcmF0aW9ucygpOw0KICAgICAgICAgICAgICBxLnN0YXR1cyA9IHJlcy5nZXRTdGF0dXMoKTsNCiAgICAgICAgICAgICAgaXRlckNvdW50IC09IGl0ZXJzOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAocS5zdGF0dXMgPT0gU3RhdHVzLlNVQ0NTRVNTIHx8IHEuc3RhdHVzID09IFN0YXR1cy5QQVJUSUFMX1JFU1VMVCkgew0KICAgICAgICAgICAgICB2YXIgcGF0aCA9IHRoaXMubV9uYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoKCk7DQogICAgICAgICAgICAgIHEuc3RhdHVzID0gcGF0aC5nZXRTdGF0dXMoKTsNCiAgICAgICAgICAgICAgcS5wYXRoID0gcGF0aC5nZXRSZWZzKCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChpdGVyQ291bnQgPD0gMCkgYnJlYWs7DQogICAgICAgICAgICB0aGlzLm1fcXVldWVIZWFkKys7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInJlcXVlc3QiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdChzdGFydFJlZiwgZW5kUmVmLCBzdGFydFBvcywgZW5kUG9zLCBmaWx0ZXIpIHsNCiAgICAgICAgICAvLyBGaW5kIGVtcHR5IHNsb3QNCiAgICAgICAgICB2YXIgc2xvdCA9IC0xOw0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXRoUXVldWUuTUFYX1FVRVVFOyArK2kpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm1fcXVldWVbaV0ucmVmID09IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEKSB7DQogICAgICAgICAgICAgIHNsb3QgPSBpOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIENvdWxkIG5vdCBmaW5kIHNsb3QuDQoNCg0KICAgICAgICAgIGlmIChzbG90ID09IC0xKSByZXR1cm4gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQ7DQogICAgICAgICAgdmFyIHJlZiA9IHRoaXMubV9uZXh0SGFuZGxlKys7DQogICAgICAgICAgaWYgKHRoaXMubV9uZXh0SGFuZGxlID09IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEKSB0aGlzLm1fbmV4dEhhbmRsZSsrOw0KICAgICAgICAgIHZhciBxID0gdGhpcy5tX3F1ZXVlW3Nsb3RdOw0KICAgICAgICAgIHEucmVmID0gcmVmOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShxLnN0YXJ0UG9zLCBzdGFydFBvcyk7DQogICAgICAgICAgcS5zdGFydFJlZiA9IHN0YXJ0UmVmOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShxLmVuZFBvcywgZW5kUG9zKTsNCiAgICAgICAgICBxLmVuZFJlZiA9IGVuZFJlZjsNCiAgICAgICAgICBxLnN0YXR1cyA9IG51bGw7DQogICAgICAgICAgcS5maWx0ZXIgPSBmaWx0ZXI7DQogICAgICAgICAgcS5rZWVwQWxpdmUgPSAwOw0KICAgICAgICAgIHJldHVybiByZWY7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UmVxdWVzdFN0YXR1cyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZXF1ZXN0U3RhdHVzKHJlZikgew0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGF0aFF1ZXVlLk1BWF9RVUVVRTsgKytpKSB7DQogICAgICAgICAgICBpZiAodGhpcy5tX3F1ZXVlW2ldLnJlZiA9PSByZWYpIHJldHVybiB0aGlzLm1fcXVldWVbaV0uc3RhdHVzOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBTdGF0dXMuRkFJTFVSRTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRQYXRoUmVzdWx0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhdGhSZXN1bHQocmVmKSB7DQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXRoUXVldWUuTUFYX1FVRVVFOyArK2kpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm1fcXVldWVbaV0ucmVmID09IHJlZikgew0KICAgICAgICAgICAgICB2YXIgcSA9IHRoaXMubV9xdWV1ZVtpXTsgLy8gRnJlZSByZXF1ZXN0IGZvciByZXVzZS4NCg0KICAgICAgICAgICAgICBxLnJlZiA9IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEOw0KICAgICAgICAgICAgICBxLnN0YXR1cyA9IG51bGw7DQogICAgICAgICAgICAgIHJldHVybiBuZXcgRmluZFBhdGhSZXN1bHQoU3RhdHVzLlNVQ0NTRVNTLCBxLnBhdGgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBuZXcgRmluZFBhdGhSZXN1bHQoU3RhdHVzLkZBSUxVUkUsIG51bGwpOw0KICAgICAgICB9DQogICAgICB9XSk7DQoNCiAgICAgIHJldHVybiBQYXRoUXVldWU7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFBhdGhRdWV1ZSwgIk1BWF9RVUVVRSIsIDgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KFBhdGhRdWV1ZSwgIkRUX1BBVEhRX0lOVkFMSUQiLCAwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShQYXRoUXVldWUsICJNQVhfS0VFUF9BTElWRSIsIDIpOw0KDQogICAgLyoqDQogICAgICogUmVwcmVzZW50cyBhIGR5bmFtaWMgcG9seWdvbiBjb3JyaWRvciB1c2VkIHRvIHBsYW4gYWdlbnQgbW92ZW1lbnQuDQogICAgICogDQogICAgICogVGhlIGNvcnJpZG9yIGlzIGxvYWRlZCB3aXRoIGEgcGF0aCwgdXN1YWxseSBvYnRhaW5lZCBmcm9tIGENCiAgICAgKiAjTmF2TWVzaFF1ZXJ5OjpmaW5kUGF0aCgpIHF1ZXJ5LiBUaGUgY29ycmlkb3IgaXMgdGhlbiB1c2VkIHRvIHBsYW4gbG9jYWwNCiAgICAgKiBtb3ZlbWVudCwgd2l0aCB0aGUgY29ycmlkb3IgYXV0b21hdGljYWxseSB1cGRhdGluZyBhcyBuZWVkZWQgdG8gZGVhbCB3aXRoDQogICAgICogaW5hY2N1cmF0ZSBhZ2VudCBsb2NvbW90aW9uLg0KICAgICAqIA0KICAgICAqIEV4YW1wbGUgb2YgYSBjb21tb24gdXNlIGNhc2U6DQogICAgICogDQogICAgICogLSMgQ29uc3RydWN0IHRoZSBjb3JyaWRvciBvYmplY3QgYW5kIGNhbGwgDQogICAgICogLSMgT2J0YWluIGEgcGF0aCBmcm9tIGEgI2R0TmF2TWVzaFF1ZXJ5IG9iamVjdC4gDQogICAgICogLSMgVXNlICNyZXNldCgpIHRvIHNldCB0aGUgYWdlbnQncyBjdXJyZW50IHBvc2l0aW9uLiAoQXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgcGF0aC4pIC0jIFVzZQ0KICAgICAqICNzZXRDb3JyaWRvcigpIHRvIGxvYWQgdGhlIHBhdGggYW5kIHRhcmdldC4gLSMgVXNlICNmaW5kQ29ybmVycygpIHRvIHBsYW4NCiAgICAgKiBtb3ZlbWVudC4gKFRoaXMgaGFuZGxlcyBkeW5hbWljIHBhdGggc3RyYWlnaHRlbmluZy4pIC0jIFVzZSAjbW92ZVBvc2l0aW9uKCkNCiAgICAgKiB0byBmZWVkIGFnZW50IG1vdmVtZW50IGJhY2sgaW50byB0aGUgY29ycmlkb3IuIChUaGUgY29ycmlkb3Igd2lsbA0KICAgICAqIGF1dG9tYXRpY2FsbHkgYWRqdXN0IGFzIG5lZWRlZC4pIC0jIElmIHRoZSB0YXJnZXQgaXMgbW92aW5nLCB1c2UNCiAgICAgKiAjbW92ZVRhcmdldFBvc2l0aW9uKCkgdG8gdXBkYXRlIHRoZSBlbmQgb2YgdGhlIGNvcnJpZG9yLiAoVGhlIGNvcnJpZG9yIHdpbGwNCiAgICAgKiBhdXRvbWF0aWNhbGx5IGFkanVzdCBhcyBuZWVkZWQuKSAtIyBSZXBlYXQgdGhlIHByZXZpb3VzIDMgc3RlcHMgdG8gY29udGludWUNCiAgICAgKiB0byBtb3ZlIHRoZSBhZ2VudC4NCiAgICAgKiANCiAgICAgKiBUaGUgY29ycmlkb3IgcG9zaXRpb24gYW5kIHRhcmdldCBhcmUgYWx3YXlzIGNvbnN0cmFpbmVkIHRvIHRoZSBuYXZpZ2F0aW9uDQogICAgICogbWVzaC4NCiAgICAgKiANCiAgICAgKiBPbmUgb2YgdGhlIGRpZmZpY3VsdGllcyBpbiBtYWludGFpbmluZyBhIHBhdGggaXMgdGhhdCBpbmcgcG9Qb2x5IGVycm9ycywNCiAgICAgKiBsb2NvbW90aW9uIGluYWNjdXJhY2llcywgYW5kL29yIGxvY2FsIHN0ZWVyaW5nIGNhbiByZXN1bHQgaW4gdGhlIGFnZW50DQogICAgICogY3Jvc3NpbmcgdGhlIGJvdW5kYXJ5IG9mIHRoZSBwYXRoIGNvcnJpZG9yLCB0ZW1wb3JhcmlseSBpbnZhbGlkYXRpbmcgdGhlDQogICAgICogcGF0aC4gVGhpcyBjbGFzcyB1c2VzIGxvY2FsIG1lc2ggcXVlcmllcyB0byBkZXRlY3QgYW5kIHVwZGF0ZSB0aGUgY29ycmlkb3IgYXMNCiAgICAgKiBuZWVkZWQgdG8gaGFuZGxlIHRoZXNlIHR5cGVzIG9mIGlzc3Vlcy4NCiAgICAgKiANCiAgICAgKiBUaGUgZmFjdCB0aGF0IGxvY2FsIG1lc2ggcXVlcmllcyBhcmUgdXNlZCB0byBtb3ZlIHRoZSBwb3NpdGlvbiBhbmQgdGFyZ2V0DQogICAgICogbG9jYXRpb25zIHJlc3VsdHMgaW4gdHdvIGJlYWh2aW9ycyB0aGF0IG5lZWQgdG8gYmUgY29uc2lkZXJlZDoNCiAgICAgKiANCiAgICAgKiBFdmVyeSB0aW1lIGEgbW92ZSBmdW5jdGlvbiBpcyB1c2VkIHRoZXJlIGlzIGEgY2hhbmNlIHRoYXQgdGhlIHBhdGggd2lsbA0KICAgICAqIGJlY29tZSBub24tb3B0aW1pYWwuIEJhc2ljYWxseSwgdGhlIGZ1cnRoZXIgdGhlIHRhcmdldCBpcyBtb3ZlZCBmcm9tIGl0cw0KICAgICAqIG9yaWdpbmFsIGxvY2F0aW9uLCBhbmQgdGhlIGZ1cnRoZXIgdGhlIHBvc2l0aW9uIGlzIG1vdmVkIG91dHNpZGUgdGhlIG9yaWdpbmFsDQogICAgICogY29ycmlkb3IsIHRoZSBtb3JlIGxpa2VseSB0aGUgcGF0aCB3aWxsIGJlY29tZSBub24tb3B0aW1hbC4gVGhpcyBpc3N1ZSBjYW4gYmUNCiAgICAgKiBhZGRyZXNzZWQgYnkgcGVyaW9kaWNhbGx5IHJ1bm5pbmcgdGhlICNvcHRpbWl6ZVBhdGhUb3BvbG9neSgpIGFuZA0KICAgICAqICNvcHRpbWl6ZVBhdGhWaXNpYmlsaXR5KCkgbWV0aG9kcy4NCiAgICAgKiANCiAgICAgKiBBbGwgbG9jYWwgbWVzaCBxdWVyaWVzIGhhdmUgZGlzdGFuY2UgbGltaXRhdGlvbnMuIChSZXZpZXcgdGhlICNkdE5hdk1lc2hRdWVyeQ0KICAgICAqIG1ldGhvZHMgZm9yIGRldGFpbHMuKSBTbyB0aGUgbW9zdCBhY2N1cmF0ZSB1c2UgY2FzZSBpcyB0byBtb3ZlIHRoZSBwb3NpdGlvbg0KICAgICAqIGFuZCB0YXJnZXQgaW4gc21hbGwgaW5jcmVtZW50cy4gSWYgYSBsYXJnZSBpbmNyZW1lbnQgaXMgdXNlZCwgdGhlbiB0aGUNCiAgICAgKiBjb3JyaWRvciBtYXkgbm90IGJlIGFibGUgdG8gYWNjdXJhdGVseSBmaW5kIHRoZSBuZXcgbG9jYXRpb24uIEJlY2F1c2Ugb2YgdGhpcw0KICAgICAqIGxpbWlhdGlvbiwgaWYgYSBwb3NpdGlvbiBpcyBtb3ZlZCBpbiBhIGxhcmdlIGluY3JlbWVudCwgdGhlbiBjb21wYXJlIHRoZQ0KICAgICAqIGRlc2lyZWQgYW5kIHJlc3VsdGluZyBwb2x5Z29uIHJlZmVyZW5jZXMuIElmIHRoZSB0d28gZG8gbm90IG1hdGNoLCB0aGVuIHBhdGgNCiAgICAgKiByZXBsYW5uaW5nIG1heSBiZSBuZWVkZWQuIEUuZy4gSWYgeW91IG1vdmUgdGhlIHRhcmdldCwgY2hlY2sgI2dldExhc3RQb2x5KCkNCiAgICAgKiB0byBzZWUgaWYgaXQgaXMgdGhlIGV4cGVjdGVkIHBvbHlnb24uDQogICAgICoNCiAgICAgKi8NCg0KICAgIHZhciBQYXRoQ29ycmlkb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgX2NyZWF0ZUNsYXNzKFBhdGhDb3JyaWRvciwgW3sNCiAgICAgICAga2V5OiAibWVyZ2VDb3JyaWRvclN0YXJ0TW92ZWQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VDb3JyaWRvclN0YXJ0TW92ZWQocGF0aCwgdmlzaXRlZCkgew0KICAgICAgICAgIHZhciBmdXJ0aGVzdFBhdGggPSAtMTsNCiAgICAgICAgICB2YXIgZnVydGhlc3RWaXNpdGVkID0gLTE7IC8vIEZpbmQgZnVydGhlc3QgY29tbW9uIHBvbHlnb24uDQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgew0KICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSB2aXNpdGVkLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7DQogICAgICAgICAgICAgIGlmIChwYXRoW2ldID09IHZpc2l0ZWRbal0pIHsNCiAgICAgICAgICAgICAgICBmdXJ0aGVzdFBhdGggPSBpOw0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0VmlzaXRlZCA9IGo7DQogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChmb3VuZCkgYnJlYWs7DQogICAgICAgICAgfSAvLyBJZiBubyBpbnRlcnNlY3Rpb24gZm91bmQganVzdCByZXR1cm4gY3VycmVudCBwYXRoLg0KDQoNCiAgICAgICAgICBpZiAoZnVydGhlc3RQYXRoID09IC0xIHx8IGZ1cnRoZXN0VmlzaXRlZCA9PSAtMSkgcmV0dXJuIHBhdGg7IC8vIENvbmNhdGVuYXRlIHBhdGhzLg0KICAgICAgICAgIC8vIEFkanVzdCBiZWdpbm5pbmcgb2YgdGhlIGJ1ZmZlciB0byBpbmNsdWRlIHRoZSB2aXNpdGVkLg0KDQogICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOyAvLyBTdG9yZSB2aXNpdGVkDQoNCiAgICAgICAgICBmb3IgKHZhciBfaSA9IHZpc2l0ZWQubGVuZ3RoIC0gMTsgX2kgPiBmdXJ0aGVzdFZpc2l0ZWQ7IC0tX2kpIHsNCiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZpc2l0ZWRbX2ldKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIF90b0NvbnN1bWFibGVBcnJheShwYXRoLnNsaWNlKGZ1cnRoZXN0UGF0aCwgcGF0aC5sZW5ndGgpKSk7DQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtZXJnZUNvcnJpZG9yRW5kTW92ZWQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VDb3JyaWRvckVuZE1vdmVkKHBhdGgsIHZpc2l0ZWQpIHsNCiAgICAgICAgICB2YXIgZnVydGhlc3RQYXRoID0gLTE7DQogICAgICAgICAgdmFyIGZ1cnRoZXN0VmlzaXRlZCA9IC0xOyAvLyBGaW5kIGZ1cnRoZXN0IGNvbW1vbiBwb2x5Z29uLg0KDQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaiA9IHZpc2l0ZWQubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHsNCiAgICAgICAgICAgICAgaWYgKHBhdGhbaV0gPT0gdmlzaXRlZFtqXSkgew0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0UGF0aCA9IGk7DQogICAgICAgICAgICAgICAgZnVydGhlc3RWaXNpdGVkID0gajsNCiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGZvdW5kKSBicmVhazsNCiAgICAgICAgICB9IC8vIElmIG5vIGludGVyc2VjdGlvbiBmb3VuZCBqdXN0IHJldHVybiBjdXJyZW50IHBhdGguDQoNCg0KICAgICAgICAgIGlmIChmdXJ0aGVzdFBhdGggPT0gLTEgfHwgZnVydGhlc3RWaXNpdGVkID09IC0xKSByZXR1cm4gcGF0aDsgLy8gQ29uY2F0ZW5hdGUgcGF0aHMuDQoNCiAgICAgICAgICB2YXIgcmVzdWx0ID0gcGF0aC5zdWJMaXN0KDAsIGZ1cnRoZXN0UGF0aCk7DQogICAgICAgICAgcmVzdWx0LmFkZEFsbCh2aXNpdGVkLnN1Ykxpc3QoZnVydGhlc3RWaXNpdGVkLCB2aXNpdGVkLmxlbmd0aCkpOw0KICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibWVyZ2VDb3JyaWRvclN0YXJ0U2hvcnRjdXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VDb3JyaWRvclN0YXJ0U2hvcnRjdXQocGF0aCwgdmlzaXRlZCkgew0KICAgICAgICAgIHZhciBmdXJ0aGVzdFBhdGggPSAtMTsNCiAgICAgICAgICB2YXIgZnVydGhlc3RWaXNpdGVkID0gLTE7IC8vIEZpbmQgZnVydGhlc3QgY29tbW9uIHBvbHlnb24uDQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkgew0KICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSB2aXNpdGVkLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7DQogICAgICAgICAgICAgIGlmIChwYXRoW2ldID09IHZpc2l0ZWRbal0pIHsNCiAgICAgICAgICAgICAgICBmdXJ0aGVzdFBhdGggPSBpOw0KICAgICAgICAgICAgICAgIGZ1cnRoZXN0VmlzaXRlZCA9IGo7DQogICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChmb3VuZCkgYnJlYWs7DQogICAgICAgICAgfSAvLyBJZiBubyBpbnRlcnNlY3Rpb24gZm91bmQganVzdCByZXR1cm4gY3VycmVudCBwYXRoLg0KDQoNCiAgICAgICAgICBpZiAoZnVydGhlc3RQYXRoID09IC0xIHx8IGZ1cnRoZXN0VmlzaXRlZCA8PSAwKSByZXR1cm4gcGF0aDsgLy8gQ29uY2F0ZW5hdGUgcGF0aHMuDQogICAgICAgICAgLy8gQWRqdXN0IGJlZ2lubmluZyBvZiB0aGUgYnVmZmVyIHRvIGluY2x1ZGUgdGhlIHZpc2l0ZWQuDQoNCiAgICAgICAgICB2YXIgcmVzdWx0ID0gdmlzaXRlZC5zdWJMaXN0KDAsIGZ1cnRoZXN0VmlzaXRlZCk7DQogICAgICAgICAgcmVzdWx0LmFkZEFsbChwYXRoLnN1Ykxpc3QoZnVydGhlc3RQYXRoLCBwYXRoLmxlbmd0aCkpOw0KICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIEFsbG9jYXRlcyB0aGUgY29ycmlkb3IncyBwYXRoIGJ1ZmZlci4NCiAgICAgICAgICovDQoNCiAgICAgIH1dKTsNCg0KICAgICAgZnVuY3Rpb24gUGF0aENvcnJpZG9yKCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF0aENvcnJpZG9yKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fcG9zIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fdGFyZ2V0IiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fcGF0aCIsIFtdKTsNCg0KICAgICAgICB0aGlzLm1fcGF0aCA9IFtdOw0KICAgICAgfQ0KICAgICAgLyoqDQogICAgICAgKiBSZXNldHMgdGhlIHBhdGggY29ycmlkb3IgdG8gdGhlIHNwZWNpZmllZCBwb3NpdGlvbi4NCiAgICAgICAqIEBwYXJhbSByZWYgVGhlIHBvbHlnb24gcmVmZXJlbmNlIGNvbnRhaW5pbmcgdGhlIHBvc2l0aW9uLg0KICAgICAgICogQHBhcmFtIHBvcyBUaGUgbmV3IHBvc2l0aW9uIGluIHRoZSBjb3JyaWRvci4gWyh4LCB5LCB6KV0NCiAgICAgICAqLw0KDQoNCiAgICAgIF9jcmVhdGVDbGFzcyhQYXRoQ29ycmlkb3IsIFt7DQogICAgICAgIGtleTogInJlc2V0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KHJlZiwgcG9zKSB7DQogICAgICAgICAgdGhpcy5tX3BhdGggPSBbXTsNCiAgICAgICAgICB0aGlzLm1fcGF0aC5wdXNoKHJlZik7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV9wb3MsIHBvcyk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV90YXJnZXQsIHBvcyk7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIEZpbmRzIHRoZSBjb3JuZXJzIGluIHRoZSBjb3JyaWRvciBmcm9tIHRoZSBwb3NpdGlvbiB0b3dhcmQgdGhlIHRhcmdldC4NCiAgICAgICAgICogKFRoZSBzdHJhaWdodGVuZWQgcGF0aC4pDQogICAgICAgICAqIA0KICAgICAgICAgKiBUaGlzIGlzIHRoZSBmdW5jdGlvbiB1c2VkIHRvIHBsYW4gbG9jYWwgbW92ZW1lbnQgd2l0aGluIHRoZSBjb3JyaWRvci4gT25lDQogICAgICAgICAqIG9yIG1vcmUgY29ybmVycyBjYW4gYmUgZGV0ZWN0ZWQgaW4gb3JkZXIgdG8gcGxhbiBtb3ZlbWVudC4gSXQgcGVyZm9ybXMNCiAgICAgICAgICogZXNzZW50aWFsbHkgdGhlIHNhbWUgZnVuY3Rpb24gYXMgI2R0TmF2TWVzaFF1ZXJ5OjpmaW5kU3RyYWlnaHRQYXRoLg0KICAgICAgICAgKiANCiAgICAgICAgICogRHVlIHRvIGludGVybmFsIG9wdGltaXphdGlvbnMsIHRoZSBtYXhpbXVtIG51bWJlciBvZiBjb3JuZXJzIHJldHVybmVkDQogICAgICAgICAqIHdpbGwgYmUgKEBwIG1heENvcm5lcnMgLSAxKSBGb3IgZXhhbXBsZTogSWYgdGhlIGJ1ZmZlcnMgYXJlIHNpemVkIHRvIGhvbGQNCiAgICAgICAgICogMTAgY29ybmVycywgdGhlIGZ1bmN0aW9uIHdpbGwgbmV2ZXIgcmV0dXJuIG1vcmUgdGhhbiA5IGNvcm5lcnMuIFNvIGlmIDEwDQogICAgICAgICAqIGNvcm5lcnMgYXJlIG5lZWRlZCwgdGhlIGJ1ZmZlcnMgc2hvdWxkIGJlIHNpemVkIGZvciAxMSBjb3JuZXJzLg0KICAgICAgICAgKiANCiAgICAgICAgICogSWYgdGhlIHRhcmdldCBpcyB3aXRoaW4gcmFuZ2UsIGl0IHdpbGwgYmUgdGhlIGxhc3QgY29ybmVyIGFuZCBoYXZlIGENCiAgICAgICAgICogcG9seWdvbiByZWZlcmVuY2UgaWQgb2YgemVyby4NCiAgICAgICAgICogQHBhcmFtIGZpbHRlciANCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbVtpbl0gbmF2cXVlcnkgVGhlIHF1ZXJ5IG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBjb3JyaWRvci4NCiAgICAgICAgICogQHJldHVybiBDb3JuZXJzDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpbmRDb3JuZXJzIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRDb3JuZXJzKG1heENvcm5lcnMsIG5hdnF1ZXJ5LCBmaWx0ZXIpIHsNCiAgICAgICAgICB2YXIgTUlOX1RBUkdFVF9ESVNUID0gRGV0b3VyQ29tbW9uLnNxcigwLjAxKTsNCiAgICAgICAgICB2YXIgcGF0aCA9IG5hdnF1ZXJ5LmZpbmRTdHJhaWdodFBhdGgodGhpcy5tX3BvcywgdGhpcy5tX3RhcmdldCwgdGhpcy5tX3BhdGgsIG1heENvcm5lcnMsIDApOyAvLyBQcnVuZSBwb2ludHMgaW4gdGhlIGJlZ2lubmluZyBvZiB0aGUgcGF0aCB3aGljaCBhcmUgdG9vIGNsb3NlLg0KICAgICAgICAgIC8vIGZvciAobGV0IGl0ZXIgPSBwYXRoLml0ZXJhdG9yKCk7IGl0ZXIuaGFzTmV4dCgpOykgew0KICAgICAgICAgIC8vIAlsZXQgc3BpID0gaXRlci5uZXh0KCk7DQogICAgICAgICAgLy8gCWlmICgoc3BpLmdldEZsYWdzKCkgJiBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX09GRk1FU0hfQ09OTkVDVElPTikgIT0gMA0KICAgICAgICAgIC8vIAkJfHwgRGV0b3VyQ29tbW9uLnZEaXN0MkQoc3BpLmdldFBvcygpLCB0aGlzLm1fcG9zKSA+IE1JTl9UQVJHRVRfRElTVCkgew0KICAgICAgICAgIC8vIAkJYnJlYWs7DQogICAgICAgICAgLy8gCX0NCiAgICAgICAgICAvLyAJaXRlci5yZW1vdmUoKTsNCiAgICAgICAgICAvLyB9DQogICAgICAgICAgLy8gVE9ETw0KDQogICAgICAgICAgdmFyIG5ld1BhdGggPSBbXTsNCiAgICAgICAgICB2YXIgaSA9IDA7DQogICAgICAgICAgdmFyIGwgPSBwYXRoLmxlbmd0aDsNCg0KICAgICAgICAgIGZvciAoOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdmFyIHNwaSA9IHBhdGhbaV07DQoNCiAgICAgICAgICAgIGlmICgoc3BpLmdldEZsYWdzKCkgJiBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX09GRk1FU0hfQ09OTkVDVElPTikgIT0gMCB8fCBEZXRvdXJDb21tb24udkRpc3QyRChzcGkuZ2V0UG9zKCksIHRoaXMubV9wb3MpID4gTUlOX1RBUkdFVF9ESVNUKSB7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBqID0gaTsgLy8gZm9yKDsgaiA8IGw7IGorKyk7DQogICAgICAgICAgLy8gew0KICAgICAgICAgIC8vIAluZXdQYXRoLnB1c2gocGF0aFtqXSkNCiAgICAgICAgICAvLyB9DQoNCiAgICAgICAgICB3aGlsZSAoaiA8IGwpIHsNCiAgICAgICAgICAgIG5ld1BhdGgucHVzaChwYXRoW2pdKTsNCiAgICAgICAgICAgIGorKzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBwYXRoID0gbmV3UGF0aDsNCiAgICAgICAgICByZXR1cm4gcGF0aDsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogQXR0ZW1wdHMgdG8gb3B0aW1pemUgdGhlIHBhdGggaWYgdGhlIHNwZWNpZmllZCBwb1BvbHkgaXMgdmlzaWJsZSBmcm9tIHRoZQ0KICAgICAgICAgKiBjdXJyZW50IHBvc2l0aW9uLg0KICAgICAgICAgKiANCiAgICAgICAgICogSW5hY2N1cmF0ZSBsb2NvbW90aW9uIG9yIGR5bmFtaWMgb2JzdGFjbGUgYXZvaWRhbmNlIGNhbiBmb3JjZSB0aGUgYWdlbnQNCiAgICAgICAgICogcG9zaXRpb24gc2lnbmlmaWNhbnRseSBvdXRzaWRlIHRoZSBvcmlnaW5hbCBjb3JyaWRvci4gT3ZlciB0aW1lIHRoaXMgY2FuDQogICAgICAgICAqIHJlc3VsdCBpbiB0aGUgZm9ybWF0aW9uIG9mIGEgbm9uLW9wdGltYWwgY29ycmlkb3IuIE5vbi1vcHRpbWFsIHBhdGhzIGNhbg0KICAgICAgICAgKiBhbHNvIGZvcm0gbmVhciB0aGUgY29ybmVycyBvZiB0aWxlcy4NCiAgICAgICAgICogDQogICAgICAgICAqIFRoaXMgZnVuY3Rpb24gdXNlcyBhbiBlZmZpY2llbnQgbG9jYWwgdmlzaWJpbGl0eSBzZWFyY2ggdG8gdHJ5IHRvDQogICAgICAgICAqIG9wdGltaXplIHRoZSBjb3JyaWRvciBiZXR3ZWVuIHRoZSBjdXJyZW50IHBvc2l0aW9uIGFuZCBAcCBuZXh0Lg0KICAgICAgICAgKiANCiAgICAgICAgICogVGhlIGNvcnJpZG9yIHdpbGwgY2hhbmdlIG9ubHkgaWYgQHAgbmV4dCBpcyB2aXNpYmxlIGZyb20gdGhlIGN1cnJlbnQNCiAgICAgICAgICogcG9zaXRpb24gYW5kIG1vdmluZyBkaXJlY3RseSB0b3dhcmQgdGhlIHBvUG9seSBpcyBiZXR0ZXIgdGhhbiBmb2xsb3dpbmcNCiAgICAgICAgICogdGhlIGV4aXN0aW5nIHBhdGguDQogICAgICAgICAqIA0KICAgICAgICAgKiBUaGUgbW9yZSBpbmFjY3VyYXRlIHRoZSBhZ2VudCBtb3ZlbWVudCwgdGhlIG1vcmUgYmVuZWZpY2lhbCB0aGlzIGZ1bmN0aW9uDQogICAgICAgICAqIGJlY29tZXMuIFNpbXBseSBhZGp1c3QgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgY2FsbCB0byBtYXRjaCB0aGUgbmVlZHMgdG8NCiAgICAgICAgICogdGhlIGFnZW50Lg0KICAgICAgICAgKiANCiAgICAgICAgICogVGhpcyBmdW5jdGlvbiBpcyBub3Qgc3VpdGFibGUgZm9yIGxldCBkaXN0YW5jZSBzZWFyY2hlcy4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSBuZXh0DQogICAgICAgICAqICAgICAgICAgICAgVGhlIHBvUG9seSB0byBzZWFyY2ggdG93YXJkLiBbKHgsIHksIHpdKQ0KICAgICAgICAgKiBAcGFyYW0gcGF0aE9wdGltaXphdGlvblJhbmdlDQogICAgICAgICAqICAgICAgICAgICAgVGhlIG1heGltdW0gcmFuZ2UgdG8gc2VhcmNoLiBbTGltaXQ6ID4gMF0NCiAgICAgICAgICogQHBhcmFtIG5hdnF1ZXJ5DQogICAgICAgICAqICAgICAgICAgICAgVGhlIHF1ZXJ5IG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBjb3JyaWRvci4NCiAgICAgICAgICogQHBhcmFtIGZpbHRlcg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIG9wZXJhdGlvbi4NCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3B0aW1pemVQYXRoVmlzaWJpbGl0eSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcHRpbWl6ZVBhdGhWaXNpYmlsaXR5KG5leHQsIHBhdGhPcHRpbWl6YXRpb25SYW5nZSwgbmF2cXVlcnksIGZpbHRlcikgew0KICAgICAgICAgIC8vIENsYW1wIHRoZSByYXkgdG8gbWF4IGRpc3RhbmNlLg0KICAgICAgICAgIHZhciBkaXN0ID0gRGV0b3VyQ29tbW9uLnZEaXN0MkQodGhpcy5tX3BvcywgbmV4dCk7IC8vIElmIHRvbyBjbG9zZSB0byB0aGUgZ29hbCwgZG8gbm90IHRyeSB0byBvcHRpbWl6ZS4NCg0KICAgICAgICAgIGlmIChkaXN0IDwgMC4wMSkgcmV0dXJuOyAvLyBPdmVyc2hvb3QgYSBsaXR0bGUuIFRoaXMgaGVscHMgdG8gb3B0aW1pemUgb3BlbiBmaWVsZHMgaW4gdGlsZWQNCiAgICAgICAgICAvLyBtZXNoZXMuDQoNCiAgICAgICAgICBkaXN0ID0gTWF0aC5taW4oZGlzdCArIDAuMDEsIHBhdGhPcHRpbWl6YXRpb25SYW5nZSk7IC8vIEFkanVzdCByYXkgbGVuZ3RoLg0KDQogICAgICAgICAgdmFyIGRlbHRhID0gRGV0b3VyQ29tbW9uLnZTdWIobmV4dCwgdGhpcy5tX3Bvcyk7DQogICAgICAgICAgdmFyIGdvYWwgPSBEZXRvdXJDb21tb24udk1hZCh0aGlzLm1fcG9zLCBkZWx0YSwgcGF0aE9wdGltaXphdGlvblJhbmdlIC8gZGlzdCk7DQogICAgICAgICAgdmFyIHJjID0gbmF2cXVlcnkucmF5Y2FzdCh0aGlzLm1fcGF0aFswXSwgdGhpcy5tX3BvcywgZ29hbCwgZmlsdGVyLCAwLCAwKTsNCg0KICAgICAgICAgIGlmIChyYy5wYXRoLmxlbmd0aCA+IDEgJiYgcmMudCA+IDAuOTkpIHsNCiAgICAgICAgICAgIHRoaXMubV9wYXRoID0gdGhpcy5tZXJnZUNvcnJpZG9yU3RhcnRTaG9ydGN1dCh0aGlzLm1fcGF0aCwgcmMucGF0aCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBBdHRlbXB0cyB0byBvcHRpbWl6ZSB0aGUgcGF0aCB1c2luZyBhIGxvY2FsIGFyZWEgc2VhcmNoLiAoUGFydGlhbA0KICAgICAgICAgKiByZXBsYW5uaW5nLikNCiAgICAgICAgICogDQogICAgICAgICAqIEluYWNjdXJhdGUgbG9jb21vdGlvbiBvciBkeW5hbWljIG9ic3RhY2xlIGF2b2lkYW5jZSBjYW4gZm9yY2UgdGhlIGFnZW50DQogICAgICAgICAqIHBvc2l0aW9uIHNpZ25pZmljYW50bHkgb3V0c2lkZSB0aGUgb3JpZ2luYWwgY29ycmlkb3IuIE92ZXIgdGltZSB0aGlzIGNhbg0KICAgICAgICAgKiByZXN1bHQgaW4gdGhlIGZvcm1hdGlvbiBvZiBhIG5vbi1vcHRpbWFsIGNvcnJpZG9yLiBUaGlzIGZ1bmN0aW9uIHdpbGwgdXNlDQogICAgICAgICAqIGEgbG9jYWwgYXJlYSBwYXRoIHNlYXJjaCB0byB0cnkgdG8gcmUtb3B0aW1pemUgdGhlIGNvcnJpZG9yLg0KICAgICAgICAgKiANCiAgICAgICAgICogVGhlIG1vcmUgaW5hY2N1cmF0ZSB0aGUgYWdlbnQgbW92ZW1lbnQsIHRoZSBtb3JlIGJlbmVmaWNpYWwgdGhpcyBmdW5jdGlvbg0KICAgICAgICAgKiBiZWNvbWVzLiBTaW1wbHkgYWRqdXN0IHRoZSBmcmVxdWVuY3kgb2YgdGhlIGNhbGwgdG8gbWF0Y2ggdGhlIG5lZWRzIHRvDQogICAgICAgICAqIHRoZSBhZ2VudC4NCiAgICAgICAgICogDQogICAgICAgICAqIEBwYXJhbSBuYXZxdWVyeSBUaGUgcXVlcnkgb2JqZWN0IHVzZWQgdG8gYnVpbGQgdGhlIGNvcnJpZG9yLg0KICAgICAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIG9wZXJhdGlvbi4NCiAgICAgICAgICogDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogIm9wdGltaXplUGF0aFRvcG9sb2d5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wdGltaXplUGF0aFRvcG9sb2d5KG5hdnF1ZXJ5LCBmaWx0ZXIpIHsNCiAgICAgICAgICBpZiAodGhpcy5tX3BhdGgubGVuZ3RoIDwgMykgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIHZhciBNQVhfSVRFUiA9IDMyOw0KICAgICAgICAgIG5hdnF1ZXJ5LmluaXRTbGljZWRGaW5kUGF0aCh0aGlzLm1fcGF0aFswXSwgdGhpcy5tX3BhdGhbdGhpcy5tX3BhdGgubGVuZ3RoIC0gMV0sIHRoaXMubV9wb3MsIHRoaXMubV90YXJnZXQsIGZpbHRlciwgMCk7DQogICAgICAgICAgbmF2cXVlcnkudXBkYXRlU2xpY2VkRmluZFBhdGgoTUFYX0lURVIpOw0KICAgICAgICAgIHZhciBmcHIgPSBuYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoUGFydGlhbCh0aGlzLm1fcGF0aCk7DQoNCiAgICAgICAgICBpZiAoZnByLmdldFN0YXR1cygpLmlzU3VjY2VzcygpICYmIGZwci5nZXRSZWZzKCkubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgdGhpcy5tX3BhdGggPSBtZXJnZUNvcnJpZG9yU3RhcnRTaG9ydGN1dCh0aGlzLm1fcGF0aCwgZnByLmdldFJlZnMoKSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibW92ZU92ZXJPZmZtZXNoQ29ubmVjdGlvbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlT3Zlck9mZm1lc2hDb25uZWN0aW9uKG9mZk1lc2hDb25SZWYsIHJlZnMsIHN0YXJ0LCBlbmQsIG5hdnF1ZXJ5KSB7DQogICAgICAgICAgLy8gQWR2YW5jZSB0aGUgcGF0aCB1cCB0byBhbmQgb3ZlciB0aGUgb2ZmLW1lc2ggY29ubmVjdGlvbi4NCiAgICAgICAgICB2YXIgcHJldlJlZiA9IDA7DQogICAgICAgICAgdmFyIHBvbHlSZWYgPSB0aGlzLm1fcGF0aFswXTsNCiAgICAgICAgICB2YXIgbnBvcyA9IDA7DQoNCiAgICAgICAgICB3aGlsZSAobnBvcyA8IHRoaXMubV9wYXRoLmxlbmd0aCAmJiBwb2x5UmVmICE9IG9mZk1lc2hDb25SZWYpIHsNCiAgICAgICAgICAgIHByZXZSZWYgPSBwb2x5UmVmOw0KICAgICAgICAgICAgcG9seVJlZiA9IHRoaXMubV9wYXRoW25wb3NdOw0KICAgICAgICAgICAgbnBvcysrOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmIChucG9zID09IHRoaXMubV9wYXRoLmxlbmd0aCkgew0KICAgICAgICAgICAgLy8gQ291bGQgbm90IGZpbmQgb2ZmTWVzaENvblJlZg0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0gLy8gUHJ1bmUgcGF0aA0KDQoNCiAgICAgICAgICB0aGlzLm1fcGF0aCA9IHRoaXMubV9wYXRoLnN1Ykxpc3QobnBvcywgdGhpcy5tX3BhdGgubGVuZ3RoKTsNCiAgICAgICAgICByZWZzWzBdID0gcHJldlJlZjsNCiAgICAgICAgICByZWZzWzFdID0gcG9seVJlZjsNCiAgICAgICAgICB2YXIgbmF2ID0gbmF2cXVlcnkuZ2V0QXR0YWNoZWROYXZNZXNoKCk7DQogICAgICAgICAgdmFyIHN0YXJ0RW5kID0gbmF2LmdldE9mZk1lc2hDb25uZWN0aW9uUG9seUVuZFBvaW50cyhyZWZzWzBdLCByZWZzWzFdKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3Bvcywgc3RhcnRFbmQuc2Vjb25kKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc3RhcnQsIHN0YXJ0RW5kLmZpcnN0KTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoZW5kLCBzdGFydEVuZC5zZWNvbmQpOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBNb3ZlcyB0aGUgcG9zaXRpb24gZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbiB0byB0aGUgZGVzaXJlZCBsb2NhdGlvbiwNCiAgICAgICAgICogYWRqdXN0aW5nIHRoZSBjb3JyaWRvciBhcyBuZWVkZWQgdG8gcmVmbGVjdCB0aGUgY2hhbmdlLg0KICAgICAgICAgKiANCiAgICAgICAgICogQmVoYXZpb3I6DQogICAgICAgICAqIA0KICAgICAgICAgKiAtIFRoZSBtb3ZlbWVudCBpcyBjb25zdHJhaW5lZCB0byB0aGUgc3VyZmFjZSBvZiB0aGUgbmF2aWdhdGlvbiBtZXNoLiAtDQogICAgICAgICAqIFRoZSBjb3JyaWRvciBpcyBhdXRvbWF0aWNhbGx5IGFkanVzdGVkIChzaG9ydGVkIG9yIGxlbmd0aGVuZWQpIGluIG9yZGVyDQogICAgICAgICAqIHRvIHJlbWFpbiB2YWxpZC4gLSBUaGUgbmV3IHBvc2l0aW9uIHdpbGwgYmUgbG9jYXRlZCBpbiB0aGUgYWRqdXN0ZWQNCiAgICAgICAgICogY29ycmlkb3IncyBmaXJzdCBwb2x5Z29uLg0KICAgICAgICAgKiANCiAgICAgICAgICogVGhlIGV4cGVjdGVkIHVzZSBjYXNlIGlzIHRoYXQgdGhlIGRlc2lyZWQgcG9zaXRpb24gd2lsbCBiZSAnbmVhcicgdGhlDQogICAgICAgICAqIGN1cnJlbnQgY29ycmlkb3IuIFdoYXQgaXMgY29uc2lkZXJlZCAnbmVhcicgZGVwZW5kcyBvbiBsb2NhbCBwb2x5Z29uDQogICAgICAgICAqIGRlbnNpdHksIHF1ZXJ5IHNlYXJjaCBleHRlbnRzLCBldGMuDQogICAgICAgICAqIA0KICAgICAgICAgKiBUaGUgcmVzdWx0aW5nIHBvc2l0aW9uIHdpbGwgZGlmZmVyIGZyb20gdGhlIGRlc2lyZWQgcG9zaXRpb24gaWYgdGhlDQogICAgICAgICAqIGRlc2lyZWQgcG9zaXRpb24gaXMgbm90IG9uIHRoZSBuYXZpZ2F0aW9uIG1lc2gsIG9yIGl0IGNhbid0IGJlIHJlYWNoZWQNCiAgICAgICAgICogdXNpbmcgYSBsb2NhbCBzZWFyY2guDQogICAgICAgICAqIA0KICAgICAgICAgKiBAcGFyYW0gbnBvcw0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBkZXNpcmVkIG5ldyBwb3NpdGlvbi4gWyh4LCB5LCB6KV0NCiAgICAgICAgICogQHBhcmFtIG5hdnF1ZXJ5DQogICAgICAgICAqICAgICAgICAgICAgVGhlIHF1ZXJ5IG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBjb3JyaWRvci4NCiAgICAgICAgICogQHBhcmFtIGZpbHRlcg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIG9wZXJhdGlvbi4NCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAibW92ZVBvc2l0aW9uIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVQb3NpdGlvbihucG9zLCBuYXZxdWVyeSwgZmlsdGVyKSB7DQogICAgICAgICAgLy8gTW92ZSBhUG9seSBuYXZtZXNoIGFuZCB1cGRhdGUgbmV3IHBvc2l0aW9uLg0KICAgICAgICAgIHZhciBtYXNSZXN1bHQgPSBuYXZxdWVyeS5tb3ZlQWxvbmdTdXJmYWNlKHRoaXMubV9wYXRoWzBdLCB0aGlzLm1fcG9zLCBucG9zLCBmaWx0ZXIpOw0KICAgICAgICAgIHRoaXMubV9wYXRoID0gdGhpcy5tZXJnZUNvcnJpZG9yU3RhcnRNb3ZlZCh0aGlzLm1fcGF0aCwgbWFzUmVzdWx0LmdldFZpc2l0ZWQoKSk7IC8vIEFkanVzdCB0aGUgcG9zaXRpb24gdG8gc3RheSBvbiB0b3Agb2YgdGhlIG5hdm1lc2guDQoNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3BvcywgbWFzUmVzdWx0LmdldFJlc3VsdFBvcygpKTsNCg0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICB0aGlzLm1fcG9zWzFdID0gbmF2cXVlcnkuZ2V0UG9seUhlaWdodCh0aGlzLm1fcGF0aFswXSwgbWFzUmVzdWx0LmdldFJlc3VsdFBvcygpKTsNCiAgICAgICAgICB9IGNhdGNoIChlKSB7Ly8gU2lsZW50bHkgZGlzcmVnYXJkIHRoZSByZXR1cm5lZCBzdGF0dXMgb2YgRFRfRkFJTFVSRSB8IERUX0lOVkFMSURfUEFSQU0gdG8gc3RheQ0KICAgICAgICAgICAgLy8gY29uc2lzdGVudCB3aXRoIHdoYXQgdGhlIGxpYnJhcnkgaW4gQysrIGRvZXMsIHNlZSBEZXRvdXJQYXRoQ29ycmlkb3IuY3BwLg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogTW92ZXMgdGhlIHRhcmdldCBmcm9tIHRoZSBjdXJlbnQgbG9jYXRpb24gdG8gdGhlIGRlc2lyZWQgbG9jYXRpb24sDQogICAgICAgICAqIGFkanVzdGluZyB0aGUgY29ycmlkb3IgYXMgbmVlZGVkIHRvIHJlZmxlY3QgdGhlIGNoYW5nZS4gQmVoYXZpb3I6IC0gVGhlDQogICAgICAgICAqIG1vdmVtZW50IGlzIGNvbnN0cmFpbmVkIHRvIHRoZSBzdXJmYWNlIG9mIHRoZSBuYXZpZ2F0aW9uIG1lc2guIC0gVGhlDQogICAgICAgICAqIGNvcnJpZG9yIGlzIGF1dG9tYXRpY2FsbHkgYWRqdXN0ZWQgKHNob3J0ZWQgb3IgbGVuZ3RoZW5lZCkgaW4gb3JkZXIgdG8NCiAgICAgICAgICogcmVtYWluIHZhbGlkLiAtIFRoZSBuZXcgdGFyZ2V0IHdpbGwgYmUgbG9jYXRlZCBpbiB0aGUgYWRqdXN0ZWQgY29ycmlkb3Incw0KICAgICAgICAgKiBsYXN0IHBvbHlnb24uDQogICAgICAgICAqIA0KICAgICAgICAgKiBUaGUgZXhwZWN0ZWQgdXNlIGNhc2UgaXMgdGhhdCB0aGUgZGVzaXJlZCB0YXJnZXQgd2lsbCBiZSAnbmVhcicgdGhlDQogICAgICAgICAqIGN1cnJlbnQgY29ycmlkb3IuIFdoYXQgaXMgY29uc2lkZXJlZCAnbmVhcicgZGVwZW5kcyBvbiBsb2NhbCBwb2x5Z29uDQogICAgICAgICAqIGRlbnNpdHksIHF1ZXJ5IHNlYXJjaCBleHRlbnRzLCBldGMuIFRoZSByZXN1bHRpbmcgdGFyZ2V0IHdpbGwgZGlmZmVyIGZyb20NCiAgICAgICAgICogdGhlIGRlc2lyZWQgdGFyZ2V0IGlmIHRoZSBkZXNpcmVkIHRhcmdldCBpcyBub3Qgb24gdGhlIG5hdmlnYXRpb24gbWVzaCwNCiAgICAgICAgICogb3IgaXQgY2FuJ3QgYmUgcmVhY2hlZCB1c2luZyBhIGxvY2FsIHNlYXJjaC4NCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIG5wb3MNCiAgICAgICAgICogICAgICAgICAgICBUaGUgZGVzaXJlZCBuZXcgdGFyZ2V0IHBvc2l0aW9uLiBbKHgsIHksIHopXQ0KICAgICAgICAgKiBAcGFyYW0gbmF2cXVlcnkNCiAgICAgICAgICogICAgICAgICAgICBUaGUgcXVlcnkgb2JqZWN0IHVzZWQgdG8gYnVpbGQgdGhlIGNvcnJpZG9yLg0KICAgICAgICAgKiBAcGFyYW0gZmlsdGVyDQogICAgICAgICAqICAgICAgICAgICAgVGhlIGZpbHRlciB0byBhcHBseSB0byB0aGUgb3BlcmF0aW9uLg0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJtb3ZlVGFyZ2V0UG9zaXRpb24iLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZVRhcmdldFBvc2l0aW9uKG5wb3MsIG5hdnF1ZXJ5LCBmaWx0ZXIpIHsNCiAgICAgICAgICAvLyBNb3ZlIGFQb2x5IG5hdm1lc2ggYW5kIHVwZGF0ZSBuZXcgcG9zaXRpb24uDQogICAgICAgICAgdmFyIG1hc1Jlc3VsdCA9IG5hdnF1ZXJ5Lm1vdmVBbG9uZ1N1cmZhY2UodGhpcy5tX3BhdGhbdGhpcy5tX3BhdGgubGVuZ3RoIC0gMV0sIHRoaXMubV90YXJnZXQsIG5wb3MsIGZpbHRlcik7DQogICAgICAgICAgdGhpcy5tX3BhdGggPSBtZXJnZUNvcnJpZG9yRW5kTW92ZWQodGhpcy5tX3BhdGgsIG1hc1Jlc3VsdC5nZXRWaXNpdGVkKCkpOyAvLyBUT0RPOiBzaG91bGQgd2UgZG8gdGhhdD8NCiAgICAgICAgICAvLyBBZGp1c3QgdGhlIHBvc2l0aW9uIHRvIHN0YXkgb24gdG9wIG9mIHRoZSBuYXZtZXNoLg0KDQogICAgICAgICAgLyoNCiAgICAgICAgICAgKiAgaCA9IG1fdGFyZ2V0WzFdOyBuYXZxdWVyeT0+Z2V0UG9seUhlaWdodCh0aGlzLm1fcGF0aFttX25wYXRoLTFdLA0KICAgICAgICAgICAqIHJlc3VsdCwgJmgpOyByZXN1bHRbMV0gPSBoOw0KICAgICAgICAgICAqLw0KDQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV90YXJnZXQsIG1hc1Jlc3VsdC5nZXRSZXN1bHRQb3MoKSk7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIExvYWRzIGEgbmV3IHBhdGggYW5kIHRhcmdldCBpbnRvIHRoZSBjb3JyaWRvci4gVGhlIGN1cnJlbnQgY29ycmlkb3INCiAgICAgICAgICogcG9zaXRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgd2l0aGluIHRoZSBmaXJzdCBwb2x5Z29uIGluIHRoZSBwYXRoLiBUaGUNCiAgICAgICAgICogdGFyZ2V0IGlzIGV4cGVjdGVkIHRvIGJlIGluIHRoZSBsYXN0IHBvbHlnb24uDQogICAgICAgICAqIA0KICAgICAgICAgKiBAd2FybmluZyBUaGUgc2l6ZSBvZiB0aGUgcGF0aCBtdXN0IG5vdCBleGNlZWQgdGhlIHNpemUgb2YgY29ycmlkb3IncyBwYXRoDQogICAgICAgICAqICAgICAgICAgIGJ1ZmZlciBzZXQgZHVyaW5nICNpbml0KCkuDQogICAgICAgICAqIEBwYXJhbSB0YXJnZXQNCiAgICAgICAgICogICAgICAgICAgICBUaGUgdGFyZ2V0IGxvY2F0aW9uIHdpdGhpbiB0aGUgbGFzdCBwb2x5Z29uIG9mIHRoZSBwYXRoLiBbKHgsDQogICAgICAgICAqICAgICAgICAgICAgeSwgeildDQogICAgICAgICAqIEBwYXJhbSBwYXRoDQogICAgICAgICAqICAgICAgICAgICAgVGhlIHBhdGggY29ycmlkb3IuDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogInNldENvcnJpZG9yIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvcnJpZG9yKHRhcmdldCwgcGF0aCkgew0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fdGFyZ2V0LCB0YXJnZXQpOw0KICAgICAgICAgIHRoaXMubV9wYXRoID0gX3RvQ29uc3VtYWJsZUFycmF5KHBhdGgpOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImZpeFBhdGhTdGFydCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaXhQYXRoU3RhcnQoc2FmZVJlZiwgc2FmZVBvcykgew0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcG9zLCBzYWZlUG9zKTsNCg0KICAgICAgICAgIGlmICh0aGlzLm1fcGF0aC5sZW5ndGggPCAzICYmIHRoaXMubV9wYXRoLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHZhciBwID0gdGhpcy5tX3BhdGhbdGhpcy5tX3BhdGgubGVuZ3RoIC0gMV07DQogICAgICAgICAgICB0aGlzLm1fcGF0aCA9IFtdOw0KICAgICAgICAgICAgdGhpcy5tX3BhdGgucHVzaChzYWZlUmVmKTsNCiAgICAgICAgICAgIHRoaXMubV9wYXRoLnB1c2goMCk7DQogICAgICAgICAgICB0aGlzLm1fcGF0aC5wdXNoKHApOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm1fcGF0aCA9IFtdOw0KICAgICAgICAgICAgdGhpcy5tX3BhdGgucHVzaChzYWZlUmVmKTsNCiAgICAgICAgICAgIHRoaXMubV9wYXRoLnB1c2goMCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInRyaW1JbnZhbGlkUGF0aCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmltSW52YWxpZFBhdGgoc2FmZVJlZiwgc2FmZVBvcywgbmF2cXVlcnksIGZpbHRlcikgew0KICAgICAgICAgIC8vIEtlZXAgdmFsaWQgcGF0aCBhcyBmYXIgYXMgcG9zc2libGUuDQogICAgICAgICAgdmFyIG4gPSAwOw0KDQogICAgICAgICAgd2hpbGUgKG4gPCB0aGlzLm1fcGF0aC5sZW5ndGggJiYgbmF2cXVlcnkuaXNWYWxpZFBvbHlSZWYodGhpcy5tX3BhdGhbbl0sIGZpbHRlcikpIHsNCiAgICAgICAgICAgIG4rKzsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAobiA9PSAwKSB7DQogICAgICAgICAgICAvLyBUaGUgZmlyc3QgcG9seXJlZiBpcyBiYWQsIHVzZSBjdXJyZW50IHNhZmUgdmFsdWVzLg0KICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV9wb3MsIHNhZmVQb3MpOw0KICAgICAgICAgICAgdGhpcy5tX3BhdGggPSBbXTsNCiAgICAgICAgICAgIHRoaXMubV9wYXRoLnB1c2goc2FmZVJlZik7DQogICAgICAgICAgfSBlbHNlIGlmIChuIDwgdGhpcy5tX3BhdGgubGVuZ3RoKSB7DQogICAgICAgICAgICB0aGlzLm1fcGF0aCA9IHRoaXMubV9wYXRoLnN1Ykxpc3QoMCwgbik7IC8vIFRoZSBwYXRoIGlzIHBhcnRpYWxseSB1c2FibGUuDQogICAgICAgICAgfSAvLyBDbGFtcCB0YXJnZXQgcG9zIHRvIGxhc3QgcG9seQ0KDQoNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3RhcmdldCwgbmF2cXVlcnkuY2xvc2VzdFBvaW50T25Qb2x5Qm91bmRhcnkodGhpcy5tX3BhdGhbdGhpcy5tX3BhdGgubGVuZ3RoIC0gMV0sIHRoaXMubV90YXJnZXQpKTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogQ2hlY2tzIHRoZSBjdXJyZW50IGNvcnJpZG9yIHBhdGggdG8gc2VlIGlmIGl0cyBwb2x5Z29uIHJlZmVyZW5jZXMgcmVtYWluDQogICAgICAgICAqIHZhbGlkLiBUaGUgcGF0aCBjYW4gYmUgaW52YWxpZGF0ZWQgaWYgdGhlcmUgYXJlIHN0cnVjdHVyYWwgY2hhbmdlcyB0byB0aGUNCiAgICAgICAgICogdW5kZXJseWluZyBuYXZpZ2F0aW9uIG1lc2gsIG9yIHRoZSBzdGF0ZSBvZiBhIHBvbHlnb24gd2l0aGluIHRoZSBwYXRoDQogICAgICAgICAqIGNoYW5nZXMgcmVzdWx0aW5nIGluIGl0IGJlaW5nIGZpbHRlcmVkIG91dC4gKEUuZy4gQW4gZXhjbHVzaW9uIG9yDQogICAgICAgICAqIGluY2x1c2lvbiBmbGFnIGNoYW5nZXMuKQ0KICAgICAgICAgKiANCiAgICAgICAgICogQHBhcmFtIG1heExvb2tBaGVhZA0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBudW1iZXIgb2YgcG9seWdvbnMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb3JyaWRvciB0bw0KICAgICAgICAgKiAgICAgICAgICAgIHNlYXJjaC4NCiAgICAgICAgICogQHBhcmFtIG5hdnF1ZXJ5DQogICAgICAgICAqICAgICAgICAgICAgVGhlIHF1ZXJ5IG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBjb3JyaWRvci4NCiAgICAgICAgICogQHBhcmFtIGZpbHRlcg0KICAgICAgICAgKiAgICAgICAgICAgIFRoZSBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIG9wZXJhdGlvbi4NCiAgICAgICAgICogQHJldHVybg0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc1ZhbGlkIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzVmFsaWQobWF4TG9va0FoZWFkLCBuYXZxdWVyeSwgZmlsdGVyKSB7DQogICAgICAgICAgLy8gQ2hlY2sgdGhhdCBhbGwgcG9seWdvbnMgc3RpbGwgcGFzcyBxdWVyeSBmaWx0ZXIuDQogICAgICAgICAgdmFyIG4gPSBNYXRoLm1pbih0aGlzLm1fcGF0aC5sZW5ndGgsIG1heExvb2tBaGVhZCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkgew0KICAgICAgICAgICAgaWYgKCFuYXZxdWVyeS5pc1ZhbGlkUG9seVJlZih0aGlzLm1fcGF0aFtpXSwgZmlsdGVyKSkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBHZXRzIHRoZSBjdXJyZW50IHBvc2l0aW9uIHdpdGhpbiB0aGUgY29ycmlkb3IuIChJbiB0aGUgZmlyc3QgcG9seWdvbi4pDQogICAgICAgICAqIEByZXR1cm4gVGhlIGN1cnJlbnQgcG9zaXRpb24gd2l0aGluIHRoZSBjb3JyaWRvci4NCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0UG9zIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBvcygpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX3BvczsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogR2V0cyB0aGUgY3VycmVudCB0YXJnZXQgd2l0aGluIHRoZSBjb3JyaWRvci4gKEluIHRoZSBsYXN0IHBvbHlnb24uKQ0KICAgICAgICAgKiBAcmV0dXJuIFRoZSBjdXJyZW50IHRhcmdldCB3aXRoaW4gdGhlIGNvcnJpZG9yLg0KICAgICAgICAgKi8NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRUYXJnZXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGFyZ2V0KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fdGFyZ2V0Ow0KICAgICAgICB9DQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaGUgcG9seWdvbiByZWZlcmVuY2UgaWQgb2YgdGhlIGZpcnN0IHBvbHlnb24gaW4gdGhlIGNvcnJpZG9yLCB0aGUgcG9seWdvbiBjb250YWluaW5nIHRoZSBwb3NpdGlvbi4NCiAgICAgICAgICogQHJldHVybiBUaGUgcG9seWdvbiByZWZlcmVuY2UgaWQgb2YgdGhlIGZpcnN0IHBvbHlnb24gaW4gdGhlIGNvcnJpZG9yLiAoT3IgemVybyBpZiB0aGVyZSBpcyBubyBwYXRoLikNCiAgICAgICAgICovDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0Rmlyc3RQb2x5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpcnN0UG9seSgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX3BhdGgubGVuZ3RoID09IDAgPyAwIDogdGhpcy5tX3BhdGhbMF07DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIFRoZSBwb2x5Z29uIHJlZmVyZW5jZSBpZCBvZiB0aGUgbGFzdCBwb2x5Z29uIGluIHRoZSBjb3JyaWRvciwgdGhlIHBvbHlnb24gY29udGFpbmluZyB0aGUgdGFyZ2V0Lg0KICAgICAgICAgKiBAcmV0dXJuIFRoZSBwb2x5Z29uIHJlZmVyZW5jZSBpZCBvZiB0aGUgbGFzdCBwb2x5Z29uIGluIHRoZSBjb3JyaWRvci4gKE9yIHplcm8gaWYgdGhlcmUgaXMgbm8gcGF0aC4pDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldExhc3RQb2x5IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhc3RQb2x5KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fcGF0aC5sZW5ndGggPT0gMCA/IDAgOiB0aGlzLm1fcGF0aFt0aGlzLm1fcGF0aC5sZW5ndGggLSAxXTsNCiAgICAgICAgfQ0KICAgICAgICAvKioNCiAgICAgICAgICogVGhlIGNvcnJpZG9yJ3MgcGF0aC4gDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFBhdGgiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGF0aCgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX3BhdGg7DQogICAgICAgIH0NCiAgICAgICAgLyoqDQogICAgICAgICAqIFRoZSBudW1iZXIgb2YgcG9seWdvbnMgaW4gdGhlIGN1cnJlbnQgY29ycmlkb3IgcGF0aC4NCiAgICAgICAgICogQHJldHVybiBUaGUgbnVtYmVyIG9mIHBvbHlnb25zIGluIHRoZSBjdXJyZW50IGNvcnJpZG9yIHBhdGguDQogICAgICAgICAqLw0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldFBhdGhDb3VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXRoQ291bnQoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9wYXRoLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gUGF0aENvcnJpZG9yOw0KICAgIH0oKTsNCg0KICAgIHZhciBfdGVtcCQ1Ow0KDQogICAgZnVuY3Rpb24gYXJyYXljb3B5JDUob25lLCBvbmVTdGFydCwgdHdvLCB0d29TdGFydCwgbGVuKSB7DQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7DQogICAgICAgIHR3b1t0d29TdGFydCArIGldID0gb25lW29uZVN0YXJ0ICsgaV07DQogICAgICB9DQogICAgfQ0KDQogICAgdmFyIExvY2FsQm91bmRhcnkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgew0KICAgICAgZnVuY3Rpb24gTG9jYWxCb3VuZGFyeSgpIHsNCiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvY2FsQm91bmRhcnkpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9jZW50ZXIiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9zZWdzIiwgW10pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9wb2x5cyIsIFtdKTsNCg0KICAgICAgICB0aGlzLm1fY2VudGVyWzBdID0gdGhpcy5tX2NlbnRlclsxXSA9IHRoaXMubV9jZW50ZXJbMl0gPSBOdW1iZXIuTUFYX1ZBTFVFOw0KICAgICAgfQ0KDQogICAgICBfY3JlYXRlQ2xhc3MoTG9jYWxCb3VuZGFyeSwgW3sNCiAgICAgICAga2V5OiAicmVzZXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7DQogICAgICAgICAgdGhpcy5tX2NlbnRlclswXSA9IHRoaXMubV9jZW50ZXJbMV0gPSB0aGlzLm1fY2VudGVyWzJdID0gTnVtYmVyLk1BWF9WQUxVRTsNCiAgICAgICAgICB0aGlzLm1fcG9seXMgPSBbXTsNCiAgICAgICAgICB0aGlzLm1fc2VncyA9IFtdOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZFNlZ21lbnQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU2VnbWVudChkaXN0LCBzKSB7DQogICAgICAgICAgLy8gSW5zZXJ0IG5laWdoYm91ciBiYXNlZCBvbiB0aGUgZGlzdGFuY2UuDQogICAgICAgICAgdmFyIHNlZyA9IG5ldyBMb2NhbEJvdW5kYXJ5LlNlZ21lbnQoKTsNCiAgICAgICAgICBhcnJheWNvcHkkNShzLCAwLCBzZWcucywgMCwgNik7DQogICAgICAgICAgc2VnLmQgPSBkaXN0Ow0KDQogICAgICAgICAgaWYgKHRoaXMubV9zZWdzLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICB0aGlzLm1fc2Vncy5wdXNoKHNlZyk7DQogICAgICAgICAgfSBlbHNlIGlmIChkaXN0ID49IHRoaXMubV9zZWdzW3RoaXMubV9zZWdzLmxlbmd0aCAtIDFdLmQpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm1fc2Vncy5sZW5ndGggPj0gTG9jYWxCb3VuZGFyeS5NQVhfTE9DQUxfU0VHUykgew0KICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMubV9zZWdzLnB1c2goc2VnKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy8gSW5zZXJ0IGluYmV0d2Vlbi4NCiAgICAgICAgICAgIHZhciBpOw0KDQogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5tX3NlZ3MubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgICAgaWYgKGRpc3QgPD0gdGhpcy5tX3NlZ3NbaV0uZCkgYnJlYWs7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRoaXMubV9zZWdzLnNwbGljZShpLCAwLCBzZWcpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHdoaWxlICh0aGlzLm1fc2Vncy5sZW5ndGggPiBMb2NhbEJvdW5kYXJ5Lk1BWF9MT0NBTF9TRUdTKSB7DQogICAgICAgICAgICB0aGlzLm1fc2Vncy5zcGxpY2UodGhpcy5tX3NlZ3MubGVuZ3RoIC0gMSwgMSk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInVwZGF0ZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUocmVmLCBwb3MsIGNvbGxpc2lvblF1ZXJ5UmFuZ2UsIG5hdnF1ZXJ5LCBmaWx0ZXIpIHsNCiAgICAgICAgICBpZiAocmVmID09IDApIHsNCiAgICAgICAgICAgIHJlc2V0KCk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KDQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV9jZW50ZXIsIHBvcyk7IC8vIEZpcnN0IHF1ZXJ5IG5vbi1vdmVybGFwcGluZyBwb2x5Z29ucy4NCg0KICAgICAgICAgIHZhciByZXMgPSBuYXZxdWVyeS5maW5kTG9jYWxOZWlnaGJvdXJob29kKHJlZiwgcG9zLCBjb2xsaXNpb25RdWVyeVJhbmdlLCBmaWx0ZXIpOw0KICAgICAgICAgIHRoaXMubV9wb2x5cyA9IHJlcy5nZXRSZWZzKCk7DQogICAgICAgICAgdGhpcy5tX3NlZ3MgPSBbXTsgLy8gU2Vjb25kbHksIHN0b3JlIGFsbCBwb2x5Z29uIGVkZ2VzLg0KDQogICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fcG9seXMubGVuZ3RoOyArK2opIHsNCiAgICAgICAgICAgIHZhciBncHdzID0gbmF2cXVlcnkuZ2V0UG9seVdhbGxTZWdtZW50cyh0aGlzLm1fcG9seXNbal0sIGZhbHNlLCBmaWx0ZXIpOw0KDQogICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGdwd3MuZ2V0U2VnbWVudFJlZnMoKS5sZW5ndGg7ICsraykgew0KICAgICAgICAgICAgICB2YXIgcyA9IGdwd3MuZ2V0U2VnbWVudFZlcnRzKClba107IC8vIFNraXAgdG9vIGRpc3RhbnQgc2VnbWVudHMuDQoNCiAgICAgICAgICAgICAgdmFyIGRpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJENChwb3MsIHMsIDAsIDMpOw0KICAgICAgICAgICAgICBpZiAoZGlzdHNlZ1swXSA+IERldG91ckNvbW1vbi5zcXIoY29sbGlzaW9uUXVlcnlSYW5nZSkpIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB0aGlzLmFkZFNlZ21lbnQoZGlzdHNlZ1swXSwgcyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImlzVmFsaWQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNWYWxpZChuYXZxdWVyeSwgZmlsdGVyKSB7DQogICAgICAgICAgaWYgKHRoaXMubV9wb2x5cy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOyAvLyBDaGVjayB0aGF0IGFsbCBwb2x5Z29ucyBzdGlsbCBwYXNzIHF1ZXJ5IGZpbHRlci4NCg0KICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLm1fcG9seXMpLA0KICAgICAgICAgICAgICBfc3RlcDsNCg0KICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgew0KICAgICAgICAgICAgICB2YXIgcmVmID0gX3N0ZXAudmFsdWU7DQogICAgICAgICAgICAgIGlmICghbmF2cXVlcnkuaXNWYWxpZFBvbHlSZWYocmVmLCBmaWx0ZXIpKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOw0KICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICBfaXRlcmF0b3IuZigpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldENlbnRlciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDZW50ZXIoKSB7DQogICAgICAgICAgcmV0dXJuIHRoaXMubV9jZW50ZXI7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0U2VnbWVudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWdtZW50KGopIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5tX3NlZ3Nbal0uczsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRTZWdtZW50Q291bnQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VnbWVudENvdW50KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fc2Vncy5sZW5ndGg7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIExvY2FsQm91bmRhcnk7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KExvY2FsQm91bmRhcnksICJNQVhfTE9DQUxfU0VHUyIsIDgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KExvY2FsQm91bmRhcnksICJTZWdtZW50IiwgKF90ZW1wJDUgPSBmdW5jdGlvbiBTZWdtZW50KCkgew0KICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlZ21lbnQpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInMiLCBuZXcgQXJyYXkoNikuZmlsbCgwKSk7DQoNCiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZCIsIHZvaWQgMCk7DQogICAgfSwgX3RlbXAkNSkpOw0KDQogICAgLyoNCiAgICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmcNCiAgICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmcNCg0KICAgIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkDQogICAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlcw0KICAgIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuDQogICAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsDQogICAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdA0KICAgIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczoNCiAgICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdA0KICAgICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZQ0KICAgICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmUNCiAgICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC4NCiAgICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZQ0KICAgICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuDQogICAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi4NCiAgICAqLw0KICAgIHZhciBDcm93ZEFnZW50QW5pbWF0aW9uID0gZnVuY3Rpb24gQ3Jvd2RBZ2VudEFuaW1hdGlvbigpIHsNCiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDcm93ZEFnZW50QW5pbWF0aW9uKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhY3RpdmUiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImluaXRQb3MiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXJ0UG9zIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJlbmRQb3MiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBvbHlSZWYiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInQiLCB2b2lkIDApOw0KDQogICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRtYXgiLCB2b2lkIDApOw0KICAgIH07DQoNCiAgICAvLy8gQGluZ3JvdXAgY3Jvd2QNCg0KICAgIHZhciBDcm93ZEFnZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIC8vLyBUaGUgdHlwZSBvZiBuYXZpZ2F0aW9uIG1lc2ggcG9seWdvbiB0aGUgYWdlbnQgaXMgY3VycmVudGx5IHRyYXZlcnNpbmcuDQogICAgICAvLy8gQGluZ3JvdXAgY3Jvd2QNCiAgICAgIC8vLyBUcnVlIGlmIHRoZSBhZ2VudCBpcyBhY3RpdmUsIGZhbHNlIGlmIHRoZSBhZ2VudCBpcyBpbiBhbiB1bnVzZWQgc2xvdCBpbiB0aGUgYWdlbnQgcG9vbC4NCiAgICAgIC8vLyBUaGUgdHlwZSBvZiBtZXNoIHBvbHlnb24gdGhlIGFnZW50IGlzIHRyYXZlcnNpbmcuIChTZWU6ICNDcm93ZEFnZW50KQ0KICAgICAgLy8vIFRydWUgaWYgdGhlIGFnZW50IGhhcyB2YWxpZCBwYXRoICh0YXJnZXRTdGF0ZSA9PSBEVF9DUk9XREFHRU5UX1RBUkdFVF9WQUxJRCkgYW5kIHRoZSBwYXRoIGRvZXMgbm90IGxlYWQgdG8gdGhlIHJlcXVlc3RlZCBwb3NpdGlvbiwgZWxzZSBmYWxzZS4NCiAgICAgIC8vLyBUaGUgcGF0aCBjb3JyaWRvciB0aGUgYWdlbnQgaXMgdXNpbmcuDQogICAgICAvLy8gVGhlIGxvY2FsIGJvdW5kYXJ5IGRhdGEgZm9yIHRoZSBhZ2VudC4NCiAgICAgIC8vLyBUaW1lIHNpbmNlIHRoZSBhZ2VudCdzIHBhdGggY29ycmlkb3Igd2FzIG9wdGltaXplZC4NCiAgICAgIC8vLyBUaGUga25vd24gbmVpZ2hib3JzIG9mIHRoZSBhZ2VudC4NCiAgICAgIC8vLyBUaGUgZGVzaXJlZCBzcGVlZC4NCiAgICAgIC8vLzwgVGhlIGN1cnJlbnQgYWdlbnQgcG9zaXRpb24uIFsoeCwgeSwgeildDQogICAgICAvLy88IEEgdGVtcG9yYXJ5IHZhbHVlIHVzZWQgdG8gYWNjdW11bGF0ZSBhZ2VudCBkaXNwbGFjZW1lbnQgZHVyaW5nIGl0ZXJhdGl2ZSBjb2xsaXNpb24gcmVzb2x1dGlvbi4gWyh4LCB5LCB6KV0NCiAgICAgIC8vLzwgVGhlIGRlc2lyZWQgdmVsb2NpdHkgb2YgdGhlIGFnZW50LiBCYXNlZCBvbiB0aGUgY3VycmVudCBwYXRoLCBjYWxjdWxhdGVkIGZyb20gc2NyYXRjaCBlYWNoIGZyYW1lLiBbKHgsIHksIHopXQ0KICAgICAgLy8vPCBUaGUgZGVzaXJlZCB2ZWxvY2l0eSBhZGp1c3RlZCBieSBvYnN0YWNsZSBhdm9pZGFuY2UsIGNhbGN1bGF0ZWQgZnJvbSBzY3JhdGNoIGVhY2ggZnJhbWUuIFsoeCwgeSwgeildDQogICAgICAvLy88IFRoZSBhY3R1YWwgdmVsb2NpdHkgb2YgdGhlIGFnZW50LiBUaGUgY2hhbmdlIGZyb20gbnZlbCA9PiB2ZWwgaXMgY29uc3RyYWluZWQgYnkgbWF4IGFjY2VsZXJhdGlvbi4gWyh4LCB5LCB6KV0NCiAgICAgIC8vLyBUaGUgYWdlbnQncyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMuDQogICAgICAvLy8gVGhlIGxvY2FsIHBhdGggY29ycmlkb3IgY29ybmVycyBmb3IgdGhlIGFnZW50Lg0KICAgICAgLy8vPCBTdGF0ZSBvZiB0aGUgbW92ZW1lbnQgcmVxdWVzdC4NCiAgICAgIC8vLzwgVGFyZ2V0IHBvbHlyZWYgb2YgdGhlIG1vdmVtZW50IHJlcXVlc3QuDQogICAgICAvLy88IFRhcmdldCBwb3NpdGlvbiBvZiB0aGUgbW92ZW1lbnQgcmVxdWVzdCAob3IgdmVsb2NpdHkgaW4gY2FzZSBvZiBEVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkuDQogICAgICAvLy88IFBhdGggZmluZGVyIHJlZi4NCiAgICAgIC8vLzwgRmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhlIGN1cnJlbnQgcGF0aCBpcyBiZWluZyByZXBsYW5uZWQuDQogICAgICAvLy8gPFRpbWUgc2luY2UgdGhlIGFnZW50J3MgdGFyZ2V0IHdhcyByZXBsYW5uZWQuDQogICAgICBmdW5jdGlvbiBDcm93ZEFnZW50KGlkeCkgew0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ3Jvd2RBZ2VudCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpZHgiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYWN0aXZlIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInN0YXRlIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInBhcnRpYWwiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiY29ycmlkb3IiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYm91bmRhcnkiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidG9wb2xvZ3lPcHRUaW1lIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm5laXMiLCBbXSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkZXNpcmVkU3BlZWQiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnBvcyIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJkaXNwIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImR2ZWwiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibnZlbCIsIG5ldyBBcnJheSgzKSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ2ZWwiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAicGFyYW1zIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImNvcm5lcnMiLCBbXSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0YXJnZXRTdGF0ZSIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0YXJnZXRSZWYiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAidGFyZ2V0UG9zIiwgbmV3IEFycmF5KDMpKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRhcmdldFBhdGhxUmVxIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInRhcmdldFJlcGxhbiIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0YXJnZXRSZXBsYW5UaW1lIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImFuaW1hdGlvbiIsIHZvaWQgMCk7DQoNCiAgICAgICAgdGhpcy5pZHggPSBpZHg7DQogICAgICAgIHRoaXMuY29ycmlkb3IgPSBuZXcgUGF0aENvcnJpZG9yKCk7DQogICAgICAgIHRoaXMuYm91bmRhcnkgPSBuZXcgTG9jYWxCb3VuZGFyeSgpOw0KICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IG5ldyBDcm93ZEFnZW50QW5pbWF0aW9uKCk7DQogICAgICB9DQoNCiAgICAgIF9jcmVhdGVDbGFzcyhDcm93ZEFnZW50LCBbew0KICAgICAgICBrZXk6ICJpbnRlZ3JhdGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZWdyYXRlKGR0KSB7DQogICAgICAgICAgLy8gRmFrZSBkeW5hbWljIGNvbnN0cmFpbnQuDQogICAgICAgICAgdmFyIG1heERlbHRhID0gdGhpcy5wYXJhbXMubWF4QWNjZWxlcmF0aW9uICogZHQ7DQogICAgICAgICAgdmFyIGR2ID0gRGV0b3VyQ29tbW9uLnZTdWIodGhpcy5udmVsLCB0aGlzLnZlbCk7DQogICAgICAgICAgdmFyIGRzID0gRGV0b3VyQ29tbW9uLnZMZW4oZHYpOw0KICAgICAgICAgIGlmIChkcyA+IG1heERlbHRhKSBkdiA9IERldG91ckNvbW1vbi52U2NhbGUoZHYsIG1heERlbHRhIC8gZHMpOw0KICAgICAgICAgIHRoaXMudmVsID0gRGV0b3VyQ29tbW9uLnZBZGQodGhpcy52ZWwsIGR2KTsgLy8gSW50ZWdyYXRlDQoNCiAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnZMZW4odGhpcy52ZWwpID4gMC4wMDAxKSB0aGlzLm5wb3MgPSBEZXRvdXJDb21tb24udk1hZCh0aGlzLm5wb3MsIHRoaXMudmVsLCBkdCk7ZWxzZSBEZXRvdXJDb21tb24udlNldCh0aGlzLnZlbCwgMCwgMCwgMCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3Zlck9mZm1lc2hDb25uZWN0aW9uIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJPZmZtZXNoQ29ubmVjdGlvbihyYWRpdXMpIHsNCiAgICAgICAgICBpZiAodGhpcy5jb3JuZXJzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgdmFyIG9mZk1lc2hDb25uZWN0aW9uID0gKHRoaXMuY29ybmVyc1t0aGlzLmNvcm5lcnMubGVuZ3RoIC0gMV0uZ2V0RmxhZ3MoKSAmIE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfT0ZGTUVTSF9DT05ORUNUSU9OKSAhPSAwID8gdHJ1ZSA6IGZhbHNlOw0KDQogICAgICAgICAgaWYgKG9mZk1lc2hDb25uZWN0aW9uKSB7DQogICAgICAgICAgICBkaXN0U3EgPSBEZXRvdXJDb21tb24udkRpc3QyRCh0aGlzLm5wb3MsIHRoaXMuY29ybmVyc1t0aGlzLmNvcm5lcnMubGVuZ3RoIC0gMV0uZ2V0UG9zKCkpOw0KICAgICAgICAgICAgaWYgKGRpc3RTcSA8IHJhZGl1cyAqIHJhZGl1cykgcmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldERpc3RhbmNlVG9Hb2FsIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpc3RhbmNlVG9Hb2FsKHJhbmdlKSB7DQogICAgICAgICAgaWYgKHRoaXMuY29ybmVycy5sZW5ndGggPT0gMCkgcmV0dXJuIHJhbmdlOw0KICAgICAgICAgIHZhciBlbmRPZlBhdGggPSAodGhpcy5jb3JuZXJzW3RoaXMuY29ybmVycy5sZW5ndGggLSAxXS5nZXRGbGFncygpICYgTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9FTkQpICE9IDAgPyB0cnVlIDogZmFsc2U7DQogICAgICAgICAgaWYgKGVuZE9mUGF0aCkgcmV0dXJuIE1hdGgubWluKERldG91ckNvbW1vbi52RGlzdDJEKHRoaXMubnBvcywgdGhpcy5jb3JuZXJzW3RoaXMuY29ybmVycy5sZW5ndGggLSAxXS5nZXRQb3MoKSksIHJhbmdlKTsNCiAgICAgICAgICByZXR1cm4gcmFuZ2U7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY2FsY1Ntb290aFN0ZWVyRGlyZWN0aW9uIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNTbW9vdGhTdGVlckRpcmVjdGlvbigpIHsNCiAgICAgICAgICB2YXIgZGlyID0gbmV3IEFycmF5KDMpOw0KDQogICAgICAgICAgaWYgKCF0aGlzLmNvcm5lcnMubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIHZhciBpcDAgPSAwOw0KICAgICAgICAgICAgdmFyIGlwMSA9IE1hdGgubWluKDEsIHRoaXMuY29ybmVycy5sZW5ndGggLSAxKTsNCiAgICAgICAgICAgIHZhciBwMCA9IHRoaXMuY29ybmVyc1tpcDBdLmdldFBvcygpOw0KICAgICAgICAgICAgdmFyIHAxID0gdGhpcy5jb3JuZXJzW2lwMV0uZ2V0UG9zKCk7DQogICAgICAgICAgICB2YXIgZGlyMCA9IERldG91ckNvbW1vbi52U3ViKHAwLCB0aGlzLm5wb3MpOw0KICAgICAgICAgICAgdmFyIGRpcjEgPSBEZXRvdXJDb21tb24udlN1YihwMSwgdGhpcy5ucG9zKTsNCiAgICAgICAgICAgIGRpcjBbMV0gPSAwOw0KICAgICAgICAgICAgZGlyMVsxXSA9IDA7DQogICAgICAgICAgICB2YXIgbGVuMCA9IERldG91ckNvbW1vbi52TGVuKGRpcjApOw0KICAgICAgICAgICAgdmFyIGxlbjEgPSBEZXRvdXJDb21tb24udkxlbihkaXIxKTsNCiAgICAgICAgICAgIGlmIChsZW4xID4gMC4wMDEpIGRpcjEgPSBEZXRvdXJDb21tb24udlNjYWxlKGRpcjEsIDEuMCAvIGxlbjEpOw0KICAgICAgICAgICAgZGlyWzBdID0gZGlyMFswXSAtIGRpcjFbMF0gKiBsZW4wICogMC41Ow0KICAgICAgICAgICAgZGlyWzFdID0gMDsNCiAgICAgICAgICAgIGRpclsyXSA9IGRpcjBbMl0gLSBkaXIxWzJdICogbGVuMCAqIDAuNTsNCiAgICAgICAgICAgIERldG91ckNvbW1vbi52Tm9ybWFsaXplKGRpcik7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIGRpcjsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJjYWxjU3RyYWlnaHRTdGVlckRpcmVjdGlvbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjU3RyYWlnaHRTdGVlckRpcmVjdGlvbigpIHsNCiAgICAgICAgICB2YXIgZGlyID0gbmV3IEFycmF5KDMpOw0KDQogICAgICAgICAgaWYgKCF0aGlzLmNvcm5lcnMubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgIGRpciA9IERldG91ckNvbW1vbi52U3ViKHRoaXMuY29ybmVyc1swXS5nZXRQb3MoKSwgdGhpcy5ucG9zKTsNCiAgICAgICAgICAgIGRpclsxXSA9IDA7DQogICAgICAgICAgICBEZXRvdXJDb21tb24udk5vcm1hbGl6ZShkaXIpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBkaXI7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAic2V0VGFyZ2V0IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRhcmdldChyZWYsIHBvcykgew0KICAgICAgICAgIHRoaXMudGFyZ2V0UmVmID0gcmVmOw0KICAgICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLnRhcmdldFBvcywgcG9zKTsNCiAgICAgICAgICB0aGlzLnRhcmdldFBhdGhxUmVmID0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQ7DQogICAgICAgICAgaWYgKHRoaXMudGFyZ2V0UmVmICE9IDApIHRoaXMudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1JFUVVFU1RJTkc7ZWxzZSB0aGlzLnRhcmdldFN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9GQUlMRUQ7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0QWdlbnRJbmRleCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBZ2VudEluZGV4KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLmlkeDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJpc0FjdGl2ZSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FjdGl2ZSgpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7DQogICAgICAgIH0NCiAgICAgIH1dKTsNCg0KICAgICAgcmV0dXJuIENyb3dkQWdlbnQ7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnQsICJEVF9DUk9XREFHRU5UX1NUQVRFX0lOVkFMSUQiLCAwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCAiRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HIiwgMSk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgIkRUX0NST1dEQUdFTlRfU1RBVEVfT0ZGTUVTSCIsIDIpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnQsICJEVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIiwgMCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgIkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRCIsIDEpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnQsICJEVF9DUk9XREFHRU5UX1RBUkdFVF9WQUxJRCIsIDIpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnQsICJEVF9DUk9XREFHRU5UX1RBUkdFVF9SRVFVRVNUSU5HIiwgMyk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgIkRUX0NST1dEQUdFTlRfVEFSR0VUX1dBSVRJTkdfRk9SX1FVRVVFIiwgNCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgIkRUX0NST1dEQUdFTlRfVEFSR0VUX1dBSVRJTkdfRk9SX1BBVEgiLCA1KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCAiRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkVMT0NJVFkiLCA2KTsNCg0KICAgIHZhciBEZWZhdWx0UXVlcnlGaWx0ZXINCiAgICAvKmV4dGVuZHMgUXVlcnlGaWx0ZXIqLw0KICAgID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsNCiAgICAgIC8vIERlZmF1bHRRdWVyeUZpbHRlcigpIHsNCiAgICAgIC8vIAkJdGhpcy5tX2luY2x1ZGVGbGFncyA9IDB4ZmZmOw0KICAgICAgLy8gCQl0aGlzLm1fZXhjbHVkZUZsYWdzID0gMDsNCiAgICAgIC8vIAkJZm9yIChsZXQgaSA9IDA7IGkgPCBOYXZNZXNoLkRUX01BWF9BUkVBUzsgKytpKSB7DQogICAgICAvLyAJCQltX2FyZWFDb3N0W2ldID0gMS4wOw0KICAgICAgLy8gCQl9DQogICAgICAvLyAJfQ0KICAgICAgZnVuY3Rpb24gRGVmYXVsdFF1ZXJ5RmlsdGVyKCkgew0KICAgICAgICB2YXIgaW5jbHVkZUZsYWdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAweGZmZmY7DQogICAgICAgIHZhciBleGNsdWRlRmxhZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDA7DQogICAgICAgIHZhciBhcmVhQ29zdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbmV3IEFycmF5KE5hdk1lc2guRFRfTUFYX0FSRUFTKS5maWxsKDEsIDAsIE5hdk1lc2guRFRfTUFYX0FSRUFTKTsNCg0KICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVmYXVsdFF1ZXJ5RmlsdGVyKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fZXhjbHVkZUZsYWdzIiwgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX2luY2x1ZGVGbGFncyIsIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9hcmVhQ29zdCIsIG5ldyBBcnJheShOYXZNZXNoLkRUX01BWF9BUkVBUykpOw0KDQogICAgICAgIHRoaXMubV9pbmNsdWRlRmxhZ3MgPSBpbmNsdWRlRmxhZ3M7DQogICAgICAgIHRoaXMubV9leGNsdWRlRmxhZ3MgPSBleGNsdWRlRmxhZ3M7DQoNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBNYXRoLm1pbihOYXZNZXNoLkRUX01BWF9BUkVBUywgYXJlYUNvc3QubGVuZ3RoKTsgKytpKSB7DQogICAgICAgICAgdGhpcy5tX2FyZWFDb3N0W2ldID0gYXJlYUNvc3RbaV07DQogICAgICAgIH0NCg0KICAgICAgICBmb3IgKHZhciBfaSA9IGFyZWFDb3N0Lmxlbmd0aDsgX2kgPCBOYXZNZXNoLkRUX01BWF9BUkVBUzsgKytfaSkgew0KICAgICAgICAgIHRoaXMubV9hcmVhQ29zdFtfaV0gPSAxLjA7DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgX2NyZWF0ZUNsYXNzKERlZmF1bHRRdWVyeUZpbHRlciwgW3sNCiAgICAgICAga2V5OiAiYW5kIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFuZCh2MSwgdjIpIHsNCiAgICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwOw0KICAgICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmOw0KICAgICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTsNCiAgICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7DQogICAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdzsNCiAgICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93Ow0KICAgICAgICAgIHZhciBoID0gaGkxICYgaGkyOw0KICAgICAgICAgIHZhciBsID0gbG93MSAmIGxvdzI7DQogICAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAib3IiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb3IodjEsIHYyKSB7DQogICAgICAgICAgdmFyIGhpID0gMHg4MDAwMDAwMDsNCiAgICAgICAgICB2YXIgbG93ID0gMHg3ZmZmZmZmZjsNCiAgICAgICAgICB2YXIgaGkxID0gfn4odjEgLyBoaSk7DQogICAgICAgICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpOw0KICAgICAgICAgIHZhciBsb3cxID0gdjEgJiBsb3c7DQogICAgICAgICAgdmFyIGxvdzIgPSB2MiAmIGxvdzsNCiAgICAgICAgICB2YXIgaCA9IGhpMSB8IGhpMjsNCiAgICAgICAgICB2YXIgbCA9IGxvdzEgfCBsb3cyOw0KICAgICAgICAgIHJldHVybiBoICogaGkgKyBsOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogInBhc3NGaWx0ZXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcGFzc0ZpbHRlcihyZWYsIHRpbGUsIHBvbHkpIHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5hbmQocG9seS5mbGFncywgdGhpcy5tX2luY2x1ZGVGbGFncykgIT0gMCAmJiB0aGlzLmFuZChwb2x5LmZsYWdzLCB0aGlzLm1fZXhjbHVkZUZsYWdzKSA9PSAwOw0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldENvc3QiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29zdChwYSwgcGIsIHByZXZSZWYsIHByZXZUaWxlLCBwcmV2UG9seSwgY3VyUmVmLCBjdXJUaWxlLCBjdXJQb2x5LCBuZXh0UmVmLCBuZXh0VGlsZSwgbmV4dFBvbHkpIHsNCiAgICAgICAgICByZXR1cm4gRGV0b3VyQ29tbW9uLnZEaXN0MihwYSwgcGIpICogdGhpcy5tX2FyZWFDb3N0W2N1clBvbHkuZ2V0QXJlYSgpXTsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gRGVmYXVsdFF1ZXJ5RmlsdGVyOw0KICAgIH0oKTsNCg0KICAgIHZhciBDcm93ZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7DQogICAgICBfY3JlYXRlQ2xhc3MoQ3Jvd2QsIFt7DQogICAgICAgIGtleTogInR3ZWVuIiwNCiAgICAgICAgLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBuZWlnaGJvcnMgdGhhdCBhIGNyb3dkIGFnZW50IGNhbiB0YWtlIGludG8gYWNjb3VudA0KICAgICAgICAvLy8gZm9yIHN0ZWVyaW5nIGRlY2lzaW9ucy4NCiAgICAgICAgLy8vIEBpbmdyb3VwIGNyb3dkDQogICAgICAgIC8vLyBUaGUgbWF4aW11bSBudW1iZXIgb2YgY29ybmVycyBhIGNyb3dkIGFnZW50IHdpbGwgbG9vayBhaGVhZCBpbiB0aGUgcGF0aC4NCiAgICAgICAgLy8vIFRoaXMgdmFsdWUgaXMgdXNlZCBmb3Igc2l6aW5nIHRoZSBjcm93ZCBhZ2VudCBjb3JuZXIgYnVmZmVycy4NCiAgICAgICAgLy8vIER1ZSB0byB0aGUgYmVoYXZpb3Igb2YgdGhlIGNyb3dkIG1hbmFnZXIsIHRoZSBhY3R1YWwgbnVtYmVyIG9mIHVzZWZ1bA0KICAgICAgICAvLy8gY29ybmVycyB3aWxsIGJlIG9uZSBsZXNzIHRoYW4gdGhpcyBudW1iZXIuDQogICAgICAgIC8vLyBAaW5ncm91cCBjcm93ZA0KICAgICAgICAvLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIGNyb3dkIGF2b2lkYW5jZSBjb25maWd1cmF0aW9ucyBzdXBwb3J0ZWQgYnkgdGhlDQogICAgICAgIC8vLyBjcm93ZCBtYW5hZ2VyLg0KICAgICAgICAvLy8gQGluZ3JvdXAgY3Jvd2QNCiAgICAgICAgLy8vIEBzZWUgZHRPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcywgZHRDcm93ZDo6c2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMoKSwgZHRDcm93ZDo6Z2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMoKSwNCiAgICAgICAgLy8vIGR0Q3Jvd2RBZ2VudFBhcmFtczo6b2JzdGFjbGVBdm9pZGFuY2VUeXBlDQogICAgICAgIC8vLyBUaGUgbWF4aW11bSBudW1iZXIgb2YgcXVlcnkgZmlsdGVyIHR5cGVzIHN1cHBvcnRlZCBieSB0aGUgY3Jvd2QgbWFuYWdlci4NCiAgICAgICAgLy8vIEBpbmdyb3VwIGNyb3dkDQogICAgICAgIC8vLyBAc2VlIGR0UXVlcnlGaWx0ZXIsIGR0Q3Jvd2Q6OmdldEZpbHRlcigpIGR0Q3Jvd2Q6OmdldEVkaXRhYmxlRmlsdGVyKCksDQogICAgICAgIC8vLyBkdENyb3dkQWdlbnRQYXJhbXM6OnF1ZXJ5RmlsdGVyVHlwZQ0KICAgICAgICAvLy8gUHJvdmlkZXMgbmVpZ2hib3IgZGF0YSBmb3IgYWdlbnRzIG1hbmFnZWQgYnkgdGhlIGNyb3dkLg0KICAgICAgICAvLy8gQGluZ3JvdXAgY3Jvd2QNCiAgICAgICAgLy8vIEBzZWUgZHRDcm93ZEFnZW50OjpuZWlzLCBkdENyb3dkDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiB0d2Vlbih0LCB0MCwgdDEpIHsNCiAgICAgICAgICByZXR1cm4gRGV0b3VyQ29tbW9uLmNsYW1wKCh0IC0gdDApIC8gKHQxIC0gdDApLCAwLjAsIDEuMCk7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0TmVpZ2hib3VycyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROZWlnaGJvdXJzKHBvcywgaGVpZ2h0LCByYW5nZSwgc2tpcCwgYWdlbnRzLCBncmlkKSB7DQogICAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICAgIHZhciBpZHMgPSBncmlkLnF1ZXJ5SXRlbXMocG9zWzBdIC0gcmFuZ2UsIHBvc1syXSAtIHJhbmdlLCBwb3NbMF0gKyByYW5nZSwgcG9zWzJdICsgcmFuZ2UpOw0KDQogICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGlkcyksDQogICAgICAgICAgICAgIF9zdGVwOw0KDQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgIHZhciBpZCA9IF9zdGVwLnZhbHVlOw0KICAgICAgICAgICAgICB2YXIgX2FnID0gYWdlbnRzW2lkXTsNCg0KICAgICAgICAgICAgICBpZiAoX2FnID09IHNraXAgfHwgIV9hZy5hY3RpdmUpIHsNCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiVGVzdGluZyIpOw0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB9IC8vIENoZWNrIGZvciBvdmVybGFwLg0KDQoNCiAgICAgICAgICAgICAgdmFyIGRpZmYgPSBEZXRvdXJDb21tb24udlN1Yihwb3MsIF9hZy5ucG9zKTsNCg0KICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZlsxXSkgPj0gKGhlaWdodCArIF9hZy5wYXJhbXMuaGVpZ2h0KSAvIDIuMCkgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgZGlmZlsxXSA9IDA7DQoNCiAgICAgICAgICAgICAgdmFyIF9kaXN0U3FyID0gRGV0b3VyQ29tbW9uLnZMZW5TcXIoZGlmZik7DQoNCiAgICAgICAgICAgICAgaWYgKF9kaXN0U3FyID4gRGV0b3VyQ29tbW9uLnNxcihyYW5nZSkpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHRoaXMuYWRkTmVpZ2hib3VyKGlkLCBfZGlzdFNxciwgcmVzdWx0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7DQogICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGROZWlnaGJvdXIiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTmVpZ2hib3VyKGlkeCwgZGlzdCwgbmVpcykgew0KICAgICAgICAgIC8vIEluc2VydCBuZWlnaGJvdXIgYmFzZWQgb24gdGhlIGRpc3RhbmNlLg0KICAgICAgICAgIHZhciBuZWkgPSBuZXcgdGhpcy5Dcm93ZE5laWdoYm9yKGlkeCwgZGlzdCk7DQogICAgICAgICAgbmVpcy5wdXNoKG5laSk7DQogICAgICAgICAgbmVpcy5zb3J0KGZ1bmN0aW9uIChvMSwgbzIpIHsNCiAgICAgICAgICAgIHJldHVybiBvMS5kaXN0IC0gbzIuZGlzdDsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRUb09wdFF1ZXVlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvT3B0UXVldWUobmV3YWcsIGFnZW50cykgew0KICAgICAgICAgIC8vIEluc2VydCBuZWlnaGJvdXIgYmFzZWQgb24gZ3JlYXRlc3QgdGltZS4NCiAgICAgICAgICBhZ2VudHMucHVzaChuZXdhZyk7DQogICAgICAgIH0gLy8gSW5zZXJ0IG5laWdoYm91ciBiYXNlZCBvbiBncmVhdGVzdCB0aW1lLg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImFkZFRvUGF0aFF1ZXVlIiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvUGF0aFF1ZXVlKG5ld2FnLCBhZ2VudHMpIHsNCiAgICAgICAgICBhZ2VudHMucHVzaChuZXdhZyk7DQogICAgICAgIH0gLy8vDQogICAgICAgIC8vLyBJbml0aWFsaXplcyB0aGUgY3Jvd2QuDQogICAgICAgIC8vLyBNYXkgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHRvIHB1cmdlIGFuZCByZS1pbml0aWFsaXplIHRoZSBjcm93ZC4NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gbWF4QWdlbnRzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhZ2VudHMgdGhlIGNyb3dkIGNhbiBtYW5hZ2UuIFtMaW1pdDogPj0gMV0NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gbWF4QWdlbnRSYWRpdXMgVGhlIG1heGltdW0gcmFkaXVzIG9mIGFueSBhZ2VudCB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGNyb3dkLiBbTGltaXQ6ID4gMF0NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gbmF2IFRoZSBuYXZpZ2F0aW9uIG1lc2ggdG8gdXNlIGZvciBwbGFubmluZy4NCiAgICAgICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW5pdGlhbGl6YXRpb24gc3VjY2VlZGVkLg0KDQogICAgICB9XSk7DQoNCiAgICAgIGZ1bmN0aW9uIENyb3dkKG1heEFnZW50cywgbWF4QWdlbnRSYWRpdXMsIG5hdikgew0KICAgICAgICB2YXIgX3RlbXA7DQoNCiAgICAgICAgdmFyIHF1ZXJ5RmlsdGVyRmFjdG9yeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZnVuY3Rpb24gKGkpIHsNCiAgICAgICAgICByZXR1cm4gbmV3IERlZmF1bHRRdWVyeUZpbHRlcigpOw0KICAgICAgICB9Ow0KDQogICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDcm93ZCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJDcm93ZE5laWdoYm9yIiwgKF90ZW1wID0gLy8vIDwgVGhlIGluZGV4IG9mIHRoZSBuZWlnaGJvciBpbiB0aGUgY3Jvd2QuDQogICAgICAgIC8vLyA8IFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBjdXJyZW50IGFnZW50IGFuZCB0aGUgbmVpZ2hib3IuDQogICAgICAgIGZ1bmN0aW9uIENyb3dkTmVpZ2hib3VyKGlkeCwgZGlzdCkgew0KICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDcm93ZE5laWdoYm91cik7DQoNCiAgICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlkeCIsIHZvaWQgMCk7DQoNCiAgICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImRpc3QiLCB2b2lkIDApOw0KDQogICAgICAgICAgdGhpcy5pZHggPSBpZHg7DQogICAgICAgICAgdGhpcy5kaXN0ID0gZGlzdDsNCiAgICAgICAgfSwgX3RlbXApKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fbWF4QWdlbnRzIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fYWdlbnRzIiwgW10pOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9hY3RpdmVBZ2VudHMiLCBbXSk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3BhdGhxIiwgdm9pZCAwKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fb2JzdGFjbGVRdWVyeVBhcmFtcyIsIG5ldyBBcnJheShDcm93ZC5EVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVMpKTsNCg0KICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1fb2JzdGFjbGVRdWVyeSIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX2dyaWQiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9leHQiLCBuZXcgQXJyYXkoMykpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9maWx0ZXJzIiwgbmV3IEFycmF5KENyb3dkLkRUX0NST1dEX01BWF9RVUVSWV9GSUxURVJfVFlQRSkpOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9tYXhBZ2VudFJhZGl1cyIsIHZvaWQgMCk7DQoNCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJtX3ZlbG9jaXR5U2FtcGxlQ291bnQiLCB2b2lkIDApOw0KDQogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibV9uYXZxdWVyeSIsIHZvaWQgMCk7DQoNCiAgICAgICAgdGhpcy5tX21heEFnZW50cyA9IG1heEFnZW50czsNCiAgICAgICAgdGhpcy5tX21heEFnZW50UmFkaXVzID0gbWF4QWdlbnRSYWRpdXM7DQogICAgICAgIERldG91ckNvbW1vbi52U2V0KHRoaXMubV9leHQsIHRoaXMubV9tYXhBZ2VudFJhZGl1cyAqIDIuMCwgdGhpcy5tX21heEFnZW50UmFkaXVzICogMS41LCB0aGlzLm1fbWF4QWdlbnRSYWRpdXMgKiAyLjApOw0KICAgICAgICB0aGlzLm1fZ3JpZCA9IG5ldyBQcm94aW1pdHlHcmlkKHRoaXMubV9tYXhBZ2VudHMgKiA0LCB0aGlzLm1fbWF4QWdlbnRSYWRpdXMgKiAzKTsNCiAgICAgICAgdGhpcy5tX29ic3RhY2xlUXVlcnkgPSBuZXcgT2JzdGFjbGVBdm9pZGFuY2VRdWVyeSg2LCA4KTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENyb3dkLkRUX0NST1dEX01BWF9RVUVSWV9GSUxURVJfVFlQRTsgaSsrKSB7DQogICAgICAgICAgdGhpcy5tX2ZpbHRlcnNbaV0gPSBxdWVyeUZpbHRlckZhY3RvcnkuYXBwbHkoaSk7DQogICAgICAgIH0gLy8gSW5pdCBvYnN0YWNsZSBxdWVyeSBwYXJhbXMuDQoNCg0KICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgQ3Jvd2QuRFRfQ1JPV0RfTUFYX09CU1RBVk9JREFOQ0VfUEFSQU1TOyArK19pKSB7DQogICAgICAgICAgdGhpcy5tX29ic3RhY2xlUXVlcnlQYXJhbXNbX2ldID0gbmV3IE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKCk7DQogICAgICAgIH0gLy8gQWxsb2NhdGUgdGVtcCBidWZmZXIgZm9yIG1lcmdpbmcgcGF0aHMuDQoNCg0KICAgICAgICB0aGlzLm1fcGF0aHEgPSBuZXcgUGF0aFF1ZXVlKENyb3dkLk1BWF9QQVRIUVVFVUVfTk9ERVMsIG5hdik7DQogICAgICAgIHRoaXMubV9hZ2VudHMgPSBuZXcgQXJyYXkodGhpcy5tX21heEFnZW50cyk7DQogICAgICAgIHRoaXMubV9hY3RpdmVBZ2VudHMgPSBbXTsNCg0KICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLm1fbWF4QWdlbnRzOyArK19pMikgew0KICAgICAgICAgIHRoaXMubV9hZ2VudHNbX2kyXSA9IG5ldyBDcm93ZEFnZW50KF9pMik7DQogICAgICAgICAgdGhpcy5tX2FnZW50c1tfaTJdLmFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICB9IC8vIFRoZSBuYXZxdWVyeSBpcyBtb3N0bHkgdXNlZCBmb3IgbG9jYWwgc2VhcmNoZXMsIG5vIG5lZWQgZm9yIGxhcmdlDQogICAgICAgIC8vIG5vZGUgcG9vbC4NCg0KDQogICAgICAgIHRoaXMubV9uYXZxdWVyeSA9IG5ldyBOYXZNZXNoUXVlcnkobmF2KTsNCiAgICAgIH0gLy8vIFNldHMgdGhlIHNoYXJlZCBhdm9pZGFuY2UgY29uZmlndXJhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBpbmRleC4NCiAgICAgIC8vLyBAcGFyYW1baW5dIGlkeCBUaGUgaW5kZXguIFtMaW1pdHM6IDAgPD0gdmFsdWUgPA0KICAgICAgLy8vICNEVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVNdDQogICAgICAvLy8gQHBhcmFtW2luXSBwYXJhbXMgVGhlIG5ldyBjb25maWd1cmF0aW9uLg0KDQoNCiAgICAgIF9jcmVhdGVDbGFzcyhDcm93ZCwgW3sNCiAgICAgICAga2V5OiAic2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMoaWR4LCBwYXJhbXMpIHsNCiAgICAgICAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgQ3Jvd2QuRFRfQ1JPV0RfTUFYX09CU1RBVk9JREFOQ0VfUEFSQU1TKSB7DQogICAgICAgICAgICB0aGlzLm1fb2JzdGFjbGVRdWVyeVBhcmFtc1tpZHhdID0gcGFyYW1zOw0KICAgICAgICAgIH0NCiAgICAgICAgfSAvLy8gR2V0cyB0aGUgc2hhcmVkIGF2b2lkYW5jZSBjb25maWd1cmF0aW9uIGZvciB0aGUgc3BlY2lmaWVkIGluZGV4Lg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGluZGV4IG9mIHRoZSBjb25maWd1cmF0aW9uIHRvIHJldHJlaXZlLg0KICAgICAgICAvLy8gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNEVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVNdDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSByZXF1ZXN0ZWQgY29uZmlndXJhdGlvbi4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcyIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcyhpZHgpIHsNCiAgICAgICAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgQ3Jvd2QuRFRfQ1JPV0RfTUFYX09CU1RBVk9JREFOQ0VfUEFSQU1TKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5tX29ic3RhY2xlUXVlcnlQYXJhbXNbaWR4XTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfSAvLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIGFnZW50cyB0aGF0IGNhbiBiZSBtYW5hZ2VkIGJ5IHRoZSBvYmplY3QuDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhZ2VudHMuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiZ2V0QWdlbnRDb3VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBZ2VudENvdW50KCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fbWF4QWdlbnRzOw0KICAgICAgICB9IC8vLyBHZXRzIHRoZSBzcGVjaWZpZWQgYWdlbnQgZnJvbSB0aGUgcG9vbC4NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSByZXF1ZXN0ZWQgYWdlbnQuDQogICAgICAgIC8vLyBBZ2VudHMgaW4gdGhlIHBvb2wgbWF5IG5vdCBiZSBpbiB1c2UuIENoZWNrICNkdENyb3dkQWdlbnQuYWN0aXZlIGJlZm9yZSB1c2luZyB0aGUgcmV0dXJuZWQgb2JqZWN0Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEFnZW50IiwNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFnZW50KGlkeCkgew0KICAgICAgICAgIHJldHVybiBpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fYWdlbnRzLmxlbmd0aCA/IG51bGwgOiB0aGlzLm1fYWdlbnRzW2lkeF07DQogICAgICAgIH0gLy8vDQogICAgICAgIC8vLyBHZXRzIHRoZSBzcGVjaWZpZWQgYWdlbnQgZnJvbSB0aGUgcG9vbC4NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSByZXF1ZXN0ZWQgYWdlbnQuDQogICAgICAgIC8vLyBBZ2VudHMgaW4gdGhlIHBvb2wgbWF5IG5vdCBiZSBpbiB1c2UuIENoZWNrICNkdENyb3dkQWdlbnQuYWN0aXZlIGJlZm9yZSB1c2luZyB0aGUgcmV0dXJuZWQgb2JqZWN0Lg0KDQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEVkaXRhYmxlQWdlbnQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RWRpdGFibGVBZ2VudChpZHgpIHsNCiAgICAgICAgICByZXR1cm4gaWR4IDwgMCB8fCBpZHggPj0gdGhpcy5tX2FnZW50cy5sZW5ndGggPyBudWxsIDogdGhpcy5tX2FnZW50c1tpZHhdOw0KICAgICAgICB9IC8vLyBVcGRhdGVzIHRoZSBzcGVjaWZpZWQgYWdlbnQncyBjb25maWd1cmF0aW9uLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGFnZW50IGluZGV4LiBbTGltaXRzOiAwIDw9IHZhbHVlIDwgI2dldEFnZW50Q291bnQoKV0NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gcGFyYW1zIFRoZSBuZXcgYWdlbnQgY29uZmlndXJhdGlvbi4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ1cGRhdGVBZ2VudFBhcmFtZXRlcnMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQWdlbnRQYXJhbWV0ZXJzKGlkeCwgcGFyYW1zKSB7DQogICAgICAgICAgaWYgKGlkeCA8IDAgfHwgaWR4ID49IHRoaXMubV9tYXhBZ2VudHMpIHsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB0aGlzLm1fYWdlbnRzW2lkeF0ucGFyYW1zID0gcGFyYW1zOw0KICAgICAgICB9IC8vLyBBZGRzIGEgbmV3IGFnZW50IHRvIHRoZSBjcm93ZC4NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gcG9zIFRoZSByZXF1ZXN0ZWQgcG9zaXRpb24gb2YgdGhlIGFnZW50LiBbKHgsIHksIHopXQ0KICAgICAgICAvLy8gQHBhcmFtW2luXSBwYXJhbXMgVGhlIGNvbmZpZ3V0YXRpb24gb2YgdGhlIGFnZW50Lg0KICAgICAgICAvLy8gQHJldHVybiBUaGUgaW5kZXggb2YgdGhlIGFnZW50IGluIHRoZSBhZ2VudCBwb29sLiBPciAtMSBpZiB0aGUgYWdlbnQNCiAgICAgICAgLy8vIGNvdWxkIG5vdCBiZSBhZGRlZC4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJhZGRBZ2VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRBZ2VudChwb3MsIHBhcmFtcykgew0KICAgICAgICAgIC8vIEZpbmQgZW1wdHkgc2xvdC4NCiAgICAgICAgICB2YXIgaWR4ID0gLTE7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9tYXhBZ2VudHM7ICsraSkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLm1fYWdlbnRzW2ldLmFjdGl2ZSkgew0KICAgICAgICAgICAgICBpZHggPSBpOw0KICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBpZiAoaWR4ID09IC0xKSB7DQogICAgICAgICAgICByZXR1cm4gLTE7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGFnID0gdGhpcy5tX2FnZW50c1tpZHhdOw0KICAgICAgICAgIHRoaXMudXBkYXRlQWdlbnRQYXJhbWV0ZXJzKGlkeCwgcGFyYW1zKTsgLy8gRmluZCBuZWFyZXN0IHBvc2l0aW9uIG9uIG5hdm1lc2ggYW5kIHBsYWNlIHRoZSBhZ2VudCB0aGVyZS4NCg0KICAgICAgICAgIHZhciBuZWFyZXN0ID0gdGhpcy5tX25hdnF1ZXJ5LmZpbmROZWFyZXN0UG9seShwb3MsIHRoaXMubV9leHQsIHRoaXMubV9maWx0ZXJzW2FnLnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdKTsNCiAgICAgICAgICBhZy5jb3JyaWRvci5yZXNldChuZWFyZXN0LmdldE5lYXJlc3RSZWYoKSwgbmVhcmVzdC5nZXROZWFyZXN0UG9zKCkpOw0KICAgICAgICAgIGFnLmJvdW5kYXJ5LnJlc2V0KCk7DQogICAgICAgICAgYWcucGFydGlhbCA9IGZhbHNlOw0KICAgICAgICAgIGFnLnRvcG9sb2d5T3B0VGltZSA9IDA7DQogICAgICAgICAgYWcudGFyZ2V0UmVwbGFuVGltZSA9IDA7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYWcuZHZlbCwgMCwgMCwgMCk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYWcubnZlbCwgMCwgMCwgMCk7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYWcudmVsLCAwLCAwLCAwKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYWcubnBvcywgbmVhcmVzdC5nZXROZWFyZXN0UG9zKCkpOw0KICAgICAgICAgIGFnLmRlc2lyZWRTcGVlZCA9IDA7DQoNCiAgICAgICAgICBpZiAobmVhcmVzdC5nZXROZWFyZXN0UmVmKCkgIT0gMCkgew0KICAgICAgICAgICAgYWcuc3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfV0FMS0lORzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYWcuc3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfSU5WQUxJRDsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBhZy50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORTsNCiAgICAgICAgICBhZy5hY3RpdmUgPSB0cnVlOw0KICAgICAgICAgIHJldHVybiBpZHg7DQogICAgICAgIH0gLy8vIFJlbW92ZXMgdGhlIGFnZW50IGZyb20gdGhlIGNyb3dkLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGFnZW50IGluZGV4LiBbTGltaXRzOiAwIDw9IHZhbHVlIDwgI2dldEFnZW50Q291bnQoKV0NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgYWdlbnQgaXMgZGVhY3RpdmF0ZWQgYW5kIHdpbGwgbm8gbG9uZ2VyIGJlIHByb2Nlc3NlZC4gSXRzDQogICAgICAgIC8vLyAjZHQgb2JqZWN0DQogICAgICAgIC8vLyBpcyBub3QgcmVtb3ZlZCBmcm9tIHRoZSBwb29sLiBJdCBpcyBtYXJrZWQgYXMgaW5hY3RpdmUgc28gdGhhdCBpdCBpcw0KICAgICAgICAvLy8gYXZhaWxhYmxlIGZvciByZXVzZS4NCiAgICAgICAgLy8vIFJlbW92ZXMgdGhlIGFnZW50IGZyb20gdGhlIGNyb3dkLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGFnZW50IGluZGV4LiBbTGltaXRzOiAwIDw9IHZhbHVlIDwgI2dldEFnZW50Q291bnQoKV0NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZW1vdmVBZ2VudCIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBZ2VudChpZHgpIHsNCiAgICAgICAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgdGhpcy5tX21heEFnZW50cykgew0KICAgICAgICAgICAgdGhpcy5tX2FnZW50c1tpZHhdLmFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZXF1ZXN0TW92ZVRhcmdldFJlcGxhbiIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0TW92ZVRhcmdldFJlcGxhbihhZywgcmVmLCBwb3MpIHsNCiAgICAgICAgICBhZy5zZXRUYXJnZXQocmVmLCBwb3MpOw0KICAgICAgICAgIGFnLnRhcmdldFJlcGxhbiA9IHRydWU7DQogICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0gLy8vIFN1Ym1pdHMgYSBuZXcgbW92ZSByZXF1ZXN0IGZvciB0aGUgc3BlY2lmaWVkIGFnZW50Lg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGFnZW50IGluZGV4LiBbTGltaXRzOiAwIDw9IHZhbHVlIDwgI2dldEFnZW50Q291bnQoKV0NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gcmVmIFRoZSBwb3NpdGlvbidzIHBvbHlnb24gcmVmZXJlbmNlLg0KICAgICAgICAvLy8gQHBhcmFtW2luXSBwb3MgVGhlIHBvc2l0aW9uIHdpdGhpbiB0aGUgcG9seWdvbi4gWyh4LCB5LCB6KV0NCiAgICAgICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bGx5IHN1Ym1pdHRlZC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyB1c2VkIHdoZW4gYSBuZXcgdGFyZ2V0IGlzIHNldC4NCiAgICAgICAgLy8vDQogICAgICAgIC8vLyBUaGUgcG9zaXRpb24gd2lsbCBiZSBjb25zdHJhaW5lZCB0byB0aGUgc3VyZmFjZSBvZiB0aGUgbmF2aWdhdGlvbiBtZXNoLg0KICAgICAgICAvLy8NCiAgICAgICAgLy8vIFRoZSByZXF1ZXN0IHdpbGwgYmUgcHJvY2Vzc2VkIGR1cmluZyB0aGUgbmV4dCAjdXBkYXRlKCkuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmVxdWVzdE1vdmVUYXJnZXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdE1vdmVUYXJnZXQoaWR4LCByZWYsIHBvcykgew0KICAgICAgICAgIGlmIChpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fbWF4QWdlbnRzKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKHJlZiA9PSAwKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGFnID0gdGhpcy5tX2FnZW50c1tpZHhdOyAvLyBJbml0aWFsaXplIHJlcXVlc3QuDQoNCiAgICAgICAgICBhZy5zZXRUYXJnZXQocmVmLCBwb3MpOw0KICAgICAgICAgIGFnLnRhcmdldFJlcGxhbiA9IGZhbHNlOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IC8vLyBTdWJtaXRzIGEgbmV3IG1vdmUgcmVxdWVzdCBmb3IgdGhlIHNwZWNpZmllZCBhZ2VudC4NCiAgICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldDQogICAgICAgIC8vLyBAcGFyYW1baW5dIHZlbCBUaGUgbW92ZW1lbnQgdmVsb2NpdHkuIFsoeCwgeSwgeildDQogICAgICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxseSBzdWJtaXR0ZWQuDQoNCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAicmVxdWVzdE1vdmVWZWxvY2l0eSIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0TW92ZVZlbG9jaXR5KGlkeCwgdmVsKSB7DQogICAgICAgICAgaWYgKGlkeCA8IDAgfHwgaWR4ID49IHRoaXMubV9tYXhBZ2VudHMpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBhZyA9IHRoaXMubV9hZ2VudHNbaWR4XTsgLy8gSW5pdGlhbGl6ZSByZXF1ZXN0Lg0KDQogICAgICAgICAgYWcudGFyZ2V0UmVmID0gMDsNCiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYWcudGFyZ2V0UG9zLCB2ZWwpOw0KICAgICAgICAgIGFnLnRhcmdldFBhdGhxUmVmID0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQ7DQogICAgICAgICAgYWcudGFyZ2V0UmVwbGFuID0gZmFsc2U7DQogICAgICAgICAgYWcudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZFTE9DSVRZOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IC8vLyBSZXNldHMgYW55IHJlcXVlc3QgZm9yIHRoZSBzcGVjaWZpZWQgYWdlbnQuDQogICAgICAgIC8vLyBAcGFyYW1baW5dIGlkeCBUaGUgYWdlbnQgaW5kZXguIFtMaW1pdHM6IDAgPD0gdmFsdWUgPCAjZ2V0QWdlbnRDb3VudCgpXQ0KICAgICAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSByZXF1ZXN0IHdhcyBzdWNjZXNzZnVsbHkgcmVzZXRlZC4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJyZXNldE1vdmVUYXJnZXQiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRNb3ZlVGFyZ2V0KGlkeCkgew0KICAgICAgICAgIGlmIChpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fbWF4QWdlbnRzKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgYWcgPSB0aGlzLm1fYWdlbnRzW2lkeF07IC8vIEluaXRpYWxpemUgcmVxdWVzdC4NCg0KICAgICAgICAgIGFnLnRhcmdldFJlZiA9IDA7DQogICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYWcudGFyZ2V0UG9zLCAwLCAwLCAwKTsNCiAgICAgICAgICBEZXRvdXJDb21tb24udlNldChhZy5kdmVsLCAwLCAwLCAwKTsNCiAgICAgICAgICBhZy50YXJnZXRQYXRocVJlZiA9IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEOw0KICAgICAgICAgIGFnLnRhcmdldFJlcGxhbiA9IGZhbHNlOw0KICAgICAgICAgIGFnLnRhcmdldFN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FOw0KICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9IC8vLyBHZXRzIHRoZSBhY3RpdmUgYWdlbnRzIGxldCB0aGUgYWdlbnQgcG9vbC4NCiAgICAgICAgLy8vIEBwYXJhbVtvdXRdIGFnZW50cyBBbiBhcnJheSBvZiBhZ2VudCBwb2ludGVycy4gWygjZHQgKikgKiBtYXhBZ2VudHNdDQogICAgICAgIC8vLyBAcGFyYW1baW5dIG1heEFnZW50cyBUaGUgc2l6ZSBvZiB0aGUgY3Jvd2QgYWdlbnQgYXJyYXkuDQogICAgICAgIC8vLyBAcmV0dXJuIFRoZSBudW1iZXIgb2YgYWdlbnRzIHJldHVybmVkIGluIEBwIGFnZW50cy4NCg0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRBY3RpdmVBZ2VudHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWN0aXZlQWdlbnRzKCkgew0KICAgICAgICAgIHZhciBhZ2VudHMgPSBbXTsgLy9uZXcgQXJyYXkodGhpcy5tX21heEFnZW50cyk7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9tYXhBZ2VudHM7ICsraSkgew0KICAgICAgICAgICAgaWYgKHRoaXMubV9hZ2VudHNbaV0uYWN0aXZlKSB7DQogICAgICAgICAgICAgIGFnZW50cy5wdXNoKHRoaXMubV9hZ2VudHNbaV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHJldHVybiBhZ2VudHM7DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAidXBkYXRlTW92ZVJlcXVlc3QiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTW92ZVJlcXVlc3QoKSB7DQogICAgICAgICAgdmFyIHF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUoZnVuY3Rpb24gKGExLCBhMikgew0KICAgICAgICAgICAgcmV0dXJuIGEyLnRhcmdldFJlcGxhblRpbWUgLSBhMS50YXJnZXRSZXBsYW5UaW1lOw0KICAgICAgICAgIH0pOyAvLyBGaXJlIG9mZiBuZXcgcmVxdWVzdHMuDQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubV9tYXhBZ2VudHM7ICsraSkgew0KICAgICAgICAgICAgLy8gaWYoaT09MTIpDQogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIkJhZCBhZ2VudC4iKQ0KICAgICAgICAgICAgdmFyIF9hZzIgPSB0aGlzLm1fYWdlbnRzW2ldOw0KDQogICAgICAgICAgICBpZiAoIV9hZzIuYWN0aXZlKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoX2FnMi5zdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfSU5WQUxJRCkgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKF9hZzIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKF9hZzIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9SRVFVRVNUSU5HKSB7DQogICAgICAgICAgICAgIHZhciBwYXRoID0gX2FnMi5jb3JyaWRvci5nZXRQYXRoKCk7DQoNCiAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoID09IDApIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJFbXB0eSBwYXRoIik7DQogICAgICAgICAgICAgIH0gLy8gUXVpY2sgc2VhcmNoIHRvd2FyZHMgdGhlIGdvYWwuDQoNCg0KICAgICAgICAgICAgICB0aGlzLm1fbmF2cXVlcnkuaW5pdFNsaWNlZEZpbmRQYXRoKHBhdGhbMF0sIF9hZzIudGFyZ2V0UmVmLCBfYWcyLm5wb3MsIF9hZzIudGFyZ2V0UG9zLCB0aGlzLm1fZmlsdGVyc1tfYWcyLnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdLCAwKTsNCiAgICAgICAgICAgICAgdGhpcy5tX25hdnF1ZXJ5LnVwZGF0ZVNsaWNlZEZpbmRQYXRoKENyb3dkLk1BWF9JVEVSKTsNCiAgICAgICAgICAgICAgdmFyIHBhdGhGb3VuZCA9IHZvaWQgMDsNCg0KICAgICAgICAgICAgICBpZiAoX2FnMi50YXJnZXRSZXBsYW4pIC8vICYmIG5wYXRoID4gMTApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHVzZSBleGlzdGluZyBzdGVhZHkgcGF0aCBkdXJpbmcgcmVwbGFuIGlmDQogICAgICAgICAgICAgICAgICAvLyBwb3NzaWJsZS4NCiAgICAgICAgICAgICAgICAgIHBhdGhGb3VuZCA9IHRoaXMubV9uYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoUGFydGlhbChwYXRoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIC8vIFRyeSB0byBtb3ZlIHRvd2FyZHMgdGFyZ2V0IHdoZW4gZ29hbCBjaGFuZ2VzLg0KICAgICAgICAgICAgICAgIHBhdGhGb3VuZCA9IHRoaXMubV9uYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoKCk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB2YXIgcmVxUGF0aCA9IHBhdGhGb3VuZC5nZXRSZWZzKCk7DQogICAgICAgICAgICAgIHZhciByZXFQb3MgPSBuZXcgQXJyYXkoMyk7DQoNCiAgICAgICAgICAgICAgaWYgKCFwYXRoRm91bmQuZ2V0U3RhdHVzKCkgPT0gU3RhdHVzLkZBSUxVUkUgJiYgcmVxUGF0aC5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgLy8gSW4gcHJvZ3Jlc3Mgb3Igc3VjY2VlZC4NCiAgICAgICAgICAgICAgICBpZiAocmVxUGF0aFtyZXFQYXRoLmxlbmd0aCAtIDFdICE9IF9hZzIudGFyZ2V0UmVmKSB7DQogICAgICAgICAgICAgICAgICAvLyBQYXJ0aWFsIHBhdGgsIGNvbnN0cmFpbiB0YXJnZXQgcG9zaXRpb24gaW5zaWRlIHRoZQ0KICAgICAgICAgICAgICAgICAgLy8gbGFzdCBwb2x5Z29uLg0KICAgICAgICAgICAgICAgICAgdmFyIGNyID0gdGhpcy5tX25hdnF1ZXJ5LmNsb3Nlc3RQb2ludE9uUG9seShyZXFQYXRoW3JlcVBhdGgubGVuZ3RoIC0gMV0sIF9hZzIudGFyZ2V0UG9zKTsNCiAgICAgICAgICAgICAgICAgIHJlcVBvcyA9IGNyLmdldENsb3Nlc3QoKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHJlcVBvcywgX2FnMi50YXJnZXRQb3MpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBDb3VsZCBub3QgZmluZCBwYXRoLCBzdGFydCB0aGUgcmVxdWVzdCBmcm9tIGN1cnJlbnQNCiAgICAgICAgICAgICAgICAvLyBsb2NhdGlvbi4NCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkocmVxUG9zLCBfYWcyLm5wb3MpOw0KICAgICAgICAgICAgICAgIHJlcVBhdGggPSBbXTsNCiAgICAgICAgICAgICAgICByZXFQYXRoLnB1c2gocGF0aFswXSk7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBfYWcyLmNvcnJpZG9yLnNldENvcnJpZG9yKHJlcVBvcywgcmVxUGF0aCk7DQoNCiAgICAgICAgICAgICAgX2FnMi5ib3VuZGFyeS5yZXNldCgpOw0KDQogICAgICAgICAgICAgIF9hZzIucGFydGlhbCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgIGlmIChyZXFQYXRoW3JlcVBhdGgubGVuZ3RoIC0gMV0gPT0gX2FnMi50YXJnZXRSZWYpIHsNCiAgICAgICAgICAgICAgICBfYWcyLnRhcmdldFN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WQUxJRDsNCiAgICAgICAgICAgICAgICBfYWcyLnRhcmdldFJlcGxhblRpbWUgPSAwLjA7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgLy8gVGhlIHBhdGggaXMgbG9uZ2VyIG9yIHBvdGVudGlhbGx5IHVucmVhY2hhYmxlLCBmdWxsIHBsYW4uDQogICAgICAgICAgICAgICAgX2FnMi50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfV0FJVElOR19GT1JfUVVFVUU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKF9hZzIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9XQUlUSU5HX0ZPUl9RVUVVRSkgew0KICAgICAgICAgICAgICB0aGlzLmFkZFRvUGF0aFF1ZXVlKF9hZzIsIHF1ZXVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICB3aGlsZSAoIXF1ZXVlLmlzRW1wdHkoKSkgew0KICAgICAgICAgICAgdmFyIF9hZzMgPSBxdWV1ZS5wb2xsKCk7DQoNCiAgICAgICAgICAgIF9hZzMudGFyZ2V0UGF0aHFSZWYgPSB0aGlzLm1fcGF0aHEucmVxdWVzdChfYWczLmNvcnJpZG9yLmdldExhc3RQb2x5KCksIF9hZzMudGFyZ2V0UmVmLCBfYWczLmNvcnJpZG9yLmdldFRhcmdldCgpLCBfYWczLnRhcmdldFBvcywgdGhpcy5tX2ZpbHRlcnNbX2FnMy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7DQoNCiAgICAgICAgICAgIGlmIChfYWczLnRhcmdldFBhdGhxUmVmICE9IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEKSB7DQogICAgICAgICAgICAgIF9hZzMudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1dBSVRJTkdfRk9SX1BBVEg7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSAvLyBVcGRhdGUgcmVxdWVzdHMuDQoNCg0KICAgICAgICAgIHRoaXMubV9wYXRocS51cGRhdGUoQ3Jvd2QuTUFYX0lURVJTX1BFUl9VUERBVEUpOyAvLyBQcm9jZXNzIHBhdGggcmVzdWx0cy4NCg0KICAgICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHRoaXMubV9tYXhBZ2VudHM7ICsrX2kzKSB7DQogICAgICAgICAgICB2YXIgX2FnNCA9IHRoaXMubV9hZ2VudHNbX2kzXTsNCg0KICAgICAgICAgICAgaWYgKCFfYWc0LmFjdGl2ZSkgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKF9hZzQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKF9hZzQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9XQUlUSU5HX0ZPUl9QQVRIKSB7DQogICAgICAgICAgICAgIC8vIFBvbGwgcGF0aCBxdWV1ZS4NCiAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IHRoaXMubV9wYXRocS5nZXRSZXF1ZXN0U3RhdHVzKF9hZzQudGFyZ2V0UGF0aHFSZWYpOw0KDQogICAgICAgICAgICAgIGlmIChzdGF0dXMgIT0gbnVsbCAmJiBzdGF0dXMgPT0gU3RhdHVzLkZBSUxVUkUpIHsNCiAgICAgICAgICAgICAgICAvLyBQYXRoIGZpbmQgZmFpbGVkLCByZXRyeSBpZiB0aGUgdGFyZ2V0IGxvY2F0aW9uIGlzIHN0aWxsDQogICAgICAgICAgICAgICAgLy8gdmFsaWQuDQogICAgICAgICAgICAgICAgX2FnNC50YXJnZXRQYXRocVJlZiA9IFBhdGhRdWV1ZS5EVF9QQVRIUV9JTlZBTElEOw0KDQogICAgICAgICAgICAgICAgaWYgKF9hZzQudGFyZ2V0UmVmICE9IDApIHsNCiAgICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1JFUVVFU1RJTkc7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBfYWc0LnRhcmdldFJlcGxhblRpbWUgPSAwLjA7DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzICE9IG51bGwgJiYgKHN0YXR1cyA9PSBTdGF0dXMuU1VDQ1NFU1MgfHwgc3RhdHVzID09IFN0YXR1cy5QQVJUSUFMX1JFU1VMVCkpIHsNCiAgICAgICAgICAgICAgICB2YXIgX3BhdGggPSBfYWc0LmNvcnJpZG9yLmdldFBhdGgoKTsNCg0KICAgICAgICAgICAgICAgIGlmIChfcGF0aC5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbigiRW1wdHkgcGF0aCIpOw0KICAgICAgICAgICAgICAgIH0gLy8gQXBwbHkgcmVzdWx0cy4NCg0KDQogICAgICAgICAgICAgICAgdmFyIHRhcmdldFBvcyA9IF9hZzQudGFyZ2V0UG9zOw0KICAgICAgICAgICAgICAgIHZhciB2YWxpZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICB2YXIgX3BhdGhGb3VuZCA9IHRoaXMubV9wYXRocS5nZXRQYXRoUmVzdWx0KF9hZzQudGFyZ2V0UGF0aHFSZWYpOw0KDQogICAgICAgICAgICAgICAgdmFyIHJlcyA9IF9wYXRoRm91bmQuZ2V0UmVmcygpOw0KDQogICAgICAgICAgICAgICAgc3RhdHVzID0gX3BhdGhGb3VuZC5nZXRTdGF0dXMoKTsNCg0KICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gU3RhdHVzLkZBSUxVUkUgfHwgcmVzLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgIT0gbnVsbCAmIHN0YXR1cyA9PSBTdGF0dXMuUEFSVElBTF9SRVNVTFQpIHsNCiAgICAgICAgICAgICAgICAgIF9hZzQucGFydGlhbCA9IHRydWU7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIF9hZzQucGFydGlhbCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0gLy8gTWVyZ2UgcmVzdWx0IGFuZCBleGlzdGluZyBwYXRoLg0KICAgICAgICAgICAgICAgIC8vIFRoZSBhZ2VudCBtaWdodCBoYXZlIG1vdmVkIHdoaWxzdCB0aGUgcmVxdWVzdCBpcw0KICAgICAgICAgICAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gdGhlIHBhdGggbWF5IGhhdmUgY2hhbmdlZC4NCiAgICAgICAgICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCB0aGUgZW5kIG9mIHRoZSBwYXRoIGlzIGF0IHRoZSBzYW1lDQogICAgICAgICAgICAgICAgLy8gbG9jYXRpb24NCiAgICAgICAgICAgICAgICAvLyB3aGVyZSB0aGUgcmVxdWVzdCB3YXMgaXNzdWVkLg0KICAgICAgICAgICAgICAgIC8vIFRoZSBsYXN0IHJlZiBpbiB0aGUgb2xkIHBhdGggc2hvdWxkIGJlIHRoZSBzYW1lIGFzDQogICAgICAgICAgICAgICAgLy8gdGhlIGxvY2F0aW9uIHdoZXJlIHRoZSByZXF1ZXN0IHdhcyBpc3N1ZWQuLg0KDQoNCiAgICAgICAgICAgICAgICBpZiAodmFsaWQgJiYgX3BhdGhbX3BhdGgubGVuZ3RoIC0gMV0gIT0gcmVzWzBdKSB7DQogICAgICAgICAgICAgICAgICAvLyBpZiAodmFsaWQgJiYgcGF0aFtwYXRoLmxlbmd0aCAtIDFdLmxvbmdWYWx1ZSgpICE9IHJlc1swXS5sb25nVmFsdWUoKSkgew0KICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgb2xkIHBhdGggaW5mcm9udCBvZiB0aGUgb2xkIHBhdGguDQogICAgICAgICAgICAgICAgICBpZiAoX3BhdGgubGVuZ3RoID4gMSkgew0KICAgICAgICAgICAgICAgICAgICAvLyBwYXRoLnJlbW92ZShwYXRoLmxlbmd0aCAtIDEpOw0KICAgICAgICAgICAgICAgICAgICBfcGF0aC5zcGxpY2UoX3BhdGgubGVuZ3RoIC0gMSwgMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgX3BhdGgucHVzaC5hcHBseShfcGF0aCwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcykpOw0KDQogICAgICAgICAgICAgICAgICAgIHJlcyA9IF9wYXRoOyAvLyBSZW1vdmUgdHJhY2tiYWNrcw0KDQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgcmVzLmxlbmd0aCAtIDE7ICsraikgew0KICAgICAgICAgICAgICAgICAgICAgIGlmIChqIC0gMSA+PSAwICYmIGogKyAxIDwgcmVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1tqIC0gMV0gPT0gcmVzW2ogKyAxXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3BsaWNlKGogKyAxLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNwbGljZShqLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgaiAtPSAyOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSAvLyBDaGVjayBmb3IgcGFydGlhbCBwYXRoLg0KDQoNCiAgICAgICAgICAgICAgICAgIGlmIChyZXNbcmVzLmxlbmd0aCAtIDFdICE9IF9hZzQudGFyZ2V0UmVmKSB7DQogICAgICAgICAgICAgICAgICAgIC8vIFBhcnRpYWwgcGF0aCwgY29uc3RyYWluIHRhcmdldCBwb3NpdGlvbiBpbnNpZGUNCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGxhc3QgcG9seWdvbi4NCiAgICAgICAgICAgICAgICAgICAgdmFyIF9jciA9IHRoaXMubV9uYXZxdWVyeS5jbG9zZXN0UG9pbnRPblBvbHkocmVzW3Jlcy5sZW5ndGggLSAxXSwgdGFyZ2V0UG9zKTsNCg0KICAgICAgICAgICAgICAgICAgICB0YXJnZXRQb3MgPSBfY3IuZ2V0Q2xvc2VzdCgpOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgICAgICAgLy8gU2V0IGN1cnJlbnQgY29ycmlkb3IuDQogICAgICAgICAgICAgICAgICBfYWc0LmNvcnJpZG9yLnNldENvcnJpZG9yKHRhcmdldFBvcywgcmVzKTsgLy8gRm9yY2UgdG8gdXBkYXRlIGJvdW5kYXJ5Lg0KDQoNCiAgICAgICAgICAgICAgICAgIF9hZzQuYm91bmRhcnkucmVzZXQoKTsNCg0KICAgICAgICAgICAgICAgICAgX2FnNC50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkFMSUQ7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZyB3ZW50IHdyb25nLg0KICAgICAgICAgICAgICAgICAgX2FnNC50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfRkFJTEVEOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0UmVwbGFuVGltZSA9IDAuMDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ1cGRhdGVUb3BvbG9neU9wdGltaXphdGlvbiIsDQogICAgICAgIC8vIHNlY29uZHMNCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRvcG9sb2d5T3B0aW1pemF0aW9uKGFnZW50cywgZHQpIHsNCiAgICAgICAgICBpZiAoIWFnZW50cy5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBxdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlKGZ1bmN0aW9uIChhMSwgYTIpIHsNCiAgICAgICAgICAgIHJldHVybiBGbG9hdC5jb21wYXJlKGEyLnRvcG9sb2d5T3B0VGltZSwgYTEudG9wb2xvZ3lPcHRUaW1lKTsNCiAgICAgICAgICB9KTsNCg0KICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWdlbnRzLmxlbmd0aDsgKytpKSB7DQogICAgICAgICAgICBhZyA9IGFnZW50c1tpXTsNCg0KICAgICAgICAgICAgaWYgKGFnLnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoYWcudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IGFnLnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkVMT0NJVFkpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICgoYWcucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9PUFRJTUlaRV9UT1BPKSA9PSAwKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhZy50b3BvbG9neU9wdFRpbWUgKz0gZHQ7DQoNCiAgICAgICAgICAgIGlmIChhZy50b3BvbG9neU9wdFRpbWUgPj0gT1BUX1RJTUVfVEhSKSB7DQogICAgICAgICAgICAgIGFkZFRvT3B0UXVldWUoYWcsIHF1ZXVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICB3aGlsZSAoIXF1ZXVlLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgICBhZyA9IHF1ZXVlLnBvbGwoKTsNCiAgICAgICAgICAgIGFnLmNvcnJpZG9yLm9wdGltaXplUGF0aFRvcG9sb2d5KHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbYWcucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pOw0KICAgICAgICAgICAgYWcudG9wb2xvZ3lPcHRUaW1lID0gMDsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sIHsNCiAgICAgICAga2V5OiAiY2hlY2tQYXRoVmFsaWRpdHkiLA0KICAgICAgICAvLyBzZWNvbmRzDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja1BhdGhWYWxpZGl0eShhZ2VudHMsIGR0KSB7DQogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhZ2VudHMubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgICAgIHZhciBfYWc1ID0gYWdlbnRzW2ldOw0KDQogICAgICAgICAgICBpZiAoX2FnNS5zdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfV0FMS0lORykgew0KICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgX2FnNS50YXJnZXRSZXBsYW5UaW1lICs9IGR0Ow0KICAgICAgICAgICAgdmFyIHJlcGxhbiA9IGZhbHNlOyAvLyBGaXJzdCBjaGVjayB0aGF0IHRoZSBjdXJyZW50IGxvY2F0aW9uIGlzIHZhbGlkLg0KDQogICAgICAgICAgICB2YXIgYWdlbnRQb3MgPSBuZXcgQXJyYXkoMyk7DQoNCiAgICAgICAgICAgIHZhciBhZ2VudFJlZiA9IF9hZzUuY29ycmlkb3IuZ2V0Rmlyc3RQb2x5KCk7DQoNCiAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShhZ2VudFBvcywgX2FnNS5ucG9zKTsNCg0KICAgICAgICAgICAgaWYgKCF0aGlzLm1fbmF2cXVlcnkuaXNWYWxpZFBvbHlSZWYoYWdlbnRSZWYsIHRoaXMubV9maWx0ZXJzW19hZzUucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pKSB7DQogICAgICAgICAgICAgIC8vIEN1cnJlbnQgbG9jYXRpb24gaXMgbm90IHZhbGlkLCB0cnkgdG8gcmVwb3NpdGlvbi4NCiAgICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBjYW4gc25hcCBhZ2VudHMsIGhvdyB0byBoYW5kbGUgdGhhdD8NCiAgICAgICAgICAgICAgdmFyIGZucCA9IHRoaXMubV9uYXZxdWVyeS5maW5kTmVhcmVzdFBvbHkoX2FnNS5ucG9zLCB0aGlzLm1fZXh0LCB0aGlzLm1fZmlsdGVyc1tfYWc1LnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdKTsNCiAgICAgICAgICAgICAgYWdlbnRSZWYgPSBmbnAuZ2V0TmVhcmVzdFJlZigpOw0KDQogICAgICAgICAgICAgIGlmIChmbnAuZ2V0TmVhcmVzdFBvcygpICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYWdlbnRQb3MsIGZucC5nZXROZWFyZXN0UG9zKCkpOw0KICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgaWYgKGFnZW50UmVmID09IDApIHsNCiAgICAgICAgICAgICAgICAvLyBDb3VsZCBub3QgZmluZCBsb2NhdGlvbiBpbiBuYXZtZXNoLCBzZXQgc3RhdGUgdG8gaW52YWxpZC4NCiAgICAgICAgICAgICAgICBfYWc1LmNvcnJpZG9yLnJlc2V0KDAsIGFnZW50UG9zKTsNCg0KICAgICAgICAgICAgICAgIF9hZzUucGFydGlhbCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgX2FnNS5ib3VuZGFyeS5yZXNldCgpOw0KDQogICAgICAgICAgICAgICAgX2FnNS5zdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9JTlZBTElEOw0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB9IC8vIE1ha2Ugc3VyZSB0aGUgZmlyc3QgcG9seWdvbiBpcyB2YWxpZCwgYnV0IGxlYXZlIG90aGVyIHZhbGlkDQogICAgICAgICAgICAgIC8vIHBvbHlnb25zIGluIHRoZSBwYXRoIHNvIHRoYXQgcmVwbGFubmVyIGNhbiBhZGp1c3QgdGhlIHBhdGgNCiAgICAgICAgICAgICAgLy8gYmV0dGVyLg0KDQoNCiAgICAgICAgICAgICAgX2FnNS5jb3JyaWRvci5maXhQYXRoU3RhcnQoYWdlbnRSZWYsIGFnZW50UG9zKTsgLy8gYWcuY29ycmlkb3IudHJpbUludmFsaWRQYXRoKGFnZW50UmVmLCBhZ2VudFBvcywgbV9uYXZxdWVyeSwNCiAgICAgICAgICAgICAgLy8gJm1fZmlsdGVyKTsNCg0KDQogICAgICAgICAgICAgIF9hZzUuYm91bmRhcnkucmVzZXQoKTsNCg0KICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoX2FnNS5ucG9zLCBhZ2VudFBvcyk7DQogICAgICAgICAgICAgIHJlcGxhbiA9IHRydWU7DQogICAgICAgICAgICB9IC8vIElmIHRoZSBhZ2VudCBkb2VzIG5vdCBoYXZlIG1vdmUgdGFyZ2V0IG9yIGlzIGNvbnRyb2xsZWQgYnkNCiAgICAgICAgICAgIC8vIHZlbG9jaXR5LCBubyBuZWVkIHRvIHJlY292ZXIgdGhlIHRhcmdldCBub3IgcmVwbGFuLg0KDQoNCiAgICAgICAgICAgIGlmIChfYWc1LnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORSB8fCBfYWc1LnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkVMT0NJVFkpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9IC8vIFRyeSB0byByZWNvdmVyIG1vdmUgcmVxdWVzdCBwb3NpdGlvbi4NCg0KDQogICAgICAgICAgICBpZiAoX2FnNS50YXJnZXRTdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUgJiYgX2FnNS50YXJnZXRTdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRCkgew0KICAgICAgICAgICAgICBpZiAoIXRoaXMubV9uYXZxdWVyeS5pc1ZhbGlkUG9seVJlZihfYWc1LnRhcmdldFJlZiwgdGhpcy5tX2ZpbHRlcnNbX2FnNS5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSkpIHsNCiAgICAgICAgICAgICAgICAvLyBDdXJyZW50IHRhcmdldCBpcyBub3QgdmFsaWQsIHRyeSB0byByZXBvc2l0aW9uLg0KICAgICAgICAgICAgICAgIHZhciBfZm5wID0gdGhpcy5tX25hdnF1ZXJ5LmZpbmROZWFyZXN0UG9seShfYWc1LnRhcmdldFBvcywgdGhpcy5tX2V4dCwgdGhpcy5tX2ZpbHRlcnNbX2FnNS5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7DQoNCiAgICAgICAgICAgICAgICBfYWc1LnRhcmdldFJlZiA9IF9mbnAuZ2V0TmVhcmVzdFJlZigpOw0KDQogICAgICAgICAgICAgICAgaWYgKF9mbnAuZ2V0TmVhcmVzdFBvcygpICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShfYWc1LnRhcmdldFBvcywgX2ZucC5nZXROZWFyZXN0UG9zKCkpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJlcGxhbiA9IHRydWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoX2FnNS50YXJnZXRSZWYgPT0gMCkgew0KICAgICAgICAgICAgICAgIC8vIEZhaWxlZCB0byByZXBvc2l0aW9uIHRhcmdldCwgZmFpbCBtb3ZlcmVxdWVzdC4NCiAgICAgICAgICAgICAgICBfYWc1LmNvcnJpZG9yLnJlc2V0KGFnZW50UmVmLCBhZ2VudFBvcyk7DQoNCiAgICAgICAgICAgICAgICBfYWc1LnBhcnRpYWwgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBfYWc1LnRhcmdldFN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIElmIG5lYXJieSBjb3JyaWRvciBpcyBub3QgdmFsaWQsIHJlcGxhbi4NCg0KDQogICAgICAgICAgICBpZiAoIV9hZzUuY29ycmlkb3IuaXNWYWxpZChDcm93ZC5DSEVDS19MT09LQUhFQUQsIHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbX2FnNS5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSkpIHsNCiAgICAgICAgICAgICAgLy8gRml4IGN1cnJlbnQgcGF0aC4NCiAgICAgICAgICAgICAgLy8gYWcuY29ycmlkb3IudHJpbUludmFsaWRQYXRoKGFnZW50UmVmLCBhZ2VudFBvcywgbV9uYXZxdWVyeSwNCiAgICAgICAgICAgICAgLy8gJm1fZmlsdGVyKTsNCiAgICAgICAgICAgICAgLy8gYWcuYm91bmRhcnkucmVzZXQoKTsNCiAgICAgICAgICAgICAgcmVwbGFuID0gdHJ1ZTsNCiAgICAgICAgICAgIH0gLy8gSWYgdGhlIGVuZCBvZiB0aGUgcGF0aCBpcyBuZWFyIGFuZCBpdCBpcyBub3QgdGhlIHJlcXVlc3RlZA0KICAgICAgICAgICAgLy8gbG9jYXRpb24sIHJlcGxhbi4NCg0KDQogICAgICAgICAgICBpZiAoX2FnNS50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZBTElEKSB7DQogICAgICAgICAgICAgIGlmIChfYWc1LnRhcmdldFJlcGxhblRpbWUgPiBDcm93ZC5UQVJHRVRfUkVQTEFOX0RFTEFZICYmIF9hZzUuY29ycmlkb3IuZ2V0UGF0aENvdW50KCkgPCBDcm93ZC5DSEVDS19MT09LQUhFQUQgJiYgX2FnNS5jb3JyaWRvci5nZXRMYXN0UG9seSgpICE9IF9hZzUudGFyZ2V0UmVmKSB7DQogICAgICAgICAgICAgICAgcmVwbGFuID0gdHJ1ZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSAvLyBUcnkgdG8gcmVwbGFuIHBhdGggdG8gZ29hbC4NCg0KDQogICAgICAgICAgICBpZiAocmVwbGFuKSB7DQogICAgICAgICAgICAgIGlmIChfYWc1LnRhcmdldFN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORSkgew0KICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdE1vdmVUYXJnZXRSZXBsYW4oX2FnNSwgX2FnNS50YXJnZXRSZWYsIF9hZzUudGFyZ2V0UG9zKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJ1cGRhdGUiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGR0LCBkZWJ1ZywgZnJhbWUpIHsNCiAgICAgICAgICAvLyBpZiAoZnJhbWUgPT0gMTE0KQ0KICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygiQnVnIik7DQogICAgICAgICAgdGhpcy5tX3ZlbG9jaXR5U2FtcGxlQ291bnQgPSAwOw0KICAgICAgICAgIHZhciBkZWJ1Z0lkeCA9IGRlYnVnICE9IG51bGwgPyBkZWJ1Zy5pZHggOiAtMTsNCiAgICAgICAgICB2YXIgYWdlbnRzID0gdGhpcy5nZXRBY3RpdmVBZ2VudHMoKTsgLy8gQ2hlY2sgdGhhdCBhbGwgYWdlbnRzIHN0aWxsIGhhdmUgdmFsaWQgcGF0aHMuDQoNCiAgICAgICAgICB0aGlzLmNoZWNrUGF0aFZhbGlkaXR5KGFnZW50cywgZHQpOyAvLyBVcGRhdGUgYXN5bmMgbW92ZSByZXF1ZXN0IGFuZCBwYXRoIGZpbmRlci4NCg0KICAgICAgICAgIHRoaXMudXBkYXRlTW92ZVJlcXVlc3QoKTsgLy8gT3B0aW1pemUgcGF0aCB0b3BvbG9neS4NCg0KICAgICAgICAgIHRoaXMudXBkYXRlVG9wb2xvZ3lPcHRpbWl6YXRpb24oYWdlbnRzLCBkdCk7IC8vIFJlZ2lzdGVyIGFnZW50cyB0byBwcm94aW1pdHkgZ3JpZC4NCg0KICAgICAgICAgIHRoaXMubV9ncmlkLmNsZWFyKCk7DQoNCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFnZW50cy5sZW5ndGg7ICsraSkgew0KICAgICAgICAgICAgdmFyIF9hZzYgPSBhZ2VudHNbaV07DQogICAgICAgICAgICB2YXIgcCA9IF9hZzYubnBvczsNCiAgICAgICAgICAgIHZhciByID0gX2FnNi5wYXJhbXMucmFkaXVzOw0KICAgICAgICAgICAgdGhpcy5tX2dyaWQuYWRkSXRlbShpLCBwWzBdIC0gciwgcFsyXSAtIHIsIHBbMF0gKyByLCBwWzJdICsgcik7DQogICAgICAgICAgfSAvLyBHZXQgbmVhcmJ5IG5hdm1lc2ggc2VnbWVudHMgYW5kIGFnZW50cyB0byBjb2xsaWRlIHdpdGguDQoNCg0KICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYWdlbnRzKSwNCiAgICAgICAgICAgICAgX3N0ZXAyOw0KDQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgIHZhciBfYWcxMyA9IF9zdGVwMi52YWx1ZTsNCg0KICAgICAgICAgICAgICBpZiAoX2FnMTMuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgfSAvLyBVcGRhdGUgdGhlIGNvbGxpc2lvbiBib3VuZGFyeSBhZnRlciBjZXJ0YWluIGRpc3RhbmNlIGhhcyBiZWVuIHBhc3NlZCBvcg0KICAgICAgICAgICAgICAvLyBpZiBpdCBoYXMgYmVjb21lIGludmFsaWQuDQoNCg0KICAgICAgICAgICAgICB2YXIgdXBkYXRlVGhyID0gX2FnMTMucGFyYW1zLmNvbGxpc2lvblF1ZXJ5UmFuZ2UgKiAwLjI1Ow0KDQogICAgICAgICAgICAgIGlmIChEZXRvdXJDb21tb24udkRpc3QyRFNxcihfYWcxMy5ucG9zLCBfYWcxMy5ib3VuZGFyeS5nZXRDZW50ZXIoKSkgPiBEZXRvdXJDb21tb24uc3FyKHVwZGF0ZVRocikgfHwgIV9hZzEzLmJvdW5kYXJ5LmlzVmFsaWQodGhpcy5tX25hdnF1ZXJ5LCB0aGlzLm1fZmlsdGVyc1tfYWcxMy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSkpIHsNCiAgICAgICAgICAgICAgICBfYWcxMy5ib3VuZGFyeS51cGRhdGUoX2FnMTMuY29ycmlkb3IuZ2V0Rmlyc3RQb2x5KCksIF9hZzEzLm5wb3MsIF9hZzEzLnBhcmFtcy5jb2xsaXNpb25RdWVyeVJhbmdlLCB0aGlzLm1fbmF2cXVlcnksIHRoaXMubV9maWx0ZXJzW19hZzEzLnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdKTsNCiAgICAgICAgICAgICAgfSAvLyBRdWVyeSBuZWlnaGJvdXIgYWdlbnRzDQoNCg0KICAgICAgICAgICAgICBfYWcxMy5uZWlzID0gdGhpcy5nZXROZWlnaGJvdXJzKF9hZzEzLm5wb3MsIF9hZzEzLnBhcmFtcy5oZWlnaHQsIF9hZzEzLnBhcmFtcy5jb2xsaXNpb25RdWVyeVJhbmdlLCBfYWcxMywgYWdlbnRzLCB0aGlzLm1fZ3JpZCk7DQogICAgICAgICAgICB9IC8vIEZpbmQgbmV4dCBjb3JuZXIgdG8gc3RlZXIgdG8uDQoNCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOw0KICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBhZ2VudHMubGVuZ3RoOyArK19pNCkgew0KICAgICAgICAgICAgdmFyIF9hZzcgPSBhZ2VudHNbX2k0XTsNCg0KICAgICAgICAgICAgaWYgKF9hZzcuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChfYWc3LnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORSB8fCBfYWc3LnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkVMT0NJVFkpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9IC8vIEZpbmQgY29ybmVycyBmb3Igc3RlZXJpbmcNCg0KDQogICAgICAgICAgICBfYWc3LmNvcm5lcnMgPSBfYWc3LmNvcnJpZG9yLmZpbmRDb3JuZXJzKENyb3dkLkRUX0NST1dEQUdFTlRfTUFYX0NPUk5FUlMsIHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbX2FnNy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7IC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY29ybmVyIGFmdGVyIHRoZSBuZXh0IGNvcm5lciBpcyBkaXJlY3RseSB2aXNpYmxlLA0KICAgICAgICAgICAgLy8gYW5kIHNob3J0IGN1dCB0byB0aGVyZS4NCg0KICAgICAgICAgICAgaWYgKChfYWc3LnBhcmFtcy51cGRhdGVGbGFncyAmIENyb3dkQWdlbnRQYXJhbXMuRFRfQ1JPV0RfT1BUSU1JWkVfVklTKSAhPSAwICYmIF9hZzcuY29ybmVycy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfYWc3LmNvcm5lcnNbTWF0aC5taW4oMSwgX2FnNy5jb3JuZXJzLmxlbmd0aCAtIDEpXS5nZXRQb3MoKTsNCg0KICAgICAgICAgICAgICBfYWc3LmNvcnJpZG9yLm9wdGltaXplUGF0aFZpc2liaWxpdHkodGFyZ2V0LCBfYWc3LnBhcmFtcy5wYXRoT3B0aW1pemF0aW9uUmFuZ2UsIHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbX2FnNy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7IC8vIENvcHkgZGF0YSBmb3IgZGVidWcgcHVycG9zZXMuDQoNCg0KICAgICAgICAgICAgICBpZiAoZGVidWdJZHggPT0gX2k0KSB7DQogICAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGRlYnVnLm9wdFN0YXJ0LCBfYWc3LmNvcnJpZG9yLmdldFBvcygpKTsNCiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoZGVidWcub3B0RW5kLCB0YXJnZXQpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAvLyBDb3B5IGRhdGEgZm9yIGRlYnVnIHB1cnBvc2VzLg0KICAgICAgICAgICAgICBpZiAoZGVidWdJZHggPT0gX2k0KSB7DQogICAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoZGVidWcub3B0U3RhcnQsIDAsIDAsIDApOw0KICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGRlYnVnLm9wdEVuZCwgMCwgMCwgMCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IC8vIFRyaWdnZXIgb2ZmLW1lc2ggY29ubmVjdGlvbnMgKGRlcGVuZHMgb24gY29ybmVycykuDQoNCg0KICAgICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYWdlbnRzKSwNCiAgICAgICAgICAgICAgX3N0ZXAzOw0KDQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgIHZhciBfYWcxNCA9IF9zdGVwMy52YWx1ZTsNCg0KICAgICAgICAgICAgICBpZiAoX2FnMTQuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChfYWcxNC50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUgfHwgX2FnMTQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICB9IC8vIENoZWNrDQoNCg0KICAgICAgICAgICAgICB2YXIgdHJpZ2dlclJhZGl1cyA9IF9hZzE0LnBhcmFtcy5yYWRpdXMgKiAyLjI1Ow0KDQogICAgICAgICAgICAgIGlmIChfYWcxNC5vdmVyT2ZmbWVzaENvbm5lY3Rpb24odHJpZ2dlclJhZGl1cykpIHsNCiAgICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRvIG9mZi1tZXNoIGNvbm5lY3Rpb24uDQogICAgICAgICAgICAgICAgYW5pbSA9IF9hZzE0LmFuaW1hdGlvbjsgLy8gQWRqdXN0IHRoZSBwYXRoIG92ZXIgdGhlIG9mZi1tZXNoIGNvbm5lY3Rpb24uDQoNCiAgICAgICAgICAgICAgICB2YXIgcmVmcyA9IG5ldyBsb25nWzJdKCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoX2FnMTQuY29ycmlkb3IubW92ZU92ZXJPZmZtZXNoQ29ubmVjdGlvbihfYWcxNC5jb3JuZXJzW19hZzE0LmNvcm5lcnMubGVuZ3RoIC0gMV0uZ2V0UmVmKCksIHJlZnMsIGFuaW0uc3RhcnRQb3MsIGFuaW0uZW5kUG9zLCB0aGlzLm1fbmF2cXVlcnkpKSB7DQogICAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYW5pbS5pbml0UG9zLCBfYWcxNC5ucG9zKTsNCiAgICAgICAgICAgICAgICAgIGFuaW0ucG9seVJlZiA9IHJlZnNbMV07DQogICAgICAgICAgICAgICAgICBhbmltLmFjdGl2ZSA9IHRydWU7DQogICAgICAgICAgICAgICAgICBhbmltLnQgPSAwLjA7DQogICAgICAgICAgICAgICAgICBhbmltLnRtYXggPSBEZXRvdXJDb21tb24udkRpc3QyRChhbmltLnN0YXJ0UG9zLCBhbmltLmVuZFBvcykgLyBfYWcxNC5wYXJhbXMubWF4U3BlZWQgKiAwLjU7DQogICAgICAgICAgICAgICAgICBfYWcxNC5zdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9PRkZNRVNIOw0KICAgICAgICAgICAgICAgICAgX2FnMTQuY29ybmVycyA9IFtdOw0KICAgICAgICAgICAgICAgICAgX2FnMTQubmVpcyA9IFtdOw0KICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsvLyBQYXRoIHZhbGlkaXR5IGNoZWNrIHdpbGwgZW5zdXJlIHRoYXQgYmFkL2Jsb2NrZWQgY29ubmVjdGlvbnMgd2lsbCBiZSByZXBsYW5uZWQuDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IC8vIENhbGN1bGF0ZSBzdGVlcmluZy4NCg0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7DQogICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYWdlbnRzKSwNCiAgICAgICAgICAgICAgX3N0ZXA0Ow0KDQogICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7DQogICAgICAgICAgICAgIHZhciBfYWcxNSA9IF9zdGVwNC52YWx1ZTsNCg0KICAgICAgICAgICAgICBpZiAoX2FnMTUuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChfYWcxNS50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciBkdmVsID0gbmV3IEFycmF5KDMpOw0KDQogICAgICAgICAgICAgIGlmIChfYWcxNS50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZFTE9DSVRZKSB7DQogICAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGR2ZWwsIF9hZzE1LnRhcmdldFBvcyk7DQogICAgICAgICAgICAgICAgX2FnMTUuZGVzaXJlZFNwZWVkID0gRGV0b3VyQ29tbW9uLnZMZW4oX2FnMTUudGFyZ2V0UG9zKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgc3RlZXJpbmcgZGlyZWN0aW9uLg0KICAgICAgICAgICAgICAgIGlmICgoX2FnMTUucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9BTlRJQ0lQQVRFX1RVUk5TKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgICBkdmVsID0gX2FnMTUuY2FsY1Ntb290aFN0ZWVyRGlyZWN0aW9uKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGR2ZWwgPSBfYWcxNS5jYWxjU3RyYWlnaHRTdGVlckRpcmVjdGlvbigpOw0KICAgICAgICAgICAgICAgIH0gLy8gQ2FsY3VsYXRlIHNwZWVkIHNjYWxlLCB3aGljaCB0ZWxscyB0aGUgYWdlbnQgdG8gc2xvd2Rvd24gYXQgdGhlIGVuZCBvZiB0aGUgcGF0aC4NCg0KDQogICAgICAgICAgICAgICAgdmFyIHNsb3dEb3duUmFkaXVzID0gX2FnMTUucGFyYW1zLnJhZGl1cyAqIDI7IC8vIFRPRE86IG1ha2UgbGVzcyBoYWNreS4NCg0KICAgICAgICAgICAgICAgIHZhciBzcGVlZFNjYWxlID0gX2FnMTUuZ2V0RGlzdGFuY2VUb0dvYWwoc2xvd0Rvd25SYWRpdXMpIC8gc2xvd0Rvd25SYWRpdXM7DQogICAgICAgICAgICAgICAgX2FnMTUuZGVzaXJlZFNwZWVkID0gX2FnMTUucGFyYW1zLm1heFNwZWVkOw0KICAgICAgICAgICAgICAgIGR2ZWwgPSBEZXRvdXJDb21tb24udlNjYWxlKGR2ZWwsIF9hZzE1LmRlc2lyZWRTcGVlZCAqIHNwZWVkU2NhbGUpOw0KICAgICAgICAgICAgICB9IC8vIFNlcGFyYXRpb24NCg0KDQogICAgICAgICAgICAgIGlmICgoX2FnMTUucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9TRVBBUkFUSU9OKSAhPSAwKSB7DQogICAgICAgICAgICAgICAgc2VwYXJhdGlvbkRpc3QgPSBfYWcxNS5wYXJhbXMuY29sbGlzaW9uUXVlcnlSYW5nZTsNCiAgICAgICAgICAgICAgICBpbnZTZXBhcmF0aW9uRGlzdCA9IDEuMCAvIHNlcGFyYXRpb25EaXN0Ow0KICAgICAgICAgICAgICAgIHNlcGFyYXRpb25XZWlnaHQgPSBfYWcxNS5wYXJhbXMuc2VwYXJhdGlvbldlaWdodDsNCiAgICAgICAgICAgICAgICB3ID0gMDsNCiAgICAgICAgICAgICAgICB2YXIgZGlzcCA9IG5ldyBBcnJheSgzKTsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIF9qMyA9IDA7IF9qMyA8IF9hZzE1Lm5laXMubGVuZ3RoOyArK19qMykgew0KICAgICAgICAgICAgICAgICAgbmVpID0gYWdlbnRzLmdldChfYWcxNS5uZWlzW19qM10uaWR4KTsNCg0KICAgICAgICAgICAgICAgICAgdmFyIF9kaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIoX2FnMTUubnBvcywgbmVpLm5wb3MpOw0KDQogICAgICAgICAgICAgICAgICBfZGlmZlsxXSA9IDA7DQogICAgICAgICAgICAgICAgICBkaXN0U3FyID0gRGV0b3VyQ29tbW9uLnZMZW5TcXIoX2RpZmYpOw0KDQogICAgICAgICAgICAgICAgICBpZiAoZGlzdFNxciA8IDAuMDAwMDEpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGlmIChkaXN0U3FyID4gRGV0b3VyQ29tbW9uLnNxcihzZXBhcmF0aW9uRGlzdCkpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgIGRpc3QgPSBNYXRoLnNxcnQoZGlzdFNxcik7DQogICAgICAgICAgICAgICAgICB3ZWlnaHQgPSBzZXBhcmF0aW9uV2VpZ2h0ICogKDEuMCAtIERldG91ckNvbW1vbi5zcXIoZGlzdCAqIGludlNlcGFyYXRpb25EaXN0KSk7DQogICAgICAgICAgICAgICAgICBkaXNwID0gRGV0b3VyQ29tbW9uLnZNYWQoZGlzcCwgX2RpZmYsIHdlaWdodCAvIGRpc3QpOw0KICAgICAgICAgICAgICAgICAgdyArPSAxLjA7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKHcgPiAwLjAwMDEpIHsNCiAgICAgICAgICAgICAgICAgIC8vIEFkanVzdCBkZXNpcmVkIHZlbG9jaXR5Lg0KICAgICAgICAgICAgICAgICAgZHZlbCA9IERldG91ckNvbW1vbi52TWFkKGR2ZWwsIGRpc3AsIDEuMCAvIHcpOyAvLyBDbGFtcCBkZXNpcmVkIHZlbG9jaXR5IHRvIGRlc2lyZWQgc3BlZWQuDQoNCiAgICAgICAgICAgICAgICAgIHNwZWVkU3FyID0gRGV0b3VyQ29tbW9uLnZMZW5TcXIoZHZlbCk7DQogICAgICAgICAgICAgICAgICBkZXNpcmVkU3FyID0gRGV0b3VyQ29tbW9uLnNxcihfYWcxNS5kZXNpcmVkU3BlZWQpOw0KDQogICAgICAgICAgICAgICAgICBpZiAoc3BlZWRTcXIgPiBkZXNpcmVkU3FyKSB7DQogICAgICAgICAgICAgICAgICAgIGR2ZWwgPSBEZXRvdXJDb21tb24udlNjYWxlKGR2ZWwsIGRlc2lyZWRTcXIgLyBzcGVlZFNxcik7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9IC8vIFNldCB0aGUgZGVzaXJlZCB2ZWxvY2l0eS4NCg0KDQogICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShfYWcxNS5kdmVsLCBkdmVsKTsNCiAgICAgICAgICAgIH0gLy8gVmVsb2NpdHkgcGxhbm5pbmcuDQoNCiAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOw0KICAgICAgICAgIH0gZmluYWxseSB7DQogICAgICAgICAgICBfaXRlcmF0b3I0LmYoKTsNCiAgICAgICAgICB9DQoNCiAgICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBhZ2VudHMubGVuZ3RoOyArK19pNSkgew0KICAgICAgICAgICAgdmFyIF9hZzggPSBhZ2VudHNbX2k1XTsNCg0KICAgICAgICAgICAgaWYgKF9hZzguc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICgoX2FnOC5wYXJhbXMudXBkYXRlRmxhZ3MgJiBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09CU1RBQ0xFX0FWT0lEQU5DRSkgIT0gMCkgew0KICAgICAgICAgICAgICB0aGlzLm1fb2JzdGFjbGVRdWVyeS5yZXNldCgpOyAvLyBBZGQgbmVpZ2hib3VycyBhcyBvYnN0YWNsZXMuDQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfYWc4Lm5laXMubGVuZ3RoOyArK2opIHsNCiAgICAgICAgICAgICAgICB2YXIgX25laSA9IGFnZW50c1tfYWc4Lm5laXNbal0uaWR4XTsNCiAgICAgICAgICAgICAgICB0aGlzLm1fb2JzdGFjbGVRdWVyeS5hZGRDaXJjbGUoX25laS5ucG9zLCBfbmVpLnBhcmFtcy5yYWRpdXMsIF9uZWkudmVsLCBfbmVpLmR2ZWwpOw0KICAgICAgICAgICAgICB9IC8vIGlmIChhZy5uZWlzLmxlbmd0aCA+IDAgJiYgaSA9PSAwKSB7DQogICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygiRnJhbWUgIiArIGZyYW1lKQ0KICAgICAgICAgICAgICAvLyB9DQogICAgICAgICAgICAgIC8vIEFwcGVuZCBuZWlnaGJvdXIgc2VnbWVudHMgYXMgb2JzdGFjbGVzLg0KDQoNCiAgICAgICAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IF9hZzguYm91bmRhcnkuZ2V0U2VnbWVudENvdW50KCk7ICsrX2opIHsNCiAgICAgICAgICAgICAgICB2YXIgcyA9IF9hZzguYm91bmRhcnkuZ2V0U2VnbWVudChfaik7IC8vbGV0IHMzID0gQXJyYXlzLmNvcHlPZlJhbmdlKHMsIDMsIDYpOw0KICAgICAgICAgICAgICAgIC8vbGV0IHMzID0gQXJyYXlzLmNvcHlPZlJhbmdlKHMsIDMsIDYpOw0KDQoNCiAgICAgICAgICAgICAgICB2YXIgczMgPSBzLnNsaWNlKDMsIDYpOw0KDQogICAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi50cmlBcmVhMkQzKF9hZzgubnBvcywgcywgczMpIDwgMC4wKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB0aGlzLm1fb2JzdGFjbGVRdWVyeS5hZGRTZWdtZW50KHMsIHMzKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciB2b2QgPSBudWxsOw0KDQogICAgICAgICAgICAgIGlmIChkZWJ1Z0lkeCA9PSBfaTUpIHsNCiAgICAgICAgICAgICAgICB2b2QgPSBkZWJ1Zy52b2Q7DQogICAgICAgICAgICAgIH0gLy8gU2FtcGxlIG5ldyBzYWZlIHZlbG9jaXR5Lg0KDQoNCiAgICAgICAgICAgICAgdmFyIGFkYXB0aXZlID0gdHJ1ZTsNCiAgICAgICAgICAgICAgdmFyIG5zID0gMDsNCiAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHRoaXMubV9vYnN0YWNsZVF1ZXJ5UGFyYW1zW19hZzgucGFyYW1zLm9ic3RhY2xlQXZvaWRhbmNlVHlwZV07DQoNCiAgICAgICAgICAgICAgaWYgKGFkYXB0aXZlKSB7DQogICAgICAgICAgICAgICAgdmFyIG5zbnZlbCA9IHRoaXMubV9vYnN0YWNsZVF1ZXJ5LnNhbXBsZVZlbG9jaXR5QWRhcHRpdmUoX2FnOC5ucG9zLCBfYWc4LnBhcmFtcy5yYWRpdXMsIF9hZzguZGVzaXJlZFNwZWVkLCBfYWc4LnZlbCwgX2FnOC5kdmVsLCBwYXJhbXMsIHZvZCk7DQogICAgICAgICAgICAgICAgbnMgPSBuc252ZWxbMF07DQogICAgICAgICAgICAgICAgX2FnOC5udmVsID0gbnNudmVsWzFdOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHZhciBfbnNudmVsID0gdGhpcy5tX29ic3RhY2xlUXVlcnkuc2FtcGxlVmVsb2NpdHlHcmlkKF9hZzgubnBvcywgX2FnOC5wYXJhbXMucmFkaXVzLCBfYWc4LmRlc2lyZWRTcGVlZCwgX2FnOC52ZWwsIF9hZzguZHZlbCwgcGFyYW1zLCB2b2QpOw0KDQogICAgICAgICAgICAgICAgbnMgPSBfbnNudmVsWzBdOw0KICAgICAgICAgICAgICAgIF9hZzgubnZlbCA9IF9uc252ZWxbMV07DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICB0aGlzLm1fdmVsb2NpdHlTYW1wbGVDb3VudCArPSBuczsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIC8vIElmIG5vdCB1c2luZyB2ZWxvY2l0eSBwbGFubmluZywgbmV3IHZlbG9jaXR5IGlzIGRpcmVjdGx5IHRoZSBkZXNpcmVkIHZlbG9jaXR5Lg0KICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoX2FnOC5udmVsLCBfYWc4LmR2ZWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gSW50ZWdyYXRlLg0KDQoNCiAgICAgICAgICBmb3IgKHZhciBfaTYgPSAwOyBfaTYgPCBhZ2VudHMubGVuZ3RoOyArK19pNikgew0KICAgICAgICAgICAgdmFyIF9hZzkgPSBhZ2VudHNbX2k2XTsNCg0KICAgICAgICAgICAgaWYgKF9hZzkuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHsNCiAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIF9hZzkuaW50ZWdyYXRlKGR0KTsNCiAgICAgICAgICB9IC8vIEhhbmRsZSBjb2xsaXNpb25zLg0KDQoNCiAgICAgICAgICBmb3IgKHZhciBpdGVyID0gMDsgaXRlciA8IDQ7ICsraXRlcikgew0KICAgICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgYWdlbnRzLmxlbmd0aDsgKytfaTcpIHsNCiAgICAgICAgICAgICAgdmFyIF9hZzEwID0gYWdlbnRzW19pN107DQoNCiAgICAgICAgICAgICAgdmFyIGlkeDAgPSBfYWcxMC5nZXRBZ2VudEluZGV4KCk7DQoNCiAgICAgICAgICAgICAgaWYgKF9hZzEwLnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBEZXRvdXJDb21tb24udlNldChfYWcxMC5kaXNwLCAwLCAwLCAwKTsNCiAgICAgICAgICAgICAgdmFyIF93ID0gMDsNCg0KICAgICAgICAgICAgICBmb3IgKHZhciBfajIgPSAwOyBfajIgPCBfYWcxMC5uZWlzLmxlbmd0aDsgKytfajIpIHsNCiAgICAgICAgICAgICAgICB2YXIgX25laTIgPSBhZ2VudHNbX2FnMTAubmVpc1tfajJdLmlkeF07DQoNCiAgICAgICAgICAgICAgICB2YXIgaWR4MSA9IF9uZWkyLmdldEFnZW50SW5kZXgoKTsNCg0KICAgICAgICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIoX2FnMTAubnBvcywgX25laTIubnBvcyk7DQogICAgICAgICAgICAgICAgZGlmZlsxXSA9IDA7DQoNCiAgICAgICAgICAgICAgICB2YXIgX2Rpc3QgPSBEZXRvdXJDb21tb24udkxlblNxcihkaWZmKTsNCg0KICAgICAgICAgICAgICAgIGlmIChfZGlzdCA+IERldG91ckNvbW1vbi5zcXIoX2FnMTAucGFyYW1zLnJhZGl1cyArIF9uZWkyLnBhcmFtcy5yYWRpdXMpKSB7DQogICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBfZGlzdCA9IE1hdGguc3FydChfZGlzdCk7DQogICAgICAgICAgICAgICAgdmFyIHBlbiA9IF9hZzEwLnBhcmFtcy5yYWRpdXMgKyBfbmVpMi5wYXJhbXMucmFkaXVzIC0gX2Rpc3Q7DQoNCiAgICAgICAgICAgICAgICBpZiAoX2Rpc3QgPCAwLjAwMDEpIHsNCiAgICAgICAgICAgICAgICAgIC8vIEFnZW50cyBvbiB0b3Agb2YgZWFjaCBvdGhlciwgdHJ5IHRvIGNob29zZSBkaXZlcmdpbmcgc2VwYXJhdGlvbiBkaXJlY3Rpb25zLg0KICAgICAgICAgICAgICAgICAgaWYgKGlkeDAgPiBpZHgxKSB7DQogICAgICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGRpZmYsIC1fYWcxMC5kdmVsWzJdLCAwLCBfYWcxMC5kdmVsWzBdKTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGRpZmYsIF9hZzEwLmR2ZWxbMl0sIDAsIC1fYWcxMC5kdmVsWzBdKTsNCiAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgcGVuID0gMC4wMTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgcGVuID0gMS4wIC8gX2Rpc3QgKiAocGVuICogMC41KSAqIENyb3dkLkNPTExJU0lPTl9SRVNPTFZFX0ZBQ1RPUjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBfYWcxMC5kaXNwID0gRGV0b3VyQ29tbW9uLnZNYWQoX2FnMTAuZGlzcCwgZGlmZiwgcGVuKTsNCiAgICAgICAgICAgICAgICBfdyArPSAxLjA7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAoX3cgPiAwLjAwMDEpIHsNCiAgICAgICAgICAgICAgICB2YXIgaXcgPSAxLjAgLyBfdzsNCiAgICAgICAgICAgICAgICBfYWcxMC5kaXNwID0gRGV0b3VyQ29tbW9uLnZTY2FsZShfYWcxMC5kaXNwLCBpdyk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZm9yICh2YXIgX2k4ID0gMDsgX2k4IDwgYWdlbnRzLmxlbmd0aDsgKytfaTgpIHsNCiAgICAgICAgICAgICAgdmFyIF9hZzExID0gYWdlbnRzW19pOF07DQoNCiAgICAgICAgICAgICAgaWYgKF9hZzExLnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBfYWcxMS5ucG9zID0gRGV0b3VyQ29tbW9uLnZBZGQoX2FnMTEubnBvcywgX2FnMTEuZGlzcCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICh2YXIgX2k5ID0gMDsgX2k5IDwgYWdlbnRzLmxlbmd0aDsgKytfaTkpIHsNCiAgICAgICAgICAgIC8vIGlmIChmcmFtZSA9PSA0OTIpDQogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coIkJhZCBhZ2VudCIpDQogICAgICAgICAgICB2YXIgX2FnMTIgPSBhZ2VudHNbX2k5XTsNCg0KICAgICAgICAgICAgaWYgKF9hZzEyLnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBNb3ZlIGFsb25nIG5hdm1lc2guDQoNCg0KICAgICAgICAgICAgX2FnMTIuY29ycmlkb3IubW92ZVBvc2l0aW9uKF9hZzEyLm5wb3MsIHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbX2FnMTIucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pOyAvLyBHZXQgdmFsaWQgY29uc3RyYWluZWQgcG9zaXRpb24gYmFjay4NCg0KDQogICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoX2FnMTIubnBvcywgX2FnMTIuY29ycmlkb3IuZ2V0UG9zKCkpOyAvLyBJZiBub3QgdXNpbmcgcGF0aCwgdHJ1bmNhdGUgdGhlIGNvcnJpZG9yIHRvIGp1c3Qgb25lIHBvbHkuDQoNCiAgICAgICAgICAgIGlmIChfYWcxMi50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUgfHwgX2FnMTIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkgew0KICAgICAgICAgICAgICBfYWcxMi5jb3JyaWRvci5yZXNldChfYWcxMi5jb3JyaWRvci5nZXRGaXJzdFBvbHkoKSwgX2FnMTIubnBvcyk7DQoNCiAgICAgICAgICAgICAgX2FnMTIucGFydGlhbCA9IGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gLy8gVXBkYXRlIGFnZW50cyB1c2luZyBvZmYtbWVzaCBjb25uZWN0aW9uLg0KDQoNCiAgICAgICAgICBmb3IgKHZhciBfaTEwID0gMDsgX2kxMCA8IHRoaXMubV9tYXhBZ2VudHM7ICsrX2kxMCkgew0KICAgICAgICAgICAgdmFyIF9hbmltID0gdGhpcy5tX2FnZW50c1tfaTEwXS5hbmltYXRpb247DQoNCiAgICAgICAgICAgIGlmICghX2FuaW0uYWN0aXZlKSB7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBhZyA9IHRoaXMubV9hZ2VudHNbX2kxMF07DQogICAgICAgICAgICBfYW5pbS50ICs9IGR0Ow0KDQogICAgICAgICAgICBpZiAoX2FuaW0udCA+IF9hbmltLnRtYXgpIHsNCiAgICAgICAgICAgICAgLy8gUmVzZXQgYW5pbWF0aW9uDQogICAgICAgICAgICAgIF9hbmltLmFjdGl2ZSA9IGZhbHNlOyAvLyBQcmVwYXJlIGFnZW50IGZvciB3YWxraW5nLg0KDQogICAgICAgICAgICAgIGFnLnN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkc7DQogICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfSAvLyBVcGRhdGUgcG9zaXRpb24NCg0KDQogICAgICAgICAgICB0YSA9IF9hbmltLnRtYXggKiAwLjE1Ow0KICAgICAgICAgICAgdGIgPSBfYW5pbS50bWF4Ow0KDQogICAgICAgICAgICBpZiAoX2FuaW0udCA8IHRhKSB7DQogICAgICAgICAgICAgIHUgPSB0d2VlbihfYW5pbS50LCAwLjAsIHRhKTsNCiAgICAgICAgICAgICAgYWcubnBvcyA9IERldG91ckNvbW1vbi52TGVycDMoX2FuaW0uaW5pdFBvcywgX2FuaW0uc3RhcnRQb3MsIHUpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdSA9IHR3ZWVuKF9hbmltLnQsIHRhLCB0Yik7DQogICAgICAgICAgICAgIGFnLm5wb3MgPSBEZXRvdXJDb21tb24udkxlcnAzKF9hbmltLnN0YXJ0UG9zLCBfYW5pbS5lbmRQb3MsIHUpOw0KICAgICAgICAgICAgfSAvLyBVcGRhdGUgdmVsb2NpdHkuDQoNCg0KICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYWcudmVsLCAwLCAwLCAwKTsNCiAgICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGFnLmR2ZWwsIDAsIDAsIDApOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSwgew0KICAgICAgICBrZXk6ICJnZXRRdWVyeUV4dGVudHMiLA0KICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UXVlcnlFeHRlbnRzKCkgew0KICAgICAgICAgIHJldHVybiB0aGlzLm1fZXh0Ow0KICAgICAgICB9DQogICAgICB9LCB7DQogICAgICAgIGtleTogImdldEZpbHRlciIsDQogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXIoaSkgew0KICAgICAgICAgIHJldHVybiBpID49IDAgJiYgaSA8IENyb3dkLkRUX0NST1dEX01BWF9RVUVSWV9GSUxURVJfVFlQRSA/IHRoaXMubV9maWx0ZXJzW2ldIDogbnVsbDsNCiAgICAgICAgfQ0KICAgICAgfV0pOw0KDQogICAgICByZXR1cm4gQ3Jvd2Q7DQogICAgfSgpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkLCAiTUFYX0lURVJTX1BFUl9VUERBVEUiLCAxMDApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkLCAiTUFYX1BBVEhRVUVVRV9OT0RFUyIsIDQwOTYpOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkLCAiTUFYX0NPTU1PTl9OT0RFUyIsIDUxMik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsICJEVF9DUk9XREFHRU5UX01BWF9ORUlHSEJPVVJTIiwgNik7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsICJEVF9DUk9XREFHRU5UX01BWF9DT1JORVJTIiwgNCk7DQoNCiAgICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsICJEVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVMiLCA4KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgIkRUX0NST1dEX01BWF9RVUVSWV9GSUxURVJfVFlQRSIsIDE2KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgIk1BWF9JVEVSIiwgMjApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkLCAiT1BUX1RJTUVfVEhSIiwgMC41KTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgIkNIRUNLX0xPT0tBSEVBRCIsIDEwKTsNCg0KICAgIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgIlRBUkdFVF9SRVBMQU5fREVMQVkiLCAxLjApOw0KDQogICAgX2RlZmluZVByb3BlcnR5KENyb3dkLCAiQ09MTElTSU9OX1JFU09MVkVfRkFDVE9SIiwgMC43KTsNCg0KICAgIGV4cG9ydHMuQ3Jvd2QgPSBDcm93ZDsNCiAgICBleHBvcnRzLkNyb3dkQWdlbnRQYXJhbXMgPSBDcm93ZEFnZW50UGFyYW1zOw0KICAgIGV4cG9ydHMuTmF2TWVzaCA9IE5hdk1lc2g7DQogICAgZXhwb3J0cy5OYXZNZXNoUXVlcnkgPSBOYXZNZXNoUXVlcnk7DQogICAgZXhwb3J0cy5PYnN0YWNsZUF2b2lkYW5jZVBhcmFtcyA9IE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zOw0KICAgIGV4cG9ydHMuUmVjYXN0VGVzdE1lc2hCdWlsZGVyID0gUmVjYXN0VGVzdE1lc2hCdWlsZGVyOw0KDQogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsNCg0KICB9KSkpOwoKICAvL2ltcG9ydFNjcmlwdHMoIi4vY3Jvd2RlZC5qcyIpDQoNCiAgbGV0IENyb3dkQWdlbnRQYXJhbXMgPSBjcm93ZGVkLkNyb3dkQWdlbnRQYXJhbXM7DQogIGxldCBSZWNhc3RUZXN0TWVzaEJ1aWxkZXIgPSBjcm93ZGVkLlJlY2FzdFRlc3RNZXNoQnVpbGRlcjsNCiAgbGV0IE5hdk1lc2ggPSBjcm93ZGVkLk5hdk1lc2g7DQogIGxldCBOYXZNZXNoUXVlcnkgPSBjcm93ZGVkLk5hdk1lc2hRdWVyeTsNCiAgbGV0IENyb3dkID0gY3Jvd2RlZC5Dcm93ZDsNCiAgbGV0IE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zID0gY3Jvd2RlZC5PYnN0YWNsZUF2b2lkYW5jZVBhcmFtczsNCg0KICBjbGFzcyBDcm93ZFNpbUFwcCB7DQoNCiAgICBzdGF0aWMgdXBkYXRlRmxhZ3MgPSBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX0FOVElDSVBBVEVfVFVSTlMgfCBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09QVElNSVpFX1ZJUw0KICAgICAgfCBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09QVElNSVpFX1RPUE8gfCBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09CU1RBQ0xFX0FWT0lEQU5DRTsNCiAgICBzdGF0aWMgcXVlcnk7DQogICAgY3Jvd2Q7DQogICAgc3RhdGljIGFnZW50cyA9IFtdOw0KICAgIHN0YXRpYyBleHQ7DQogICAgc3RhdGljIGZpbHRlcjsNCiAgICBhcDsNCiAgICBtZDsNCiAgICBuYXZtZXNoOw0KDQogICAgYm9vdE1lc2gob2JqRmlsZUNvbnRlbnRzKSB7DQogICAgICB0aGlzLm5tZCA9IFJlY2FzdFRlc3RNZXNoQnVpbGRlci5mcm9tRmlsZShvYmpGaWxlQ29udGVudHMpLmdldE1lc2hEYXRhKCk7DQogICAgICB0aGlzLm5hdm1lc2ggPSBuZXcgTmF2TWVzaCh0aGlzLm5tZCwgNiwgMCk7DQogICAgICB0aGlzLnF1ZXJ5ID0gbmV3IE5hdk1lc2hRdWVyeSh0aGlzLm5hdm1lc2gpOw0KICAgICAgdGhpcy5jcm93ZCA9IG5ldyBDcm93ZCg1MDAsIDAuNiwgdGhpcy5uYXZtZXNoKTsNCiAgICAgIGxldCBwYXJhbXMgPSBuZXcgT2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMoKTsNCiAgICAgIHBhcmFtcy52ZWxCaWFzID0gMC41Ow0KICAgICAgcGFyYW1zLmFkYXB0aXZlRGl2cyA9IDU7DQogICAgICBwYXJhbXMuYWRhcHRpdmVSaW5ncyA9IDI7DQogICAgICBwYXJhbXMuYWRhcHRpdmVEZXB0aCA9IDE7DQogICAgICB0aGlzLmNyb3dkLnNldE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKDAsIHBhcmFtcyk7DQoNCiAgICAgIHRoaXMuYXAgPSB0aGlzLmdldEFnZW50UGFyYW1zKHRoaXMudXBkYXRlRmxhZ3MpOw0KICAgICAgdGhpcy5leHQgPSB0aGlzLmNyb3dkLmdldFF1ZXJ5RXh0ZW50cygpOw0KICAgICAgdGhpcy5maWx0ZXIgPSB0aGlzLmNyb3dkLmdldEZpbHRlcigwKTsNCiAgICB9DQoNCiAgICBnZXRBZ2VudFBhcmFtcyh1cGRhdGVGbGFncykgew0KICAgICAgbGV0IGFwID0gbmV3IENyb3dkQWdlbnRQYXJhbXMoKTsNCiAgICAgIGFwLnJhZGl1cyA9IDAuNjsNCiAgICAgIGFwLmhlaWdodCA9IDI7DQogICAgICBhcC5tYXhBY2NlbGVyYXRpb24gPSA4LjA7DQogICAgICBhcC5tYXhTcGVlZCA9IDIuNTsgLy9PcmlnaW5hbGx5IDMuNWYNCiAgICAgIGFwLmNvbGxpc2lvblF1ZXJ5UmFuZ2UgPSBhcC5yYWRpdXMgKiAxMjsNCiAgICAgIGFwLnBhdGhPcHRpbWl6YXRpb25SYW5nZSA9IGFwLnJhZGl1cyAqIDMwOw0KICAgICAgYXAudXBkYXRlRmxhZ3MgPSB1cGRhdGVGbGFnczsNCiAgICAgIGFwLm9ic3RhY2xlQXZvaWRhbmNlVHlwZSA9IDA7DQogICAgICBhcC5zZXBhcmF0aW9uV2VpZ2h0ID0gMTsgLy9PcmlnaW5hbGx5IDJmDQogICAgICByZXR1cm4gYXA7DQogICAgfQ0KICB9DQoNCiAgY2xhc3MgQXBwIGV4dGVuZHMgQ3Jvd2RTaW1BcHAgew0KICAgIGN1cnJlbnRNaWxsaXNlY29uZCA9IDA7DQogICAgbWlsbGlzZWNvbmRzQmV0d2VlbkZyYW1lcyA9IDQwOyAvLzQwbXMgYmV0d2VlbiBmcmFtZXMsIG9yIDI1ZnBzDQogICAgY3VycmVudFRpY2sgPSAwOw0KDQogICAgY29uc3RydWN0b3Iob2JqRmlsZUNvbnRlbnRzLCBzZWNvbmRzT2ZTaW11bGF0aW9uLCBsb2NhdGlvbkZpbGVDb250ZW50cykgew0KICAgICAgc3VwZXIoKTsNCiAgICAgIHRoaXMub2JqRmlsZUNvbnRlbnRzID0gb2JqRmlsZUNvbnRlbnRzOw0KICAgICAgdGhpcy5zZWNvbmRzT2ZTaW11bGF0aW9uID0gc2Vjb25kc09mU2ltdWxhdGlvbjsNCiAgICAgIHRoaXMubG9jYXRpb25zID0gbG9jYXRpb25GaWxlQ29udGVudHM7DQogICAgfQ0KICAgIGJvb3Qobm9uY2UpIHsNCiAgICAgIHRoaXMuYm9vdE1lc2godGhpcy5vYmpGaWxlQ29udGVudHMpOw0KICAgICAgcG9zdE1lc3NhZ2UoeyB0eXBlOiAiZG9uZUJvb3QiK25vbmNlIH0pOw0KICAgICAgLy90aGlzLnRpY2soW10sIFtdLCBbXSk7DQogICAgfQ0KICAgIGdldEFnZW50RGVmaW5pdGlvbnMoKSB7DQogICAgICByZXR1cm4geyB0eXBlOiAiYWdlbnREZWZpbml0aW9ucyIsIGFnZW50czogSlNPTi5zdHJpbmdpZnkoQ3Jvd2RTaW1BcHAuYWdlbnRzKSB9Ow0KICAgIH0NCg0KICAgIGFzeW5jIHRpY2sobmV3QWdlbnRzLCBuZXdEZXN0aW5hdGlvbnMsIGxlYXZpbmdBZ2VudHMpIHsNCiAgICAgIGlmICghdGhpcy5jcm93ZCkgcmV0dXJuOw0KICAgICAgbGV0IGkgPSB0aGlzLmN1cnJlbnRUaWNrKys7DQogICAgICBmb3IgKGxldCBhZ2VudCBvZiBuZXdBZ2VudHMpIHsNCiAgICAgICAgQ3Jvd2RTaW1BcHAuYWdlbnRzLnB1c2goYWdlbnQpOw0KICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmdldFN0YXJ0KGFnZW50KTsNCiAgICAgICAgbGV0IGlkeCA9IHRoaXMuY3Jvd2QuYWRkQWdlbnQoc3RhcnQsIHRoaXMuZ2V0QWdlbnRQYXJhbXMoQ3Jvd2RTaW1BcHAudXBkYXRlRmxhZ3MpKTsNCiAgICAgICAgYWdlbnQuaWR4ID0gaWR4Ow0KICAgICAgICBsZXQgbmVhcmVzdCA9IHRoaXMucXVlcnkuZmluZE5lYXJlc3RQb2x5KHRoaXMuZ2V0RW5kKGFnZW50KSwgdGhpcy5leHQsIHRoaXMuZmlsdGVyKTsNCiAgICAgICAgdGhpcy5jcm93ZC5yZXF1ZXN0TW92ZVRhcmdldChhZ2VudC5pZHgsIG5lYXJlc3QuZ2V0TmVhcmVzdFJlZigpLCBuZWFyZXN0LmdldE5lYXJlc3RQb3MoKSk7DQogICAgICAgIGFnZW50Lmhhc0VudGVyZWQgPSB0cnVlOw0KICAgICAgICBhZ2VudC5pblNpbXVsYXRpb24gPSB0cnVlOw0KICAgICAgfQ0KICAgICAgZm9yIChsZXQgYWdlbnQgb2YgbmV3RGVzdGluYXRpb25zKSB7DQogICAgICAgIGxldCBuZWFyZXN0ID0gdGhpcy5xdWVyeS5maW5kTmVhcmVzdFBvbHkodGhpcy5nZXRFbmQoYWdlbnQpLCB0aGlzLmV4dCwgdGhpcy5maWx0ZXIpOw0KICAgICAgICB0aGlzLmNyb3dkLnJlcXVlc3RNb3ZlVGFyZ2V0KGFnZW50LmlkeCwgbmVhcmVzdC5nZXROZWFyZXN0UmVmKCksIG5lYXJlc3QuZ2V0TmVhcmVzdFBvcygpKTsNCiAgICAgIH0NCiAgICAgIGZvciAobGV0IGFnZW50IG9mIGxlYXZpbmdBZ2VudHMpIHsNCiAgICAgICAgYWdlbnQuaW5TaW11bGF0aW9uID0gZmFsc2U7DQogICAgICAgIENyb3dkU2ltQXBwLmFnZW50cy5maW5kKGE9PmEuaWR4PT1hZ2VudC5pZHgpLmluU2ltdWxhdGlvbiA9IGZhbHNlOw0KICAgICAgICB0aGlzLmNyb3dkLnJlbW92ZUFnZW50KGFnZW50LmlkeCk7DQogICAgICB9DQoNCiAgICAgIA0KICAgICAgdGhpcy5jcm93ZC51cGRhdGUoMSAvIDI1LjAsIG51bGwsIGkpOw0KDQogICAgICBsZXQgdG9Qb3N0ID0gW107DQogICAgICBmb3IgKGxldCBhID0gMDsgYSA8IENyb3dkU2ltQXBwLmFnZW50cy5sZW5ndGg7IGErKykgew0KICAgICAgICBsZXQgYWdlbnQgPSBDcm93ZFNpbUFwcC5hZ2VudHNbYV07DQogICAgICAgIGxldCB0b0FkZCA9IHsNCiAgICAgICAgICBoYXNFbnRlcmVkOiBhZ2VudC5oYXNFbnRlcmVkLA0KICAgICAgICAgIGluU2ltdWxhdGlvbjogYWdlbnQuaW5TaW11bGF0aW9uLA0KICAgICAgICB9Ow0KICAgICAgICBpZiAoYWdlbnQuaGFzRW50ZXJlZCAmJiBhZ2VudC5pblNpbXVsYXRpb24pIHsNCiAgICAgICAgICBsZXQgaW50ZXJuYWxBZ2VudCA9IHRoaXMuY3Jvd2QuZ2V0QWdlbnQoYWdlbnQuaWR4KTsNCiAgICAgICAgICBsZXQgcG9zID0gaW50ZXJuYWxBZ2VudC5ucG9zOw0KICAgICAgICAgIHRvQWRkLnggPSBwb3NbMF07DQogICAgICAgICAgdG9BZGQueSA9IHBvc1sxXTsNCiAgICAgICAgICB0b0FkZC56ID0gcG9zWzJdOw0KICAgICAgICAgIHRvQWRkLmlkeCA9IGFnZW50LmlkeDsNCiAgICAgICAgICB0b0FkZC5pZCA9IGFnZW50LmlkOw0KICAgICAgICAgIHRvUG9zdC5wdXNoKHRvQWRkKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcG9zdE1lc3NhZ2UoeyB0eXBlOiAiYWdlbnRVcGRhdGUiICsgbm9uY2UsIGFnZW50czogSlNPTi5zdHJpbmdpZnkodG9Qb3N0KSwgZnJhbWU6IGkgfSk7DQogICAgfQ0KICAgIGdldFN0YXJ0KGFnZW50KSB7DQogICAgICByZXR1cm4gW2FnZW50LnN0YXJ0WCwgYWdlbnQuc3RhcnRZLCBhZ2VudC5zdGFydFpdDQogICAgfQ0KICAgIGdldEVuZChhZ2VudCkgew0KICAgICAgcmV0dXJuIFthZ2VudC5kZXN0WCwgYWdlbnQuZGVzdFksIGFnZW50LmRlc3RaXQ0KICAgIH0NCiAgfQ0KDQogIGxldCBhcHA7DQogIGxldCBub25jZSA9ICIiOw0KICBvbm1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7DQogICAgaWYgKCFtc2cuZGF0YSkgcmV0dXJuOw0KICAgIGlmIChtc2cuZGF0YVswXSA9PSAiYm9vdCIpIHsNCiAgICAgIGFwcCA9IG5ldyBBcHAobXNnLmRhdGFbMV0sIG1zZy5kYXRhWzJdLCBtc2cuZGF0YVszXSk7DQogICAgICBub25jZSA9IG1zZy5kYXRhWzRdOw0KICAgICAgYXBwLmJvb3Qobm9uY2UpOw0KICAgIH0NCiAgICBlbHNlIGlmIChtc2cuZGF0YVswXSA9PSAidGljayIgKyBub25jZSkgew0KICAgICAgYXBwLnRpY2soSlNPTi5wYXJzZShtc2cuZGF0YVsxXSksIEpTT04ucGFyc2UobXNnLmRhdGFbMl0pLCBKU09OLnBhcnNlKG1zZy5kYXRhWzNdKSk7DQogICAgfQ0KICB9OwoKICByZXR1cm4gQXBwOwoKfSgpKTsKCg==', 'data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJzcmMvY3Jvd2RlZC5qcyIsInNyYy93b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDpcclxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcclxuICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5jcm93ZGVkID0ge30pKTtcclxufSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XHJcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xyXG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XHJcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcclxuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xyXG4gICAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XHJcbiAgICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XHJcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoa2V5IGluIG9iaikge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcclxuICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvYmpba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvYmo7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcclxuICAgIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XHJcbiAgICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7XHJcbiAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGl0ZXIpKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHtcclxuICAgIGlmICh0eXBlb2YgU3ltYm9sID09PSBcInVuZGVmaW5lZFwiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuO1xyXG4gICAgdmFyIF9hcnIgPSBbXTtcclxuICAgIHZhciBfbiA9IHRydWU7XHJcbiAgICB2YXIgX2QgPSBmYWxzZTtcclxuICAgIHZhciBfZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XHJcbiAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcclxuXHJcbiAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgX2QgPSB0cnVlO1xyXG4gICAgICBfZSA9IGVycjtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIGlmIChfZCkgdGhyb3cgX2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gX2FycjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcclxuICAgIGlmICghbykgcmV0dXJuO1xyXG4gICAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcclxuICAgIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcclxuICAgIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XHJcbiAgICBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTtcclxuICAgIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XHJcbiAgICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07XHJcblxyXG4gICAgcmV0dXJuIGFycjI7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcclxuICAgIHZhciBpdDtcclxuXHJcbiAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkge1xyXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgaWYgKGl0KSBvID0gaXQ7XHJcbiAgICAgICAgdmFyIGkgPSAwO1xyXG5cclxuICAgICAgICB2YXIgRiA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgczogRixcclxuICAgICAgICAgIG46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgZG9uZTogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgIHZhbHVlOiBvW2krK11cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBlOiBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGY6IEZcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLFxyXG4gICAgICAgIGRpZEVyciA9IGZhbHNlLFxyXG4gICAgICAgIGVycjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpdCA9IG9bU3ltYm9sLml0ZXJhdG9yXSgpO1xyXG4gICAgICB9LFxyXG4gICAgICBuOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7XHJcbiAgICAgICAgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTtcclxuICAgICAgICByZXR1cm4gc3RlcDtcclxuICAgICAgfSxcclxuICAgICAgZTogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBkaWRFcnIgPSB0cnVlO1xyXG4gICAgICAgIGVyciA9IGU7XHJcbiAgICAgIH0sXHJcbiAgICAgIGY6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgaWYgKGRpZEVycikgdGhyb3cgZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIC8vLyBDb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgZm9yIGEgY3Jvd2QgYWdlbnQuXHJcbiAgLy8vIEBpbmdyb3VwIGNyb3dkXHJcbiAgdmFyIENyb3dkQWdlbnRQYXJhbXMgPSBmdW5jdGlvbiBDcm93ZEFnZW50UGFyYW1zKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENyb3dkQWdlbnRQYXJhbXMpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJhZGl1c1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWlnaHRcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4QWNjZWxlcmF0aW9uXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFNwZWVkXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbGxpc2lvblF1ZXJ5UmFuZ2VcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGF0aE9wdGltaXphdGlvblJhbmdlXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlcGFyYXRpb25XZWlnaHRcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidXBkYXRlRmxhZ3NcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzdGFjbGVBdm9pZGFuY2VUeXBlXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInF1ZXJ5RmlsdGVyVHlwZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2VyRGF0YVwiLCBudWxsKTtcclxuICB9O1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudFBhcmFtcywgXCJEVF9DUk9XRF9BTlRJQ0lQQVRFX1RVUk5TXCIsIDEpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudFBhcmFtcywgXCJEVF9DUk9XRF9PQlNUQUNMRV9BVk9JREFOQ0VcIiwgMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50UGFyYW1zLCBcIkRUX0NST1dEX1NFUEFSQVRJT05cIiwgNCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50UGFyYW1zLCBcIkRUX0NST1dEX09QVElNSVpFX1ZJU1wiLCA4KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnRQYXJhbXMsIFwiRFRfQ1JPV0RfT1BUSU1JWkVfVE9QT1wiLCAxNik7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG5cclxuICAvKipcclxuICAgKiAgQ29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIHVzZWQgdG8gZGVmaW5lIG11bHRpLXRpbGUgbmF2aWdhdGlvbiBtZXNoZXMuXHJcbiAgICogIFRoZSB2YWx1ZXMgYXJlIHVzZWQgdG8gYWxsb2NhdGUgc3BhY2UgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvbiBvZiBhIG5hdmlnYXRpb24gbWVzaC5cclxuICAgKiAgQHNlZSBOYXZNZXNoXHJcbiAgICovXHJcbiAgdmFyIE5hdk1lc2hQYXJhbXMgPSBmdW5jdGlvbiBOYXZNZXNoUGFyYW1zKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5hdk1lc2hQYXJhbXMpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9yaWdcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0aWxlV2lkdGhcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGlsZUhlaWdodFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhUaWxlc1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhQb2x5c1wiLCAwKTtcclxuICB9O1xyXG5cclxuICB2YXIgSW50ZXJzZWN0UmVzdWx0ID0gZnVuY3Rpb24gSW50ZXJzZWN0UmVzdWx0KCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEludGVyc2VjdFJlc3VsdCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaW50ZXJzZWN0c1wiLCBmYWxzZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidG1pblwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0bWF4XCIsIDEpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlZ01pblwiLCAtMSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic2VnTWF4XCIsIC0xKTtcclxuICB9O1xyXG5cclxuICAvKlxyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogV3JhcHBlciBmb3IgMy1lbGVtZW50IHBpZWNlcyAoM0QgdmVjdG9ycykgb2YgYSBiaWdnZXIgIGFycmF5LlxyXG4gICAqXHJcbiAgICovXHJcbiAgdmFyIFZlY3RvclB0ciQxID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIC8vIGNvbnN0cnVjdG9yKCBhcnJheSkge1xyXG4gICAgLy8gXHRcdHRoaXMoYXJyYXksIDApO1xyXG4gICAgLy8gXHR9XHJcbiAgICBmdW5jdGlvbiBWZWN0b3JQdHIoYXJyYXkpIHtcclxuICAgICAgdmFyIGluZGV4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAwO1xyXG5cclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlY3RvclB0cik7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcnJheVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5kZXhcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcclxuICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhWZWN0b3JQdHIsIFt7XHJcbiAgICAgIGtleTogXCJnZXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldChvZmZzZXQpIHtcclxuICAgICAgICByZXR1cm4gYXJyYXlbaW5kZXggKyBvZmZzZXRdO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFZlY3RvclB0cjtcclxuICB9KCk7XHJcblxyXG4gIHZhciBEZXRvdXJDb21tb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGV0b3VyQ29tbW9uKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGV0b3VyQ29tbW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoRGV0b3VyQ29tbW9uLCBudWxsLCBbe1xyXG4gICAgICBrZXk6IFwidk1hZFwiLFxyXG4gICAgICAvLy8gUGVyZm9ybXMgYSBzY2FsZWQgdmVjdG9yIGFkZGl0aW9uLiAoQHAgdjEgKyAoQHAgdjIgKiBAcCBzKSlcclxuICAgICAgLy8vIEBwYXJhbVtvdXRdIGRlc3QgVGhlIHJlc3VsdCB2ZWN0b3IuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2MSBUaGUgYmFzZSB2ZWN0b3IuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2MiBUaGUgdmVjdG9yIHRvIHNjYWxlIGFuZCBhZGQgdG8gQHAgdjEuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSBzIFRoZSBhbW91bnQgdG8gc2NhbGUgQHAgdjIgYnkgYmVmb3JlIGFkZGluZyB0byBAcCB2MS5cclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZNYWQodjEsIHYyLCBzKSB7XHJcbiAgICAgICAgdmFyIGRlc3QgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgZGVzdFswXSA9IHYxWzBdICsgdjJbMF0gKiBzO1xyXG4gICAgICAgIGRlc3RbMV0gPSB2MVsxXSArIHYyWzFdICogcztcclxuICAgICAgICBkZXN0WzJdID0gdjFbMl0gKyB2MlsyXSAqIHM7XHJcbiAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICAgIH0gLy8vIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycy4gKEBwIHYxIHRvd2FyZCBAcFxyXG4gICAgICAvLy8gdjIpXHJcbiAgICAgIC8vLyBAcGFyYW1bb3V0XSBkZXN0IFRoZSByZXN1bHQgdmVjdG9yLiBbKHgsIHksIHgpXVxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gdjEgVGhlIHN0YXJ0aW5nIHZlY3Rvci5cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIHYyIFRoZSBkZXN0aW5hdGlvbiB2ZWN0b3IuXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB0IFRoZSBpbnRlcnBvbGF0aW9uIGZhY3Rvci4gW0xpbWl0czogMCA8PSB2YWx1ZSA8PSAxLjBdXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidkxlcnA0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2TGVycDQodmVydHMsIHYxLCB2MiwgdCkge1xyXG4gICAgICAgIHZhciBkZXN0ID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIGRlc3RbMF0gPSB2ZXJ0c1t2MSArIDBdICsgKHZlcnRzW3YyICsgMF0gLSB2ZXJ0c1t2MSArIDBdKSAqIHQ7XHJcbiAgICAgICAgZGVzdFsxXSA9IHZlcnRzW3YxICsgMV0gKyAodmVydHNbdjIgKyAxXSAtIHZlcnRzW3YxICsgMV0pICogdDtcclxuICAgICAgICBkZXN0WzJdID0gdmVydHNbdjEgKyAyXSArICh2ZXJ0c1t2MiArIDJdIC0gdmVydHNbdjEgKyAyXSkgKiB0O1xyXG4gICAgICAgIHJldHVybiBkZXN0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2TGVycDNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZMZXJwMyh2MSwgdjIsIHQpIHtcclxuICAgICAgICB2YXIgZGVzdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBkZXN0WzBdID0gdjFbMF0gKyAodjJbMF0gLSB2MVswXSkgKiB0O1xyXG4gICAgICAgIGRlc3RbMV0gPSB2MVsxXSArICh2MlsxXSAtIHYxWzFdKSAqIHQ7XHJcbiAgICAgICAgZGVzdFsyXSA9IHYxWzJdICsgKHYyWzJdIC0gdjFbMl0pICogdDtcclxuICAgICAgICByZXR1cm4gZGVzdDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidlN1YlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdlN1Yih2MSwgdjIpIHtcclxuICAgICAgICB2YXIgZGVzdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBkZXN0WzBdID0gdjFbMF0gLSB2MlswXTtcclxuICAgICAgICBkZXN0WzFdID0gdjFbMV0gLSB2MlsxXTtcclxuICAgICAgICBkZXN0WzJdID0gdjFbMl0gLSB2MlsyXTtcclxuICAgICAgICByZXR1cm4gZGVzdDtcclxuICAgICAgfSAvLyBzdGF0aWMgdlN1Yih2MSwgdjIpIHtcclxuICAgICAgLy8gXHRsZXQgZGVzdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgLy8gXHRkZXN0WzBdID0gdjFbMF0gLSB2MlswXTtcclxuICAgICAgLy8gXHRkZXN0WzFdID0gdjFbMV0gLSB2MlsxXTtcclxuICAgICAgLy8gXHRkZXN0WzJdID0gdjFbMl0gLSB2MlsyXTtcclxuICAgICAgLy8gXHRyZXR1cm4gZGVzdDtcclxuICAgICAgLy8gfVxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZBZGRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZBZGQodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGRlc3QgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgZGVzdFswXSA9IHYxWzBdICsgdjJbMF07XHJcbiAgICAgICAgZGVzdFsxXSA9IHYxWzFdICsgdjJbMV07XHJcbiAgICAgICAgZGVzdFsyXSA9IHYxWzJdICsgdjJbMl07XHJcbiAgICAgICAgcmV0dXJuIGRlc3Q7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZDb3B5X3JldHVyblwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdkNvcHlfcmV0dXJuKGkpIHtcclxuICAgICAgICB2YXIgb3V0ID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIG91dFswXSA9IGlbMF07XHJcbiAgICAgICAgb3V0WzFdID0gaVsxXTtcclxuICAgICAgICBvdXRbMl0gPSBpWzJdO1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZTZXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZTZXQob3V0LCBhLCBiLCBjKSB7XHJcbiAgICAgICAgb3V0WzBdID0gYTtcclxuICAgICAgICBvdXRbMV0gPSBiO1xyXG4gICAgICAgIG91dFsyXSA9IGM7XHJcbiAgICAgIH0gLy8gc3RhdGljIHZDb3B5KG91dCwgaSkge1xyXG4gICAgICAvLyBcdG91dFswXSA9IGlbMF07XHJcbiAgICAgIC8vIFx0b3V0WzFdID0gaVsxXTtcclxuICAgICAgLy8gXHRvdXRbMl0gPSBpWzJdO1xyXG4gICAgICAvLyB9XHJcbiAgICAgIC8vU2VlIHZDb3B5X3JldHVybiBmb3IgdGhlIDEgcGFyYW1ldGVyIHZlcnNpb25cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2Q29weVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdkNvcHkob3V0LCBfaW4pIHtcclxuICAgICAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMDtcclxuICAgICAgICBvdXRbMF0gPSBfaW5baV07XHJcbiAgICAgICAgb3V0WzFdID0gX2luW2kgKyAxXTtcclxuICAgICAgICBvdXRbMl0gPSBfaW5baSArIDJdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2TWluXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2TWluKG91dCwgX2luLCBpKSB7XHJcbiAgICAgICAgb3V0WzBdID0gTWF0aC5taW4ob3V0WzBdLCBfaW5baV0pO1xyXG4gICAgICAgIG91dFsxXSA9IE1hdGgubWluKG91dFsxXSwgX2luW2kgKyAxXSk7XHJcbiAgICAgICAgb3V0WzJdID0gTWF0aC5taW4ob3V0WzJdLCBfaW5baSArIDJdKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidk1heFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdk1heChvdXQsIF9pbiwgaSkge1xyXG4gICAgICAgIG91dFswXSA9IE1hdGgubWF4KG91dFswXSwgX2luW2ldKTtcclxuICAgICAgICBvdXRbMV0gPSBNYXRoLm1heChvdXRbMV0sIF9pbltpICsgMV0pO1xyXG4gICAgICAgIG91dFsyXSA9IE1hdGgubWF4KG91dFsyXSwgX2luW2kgKyAyXSk7XHJcbiAgICAgIH0gLy8vIFJldHVybnMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50cy5cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIHYxIEEgcG9pbnQuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2MiBBIHBvaW50LiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIHBvaW50cy5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2RGlzdDJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZEaXN0Mih2MSwgdjIpIHtcclxuICAgICAgICB2YXIgZHggPSB2MlswXSAtIHYxWzBdO1xyXG4gICAgICAgIHZhciBkeSA9IHYyWzFdIC0gdjFbMV07XHJcbiAgICAgICAgdmFyIGR6ID0gdjJbMl0gLSB2MVsyXTtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkeik7XHJcbiAgICAgIH0gLy8vIFJldHVybnMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50cy5cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIHYxIEEgcG9pbnQuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2MiBBIHBvaW50LiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdHdvIHBvaW50cy5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2RGlzdFNxclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdkRpc3RTcXIodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGR4ID0gdjJbMF0gLSB2MVswXTtcclxuICAgICAgICB2YXIgZHkgPSB2MlsxXSAtIHYxWzFdO1xyXG4gICAgICAgIHZhciBkeiA9IHYyWzJdIC0gdjFbMl07XHJcbiAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkejtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwic3FyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzcXIoYSkge1xyXG4gICAgICAgIHJldHVybiBhICogYTtcclxuICAgICAgfSAvLy8gRGVyaXZlcyB0aGUgc3F1YXJlIG9mIHRoZSBzY2FsYXIgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IuIChsZW4gKiBsZW4pXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2IFRoZSB2ZWN0b3IuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRoZSBzcXVhcmUgb2YgdGhlIHNjYWxhciBsZW5ndGggb2YgdGhlIHZlY3Rvci5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2TGVuU3FyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2TGVuU3FyKHYpIHtcclxuICAgICAgICByZXR1cm4gdlswXSAqIHZbMF0gKyB2WzFdICogdlsxXSArIHZbMl0gKiB2WzJdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2TGVuXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2TGVuKHYpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHZbMF0gKiB2WzBdICsgdlsxXSAqIHZbMV0gKyB2WzJdICogdlsyXSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZEaXN0M1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdkRpc3QzKHYxLCB2ZXJ0cywgaSkge1xyXG4gICAgICAgIHZhciBkeCA9IHZlcnRzW2ldIC0gdjFbMF07XHJcbiAgICAgICAgdmFyIGR5ID0gdmVydHNbaSArIDFdIC0gdjFbMV07XHJcbiAgICAgICAgdmFyIGR6ID0gdmVydHNbaSArIDJdIC0gdjFbMl07XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHopO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjbGFtcFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xhbXAodiwgbWluLCBtYXgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4odiwgbWF4KSwgbWluKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY2xhbXBcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsYW1wKHYsIG1pbiwgbWF4KSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHYsIG1heCksIG1pbik7XHJcbiAgICAgIH0gLy8vIERlcml2ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHNwZWNpZmllZCBwb2ludHMgb24gdGhlIHh6LXBsYW5lLlxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gdjEgQSBwb2ludC4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIHYyIEEgcG9pbnQuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb1BvbHkgb24gdGhlIHh6LXBsYW5lLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSB2ZWN0b3JzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgeHotcGxhbmUsIHNvIHRoZSB5LXZhbHVlcyBhcmVcclxuICAgICAgLy8vIGlnbm9yZWQuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidkRpc3QyRFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdkRpc3QyRCh2MSwgdjIpIHtcclxuICAgICAgICB2YXIgZHggPSB2MlswXSAtIHYxWzBdO1xyXG4gICAgICAgIHZhciBkeiA9IHYyWzJdIC0gdjFbMl07XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHogKiBkeik7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZEaXN0MkRTcXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZEaXN0MkRTcXIodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGR4ID0gdjJbMF0gLSB2MVswXTtcclxuICAgICAgICB2YXIgZHogPSB2MlsyXSAtIHYxWzJdO1xyXG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHogKiBkejtcclxuICAgICAgfSAvLy8gTm9ybWFsaXplcyB0aGUgdmVjdG9yLlxyXG4gICAgICAvLy8gQHBhcmFtW19pbixvdXRdIHYgVGhlIHZlY3RvciB0byBub3JtYWxpemUuIFsoeCwgeSwgeildXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidk5vcm1hbGl6ZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdk5vcm1hbGl6ZSh2KSB7XHJcbiAgICAgICAgdmFyIGQgPSAxLjAgLyBNYXRoLnNxcnQoRGV0b3VyQ29tbW9uLnNxcih2WzBdKSArIERldG91ckNvbW1vbi5zcXIodlsxXSkgKyBEZXRvdXJDb21tb24uc3FyKHZbMl0pKTtcclxuXHJcbiAgICAgICAgaWYgKGQgIT0gMCkge1xyXG4gICAgICAgICAgdlswXSAqPSBkO1xyXG4gICAgICAgICAgdlsxXSAqPSBkO1xyXG4gICAgICAgICAgdlsyXSAqPSBkO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidkVxdWFsXCIsXHJcbiAgICAgIC8vLyBQZXJmb3JtcyBhICdzbG9wcHknIGNvbG9jYXRpb24gY2hlY2sgb2YgdGhlIHNwZWNpZmllZCBwb2ludHMuXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSBwMCBBIHBvaW50LiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gcDEgQSBwb2ludC4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcG9pbnRzIGFyZSBjb25zaWRlcmVkIHRvIGJlIGF0IHRoZSBzYW1lIGxvY2F0aW9uLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEJhc2ljYWxseSwgdGhpcyBmdW5jdGlvbiB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBzcGVjaWZpZWQgcG9pbnRzIGFyZVxyXG4gICAgICAvLy8gY2xvc2UgZW5vdWdoIHRvIGVhY2hvdGhlciB0byBiZSBjb25zaWRlcmVkIGNvbG9jYXRlZC5cclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZFcXVhbChwMCwgcDEpIHtcclxuICAgICAgICB2YXIgZCA9IERldG91ckNvbW1vbi52RGlzdFNxcihwMCwgcDEpO1xyXG4gICAgICAgIHJldHVybiBkIDwgRGV0b3VyQ29tbW9uLnRocjtcclxuICAgICAgfSAvLy8gRGVyaXZlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdHdvIHZlY3RvcnMgb24gdGhlIHh6LXBsYW5lLiAoQHAgdSAuIEBwIHYpXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB1IEEgdmVjdG9yIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2IEEgdmVjdG9yIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRoZSBkb3QgcHJvZHVjdCBvbiB0aGUgeHotcGxhbmUuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIHZlY3RvcnMgYXJlIHByb2plY3RlZCBvbnRvIHRoZSB4ei1wbGFuZSwgc28gdGhlIHktdmFsdWVzIGFyZVxyXG4gICAgICAvLy8gaWdub3JlZC5cclxuICAgICAgLy8gc3RhdGljIERldG91ckNvbW1vbi52RG90MkQodSwgdikge1xyXG4gICAgICAvLyBcdHJldHVybiB1WzBdICogdlswXSArIHVbMl0gKiB2WzJdO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidkRvdDJEXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2RG90MkQodSwgdikge1xyXG4gICAgICAgIHZhciB2aSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMDtcclxuICAgICAgICByZXR1cm4gdVswXSAqIHZbdmldICsgdVsyXSAqIHZbdmkgKyAyXTtcclxuICAgICAgfSAvLy8gRGVyaXZlcyB0aGUgeHotcGxhbmUgMkQgcGVycCBwcm9kdWN0IG9mIHRoZSB0d28gdmVjdG9ycy4gKHV6KnZ4IC0gdXgqdnopXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB1IFRoZSBMSFYgdmVjdG9yIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSB2IFRoZSBSSFYgdmVjdG9yIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRoZSBkb3QgcHJvZHVjdCBvbiB0aGUgeHotcGxhbmUuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIHZlY3RvcnMgYXJlIHByb2plY3RlZCBvbnRvIHRoZSB4ei1wbGFuZSwgc28gdGhlIHktdmFsdWVzIGFyZVxyXG4gICAgICAvLy8gaWdub3JlZC5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2UGVycDJEXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2UGVycDJEKHUsIHYpIHtcclxuICAgICAgICByZXR1cm4gdVsyXSAqIHZbMF0gLSB1WzBdICogdlsyXTtcclxuICAgICAgfSAvLy8gQH1cclxuICAgICAgLy8vIEBuYW1lIENvbXB1dGF0aW9uYWwgZ2VvbWV0cnkgaGVscGVyIGZ1bmN0aW9ucy5cclxuICAgICAgLy8vIEB7XHJcbiAgICAgIC8vLyBEZXJpdmVzIHRoZSBzaWduZWQgeHotcGxhbmUgYXJlYSBvZiB0aGUgdHJpYW5nbGUgQUJDLCBvciB0aGVcclxuICAgICAgLy8vIHJlbGF0aW9uc2hpcCBvZiBsaW5lIEFCIHRvIHBvUG9seSBDLlxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gYSBWZXJ0ZXggQS4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIGIgVmVydGV4IEIuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSBjIFZlcnRleCBDLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgc2lnbmVkIHh6LXBsYW5lIGFyZWEgb2YgdGhlIHRyaWFuZ2xlLlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInRyaUFyZWEyRDRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyaUFyZWEyRDQodmVydHMsIGEsIGIsIGMpIHtcclxuICAgICAgICBhYnggPSB2ZXJ0c1tiXSAtIHZlcnRzW2FdO1xyXG4gICAgICAgIGFieiA9IHZlcnRzW2IgKyAyXSAtIHZlcnRzW2EgKyAyXTtcclxuICAgICAgICBhY3ggPSB2ZXJ0c1tjXSAtIHZlcnRzW2FdO1xyXG4gICAgICAgIGFjeiA9IHZlcnRzW2MgKyAyXSAtIHZlcnRzW2EgKyAyXTtcclxuICAgICAgICByZXR1cm4gYWN4ICogYWJ6IC0gYWJ4ICogYWN6O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ0cmlBcmVhMkQzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlBcmVhMkQzKGEsIGIsIGMpIHtcclxuICAgICAgICB2YXIgYWJ4ID0gYlswXSAtIGFbMF07XHJcbiAgICAgICAgdmFyIGFieiA9IGJbMl0gLSBhWzJdO1xyXG4gICAgICAgIHZhciBhY3ggPSBjWzBdIC0gYVswXTtcclxuICAgICAgICB2YXIgYWN6ID0gY1syXSAtIGFbMl07XHJcbiAgICAgICAgcmV0dXJuIGFjeCAqIGFieiAtIGFieCAqIGFjejtcclxuICAgICAgfSAvLy8gRGV0ZXJtaW5lcyBpZiB0d28gYXhpcy1hbGlnbmVkIGJvdW5kaW5nIGJveGVzIG92ZXJsYXAuXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSBhbWluIE1pbmltdW0gYm91bmRzIG9mIGJveCBBLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gYW1heCBNYXhpbXVtIGJvdW5kcyBvZiBib3ggQS4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIGJtaW4gTWluaW11bSBib3VuZHMgb2YgYm94IEIuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSBibWF4IE1heGltdW0gYm91bmRzIG9mIGJveCBCLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSB0d28gQUFCQidzIG92ZXJsYXAuXHJcbiAgICAgIC8vLyBAc2VlIGR0T3ZlcmxhcEJvdW5kc1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm92ZXJsYXBRdWFudEJvdW5kc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3ZlcmxhcFF1YW50Qm91bmRzKGFtaW4sIGFtYXgsIGJtaW4sIGJtYXgpIHtcclxuICAgICAgICB2YXIgb3ZlcmxhcCA9IHRydWU7XHJcbiAgICAgICAgb3ZlcmxhcCA9IGFtaW5bMF0gPiBibWF4WzBdIHx8IGFtYXhbMF0gPCBibWluWzBdID8gZmFsc2UgOiBvdmVybGFwO1xyXG4gICAgICAgIG92ZXJsYXAgPSBhbWluWzFdID4gYm1heFsxXSB8fCBhbWF4WzFdIDwgYm1pblsxXSA/IGZhbHNlIDogb3ZlcmxhcDtcclxuICAgICAgICBvdmVybGFwID0gYW1pblsyXSA+IGJtYXhbMl0gfHwgYW1heFsyXSA8IGJtaW5bMl0gPyBmYWxzZSA6IG92ZXJsYXA7XHJcbiAgICAgICAgcmV0dXJuIG92ZXJsYXA7XHJcbiAgICAgIH0gLy8vIERldGVybWluZXMgaWYgdHdvIGF4aXMtYWxpZ25lZCBib3VuZGluZyBib3hlcyBvdmVybGFwLlxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gYW1pbiBNaW5pbXVtIGJvdW5kcyBvZiBib3ggQS4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEBwYXJhbVtfaW5dIGFtYXggTWF4aW11bSBib3VuZHMgb2YgYm94IEEuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcGFyYW1bX2luXSBibWluIE1pbmltdW0gYm91bmRzIG9mIGJveCBCLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHBhcmFtW19pbl0gYm1heCBNYXhpbXVtIGJvdW5kcyBvZiBib3ggQi4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgdHdvIEFBQkIncyBvdmVybGFwLlxyXG4gICAgICAvLy8gQHNlZSBkdE92ZXJsYXBRdWFudEJvdW5kc1xyXG4gICAgICAvLyBzdGF0aWMgb3ZlcmxhcEJvdW5kcyhhbWluLCBhbWF4LCBibWluLCBibWF4KSB7XHJcbiAgICAgIC8vIFx0bGV0IG92ZXJsYXAgPSB0cnVlO1xyXG4gICAgICAvLyBcdG92ZXJsYXAgPSAoYW1pblswXSA+IGJtYXhbMF0gfHwgYW1heFswXSA8IGJtaW5bMF0pID8gZmFsc2UgOiBvdmVybGFwO1xyXG4gICAgICAvLyBcdG92ZXJsYXAgPSAoYW1pblsxXSA+IGJtYXhbMV0gfHwgYW1heFsxXSA8IGJtaW5bMV0pID8gZmFsc2UgOiBvdmVybGFwO1xyXG4gICAgICAvLyBcdG92ZXJsYXAgPSAoYW1pblsyXSA+IGJtYXhbMl0gfHwgYW1heFsyXSA8IGJtaW5bMl0pID8gZmFsc2UgOiBvdmVybGFwO1xyXG4gICAgICAvLyBcdHJldHVybiBvdmVybGFwO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlzdGFuY2VQdFNlZ1NxcjJEM1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdGFuY2VQdFNlZ1NxcjJEMyhwdCwgcCwgcSkge1xyXG4gICAgICAgIHZhciBwcXggPSBxWzBdIC0gcFswXTtcclxuICAgICAgICB2YXIgcHF6ID0gcVsyXSAtIHBbMl07XHJcbiAgICAgICAgdmFyIGR4ID0gcHRbMF0gLSBwWzBdO1xyXG4gICAgICAgIHZhciBkeiA9IHB0WzJdIC0gcFsyXTtcclxuICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeiAqIHBxejtcclxuICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF6ICogZHo7XHJcbiAgICAgICAgaWYgKGQgPiAwKSB0IC89IGQ7XHJcbiAgICAgICAgaWYgKHQgPCAwKSB0ID0gMDtlbHNlIGlmICh0ID4gMSkgdCA9IDE7XHJcbiAgICAgICAgZHggPSBwWzBdICsgdCAqIHBxeCAtIHB0WzBdO1xyXG4gICAgICAgIGR6ID0gcFsyXSArIHQgKiBwcXogLSBwdFsyXTtcclxuICAgICAgICByZXR1cm4gW2R4ICogZHggKyBkeiAqIGR6LCB0XTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY2xvc2VzdEhlaWdodFBvaW50VHJpYW5nbGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3Nlc3RIZWlnaHRQb2ludFRyaWFuZ2xlKHAsIGEsIGIsIGMpIHtcclxuICAgICAgICB2YXIgdjAgPSBEZXRvdXJDb21tb24udlN1YihjLCBhKTtcclxuICAgICAgICB2YXIgdjEgPSBEZXRvdXJDb21tb24udlN1YihiLCBhKTtcclxuICAgICAgICB2YXIgdjIgPSBEZXRvdXJDb21tb24udlN1YihwLCBhKTtcclxuICAgICAgICB2YXIgZG90MDAgPSBEZXRvdXJDb21tb24udkRvdDJEKHYwLCB2MCk7XHJcbiAgICAgICAgdmFyIGRvdDAxID0gRGV0b3VyQ29tbW9uLnZEb3QyRCh2MCwgdjEpO1xyXG4gICAgICAgIHZhciBkb3QwMiA9IERldG91ckNvbW1vbi52RG90MkQodjAsIHYyKTtcclxuICAgICAgICB2YXIgZG90MTEgPSBEZXRvdXJDb21tb24udkRvdDJEKHYxLCB2MSk7XHJcbiAgICAgICAgdmFyIGRvdDEyID0gRGV0b3VyQ29tbW9uLnZEb3QyRCh2MSwgdjIpOyAvLyBDb21wdXRlIGJhcnljZW50cmljIGNvb3JkaW5hdGVzXHJcblxyXG4gICAgICAgIHZhciBpbnZEZW5vbSA9IDEuMCAvIChkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMSk7XHJcbiAgICAgICAgdmFyIHUgPSAoZG90MTEgKiBkb3QwMiAtIGRvdDAxICogZG90MTIpICogaW52RGVub207XHJcbiAgICAgICAgdmFyIHYgPSAoZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpICogaW52RGVub207IC8vIFRoZSAoc2xvcHB5KSBlcHNpbG9uIGlzIG5lZWRlZCB0byBhbGxvdyB0byBnZXQgaGVpZ2h0IG9mIHBvaW50cyB3aGljaFxyXG4gICAgICAgIC8vIGFyZSBpbnRlcnBvbGF0ZWQgYVBvbHkgdGhlIGVkZ2VzIG9mIHRoZSB0cmlhbmdsZXMuXHJcbiAgICAgICAgLy8gSWYgcG9pbnQgbGllcyBpbnNpZGUgdGhlIHRyaWFuZ2xlLCByZXR1cm4gaW50ZXJwb2xhdGVkIHljb29yZC5cclxuXHJcbiAgICAgICAgaWYgKHUgPj0gLURldG91ckNvbW1vbi5FUFMgJiYgdiA+PSAtRGV0b3VyQ29tbW9uLkVQUyAmJiB1ICsgdiA8PSAxICsgRGV0b3VyQ29tbW9uLkVQUykge1xyXG4gICAgICAgICAgdmFyIGggPSBhWzFdICsgdjBbMV0gKiB1ICsgdjFbMV0gKiB2O1xyXG4gICAgICAgICAgcmV0dXJuIFt0cnVlLCBoXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBbZmFsc2UsIG51bGxdO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQWxsIHBvaW50cyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lLCBzbyB0aGUgeS12YWx1ZXMgYXJlIGlnbm9yZWQuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicG9pbnRJblBvbHlnb25cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBvaW50SW5Qb2x5Z29uKHB0LCB2ZXJ0cywgbnZlcnRzKSB7XHJcbiAgICAgICAgdmFyIGMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfaiA9IG52ZXJ0cyAtIDE7IF9pIDwgbnZlcnRzOyBfaiA9IF9pKyspIHtcclxuICAgICAgICAgIHZhciB2aSA9IF9pICogMztcclxuICAgICAgICAgIHZhciB2aiA9IF9qICogMztcclxuICAgICAgICAgIGlmICh2ZXJ0c1t2aSArIDJdID4gcHRbMl0gIT0gdmVydHNbdmogKyAyXSA+IHB0WzJdICYmIHB0WzBdIDwgKHZlcnRzW3ZqICsgMF0gLSB2ZXJ0c1t2aSArIDBdKSAqIChwdFsyXSAtIHZlcnRzW3ZpICsgMl0pIC8gKHZlcnRzW3ZqICsgMl0gLSB2ZXJ0c1t2aSArIDJdKSArIHZlcnRzW3ZpICsgMF0pIGMgPSAhYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJkaXN0YW5jZVB0UG9seUVkZ2VzU3FyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0YW5jZVB0UG9seUVkZ2VzU3FyKHB0LCB2ZXJ0cywgbnZlcnRzLCBlZCwgZXQpIHtcclxuICAgICAgICB2YXIgYyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfajIgPSBudmVydHMgLSAxOyBfaTIgPCBudmVydHM7IF9qMiA9IF9pMisrKSB7XHJcbiAgICAgICAgICB2YXIgdmkgPSBfaTIgKiAzO1xyXG4gICAgICAgICAgdmFyIHZqID0gX2oyICogMztcclxuICAgICAgICAgIGlmICh2ZXJ0c1t2aSArIDJdID4gcHRbMl0gIT0gdmVydHNbdmogKyAyXSA+IHB0WzJdICYmIHB0WzBdIDwgKHZlcnRzW3ZqICsgMF0gLSB2ZXJ0c1t2aSArIDBdKSAqIChwdFsyXSAtIHZlcnRzW3ZpICsgMl0pIC8gKHZlcnRzW3ZqICsgMl0gLSB2ZXJ0c1t2aSArIDJdKSArIHZlcnRzW3ZpICsgMF0pIGMgPSAhYztcclxuICAgICAgICAgIHZhciBlZGV0ID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDQocHQsIHZlcnRzLCB2aiwgdmkpO1xyXG4gICAgICAgICAgZWRbX2oyXSA9IGVkZXRbMF07XHJcbiAgICAgICAgICBldFtfajJdID0gZWRldFsxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwcm9qZWN0UG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvamVjdFBvbHkoYXhpcywgcG9seSwgbnBvbHkpIHtcclxuICAgICAgICB2YXIgcm1pbjtcclxuICAgICAgICB2YXIgcm1heDtcclxuICAgICAgICBybWluID0gcm1heCA9IERldG91ckNvbW1vbi52RG90MkQoYXhpcywgcG9seSwgMCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbnBvbHk7ICsraSkge1xyXG4gICAgICAgICAgdmFyIF9kID0gRGV0b3VyQ29tbW9uLnZEb3QyRChheGlzLCBwb2x5LCBpICogMyk7XHJcblxyXG4gICAgICAgICAgcm1pbiA9IE1hdGgubWluKHJtaW4sIF9kKTtcclxuICAgICAgICAgIHJtYXggPSBNYXRoLm1heChybWF4LCBfZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW3JtaW4sIHJtYXhdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvdmVybGFwUmFuZ2VcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJsYXBSYW5nZShhbWluLCBhbWF4LCBibWluLCBibWF4LCBlcHMpIHtcclxuICAgICAgICByZXR1cm4gYW1pbiArIGVwcyA+IGJtYXggfHwgYW1heCAtIGVwcyA8IGJtaW4gPyBmYWxzZSA6IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm92ZXJsYXBQb2x5UG9seTJEXCIsXHJcbiAgICAgIC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQWxsIHZlcnRpY2VzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgeHotcGxhbmUsIHNvIHRoZSB5LXZhbHVlcyBhcmUgaWdub3JlZC5cclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJsYXBQb2x5UG9seTJEKHBvbHlhLCBucG9seWEsIHBvbHliLCBucG9seWIpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IG5wb2x5YSAtIDE7IGkgPCBucG9seWE7IGogPSBpKyspIHtcclxuICAgICAgICAgIHZhciB2YSA9IGogKiAzO1xyXG4gICAgICAgICAgdmFyIHZiID0gaSAqIDM7XHJcbiAgICAgICAgICB2YXIgbiA9IFtwb2x5YVt2YiArIDJdIC0gcG9seWFbdmEgKyAyXSwgMCwgLShwb2x5YVt2YiArIDBdIC0gcG9seWFbdmEgKyAwXSldO1xyXG4gICAgICAgICAgdmFyIGFtaW5tYXggPSBEZXRvdXJDb21tb24ucHJvamVjdFBvbHkobiwgcG9seWEsIG5wb2x5YSk7XHJcbiAgICAgICAgICB2YXIgYm1pbm1heCA9IERldG91ckNvbW1vbi5wcm9qZWN0UG9seShuLCBwb2x5YiwgbnBvbHliKTtcclxuXHJcbiAgICAgICAgICBpZiAoIURldG91ckNvbW1vbi5vdmVybGFwUmFuZ2UoYW1pbm1heFswXSwgYW1pbm1heFsxXSwgYm1pbm1heFswXSwgYm1pbm1heFsxXSwgRGV0b3VyQ29tbW9uLmVwcykpIHtcclxuICAgICAgICAgICAgLy8gRm91bmQgc2VwYXJhdGluZyBheGlzXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMyA9IDAsIF9qMyA9IG5wb2x5YiAtIDE7IF9pMyA8IG5wb2x5YjsgX2ozID0gX2kzKyspIHtcclxuICAgICAgICAgIHZhciBfdmEgPSBfajMgKiAzO1xyXG5cclxuICAgICAgICAgIHZhciBfdmIgPSBfaTMgKiAzO1xyXG5cclxuICAgICAgICAgIHZhciBfbiA9IFtwb2x5YltfdmIgKyAyXSAtIHBvbHliW192YSArIDJdLCAwLCAtKHBvbHliW192YiArIDBdIC0gcG9seWJbX3ZhICsgMF0pXTtcclxuXHJcbiAgICAgICAgICB2YXIgX2FtaW5tYXggPSBEZXRvdXJDb21tb24ucHJvamVjdFBvbHkoX24sIHBvbHlhLCBucG9seWEpO1xyXG5cclxuICAgICAgICAgIHZhciBfYm1pbm1heCA9IERldG91ckNvbW1vbi5wcm9qZWN0UG9seShfbiwgcG9seWIsIG5wb2x5Yik7XHJcblxyXG4gICAgICAgICAgaWYgKCFEZXRvdXJDb21tb24ub3ZlcmxhcFJhbmdlKF9hbWlubWF4WzBdLCBfYW1pbm1heFsxXSwgX2JtaW5tYXhbMF0sIF9ibWlubWF4WzFdLCBEZXRvdXJDb21tb24uZXBzKSkge1xyXG4gICAgICAgICAgICAvLyBGb3VuZCBzZXBhcmF0aW5nIGF4aXNcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gLy8gUmV0dXJucyBhIHJhbmRvbSBwb1BvbHkgX2luIGEgY29udmV4IHBvbHlnb24uXHJcbiAgICAgIC8vIEFkYXB0ZWQgZnJvbSBHcmFwaGljcyBHZW1zIGFydGljbGUuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmFuZG9tUG9pbnRJbkNvbnZleFBvbHlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJhbmRvbVBvaW50SW5Db252ZXhQb2x5KHB0cywgbnB0cywgYXJlYXMsIHMsIHQpIHtcclxuICAgICAgICAvLyBDYWxjIHRyaWFuZ2xlIGFyYWVzXHJcbiAgICAgICAgYXJlYXN1bSA9IDAuMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCBucHRzOyBpKyspIHtcclxuICAgICAgICAgIGFyZWFzW2ldID0gRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDQocHRzLCAwLCAoaSAtIDEpICogMywgaSAqIDMpO1xyXG4gICAgICAgICAgYXJlYXN1bSArPSBNYXRoLm1heCgwLjAwMSwgYXJlYXNbaV0pO1xyXG4gICAgICAgIH0gLy8gRmluZCBzdWIgdHJpYW5nbGUgd2VpZ2h0ZWQgYnkgYXJlYS5cclxuXHJcblxyXG4gICAgICAgIHRociA9IHMgKiBhcmVhc3VtO1xyXG4gICAgICAgIGFjYyA9IDAuMDtcclxuICAgICAgICB1ID0gMS4wO1xyXG4gICAgICAgIHZhciB0cmkgPSBucHRzIC0gMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2k0ID0gMjsgX2k0IDwgbnB0czsgX2k0KyspIHtcclxuICAgICAgICAgIGRhY2MgPSBhcmVhc1tfaTRdO1xyXG5cclxuICAgICAgICAgIGlmICh0aHIgPj0gYWNjICYmIHRociA8IGFjYyArIGRhY2MpIHtcclxuICAgICAgICAgICAgdSA9ICh0aHIgLSBhY2MpIC8gZGFjYztcclxuICAgICAgICAgICAgdHJpID0gX2k0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBhY2MgKz0gZGFjYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHYgPSBNYXRoLnNxcnQodCk7XHJcbiAgICAgICAgYSA9IDEgLSB2O1xyXG4gICAgICAgIGIgPSAoMSAtIHUpICogdjtcclxuICAgICAgICBjID0gdSAqIHY7XHJcbiAgICAgICAgdmFyIHBhID0gMDtcclxuICAgICAgICB2YXIgcGIgPSAodHJpIC0gMSkgKiAzO1xyXG4gICAgICAgIHZhciBwYyA9IHRyaSAqIDM7XHJcbiAgICAgICAgcmV0dXJuIFthICogcHRzW3BhXSArIGIgKiBwdHNbcGJdICsgYyAqIHB0c1twY10sIGEgKiBwdHNbcGEgKyAxXSArIGIgKiBwdHNbcGIgKyAxXSArIGMgKiBwdHNbcGMgKyAxXSwgYSAqIHB0c1twYSArIDJdICsgYiAqIHB0c1twYiArIDJdICsgYyAqIHB0c1twYyArIDJdXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibmV4dFBvdzJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5leHRQb3cyKHYpIHtcclxuICAgICAgICB2LS07XHJcbiAgICAgICAgdiB8PSB2ID4+IDE7XHJcbiAgICAgICAgdiB8PSB2ID4+IDI7XHJcbiAgICAgICAgdiB8PSB2ID4+IDQ7XHJcbiAgICAgICAgdiB8PSB2ID4+IDg7XHJcbiAgICAgICAgdiB8PSB2ID4+IDE2O1xyXG4gICAgICAgIHYrKztcclxuICAgICAgICByZXR1cm4gdjtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiaWxvZzJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlsb2cyKHYpIHtcclxuICAgICAgICB2YXIgcjtcclxuICAgICAgICB2YXIgc2hpZnQ7XHJcbiAgICAgICAgciA9ICh2ID4gMHhmZmZmID8gMSA6IDApIDw8IDQ7XHJcbiAgICAgICAgdiA+Pj0gcjtcclxuICAgICAgICBzaGlmdCA9ICh2ID4gMHhmZiA/IDEgOiAwKSA8PCAzO1xyXG4gICAgICAgIHYgPj49IHNoaWZ0O1xyXG4gICAgICAgIHIgfD0gc2hpZnQ7XHJcbiAgICAgICAgc2hpZnQgPSAodiA+IDB4ZiA/IDEgOiAwKSA8PCAyO1xyXG4gICAgICAgIHYgPj49IHNoaWZ0O1xyXG4gICAgICAgIHIgfD0gc2hpZnQ7XHJcbiAgICAgICAgc2hpZnQgPSAodiA+IDB4MyA/IDEgOiAwKSA8PCAxO1xyXG4gICAgICAgIHYgPj49IHNoaWZ0O1xyXG4gICAgICAgIHIgfD0gc2hpZnQ7XHJcbiAgICAgICAgciB8PSB2ID4+IDE7XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImludGVyc2VjdFNlZ21lbnRQb2x5MkRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGludGVyc2VjdFNlZ21lbnRQb2x5MkQocDAsIHAxLCB2ZXJ0cywgbnZlcnRzKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBJbnRlcnNlY3RSZXN1bHQoKTtcclxuICAgICAgICB2YXIgRVBTID0gMC4wMDAwMDAwMTtcclxuICAgICAgICB2YXIgZGlyID0gRGV0b3VyQ29tbW9uLnZTdWIocDEsIHAwKTtcclxuICAgICAgICB2YXIgcDB2ID0gbmV3IFZlY3RvclB0ciQxKHAwKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBudmVydHMgLSAxOyBpIDwgbnZlcnRzOyBqID0gaSsrKSB7XHJcbiAgICAgICAgICB2YXIgdnBqID0gbmV3IFZlY3RvclB0ciQxKHZlcnRzLCBqICogMyk7XHJcbiAgICAgICAgICB2YXIgZWRnZSA9IERldG91ckNvbW1vbi52U3ViKG5ldyBWZWN0b3JQdHIkMSh2ZXJ0cywgaSAqIDMpLCB2cGopO1xyXG4gICAgICAgICAgdmFyIGRpZmYgPSBEZXRvdXJDb21tb24udlN1YihwMHYsIHZwaik7XHJcbiAgICAgICAgICB2YXIgbiA9IERldG91ckNvbW1vbi52UGVycDJEKGVkZ2UsIGRpZmYpO1xyXG5cclxuICAgICAgICAgIHZhciBfZDIgPSBEZXRvdXJDb21tb24udlBlcnAyRChkaXIsIGVkZ2UpO1xyXG5cclxuICAgICAgICAgIGlmIChNYXRoLmFicyhfZDIpIDwgRVBTKSB7XHJcbiAgICAgICAgICAgIC8vIFMgaXMgbmVhcmx5IHBhcmFsbGVsIHRvIHRoaXMgZWRnZVxyXG4gICAgICAgICAgICBpZiAobiA8IDApIHJldHVybiByZXN1bHQ7ZWxzZSBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgX3QgPSBuIC8gX2QyO1xyXG5cclxuICAgICAgICAgIGlmIChfZDIgPCAwKSB7XHJcbiAgICAgICAgICAgIC8vIHNlZ21lbnQgUyBpcyBlbnRlcmluZyBhY3Jvc3MgdGhpcyBlZGdlXHJcbiAgICAgICAgICAgIGlmIChfdCA+IHJlc3VsdC50bWluKSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnRtaW4gPSBfdDtcclxuICAgICAgICAgICAgICByZXN1bHQuc2VnTWluID0gajsgLy8gUyBlbnRlcnMgYWZ0ZXIgbGVhdmluZyBwb2x5Z29uXHJcblxyXG4gICAgICAgICAgICAgIGlmIChyZXN1bHQudG1pbiA+IHJlc3VsdC50bWF4KSByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBzZWdtZW50IFMgaXMgbGVhdmluZyBhY3Jvc3MgdGhpcyBlZGdlXHJcbiAgICAgICAgICAgIGlmIChfdCA8IHJlc3VsdC50bWF4KSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LnRtYXggPSBfdDtcclxuICAgICAgICAgICAgICByZXN1bHQuc2VnTWF4ID0gajsgLy8gUyBsZWF2ZXMgYmVmb3JlIGVudGVyaW5nIHBvbHlnb25cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHJlc3VsdC50bWF4IDwgcmVzdWx0LnRtaW4pIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlc3VsdC5pbnRlcnNlY3RzID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJkaXN0YW5jZVB0U2VnU3FyMkQ0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXN0YW5jZVB0U2VnU3FyMkQ0KHB0LCB2ZXJ0cywgcCwgcSkge1xyXG4gICAgICAgIHZhciBwcXggPSB2ZXJ0c1txICsgMF0gLSB2ZXJ0c1twICsgMF07XHJcbiAgICAgICAgdmFyIHBxeiA9IHZlcnRzW3EgKyAyXSAtIHZlcnRzW3AgKyAyXTtcclxuICAgICAgICB2YXIgZHggPSBwdFswXSAtIHZlcnRzW3AgKyAwXTtcclxuICAgICAgICB2YXIgZHogPSBwdFsyXSAtIHZlcnRzW3AgKyAyXTtcclxuICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeiAqIHBxejtcclxuICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF6ICogZHo7XHJcbiAgICAgICAgaWYgKGQgPiAwKSB0IC89IGQ7XHJcbiAgICAgICAgaWYgKHQgPCAwKSB0ID0gMDtlbHNlIGlmICh0ID4gMSkgdCA9IDE7XHJcbiAgICAgICAgZHggPSB2ZXJ0c1twICsgMF0gKyB0ICogcHF4IC0gcHRbMF07XHJcbiAgICAgICAgZHogPSB2ZXJ0c1twICsgMl0gKyB0ICogcHF6IC0gcHRbMl07XHJcbiAgICAgICAgcmV0dXJuIFtkeCAqIGR4ICsgZHogKiBkeiwgdF07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm9wcG9zaXRlVGlsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3Bwb3NpdGVUaWxlKHNpZGUpIHtcclxuICAgICAgICByZXR1cm4gc2lkZSArIDQgJiAweDc7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZwZXJwWFpcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZwZXJwWFooYSwgYikge1xyXG4gICAgICAgIHJldHVybiBhWzBdICogYlsyXSAtIGFbMl0gKiBiWzBdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpbnRlcnNlY3RTZWdTZWcyRFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJzZWN0U2VnU2VnMkQoYXAsIGFxLCBicCwgYnEpIHtcclxuICAgICAgICB2YXIgdSA9IERldG91ckNvbW1vbi52U3ViKGFxLCBhcCk7XHJcbiAgICAgICAgdmFyIHYgPSBEZXRvdXJDb21tb24udlN1YihicSwgYnApO1xyXG4gICAgICAgIHZhciB3ID0gRGV0b3VyQ29tbW9uLnZTdWIoYXAsIGJwKTtcclxuICAgICAgICBkID0gRGV0b3VyQ29tbW9uLnZwZXJwWFoodSwgdik7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGQpIDwgMWUtNikgcmV0dXJuIFtmYWxzZSwgMCwgMF07XHJcbiAgICAgICAgcyA9IERldG91ckNvbW1vbi52cGVycFhaKHYsIHcpIC8gZDtcclxuICAgICAgICB0ID0gRGV0b3VyQ29tbW9uLnZwZXJwWFoodSwgdykgLyBkO1xyXG4gICAgICAgIHJldHVybiBbdHJ1ZSwgcywgdF07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZTY2FsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdlNjYWxlKF9pbiwgc2NhbGUpIHtcclxuICAgICAgICB2YXIgb3V0ID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIG91dFswXSA9IF9pblswXSAqIHNjYWxlO1xyXG4gICAgICAgIG91dFsxXSA9IF9pblsxXSAqIHNjYWxlO1xyXG4gICAgICAgIG91dFsyXSA9IF9pblsyXSAqIHNjYWxlO1xyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gRGV0b3VyQ29tbW9uO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KERldG91ckNvbW1vbiwgXCJFUFNcIiwgMWUtNCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShEZXRvdXJDb21tb24sIFwidGhyXCIsIERldG91ckNvbW1vbi5zcXIoMS4wIC8gMTYzODQuMCkpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoRGV0b3VyQ29tbW9uLCBcImVwc1wiLCAxZS00KTtcclxuXHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBhIG5hdmlnYXRpb24gbWVzaCB0aWxlLlxyXG4gICAqL1xyXG5cclxuICB2YXIgTWVzaFRpbGUgPVxyXG4gIC8qKiBDb3VudGVyIGRlc2NyaWJpbmcgbW9kaWZpY2F0aW9ucyB0byB0aGUgdGlsZS4gKi9cclxuXHJcbiAgLyoqIFRoZSB0aWxlIGRhdGEuICovXHJcblxyXG4gIC8qKiBUaGUgdGlsZSBsaW5rcy4gKi9cclxuXHJcbiAgLyoqIEluZGV4IHRvIHRoZSBuZXh0IGZyZWUgbGluay4gKi9cclxuXHJcbiAgLyoqIFRpbGUgZmxhZ3MuIChTZWU6ICNkdFRpbGVGbGFncykgKi9cclxuXHJcbiAgLyoqIFRoZSBuZXh0IGZyZWUgdGlsZSwgb3IgdGhlIG5leHQgdGlsZSBpbiB0aGUgc3BhdGlhbCBncmlkLiAqL1xyXG4gIGZ1bmN0aW9uIE1lc2hUaWxlKGluZGV4KSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVzaFRpbGUpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluZGV4XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNhbHRcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGF0YVwiLCBudWxsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJsaW5rc1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibGlua3NGcmVlTGlzdFwiLCBOYXZNZXNoLkRUX05VTExfTElOSyk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZmxhZ3NcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmV4dFwiLCBudWxsKTtcclxuXHJcbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgfTtcclxuXHJcbiAgLyoqIERlZmluZXMgYSBwb2x5b2duIHdpdGhpbiBhIGR0UG9seSBvYmplY3QuICovXHJcblxyXG4gIHZhciBQb2x5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIC8qKiBUaGUgcG9seWdvbiBpcyBhIHN0YW5kYXJkIGNvbnZleCBwb2x5Z29uIHRoYXQgaXMgcGFydCBvZiB0aGUgc3VyZmFjZSBvZiB0aGUgbWVzaC4gKi9cclxuXHJcbiAgICAvKiogVGhlIHBvbHlnb24gaXMgYW4gb2ZmLW1lc2ggY29ubmVjdGlvbiBjb25zaXN0aW5nIG9mIHR3byB2ZXJ0aWNlcy4gKi9cclxuXHJcbiAgICAvKiogSW5kZXggdG8gZmlyc3QgbGluayBpbiBsaW5rZWQgbGlzdC4gKE9yICNEVF9OVUxMX0xJTksgaWYgdGhlcmUgaXMgbm8gbGluay4pICovXHJcblxyXG4gICAgLyoqIFRoZSBpbmRpY2VzIG9mIHRoZSBwb2x5Z29uJ3MgdmVydGljZXMuIFRoZSBhY3R1YWwgdmVydGljZXMgYXJlIGxvY2F0ZWQgaW4gTWVzaFRpbGU6OnZlcnRzLiAqL1xyXG5cclxuICAgIC8qKiBQYWNrZWQgZGF0YSByZXByZXNlbnRpbmcgbmVpZ2hib3IgcG9seWdvbnMgcmVmZXJlbmNlcyBhbmQgZmxhZ3MgZm9yIGVhY2ggZWRnZS4gKi9cclxuXHJcbiAgICAvKiogVGhlIHVzZXIgZGVmaW5lZCBwb2x5Z29uIGZsYWdzLiAqL1xyXG5cclxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIHZlcnRpY2VzIGluIHRoZSBwb2x5Z29uLiAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGJpdCBwYWNrZWQgYXJlYSBpZCBhbmQgcG9seWdvbiB0eXBlLlxyXG4gICAgICogXHJcbiAgICAgKiBAbm90ZSBVc2UgdGhlIHN0cnVjdHVyZSdzIHNldCBhbmQgZ2V0IG1ldGhvZHMgdG8gYWNjZXNzIHRoaXMgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIFBvbHkoaW5kZXgsIG1heFZlcnRzUGVyUG9seSkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9seSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RMaW5rXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydHNcIiwgW10pO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmVpc1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJmbGFnc1wiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRDb3VudFwiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZWFBbmR0eXBlXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XHJcbiAgICAgIHRoaXMuZmlyc3RMaW5rID0gTmF2TWVzaC5EVF9OVUxMX0xJTks7XHJcbiAgICAgIHRoaXMudmVydHMgPSBuZXcgQXJyYXkobWF4VmVydHNQZXJQb2x5KTtcclxuICAgICAgdGhpcy5uZWlzID0gbmV3IEFycmF5KG1heFZlcnRzUGVyUG9seSk7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudmVydHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0aGlzLnZlcnRzW2ldID0gMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHRoaXMubmVpcy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB0aGlzLm5laXNbX2ldID0gMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhQb2x5LCBbe1xyXG4gICAgICBrZXk6IFwiYW5kXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmQodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGhpID0gMHg4MDAwMDAwMDtcclxuICAgICAgICB2YXIgbG93ID0gMHg3ZmZmZmZmZjtcclxuICAgICAgICB2YXIgaGkxID0gfn4odjEgLyBoaSk7XHJcbiAgICAgICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpO1xyXG4gICAgICAgIHZhciBsb3cxID0gdjEgJiBsb3c7XHJcbiAgICAgICAgdmFyIGxvdzIgPSB2MiAmIGxvdztcclxuICAgICAgICB2YXIgaCA9IGhpMSAmIGhpMjtcclxuICAgICAgICB2YXIgbCA9IGxvdzEgJiBsb3cyO1xyXG4gICAgICAgIHJldHVybiBoICogaGkgKyBsO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3IodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGhpID0gMHg4MDAwMDAwMDtcclxuICAgICAgICB2YXIgbG93ID0gMHg3ZmZmZmZmZjtcclxuICAgICAgICB2YXIgaGkxID0gfn4odjEgLyBoaSk7XHJcbiAgICAgICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpO1xyXG4gICAgICAgIHZhciBsb3cxID0gdjEgJiBsb3c7XHJcbiAgICAgICAgdmFyIGxvdzIgPSB2MiAmIGxvdztcclxuICAgICAgICB2YXIgaCA9IGhpMSB8IGhpMjtcclxuICAgICAgICB2YXIgbCA9IGxvdzEgfCBsb3cyO1xyXG4gICAgICAgIHJldHVybiBoICogaGkgKyBsO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKiBTZXRzIHRoZSB1c2VyIGRlZmluZWQgYXJlYSBpZC4gW0xpbWl0OiA8ICNEVF9NQVhfQVJFQVNdICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwic2V0QXJlYVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0QXJlYShhKSB7XHJcbiAgICAgICAgdGhpcy5hcmVhQW5kdHlwZSA9IHRoaXMub3IodGhpcy5hbmQodGhpcy5hcmVhQW5kdHlwZSwgMHhjMCksIHRoaXMuYW5kKGEsIDB4M2YpKTtcclxuICAgICAgfVxyXG4gICAgICAvKiogU2V0cyB0aGUgcG9seWdvbiB0eXBlLiAoU2VlOiAjZHRQb2x5VHlwZXMuKSAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInNldFR5cGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFR5cGUodCkge1xyXG4gICAgICAgIHRoaXMuYXJlYUFuZHR5cGUgPSB0aGlzLm9yKHRoaXMuYW5kKHRoaXMuYXJlYUFuZHR5cGUsIDB4M2YpIHwgdCA8PCA2KTtcclxuICAgICAgfVxyXG4gICAgICAvKiogR2V0cyB0aGUgdXNlciBkZWZpbmVkIGFyZWEgaWQuICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0QXJlYVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QXJlYSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcmVhQW5kdHlwZSAmIDB4MztcclxuICAgICAgfVxyXG4gICAgICAvKiogR2V0cyB0aGUgcG9seWdvbiB0eXBlLiAoU2VlOiAjZHRQb2x5VHlwZXMpICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VHlwZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcmVhQW5kdHlwZSA+PiA2O1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFBvbHk7XHJcbiAgfSgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUG9seSwgXCJEVF9QT0xZVFlQRV9HUk9VTkRcIiwgMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShQb2x5LCBcIkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTlwiLCAxKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKlxyXG4gICAqIERlZmluZXMgYSBsaW5rIGJldHdlZW4gcG9seWdvbnMuXHJcbiAgICogXHJcbiAgICogQG5vdGUgVGhpcyBzdHJ1Y3R1cmUgaXMgcmFyZWx5IGlmIGV2ZXIgdXNlZCBieSB0aGUgZW5kIHVzZXIuXHJcbiAgICogQHNlZSBNZXNoVGlsZVxyXG4gICAqL1xyXG4gIHZhciBMaW5rID0gZnVuY3Rpb24gTGluaygpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMaW5rKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWZcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmV4dFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJlZGdlXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNpZGVcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1pblwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWF4XCIsIDApO1xyXG4gIH07XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIHZhciBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ2xvc2VzdFBvaW50T25Qb2x5UmVzdWx0KHBvc092ZXJQb2x5LCBjbG9zZXN0KSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9zT3ZlclBvbHlcIiwgZmFsc2UpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xvc2VzdFwiLCBbXSk7XHJcblxyXG4gICAgICB0aGlzLnBvc092ZXJQb2x5ID0gcG9zT3ZlclBvbHk7XHJcbiAgICAgIHRoaXMuY2xvc2VzdCA9IGNsb3Nlc3Q7XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwb3NpdGlvbiBpcyBvdmVyIHRoZSBwb2x5Z29uLiAqL1xyXG5cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoQ2xvc2VzdFBvaW50T25Qb2x5UmVzdWx0LCBbe1xyXG4gICAgICBrZXk6IFwiaXNQb3NPdmVyUG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNQb3NPdmVyUG9seSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NPdmVyUG9seTtcclxuICAgICAgfVxyXG4gICAgICAvKiogUmV0dXJucyB0aGUgY2xvc2VzdCBwb1BvbHkgb24gdGhlIHBvbHlnb24uIFsoeCwgeSwgeildICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0Q2xvc2VzdFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xvc2VzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZXN0O1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIENsb3Nlc3RQb2ludE9uUG9seVJlc3VsdDtcclxuICB9KCk7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIHZhciBGaW5kTmVhcmVzdFBvbHlSZXN1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmluZE5lYXJlc3RQb2x5UmVzdWx0KG5lYXJlc3RSZWYsIG5lYXJlc3RQb3MpIHtcclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbmROZWFyZXN0UG9seVJlc3VsdCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJuZWFyZXN0UmVmXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmVhcmVzdFBvc1wiLCBbXSk7XHJcblxyXG4gICAgICB0aGlzLm5lYXJlc3RSZWYgPSBuZWFyZXN0UmVmO1xyXG4gICAgICB0aGlzLm5lYXJlc3RQb3MgPSBuZWFyZXN0UG9zO1xyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgbmVhcmVzdCBwb2x5Z29uLiAqL1xyXG5cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoRmluZE5lYXJlc3RQb2x5UmVzdWx0LCBbe1xyXG4gICAgICBrZXk6IFwiZ2V0TmVhcmVzdFJlZlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmVhcmVzdFJlZigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5uZWFyZXN0UmVmO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKiBSZXR1cm5zIHRoZSBuZWFyZXN0IHBvUG9seSBvbiB0aGUgcG9seWdvbi4gW29wdF0gWyh4LCB5LCB6KV0gKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXROZWFyZXN0UG9zXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROZWFyZXN0UG9zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5lYXJlc3RQb3M7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gRmluZE5lYXJlc3RQb2x5UmVzdWx0O1xyXG4gIH0oKTtcclxuXHJcbiAgZnVuY3Rpb24gYXJyYXljb3B5KG9uZSwgb25lU3RhcnQsIHR3bywgdHdvU3RhcnQsIGxlbikge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICB0d29bdHdvU3RhcnQgKyBpXSA9IG9uZVtvbmVTdGFydCArIGldO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIE5hdk1lc2ggPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgX2NyZWF0ZUNsYXNzKE5hdk1lc2gsIFt7XHJcbiAgICAgIGtleTogXCJnZXRNYXhUaWxlc1wiLFxyXG4gICAgICAvLy8gQSBmbGFnIHRoYXQgaW5kaWNhdGVzIHRoYXQgYW4gZW50aXR5IGxpbmtzIHRvIGFuIGV4dGVybmFsIGVudGl0eS5cclxuICAgICAgLy8vIChFLmcuIEEgcG9seWdvbiBlZGdlIGlzIGEgcG9ydGFsIHRoYXQgbGlua3MgdG8gYW5vdGhlciBwb2x5Z29uLilcclxuICAgICAgLy8vIEEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgdGhlIGVudGl0eSBkb2VzIG5vdCBsaW5rIHRvIGFueXRoaW5nLlxyXG4gICAgICAvLyBzdGF0aWMgRFRfTlVMTF9MSU5LID0gMHhmZmZmZmZmZjtcclxuICAgICAgLy8vIEEgZmxhZyB0aGF0IGluZGljYXRlcyB0aGF0IGFuIG9mZi1tZXNoIGNvbm5lY3Rpb24gY2FuIGJlIHRyYXZlcnNlZCBpblxyXG4gICAgICAvLy8gYm90aCBkaXJlY3Rpb25zLiAoSXMgYmlkaXJlY3Rpb25hbC4pXHJcbiAgICAgIC8vLyBUaGUgbWF4aW11bSBudW1iZXIgb2YgdXNlciBkZWZpbmVkIGFyZWEgaWRzLlxyXG4gICAgICAvLy8gTGltaXQgcmF5Y2FzdGluZyBkdXJpbmcgYW55IGFuZ2xlIHBhaGZpbmRpbmdcclxuICAgICAgLy8vIFRoZSBsaW1pdCBpcyBnaXZlbiBhcyBhIG11bHRpcGxlIG9mIHRoZSBjaGFyYWN0ZXIgcmFkaXVzXHJcbiAgICAgIC8vLyA8IEN1cnJlbnQgaW5pdGlhbGl6YXRpb24gcGFyYW1zLiBUT0RPOiBkbyBub3Qgc3RvcmUgdGhpcyBpbmZvIHR3aWNlLlxyXG4gICAgICAvLy8gPCBPcmlnaW4gb2YgdGhlIHRpbGUgKDAsMClcclxuICAgICAgLy8gIG1fb3JpZ1szXTsgLy8vPCBPcmlnaW4gb2YgdGhlIHRpbGUgKDAsMClcclxuICAgICAgLy8vIDwgRGltZW5zaW9ucyBvZiBlYWNoIHRpbGUuXHJcbiAgICAgIC8vLyA8IE1heCBudW1iZXIgb2YgdGlsZXMuXHJcbiAgICAgIC8vLyA8IFRpbGUgaGFzaCBsb29rdXAgc2l6ZSAobXVzdCBiZSBwb3QpLlxyXG4gICAgICAvLy8gPCBUaWxlIGhhc2ggbG9va3VwIG1hc2suXHJcbiAgICAgIC8vLyA8IFRpbGUgaGFzaCBsb29rdXAuXHJcbiAgICAgIC8vLyA8IEZyZWVsaXN0IG9mIHRpbGVzLlxyXG4gICAgICAvLy8gPCBMaXN0IG9mIHRpbGVzLlxyXG5cclxuICAgICAgLyoqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2ZXJ0aWNlcyBwZXIgbmF2aWdhdGlvbiBwb2x5Z29uLiAqL1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aWxlcyBzdXBwb3J0ZWQgYnkgdGhlIG5hdmlnYXRpb24gbWVzaC5cclxuICAgICAgICogXHJcbiAgICAgICAqIEByZXR1cm4gVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbGVzIHN1cHBvcnRlZCBieSB0aGUgbmF2aWdhdGlvbiBtZXNoLlxyXG4gICAgICAgKi9cclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1heFRpbGVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fbWF4VGlsZXM7XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJldHVybnMgdGlsZSBpbiB0aGUgdGlsZSBhcnJheS5cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VGlsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZShpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV90aWxlc1tpXTtcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB0aGUgcG9seWdvbiByZWZlcmVuY2UgZm9yIHRoZSB0aWxlJ3MgYmFzZSBwb2x5Z29uLlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIHRpbGVcclxuICAgICAgICogICAgICAgICAgICBUaGUgdGlsZS5cclxuICAgICAgICogQHJldHVybiBUaGUgcG9seWdvbiByZWZlcmVuY2UgZm9yIHRoZSBiYXNlIHBvbHlnb24gaW4gdGhlIHNwZWNpZmllZCB0aWxlLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRQb2x5UmVmQmFzZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9seVJlZkJhc2UodGlsZSkge1xyXG4gICAgICAgIGlmICh0aWxlID09IG51bGwpIHJldHVybiAwO1xyXG4gICAgICAgIHZhciBpdCA9IHRpbGUuaW5kZXg7XHJcbiAgICAgICAgcmV0dXJuIE5hdk1lc2guZW5jb2RlUG9seUlkKHRpbGUuc2FsdCwgaXQsIDApO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEZXJpdmVzIGEgc3RhbmRhcmQgcG9seWdvbiByZWZlcmVuY2UuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAbm90ZSBUaGlzIGZ1bmN0aW9uIGlzIGdlbmVyYWxseSBtZWFudCBmb3IgaW50ZXJuYWwgdXNlIG9ubHkuXHJcbiAgICAgICAqIEBwYXJhbSBzYWx0XHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIHRpbGUncyBzYWx0IHZhbHVlLlxyXG4gICAgICAgKiBAcGFyYW0gaXRcclxuICAgICAgICogICAgICAgICAgICBUaGUgaW5kZXggb2YgdGhlIHRpbGUuXHJcbiAgICAgICAqIEBwYXJhbSBpcFxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBpbmRleCBvZiB0aGUgcG9seWdvbiB3aXRoaW4gdGhlIHRpbGUuXHJcbiAgICAgICAqIEByZXR1cm4gZW5jb2RlZCBwb2x5Z29uIHJlZmVyZW5jZVxyXG4gICAgICAgKi9cclxuICAgICAgLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzM3NTcyLzEwMDQ3OTIwXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWxsb2NMaW5rXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbGxvY0xpbmsodGlsZSkge1xyXG4gICAgICAgIGlmICh0aWxlLmxpbmtzRnJlZUxpc3QgPT0gTmF2TWVzaC5EVF9OVUxMX0xJTkspIHtcclxuICAgICAgICAgIHZhciBfbGluayA9IG5ldyBMaW5rKCk7XHJcblxyXG4gICAgICAgICAgX2xpbmsubmV4dCA9IE5hdk1lc2guRFRfTlVMTF9MSU5LO1xyXG4gICAgICAgICAgdGlsZS5saW5rcy5wdXNoKF9saW5rKTtcclxuICAgICAgICAgIHJldHVybiB0aWxlLmxpbmtzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbGluayA9IHRpbGUubGlua3NGcmVlTGlzdDtcclxuICAgICAgICB0aWxlLmxpbmtzRnJlZUxpc3QgPSB0aWxlLmxpbmtzW2xpbmtdLm5leHQ7XHJcbiAgICAgICAgcmV0dXJuIGxpbms7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZyZWVMaW5rXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmcmVlTGluayh0aWxlLCBsaW5rKSB7XHJcbiAgICAgICAgdGlsZS5saW5rc1tsaW5rXS5uZXh0ID0gdGlsZS5saW5rc0ZyZWVMaXN0O1xyXG4gICAgICAgIHRpbGUubGlua3NGcmVlTGlzdCA9IGxpbms7XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENhbGN1bGF0ZXMgdGhlIHRpbGUgZ3JpZCBsb2NhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCB3b3JsZCBwb3NpdGlvbi5cclxuICAgICAgICogXHJcbiAgICAgICAqIEBwYXJhbSBwb3NcclxuICAgICAgICogICAgICAgICAgICBUaGUgd29ybGQgcG9zaXRpb24gZm9yIHRoZSBxdWVyeS4gWyh4LCB5LCB6KV1cclxuICAgICAgICogQHJldHVybiAyLWVsZW1lbnQgbGV0IGFycmF5IHdpdGggKHR4LHR5KSB0aWxlIGxvY2F0aW9uXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNhbGNUaWxlTG9jXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjVGlsZUxvYyhwb3MpIHtcclxuICAgICAgICB2YXIgdHggPSBNYXRoLmZsb29yKChwb3NbMF0gLSB0aGlzLm1fb3JpZ1swXSkgLyB0aGlzLm1fdGlsZVdpZHRoKTtcclxuICAgICAgICB2YXIgdHkgPSBNYXRoLmZsb29yKChwb3NbMl0gLSB0aGlzLm1fb3JpZ1syXSkgLyB0aGlzLm1fdGlsZUhlaWdodCk7XHJcbiAgICAgICAgcmV0dXJuIFt0eCwgdHldO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRUaWxlQW5kUG9seUJ5UmVmXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaWxlQW5kUG9seUJ5UmVmKHJlZikge1xyXG4gICAgICAgIGlmIChyZWYgPT0gMCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcInJlZiA9IDBcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2FsdGl0aXAgPSBOYXZNZXNoLmRlY29kZVBvbHlJZChyZWYpO1xyXG4gICAgICAgIHZhciBzYWx0ID0gc2FsdGl0aXBbMF07XHJcbiAgICAgICAgdmFyIGl0ID0gc2FsdGl0aXBbMV07XHJcbiAgICAgICAgdmFyIGlwID0gc2FsdGl0aXBbMl07XHJcbiAgICAgICAgaWYgKGl0ID49IHRoaXMubV9tYXhUaWxlcykgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcInRpbGUgPiBtX21heFRpbGVzXCIpO1xyXG4gICAgICAgIGlmICh0aGlzLm1fdGlsZXNbaXRdLnNhbHQgIT0gc2FsdCB8fCB0aGlzLm1fdGlsZXNbaXRdLmRhdGEuaGVhZGVyID09IG51bGwpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIHNhbHQgb3IgaGVhZGVyXCIpO1xyXG4gICAgICAgIGlmIChpcCA+PSB0aGlzLm1fdGlsZXNbaXRdLmRhdGEuaGVhZGVyLnBvbHlDb3VudCkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcInBvbHkgPiBwb2x5Q291bnRcIik7XHJcbiAgICAgICAgcmV0dXJuIFt0aGlzLm1fdGlsZXNbaXRdLCB0aGlzLm1fdGlsZXNbaXRdLmRhdGEucG9seXNbaXBdXTtcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEB3YXJuaW5nIE9ubHkgdXNlIHRoaXMgZnVuY3Rpb24gaWYgaXQgaXMga25vd24gdGhhdCB0aGUgcHJvdmlkZWQgcG9seWdvblxyXG4gICAgICAvLy8gcmVmZXJlbmNlIGlzIHZhbGlkLiBUaGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuICNnZXRUaWxlQW5kUG9seUJ5UmVmLFxyXG4gICAgICAvLy8gYnV0XHJcbiAgICAgIC8vLyBpdCBkb2VzIG5vdCB2YWxpZGF0ZSB0aGUgcmVmZXJlbmNlLlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUocmVmKSB7XHJcbiAgICAgICAgdmFyIHNhbHRpdGlwID0gTmF2TWVzaC5kZWNvZGVQb2x5SWQocmVmKTtcclxuICAgICAgICB2YXIgaXQgPSBzYWx0aXRpcFsxXTtcclxuICAgICAgICB2YXIgaXAgPSBzYWx0aXRpcFsyXTtcclxuICAgICAgICByZXR1cm4gW3RoaXMubV90aWxlc1tpdF0sIHRoaXMubV90aWxlc1tpdF0uZGF0YS5wb2x5c1tpcF1dO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpc1ZhbGlkUG9seVJlZlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNWYWxpZFBvbHlSZWYocmVmKSB7XHJcbiAgICAgICAgaWYgKHJlZiA9PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIHNhbHRpdGlwID0gTmF2TWVzaC5kZWNvZGVQb2x5SWQocmVmKTtcclxuICAgICAgICB2YXIgc2FsdCA9IHNhbHRpdGlwWzBdO1xyXG4gICAgICAgIHZhciBpdCA9IHNhbHRpdGlwWzFdO1xyXG4gICAgICAgIHZhciBpcCA9IHNhbHRpdGlwWzJdO1xyXG4gICAgICAgIGlmIChpdCA+PSB0aGlzLm1fbWF4VGlsZXMpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5tX3RpbGVzW2l0XS5zYWx0ICE9IHNhbHQgfHwgdGhpcy5tX3RpbGVzW2l0XS5kYXRhID09IG51bGwpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoaXAgPj0gdGhpcy5tX3RpbGVzW2l0XS5kYXRhLmhlYWRlci5wb2x5Q291bnQpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UGFyYW1zXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9wYXJhbXM7XHJcbiAgICAgIH1cclxuICAgIH1dLCBbe1xyXG4gICAgICBrZXk6IFwibHNoaWZ0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsc2hpZnQobnVtLCBiaXRzKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bSAqIE1hdGgucG93KDIsIGJpdHMpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyc2hpZnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJzaGlmdChudW0sIGJpdHMpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihudW0gLyBNYXRoLnBvdygyLCBiaXRzKSk7XHJcbiAgICAgIH0gLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDM2NjYxOTkvMTAwNDc5MjBcclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJhbmRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFuZCh2MSwgdjIpIHtcclxuICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmO1xyXG4gICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTtcclxuICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7XHJcbiAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdztcclxuICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93O1xyXG4gICAgICAgIHZhciBoID0gaGkxICYgaGkyO1xyXG4gICAgICAgIHZhciBsID0gbG93MSAmIGxvdzI7XHJcbiAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm9yXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcih2MSwgdjIpIHtcclxuICAgICAgICB2YXIgaGkgPSAweDgwMDAwMDAwO1xyXG4gICAgICAgIHZhciBsb3cgPSAweDdmZmZmZmZmO1xyXG4gICAgICAgIHZhciBoaTEgPSB+fih2MSAvIGhpKTtcclxuICAgICAgICB2YXIgaGkyID0gfn4odjIgLyBoaSk7XHJcbiAgICAgICAgdmFyIGxvdzEgPSB2MSAmIGxvdztcclxuICAgICAgICB2YXIgbG93MiA9IHYyICYgbG93O1xyXG4gICAgICAgIHZhciBoID0gaGkxIHwgaGkyO1xyXG4gICAgICAgIHZhciBsID0gbG93MSB8IGxvdzI7XHJcbiAgICAgICAgcmV0dXJuIGggKiBoaSArIGw7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImVuY29kZVBvbHlJZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZW5jb2RlUG9seUlkKHNhbHQsIGl0LCBpcCkge1xyXG4gICAgICAgIHZhciBhID0gTmF2TWVzaC5sc2hpZnQoc2FsdCwgTmF2TWVzaC5EVF9QT0xZX0JJVFMgKyBOYXZNZXNoLkRUX1RJTEVfQklUUyk7XHJcbiAgICAgICAgdmFyIGIgPSBOYXZNZXNoLmxzaGlmdChpdCwgTmF2TWVzaC5EVF9QT0xZX0JJVFMpO1xyXG4gICAgICAgIHJldHVybiBOYXZNZXNoLm9yKE5hdk1lc2gub3IoYSwgYiksIGlwKTtcclxuICAgICAgfSAvLy8gRGVjb2RlcyBhIHN0YW5kYXJkIHBvbHlnb24gcmVmZXJlbmNlLlxyXG4gICAgICAvLy8gQG5vdGUgVGhpcyBmdW5jdGlvbiBpcyBnZW5lcmFsbHkgbWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxyXG4gICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHBvbHlnb24gcmVmZXJlbmNlIHRvIGRlY29kZS5cclxuICAgICAgLy8vIEBwYXJhbVtvdXRdIHNhbHQgVGhlIHRpbGUncyBzYWx0IHZhbHVlLlxyXG4gICAgICAvLy8gQHBhcmFtW291dF0gaXQgVGhlIGluZGV4IG9mIHRoZSB0aWxlLlxyXG4gICAgICAvLy8gQHBhcmFtW291dF0gaXAgVGhlIGluZGV4IG9mIHRoZSBwb2x5Z29uIHdpdGhpbiB0aGUgdGlsZS5cclxuICAgICAgLy8vIEBzZWUgI2VuY29kZVBvbHlJZFxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImRlY29kZVBvbHlJZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVjb2RlUG9seUlkKHJlZikge1xyXG4gICAgICAgIHZhciBzYWx0O1xyXG4gICAgICAgIHZhciBpdDtcclxuICAgICAgICB2YXIgaXA7XHJcbiAgICAgICAgdmFyIHNhbHRNYXNrID0gTmF2TWVzaC5sc2hpZnQoMSwgTmF2TWVzaC5EVF9TQUxUX0JJVFMpIC0gMTtcclxuICAgICAgICB2YXIgdGlsZU1hc2sgPSBOYXZNZXNoLmxzaGlmdCgxLCBOYXZNZXNoLkRUX1RJTEVfQklUUykgLSAxO1xyXG4gICAgICAgIHZhciBwb2x5TWFzayA9IE5hdk1lc2gubHNoaWZ0KDEsIE5hdk1lc2guRFRfUE9MWV9CSVRTKSAtIDE7XHJcbiAgICAgICAgc2FsdCA9IE1hdGguZmxvb3IoTmF2TWVzaC5hbmQoTmF2TWVzaC5yc2hpZnQocmVmLCBOYXZNZXNoLkRUX1BPTFlfQklUUyArIE5hdk1lc2guRFRfVElMRV9CSVRTKSwgc2FsdE1hc2spKTtcclxuICAgICAgICBpdCA9IE1hdGguZmxvb3IoTmF2TWVzaC5hbmQoTmF2TWVzaC5yc2hpZnQocmVmLCBOYXZNZXNoLkRUX1BPTFlfQklUUyksIHRpbGVNYXNrKSk7XHJcbiAgICAgICAgaXAgPSBNYXRoLmZsb29yKE5hdk1lc2guYW5kKHJlZiwgcG9seU1hc2spKTtcclxuICAgICAgICByZXR1cm4gW3NhbHQsIGl0LCBpcF07XHJcbiAgICAgIH0gLy8vIEV4dHJhY3RzIGEgdGlsZSdzIHNhbHQgdmFsdWUgZnJvbSB0aGUgc3BlY2lmaWVkIHBvbHlnb24gcmVmZXJlbmNlLlxyXG4gICAgICAvLy8gQG5vdGUgVGhpcyBmdW5jdGlvbiBpcyBnZW5lcmFsbHkgbWVhbnQgZm9yIGludGVybmFsIHVzZSBvbmx5LlxyXG4gICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHBvbHlnb24gcmVmZXJlbmNlLlxyXG4gICAgICAvLy8gQHNlZSAjZW5jb2RlUG9seUlkXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGVjb2RlUG9seUlkU2FsdFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVjb2RlUG9seUlkU2FsdChyZWYpIHtcclxuICAgICAgICB2YXIgc2FsdE1hc2sgPSAoMSA8PCBOYXZNZXNoLkRUX1NBTFRfQklUUykgLSAxO1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHJlZiA+PiBOYXZNZXNoLkRUX1BPTFlfQklUUyArIE5hdk1lc2guRFRfVElMRV9CSVRTICYgc2FsdE1hc2spO1xyXG4gICAgICB9IC8vLyBFeHRyYWN0cyB0aGUgdGlsZSdzIGluZGV4IGZyb20gdGhlIHNwZWNpZmllZCBwb2x5Z29uIHJlZmVyZW5jZS5cclxuICAgICAgLy8vIEBub3RlIFRoaXMgZnVuY3Rpb24gaXMgZ2VuZXJhbGx5IG1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gcmVmIFRoZSBwb2x5Z29uIHJlZmVyZW5jZS5cclxuICAgICAgLy8vIEBzZWUgI2VuY29kZVBvbHlJZFxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImRlY29kZVBvbHlJZFRpbGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlY29kZVBvbHlJZFRpbGUocmVmKSB7XHJcbiAgICAgICAgdmFyIHRpbGVNYXNrID0gKDEgPDwgTmF2TWVzaC5EVF9USUxFX0JJVFMpIC0gMTtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihyZWYgPj4gTmF2TWVzaC5EVF9QT0xZX0JJVFMgJiB0aWxlTWFzayk7XHJcbiAgICAgIH0gLy8vIEV4dHJhY3RzIHRoZSBwb2x5Z29uJ3MgaW5kZXggKHdpdGhpbiBpdHMgdGlsZSkgZnJvbSB0aGUgc3BlY2lmaWVkXHJcbiAgICAgIC8vLyBwb2x5Z29uIHJlZmVyZW5jZS5cclxuICAgICAgLy8vIEBub3RlIFRoaXMgZnVuY3Rpb24gaXMgZ2VuZXJhbGx5IG1lYW50IGZvciBpbnRlcm5hbCB1c2Ugb25seS5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gcmVmIFRoZSBwb2x5Z29uIHJlZmVyZW5jZS5cclxuICAgICAgLy8vIEBzZWUgI2VuY29kZVBvbHlJZFxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImRlY29kZVBvbHlJZFBvbHlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlY29kZVBvbHlJZFBvbHkocmVmKSB7XHJcbiAgICAgICAgdmFyIHBvbHlNYXNrID0gKDEgPDwgTmF2TWVzaC5EVF9QT0xZX0JJVFMpIC0gMTtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihyZWYgJiBwb2x5TWFzayk7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICBmdW5jdGlvbiBOYXZNZXNoKG9uZSwgbWF4VmVydHNQZXJQb2x5LCBmbGFncykge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmF2TWVzaCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3BhcmFtc1wiLCBudWxsKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fb3JpZ1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3RpbGVXaWR0aFwiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fdGlsZUhlaWdodFwiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbWF4VGlsZXNcIiwgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3RpbGVMdXRTaXplXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV90aWxlTHV0TWFza1wiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fcG9zTG9va3VwXCIsIFtdKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbmV4dEZyZWVcIiwgbnVsbCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3RpbGVzXCIsIFtdKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbWF4VmVydFBlclBvbHlcIiwgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3RpbGVDb3VudFwiLCAwKTtcclxuXHJcbiAgICAgIGlmIChmbGFncyB8fCBmbGFncyA9PSAwKSB7XHJcbiAgICAgICAgdGhpcy5fY29uc3RydWN0b3IoTmF2TWVzaC5nZXROYXZNZXNoUGFyYW1zKG9uZSksIG1heFZlcnRzUGVyUG9seSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkVGlsZShvbmUsIGZsYWdzLCAwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9jb25zdHJ1Y3RvcihvbmUsIG1heFZlcnRzUGVyUG9seSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoTmF2TWVzaCwgW3tcclxuICAgICAga2V5OiBcIl9jb25zdHJ1Y3RvclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NvbnN0cnVjdG9yKHBhcmFtcywgbWF4VmVydHNQZXJQb2x5KSB7XHJcbiAgICAgICAgdGhpcy5tX3BhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLm1fb3JpZyA9IHBhcmFtcy5vcmlnO1xyXG4gICAgICAgIHRoaXMubV90aWxlV2lkdGggPSBwYXJhbXMudGlsZVdpZHRoO1xyXG4gICAgICAgIHRoaXMubV90aWxlSGVpZ2h0ID0gcGFyYW1zLnRpbGVIZWlnaHQ7IC8vIEluaXQgdGlsZXNcclxuXHJcbiAgICAgICAgdGhpcy5tX21heFRpbGVzID0gcGFyYW1zLm1heFRpbGVzO1xyXG4gICAgICAgIHRoaXMubV9tYXhWZXJ0UGVyUG9seSA9IG1heFZlcnRzUGVyUG9seTtcclxuICAgICAgICB2YXIgbHV0c2l6ZSA9IERldG91ckNvbW1vbi5uZXh0UG93MihwYXJhbXMubWF4VGlsZXMgLyA0KTtcclxuICAgICAgICBpZiAobHV0c2l6ZSA9PSAwKSBsdXRzaXplID0gMTtcclxuICAgICAgICB0aGlzLm1fdGlsZUx1dFNpemUgPSBsdXRzaXplO1xyXG4gICAgICAgIHRoaXMubV90aWxlTHV0TWFzayA9IHRoaXMubV90aWxlTHV0U2l6ZSAtIDE7XHJcbiAgICAgICAgdGhpcy5tX3RpbGVzID0gbmV3IEFycmF5KHRoaXMubV9tYXhUaWxlcyk7XHJcbiAgICAgICAgdGhpcy5tX3Bvc0xvb2t1cCA9IG5ldyBBcnJheSh0aGlzLm1fdGlsZUx1dFNpemUpO1xyXG4gICAgICAgIHRoaXMubV9uZXh0RnJlZSA9IG51bGw7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLm1fbWF4VGlsZXMgLSAxOyBpID49IDA7IC0taSkge1xyXG4gICAgICAgICAgdGhpcy5tX3RpbGVzW2ldID0gbmV3IE1lc2hUaWxlKGkpO1xyXG4gICAgICAgICAgdGhpcy5tX3RpbGVzW2ldLnNhbHQgPSAxO1xyXG4gICAgICAgICAgdGhpcy5tX3RpbGVzW2ldLm5leHQgPSB0aGlzLm1fbmV4dEZyZWU7XHJcbiAgICAgICAgICB0aGlzLm1fbmV4dEZyZWUgPSB0aGlzLm1fdGlsZXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJxdWVyeVBvbHlnb25zSW5UaWxlXCIsXHJcbiAgICAgIC8vIFRPRE86IFRoZXNlIG1ldGhvZHMgYXJlIGR1cGxpY2F0ZXMgZnJvbSBkdE5hdk1lc2hRdWVyeSwgYnV0IGFyZSBuZWVkZWRcclxuICAgICAgLy8gZm9yIG9mZi1tZXNoIGNvbm5lY3Rpb24gZmluZGluZy5cclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHF1ZXJ5UG9seWdvbnNJblRpbGUodGlsZSwgcW1pbiwgcW1heCkge1xyXG4gICAgICAgIHZhciBwb2x5cyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGlsZS5kYXRhLmJ2VHJlZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICB2YXIgbm9kZUluZGV4ID0gMDtcclxuICAgICAgICAgIHZhciB0Ym1pbiA9IHRpbGUuZGF0YS5oZWFkZXIuYm1pbjtcclxuICAgICAgICAgIHZhciB0Ym1heCA9IHRpbGUuZGF0YS5oZWFkZXIuYm1heDtcclxuICAgICAgICAgIHZhciBxZmFjID0gdGlsZS5kYXRhLmhlYWRlci5idlF1YW50RmFjdG9yOyAvLyBDYWxjdWxhdGUgcXVhbnRpemVkIGJveFxyXG5cclxuICAgICAgICAgIHZhciBfYm1pbiA9IG5ldyBBcnJheSgzKTtcclxuXHJcbiAgICAgICAgICB2YXIgX2JtYXggPSBuZXcgQXJyYXkoMyk7IC8vIGR0Q2xhbXAgcXVlcnkgYm94IHRvIHdvcmxkIGJveC5cclxuXHJcblxyXG4gICAgICAgICAgdmFyIF9taW54ID0gRGV0b3VyQ29tbW9uLmNsYW1wKHFtaW5bMF0sIHRibWluWzBdLCB0Ym1heFswXSkgLSB0Ym1pblswXTtcclxuXHJcbiAgICAgICAgICB2YXIgbWlueSA9IERldG91ckNvbW1vbi5jbGFtcChxbWluWzFdLCB0Ym1pblsxXSwgdGJtYXhbMV0pIC0gdGJtaW5bMV07XHJcbiAgICAgICAgICB2YXIgbWlueiA9IERldG91ckNvbW1vbi5jbGFtcChxbWluWzJdLCB0Ym1pblsyXSwgdGJtYXhbMl0pIC0gdGJtaW5bMl07XHJcblxyXG4gICAgICAgICAgdmFyIF9tYXh4ID0gRGV0b3VyQ29tbW9uLmNsYW1wKHFtYXhbMF0sIHRibWluWzBdLCB0Ym1heFswXSkgLSB0Ym1pblswXTtcclxuXHJcbiAgICAgICAgICB2YXIgbWF4eSA9IERldG91ckNvbW1vbi5jbGFtcChxbWF4WzFdLCB0Ym1pblsxXSwgdGJtYXhbMV0pIC0gdGJtaW5bMV07XHJcbiAgICAgICAgICB2YXIgbWF4eiA9IERldG91ckNvbW1vbi5jbGFtcChxbWF4WzJdLCB0Ym1pblsyXSwgdGJtYXhbMl0pIC0gdGJtaW5bMl07IC8vIFF1YW50aXplXHJcblxyXG4gICAgICAgICAgX2JtaW5bMF0gPSBOYXZNZXNoLmFuZChNYXRoLmZsb29yKHFmYWMgKiBfbWlueCksIDB4ZmZmZSk7XHJcbiAgICAgICAgICBfYm1pblsxXSA9IE5hdk1lc2guYW5kKE1hdGguZmxvb3IocWZhYyAqIG1pbnkpLCAweGZmZmUpO1xyXG4gICAgICAgICAgX2JtaW5bMl0gPSBOYXZNZXNoLmFuZChNYXRoLmZsb29yKHFmYWMgKiBtaW56KSwgMHhmZmZlKTtcclxuICAgICAgICAgIF9ibWF4WzBdID0gTmF2TWVzaC5vcihNYXRoLmZsb29yKHFmYWMgKiBfbWF4eCArIDEpLCAxKTtcclxuICAgICAgICAgIF9ibWF4WzFdID0gTmF2TWVzaC5vcihNYXRoLmZsb29yKHFmYWMgKiBtYXh5ICsgMSksIDEpO1xyXG4gICAgICAgICAgX2JtYXhbMl0gPSBOYXZNZXNoLm9yKE1hdGguZmxvb3IocWZhYyAqIG1heHogKyAxKSwgMSk7IC8vIFRyYXZlcnNlIHRyZWVcclxuXHJcbiAgICAgICAgICB2YXIgYmFzZSA9IHRoaXMuZ2V0UG9seVJlZkJhc2UodGlsZSk7XHJcbiAgICAgICAgICB2YXIgZW5kID0gdGlsZS5kYXRhLmhlYWRlci5idk5vZGVDb3VudDtcclxuXHJcbiAgICAgICAgICB3aGlsZSAobm9kZUluZGV4IDwgZW5kKSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gdGlsZS5kYXRhLmJ2VHJlZVtub2RlSW5kZXhdO1xyXG4gICAgICAgICAgICB2YXIgb3ZlcmxhcCA9IERldG91ckNvbW1vbi5vdmVybGFwUXVhbnRCb3VuZHMoX2JtaW4sIF9ibWF4LCBub2RlLmJtaW4sIG5vZGUuYm1heCk7XHJcbiAgICAgICAgICAgIHZhciBpc0xlYWZOb2RlID0gbm9kZS5pID49IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNMZWFmTm9kZSAmJiBvdmVybGFwKSB7XHJcbiAgICAgICAgICAgICAgcG9seXMucHVzaChOYXZNZXNoLm9yKGJhc2UsIG5vZGUuaSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcCB8fCBpc0xlYWZOb2RlKSBub2RlSW5kZXgrKztlbHNlIHtcclxuICAgICAgICAgICAgICB2YXIgZXNjYXBlSW5kZXggPSAtbm9kZS5pO1xyXG4gICAgICAgICAgICAgIG5vZGVJbmRleCArPSBlc2NhcGVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBwb2x5cztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYm1pbiA9IFtudWxsLCBudWxsLCBudWxsXTtcclxuICAgICAgICAgIGJtYXggPSBbbnVsbCwgbnVsbCwgbnVsbF07XHJcblxyXG4gICAgICAgICAgdmFyIF9iYXNlID0gdGhpcy5nZXRQb2x5UmVmQmFzZSh0aWxlKTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgdmFyIHAgPSB0aWxlLmRhdGEucG9seXNbaV07IC8vIERvIG5vdCByZXR1cm4gb2ZmLW1lc2ggY29ubmVjdGlvbiBwb2x5Z29ucy5cclxuXHJcbiAgICAgICAgICAgIGlmIChwLmdldFR5cGUoKSA9PSBQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTikgY29udGludWU7IC8vIENhbGMgcG9seWdvbiBib3VuZHMuXHJcblxyXG4gICAgICAgICAgICB2YXIgdiA9IHAudmVydHNbMF0gKiAzO1xyXG4gICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYm1pbiwgdGlsZS5kYXRhLnZlcnRzLCB2KTtcclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGJtYXgsIHRpbGUuZGF0YS52ZXJ0cywgdik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8IHAudmVydENvdW50OyArK2opIHtcclxuICAgICAgICAgICAgICB2ID0gcC52ZXJ0c1tqXSAqIDM7XHJcbiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZNaW4oYm1pbiwgdGlsZS5kYXRhLnZlcnRzLCB2KTtcclxuICAgICAgICAgICAgICBEZXRvdXJDb21tb24udk1heChibWF4LCB0aWxlLmRhdGEudmVydHMsIHYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcEJvdW5kcyhxbWluLCBxbWF4LCBibWluLCBibWF4KSkge1xyXG4gICAgICAgICAgICAgIHBvbHlzLnB1c2goTmF2TWVzaC5vcihfYmFzZSwgaSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHBvbHlzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSAvLy8gQWRkcyBhIHRpbGUgdG8gdGhlIG5hdmlnYXRpb24gbWVzaC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gZGF0YSBEYXRhIGZvciB0aGUgbmV3IHRpbGUgbWVzaC4gKFNlZTogI2R0Q3JlYXRlTmF2TWVzaERhdGEpXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIGRhdGFTaXplIERhdGEgc2l6ZSBvZiB0aGUgbmV3IHRpbGUgbWVzaC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gZmxhZ3MgVGlsZSBmbGFncy4gKFNlZTogI2R0VGlsZUZsYWdzKVxyXG4gICAgICAvLy8gQHBhcmFtW2luXSBsYXN0UmVmIFRoZSBkZXNpcmVkIHJlZmVyZW5jZSBmb3IgdGhlIHRpbGUuIChXaGVuIHJlbG9hZGluZyBhXHJcbiAgICAgIC8vLyB0aWxlLikgW29wdF0gW0RlZmF1bHQ6IDBdXHJcbiAgICAgIC8vLyBAcGFyYW1bb3V0XSByZXN1bHQgVGhlIHRpbGUgcmVmZXJlbmNlLiAoSWYgdGhlIHRpbGUgd2FzIHN1Y2Nlc2Z1bGx5XHJcbiAgICAgIC8vLyBhZGRlZC4pIFtvcHRdXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBvcGVyYXRpb24uXHJcbiAgICAgIC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIGFkZCBvcGVyYXRpb24gd2lsbCBmYWlsIGlmIHRoZSBkYXRhIGlzIGluIHRoZSB3cm9uZyBmb3JtYXQsIHRoZVxyXG4gICAgICAvLy8gYWxsb2NhdGVkIHRpbGVcclxuICAgICAgLy8vIHNwYWNlIGlzIGZ1bGwsIG9yIHRoZXJlIGlzIGEgdGlsZSBhbHJlYWR5IGF0IHRoZSBzcGVjaWZpZWQgcmVmZXJlbmNlLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBsYXN0UmVmIHBhcmFtZXRlciBpcyB1c2VkIHRvIHJlc3RvcmUgYSB0aWxlIHdpdGggdGhlIHNhbWUgdGlsZVxyXG4gICAgICAvLy8gcmVmZXJlbmNlIGl0IGhhZCBwcmV2aW91c2x5IHVzZWQuIEluIHRoaXMgY2FzZSB0aGUgI2R0UG9seVJlZidzIGZvciB0aGVcclxuICAgICAgLy8vIHRpbGUgd2lsbCBiZSByZXN0b3JlZCB0byB0aGUgc2FtZSB2YWx1ZXMgdGhleSB3ZXJlIGJlZm9yZSB0aGUgdGlsZSB3YXNcclxuICAgICAgLy8vIHJlbW92ZWQuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIG5hdiBtZXNoIGFzc3VtZXMgZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgZGF0YSBwYXNzZWQgYW5kIHdpbGwgbWFrZVxyXG4gICAgICAvLy8gY2hhbmdlcyB0byB0aGUgZHluYW1pYyBwb3J0aW9uIG9mIHRoZSBkYXRhLiBGb3IgdGhhdCByZWFzb24gdGhlIGRhdGFcclxuICAgICAgLy8vIHNob3VsZCBub3QgYmUgcmV1c2VkIGluIG90aGVyIG5hdiBtZXNoZXMgdW50aWwgdGhlIHRpbGUgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XHJcbiAgICAgIC8vLyByZW1vdmVkIGZyb20gdGhpcyBuYXYgbWVzaC5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIGR0Q3JlYXRlTmF2TWVzaERhdGEsICNyZW1vdmVUaWxlXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkVGlsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVGlsZShkYXRhLCBmbGFncywgbGFzdFJlZikge1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGF0YSBpcyBpbiByaWdodCBmb3JtYXQuXHJcbiAgICAgICAgdmFyIGhlYWRlciA9IGRhdGEuaGVhZGVyOyAvLyBNYWtlIHN1cmUgdGhlIGxvY2F0aW9uIGlzIGZyZWUuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdldFRpbGVBdChoZWFkZXIueCwgaGVhZGVyLnksIGhlYWRlci5sYXllcikgIT0gbnVsbCkgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJUaWxlIGFscmVhZHkgZXhpc3RzXCIpOyAvLyBBbGxvY2F0ZSBhIHRpbGUuXHJcblxyXG4gICAgICAgIHZhciB0aWxlID0gbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKGxhc3RSZWYgPT0gMCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMubV9uZXh0RnJlZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRpbGUgPSB0aGlzLm1fbmV4dEZyZWU7XHJcbiAgICAgICAgICAgIHRoaXMubV9uZXh0RnJlZSA9IHRpbGUubmV4dDtcclxuICAgICAgICAgICAgdGlsZS5uZXh0ID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5tX3RpbGVDb3VudCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBUcnkgdG8gcmVsb2NhdGUgdGhlIHRpbGUgdG8gc3BlY2lmaWMgaW5kZXggd2l0aCBzYW1lIHNhbHQuXHJcbiAgICAgICAgICB2YXIgdGlsZUluZGV4ID0gZGVjb2RlUG9seUlkVGlsZShsYXN0UmVmKTtcclxuICAgICAgICAgIGlmICh0aWxlSW5kZXggPj0gdGhpcy5tX21heFRpbGVzKSB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihcIlRpbGUgaW5kZXggdG9vIGhpZ2hcIik7IC8vIFRyeSB0byBmaW5kIHRoZSBzcGVjaWZpYyB0aWxlIGlkIGZyb20gdGhlIGZyZWUgbGlzdC5cclxuXHJcbiAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5tX3RpbGVzW3RpbGVJbmRleF07XHJcbiAgICAgICAgICB2YXIgcHJldiA9IG51bGw7XHJcbiAgICAgICAgICB0aWxlID0gdGhpcy5tX25leHRGcmVlO1xyXG5cclxuICAgICAgICAgIHdoaWxlICh0aWxlICE9IG51bGwgJiYgdGlsZSAhPSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgcHJldiA9IHRpbGU7XHJcbiAgICAgICAgICAgIHRpbGUgPSB0aWxlLm5leHQ7XHJcbiAgICAgICAgICB9IC8vIENvdWxkIG5vdCBmaW5kIHRoZSBjb3JyZWN0IGxvY2F0aW9uLlxyXG5cclxuXHJcbiAgICAgICAgICBpZiAodGlsZSAhPSB0YXJnZXQpIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiQ291bGQgbm90IGZpbmQgdGlsZVwiKTsgLy8gUmVtb3ZlIGZyb20gZnJlZWxpc3RcclxuXHJcbiAgICAgICAgICBpZiAocHJldiA9PSBudWxsKSB0aGlzLm1fbmV4dEZyZWUgPSB0aWxlLm5leHQ7ZWxzZSBwcmV2Lm5leHQgPSB0aWxlLm5leHQ7IC8vIFJlc3RvcmUgc2FsdC5cclxuXHJcbiAgICAgICAgICB0aWxlLnNhbHQgPSBkZWNvZGVQb2x5SWRTYWx0KGxhc3RSZWYpO1xyXG4gICAgICAgIH0gLy8gTWFrZSBzdXJlIHdlIGNvdWxkIGFsbG9jYXRlIGEgdGlsZS5cclxuXHJcblxyXG4gICAgICAgIGlmICh0aWxlID09IG51bGwpIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiQ291bGQgbm90IGFsbG9jYXRlIGEgdGlsZVwiKTtcclxuICAgICAgICB0aWxlLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRpbGUuZmxhZ3MgPSBmbGFncztcclxuICAgICAgICB0aWxlLmxpbmtzID0gW107IC8vIEluc2VydCB0aWxlIGludG8gdGhlIHBvc2l0aW9uIGx1dC5cclxuXHJcbiAgICAgICAgdmFyIGggPSBOYXZNZXNoLmNvbXB1dGVUaWxlSGFzaChoZWFkZXIueCwgaGVhZGVyLnksIHRoaXMubV90aWxlTHV0TWFzayk7XHJcbiAgICAgICAgdGlsZS5uZXh0ID0gdGhpcy5tX3Bvc0xvb2t1cFtoXTtcclxuICAgICAgICB0aGlzLm1fcG9zTG9va3VwW2hdID0gdGlsZTsgLy8gUGF0Y2ggaGVhZGVyIHBvaW50ZXJzLlxyXG4gICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyBpdGVtcyBpbiB0aGUgYnZ0cmVlLCByZXNldCB0aGUgdHJlZSBwb2ludGVyLlxyXG5cclxuICAgICAgICBpZiAodGlsZS5kYXRhLmJ2VHJlZSAhPSBudWxsICYmIHRpbGUuZGF0YS5idlRyZWUubGVuZ3RoID09IDApIHRpbGUuZGF0YS5idlRyZWUgPSBudWxsOyAvLyBJbml0IHRpbGUuXHJcblxyXG4gICAgICAgIHRoaXMuY29ubmVjdEludExpbmtzKHRpbGUpOyAvLyBCYXNlIG9mZi1tZXNoIGNvbm5lY3Rpb25zIHRvIHRoZWlyIHN0YXJ0aW5nIHBvbHlnb25zIGFuZCBjb25uZWN0IGNvbm5lY3Rpb25zIGluc2lkZSB0aGUgdGlsZS5cclxuXHJcbiAgICAgICAgdGhpcy5iYXNlT2ZmTWVzaExpbmtzKHRpbGUpO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdEV4dE9mZk1lc2hMaW5rcyh0aWxlLCB0aWxlLCAtMSk7IC8vIENvbm5lY3Qgd2l0aCBsYXllcnMgaW4gY3VycmVudCB0aWxlLlxyXG5cclxuICAgICAgICB2YXIgbmVpcyA9IHRoaXMuZ2V0VGlsZXNBdChoZWFkZXIueCwgaGVhZGVyLnkpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgIGlmIChuZWlzW2pdID09IHRpbGUpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29ubmVjdEV4dExpbmtzKHRpbGUsIG5laXNbal0sIC0xKTtcclxuICAgICAgICAgIGNvbm5lY3RFeHRMaW5rcyhuZWlzW2pdLCB0aWxlLCAtMSk7XHJcbiAgICAgICAgICB0aGlzLmNvbm5lY3RFeHRPZmZNZXNoTGlua3ModGlsZSwgbmVpc1tqXSwgLTEpO1xyXG4gICAgICAgICAgdGhpcy5jb25uZWN0RXh0T2ZmTWVzaExpbmtzKG5laXNbal0sIHRpbGUsIC0xKTtcclxuICAgICAgICB9IC8vIENvbm5lY3Qgd2l0aCBuZWlnaGJvdXIgdGlsZXMuXHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7ICsraSkge1xyXG4gICAgICAgICAgbmVpcyA9IHRoaXMuZ2V0TmVpZ2hib3VyVGlsZXNBdChoZWFkZXIueCwgaGVhZGVyLnksIGkpO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBuZWlzLmxlbmd0aDsgKytfaikge1xyXG4gICAgICAgICAgICBjb25uZWN0RXh0TGlua3ModGlsZSwgbmVpc1tfal0sIGkpO1xyXG4gICAgICAgICAgICBjb25uZWN0RXh0TGlua3MobmVpc1tfal0sIHRpbGUsIERldG91ckNvbW1vbi5vcHBvc2l0ZVRpbGUoaSkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RFeHRPZmZNZXNoTGlua3ModGlsZSwgbmVpc1tfal0sIGkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RFeHRPZmZNZXNoTGlua3MobmVpc1tfal0sIHRpbGUsIERldG91ckNvbW1vbi5vcHBvc2l0ZVRpbGUoaSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJlZih0aWxlKTtcclxuICAgICAgfSAvLy8gUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIHRpbGUgZnJvbSB0aGUgbmF2aWdhdGlvbiBtZXNoLlxyXG4gICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHJlZmVyZW5jZSBvZiB0aGUgdGlsZSB0byByZW1vdmUuXHJcbiAgICAgIC8vLyBAcGFyYW1bb3V0XSBkYXRhIERhdGEgYXNzb2NpYXRlZCB3aXRoIGRlbGV0ZWQgdGlsZS5cclxuICAgICAgLy8vIEBwYXJhbVtvdXRdIGRhdGFTaXplIFNpemUgb2YgdGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIGRlbGV0ZWQgdGlsZS5cclxuICAgICAgLy8vIEByZXR1cm4gVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIG9wZXJhdGlvbi5cclxuICAgICAgLy8gZHRTdGF0dXMgcmVtb3ZlVGlsZShkdFRpbGVSZWYgcmVmLCBjaGFyKiogZGF0YSwgaW50KiBkYXRhU2l6ZSk7XHJcbiAgICAgIC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBkYXRhIGZvciB0aGUgdGlsZSBzbyB0aGF0LCBpZiBkZXNpcmVkLFxyXG4gICAgICAvLy8gaXQgY2FuIGJlIGFkZGVkIGJhY2sgdG8gdGhlIG5hdmlnYXRpb24gbWVzaCBhdCBhIGxhdGVyIHBvaW50LlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBzZWUgI2FkZFRpbGVcclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyZW1vdmVUaWxlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVUaWxlKHJlZikge1xyXG4gICAgICAgIGlmIChyZWYgPT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGlsZUluZGV4ID0gZGVjb2RlUG9seUlkVGlsZShyZWYpO1xyXG4gICAgICAgIHZhciB0aWxlU2FsdCA9IGRlY29kZVBvbHlJZFNhbHQocmVmKTtcclxuICAgICAgICBpZiAodGlsZUluZGV4ID49IHRoaXMubV9tYXhUaWxlcykgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJJbnZhbGlkIHRpbGUgaW5kZXhcIik7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLm1fdGlsZXNbdGlsZUluZGV4XTtcclxuICAgICAgICBpZiAodGlsZS5zYWx0ICE9IHRpbGVTYWx0KSB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihcIkludmFsaWQgdGlsZSBzYWx0XCIpOyAvLyBSZW1vdmUgdGlsZSBmcm9tIGhhc2ggbG9va3VwLlxyXG5cclxuICAgICAgICB2YXIgaCA9IE5hdk1lc2guY29tcHV0ZVRpbGVIYXNoKHRpbGUuZGF0YS5oZWFkZXIueCwgdGlsZS5kYXRhLmhlYWRlci55LCB0aGlzLm1fdGlsZUx1dE1hc2spO1xyXG4gICAgICAgIHZhciBwcmV2ID0gbnVsbDtcclxuICAgICAgICB2YXIgY3VyID0gdGhpcy5tX3Bvc0xvb2t1cFtoXTtcclxuXHJcbiAgICAgICAgd2hpbGUgKGN1ciAhPSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAoY3VyID09IHRpbGUpIHtcclxuICAgICAgICAgICAgaWYgKHByZXYgIT0gbnVsbCkgcHJldi5uZXh0ID0gY3VyLm5leHQ7ZWxzZSB0aGlzLm1fcG9zTG9va3VwW2hdID0gY3VyLm5leHQ7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHByZXYgPSBjdXI7XHJcbiAgICAgICAgICBjdXIgPSBjdXIubmV4dDtcclxuICAgICAgICB9IC8vIFJlbW92ZSBjb25uZWN0aW9ucyB0byBuZWlnaGJvdXIgdGlsZXMuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGNvbm5lY3Rpb25zIHdpdGggbmVpZ2hib3VyIHRpbGVzLlxyXG4gICAgICAgIC8vIERpc2Nvbm5lY3QgZnJvbSBvdGhlciBsYXllcnMgaW4gY3VycmVudCB0aWxlLlxyXG5cclxuXHJcbiAgICAgICAgbm5laXMgPSB0aGlzLmdldFRpbGVzQXQodGlsZS5kYXRhLmhlYWRlci54LCB0aWxlLmRhdGEuaGVhZGVyLnkpO1xyXG5cclxuICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm5laXMpLFxyXG4gICAgICAgICAgICBfc3RlcDtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XHJcbiAgICAgICAgICAgIHZhciBfajIgPSBfc3RlcC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKF9qMiA9PSB0aWxlKSBjb250aW51ZTtcclxuICAgICAgICAgICAgdW5jb25uZWN0TGlua3MoX2oyLCB0aWxlKTtcclxuICAgICAgICAgIH0gLy8gRGlzY29ubmVjdCBmcm9tIG5laWdoYm91ciB0aWxlcy5cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBfaXRlcmF0b3IuZigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA4OyArK2kpIHtcclxuICAgICAgICAgIG5uZWlzID0gdGhpcy5nZXROZWlnaGJvdXJUaWxlc0F0KHRpbGUuZGF0YS5oZWFkZXIueCwgdGlsZS5kYXRhLmhlYWRlci55LCBpKTtcclxuXHJcbiAgICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5uZWlzKSxcclxuICAgICAgICAgICAgICBfc3RlcDI7XHJcblxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgICAgICB2YXIgaiA9IF9zdGVwMi52YWx1ZTtcclxuICAgICAgICAgICAgICB1bmNvbm5lY3RMaW5rcyhqLCB0aWxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZGF0YSA9IHRpbGUuZGF0YTsgLy8gUmVzZXQgdGlsZS5cclxuXHJcbiAgICAgICAgdGlsZS5kYXRhID0gbnVsbDtcclxuICAgICAgICB0aWxlLmZsYWdzID0gMDtcclxuICAgICAgICB0aWxlLmxpbmtzID0gW107IC8vIFVwZGF0ZSBzYWx0LCBzYWx0IHNob3VsZCBuZXZlciBiZSB6ZXJvLlxyXG5cclxuICAgICAgICB0aWxlLnNhbHQgPSB0aWxlLnNhbHQgKyAxICYgKDEgPDwgTmF2TWVzaC5EVF9TQUxUX0JJVFMpIC0gMTtcclxuICAgICAgICBpZiAodGlsZS5zYWx0ID09IDApIHRpbGUuc2FsdCsrOyAvLyBBZGQgdG8gZnJlZSBsaXN0LlxyXG5cclxuICAgICAgICB0aWxlLm5leHQgPSB0aGlzLm1fbmV4dEZyZWU7XHJcbiAgICAgICAgdGhpcy5tX25leHRGcmVlID0gdGlsZTtcclxuICAgICAgICB0aGlzLm1fdGlsZUNvdW50LS07XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0gLy8vIEJ1aWxkcyBpbnRlcm5hbCBwb2x5Z29ucyBsaW5rcyBmb3IgYSB0aWxlLlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNvbm5lY3RJbnRMaW5rc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdEludExpbmtzKHRpbGUpIHtcclxuICAgICAgICBpZiAodGlsZSA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgdmFyIGJhc2UgPSB0aGlzLmdldFBvbHlSZWZCYXNlKHRpbGUpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK2kpIHtcclxuICAgICAgICAgIHZhciBwb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2ldO1xyXG4gICAgICAgICAgcG9seS5maXJzdExpbmsgPSBOYXZNZXNoLkRUX05VTExfTElOSztcclxuICAgICAgICAgIGlmIChwb2x5LmdldFR5cGUoKSA9PSBQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTikgY29udGludWU7IC8vIEJ1aWxkIGVkZ2UgbGlua3MgYmFja3dhcmRzIHNvIHRoYXQgdGhlIGxpbmtzIHdpbGwgYmVcclxuICAgICAgICAgIC8vIGluIHRoZSBsaW5rZWQgbGlzdCBmcm9tIGxvd2VzdCBpbmRleCB0byBoaWdoZXN0LlxyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSBwb2x5LnZlcnRDb3VudCAtIDE7IGogPj0gMDsgLS1qKSB7XHJcbiAgICAgICAgICAgIC8vIFNraXAgaGFyZCBhbmQgbm9uLWludGVybmFsIGVkZ2VzLlxyXG4gICAgICAgICAgICBpZiAocG9seS5uZWlzW2pdID09IDAgfHwgKHBvbHkubmVpc1tqXSAmIE5hdk1lc2guRFRfRVhUX0xJTkspICE9IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5hbGxvY0xpbmsodGlsZSk7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gdGlsZS5saW5rc1tpZHhdO1xyXG4gICAgICAgICAgICBsaW5rLnJlZiA9IE5hdk1lc2gub3IoYmFzZSwgcG9seS5uZWlzW2pdIC0gMSk7XHJcbiAgICAgICAgICAgIGxpbmsuZWRnZSA9IGo7XHJcbiAgICAgICAgICAgIGxpbmsuc2lkZSA9IDB4ZmY7XHJcbiAgICAgICAgICAgIGxpbmsuYm1pbiA9IGxpbmsuYm1heCA9IDA7IC8vIEFkZCB0byBsaW5rZWQgbGlzdC5cclxuXHJcbiAgICAgICAgICAgIGxpbmsubmV4dCA9IHBvbHkuZmlyc3RMaW5rO1xyXG4gICAgICAgICAgICBwb2x5LmZpcnN0TGluayA9IGlkeDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInVuY29ubmVjdExpbmtzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bmNvbm5lY3RMaW5rcyh0aWxlLCB0YXJnZXQpIHtcclxuICAgICAgICBpZiAodGlsZSA9PSBudWxsIHx8IHRhcmdldCA9PSBudWxsKSByZXR1cm47XHJcbiAgICAgICAgdmFyIHRhcmdldE51bSA9IGRlY29kZVBvbHlJZFRpbGUodGhpcy5nZXRUaWxlUmVmKHRhcmdldCkpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50OyArK2kpIHtcclxuICAgICAgICAgIHZhciBwb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2ldO1xyXG4gICAgICAgICAgdmFyIGogPSBwb2x5LmZpcnN0TGluaztcclxuICAgICAgICAgIHZhciBwaiA9IE5hdk1lc2guRFRfTlVMTF9MSU5LO1xyXG5cclxuICAgICAgICAgIHdoaWxlIChqICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LKSB7XHJcbiAgICAgICAgICAgIGlmIChkZWNvZGVQb2x5SWRUaWxlKHRpbGUubGlua3Nbal0ucmVmKSA9PSB0YXJnZXROdW0pIHtcclxuICAgICAgICAgICAgICAvLyBSZW1vdmUgbGluay5cclxuICAgICAgICAgICAgICB2YXIgbmogPSB0aWxlLmxpbmtzW2pdLm5leHQ7XHJcbiAgICAgICAgICAgICAgaWYgKHBqID09IE5hdk1lc2guRFRfTlVMTF9MSU5LKSBwb2x5LmZpcnN0TGluayA9IG5qO2Vsc2UgdGlsZS5saW5rc1twal0ubmV4dCA9IG5qO1xyXG4gICAgICAgICAgICAgIGZyZWVMaW5rKHRpbGUsIGopO1xyXG4gICAgICAgICAgICAgIGogPSBuajtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBBZHZhbmNlXHJcbiAgICAgICAgICAgICAgcGogPSBqO1xyXG4gICAgICAgICAgICAgIGogPSB0aWxlLmxpbmtzW2pdLm5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNvbm5lY3RFeHRMaW5rc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdEV4dExpbmtzKHRpbGUsIHRhcmdldCwgc2lkZSkge1xyXG4gICAgICAgIGlmICh0aWxlID09IG51bGwpIHJldHVybjsgLy8gQ29ubmVjdCBib3JkZXIgbGlua3MuXHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZS5kYXRhLmhlYWRlci5wb2x5Q291bnQ7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHBvbHkgPSB0aWxlLmRhdGEucG9seXNbaV07IC8vIENyZWF0ZSBuZXcgbGlua3MuXHJcbiAgICAgICAgICAvLyBzaG9ydCBtID0gTmF2TWVzaC5EVF9FWFRfTElOSyB8IChzaG9ydClzaWRlO1xyXG5cclxuICAgICAgICAgIHZhciBudiA9IHBvbHkudmVydENvdW50O1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnY7ICsraikge1xyXG4gICAgICAgICAgICAvLyBTa2lwIG5vbi1wb3J0YWwgZWRnZXMuXHJcbiAgICAgICAgICAgIGlmICgocG9seS5uZWlzW2pdICYgTmF2TWVzaC5EVF9FWFRfTElOSykgPT0gMCkgY29udGludWU7XHJcbiAgICAgICAgICAgIHZhciBkaXIgPSBwb2x5Lm5laXNbal0gJiAweGZmO1xyXG4gICAgICAgICAgICBpZiAoc2lkZSAhPSAtMSAmJiBkaXIgIT0gc2lkZSkgY29udGludWU7IC8vIENyZWF0ZSBuZXcgbGlua3NcclxuXHJcbiAgICAgICAgICAgIHZhciB2YSA9IHBvbHkudmVydHNbal0gKiAzO1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBwb2x5LnZlcnRzWyhqICsgMSkgJSBudl0gKiAzO1xyXG4gICAgICAgICAgICBjb25uZWN0ZWRQb2x5cyA9IGZpbmRDb25uZWN0aW5nUG9seXModGlsZS5kYXRhLnZlcnRzLCB2YSwgdmIsIHRhcmdldCwgRGV0b3VyQ29tbW9uLm9wcG9zaXRlVGlsZShkaXIpLCA0KTtcclxuICAgICAgICAgICAgbmVpID0gY29ubmVjdGVkUG9seXNbMF07XHJcbiAgICAgICAgICAgIG5laWEgPSBjb25uZWN0ZWRQb2x5c1sxXTtcclxuICAgICAgICAgICAgdmFyIG5uZWkgPSBjb25uZWN0ZWRQb2x5cy50aGlyZDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbm5laTsgKytrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGlkeCA9IHRoaXMuYWxsb2NMaW5rKHRpbGUpO1xyXG4gICAgICAgICAgICAgIHZhciBsaW5rID0gdGlsZS5saW5rc1tpZHhdO1xyXG4gICAgICAgICAgICAgIGxpbmsucmVmID0gbmVpW2tdO1xyXG4gICAgICAgICAgICAgIGxpbmsuZWRnZSA9IGo7XHJcbiAgICAgICAgICAgICAgbGluay5zaWRlID0gZGlyO1xyXG4gICAgICAgICAgICAgIGxpbmsubmV4dCA9IHBvbHkuZmlyc3RMaW5rO1xyXG4gICAgICAgICAgICAgIHBvbHkuZmlyc3RMaW5rID0gaWR4OyAvLyBDb21wcmVzcyBwb3J0YWwgbGltaXRzIHRvIGEgYnl0ZSB2YWx1ZS5cclxuXHJcbiAgICAgICAgICAgICAgaWYgKGRpciA9PSAwIHx8IGRpciA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICB0bWluID0gKG5laWFbayAqIDIgKyAwXSAtIHRpbGUuZGF0YS52ZXJ0c1t2YSArIDJdKSAvICh0aWxlLmRhdGEudmVydHNbdmIgKyAyXSAtIHRpbGUuZGF0YS52ZXJ0c1t2YSArIDJdKTtcclxuICAgICAgICAgICAgICAgIHRtYXggPSAobmVpYVtrICogMiArIDFdIC0gdGlsZS5kYXRhLnZlcnRzW3ZhICsgMl0pIC8gKHRpbGUuZGF0YS52ZXJ0c1t2YiArIDJdIC0gdGlsZS5kYXRhLnZlcnRzW3ZhICsgMl0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0bWluID4gdG1heCkge1xyXG4gICAgICAgICAgICAgICAgICB0ZW1wID0gdG1pbjtcclxuICAgICAgICAgICAgICAgICAgdG1pbiA9IHRtYXg7XHJcbiAgICAgICAgICAgICAgICAgIHRtYXggPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxpbmsuYm1pbiA9IE1hdGguZmxvb3IoRGV0b3VyQ29tbW9uLmNsYW1wKHRtaW4sIDAuMCwgMS4wKSAqIDI1NS4wKTtcclxuICAgICAgICAgICAgICAgIGxpbmsuYm1heCA9IE1hdGguZmxvb3IoRGV0b3VyQ29tbW9uLmNsYW1wKHRtYXgsIDAuMCwgMS4wKSAqIDI1NS4wKTtcclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpciA9PSAyIHx8IGRpciA9PSA2KSB7XHJcbiAgICAgICAgICAgICAgICB0bWluID0gKG5laWFbayAqIDIgKyAwXSAtIHRpbGUuZGF0YS52ZXJ0c1t2YV0pIC8gKHRpbGUuZGF0YS52ZXJ0c1t2Yl0gLSB0aWxlLmRhdGEudmVydHNbdmFdKTtcclxuICAgICAgICAgICAgICAgIHRtYXggPSAobmVpYVtrICogMiArIDFdIC0gdGlsZS5kYXRhLnZlcnRzW3ZhXSkgLyAodGlsZS5kYXRhLnZlcnRzW3ZiXSAtIHRpbGUuZGF0YS52ZXJ0c1t2YV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0bWluID4gdG1heCkge1xyXG4gICAgICAgICAgICAgICAgICB0ZW1wID0gdG1pbjtcclxuICAgICAgICAgICAgICAgICAgdG1pbiA9IHRtYXg7XHJcbiAgICAgICAgICAgICAgICAgIHRtYXggPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxpbmsuYm1pbiA9IE1hdGguZmxvb3IoRGV0b3VyQ29tbW9uLmNsYW1wKHRtaW4sIDAuMCwgMS4wKSAqIDI1NS4wKTtcclxuICAgICAgICAgICAgICAgIGxpbmsuYm1heCA9IE1hdGguZmxvb3IoRGV0b3VyQ29tbW9uLmNsYW1wKHRtYXgsIDAuMCwgMS4wKSAqIDI1NS4wKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNvbm5lY3RFeHRPZmZNZXNoTGlua3NcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3RFeHRPZmZNZXNoTGlua3ModGlsZSwgdGFyZ2V0LCBzaWRlKSB7XHJcbiAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuOyAvLyBDb25uZWN0IG9mZi1tZXNoIGxpbmtzLlxyXG4gICAgICAgIC8vIFdlIGFyZSBpbnRlcmVzdGVkIG9uIGxpbmtzIHdoaWNoIGxhbmQgZnJvbSB0YXJnZXQgdGlsZSB0byB0aGlzIHRpbGUuXHJcblxyXG4gICAgICAgIHZhciBvcHBvc2l0ZVNpZGUgPSBzaWRlID09IC0xID8gMHhmZiA6IERldG91ckNvbW1vbi5vcHBvc2l0ZVRpbGUoc2lkZSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0LmRhdGEuaGVhZGVyLm9mZk1lc2hDb25Db3VudDsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgdGFyZ2V0Q29uID0gdGFyZ2V0LmRhdGEub2ZmTWVzaENvbnNbaV07XHJcbiAgICAgICAgICBpZiAodGFyZ2V0Q29uLnNpZGUgIT0gb3Bwb3NpdGVTaWRlKSBjb250aW51ZTtcclxuICAgICAgICAgIHZhciB0YXJnZXRQb2x5ID0gdGFyZ2V0LmRhdGEucG9seXNbdGFyZ2V0Q29uLnBvbHldOyAvLyBTa2lwIG9mZi1tZXNoIGNvbm5lY3Rpb25zIHdoaWNoIHN0YXJ0IGxvY2F0aW9uIGNvdWxkIG5vdCBiZVxyXG4gICAgICAgICAgLy8gY29ubmVjdGVkIGF0IGFsbC5cclxuXHJcbiAgICAgICAgICBpZiAodGFyZ2V0UG9seS5maXJzdExpbmsgPT0gTmF2TWVzaC5EVF9OVUxMX0xJTkspIGNvbnRpbnVlO1xyXG4gICAgICAgICAgdmFyIGV4dCA9IFt0YXJnZXRDb24ucmFkLCB0YXJnZXQuZGF0YS5oZWFkZXIud2Fsa2FibGVDbGltYiwgdGFyZ2V0Q29uLnJhZF07IC8vIEZpbmQgcG9seWdvbiB0byBjb25uZWN0IHRvLlxyXG5cclxuICAgICAgICAgIHZhciBwID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgcFswXSA9IHRhcmdldENvbi5wb3NbM107XHJcbiAgICAgICAgICBwWzFdID0gdGFyZ2V0Q29uLnBvc1s0XTtcclxuICAgICAgICAgIHBbMl0gPSB0YXJnZXRDb24ucG9zWzVdO1xyXG4gICAgICAgICAgdmFyIG5lYXJlc3QgPSB0aGlzLmZpbmROZWFyZXN0UG9seUluVGlsZSh0aWxlLCBwLCBleHQpO1xyXG4gICAgICAgICAgdmFyIHJlZiA9IG5lYXJlc3QuZ2V0TmVhcmVzdFJlZigpO1xyXG4gICAgICAgICAgaWYgKHJlZiA9PSAwKSBjb250aW51ZTtcclxuICAgICAgICAgIHZhciBuZWFyZXN0UHQgPSBuZWFyZXN0LmdldE5lYXJlc3RQb3MoKTsgLy8gZmluZE5lYXJlc3RQb2x5IG1heSByZXR1cm4gdG9vIG9wdGltaXN0aWMgcmVzdWx0cywgZnVydGhlciBjaGVja1xyXG4gICAgICAgICAgLy8gdG8gbWFrZSBzdXJlLlxyXG5cclxuICAgICAgICAgIGlmIChEZXRvdXJDb21tb24uc3FyKG5lYXJlc3RQdFswXSAtIHBbMF0pICsgRGV0b3VyQ29tbW9uLnNxcihuZWFyZXN0UHRbMl0gLSBwWzJdKSA+IERldG91ckNvbW1vbi5zcXIodGFyZ2V0Q29uLnJhZCkpIGNvbnRpbnVlOyAvLyBNYWtlIHN1cmUgdGhlIGxvY2F0aW9uIGlzIG9uIGN1cnJlbiBtZXNoLlxyXG5cclxuICAgICAgICAgIHRhcmdldC5kYXRhLnZlcnRzW3RhcmdldFBvbHkudmVydHNbMV0gKiAzXSA9IG5lYXJlc3RQdFswXTtcclxuICAgICAgICAgIHRhcmdldC5kYXRhLnZlcnRzW3RhcmdldFBvbHkudmVydHNbMV0gKiAzICsgMV0gPSBuZWFyZXN0UHRbMV07XHJcbiAgICAgICAgICB0YXJnZXQuZGF0YS52ZXJ0c1t0YXJnZXRQb2x5LnZlcnRzWzFdICogMyArIDJdID0gbmVhcmVzdFB0WzJdOyAvLyBsZXQgb2ZmLW1lc2ggY29ubmVjdGlvbiB0byB0YXJnZXQgcG9seS5cclxuXHJcbiAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5hbGxvY0xpbmsodGFyZ2V0KTtcclxuICAgICAgICAgIHZhciBsaW5rID0gdGFyZ2V0LmxpbmtzW2lkeF07XHJcbiAgICAgICAgICBsaW5rLnJlZiA9IHJlZjtcclxuICAgICAgICAgIGxpbmsuZWRnZSA9IDE7XHJcbiAgICAgICAgICBsaW5rLnNpZGUgPSBvcHBvc2l0ZVNpZGU7XHJcbiAgICAgICAgICBsaW5rLmJtaW4gPSBsaW5rLmJtYXggPSAwOyAvLyBBZGQgdG8gbGlua2VkIGxpc3QuXHJcblxyXG4gICAgICAgICAgbGluay5uZXh0ID0gdGFyZ2V0UG9seS5maXJzdExpbms7XHJcbiAgICAgICAgICB0YXJnZXRQb2x5LmZpcnN0TGluayA9IGlkeDsgLy8gbGV0IHRhcmdldCBwb2x5IHRvIG9mZi1tZXNoIGNvbm5lY3Rpb24uXHJcblxyXG4gICAgICAgICAgaWYgKCh0YXJnZXRDb24uZmxhZ3MgJiBOYXZNZXNoLkRUX09GRk1FU0hfQ09OX0JJRElSKSAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZhciB0aWR4ID0gdGhpcy5hbGxvY0xpbmsodGlsZSk7XHJcbiAgICAgICAgICAgIHZhciBsYW5kUG9seUlkeCA9IE5hdk1lc2guZGVjb2RlUG9seUlkUG9seShyZWYpO1xyXG4gICAgICAgICAgICB2YXIgbGFuZFBvbHkgPSB0aWxlLmRhdGEucG9seXNbbGFuZFBvbHlJZHhdO1xyXG4gICAgICAgICAgICBsaW5rID0gdGlsZS5saW5rc1t0aWR4XTtcclxuICAgICAgICAgICAgbGluay5yZWYgPSBOYXZNZXNoLm9yKHRoaXMuZ2V0UG9seVJlZkJhc2UodGFyZ2V0KSwgdGFyZ2V0Q29uLnBvbHkpO1xyXG4gICAgICAgICAgICBsaW5rLmVkZ2UgPSAweGZmO1xyXG4gICAgICAgICAgICBsaW5rLnNpZGUgPSBzaWRlID09IC0xID8gMHhmZiA6IHNpZGU7XHJcbiAgICAgICAgICAgIGxpbmsuYm1pbiA9IGxpbmsuYm1heCA9IDA7IC8vIEFkZCB0byBsaW5rZWQgbGlzdC5cclxuXHJcbiAgICAgICAgICAgIGxpbmsubmV4dCA9IGxhbmRQb2x5LmZpcnN0TGluaztcclxuICAgICAgICAgICAgbGFuZFBvbHkuZmlyc3RMaW5rID0gdGlkeDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZpbmRDb25uZWN0aW5nUG9seXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRDb25uZWN0aW5nUG9seXModmVydHMsIHZhLCB2YiwgdGlsZSwgc2lkZSwgbWF4Y29uKSB7XHJcbiAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuIFtudWxsLCBudWxsLCAwXTtcclxuICAgICAgICB2YXIgY29uID0gbmV3IEFycmF5KG1heGNvbik7XHJcbiAgICAgICAgdmFyIGNvbmFyZWEgPSBuZXcgQXJyYXkobWF4Y29uICogMik7XHJcbiAgICAgICAgdmFyIGFtaW4gPSBuZXcgQXJyYXkoMik7XHJcbiAgICAgICAgdmFyIGFtYXggPSBuZXcgQXJyYXkoMik7XHJcbiAgICAgICAgY2FsY1NsYWJFbmRQb2ludHModmVydHMsIHZhLCB2YiwgYW1pbiwgYW1heCwgc2lkZSk7XHJcbiAgICAgICAgYXBvcyA9IGdldFNsYWJDb29yZCh2ZXJ0cywgdmEsIHNpZGUpOyAvLyBSZW1vdmUgbGlua3MgcG9pbnRpbmcgdG8gJ3NpZGUnIGFuZCBjb21wYWN0IHRoZSBsaW5rcyBhcnJheS5cclxuXHJcbiAgICAgICAgdmFyIGJtaW4gPSBuZXcgQXJyYXkoMik7XHJcbiAgICAgICAgdmFyIGJtYXggPSBuZXcgQXJyYXkoMik7XHJcbiAgICAgICAgdmFyIG0gPSBOYXZNZXNoLm9yKE5hdk1lc2guRFRfRVhUX0xJTkssIHNpZGUpO1xyXG4gICAgICAgIHZhciBuID0gMDtcclxuICAgICAgICB2YXIgYmFzZSA9IHRoaXMuZ2V0UG9seVJlZkJhc2UodGlsZSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZS5kYXRhLmhlYWRlci5wb2x5Q291bnQ7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHBvbHkgPSB0aWxlLmRhdGEucG9seXNbaV07XHJcbiAgICAgICAgICB2YXIgbnYgPSBwb2x5LnZlcnRDb3VudDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG52OyArK2opIHtcclxuICAgICAgICAgICAgLy8gU2tpcCBlZGdlcyB3aGljaCBkbyBub3QgcG9Qb2x5IHRvIHRoZSByaWdodCBzaWRlLlxyXG4gICAgICAgICAgICBpZiAocG9seS5uZWlzW2pdICE9IG0pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgdmMgPSBwb2x5LnZlcnRzW2pdICogMztcclxuICAgICAgICAgICAgdmFyIHZkID0gcG9seS52ZXJ0c1soaiArIDEpICUgbnZdICogMztcclxuICAgICAgICAgICAgYnBvcyA9IGdldFNsYWJDb29yZCh0aWxlLmRhdGEudmVydHMsIHZjLCBzaWRlKTsgLy8gU2VnbWVudHMgYXJlIG5vdCBjbG9zZSBlbm91Z2guXHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoYXBvcyAtIGJwb3MpID4gMC4wMSkgY29udGludWU7IC8vIENoZWNrIGlmIHRoZSBzZWdtZW50cyB0b3VjaC5cclxuXHJcbiAgICAgICAgICAgIGNhbGNTbGFiRW5kUG9pbnRzKHRpbGUuZGF0YS52ZXJ0cywgdmMsIHZkLCBibWluLCBibWF4LCBzaWRlKTtcclxuICAgICAgICAgICAgaWYgKCFvdmVybGFwU2xhYnMoYW1pbiwgYW1heCwgYm1pbiwgYm1heCwgMC4wMSwgdGlsZS5kYXRhLmhlYWRlci53YWxrYWJsZUNsaW1iKSkgY29udGludWU7IC8vIEFkZCByZXR1cm4gdmFsdWUuXHJcblxyXG4gICAgICAgICAgICBpZiAobiA8IG1heGNvbikge1xyXG4gICAgICAgICAgICAgIGNvbmFyZWFbbiAqIDIgKyAwXSA9IE1hdGgubWF4KGFtaW5bMF0sIGJtaW5bMF0pO1xyXG4gICAgICAgICAgICAgIGNvbmFyZWFbbiAqIDIgKyAxXSA9IE1hdGgubWluKGFtYXhbMF0sIGJtYXhbMF0pO1xyXG4gICAgICAgICAgICAgIGNvbltuXSA9IE5hdk1lc2gub3IoYmFzZSwgaSk7XHJcbiAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBbY29uLCBjb25hcmVhLCBuXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwib3ZlcmxhcFNsYWJzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVybGFwU2xhYnMoYW1pbiwgYW1heCwgYm1pbiwgYm1heCwgcHgsIHB5KSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGhvcml6b250YWwgb3ZlcmxhcC5cclxuICAgICAgICAvLyBUaGUgc2VnbWVudCBpcyBzaHJ1bmtlbiBhIGxpdHRsZSBzbyB0aGF0IHNsYWJzIHdoaWNoIHRvdWNoXHJcbiAgICAgICAgLy8gYXQgZW5kIHBvaW50cyBhcmUgbm90IGNvbm5lY3RlZC5cclxuICAgICAgICBtaW54ID0gTWF0aC5tYXgoYW1pblswXSArIHB4LCBibWluWzBdICsgcHgpO1xyXG4gICAgICAgIG1heHggPSBNYXRoLm1pbihhbWF4WzBdIC0gcHgsIGJtYXhbMF0gLSBweCk7XHJcbiAgICAgICAgaWYgKG1pbnggPiBtYXh4KSByZXR1cm4gZmFsc2U7IC8vIENoZWNrIHZlcnRpY2FsIG92ZXJsYXAuXHJcblxyXG4gICAgICAgIGFkID0gKGFtYXhbMV0gLSBhbWluWzFdKSAvIChhbWF4WzBdIC0gYW1pblswXSk7XHJcbiAgICAgICAgYWsgPSBhbWluWzFdIC0gYWQgKiBhbWluWzBdO1xyXG4gICAgICAgIGJkID0gKGJtYXhbMV0gLSBibWluWzFdKSAvIChibWF4WzBdIC0gYm1pblswXSk7XHJcbiAgICAgICAgYmsgPSBibWluWzFdIC0gYmQgKiBibWluWzBdO1xyXG4gICAgICAgIGFtaW55ID0gYWQgKiBtaW54ICsgYWs7XHJcbiAgICAgICAgYW1heHkgPSBhZCAqIG1heHggKyBhaztcclxuICAgICAgICBibWlueSA9IGJkICogbWlueCArIGJrO1xyXG4gICAgICAgIGJtYXh5ID0gYmQgKiBtYXh4ICsgYms7XHJcbiAgICAgICAgZG1pbiA9IGJtaW55IC0gYW1pbnk7XHJcbiAgICAgICAgZG1heCA9IGJtYXh5IC0gYW1heHk7IC8vIENyb3NzaW5nIHNlZ21lbnRzIGFsd2F5cyBvdmVybGFwLlxyXG5cclxuICAgICAgICBpZiAoZG1pbiAqIGRtYXggPCAwKSByZXR1cm4gdHJ1ZTsgLy8gQ2hlY2sgZm9yIG92ZXJsYXAgYXQgZW5kcG9pbnRzLlxyXG5cclxuICAgICAgICB0aHIgPSBweSAqIDIgKiAocHkgKiAyKTtcclxuICAgICAgICBpZiAoZG1pbiAqIGRtaW4gPD0gdGhyIHx8IGRtYXggKiBkbWF4IDw9IHRocikgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCdWlsZHMgaW50ZXJuYWwgcG9seWdvbnMgbGlua3MgZm9yIGEgdGlsZS5cclxuICAgICAgICogXHJcbiAgICAgICAqIEBwYXJhbSB0aWxlXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImJhc2VPZmZNZXNoTGlua3NcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJhc2VPZmZNZXNoTGlua3ModGlsZSkge1xyXG4gICAgICAgIGlmICh0aWxlID09IG51bGwpIHJldHVybjtcclxuICAgICAgICB2YXIgYmFzZSA9IHRoaXMuZ2V0UG9seVJlZkJhc2UodGlsZSk7IC8vIEJhc2Ugb2ZmLW1lc2ggY29ubmVjdGlvbiBzdGFydCBwb2ludHMuXHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGlsZS5kYXRhLmhlYWRlci5vZmZNZXNoQ29uQ291bnQ7ICsraSkge1xyXG4gICAgICAgICAgdmFyIGNvbiA9IHRpbGUuZGF0YS5vZmZNZXNoQ29uc1tpXTtcclxuICAgICAgICAgIHZhciBwb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2Nvbi5wb2x5XTtcclxuICAgICAgICAgIHZhciBleHQgPSBbY29uLnJhZCwgdGlsZS5kYXRhLmhlYWRlci53YWxrYWJsZUNsaW1iLCBjb24ucmFkXTsgLy8gRmluZCBwb2x5Z29uIHRvIGNvbm5lY3QgdG8uXHJcblxyXG4gICAgICAgICAgdmFyIG5lYXJlc3RQb2x5ID0gdGhpcy5maW5kTmVhcmVzdFBvbHlJblRpbGUodGlsZSwgY29uLnBvcywgZXh0KTtcclxuICAgICAgICAgIHZhciByZWYgPSBuZWFyZXN0UG9seS5nZXROZWFyZXN0UmVmKCk7XHJcbiAgICAgICAgICBpZiAocmVmID09IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgdmFyIHAgPSBjb24ucG9zOyAvLyBGaXJzdCB2ZXJ0ZXhcclxuXHJcbiAgICAgICAgICB2YXIgbmVhcmVzdFB0ID0gbmVhcmVzdFBvbHkuZ2V0TmVhcmVzdFBvcygpOyAvLyBmaW5kTmVhcmVzdFBvbHkgbWF5IHJldHVybiB0b28gb3B0aW1pc3RpYyByZXN1bHRzLCBmdXJ0aGVyIGNoZWNrXHJcbiAgICAgICAgICAvLyB0byBtYWtlIHN1cmUuXHJcblxyXG4gICAgICAgICAgaWYgKERldG91ckNvbW1vbi5zcXIobmVhcmVzdFB0WzBdIC0gcFswXSkgKyBEZXRvdXJDb21tb24uc3FyKG5lYXJlc3RQdFsyXSAtIHBbMl0pID4gRGV0b3VyQ29tbW9uLnNxcihjb24ucmFkKSkgY29udGludWU7IC8vIE1ha2Ugc3VyZSB0aGUgbG9jYXRpb24gaXMgb24gY3VycmVudCBtZXNoLlxyXG5cclxuICAgICAgICAgIHRpbGUuZGF0YS52ZXJ0c1twb2x5LnZlcnRzWzBdICogM10gPSBuZWFyZXN0UHRbMF07XHJcbiAgICAgICAgICB0aWxlLmRhdGEudmVydHNbcG9seS52ZXJ0c1swXSAqIDMgKyAxXSA9IG5lYXJlc3RQdFsxXTtcclxuICAgICAgICAgIHRpbGUuZGF0YS52ZXJ0c1twb2x5LnZlcnRzWzBdICogMyArIDJdID0gbmVhcmVzdFB0WzJdOyAvLyBsZXQgb2ZmLW1lc2ggY29ubmVjdGlvbiB0byB0YXJnZXQgcG9seS5cclxuXHJcbiAgICAgICAgICB2YXIgaWR4ID0gdGhpcy5hbGxvY0xpbmsodGlsZSk7XHJcbiAgICAgICAgICB2YXIgbGluayA9IHRpbGUubGlua3NbaWR4XTtcclxuICAgICAgICAgIGxpbmsucmVmID0gcmVmO1xyXG4gICAgICAgICAgbGluay5lZGdlID0gMDtcclxuICAgICAgICAgIGxpbmsuc2lkZSA9IDB4ZmY7XHJcbiAgICAgICAgICBsaW5rLmJtaW4gPSBsaW5rLmJtYXggPSAwOyAvLyBBZGQgdG8gbGlua2VkIGxpc3QuXHJcblxyXG4gICAgICAgICAgbGluay5uZXh0ID0gcG9seS5maXJzdExpbms7XHJcbiAgICAgICAgICBwb2x5LmZpcnN0TGluayA9IGlkeDsgLy8gU3RhcnQgZW5kLXBvUG9seSBpcyBhbHdheXMgY29ubmVjdCBiYWNrIHRvIG9mZi1tZXNoIGNvbm5lY3Rpb24uXHJcblxyXG4gICAgICAgICAgdmFyIHRpZHggPSB0aGlzLmFsbG9jTGluayh0aWxlKTtcclxuICAgICAgICAgIHZhciBsYW5kUG9seUlkeCA9IE5hdk1lc2guZGVjb2RlUG9seUlkUG9seShyZWYpO1xyXG4gICAgICAgICAgdmFyIGxhbmRQb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2xhbmRQb2x5SWR4XTtcclxuICAgICAgICAgIGxpbmsgPSB0aWxlLmxpbmtzW3RpZHhdO1xyXG4gICAgICAgICAgbGluay5yZWYgPSBOYXZNZXNoLm9yKGJhc2UsIGNvbi5wb2x5KTtcclxuICAgICAgICAgIGxpbmsuZWRnZSA9IDB4ZmY7XHJcbiAgICAgICAgICBsaW5rLnNpZGUgPSAweGZmO1xyXG4gICAgICAgICAgbGluay5ibWluID0gbGluay5ibWF4ID0gMDsgLy8gQWRkIHRvIGxpbmtlZCBsaXN0LlxyXG5cclxuICAgICAgICAgIGxpbmsubmV4dCA9IGxhbmRQb2x5LmZpcnN0TGluaztcclxuICAgICAgICAgIGxhbmRQb2x5LmZpcnN0TGluayA9IHRpZHg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXR1cm5zIGNsb3Nlc3QgcG9Qb2x5IG9uIHBvbHlnb24uXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAcGFyYW0gcmVmXHJcbiAgICAgICAqIEBwYXJhbSBwb3NcclxuICAgICAgICogQHJldHVyblxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjbG9zZXN0UG9pbnRPblBvbHlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3Nlc3RQb2ludE9uUG9seShyZWYsIHBvcykge1xyXG4gICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShyZWYpO1xyXG4gICAgICAgIHZhciB0aWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgdmFyIHBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gT2ZmLW1lc2ggY29ubmVjdGlvbnMgZG9uJ3QgaGF2ZSBkZXRhaWwgcG9seWdvbnMuXHJcblxyXG4gICAgICAgIGlmIChwb2x5LmdldFR5cGUoKSA9PSBQb2x5LkRUX1BPTFlUWVBFX09GRk1FU0hfQ09OTkVDVElPTikge1xyXG4gICAgICAgICAgdmFyIHYwID0gcG9seS52ZXJ0c1swXSAqIDM7XHJcbiAgICAgICAgICB2YXIgdjEgPSBwb2x5LnZlcnRzWzFdICogMztcclxuICAgICAgICAgIHZhciBkMCA9IERldG91ckNvbW1vbi52RGlzdDMocG9zLCB0aWxlLmRhdGEudmVydHMsIHYwKTtcclxuICAgICAgICAgIHZhciBkMSA9IERldG91ckNvbW1vbi52RGlzdDMocG9zLCB0aWxlLmRhdGEudmVydHMsIHYxKTtcclxuICAgICAgICAgIHZhciB1ID0gZDAgLyAoZDAgKyBkMSk7XHJcblxyXG4gICAgICAgICAgdmFyIF9jbG9zZXN0ID0gRGV0b3VyQ29tbW9uLnZMZXJwNCh0aWxlLmRhdGEudmVydHMsIHYwLCB2MSwgdSk7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQoZmFsc2UsIF9jbG9zZXN0KTtcclxuICAgICAgICB9IC8vIENsYW1wIHBvUG9seSB0byBiZSBpbnNpZGUgdGhlIHBvbHlnb24uXHJcblxyXG5cclxuICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX21heFZlcnRQZXJQb2x5ICogMyk7XHJcbiAgICAgICAgdmFyIGVkZ2VkID0gbmV3IEFycmF5KHRoaXMubV9tYXhWZXJ0UGVyUG9seSk7XHJcbiAgICAgICAgdmFyIGVkZ2V0ID0gbmV3IEFycmF5KHRoaXMubV9tYXhWZXJ0UGVyUG9seSk7XHJcbiAgICAgICAgdmFyIG52ID0gcG9seS52ZXJ0Q291bnQ7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnY7ICsraSkge1xyXG4gICAgICAgICAgYXJyYXljb3B5KHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tpXSAqIDMsIHZlcnRzLCBpICogMywgMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcG9zT3ZlclBvbHkgPSBmYWxzZTtcclxuICAgICAgICB2YXIgY2xvc2VzdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoY2xvc2VzdCwgcG9zKTtcclxuXHJcbiAgICAgICAgaWYgKCFEZXRvdXJDb21tb24uZGlzdGFuY2VQdFBvbHlFZGdlc1Nxcihwb3MsIHZlcnRzLCBudiwgZWRnZWQsIGVkZ2V0KSkge1xyXG4gICAgICAgICAgLy8gUG9Qb2x5IGlzIG91dHNpZGUgdGhlIHBvbHlnb24sIGR0Q2xhbXAgdG8gbmVhcmVzdCBlZGdlLlxyXG4gICAgICAgICAgdmFyIF9kbWluID0gZWRnZWRbMF07XHJcbiAgICAgICAgICB2YXIgaW1pbiA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IG52OyArK19pKSB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlZFtfaV0gPCBfZG1pbikge1xyXG4gICAgICAgICAgICAgIF9kbWluID0gZWRnZWRbX2ldO1xyXG4gICAgICAgICAgICAgIGltaW4gPSBfaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciB2YSA9IGltaW4gKiAzO1xyXG4gICAgICAgICAgdmFyIHZiID0gKGltaW4gKyAxKSAlIG52ICogMztcclxuICAgICAgICAgIGNsb3Nlc3QgPSBEZXRvdXJDb21tb24udkxlcnA0KHZlcnRzLCB2YSwgdmIsIGVkZ2V0W2ltaW5dKTtcclxuICAgICAgICAgIHBvc092ZXJQb2x5ID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHBvc092ZXJQb2x5ID0gdHJ1ZTtcclxuICAgICAgICB9IC8vIEZpbmQgaGVpZ2h0IGF0IHRoZSBsb2NhdGlvbi5cclxuXHJcblxyXG4gICAgICAgIHZhciBpcCA9IHBvbHkuaW5kZXg7XHJcblxyXG4gICAgICAgIGlmICh0aWxlLmRhdGEuZGV0YWlsTWVzaGVzICE9IG51bGwgJiYgdGlsZS5kYXRhLmRldGFpbE1lc2hlcy5sZW5ndGggPiBpcCkge1xyXG4gICAgICAgICAgdmFyIHBkID0gdGlsZS5kYXRhLmRldGFpbE1lc2hlc1tpcF07XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwZC50cmlDb3VudDsgKytqKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gKHBkLnRyaUJhc2UgKyBqKSAqIDQ7XHJcbiAgICAgICAgICAgIHZhciB2ID0gW107IC8vV2FzIFszXVtdXHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDM7ICsraykge1xyXG4gICAgICAgICAgICAgIGlmICh0aWxlLmRhdGEuZGV0YWlsVHJpc1t0ICsga10gPCBwb2x5LnZlcnRDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcG9seS52ZXJ0c1t0aWxlLmRhdGEuZGV0YWlsVHJpc1t0ICsga11dICogMztcclxuICAgICAgICAgICAgICAgIHZba10gPSBbdGlsZS5kYXRhLnZlcnRzW2luZGV4XSwgdGlsZS5kYXRhLnZlcnRzW2luZGV4ICsgMV0sIHRpbGUuZGF0YS52ZXJ0c1tpbmRleCArIDJdXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9pbmRleCA9IChwZC52ZXJ0QmFzZSArICh0aWxlLmRhdGEuZGV0YWlsVHJpc1t0ICsga10gLSBwb2x5LnZlcnRDb3VudCkpICogMztcclxuXHJcbiAgICAgICAgICAgICAgICB2W2tdID0gW3RpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXhdLCB0aWxlLmRhdGEuZGV0YWlsVmVydHNbX2luZGV4ICsgMV0sIHRpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXggKyAyXV07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaGVpZ2h0UmVzdWx0ID0gRGV0b3VyQ29tbW9uLmNsb3Nlc3RIZWlnaHRQb2ludFRyaWFuZ2xlKGNsb3Nlc3QsIHZbMF0sIHZbMV0sIHZbMl0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhlaWdodFJlc3VsdFswXSkge1xyXG4gICAgICAgICAgICAgIGNsb3Nlc3RbMV0gPSBoZWlnaHRSZXN1bHRbMV07XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgQ2xvc2VzdFBvaW50T25Qb2x5UmVzdWx0KHBvc092ZXJQb2x5LCBjbG9zZXN0KTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZE5lYXJlc3RQb2x5SW5UaWxlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTmVhcmVzdFBvbHlJblRpbGUodGlsZSwgY2VudGVyLCBleHRlbnRzKSB7XHJcbiAgICAgICAgdmFyIG5lYXJlc3RQdCA9IG51bGw7XHJcbiAgICAgICAgdmFyIGJtaW4gPSBEZXRvdXJDb21tb24udlN1YihjZW50ZXIsIGV4dGVudHMpO1xyXG4gICAgICAgIHZhciBibWF4ID0gRGV0b3VyQ29tbW9uLnZBZGQoY2VudGVyLCBleHRlbnRzKTsgLy8gR2V0IG5lYXJieSBwb2x5Z29ucyBmcm9tIHByb3hpbWl0eSBncmlkLlxyXG5cclxuICAgICAgICB2YXIgcG9seXMgPSB0aGlzLnF1ZXJ5UG9seWdvbnNJblRpbGUodGlsZSwgYm1pbiwgYm1heCk7IC8vIEZpbmQgbmVhcmVzdCBwb2x5Z29uIGFtb25nc3QgdGhlIG5lYXJieSBwb2x5Z29ucy5cclxuXHJcbiAgICAgICAgdmFyIG5lYXJlc3QgPSAwO1xyXG4gICAgICAgIHZhciBuZWFyZXN0RGlzdGFuY2VTcXIgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHlzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgcmVmID0gcG9seXNbaV07XHJcbiAgICAgICAgICB2YXIgZCA9IDA7XHJcbiAgICAgICAgICB2YXIgY3BwID0gdGhpcy5jbG9zZXN0UG9pbnRPblBvbHkocmVmLCBjZW50ZXIpO1xyXG4gICAgICAgICAgdmFyIHBvc092ZXJQb2x5ID0gY3BwLmlzUG9zT3ZlclBvbHkoKTtcclxuICAgICAgICAgIHZhciBjbG9zZXN0UHRQb2x5ID0gY3BwLmdldENsb3Nlc3QoKTsgLy8gSWYgYSBwb1BvbHkgaXMgZGlyZWN0bHkgb3ZlciBhIHBvbHlnb24gYW5kIGNsb3NlciB0aGFuXHJcbiAgICAgICAgICAvLyBjbGltYiBoZWlnaHQsIGZhdm9yIHRoYXQgaW5zdGVhZCBvZiBzdHJhaWdodCBsaW5lIG5lYXJlc3QgcG9pbnQuXHJcblxyXG4gICAgICAgICAgdmFyIGRpZmYgPSBEZXRvdXJDb21tb24udlN1YihjZW50ZXIsIGNsb3Nlc3RQdFBvbHkpO1xyXG5cclxuICAgICAgICAgIGlmIChwb3NPdmVyUG9seSkge1xyXG4gICAgICAgICAgICBkID0gTWF0aC5hYnMoZGlmZlsxXSkgLSB0aWxlLmRhdGEuaGVhZGVyLndhbGthYmxlQ2xpbWI7XHJcbiAgICAgICAgICAgIGQgPSBkID4gMCA/IGQgKiBkIDogMDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGQgPSBEZXRvdXJDb21tb24udkxlblNxcihkaWZmKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoZCA8IG5lYXJlc3REaXN0YW5jZVNxcikge1xyXG4gICAgICAgICAgICBuZWFyZXN0UHQgPSBjbG9zZXN0UHRQb2x5O1xyXG4gICAgICAgICAgICBuZWFyZXN0RGlzdGFuY2VTcXIgPSBkO1xyXG4gICAgICAgICAgICBuZWFyZXN0ID0gcmVmO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kTmVhcmVzdFBvbHlSZXN1bHQobmVhcmVzdCwgbmVhcmVzdFB0KTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VGlsZUF0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaWxlQXQoeCwgeSwgbGF5ZXIpIHtcclxuICAgICAgICAvLyBGaW5kIHRpbGUgYmFzZWQgb24gaGFzaC5cclxuICAgICAgICB2YXIgaCA9IE5hdk1lc2guY29tcHV0ZVRpbGVIYXNoKHgsIHksIHRoaXMubV90aWxlTHV0TWFzayk7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLm1fcG9zTG9va3VwW2hdO1xyXG5cclxuICAgICAgICB3aGlsZSAodGlsZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICBpZiAodGlsZS5kYXRhLmhlYWRlciAhPSBudWxsICYmIHRpbGUuZGF0YS5oZWFkZXIueCA9PSB4ICYmIHRpbGUuZGF0YS5oZWFkZXIueSA9PSB5ICYmIHRpbGUuZGF0YS5oZWFkZXIubGF5ZXIgPT0gbGF5ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRpbGU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGlsZSA9IHRpbGUubmV4dDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXROZWlnaGJvdXJUaWxlc0F0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROZWlnaGJvdXJUaWxlc0F0KHgsIHksIHNpZGUpIHtcclxuICAgICAgICB2YXIgbnggPSB4LFxyXG4gICAgICAgICAgICBueSA9IHk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoc2lkZSkge1xyXG4gICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICBueCsrO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgIG54Kys7XHJcbiAgICAgICAgICAgIG55Kys7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgbnkrKztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICBueC0tO1xyXG4gICAgICAgICAgICBueSsrO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgIG54LS07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgbngtLTtcclxuICAgICAgICAgICAgbnktLTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICBueS0tO1xyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgIG54Kys7XHJcbiAgICAgICAgICAgIG55LS07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZXNBdChueCwgbnkpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRUaWxlc0F0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaWxlc0F0KHgsIHkpIHtcclxuICAgICAgICB2YXIgdGlsZXMgPSBbXTsgLy8gRmluZCB0aWxlIGJhc2VkIG9uIGhhc2guXHJcblxyXG4gICAgICAgIHZhciBoID0gTmF2TWVzaC5jb21wdXRlVGlsZUhhc2goeCwgeSwgdGhpcy5tX3RpbGVMdXRNYXNrKTtcclxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMubV9wb3NMb29rdXBbaF07XHJcblxyXG4gICAgICAgIHdoaWxlICh0aWxlICE9IG51bGwpIHtcclxuICAgICAgICAgIGlmICh0aWxlLmRhdGEuaGVhZGVyICE9IG51bGwgJiYgdGlsZS5kYXRhLmhlYWRlci54ID09IHggJiYgdGlsZS5kYXRhLmhlYWRlci55ID09IHkpIHtcclxuICAgICAgICAgICAgdGlsZXMucHVzaCh0aWxlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0aWxlID0gdGlsZS5uZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRpbGVzO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRUaWxlUmVmQXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbGVSZWZBdCh4LCB5LCBsYXllcikge1xyXG4gICAgICAgIC8vIEZpbmQgdGlsZSBiYXNlZCBvbiBoYXNoLlxyXG4gICAgICAgIHZhciBoID0gTmF2TWVzaC5jb21wdXRlVGlsZUhhc2goeCwgeSwgdGhpcy5tX3RpbGVMdXRNYXNrKTtcclxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMubV9wb3NMb29rdXBbaF07XHJcblxyXG4gICAgICAgIHdoaWxlICh0aWxlICE9IG51bGwpIHtcclxuICAgICAgICAgIGlmICh0aWxlLmRhdGEuaGVhZGVyICE9IG51bGwgJiYgdGlsZS5kYXRhLmhlYWRlci54ID09IHggJiYgdGlsZS5kYXRhLmhlYWRlci55ID09IHkgJiYgdGlsZS5kYXRhLmhlYWRlci5sYXllciA9PSBsYXllcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmVmKHRpbGUpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRpbGUgPSB0aWxlLm5leHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VGlsZUJ5UmVmXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaWxlQnlSZWYocmVmKSB7XHJcbiAgICAgICAgaWYgKHJlZiA9PSAwKSByZXR1cm4gbnVsbDtcclxuICAgICAgICB2YXIgdGlsZUluZGV4ID0gZGVjb2RlUG9seUlkVGlsZShyZWYpO1xyXG4gICAgICAgIHZhciB0aWxlU2FsdCA9IGRlY29kZVBvbHlJZFNhbHQocmVmKTtcclxuICAgICAgICBpZiAodGlsZUluZGV4ID49IHRoaXMubV9tYXhUaWxlcykgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLm1fdGlsZXNbdGlsZUluZGV4XTtcclxuICAgICAgICBpZiAodGlsZS5zYWx0ICE9IHRpbGVTYWx0KSByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGlsZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VGlsZVJlZlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZVJlZih0aWxlKSB7XHJcbiAgICAgICAgaWYgKHRpbGUgPT0gbnVsbCkgcmV0dXJuIDA7XHJcbiAgICAgICAgdmFyIGl0ID0gdGlsZS5pbmRleDtcclxuICAgICAgICByZXR1cm4gTmF2TWVzaC5lbmNvZGVQb2x5SWQodGlsZS5zYWx0LCBpdCwgMCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE9mZk1lc2hDb25uZWN0aW9uUG9seUVuZFBvaW50c1wiLFxyXG4gICAgICAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIE9mZi1tZXNoIGNvbm5lY3Rpb25zIGFyZSBzdG9yZWQgaW4gdGhlIG5hdmlnYXRpb24gbWVzaCBhcyBzcGVjaWFsXHJcbiAgICAgIC8vLyAyLXZlcnRleFxyXG4gICAgICAvLy8gcG9seWdvbnMgd2l0aCBhIHNpbmdsZSBlZGdlLiBBdCBsZWFzdCBvbmUgb2YgdGhlIHZlcnRpY2VzIGlzIGV4cGVjdGVkIHRvXHJcbiAgICAgIC8vLyBiZVxyXG4gICAgICAvLy8gaW5zaWRlIGEgbm9ybWFsIHBvbHlnb24uIFNvIGFuIG9mZi1tZXNoIGNvbm5lY3Rpb24gaXMgXCJlbnRlcmVkXCIgZnJvbSBhXHJcbiAgICAgIC8vLyBub3JtYWwgcG9seWdvbiBhdCBvbmUgb2YgaXRzIGVuZHBvaW50cy4gVGhpcyBpcyB0aGUgcG9seWdvbiBpZGVudGlmaWVkXHJcbiAgICAgIC8vLyBieVxyXG4gICAgICAvLy8gdGhlIHByZXZSZWYgcGFyYW1ldGVyLlxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T2ZmTWVzaENvbm5lY3Rpb25Qb2x5RW5kUG9pbnRzKHByZXZSZWYsIHBvbHlSZWYpIHtcclxuICAgICAgICBpZiAocG9seVJlZiA9PSAwKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwicG9seVJlZiA9IDBcIik7IC8vIEdldCBjdXJyZW50IHBvbHlnb25cclxuXHJcbiAgICAgICAgdmFyIHNhbHRpdGlwID0gTmF2TWVzaC5kZWNvZGVQb2x5SWQocG9seVJlZik7XHJcbiAgICAgICAgdmFyIHNhbHQgPSBzYWx0aXRpcFswXTtcclxuICAgICAgICB2YXIgaXQgPSBzYWx0aXRpcFsxXTtcclxuICAgICAgICB2YXIgaXAgPSBzYWx0aXRpcFsyXTtcclxuXHJcbiAgICAgICAgaWYgKGl0ID49IHRoaXMubV9tYXhUaWxlcykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgdGlsZSBJRCA+IG1heCB0aWxlc1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1fdGlsZXNbaXRdLnNhbHQgIT0gc2FsdCB8fCB0aGlzLm1fdGlsZXNbaXRdLmRhdGEuaGVhZGVyID09IG51bGwpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIHNhbHQgb3IgbWlzc2luZyB0aWxlIGhlYWRlclwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5tX3RpbGVzW2l0XTtcclxuXHJcbiAgICAgICAgaWYgKGlwID49IHRpbGUuZGF0YS5oZWFkZXIucG9seUNvdW50KSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBwb2x5IElEID4gcG9seSBjb3VudFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwb2x5ID0gdGlsZS5kYXRhLnBvbHlzW2lwXTsgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGN1cnJlbnQgcG9seSBpcyBpbmRlZWQgb2ZmLW1lc2ggbGluay5cclxuXHJcbiAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpICE9IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBwb2x5IHR5cGVcIik7IC8vIEZpZ3VyZSBvdXQgd2hpY2ggd2F5IHRvIGhhbmQgb3V0IHRoZSB2ZXJ0aWNlcy5cclxuXHJcbiAgICAgICAgdmFyIGlkeDAgPSAwLFxyXG4gICAgICAgICAgICBpZHgxID0gMTsgLy8gRmluZCBsaW5rIHRoYXQgcG9pbnRzIHRvIGZpcnN0IHZlcnRleC5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IHBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gdGlsZS5saW5rc1tpXS5uZXh0KSB7XHJcbiAgICAgICAgICBpZiAodGlsZS5saW5rc1tpXS5lZGdlID09IDApIHtcclxuICAgICAgICAgICAgaWYgKHRpbGUubGlua3NbaV0ucmVmICE9IHByZXZSZWYpIHtcclxuICAgICAgICAgICAgICBpZHgwID0gMTtcclxuICAgICAgICAgICAgICBpZHgxID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc3RhcnRQb3MgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgdmFyIGVuZFBvcyA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc3RhcnRQb3MsIHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tpZHgwXSAqIDMpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShlbmRQb3MsIHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tpZHgxXSAqIDMpO1xyXG4gICAgICAgIHJldHVybiBbc3RhcnRQb3MsIGVuZFBvc107XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE1heFZlcnRzUGVyUG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWF4VmVydHNQZXJQb2x5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fbWF4VmVydFBlclBvbHk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFRpbGVDb3VudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGlsZUNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fdGlsZUNvdW50O1xyXG4gICAgICB9XHJcbiAgICB9XSwgW3tcclxuICAgICAga2V5OiBcImdldE5hdk1lc2hQYXJhbXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5hdk1lc2hQYXJhbXMoZGF0YSkge1xyXG4gICAgICAgIHZhciBwYXJhbXMgPSBuZXcgTmF2TWVzaFBhcmFtcygpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShwYXJhbXMub3JpZywgZGF0YS5oZWFkZXIuYm1pbik7XHJcbiAgICAgICAgcGFyYW1zLnRpbGVXaWR0aCA9IGRhdGEuaGVhZGVyLmJtYXhbMF0gLSBkYXRhLmhlYWRlci5ibWluWzBdO1xyXG4gICAgICAgIHBhcmFtcy50aWxlSGVpZ2h0ID0gZGF0YS5oZWFkZXIuYm1heFsyXSAtIGRhdGEuaGVhZGVyLmJtaW5bMl07XHJcbiAgICAgICAgcGFyYW1zLm1heFRpbGVzID0gMTtcclxuICAgICAgICBwYXJhbXMubWF4UG9seXMgPSBkYXRhLmhlYWRlci5wb2x5Q291bnQ7XHJcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0U2xhYkNvb3JkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTbGFiQ29vcmQodmVydHMsIHZhLCBzaWRlKSB7XHJcbiAgICAgICAgaWYgKHNpZGUgPT0gMCB8fCBzaWRlID09IDQpIHJldHVybiB2ZXJ0c1t2YV07ZWxzZSBpZiAoc2lkZSA9PSAyIHx8IHNpZGUgPT0gNikgcmV0dXJuIHZlcnRzW3ZhICsgMl07XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNhbGNTbGFiRW5kUG9pbnRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjU2xhYkVuZFBvaW50cyh2ZXJ0cywgdmEsIHZiLCBibWluLCBibWF4LCBzaWRlKSB7XHJcbiAgICAgICAgaWYgKHNpZGUgPT0gMCB8fCBzaWRlID09IDQpIHtcclxuICAgICAgICAgIGlmICh2ZXJ0c1t2YSArIDJdIDwgdmVydHNbdmIgKyAyXSkge1xyXG4gICAgICAgICAgICBibWluWzBdID0gdmVydHNbdmEgKyAyXTtcclxuICAgICAgICAgICAgYm1pblsxXSA9IHZlcnRzW3ZhICsgMV07XHJcbiAgICAgICAgICAgIGJtYXhbMF0gPSB2ZXJ0c1t2YiArIDJdO1xyXG4gICAgICAgICAgICBibWF4WzFdID0gdmVydHNbdmIgKyAxXTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJtaW5bMF0gPSB2ZXJ0c1t2YiArIDJdO1xyXG4gICAgICAgICAgICBibWluWzFdID0gdmVydHNbdmIgKyAxXTtcclxuICAgICAgICAgICAgYm1heFswXSA9IHZlcnRzW3ZhICsgMl07XHJcbiAgICAgICAgICAgIGJtYXhbMV0gPSB2ZXJ0c1t2YSArIDFdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc2lkZSA9PSAyIHx8IHNpZGUgPT0gNikge1xyXG4gICAgICAgICAgaWYgKHZlcnRzW3ZhICsgMF0gPCB2ZXJ0c1t2YiArIDBdKSB7XHJcbiAgICAgICAgICAgIGJtaW5bMF0gPSB2ZXJ0c1t2YSArIDBdO1xyXG4gICAgICAgICAgICBibWluWzFdID0gdmVydHNbdmEgKyAxXTtcclxuICAgICAgICAgICAgYm1heFswXSA9IHZlcnRzW3ZiICsgMF07XHJcbiAgICAgICAgICAgIGJtYXhbMV0gPSB2ZXJ0c1t2YiArIDFdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYm1pblswXSA9IHZlcnRzW3ZiICsgMF07XHJcbiAgICAgICAgICAgIGJtaW5bMV0gPSB2ZXJ0c1t2YiArIDFdO1xyXG4gICAgICAgICAgICBibWF4WzBdID0gdmVydHNbdmEgKyAwXTtcclxuICAgICAgICAgICAgYm1heFsxXSA9IHZlcnRzW3ZhICsgMV07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjb21wdXRlVGlsZUhhc2hcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXB1dGVUaWxlSGFzaCh4LCB5LCBtYXNrKSB7XHJcbiAgICAgICAgdmFyIGgxID0gMHg4ZGE2YjM0MzsgLy8gTGFyZ2UgbXVsdGlwbGljYXRpdmUgY29uc3RhbnRzO1xyXG5cclxuICAgICAgICB2YXIgaDIgPSAweGQ4MTYzODQxOyAvLyBoZXJlIGFyYml0cmFyaWx5IGNob3NlbiBwcmltZXNcclxuXHJcbiAgICAgICAgdmFyIG4gPSBoMSAqIHggKyBoMiAqIHk7XHJcbiAgICAgICAgcmV0dXJuIG4gJiBtYXNrO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIE5hdk1lc2g7XHJcbiAgfSgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgXCJEVF9TQUxUX0JJVFNcIiwgMTYpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgXCJEVF9USUxFX0JJVFNcIiwgMjgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgXCJEVF9QT0xZX0JJVFNcIiwgMjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgXCJEVF9FWFRfTElOS1wiLCAweDgwMDApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgXCJEVF9OVUxMX0xJTktcIiwgLTEpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaCwgXCJEVF9PRkZNRVNIX0NPTl9CSURJUlwiLCAxKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2gsIFwiRFRfTUFYX0FSRUFTXCIsIDY0KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2gsIFwiRFRfUkFZX0NBU1RfTElNSVRfUFJPUE9SVElPTlNcIiwgNTAuMCk7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBfaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBfaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIFJlY2FzdFZlY3RvcnMkMSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWNhc3RWZWN0b3JzKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0VmVjdG9ycyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFJlY2FzdFZlY3RvcnMsIG51bGwsIFt7XHJcbiAgICAgIGtleTogXCJtaW5cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1pbihhLCBiLCBpKSB7XHJcbiAgICAgICAgYVswXSA9IE1hdGgubWluKGFbMF0sIGJbaSArIDBdKTtcclxuICAgICAgICBhWzFdID0gTWF0aC5taW4oYVsxXSwgYltpICsgMV0pO1xyXG4gICAgICAgIGFbMl0gPSBNYXRoLm1pbihhWzJdLCBiW2kgKyAyXSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1heFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWF4KGEsIGIsIGkpIHtcclxuICAgICAgICBhWzBdID0gTWF0aC5tYXgoYVswXSwgYltpICsgMF0pO1xyXG4gICAgICAgIGFbMV0gPSBNYXRoLm1heChhWzFdLCBiW2kgKyAxXSk7XHJcbiAgICAgICAgYVsyXSA9IE1hdGgubWF4KGFbMl0sIGJbaSArIDJdKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY29weTNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHkzKG91dCwgX2luLCBpKSB7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycy5jb3B5NChvdXQsIDAsIF9pbiwgaSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNvcHkyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb3B5MihvdXQsIF9pbikge1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMuY29weTQob3V0LCAwLCBfaW4sIDApO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjb3B5NFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29weTQob3V0LCBuLCBfaW4sIG0pIHtcclxuICAgICAgICBvdXRbbl0gPSBfaW5bbV07XHJcbiAgICAgICAgb3V0W24gKyAxXSA9IF9pblttICsgMV07XHJcbiAgICAgICAgb3V0W24gKyAyXSA9IF9pblttICsgMl07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKGUwLCBhLCB2ZXJ0cywgaSkge1xyXG4gICAgICAgIGUwWzBdID0gYVswXSArIHZlcnRzW2ldO1xyXG4gICAgICAgIGUwWzFdID0gYVsxXSArIHZlcnRzW2kgKyAxXTtcclxuICAgICAgICBlMFsyXSA9IGFbMl0gKyB2ZXJ0c1tpICsgMl07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInN1YkFcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN1YkEoZTAsIHZlcnRzLCBpLCBqKSB7XHJcbiAgICAgICAgZTBbMF0gPSB2ZXJ0c1tpXSAtIHZlcnRzW2pdO1xyXG4gICAgICAgIGUwWzFdID0gdmVydHNbaSArIDFdIC0gdmVydHNbaiArIDFdO1xyXG4gICAgICAgIGUwWzJdID0gdmVydHNbaSArIDJdIC0gdmVydHNbaiArIDJdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJzdWJCXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJCKGUwLCBpLCB2ZXJ0cywgaikge1xyXG4gICAgICAgIGUwWzBdID0gaVswXSAtIHZlcnRzW2pdO1xyXG4gICAgICAgIGUwWzFdID0gaVsxXSAtIHZlcnRzW2ogKyAxXTtcclxuICAgICAgICBlMFsyXSA9IGlbMl0gLSB2ZXJ0c1tqICsgMl07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNyb3NzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcm9zcyhkZXN0LCB2MSwgdjIpIHtcclxuICAgICAgICBkZXN0WzBdID0gdjFbMV0gKiB2MlsyXSAtIHYxWzJdICogdjJbMV07XHJcbiAgICAgICAgZGVzdFsxXSA9IHYxWzJdICogdjJbMF0gLSB2MVswXSAqIHYyWzJdO1xyXG4gICAgICAgIGRlc3RbMl0gPSB2MVswXSAqIHYyWzFdIC0gdjFbMV0gKiB2MlswXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibm9ybWFsaXplXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBub3JtYWxpemUodikge1xyXG4gICAgICAgIHZhciBkID0gMS4wIC8gTWF0aC5zcXJ0KHZbMF0gKiB2WzBdICsgdlsxXSAqIHZbMV0gKyB2WzJdICogdlsyXSk7XHJcbiAgICAgICAgdlswXSAqPSBkO1xyXG4gICAgICAgIHZbMV0gKj0gZDtcclxuICAgICAgICB2WzJdICo9IGQ7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gUmVjYXN0VmVjdG9ycztcclxuICB9KCk7XHJcblxyXG4gIHZhciBfdGVtcCwgX3RlbXAyO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuICB2YXIgQ2h1bmt5VHJpTWVzaCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBfY3JlYXRlQ2xhc3MoQ2h1bmt5VHJpTWVzaCwgW3tcclxuICAgICAga2V5OiBcImNhbGNFeHRlbmRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjRXh0ZW5kcyhpdGVtcywgaW1pbiwgaW1heCwgYm1pbiwgYm1heCkge1xyXG4gICAgICAgIGJtaW5bMF0gPSBpdGVtc1tpbWluXS5ibWluWzBdO1xyXG4gICAgICAgIGJtaW5bMV0gPSBpdGVtc1tpbWluXS5ibWluWzFdO1xyXG4gICAgICAgIGJtYXhbMF0gPSBpdGVtc1tpbWluXS5ibWF4WzBdO1xyXG4gICAgICAgIGJtYXhbMV0gPSBpdGVtc1tpbWluXS5ibWF4WzFdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gaW1pbiArIDE7IGkgPCBpbWF4OyArK2kpIHtcclxuICAgICAgICAgIHZhciBpdCA9IGl0ZW1zW2ldO1xyXG5cclxuICAgICAgICAgIGlmIChpdC5ibWluWzBdIDwgYm1pblswXSkge1xyXG4gICAgICAgICAgICBibWluWzBdID0gaXQuYm1pblswXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaXQuYm1pblsxXSA8IGJtaW5bMV0pIHtcclxuICAgICAgICAgICAgYm1pblsxXSA9IGl0LmJtaW5bMV07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGl0LmJtYXhbMF0gPiBibWF4WzBdKSB7XHJcbiAgICAgICAgICAgIGJtYXhbMF0gPSBpdC5ibWF4WzBdO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChpdC5ibWF4WzFdID4gYm1heFsxXSkge1xyXG4gICAgICAgICAgICBibWF4WzFdID0gaXQuYm1heFsxXTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImxvbmdlc3RBeGlzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb25nZXN0QXhpcyh4LCB5KSB7XHJcbiAgICAgICAgcmV0dXJuIHkgPiB4ID8gMSA6IDA7XHJcbiAgICAgIH0gLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ1MjQ1NzcyLzEwMDQ3OTIwXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicGFydGlhbFNvcnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnRpYWxTb3J0KGFyciwgc3RhcnQsIGVuZCwgc29ydEZ4KSB7XHJcbiAgICAgICAgdmFyIHByZVNvcnRlZCA9IGFyci5zbGljZSgwLCBzdGFydCksXHJcbiAgICAgICAgICAgIHBvc3RTb3J0ZWQgPSBhcnIuc2xpY2UoZW5kKTtcclxuICAgICAgICB2YXIgc29ydGVkID0gYXJyLnNsaWNlKHN0YXJ0LCBlbmQpLnNvcnQoc29ydEZ4KTtcclxuICAgICAgICBhcnIubGVuZ3RoID0gMDtcclxuICAgICAgICBhcnIucHVzaC5hcHBseShhcnIsIHByZVNvcnRlZC5jb25jYXQoc29ydGVkKS5jb25jYXQocG9zdFNvcnRlZCkpO1xyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInN1YmRpdmlkZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3ViZGl2aWRlKGl0ZW1zLCBpbWluLCBpbWF4LCB0cmlzUGVyQ2h1bmssIG5vZGVzLCBpblRyaXMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICB2YXIgaW51bSA9IGltYXggLSBpbWluO1xyXG4gICAgICAgIHZhciBub2RlID0gbmV3IENodW5reVRyaU1lc2guQ2h1bmt5VHJpTWVzaE5vZGUoKTtcclxuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG5cclxuICAgICAgICBpZiAoaW51bSA8PSB0cmlzUGVyQ2h1bmspIHtcclxuICAgICAgICAgIC8vIExlYWZcclxuICAgICAgICAgIHRoaXMuY2FsY0V4dGVuZHMoaXRlbXMsIGltaW4sIGltYXgsIG5vZGUuYm1pbiwgbm9kZS5ibWF4KTsgLy8gQ29weSB0cmlhbmdsZXMuXHJcblxyXG4gICAgICAgICAgbm9kZS5pID0gbm9kZXMubGVuZ3RoO1xyXG4gICAgICAgICAgbm9kZS50cmlzID0gbmV3IEFycmF5KGludW0gKiAzKTtcclxuICAgICAgICAgIHZhciBkc3QgPSAwO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGkgPSBpbWluOyBpIDwgaW1heDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBzcmMgPSBpdGVtc1tpXS5pICogMztcclxuICAgICAgICAgICAgbm9kZS50cmlzW2RzdCsrXSA9IGluVHJpc1tzcmNdO1xyXG4gICAgICAgICAgICBub2RlLnRyaXNbZHN0KytdID0gaW5UcmlzW3NyYyArIDFdO1xyXG4gICAgICAgICAgICBub2RlLnRyaXNbZHN0KytdID0gaW5UcmlzW3NyYyArIDJdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBTcGxpdFxyXG4gICAgICAgICAgdGhpcy5jYWxjRXh0ZW5kcyhpdGVtcywgaW1pbiwgaW1heCwgbm9kZS5ibWluLCBub2RlLmJtYXgpO1xyXG4gICAgICAgICAgdmFyIGF4aXMgPSB0aGlzLmxvbmdlc3RBeGlzKG5vZGUuYm1heFswXSAtIG5vZGUuYm1pblswXSwgbm9kZS5ibWF4WzFdIC0gbm9kZS5ibWluWzFdKTtcclxuXHJcbiAgICAgICAgICBpZiAoYXhpcyA9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vQXJyYXlzLnNvcnQoaXRlbXMsIGltaW4sIGltYXgsIG5ldyBDb21wYXJlSXRlbVgoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucGFydGlhbFNvcnQoaXRlbXMsIGltaW4sIGltYXgsIGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLkNvbXBhcmVJdGVtWChhLCBiKTtcclxuICAgICAgICAgICAgfSk7IC8vIGxldCBzdWJhcnJheSA9IGl0ZW1zLnNsaWNlKGltaW4sIGltYXgpO1xyXG4gICAgICAgICAgICAvLyBzdWJhcnJheS5zb3J0KChhLCBiKSA9PiAodGhpcy5Db21wYXJlSXRlbVgoYSwgYikpKVxyXG4gICAgICAgICAgICAvLyAvLyBsZXQgbmV3aXRlbXMgPSBpdGVtcy5zbGljZSgwLCBpbWluKTtcclxuICAgICAgICAgICAgLy8gLy8gbmV3aXRlbXMucHVzaCguLi5zdWJhcnJheSlcclxuICAgICAgICAgICAgLy8gLy8gbmV3aXRlbXMucHVzaCguLi5pdGVtcy5zbGljZShpbWF4LCBpdGVtcy5sZW5ndGgpKTtcclxuICAgICAgICAgICAgLy8gZm9yIChsZXQgaSA9IGltaW47IGkgPCBpbWF4OyBpKyspIHtcclxuICAgICAgICAgICAgLy8gICAgIGl0ZW1zW2ldLmJtaW5bMF0gPSBzdWJhcnJheVtpXS5ibWluWzBdO1xyXG4gICAgICAgICAgICAvLyAgICAgaXRlbXNbaV0uYm1pblsxXSA9IHN1YmFycmF5W2ldLmJtaW5bMV07XHJcbiAgICAgICAgICAgIC8vICAgICBpdGVtc1tpXS5ibWF4WzBdID0gc3ViYXJyYXlbaV0uYm1heFswXTtcclxuICAgICAgICAgICAgLy8gICAgIGl0ZW1zW2ldLmJtYXhbMV0gPSBzdWJhcnJheVtpXS5ibWF4WzFdO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vaXRlbXMgPSBuZXdpdGVtcztcclxuICAgICAgICAgICAgLy8gU29ydCBhUG9seSB4LWF4aXNcclxuICAgICAgICAgIH0gZWxzZSBpZiAoYXhpcyA9PSAxKSB7XHJcbiAgICAgICAgICAgIC8vIEFycmF5cy5zb3J0KGl0ZW1zLCBpbWluLCBpbWF4LCBuZXcgQ29tcGFyZUl0ZW1ZKCkpO1xyXG4gICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHktYXhpc1xyXG4gICAgICAgICAgICB0aGlzLnBhcnRpYWxTb3J0KGl0ZW1zLCBpbWluLCBpbWF4LCBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICAgIHJldHVybiBfdGhpcy5Db21wYXJlSXRlbVkoYSwgYik7XHJcbiAgICAgICAgICAgIH0pOyAvLyBsZXQgc3ViYXJyYXkgPSBpdGVtcy5zbGljZShpbWluLCBpbWF4KTtcclxuICAgICAgICAgICAgLy8gc3ViYXJyYXkuc29ydCgoYSwgYikgPT4gKHRoaXMuQ29tcGFyZUl0ZW1ZKGEsIGIpKSlcclxuICAgICAgICAgICAgLy8gLy8gbGV0IG5ld2l0ZW1zID0gaXRlbXMuc2xpY2UoMCwgaW1pbik7XHJcbiAgICAgICAgICAgIC8vIC8vIG5ld2l0ZW1zLnB1c2goLi4uc3ViYXJyYXkpXHJcbiAgICAgICAgICAgIC8vIC8vIG5ld2l0ZW1zLnB1c2goLi4uaXRlbXMuc2xpY2UoaW1heCwgaXRlbXMubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIC8vIGZvciAobGV0IGkgPSBpbWluOyBpIDwgaW1heDsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpdGVtc1tpXS5ibWluWzBdID0gc3ViYXJyYXlbaV0uYm1pblswXTtcclxuICAgICAgICAgICAgLy8gICAgIGl0ZW1zW2ldLmJtaW5bMV0gPSBzdWJhcnJheVtpXS5ibWluWzFdO1xyXG4gICAgICAgICAgICAvLyAgICAgaXRlbXNbaV0uYm1heFswXSA9IHN1YmFycmF5W2ldLmJtYXhbMF07XHJcbiAgICAgICAgICAgIC8vICAgICBpdGVtc1tpXS5ibWF4WzFdID0gc3ViYXJyYXlbaV0uYm1heFsxXTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvL2l0ZW1zID0gbmV3aXRlbXM7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGlzcGxpdCA9IE1hdGguZmxvb3IoaW1pbiArIE1hdGguZmxvb3IoaW51bSAvIDIpKTtcclxuICAgICAgICAgIHZhciBzID0gXCJcIjtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgaXRlbXMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNbX2ldO1xyXG4gICAgICAgICAgICBzICs9IFwiXCIgKyBfaSArIFwiIFwiICsgaXRlbS5ibWluWzBdICsgXCIgXCIgKyBpdGVtLmJtaW5bMV0gKyBcIlxcblwiO1xyXG4gICAgICAgICAgICBzICs9IFwiXCIgKyBfaSArIFwiIFwiICsgaXRlbS5ibWF4WzBdICsgXCIgXCIgKyBpdGVtLmJtYXhbMV0gKyBcIlxcblwiO1xyXG4gICAgICAgICAgfSAvLyBmcy53cml0ZUZpbGVTeW5jKFwiaXRlbXNfXCIgKyBpbWluICsgXCJfXCIgKyBpbWF4ICsgXCIudHh0XCIsIHMpO1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkb25lXCIpXHJcbiAgICAgICAgICAvLyBMZWZ0XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkJlZm9yZSBsZWZ0IFwiICsgaW1pbiArIFwiIFwiICsgaXNwbGl0KTtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW1zWzI3OV0uYm1pblsxXSlcclxuXHJcblxyXG4gICAgICAgICAgdGhpcy5zdWJkaXZpZGUoaXRlbXMsIGltaW4sIGlzcGxpdCwgdHJpc1BlckNodW5rLCBub2RlcywgaW5UcmlzKTsgLy8gY29uc29sZS5sb2coXCJEb25lIGxlZnQgXCIgKyBpbWluICsgXCIgXCIgKyBpc3BsaXQpO1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXNbMjc5XS5ibWluWzFdKVxyXG4gICAgICAgICAgLy8gUmlnaHRcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQmVmb3JlIHJpZ2h0IFwiICsgaXNwbGl0ICsgXCIgXCIgKyBpbWF4KTtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW1zWzI3OV0uYm1pblsxXSlcclxuXHJcbiAgICAgICAgICB0aGlzLnN1YmRpdmlkZShpdGVtcywgaXNwbGl0LCBpbWF4LCB0cmlzUGVyQ2h1bmssIG5vZGVzLCBpblRyaXMpOyAvLyBjb25zb2xlLmxvZyhcIkRvbmUgcmlnaHQgXCIgKyBpc3BsaXQgKyBcIiBcIiArIGltYXgpO1xyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbXNbMjc5XS5ibWluWzFdKVxyXG4gICAgICAgICAgLy8gTmVnYXRpdmUgaW5kZXggbWVhbnMgZXNjYXBlLlxyXG5cclxuICAgICAgICAgIG5vZGUuaSA9IC1ub2Rlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgZnVuY3Rpb24gQ2h1bmt5VHJpTWVzaCh2ZXJ0cywgdHJpcywgbnRyaXMsIHRyaXNQZXJDaHVuaykge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2h1bmt5VHJpTWVzaCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJDb21wYXJlSXRlbVhcIiwgZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEuYm1pblswXSA8IGIuYm1pblswXSkge1xyXG4gICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGEuYm1pblswXSA+IGIuYm1pblswXSkge1xyXG4gICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJDb21wYXJlSXRlbVlcIiwgZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7XHJcbiAgICAgICAgaWYgKGEuYm1pblsxXSA8IGIuYm1pblsxXSkge1xyXG4gICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGEuYm1pblsxXSA+IGIuYm1pblsxXSkge1xyXG4gICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJub2Rlc1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJudHJpc1wiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VHJpc1BlckNodW5rXCIsIHZvaWQgMCk7XHJcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcclxuICAgICAgdGhpcy5udHJpcyA9IG50cmlzOyAvLyBCdWlsZCB0cmVlXHJcblxyXG4gICAgICB2YXIgaXRlbXMgPSBbXTsgLy9uZXcgQXJyYXkobnRyaXMpO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudHJpczsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHQgPSBpICogMztcclxuICAgICAgICB2YXIgaXQgPSBpdGVtc1tpXSA9IG5ldyBDaHVua3lUcmlNZXNoLkJvdW5kc0l0ZW0oKTtcclxuICAgICAgICBpdC5pID0gaTsgLy8gQ2FsYyB0cmlhbmdsZSBYWiBib3VuZHMuXHJcblxyXG4gICAgICAgIGl0LmJtaW5bMF0gPSBpdC5ibWF4WzBdID0gdmVydHNbdHJpc1t0XSAqIDMgKyAwXTtcclxuICAgICAgICBpdC5ibWluWzFdID0gaXQuYm1heFsxXSA9IHZlcnRzW3RyaXNbdF0gKiAzICsgMl07XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgMzsgKytqKSB7XHJcbiAgICAgICAgICB2YXIgdiA9IHRyaXNbdCArIGpdICogMztcclxuXHJcbiAgICAgICAgICBpZiAodmVydHNbdl0gPCBpdC5ibWluWzBdKSB7XHJcbiAgICAgICAgICAgIGl0LmJtaW5bMF0gPSB2ZXJ0c1t2XTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAodmVydHNbdiArIDJdIDwgaXQuYm1pblsxXSkge1xyXG4gICAgICAgICAgICBpdC5ibWluWzFdID0gdmVydHNbdiArIDJdO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICh2ZXJ0c1t2XSA+IGl0LmJtYXhbMF0pIHtcclxuICAgICAgICAgICAgaXQuYm1heFswXSA9IHZlcnRzW3ZdO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICh2ZXJ0c1t2ICsgMl0gPiBpdC5ibWF4WzFdKSB7XHJcbiAgICAgICAgICAgIGl0LmJtYXhbMV0gPSB2ZXJ0c1t2ICsgMl07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLnN1YmRpdmlkZShpdGVtcywgMCwgbnRyaXMsIHRyaXNQZXJDaHVuaywgdGhpcy5ub2RlcywgdHJpcyk7IC8vIENhbGMgbWF4IHRyaXMgcGVyIG5vZGUuXHJcblxyXG4gICAgICB0aGlzLm1heFRyaXNQZXJDaHVuayA9IDA7XHJcblxyXG4gICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5ub2RlcyksXHJcbiAgICAgICAgICBfc3RlcDtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgIHZhciBfbm9kZSA9IF9zdGVwLnZhbHVlO1xyXG4gICAgICAgICAgdmFyIGlzTGVhZiA9IF9ub2RlLmkgPj0gMDtcclxuXHJcbiAgICAgICAgICBpZiAoIWlzTGVhZikge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoX25vZGUudHJpcy5sZW5ndGggLyAzID4gdGhpcy5tYXhUcmlzUGVyQ2h1bmspIHtcclxuICAgICAgICAgICAgdGhpcy5tYXhUcmlzUGVyQ2h1bmsgPSBfbm9kZS50cmlzLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIF9pdGVyYXRvci5mKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoQ2h1bmt5VHJpTWVzaCwgW3tcclxuICAgICAga2V5OiBcImNoZWNrT3ZlcmxhcFJlY3RcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrT3ZlcmxhcFJlY3QoYW1pbiwgYW1heCwgYm1pbiwgYm1heCkge1xyXG4gICAgICAgIHZhciBvdmVybGFwID0gdHJ1ZTtcclxuICAgICAgICBvdmVybGFwID0gYW1pblswXSA+IGJtYXhbMF0gfHwgYW1heFswXSA8IGJtaW5bMF0gPyBmYWxzZSA6IG92ZXJsYXA7XHJcbiAgICAgICAgb3ZlcmxhcCA9IGFtaW5bMV0gPiBibWF4WzFdIHx8IGFtYXhbMV0gPCBibWluWzFdID8gZmFsc2UgOiBvdmVybGFwO1xyXG4gICAgICAgIHJldHVybiBvdmVybGFwO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRDaHVua3NPdmVybGFwcGluZ1JlY3RcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENodW5rc092ZXJsYXBwaW5nUmVjdChibWluLCBibWF4KSB7XHJcbiAgICAgICAgLy8gVHJhdmVyc2UgdHJlZVxyXG4gICAgICAgIGlkcyA9IFtdO1xyXG4gICAgICAgIHZhciBpID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGkgPCBub2Rlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIG5vZGUgPSBub2Rlc1tpXTtcclxuICAgICAgICAgIHZhciBvdmVybGFwID0gY2hlY2tPdmVybGFwUmVjdChibWluLCBibWF4LCBub2RlLmJtaW4sIG5vZGUuYm1heCk7XHJcbiAgICAgICAgICB2YXIgaXNMZWFmTm9kZSA9IG5vZGUuaSA+PSAwO1xyXG5cclxuICAgICAgICAgIGlmIChpc0xlYWZOb2RlICYmIG92ZXJsYXApIHtcclxuICAgICAgICAgICAgaWRzLnB1c2gobm9kZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG92ZXJsYXAgfHwgaXNMZWFmTm9kZSkge1xyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpID0gLW5vZGUuaTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpZHM7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gQ2h1bmt5VHJpTWVzaDtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDaHVua3lUcmlNZXNoLCBcIkJvdW5kc0l0ZW1cIiwgKF90ZW1wID0gZnVuY3Rpb24gQm91bmRzSXRlbSgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCb3VuZHNJdGVtKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWluXCIsIG5ldyBBcnJheSgyKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1heFwiLCBuZXcgQXJyYXkoMikpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlcIiwgdm9pZCAwKTtcclxuICB9LCBfdGVtcCkpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ2h1bmt5VHJpTWVzaCwgXCJDaHVua3lUcmlNZXNoTm9kZVwiLCAoX3RlbXAyID0gZnVuY3Rpb24gQ2h1bmt5VHJpTWVzaE5vZGUoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2h1bmt5VHJpTWVzaE5vZGUpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtaW5cIiwgbmV3IEFycmF5KDIpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWF4XCIsIG5ldyBBcnJheSgyKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaVwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRyaXNcIiwgW10pO1xyXG4gIH0sIF90ZW1wMikpO1xyXG5cclxuICB2YXIgVHJpTWVzaCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUcmlNZXNoKHZlcnRpY2VzLCBmYWNlcykge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJpTWVzaCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJ0aWNlc1wiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZmFjZXNcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNodW5reVRyaU1lc2hcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIHRoaXMudmVydGljZXMgPSB2ZXJ0aWNlcztcclxuICAgICAgdGhpcy5mYWNlcyA9IGZhY2VzO1xyXG4gICAgICB0aGlzLmNodW5reVRyaU1lc2ggPSBuZXcgQ2h1bmt5VHJpTWVzaCh2ZXJ0aWNlcywgZmFjZXMsIGZhY2VzLmxlbmd0aCAvIDMsIDI1Nik7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFRyaU1lc2gsIFt7XHJcbiAgICAgIGtleTogXCJnZXRUcmlzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUcmlzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZhY2VzO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRWZXJ0c1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmVydHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVydGljZXM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldENodW5rc092ZXJsYXBwaW5nUmVjdFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2h1bmtzT3ZlcmxhcHBpbmdSZWN0KGJtaW4sIGJtYXgpIHtcclxuICAgICAgICByZXR1cm4gY2h1bmt5VHJpTWVzaC5nZXRDaHVua3NPdmVybGFwcGluZ1JlY3QoYm1pbiwgYm1heCk7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gVHJpTWVzaDtcclxuICB9KCk7XHJcblxyXG4gIHZhciBTaW1wbGVJbnB1dEdlb21Qcm92aWRlclxyXG4gIC8qZXh0ZW5kcyBJbnB1dEdlb21Qcm92aWRlciovXHJcbiAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgX2NyZWF0ZUNsYXNzKFNpbXBsZUlucHV0R2VvbVByb3ZpZGVyLCBudWxsLCBbe1xyXG4gICAgICBrZXk6IFwibWFwRmFjZXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1hcEZhY2VzKG1lc2hGYWNlcykge1xyXG4gICAgICAgIHZhciBmYWNlcyA9IG5ldyBBcnJheShtZXNoRmFjZXMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgZmFjZXNbaV0gPSBtZXNoRmFjZXNbaV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFjZXM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1hcFZlcnRpY2VzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtYXBWZXJ0aWNlcyh2ZXJ0ZXhQb3NpdGlvbnMpIHtcclxuICAgICAgICB2YXIgdmVydGljZXMgPSBuZXcgQXJyYXkodmVydGV4UG9zaXRpb25zLmxlbmd0aCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZlcnRpY2VzW2ldID0gdmVydGV4UG9zaXRpb25zW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZlcnRpY2VzO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgZnVuY3Rpb24gU2ltcGxlSW5wdXRHZW9tUHJvdmlkZXIodmVydGljZXMsIGZhY2VzKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaW1wbGVJbnB1dEdlb21Qcm92aWRlcik7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJ0aWNlc1wiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZmFjZXNcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtaW5cIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtYXhcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZvbHVtZXNcIiwgW10pO1xyXG5cclxuICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xyXG4gICAgICB0aGlzLmZhY2VzID0gZmFjZXM7XHJcbiAgICAgIHRoaXMuYm1pbiA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgdGhpcy5ibWF4ID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTModGhpcy5ibWluLCB2ZXJ0aWNlcywgMCk7XHJcbiAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5Myh0aGlzLmJtYXgsIHZlcnRpY2VzLCAwKTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1pbih0aGlzLmJtaW4sIHZlcnRpY2VzLCBpICogMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1heCh0aGlzLmJtYXgsIHZlcnRpY2VzLCBpICogMyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoU2ltcGxlSW5wdXRHZW9tUHJvdmlkZXIsIFt7XHJcbiAgICAgIGtleTogXCJnZXRNZXNoQm91bmRzTWluXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNZXNoQm91bmRzTWluKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJtaW47XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE1lc2hCb3VuZHNNYXhcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1lc2hCb3VuZHNNYXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm1heDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0Q29udmV4Vm9sdW1lc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udmV4Vm9sdW1lcygpIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZENvbnZleFZvbHVtZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ29udmV4Vm9sdW1lKHZlcnRzLCBtaW5oLCBtYXhoLCBhcmVhTW9kKSB7XHJcbiAgICAgICAgdmFyIHZvbCA9IG5ldyBDb252ZXhWb2x1bWUoKTtcclxuICAgICAgICB2b2wuaG1pbiA9IG1pbmg7XHJcbiAgICAgICAgdm9sLmhtYXggPSBtYXhoO1xyXG4gICAgICAgIHZvbC52ZXJ0cyA9IHZlcnRzO1xyXG4gICAgICAgIHZvbC5hcmVhTW9kID0gYXJlYU1vZDtcclxuICAgICAgICB0aGlzLnZvbHVtZXMucHVzaCh2b2wpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJtZXNoZXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lc2hlcygpIHtcclxuICAgICAgICAvLyByZXR1cm4gQ29sbGVjdGlvbnMuc2luZ1BvbHlvbkxpc3QobmV3IFRyaU1lc2godmVydGljZXMsIGZhY2VzKSk7XHJcbiAgICAgICAgcmV0dXJuIFtuZXcgVHJpTWVzaCh0aGlzLnZlcnRpY2VzLCB0aGlzLmZhY2VzKV07XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gU2ltcGxlSW5wdXRHZW9tUHJvdmlkZXI7XHJcbiAgfSgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoU2ltcGxlSW5wdXRHZW9tUHJvdmlkZXIsIFwiZnJvbUluZGVjZXNcIiwgZnVuY3Rpb24gKHZlcnRleFBvc2l0aW9ucywgbWVzaEZhY2VzKSB7XHJcbiAgICByZXR1cm4gbmV3IFNpbXBsZUlucHV0R2VvbVByb3ZpZGVyKHRoaXMubWFwVmVydGljZXModmVydGV4UG9zaXRpb25zKSwgdGhpcy5tYXBGYWNlcyhtZXNoRmFjZXMpKTtcclxuICB9KTtcclxuXHJcbiAgdmFyIE9iakltcG9ydGVyQ29udGV4dCA9IGZ1bmN0aW9uIE9iakltcG9ydGVyQ29udGV4dCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYmpJbXBvcnRlckNvbnRleHQpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRleFBvc2l0aW9uc1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWVzaEZhY2VzXCIsIFtdKTtcclxuICB9O1xyXG5cclxuICB2YXIgT2JqSW1wb3J0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gT2JqSW1wb3J0ZXIoKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYmpJbXBvcnRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKE9iakltcG9ydGVyLCBbe1xyXG4gICAgICBrZXk6IFwibG9hZFwiLFxyXG4gICAgICAvLyBPQkpJbXBvcnRlckNvbnRleHQgPSBcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoaXMpIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IG5ldyBPYmpJbXBvcnRlckNvbnRleHQoKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHZhciBzbHVycCA9IGlzO1xyXG4gICAgICAgICAgdmFyIGxpbmVzID0gc2x1cnAuc3BsaXQoL1xccj9cXG4vKTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XHJcbiAgICAgICAgICAgIHRoaXMucmVhZExpbmUobGluZSwgY29udGV4dCk7XHJcbiAgICAgICAgICB9IC8vIHJlYWRlciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaXMpKTtcclxuICAgICAgICAgIC8vIGxldCBsaW5lO1xyXG4gICAgICAgICAgLy8gd2hpbGUgKChsaW5lID0gcmVhZGVyLnJlYWRMaW5lKCkpICE9IG51bGwpIHtcclxuICAgICAgICAgIC8vICAgICBsaW5lID0gbGluZS50cmltKCk7XHJcbiAgICAgICAgICAvLyAgICAgcmVhZExpbmUobGluZSwgY29udGV4dCk7XHJcbiAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBTaW1wbGVJbnB1dEdlb21Qcm92aWRlci5mcm9tSW5kZWNlcyhjb250ZXh0LnZlcnRleFBvc2l0aW9ucywgY29udGV4dC5tZXNoRmFjZXMpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyZWFkTGluZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZExpbmUobGluZSwgY29udGV4dCkge1xyXG4gICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJ2XCIpKSB7XHJcbiAgICAgICAgICB0aGlzLnJlYWRWZXJ0ZXgobGluZSwgY29udGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJmXCIpKSB7XHJcbiAgICAgICAgICB0aGlzLnJlYWRGYWNlKGxpbmUsIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVhZFZlcnRleFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZFZlcnRleChsaW5lLCBjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcInYgXCIpKSB7XHJcbiAgICAgICAgICB2YXIgdmVydCA9IHRoaXMucmVhZFZlY3RvcjNmKGxpbmUpO1xyXG5cclxuICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih2ZXJ0KSxcclxuICAgICAgICAgICAgICBfc3RlcDtcclxuXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xyXG4gICAgICAgICAgICAgIHZhciB2cCA9IF9zdGVwLnZhbHVlO1xyXG4gICAgICAgICAgICAgIGNvbnRleHQudmVydGV4UG9zaXRpb25zLnB1c2godnApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcclxuICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyZWFkVmVjdG9yM2ZcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRWZWN0b3IzZihsaW5lKSB7XHJcbiAgICAgICAgdmFyIHYgPSBsaW5lLnNwbGl0KC9cXHMrLyk7XHJcblxyXG4gICAgICAgIGlmICh2Lmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiSW52YWxpZCB2ZWN0b3IsIGV4cGVjdGVkIDMgY29vcmRpbmF0ZXMsIGZvdW5kIFwiICsgKHYubGVuZ3RoIC0gMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFtwYXJzZUZsb2F0KHZbMV0pLCBwYXJzZUZsb2F0KHZbMl0pLCBwYXJzZUZsb2F0KHZbM10pXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVhZEZhY2VcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRGYWNlKGxpbmUsIGNvbnRleHQpIHtcclxuICAgICAgICB2YXIgdiA9IGxpbmUuc3BsaXQoL1xccysvKTtcclxuXHJcbiAgICAgICAgaWYgKHYubGVuZ3RoIDwgNCkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJJbnZhbGlkIG51bWJlciBvZiBmYWNlIHZlcnRpY2VzOiAzIGNvb3JkaW5hdGVzIGV4cGVjdGVkLCBmb3VuZCBcIiArIHYubGVuZ3RoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGggLSAzOyBqKyspIHtcclxuICAgICAgICAgIGNvbnRleHQubWVzaEZhY2VzLnB1c2godGhpcy5yZWFkRmFjZVZlcnRleCh2WzFdLCBjb250ZXh0KSk7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgY29udGV4dC5tZXNoRmFjZXMucHVzaCh0aGlzLnJlYWRGYWNlVmVydGV4KHZbMiArIGogKyBpXSwgY29udGV4dCkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVhZEZhY2VWZXJ0ZXhcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRGYWNlVmVydGV4KGZhY2UsIGNvbnRleHQpIHtcclxuICAgICAgICB2YXIgdiA9IGZhY2Uuc3BsaXQoL1xcLy8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEluZGV4KHBhcnNlSW50KHZbMF0pLCBjb250ZXh0LnZlcnRleFBvc2l0aW9ucy5sZW5ndGgpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRJbmRleFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXgocG9zaSwgc2l6ZSkge1xyXG4gICAgICAgIGlmIChwb3NpID4gMCkge1xyXG4gICAgICAgICAgcG9zaS0tO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocG9zaSA8IDApIHtcclxuICAgICAgICAgIHBvc2kgPSBzaXplICsgcG9zaTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCIwIHZlcnRleCBpbmRleFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwb3NpO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIE9iakltcG9ydGVyO1xyXG4gIH0oKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUtMjAxOCBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuICB2YXIgUmVjYXN0Q29uc3RhbnRzID0gZnVuY3Rpb24gUmVjYXN0Q29uc3RhbnRzKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdENvbnN0YW50cyk7XHJcbiAgfTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgXCJSQ19OVUxMX0FSRUFcIiwgMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsIFwiUkNfTk9UX0NPTk5FQ1RFRFwiLCAweDNmKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgXCJSQ19XQUxLQUJMRV9BUkVBXCIsIDYzKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgXCJSQ19TUEFOX0hFSUdIVF9CSVRTXCIsIDEzKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgXCJSQ19TUEFOX01BWF9IRUlHSFRcIiwgKDEgPDwgUmVjYXN0Q29uc3RhbnRzLlJDX1NQQU5fSEVJR0hUX0JJVFMpIC0gMSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsIFwiUkNfQk9SREVSX1JFR1wiLCAweDgwMDApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCBcIlJDX01VTFRJUExFX1JFR1NcIiwgMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsIFwiUkNfQk9SREVSX1ZFUlRFWFwiLCAweDEwMDAwKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgXCJSQ19BUkVBX0JPUkRFUlwiLCAweDIwMDAwKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnN0YW50cywgXCJSQ19DT05UT1VSX1JFR19NQVNLXCIsIDB4ZmZmZik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsIFwiUkNfTUVTSF9OVUxMX0lEWFwiLCAweGZmZmYpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCBcIlJDX0NPTlRPVVJfVEVTU19XQUxMX0VER0VTXCIsIDB4MDEpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCBcIlJDX0NPTlRPVVJfVEVTU19BUkVBX0VER0VTXCIsIDB4MDIpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCBcIldBVEVSU0hFRFwiLCAxMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsIFwiTU9OT1RPTkVcIiwgMjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29uc3RhbnRzLCBcIkxBWUVSU1wiLCAzMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb25zdGFudHMsIFwiUkNfTE9HX1dBUk5JTkdcIiwgMSk7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIHZhciBSZWNhc3RDb25maWcgPVxyXG4gIC8qKiBUaGUgd2lkdGgvaGVpZ2h0IHNpemUgb2YgdGlsZSdzIG9uIHRoZSB4ei1wbGFuZS4gW0xpbWl0OiA+PSAwXSBbVW5pdHM6IHZ4XSAqKi9cclxuXHJcbiAgLyoqIFRoZSB4ei1wbGFuZSBjZWxsIHNpemUgdG8gdXNlIGZvciBmaWVsZHMuIFtMaW1pdDogPiAwXSBbVW5pdHM6IHd1XSAqKi9cclxuXHJcbiAgLyoqIFRoZSB5LWF4aXMgY2VsbCBzaXplIHRvIHVzZSBmb3IgZmllbGRzLiBbTGltaXQ6ID4gMF0gW1VuaXRzOiB3dV0gKiovXHJcblxyXG4gIC8qKiBUaGUgbWF4aW11bSBzbG9wZSB0aGF0IGlzIGNvbnNpZGVyZWQgd2Fsa2FibGUuIFtMaW1pdHM6IDAgPD0gdmFsdWUgPCA5MF0gW1VuaXRzOiBEZWdyZWVzXSAqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogTWluaW11bSBmbG9vciB0byAnY2VpbGluZycgaGVpZ2h0IHRoYXQgd2lsbCBzdGlsbCBhbGxvdyB0aGUgZmxvb3IgYXJlYSB0byBiZSBjb25zaWRlcmVkIHdhbGthYmxlLiBbTGltaXQ6ID49IDNdXHJcbiAgICogW1VuaXRzOiB2eF1cclxuICAgKiovXHJcblxyXG4gIC8qKiBNYXhpbXVtIGxlZGdlIGhlaWdodCB0aGF0IGlzIGNvbnNpZGVyZWQgdG8gc3RpbGwgYmUgdHJhdmVyc2FibGUuIFtMaW1pdDogPj0wXSBbVW5pdHM6IHZ4XSAqKi9cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGRpc3RhbmNlIHRvIGVyb2RlL3NocmluayB0aGUgd2Fsa2FibGUgYXJlYSBvZiB0aGUgaGVpZ2h0ZmllbGQgYXdheSBmcm9tIG9ic3RydWN0aW9ucy4gW0xpbWl0OiA+PTBdIFtVbml0czpcclxuICAgKiB2eF1cclxuICAgKiovXHJcblxyXG4gIC8qKiBUaGUgbWF4aW11bSBhbGxvd2VkIGxlbmd0aCBmb3IgY29udG91ciBlZGdlcyBhUG9seSB0aGUgYm9yZGVyIG9mIHRoZSBtZXNoLiBbTGltaXQ6ID49MF0gW1VuaXRzOiB2eF0gKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIGRpc3RhbmNlIGEgc2ltcGxmaWVkIGNvbnRvdXIncyBib3JkZXIgZWRnZXMgc2hvdWxkIGRldmlhdGUgdGhlIG9yaWdpbmFsIHJhdyBjb250b3VyLiBbTGltaXQ6ID49MF1cclxuICAgKiBbVW5pdHM6IHZ4XVxyXG4gICAqKi9cclxuXHJcbiAgLyoqIFRoZSBtaW5pbXVtIG51bWJlciBvZiBjZWxscyBhbGxvd2VkIHRvIGZvcm0gaXNvbGF0ZWQgaXNsYW5kIGFyZWFzLiBbTGltaXQ6ID49MF0gW1VuaXRzOiB2eF0gKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIEFueSByZWdpb25zIHdpdGggYSBzcGFuIGNvdW50IHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlIHdpbGwsIGlmIHBvc3NpYmxlLCBiZSBtZXJnZWQgd2l0aCBsYXJnZXIgcmVnaW9ucy4gW0xpbWl0OlxyXG4gICAqID49MF0gW1VuaXRzOiB2eF1cclxuICAgKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB2ZXJ0aWNlcyBhbGxvd2VkIGZvciBwb2x5Z29ucyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBjb250b3VyIHRvIHBvbHlnb24gY29udmVyc2lvbiBwcm9jZXNzLlxyXG4gICAqIFtMaW1pdDogPj0gM11cclxuICAgKiovXHJcblxyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHNhbXBsaW5nIGRpc3RhbmNlIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcgdGhlIGRldGFpbCBtZXNoLiAoRm9yIGhlaWdodCBkZXRhaWwgb25seS4pIFtMaW1pdHM6IDAgb3IgPj1cclxuICAgKiAwLjldIFtVbml0czogd3VdXHJcbiAgICoqL1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgbWF4aW11bSBkaXN0YW5jZSB0aGUgZGV0YWlsIG1lc2ggc3VyZmFjZSBzaG91bGQgZGV2aWF0ZSBmcm9tIGhlaWdodGZpZWxkIGRhdGEuIChGb3IgaGVpZ2h0IGRldGFpbCBvbmx5LilcclxuICAgKiBbTGltaXQ6ID49MF0gW1VuaXRzOiB3dV1cclxuICAgKiovXHJcbiAgZnVuY3Rpb24gUmVjYXN0Q29uZmlnKHBhcnRpdGlvblR5cGUsIGNlbGxTaXplLCBjZWxsSGVpZ2h0LCBhZ2VudEhlaWdodCwgYWdlbnRSYWRpdXMsIGFnZW50TWF4Q2xpbWIsIGFnZW50TWF4U2xvcGUsIHJlZ2lvbk1pblNpemUsIHJlZ2lvbk1lcmdlU2l6ZSwgZWRnZU1heExlbiwgZWRnZU1heEVycm9yLCB2ZXJ0c1BlclBvbHksIGRldGFpbFNhbXBsZURpc3QsIGRldGFpbFNhbXBsZU1heEVycm9yLCB0aWxlU2l6ZSwgd2Fsa2FibGVBcmVhTW9kKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0Q29uZmlnKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXJ0aXRpb25UeXBlXCIsIG51bGwpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbGVTaXplXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY3NcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlU2xvcGVBbmdsZVwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlSGVpZ2h0XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2Fsa2FibGVDbGltYlwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlUmFkaXVzXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4RWRnZUxlblwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFNpbXBsaWZpY2F0aW9uRXJyb3JcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtaW5SZWdpb25BcmVhXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWVyZ2VSZWdpb25BcmVhXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4VmVydHNQZXJQb2x5XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRldGFpbFNhbXBsZURpc3RcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZXRhaWxTYW1wbGVNYXhFcnJvclwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlQXJlYU1vZFwiLCB2b2lkIDApO1xyXG5cclxuICAgIHRoaXMucGFydGl0aW9uVHlwZSA9IHBhcnRpdGlvblR5cGU7XHJcbiAgICB0aGlzLmNzID0gY2VsbFNpemU7XHJcbiAgICB0aGlzLmNoID0gY2VsbEhlaWdodDtcclxuICAgIHRoaXMud2Fsa2FibGVTbG9wZUFuZ2xlID0gYWdlbnRNYXhTbG9wZTtcclxuICAgIHRoaXMud2Fsa2FibGVIZWlnaHQgPSBNYXRoLmNlaWwoYWdlbnRIZWlnaHQgLyB0aGlzLmNoKTtcclxuICAgIHRoaXMud2Fsa2FibGVDbGltYiA9IE1hdGguZmxvb3IoYWdlbnRNYXhDbGltYiAvIHRoaXMuY2gpO1xyXG4gICAgdGhpcy53YWxrYWJsZVJhZGl1cyA9IE1hdGguY2VpbChhZ2VudFJhZGl1cyAvIHRoaXMuY3MpO1xyXG4gICAgdGhpcy5tYXhFZGdlTGVuID0gTWF0aC5mbG9vcihlZGdlTWF4TGVuIC8gY2VsbFNpemUpO1xyXG4gICAgdGhpcy5tYXhTaW1wbGlmaWNhdGlvbkVycm9yID0gZWRnZU1heEVycm9yO1xyXG4gICAgdGhpcy5taW5SZWdpb25BcmVhID0gcmVnaW9uTWluU2l6ZSAqIHJlZ2lvbk1pblNpemU7IC8vIE5vdGU6IGFyZWEgPSBzaXplKnNpemVcclxuXHJcbiAgICB0aGlzLm1lcmdlUmVnaW9uQXJlYSA9IHJlZ2lvbk1lcmdlU2l6ZSAqIHJlZ2lvbk1lcmdlU2l6ZTsgLy8gTm90ZTogYXJlYSA9IHNpemUqc2l6ZVxyXG5cclxuICAgIHRoaXMubWF4VmVydHNQZXJQb2x5ID0gdmVydHNQZXJQb2x5O1xyXG4gICAgdGhpcy5kZXRhaWxTYW1wbGVEaXN0ID0gZGV0YWlsU2FtcGxlRGlzdCA8IDAuOSA/IDAgOiBjZWxsU2l6ZSAqIGRldGFpbFNhbXBsZURpc3Q7XHJcbiAgICB0aGlzLmRldGFpbFNhbXBsZU1heEVycm9yID0gY2VsbEhlaWdodCAqIGRldGFpbFNhbXBsZU1heEVycm9yO1xyXG4gICAgdGhpcy50aWxlU2l6ZSA9IHRpbGVTaXplO1xyXG4gICAgdGhpcy53YWxrYWJsZUFyZWFNb2QgPSB3YWxrYWJsZUFyZWFNb2Q7XHJcbiAgfTtcclxuXHJcbiAgdmFyIEFyZWFNb2RpZmljYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXNrIGlzIHNldCB0byBhbGwgYXZhaWxhYmxlIGJpdHMsIHdoaWNoIG1lYW5zIHZhbHVlIGlzIGZ1bGx5IGFwcGxpZWRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKiAgICAgICAgICAgIFRoZSBhcmVhIGlkIHRvIGFwcGx5LiBbTGltaXQ6IDw9ICNSQ19BUkVBX0ZMQUdTX01BU0tdXHJcbiAgICAgKi9cclxuICAgIC8vIGNvbnN0cnVjdG9yKHZhbHVlKSB7XHJcbiAgICAvLyBcdFx0dGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgLy8gXHRcdHRoaXMubWFzayA9IEFyZWFNb2RpZmljYXRpb24uUkNfQVJFQV9GTEFHU19NQVNLO1xyXG4gICAgLy8gXHR9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAgICogICAgICAgICAgICBUaGUgYXJlYSBpZCB0byBhcHBseS4gW0xpbWl0OiA8PSAjUkNfQVJFQV9GTEFHU19NQVNLXVxyXG4gICAgICogQHBhcmFtIG1hc2tcclxuICAgICAqICAgICAgICAgICAgQml0d2lzZSBtYXNrIHVzZWQgd2hlbiBhcHBseWluZyB2YWx1ZS4gW0xpbWl0OiA8PSAjUkNfQVJFQV9GTEFHU19NQVNLXVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBBcmVhTW9kaWZpY2F0aW9uKHZhbHVlKSB7XHJcbiAgICAgIHZhciBtYXNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBBcmVhTW9kaWZpY2F0aW9uLlJDX0FSRUFfRkxBR1NfTUFTSztcclxuXHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcmVhTW9kaWZpY2F0aW9uKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXNrXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgIHRoaXMubWFzayA9IG1hc2s7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKEFyZWFNb2RpZmljYXRpb24sIFt7XHJcbiAgICAgIGtleTogXCJnZXRNYXNrZWRWYWx1ZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWFza2VkVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgJiB0aGlzLm1hc2s7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFwcGx5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseShhcmVhKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgJiB0aGlzLm1hc2sgfCBhcmVhICYgfnRoaXMubWFzaztcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBBcmVhTW9kaWZpY2F0aW9uO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KEFyZWFNb2RpZmljYXRpb24sIFwiUkNfQVJFQV9GTEFHU19NQVNLXCIsIDB4M0YpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQXJlYU1vZGlmaWNhdGlvbiwgXCJjbG9uZVwiLCBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgIHJldHVybiBuZXcgQXJlYU1vZGlmaWNhdGlvbihvdGhlci52YWx1ZSwgb3RoZXIubWFzayk7IC8vIHRoaXMudmFsdWUgPSBvdGhlci52YWx1ZTtcclxuICAgIC8vIHRoaXMubWFzayA9IG90aGVyLm1hc2s7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucyA9IGZ1bmN0aW9uIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zKTtcclxuICB9O1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsIFwiU0FNUExFX1BPTFlBUkVBX1RZUEVfTUFTS1wiLCAweDA3KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZQVJFQV9UWVBFX0dST1VORFwiLCAweDEpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsIFwiU0FNUExFX1BPTFlBUkVBX1RZUEVfV0FURVJcIiwgMHgyKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZQVJFQV9UWVBFX1JPQURcIiwgMHgzKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZQVJFQV9UWVBFX0RPT1JcIiwgMHg0KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZQVJFQV9UWVBFX0dSQVNTXCIsIDB4NSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgXCJTQU1QTEVfUE9MWUFSRUFfVFlQRV9KVU1QXCIsIDB4Nik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgXCJTQU1QTEVfQVJFQU1PRF9HUk9VTkRcIiwgbmV3IEFyZWFNb2RpZmljYXRpb24oU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMuU0FNUExFX1BPTFlBUkVBX1RZUEVfR1JPVU5ELCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9NQVNLKSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgXCJTQU1QTEVfQVJFQU1PRF9XQVRFUlwiLCBuZXcgQXJlYU1vZGlmaWNhdGlvbihTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9XQVRFUiwgU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMuU0FNUExFX1BPTFlBUkVBX1RZUEVfTUFTSykpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsIFwiU0FNUExFX0FSRUFNT0RfUk9BRFwiLCBuZXcgQXJlYU1vZGlmaWNhdGlvbihTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9ST0FELCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9NQVNLKSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgXCJTQU1QTEVfQVJFQU1PRF9HUkFTU1wiLCBuZXcgQXJlYU1vZGlmaWNhdGlvbihTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9HUkFTUywgU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMuU0FNUExFX1BPTFlBUkVBX1RZUEVfTUFTSykpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoU2FtcGxlQXJlYU1vZGlmaWNhdGlvbnMsIFwiU0FNUExFX0FSRUFNT0RfRE9PUlwiLCBuZXcgQXJlYU1vZGlmaWNhdGlvbihTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9ET09SLCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfUE9MWUFSRUFfVFlQRV9ET09SKSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgXCJTQU1QTEVfQVJFQU1PRF9KVU1QXCIsIG5ldyBBcmVhTW9kaWZpY2F0aW9uKFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX0pVTVAsIFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLlNBTVBMRV9QT0xZQVJFQV9UWVBFX0pVTVApKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZRkxBR1NfV0FMS1wiLCAweDAxKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZRkxBR1NfU1dJTVwiLCAweDAyKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZRkxBR1NfRE9PUlwiLCAweDA0KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZRkxBR1NfSlVNUFwiLCAweDA4KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFNhbXBsZUFyZWFNb2RpZmljYXRpb25zLCBcIlNBTVBMRV9QT0xZRkxBR1NfRElTQUJMRURcIiwgMHgxMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucywgXCJTQU1QTEVfUE9MWUZMQUdTX0FMTFwiLCAweGZmZik7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG5cclxuICAvKiogQSBjb21wYWN0LCBzdGF0aWMgaGVpZ2h0ZmllbGQgcmVwcmVzZW50aW5nIHVub2JzdHJ1Y3RlZCBzcGFjZS4gKi9cclxuICB2YXIgQ29tcGFjdEhlaWdodGZpZWxkID0gZnVuY3Rpb24gQ29tcGFjdEhlaWdodGZpZWxkKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbXBhY3RIZWlnaHRmaWVsZCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2lkdGhcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVpZ2h0XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNwYW5Db3VudFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3YWxrYWJsZUhlaWdodFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3YWxrYWJsZUNsaW1iXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJvcmRlclNpemVcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4RGlzdGFuY2VcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4UmVnaW9uc1wiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtaW5cIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWF4XCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY3NcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2VsbHNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNwYW5zXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXN0XCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmVhc1wiLCBbXSk7XHJcbiAgfTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKiBQcm92aWRlcyBpbmZvcm1hdGlvbiBvbiB0aGUgY29udGVudCBvZiBhIGNlbGwgY29sdW1uIGluIGEgY29tcGFjdCBoZWlnaHRmaWVsZC4gKi9cclxuICB2YXIgQ29tcGFjdENlbGwgPSBmdW5jdGlvbiBDb21wYWN0Q2VsbCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb21wYWN0Q2VsbCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5kZXhcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY291bnRcIiwgMCk7XHJcbiAgfTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKiAgUmVwcmVzZW50cyBhIHNwYW4gb2YgdW5vYnN0cnVjdGVkIHNwYWNlIHdpdGhpbiBhIGNvbXBhY3QgaGVpZ2h0ZmllbGQuICovXHJcbiAgdmFyIENvbXBhY3RTcGFuID0gZnVuY3Rpb24gQ29tcGFjdFNwYW4oKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tcGFjdFNwYW4pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInlcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVnXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvblwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoXCIsIDApO1xyXG4gIH07XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIHZhciBSZWNhc3RDb21tb24gPSBmdW5jdGlvbiBSZWNhc3RDb21tb24oKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0Q29tbW9uKTtcclxuICB9O1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29tbW9uLCBcIkdldENvblwiLCBmdW5jdGlvbiAocywgZGlyKSB7XHJcbiAgICB2YXIgc2hpZnQgPSBkaXIgKiA2O1xyXG4gICAgcmV0dXJuIHMuY29uID4+IHNoaWZ0ICYgMHgzZjtcclxuICB9KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbW1vbiwgXCJHZXREaXJPZmZzZXRYXCIsIGZ1bmN0aW9uIChkaXIpIHtcclxuICAgIHZhciBvZmZzZXQgPSBbLTEsIDAsIDEsIDBdO1xyXG4gICAgcmV0dXJuIG9mZnNldFtkaXIgJiAweDAzXTtcclxuICB9KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbW1vbiwgXCJHZXREaXJPZmZzZXRZXCIsIGZ1bmN0aW9uIChkaXIpIHtcclxuICAgIHZhciBvZmZzZXQgPSBbMCwgMSwgMCwgLTFdO1xyXG4gICAgcmV0dXJuIG9mZnNldFtkaXIgJiAweDAzXTtcclxuICB9KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbW1vbiwgXCJyY0dldERpckZvck9mZnNldFwiLCBmdW5jdGlvbiAoeCwgeSkge1xyXG4gICAgdmFyIGRpcnMgPSBbMywgMCwgLTEsIDIsIDFdO1xyXG4gICAgcmV0dXJuIGRpcnNbKHkgKyAxIDw8IDEpICsgeF07XHJcbiAgfSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb21tb24sIFwiU2V0Q29uXCIsIGZ1bmN0aW9uIChzLCBkaXIsIGkpIHtcclxuICAgIHZhciBzaGlmdCA9IGRpciAqIDY7XHJcbiAgICB2YXIgY29uID0gcy5jb247XHJcbiAgICBzLmNvbiA9IGNvbiAmIH4oMHgzZiA8PCBzaGlmdCkgfCAoaSAmIDB4M2YpIDw8IHNoaWZ0O1xyXG4gIH0pO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0Q29tbW9uLCBcImNsYW1wXCIsIGZ1bmN0aW9uICh2LCBtaW4sIG1heCkge1xyXG4gICAgcmV0dXJuIE1hdGgubWF4KE1hdGgubWluKG1heCwgdiksIG1pbik7XHJcbiAgfSk7XHJcblxyXG4gIHZhciBSZWNhc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVjYXN0KCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0LCBbe1xyXG4gICAgICBrZXk6IFwiY2FsY0JvdW5kc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY0JvdW5kcyh2ZXJ0cywgbnYsIGJtaW4sIGJtYXgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgICAgYm1pbltpXSA9IHZlcnRzW2ldO1xyXG4gICAgICAgICAgYm1heFtpXSA9IHZlcnRzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IG52OyArK19pKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDM7IGorKykge1xyXG4gICAgICAgICAgICBibWluW2pdID0gTWF0aC5taW4oYm1pbltqXSwgdmVydHNbX2kgKiAzICsgal0pO1xyXG4gICAgICAgICAgICBibWF4W2pdID0gTWF0aC5tYXgoYm1heFtqXSwgdmVydHNbX2kgKiAzICsgal0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gQ2FsY3VsYXRlIGJvdW5kaW5nIGJveC5cclxuXHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNsZWFyVW53YWxrYWJsZVRyaWFuZ2xlc1wiLFxyXG4gICAgICAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIE9ubHkgc2V0cyB0aGUgYXJlYSBpZCdzIGZvciB0aGUgdW53YWxrYWJsZSB0cmlhbmdsZXMuIERvZXMgbm90IGFsdGVyIHRoZVxyXG4gICAgICAvLy8gYXJlYSBpZCdzIGZvciB3YWxrYWJsZSB0cmlhbmdsZXMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gU2VlIHRoZSAjcmNDb25maWcgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBzZWUgcmNIZWlnaHRmaWVsZCwgcmNDbGVhclVud2Fsa2FibGVUcmlhbmdsZXMsIHJjUmFzdGVyaXplVHJpYW5nbGVzXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhclVud2Fsa2FibGVUcmlhbmdsZXMoY3R4LCB3YWxrYWJsZVNsb3BlQW5nbGUsIHZlcnRzLCBudiwgdHJpcywgbnQsIGFyZWFzKSB7XHJcbiAgICAgICAgd2Fsa2FibGVUaHIgPSBNYXRoLmNvcyh3YWxrYWJsZVNsb3BlQW5nbGUgLyAxODAuMCAqIE1hdGguUEkpO1xyXG4gICAgICAgIG5vcm0gPSBuZXcgQXJyYXkoMyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnQ7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHRyaSA9IGkgKiAzO1xyXG4gICAgICAgICAgY2FsY1RyaU5vcm1hbCh2ZXJ0cywgdHJpc1t0cmldLCB0cmlzW3RyaSArIDFdLCB0cmlzW3RyaSArIDJdLCBub3JtKTsgLy8gQ2hlY2sgaWYgdGhlIGZhY2UgaXMgd2Fsa2FibGUuXHJcblxyXG4gICAgICAgICAgaWYgKG5vcm1bMV0gPD0gd2Fsa2FibGVUaHIpIGFyZWFzW2ldID0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1dLCBbe1xyXG4gICAgICBrZXk6IFwiY2FsY0dyaWRTaXplXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjR3JpZFNpemUoYm1pbiwgYm1heCwgY3MpIHtcclxuICAgICAgICByZXR1cm4gW01hdGguZmxvb3IoKGJtYXhbMF0gLSBibWluWzBdKSAvIGNzICsgMC41KSwgTWF0aC5mbG9vcigoYm1heFsyXSAtIGJtaW5bMl0pIC8gY3MgKyAwLjUpXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY2FsY1RpbGVDb3VudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY1RpbGVDb3VudChibWluLCBibWF4LCBjcywgdGlsZVNpemUpIHtcclxuICAgICAgICB2YXIgZ3doID0gUmVjYXN0LmNhbGNHcmlkU2l6ZShibWluLCBibWF4LCBjcyk7XHJcbiAgICAgICAgdmFyIGd3ID0gZ3doWzBdO1xyXG4gICAgICAgIHZhciBnaCA9IGd3aFsxXTtcclxuICAgICAgICB2YXIgdHMgPSB0aWxlU2l6ZTtcclxuICAgICAgICB2YXIgdHcgPSAoZ3cgKyB0cyAtIDEpIC8gdHM7XHJcbiAgICAgICAgdmFyIHRoID0gKGdoICsgdHMgLSAxKSAvIHRzO1xyXG4gICAgICAgIHJldHVybiBbdHcsIHRoXTtcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIE1vZGlmaWVzIHRoZSBhcmVhIGlkIG9mIGFsbCB0cmlhbmdsZXMgd2l0aCBhIHNsb3BlIGJlbG93IHRoZSBzcGVjaWZpZWQgdmFsdWUuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gU2VlIHRoZSAjcmNDb25maWcgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBzZWUgcmNIZWlnaHRmaWVsZCwgcmNDbGVhclVud2Fsa2FibGVUcmlhbmdsZXMsIHJjUmFzdGVyaXplVHJpYW5nbGVzXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWFya1dhbGthYmxlVHJpYW5nbGVzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtYXJrV2Fsa2FibGVUcmlhbmdsZXMoY3R4LCB3YWxrYWJsZVNsb3BlQW5nbGUsIHZlcnRzLCB0cmlzLCBudCwgYXJlYU1vZCkge1xyXG4gICAgICAgIHZhciBhcmVhcyA9IG5ldyBBcnJheShudCkuZmlsbCgwKTtcclxuICAgICAgICB2YXIgd2Fsa2FibGVUaHIgPSBNYXRoLmNvcyh3YWxrYWJsZVNsb3BlQW5nbGUgLyAxODAuMCAqIE1hdGguUEkpO1xyXG4gICAgICAgIHZhciBub3JtID0gbmV3IEFycmF5KDMpLmZpbGwoMCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnQ7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHRyaSA9IGkgKiAzO1xyXG4gICAgICAgICAgUmVjYXN0LmNhbGNUcmlOb3JtYWwodmVydHMsIHRyaXNbdHJpXSwgdHJpc1t0cmkgKyAxXSwgdHJpc1t0cmkgKyAyXSwgbm9ybSk7IC8vIENoZWNrIGlmIHRoZSBmYWNlIGlzIHdhbGthYmxlLlxyXG5cclxuICAgICAgICAgIGlmIChub3JtWzFdID4gd2Fsa2FibGVUaHIpIGFyZWFzW2ldID0gYXJlYU1vZC5hcHBseShhcmVhc1tpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXJlYXM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNhbGNUcmlOb3JtYWxcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNUcmlOb3JtYWwodmVydHMsIHYwLCB2MSwgdjIsIG5vcm0pIHtcclxuICAgICAgICB2YXIgZTAgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgdmFyIGUxID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5zdWJBKGUwLCB2ZXJ0cywgdjEgKiAzLCB2MCAqIDMpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5zdWJBKGUxLCB2ZXJ0cywgdjIgKiAzLCB2MCAqIDMpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jcm9zcyhub3JtLCBlMCwgZTEpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5ub3JtYWxpemUobm9ybSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldEhlaWdodEZpZWxkU3BhbkNvdW50XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIZWlnaHRGaWVsZFNwYW5Db3VudChjdHgsIGhmKSB7XHJcbiAgICAgICAgdmFyIHcgPSBoZi53aWR0aDtcclxuICAgICAgICB2YXIgaCA9IGhmLmhlaWdodDtcclxuICAgICAgICB2YXIgc3BhbkNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHtcclxuICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgKyt4KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHMgPSBoZi5zcGFuc1t4ICsgeSAqIHddOyBzICE9IG51bGw7IHMgPSBzLm5leHQpIHtcclxuICAgICAgICAgICAgICBpZiAocy5hcmVhICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHNwYW5Db3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3BhbkNvdW50O1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhpcyBpcyBqdXN0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHByb2Nlc3Mgb2YgZnVsbHkgYnVpbGRpbmcgYSBjb21wYWN0IGhlaWdodGZpZWxkLlxyXG4gICAgICAvLy8gVmFyaW91cyBmaWx0ZXJzIG1heSBiZSBhcHBsaWVkLCB0aGVuIHRoZSBkaXN0YW5jZSBmaWVsZCBhbmQgcmVnaW9ucyBidWlsdC5cclxuICAgICAgLy8vIEUuZzogI3JjQnVpbGREaXN0YW5jZUZpZWxkIGFuZCAjcmNCdWlsZFJlZ2lvbnNcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBTZWUgdGhlICNyY0NvbmZpZyBkb2N1bWVudGF0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQHNlZSByY0FsbG9jQ29tcGFjdEhlaWdodGZpZWxkLCByY0hlaWdodGZpZWxkLCByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNDb25maWdcclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJidWlsZENvbXBhY3RIZWlnaHRmaWVsZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRDb21wYWN0SGVpZ2h0ZmllbGQoY3R4LCB3YWxrYWJsZUhlaWdodCwgd2Fsa2FibGVDbGltYiwgaGYpIHtcclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIkJVSUxEX0NPTVBBQ1RIRUlHSFRGSUVMRFwiKTtcclxuICAgICAgICB2YXIgY2hmID0gbmV3IENvbXBhY3RIZWlnaHRmaWVsZCgpO1xyXG4gICAgICAgIHZhciB3ID0gaGYud2lkdGg7XHJcbiAgICAgICAgdmFyIGggPSBoZi5oZWlnaHQ7XHJcbiAgICAgICAgdmFyIHNwYW5Db3VudCA9IHRoaXMuZ2V0SGVpZ2h0RmllbGRTcGFuQ291bnQoY3R4LCBoZik7IC8vIEZpbGwgaW4gaGVhZGVyLlxyXG5cclxuICAgICAgICBjaGYud2lkdGggPSB3O1xyXG4gICAgICAgIGNoZi5oZWlnaHQgPSBoO1xyXG4gICAgICAgIGNoZi5zcGFuQ291bnQgPSBzcGFuQ291bnQ7XHJcbiAgICAgICAgY2hmLndhbGthYmxlSGVpZ2h0ID0gd2Fsa2FibGVIZWlnaHQ7XHJcbiAgICAgICAgY2hmLndhbGthYmxlQ2xpbWIgPSB3YWxrYWJsZUNsaW1iO1xyXG4gICAgICAgIGNoZi5tYXhSZWdpb25zID0gMDtcclxuICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTIoY2hmLmJtaW4sIGhmLmJtaW4pO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5MihjaGYuYm1heCwgaGYuYm1heCk7XHJcbiAgICAgICAgY2hmLmJtYXhbMV0gKz0gd2Fsa2FibGVIZWlnaHQgKiBoZi5jaDtcclxuICAgICAgICBjaGYuY3MgPSBoZi5jcztcclxuICAgICAgICBjaGYuY2ggPSBoZi5jaDsgLy8gbGV0IGJpZ1NpemUgPSB3Kmg7XHJcblxyXG4gICAgICAgIGNoZi5jZWxscyA9IG5ldyBBcnJheShNYXRoLmZsb29yKHcpICogTWF0aC5mbG9vcihoKSk7XHJcbiAgICAgICAgY2hmLnNwYW5zID0gbmV3IEFycmF5KHNwYW5Db3VudCk7XHJcbiAgICAgICAgY2hmLmFyZWFzID0gbmV3IEFycmF5KHNwYW5Db3VudCk7XHJcbiAgICAgICAgdmFyIE1BWF9IRUlHSFQgPSAweGZmZmY7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hmLmNlbGxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBjaGYuY2VsbHNbaV0gPSBuZXcgQ29tcGFjdENlbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IGNoZi5zcGFucy5sZW5ndGg7IF9pMisrKSB7XHJcbiAgICAgICAgICBjaGYuc3BhbnNbX2kyXSA9IG5ldyBDb21wYWN0U3BhbigpO1xyXG4gICAgICAgIH0gLy8gRmlsbCBpbiBjZWxscyBhbmQgc3BhbnMuXHJcblxyXG5cclxuICAgICAgICB2YXIgaWR4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX3kgPSAwOyBfeSA8IGg7ICsrX3kpIHtcclxuICAgICAgICAgIGZvciAodmFyIF94ID0gMDsgX3ggPCB3OyArK194KSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gaGYuc3BhbnNbX3ggKyBfeSAqIHddOyAvLyBJZiB0aGVyZSBhcmUgbm8gc3BhbnMgYXQgdGhpcyBjZWxsLCBqdXN0IGxlYXZlIHRoZSBkYXRhIHRvIGluZGV4PTAsIGNvdW50PTAuXHJcblxyXG4gICAgICAgICAgICBpZiAocyA9PSBudWxsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbX3ggKyBfeSAqIHddO1xyXG4gICAgICAgICAgICBjLmluZGV4ID0gaWR4O1xyXG4gICAgICAgICAgICBjLmNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgICAgIHdoaWxlIChzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICBpZiAocy5hcmVhICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBib3QgPSBzLnNtYXg7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9wID0gcy5uZXh0ICE9IG51bGwgPyBNYXRoLmZsb29yKHMubmV4dC5zbWluKSA6IE1BWF9IRUlHSFQ7XHJcbiAgICAgICAgICAgICAgICBjaGYuc3BhbnNbaWR4XS55ID0gUmVjYXN0Q29tbW9uLmNsYW1wKGJvdCwgMCwgMHhmZmZmKTtcclxuICAgICAgICAgICAgICAgIGNoZi5zcGFuc1tpZHhdLmggPSBSZWNhc3RDb21tb24uY2xhbXAodG9wIC0gYm90LCAwLCAweGZmKTtcclxuICAgICAgICAgICAgICAgIGNoZi5hcmVhc1tpZHhdID0gcy5hcmVhO1xyXG4gICAgICAgICAgICAgICAgaWR4Kys7IC8vIGlmKGlkeCA9PSA0NTAyNDApXHJcbiAgICAgICAgICAgICAgICAvLyBcdGNvbnNvbGUubG9nKFwiaGVyZVwiKVxyXG5cclxuICAgICAgICAgICAgICAgIGMuY291bnQrKztcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHMgPSBzLm5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIEZpbmQgbmVpZ2hib3VyIGNvbm5lY3Rpb25zLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIE1BWF9MQVlFUlMgPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCAtIDE7XHJcbiAgICAgICAgdmFyIHRvb0hpZ2hOZWlnaGJvdXIgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHtcclxuICAgICAgICAgICAgdmFyIF9jID0gY2hmLmNlbGxzW3ggKyB5ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTMgPSBfYy5pbmRleCwgbmkgPSBfYy5pbmRleCArIF9jLmNvdW50OyBfaTMgPCBuaTsgKytfaTMpIHtcclxuICAgICAgICAgICAgICAvLyBpZihpID09IDQ1MDI0MClcclxuICAgICAgICAgICAgICAvLyBcdGNvbnNvbGUubG9nKFwic3RvcFwiKVxyXG4gICAgICAgICAgICAgIHZhciBfcyA9IGNoZi5zcGFuc1tfaTNdO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikge1xyXG4gICAgICAgICAgICAgICAgUmVjYXN0Q29tbW9uLlNldENvbihfcywgZGlyLCBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbnggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTtcclxuICAgICAgICAgICAgICAgIHZhciBueSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpOyAvLyBGaXJzdCBjaGVjayB0aGF0IHRoZSBuZWlnaGJvdXIgY2VsbCBpcyBpbiBib3VuZHMuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG54IDwgMCB8fCBueSA8IDAgfHwgbnggPj0gdyB8fCBueSA+PSBoKSBjb250aW51ZTsgLy8gSXRlcmF0ZSBvdmVyIGFsbCBuZWlnaGJvdXIgc3BhbnMgYW5kIGNoZWNrIGlmIGFueSBvZiB0aGUgaXNcclxuICAgICAgICAgICAgICAgIC8vIGFjY2Vzc2libGUgZnJvbSBjdXJyZW50IGNlbGwuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5jID0gY2hmLmNlbGxzW254ICsgbnkgKiB3XTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gbmMuaW5kZXgsIG5rID0gbmMuaW5kZXggKyBuYy5jb3VudDsgayA8IG5rOyArK2spIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIG5zID0gY2hmLnNwYW5zW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIF9ib3QgPSBNYXRoLm1heChfcy55LCBucy55KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBfdG9wID0gTWF0aC5taW4oX3MueSArIF9zLmgsIG5zLnkgKyBucy5oKTsgLy8gQ2hlY2sgdGhhdCB0aGUgZ2FwIGJldHdlZW4gdGhlIHNwYW5zIGlzIHdhbGthYmxlLFxyXG4gICAgICAgICAgICAgICAgICAvLyBhbmQgdGhhdCB0aGUgY2xpbWIgaGVpZ2h0IGJldHdlZW4gdGhlIGdhcHMgaXMgbm90IHRvbyBoaWdoLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChfdG9wIC0gX2JvdCA+PSB3YWxrYWJsZUhlaWdodCAmJiBNYXRoLmFicyhucy55IC0gX3MueSkgPD0gd2Fsa2FibGVDbGltYikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgZGlyZWN0aW9uIGFzIHdhbGthYmxlLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaWR4ID0gayAtIG5jLmluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlkeCA8IDAgfHwgbGlkeCA+IE1BWF9MQVlFUlMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRvb0hpZ2hOZWlnaGJvdXIgPSBNYXRoLm1heCh0b29IaWdoTmVpZ2hib3VyLCBsaWR4KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUmVjYXN0Q29tbW9uLlNldENvbihfcywgZGlyLCBsaWR4KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRvb0hpZ2hOZWlnaGJvdXIgPiBNQVhfTEFZRVJTKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihcInJjQnVpbGRDb21wYWN0SGVpZ2h0ZmllbGQ6IEhlaWdodGZpZWxkIGhhcyB0b28gbWFueSBsYXllcnMgXCIgKyB0b29IaWdoTmVpZ2hib3VyICsgXCIgKG1heDogXCIgKyBNQVhfTEFZRVJTICsgXCIpXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX0NPTVBBQ1RIRUlHSFRGSUVMRFwiKTtcclxuICAgICAgICByZXR1cm4gY2hmO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFJlY2FzdDtcclxuICB9KCk7XHJcblxyXG4gIHZhciBSZWNhc3RCdWlsZGVyQ29uZmlnJDEgPVxyXG4gIC8qKiBUaGUgd2lkdGggb2YgdGhlIGZpZWxkIGFQb2x5IHRoZSB4LWF4aXMuIFtMaW1pdDogPj0gMF0gW1VuaXRzOiB2eF0gKiovXHJcblxyXG4gIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBmaWVsZCBhUG9seSB0aGUgei1heGlzLiBbTGltaXQ6ID49IDBdIFtVbml0czogdnhdICoqL1xyXG5cclxuICAvKiogVGhlIG1pbmltdW0gYm91bmRzIG9mIHRoZSBmaWVsZCdzIEFBQkIuIFsoeCwgeSwgeildIFtVbml0czogd3VdICoqL1xyXG5cclxuICAvKiogVGhlIG1heGltdW0gYm91bmRzIG9mIHRoZSBmaWVsZCdzIEFBQkIuIFsoeCwgeSwgeildIFtVbml0czogd3VdICoqL1xyXG5cclxuICAvKiogVGhlIHNpemUgb2YgdGhlIG5vbi1uYXZpZ2FibGUgYm9yZGVyIGFyb3VuZCB0aGUgaGVpZ2h0ZmllbGQuIFtMaW1pdDogPj0wXSBbVW5pdHM6IHZ4XSAqKi9cclxuXHJcbiAgLyoqIFNldCB0byB0cnVlIGZvciB0aWxlZCBidWlsZCAqKi9cclxuXHJcbiAgLyoqIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIGJ1aWxkaW5nIGRldGFpbGVkIG1lc2ggKiovXHJcbiAgLy8gUmVjYXN0QnVpbGRlckNvbmZpZyhSZWNhc3RDb25maWcgY2ZnLCBibWluLCBibWF4KSB7XHJcbiAgLy8gICAgICAgICB0aGlzKGNmZywgYm1pbiwgYm1heCwgMCwgMCwgZmFsc2UpO1xyXG4gIC8vICAgICB9XHJcbiAgLy8gUmVjYXN0QnVpbGRlckNvbmZpZyhSZWNhc3RDb25maWcgY2ZnLCBibWluLCBibWF4LCAgdHgsICB0eSwgIHRpbGVkKSB7XHJcbiAgLy8gICAgICAgICB0aGlzKGNmZywgYm1pbiwgYm1heCwgdHgsIHR5LCB0aWxlZCwgdHJ1ZSk7XHJcbiAgLy8gICAgIH1cclxuICBmdW5jdGlvbiBSZWNhc3RCdWlsZGVyQ29uZmlnKGNmZywgYm1pbiwgYm1heCkge1xyXG4gICAgdmFyIHR4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAwO1xyXG4gICAgdmFyIHR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAwO1xyXG4gICAgdmFyIHRpbGVkID0gYXJndW1lbnRzLmxlbmd0aCA+IDUgJiYgYXJndW1lbnRzWzVdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNV0gOiBmYWxzZTtcclxuICAgIHZhciBidWlsZE1lc2hEZXRhaWwgPSBhcmd1bWVudHMubGVuZ3RoID4gNiAmJiBhcmd1bWVudHNbNl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s2XSA6IHRydWU7XHJcblxyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdEJ1aWxkZXJDb25maWcpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNmZ1wiLCBudWxsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3aWR0aFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWlnaHRcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1pblwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtYXhcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3JkZXJTaXplXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbGVkXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJ1aWxkTWVzaERldGFpbFwiLCBmYWxzZSk7XHJcblxyXG4gICAgdGhpcy5jZmcgPSBjZmc7XHJcbiAgICB0aGlzLnRpbGVkID0gdGlsZWQ7XHJcbiAgICB0aGlzLmJ1aWxkTWVzaERldGFpbCA9IGJ1aWxkTWVzaERldGFpbDtcclxuICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5Mih0aGlzLmJtaW4sIGJtaW4pO1xyXG4gICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkyKHRoaXMuYm1heCwgYm1heCk7XHJcblxyXG4gICAgaWYgKHRpbGVkKSB7XHJcbiAgICAgIHRzID0gY2ZnLnRpbGVTaXplICogY2ZnLmNzO1xyXG4gICAgICB0aGlzLmJtaW5bMF0gKz0gdHggKiB0cztcclxuICAgICAgdGhpcy5ibWluWzJdICs9IHR5ICogdHM7XHJcbiAgICAgIHRoaXMuYm1heFswXSA9IHRoaXMuYm1pblswXSArIHRzO1xyXG4gICAgICB0aGlzLmJtYXhbMl0gPSB0aGlzLmJtaW5bMl0gKyB0czsgLy8gRXhwYW5kIHRoZSBoZWlnaGZpZWxkIGJvdW5kaW5nIGJveCBieSBib3JkZXIgc2l6ZSB0byBmaW5kIHRoZSBleHRlbnRzIG9mIGdlb21ldHJ5IHdlIG5lZWQgdG8gYnVpbGQgdGhpc1xyXG4gICAgICAvLyB0aWxlLlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBUaGlzIGlzIGRvbmUgaW4gb3JkZXIgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIG5hdm1lc2ggdGlsZXMgY29ubmVjdCBjb3JyZWN0bHkgYXQgdGhlIGJvcmRlcnMsXHJcbiAgICAgIC8vIGFuZCB0aGUgb2JzdGFjbGVzIGNsb3NlIHRvIHRoZSBib3JkZXIgd29yayBjb3JyZWN0bHkgd2l0aCB0aGUgZGlsYXRpb24gcHJvY2Vzcy5cclxuICAgICAgLy8gTm8gcG9seWdvbnMgKG9yIGNvbnRvdXJzKSB3aWxsIGJlIGNyZWF0ZWQgb24gdGhlIGJvcmRlciBhcmVhLlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBJTVBPUlRBTlQhXHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIDonJycnJycnJyc6XHJcbiAgICAgIC8vIDogKy0tLS0tKyA6XHJcbiAgICAgIC8vIDogfCB8IDpcclxuICAgICAgLy8gOiB8IHw8LS0tIHRpbGUgdG8gYnVpbGRcclxuICAgICAgLy8gOiB8IHwgOlxyXG4gICAgICAvLyA6ICstLS0tLSsgOjwtLSBnZW9tZXRyeSBuZWVkZWRcclxuICAgICAgLy8gOi4uLi4uLi4uLjpcclxuICAgICAgLy9cclxuICAgICAgLy8gWW91IHNob3VsZCB1c2UgdGhpcyBib3VuZGluZyBib3ggdG8gcXVlcnkgeW91ciBpbnB1dCBnZW9tZXRyeS5cclxuICAgICAgLy9cclxuICAgICAgLy8gRm9yIGV4YW1wbGUgaWYgeW91IGJ1aWxkIGEgbmF2bWVzaCBmb3IgdGVycmFpbiwgYW5kIHdhbnQgdGhlIG5hdm1lc2ggdGlsZXMgdG8gbWF0Y2ggdGhlIHRlcnJhaW4gdGlsZSBzaXplXHJcbiAgICAgIC8vIHlvdSB3aWxsIG5lZWQgdG8gcGFzcyBpbiBkYXRhIGZyb20gbmVpZ2hib3VyIHRlcnJhaW4gdGlsZXMgdG9vISBJbiBhIHNpbXBsZSBjYXNlLCBqdXN0IHBhc3MgaW4gYWxsIHRoZSA4XHJcbiAgICAgIC8vIG5laWdoYm91cnMsXHJcbiAgICAgIC8vIG9yIHVzZSB0aGUgYm91bmRpbmcgYm94IGJlbG93IHRvIG9ubHkgcGFzcyBpbiBhIHNsaXZlciBvZiBlYWNoIG9mIHRoZSA4IG5laWdoYm91cnMuXHJcblxyXG4gICAgICB0aGlzLmJvcmRlclNpemUgPSBjZmcud2Fsa2FibGVSYWRpdXMgKyAzOyAvLyBSZXNlcnZlIGVub3VnaCBwYWRkaW5nLlxyXG5cclxuICAgICAgdGhpcy5ibWluWzBdIC09IHRoaXMuYm9yZGVyU2l6ZSAqIGNmZy5jcztcclxuICAgICAgdGhpcy5ibWluWzJdIC09IHRoaXMuYm9yZGVyU2l6ZSAqIGNmZy5jcztcclxuICAgICAgdGhpcy5ibWF4WzBdICs9IHRoaXMuYm9yZGVyU2l6ZSAqIGNmZy5jcztcclxuICAgICAgdGhpcy5ibWF4WzJdICs9IHRoaXMuYm9yZGVyU2l6ZSAqIGNmZy5jcztcclxuICAgICAgdGhpcy53aWR0aCA9IGNmZy50aWxlU2l6ZSArIHRoaXMuYm9yZGVyU2l6ZSAqIDI7XHJcbiAgICAgIHRoaXMuaGVpZ2h0ID0gY2ZnLnRpbGVTaXplICsgdGhpcy5ib3JkZXJTaXplICogMjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZhciB3aCA9IFJlY2FzdC5jYWxjR3JpZFNpemUodGhpcy5ibWluLCB0aGlzLmJtYXgsIGNmZy5jcyk7XHJcbiAgICAgIHRoaXMud2lkdGggPSB3aFswXTtcclxuICAgICAgdGhpcy5oZWlnaHQgPSB3aFsxXTtcclxuICAgICAgdGhpcy5ib3JkZXJTaXplID0gMDtcclxuICAgIH0gLy9BRERFRDpcclxuXHJcblxyXG4gICAgdGhpcy53aWR0aCA9IE1hdGguZmxvb3IodGhpcy53aWR0aCk7XHJcbiAgICB0aGlzLmhlaWdodCA9IE1hdGguZmxvb3IodGhpcy5oZWlnaHQpO1xyXG4gIH07XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIHZhciBDb250ZXh0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvbnRleHQoKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoQ29udGV4dCwgW3tcclxuICAgICAga2V5OiBcInN0YXJ0VGltZXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0VGltZXIoc3RyaW5nKSB7Ly8gVE9ETyBBdXRvLWdlbmVyYXRlZCBtZXRob2Qgc3R1YlxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJzdG9wVGltZXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3BUaW1lcihzdHJpbmcpIHsvLyBUT0RPIEF1dG8tZ2VuZXJhdGVkIG1ldGhvZCBzdHViXHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIndhcm5cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHdhcm4oc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coc3RyaW5nKTtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBDb250ZXh0O1xyXG4gIH0oKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKiBSZXByZXNlbnRzIGEgaGVpZ2h0ZmllbGQgbGF5ZXIgd2l0aGluIGEgbGF5ZXIgc2V0LiAqL1xyXG4gIHZhciBIZWlnaHRmaWVsZCA9XHJcbiAgLyoqIFRoZSB3aWR0aCBvZiB0aGUgaGVpZ2h0ZmllbGQuIChBUG9seSB0aGUgeC1heGlzIGluIGNlbGwgdW5pdHMuKSAqL1xyXG5cclxuICAvKiogVGhlIGhlaWdodCBvZiB0aGUgaGVpZ2h0ZmllbGQuIChBUG9seSB0aGUgei1heGlzIGluIGNlbGwgdW5pdHMuKSAqL1xyXG5cclxuICAvKiogVGhlIG1pbmltdW0gYm91bmRzIGluIHdvcmxkIHNwYWNlLiBbKHgsIHksIHopXSAqL1xyXG5cclxuICAvKiogVGhlIG1heGltdW0gYm91bmRzIGluIHdvcmxkIHNwYWNlLiBbKHgsIHksIHopXSAqL1xyXG5cclxuICAvKiogVGhlIHNpemUgb2YgZWFjaCBjZWxsLiAoT24gdGhlIHh6LXBsYW5lLikgKi9cclxuXHJcbiAgLyoqIFRoZSBoZWlnaHQgb2YgZWFjaCBjZWxsLiAoVGhlIG1pbmltdW0gaW5jcmVtZW50IGFQb2x5IHRoZSB5LWF4aXMuKSAqL1xyXG5cclxuICAvKiogSGVpZ2h0ZmllbGQgb2Ygc3BhbnMgKHdpZHRoKmhlaWdodCkuICovXHJcbiAgZnVuY3Rpb24gSGVpZ2h0ZmllbGQod2lkdGgsIGhlaWdodCwgYm1pbiwgYm1heCwgY3MsIGNoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGVpZ2h0ZmllbGQpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndpZHRoXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlaWdodFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWluXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1heFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNzXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzcGFuc1wiLCBbXSk7XHJcblxyXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICB0aGlzLmJtaW4gPSBibWluO1xyXG4gICAgdGhpcy5ibWF4ID0gYm1heDtcclxuICAgIHRoaXMuY3MgPSBjcztcclxuICAgIHRoaXMuY2ggPSBjaDtcclxuICAgIHRoaXMuc3BhbnMgPSBuZXcgQXJyYXkod2lkdGggKiBoZWlnaHQpO1xyXG4gIH07XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG5cclxuICAvKiogUmVwcmVzZW50cyBhIHNwYW4gaW4gYSBoZWlnaHRmaWVsZC4gKi9cclxuICB2YXIgU3BhbiA9IGZ1bmN0aW9uIFNwYW4oKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3Bhbik7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic21pblwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzbWF4XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFyZWFcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibmV4dFwiLCBudWxsKTtcclxuICB9O1xyXG5cclxuICB2YXIgUmVjYXN0UmFzdGVyaXphdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWNhc3RSYXN0ZXJpemF0aW9uKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0UmFzdGVyaXphdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFJlY2FzdFJhc3Rlcml6YXRpb24sIG51bGwsIFt7XHJcbiAgICAgIGtleTogXCJvdmVybGFwQm91bmRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVybGFwQm91bmRzKGFtaW4sIGFtYXgsIGJtaW4sIGJtYXgpIHtcclxuICAgICAgICB2YXIgb3ZlcmxhcCA9IHRydWU7XHJcbiAgICAgICAgb3ZlcmxhcCA9IGFtaW5bMF0gPiBibWF4WzBdIHx8IGFtYXhbMF0gPCBibWluWzBdID8gZmFsc2UgOiBvdmVybGFwO1xyXG4gICAgICAgIG92ZXJsYXAgPSBhbWluWzFdID4gYm1heFsxXSB8fCBhbWF4WzFdIDwgYm1pblsxXSA/IGZhbHNlIDogb3ZlcmxhcDtcclxuICAgICAgICBvdmVybGFwID0gYW1pblsyXSA+IGJtYXhbMl0gfHwgYW1heFsyXSA8IGJtaW5bMl0gPyBmYWxzZSA6IG92ZXJsYXA7XHJcbiAgICAgICAgcmV0dXJuIG92ZXJsYXA7XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRoZSBzcGFuIGFkZGl0aW9uIGNhbiBiZSBzZXQgdG8gZmF2b3IgZmxhZ3MuIElmIHRoZSBzcGFuIGlzIG1lcmdlZCB0byBhbm90aGVyIHNwYW4gYW5kIHRoZSBuZXcgJ3NtYXgnIGlzXHJcbiAgICAgICAqIHdpdGhpbiAnZmxhZ01lcmdlVGhyJyB1bml0cyBmcm9tIHRoZSBleGlzdGluZyBzcGFuLCB0aGUgc3BhbiBmbGFncyBhcmUgbWVyZ2VkLlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHNlZSBIZWlnaHRmaWVsZCwgU3Bhbi5cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkU3BhblwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU3BhbihoZiwgeCwgeSwgc21pbiwgc21heCwgYXJlYSwgZmxhZ01lcmdlVGhyKSB7XHJcbiAgICAgICAgdmFyIGlkeCA9IHggKyB5ICogaGYud2lkdGg7XHJcbiAgICAgICAgdmFyIHMgPSBuZXcgU3BhbigpO1xyXG4gICAgICAgIHMuc21pbiA9IHNtaW47XHJcbiAgICAgICAgcy5zbWF4ID0gc21heDtcclxuICAgICAgICBzLmFyZWEgPSBhcmVhO1xyXG4gICAgICAgIHMubmV4dCA9IG51bGw7IC8vIEVtcHR5IGNlbGwsIGFkZCB0aGUgZmlyc3Qgc3Bhbi5cclxuXHJcbiAgICAgICAgaWYgKGhmLnNwYW5zW2lkeF0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgaGYuc3BhbnNbaWR4XSA9IHM7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcHJldiA9IG51bGw7XHJcbiAgICAgICAgdmFyIGN1ciA9IGhmLnNwYW5zW2lkeF07IC8vIEluc2VydCBhbmQgbWVyZ2Ugc3BhbnMuXHJcblxyXG4gICAgICAgIHdoaWxlIChjdXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgaWYgKGN1ci5zbWluID4gcy5zbWF4KSB7XHJcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgc3BhbiBpcyBmdXJ0aGVyIHRoYW4gdGhlIG5ldyBzcGFuLCBicmVhay5cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1ci5zbWF4IDwgcy5zbWluKSB7XHJcbiAgICAgICAgICAgIC8vIEN1cnJlbnQgc3BhbiBpcyBiZWZvcmUgdGhlIG5ldyBzcGFuIGFkdmFuY2UuXHJcbiAgICAgICAgICAgIHByZXYgPSBjdXI7XHJcbiAgICAgICAgICAgIGN1ciA9IGN1ci5uZXh0O1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTWVyZ2Ugc3BhbnMuXHJcbiAgICAgICAgICAgIGlmIChjdXIuc21pbiA8IHMuc21pbikgcy5zbWluID0gY3VyLnNtaW47XHJcbiAgICAgICAgICAgIGlmIChjdXIuc21heCA+IHMuc21heCkgcy5zbWF4ID0gY3VyLnNtYXg7IC8vIE1lcmdlIGZsYWdzLlxyXG5cclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHMuc21heCAtIGN1ci5zbWF4KSA8PSBmbGFnTWVyZ2VUaHIpIHMuYXJlYSA9IE1hdGgubWF4KHMuYXJlYSwgY3VyLmFyZWEpOyAvLyBSZW1vdmUgY3VycmVudCBzcGFuLlxyXG5cclxuICAgICAgICAgICAgdmFyIG5leHQgPSBjdXIubmV4dDtcclxuICAgICAgICAgICAgaWYgKHByZXYgIT0gbnVsbCkgcHJldi5uZXh0ID0gbmV4dDtlbHNlIGhmLnNwYW5zW2lkeF0gPSBuZXh0O1xyXG4gICAgICAgICAgICBjdXIgPSBuZXh0O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gSW5zZXJ0IG5ldyBzcGFuLlxyXG5cclxuXHJcbiAgICAgICAgaWYgKHByZXYgIT0gbnVsbCkge1xyXG4gICAgICAgICAgcy5uZXh0ID0gcHJldi5uZXh0O1xyXG4gICAgICAgICAgcHJldi5uZXh0ID0gcztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcy5uZXh0ID0gaGYuc3BhbnNbaWR4XTtcclxuICAgICAgICAgIGhmLnNwYW5zW2lkeF0gPSBzO1xyXG4gICAgICAgIH1cclxuICAgICAgfSAvL2RpdmlkZXMgYSBjb252ZXggcG9seWdvbnMgaW50byB0d28gY29udmV4IHBvbHlnb25zIG9uIGJvdGggc2lkZXMgb2YgYSBsaW5lXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGl2aWRlUG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGl2aWRlUG9seShidWYsIF9pbiwgbmluLCBvdXQxLCBvdXQyLCB4LCBheGlzKSB7XHJcbiAgICAgICAgdmFyIGQgPSBuZXcgQXJyYXkoMTIpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5pbjsgKytpKSB7XHJcbiAgICAgICAgICBkW2ldID0geCAtIGJ1ZltfaW4gKyBpICogMyArIGF4aXNdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG0gPSAwLFxyXG4gICAgICAgICAgICBuID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBqID0gbmluIC0gMTsgX2kgPCBuaW47IGogPSBfaSwgKytfaSkge1xyXG4gICAgICAgICAgdmFyIGluYSA9IGRbal0gPj0gMDtcclxuICAgICAgICAgIHZhciBpbmIgPSBkW19pXSA+PSAwO1xyXG5cclxuICAgICAgICAgIGlmIChpbmEgIT0gaW5iKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gZFtqXSAvIChkW2pdIC0gZFtfaV0pO1xyXG4gICAgICAgICAgICBidWZbb3V0MSArIG0gKiAzICsgMF0gPSBidWZbX2luICsgaiAqIDMgKyAwXSArIChidWZbX2luICsgX2kgKiAzICsgMF0gLSBidWZbX2luICsgaiAqIDMgKyAwXSkgKiBzO1xyXG4gICAgICAgICAgICBidWZbb3V0MSArIG0gKiAzICsgMV0gPSBidWZbX2luICsgaiAqIDMgKyAxXSArIChidWZbX2luICsgX2kgKiAzICsgMV0gLSBidWZbX2luICsgaiAqIDMgKyAxXSkgKiBzO1xyXG4gICAgICAgICAgICBidWZbb3V0MSArIG0gKiAzICsgMl0gPSBidWZbX2luICsgaiAqIDMgKyAyXSArIChidWZbX2luICsgX2kgKiAzICsgMl0gLSBidWZbX2luICsgaiAqIDMgKyAyXSkgKiBzO1xyXG4gICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTQoYnVmLCBvdXQyICsgbiAqIDMsIGJ1Ziwgb3V0MSArIG0gKiAzKTtcclxuICAgICAgICAgICAgbSsrO1xyXG4gICAgICAgICAgICBuKys7IC8vIGFkZCB0aGUgaSd0aCBwb1BvbHkgdG8gdGhlIHJpZ2h0IHBvbHlnb24uIERvIE5PVCBhZGQgcG9pbnRzIHRoYXQgYXJlIG9uIHRoZSBkaXZpZGluZyBsaW5lXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXNlIHdlcmUgYWxyZWFkeSBhZGRlZCBhYm92ZVxyXG5cclxuICAgICAgICAgICAgaWYgKGRbX2ldID4gMCkge1xyXG4gICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5NChidWYsIG91dDEgKyBtICogMywgYnVmLCBfaW4gKyBfaSAqIDMpO1xyXG4gICAgICAgICAgICAgIG0rKztcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkW19pXSA8IDApIHtcclxuICAgICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTQoYnVmLCBvdXQyICsgbiAqIDMsIGJ1ZiwgX2luICsgX2kgKiAzKTtcclxuICAgICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSAvLyBzYW1lIHNpZGVcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIC8vIGFkZCB0aGUgaSd0aCBwb1BvbHkgdG8gdGhlIHJpZ2h0IHBvbHlnb24uIEFkZGl0aW9uIGlzIGRvbmUgZXZlbiBmb3IgcG9pbnRzIG9uIHRoZSBkaXZpZGluZyBsaW5lXHJcbiAgICAgICAgICAgICAgaWYgKGRbX2ldID49IDApIHtcclxuICAgICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5NChidWYsIG91dDEgKyBtICogMywgYnVmLCBfaW4gKyBfaSAqIDMpO1xyXG4gICAgICAgICAgICAgICAgbSsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRbX2ldICE9IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1Ziwgb3V0MiArIG4gKiAzLCBidWYsIF9pbiArIF9pICogMyk7XHJcbiAgICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW20sIG5dO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyYXN0ZXJpemVUcmlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJhc3Rlcml6ZVRyaSh2ZXJ0cywgdjAsIHYxLCB2MiwgYXJlYSwgaGYsIGJtaW4sIGJtYXgsIGNzLCBpY3MsIGljaCwgZmxhZ01lcmdlVGhyKSB7XHJcbiAgICAgICAgdmFyIHcgPSBoZi53aWR0aDtcclxuICAgICAgICB2YXIgaCA9IGhmLmhlaWdodDtcclxuICAgICAgICB2YXIgdG1pbiA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICB2YXIgdG1heCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICB2YXIgYnkgPSBibWF4WzFdIC0gYm1pblsxXTsgLy8gQ2FsY3VsYXRlIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIHRyaWFuZ2xlLlxyXG5cclxuICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTModG1pbiwgdmVydHMsIHYwICogMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkzKHRtYXgsIHZlcnRzLCB2MCAqIDMpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5taW4odG1pbiwgdmVydHMsIHYxICogMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1pbih0bWluLCB2ZXJ0cywgdjIgKiAzKTtcclxuICAgICAgICBSZWNhc3RWZWN0b3JzJDEubWF4KHRtYXgsIHZlcnRzLCB2MSAqIDMpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5tYXgodG1heCwgdmVydHMsIHYyICogMyk7IC8vIElmIHRoZSB0cmlhbmdsZSBkb2VzIG5vdCB0b3VjaCB0aGUgYmJveCBvZiB0aGUgaGVpZ2h0ZmllbGQsIHNraXAgdGhlIHRyaWFnbGUuXHJcblxyXG4gICAgICAgIGlmICghUmVjYXN0UmFzdGVyaXphdGlvbi5vdmVybGFwQm91bmRzKGJtaW4sIGJtYXgsIHRtaW4sIHRtYXgpKSByZXR1cm47IC8vIENhbGN1bGF0ZSB0aGUgZm9vdHByUG9seSBvZiB0aGUgdHJpYW5nbGUgb24gdGhlIGdyaWQncyB5LWF4aXNcclxuXHJcbiAgICAgICAgdmFyIHkwID0gTWF0aC5mbG9vcigodG1pblsyXSAtIGJtaW5bMl0pICogaWNzKTtcclxuICAgICAgICB2YXIgeTEgPSBNYXRoLmZsb29yKCh0bWF4WzJdIC0gYm1pblsyXSkgKiBpY3MpO1xyXG4gICAgICAgIHkwID0gUmVjYXN0Q29tbW9uLmNsYW1wKHkwLCAwLCBoIC0gMSk7XHJcbiAgICAgICAgeTEgPSBSZWNhc3RDb21tb24uY2xhbXAoeTEsIDAsIGggLSAxKTsgLy8gQ2xpcCB0aGUgdHJpYW5nbGUgaW50byBhbGwgZ3JpZCBjZWxscyBpdCB0b3VjaGVzLlxyXG5cclxuICAgICAgICB2YXIgYnVmID0gbmV3IEFycmF5KDcgKiAzICogNCkuZmlsbCgwKTtcclxuICAgICAgICB2YXIgX2luID0gMDtcclxuICAgICAgICB2YXIgaW5yb3cgPSA3ICogMztcclxuICAgICAgICB2YXIgcDEgPSBpbnJvdyArIDcgKiAzO1xyXG4gICAgICAgIHZhciBwMiA9IHAxICsgNyAqIDM7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1ZiwgMCwgdmVydHMsIHYwICogMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1ZiwgMywgdmVydHMsIHYxICogMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KGJ1ZiwgNiwgdmVydHMsIHYyICogMyk7XHJcbiAgICAgICAgdmFyIG52cm93LFxyXG4gICAgICAgICAgICBudkluID0gMztcclxuXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IHkwOyB5IDw9IHkxOyArK3kpIHtcclxuICAgICAgICAgIC8vIENsaXAgcG9seWdvbiB0byByb3cuIFN0b3JlIHRoZSByZW1haW5pbmcgcG9seWdvbiBhcyB3ZWxsXHJcbiAgICAgICAgICB2YXIgY3ogPSBibWluWzJdICsgeSAqIGNzO1xyXG4gICAgICAgICAgdmFyIG52cm93aW4gPSBSZWNhc3RSYXN0ZXJpemF0aW9uLmRpdmlkZVBvbHkoYnVmLCBfaW4sIG52SW4sIGlucm93LCBwMSwgY3ogKyBjcywgMik7XHJcbiAgICAgICAgICBudnJvdyA9IG52cm93aW5bMF07XHJcbiAgICAgICAgICBudkluID0gbnZyb3dpblsxXTtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIHRlbXAgPSBfaW47XHJcbiAgICAgICAgICAgIF9pbiA9IHAxO1xyXG4gICAgICAgICAgICBwMSA9IHRlbXA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAobnZyb3cgPCAzKSBjb250aW51ZTsgLy8gZmluZCB0aGUgaG9yaXpvbnRhbCBib3VuZHMgX2luIHRoZSByb3dcclxuXHJcbiAgICAgICAgICB2YXIgbWluWCA9IGJ1ZltpbnJvd107XHJcbiAgICAgICAgICB2YXIgbWF4WCA9IGJ1ZltpbnJvd107XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBudnJvdzsgKytpKSB7XHJcbiAgICAgICAgICAgIGlmIChtaW5YID4gYnVmW2lucm93ICsgaSAqIDNdKSBtaW5YID0gYnVmW2lucm93ICsgaSAqIDNdO1xyXG4gICAgICAgICAgICBpZiAobWF4WCA8IGJ1ZltpbnJvdyArIGkgKiAzXSkgbWF4WCA9IGJ1ZltpbnJvdyArIGkgKiAzXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgeDAgPSBNYXRoLmZsb29yKChtaW5YIC0gYm1pblswXSkgKiBpY3MpO1xyXG4gICAgICAgICAgdmFyIHgxID0gTWF0aC5mbG9vcigobWF4WCAtIGJtaW5bMF0pICogaWNzKTtcclxuICAgICAgICAgIHgwID0gUmVjYXN0Q29tbW9uLmNsYW1wKHgwLCAwLCB3IC0gMSk7XHJcbiAgICAgICAgICB4MSA9IFJlY2FzdENvbW1vbi5jbGFtcCh4MSwgMCwgdyAtIDEpO1xyXG4gICAgICAgICAgdmFyIG52ID0gdm9pZCAwLFxyXG4gICAgICAgICAgICAgIG52MiA9IG52cm93O1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIHggPSB4MDsgeCA8PSB4MTsgKyt4KSB7XHJcbiAgICAgICAgICAgIC8vIENsaXAgcG9seWdvbiB0byBjb2x1bW4uIHN0b3JlIHRoZSByZW1haW5pbmcgcG9seWdvbiBhcyB3ZWxsXHJcbiAgICAgICAgICAgIHZhciBjeCA9IGJtaW5bMF0gKyB4ICogY3M7XHJcbiAgICAgICAgICAgIHZhciBudm52MiA9IFJlY2FzdFJhc3Rlcml6YXRpb24uZGl2aWRlUG9seShidWYsIGlucm93LCBudjIsIHAxLCBwMiwgY3ggKyBjcywgMCk7XHJcbiAgICAgICAgICAgIG52ID0gbnZudjJbMF07XHJcbiAgICAgICAgICAgIG52MiA9IG52bnYyWzFdO1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdmFyIF90ZW1wID0gaW5yb3c7XHJcbiAgICAgICAgICAgICAgaW5yb3cgPSBwMjtcclxuICAgICAgICAgICAgICBwMiA9IF90ZW1wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChudiA8IDMpIGNvbnRpbnVlOyAvLyBDYWxjdWxhdGUgbWluIGFuZCBtYXggb2YgdGhlIHNwYW4uXHJcblxyXG4gICAgICAgICAgICB2YXIgc21pbiA9IGJ1ZltwMSArIDFdO1xyXG4gICAgICAgICAgICB2YXIgc21heCA9IGJ1ZltwMSArIDFdO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kyID0gMTsgX2kyIDwgbnY7ICsrX2kyKSB7XHJcbiAgICAgICAgICAgICAgc21pbiA9IE1hdGgubWluKHNtaW4sIGJ1ZltwMSArIF9pMiAqIDMgKyAxXSk7XHJcbiAgICAgICAgICAgICAgc21heCA9IE1hdGgubWF4KHNtYXgsIGJ1ZltwMSArIF9pMiAqIDMgKyAxXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNtaW4gLT0gYm1pblsxXTtcclxuICAgICAgICAgICAgc21heCAtPSBibWluWzFdOyAvLyBTa2lwIHRoZSBzcGFuIGlmIGl0IGlzIG91dHNpZGUgdGhlIGhlaWdodGZpZWxkIGJib3hcclxuXHJcbiAgICAgICAgICAgIGlmIChzbWF4IDwgMC4wKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKHNtaW4gPiBieSkgY29udGludWU7IC8vIENsYW1wIHRoZSBzcGFuIHRvIHRoZSBoZWlnaHRmaWVsZCBiYm94LlxyXG5cclxuICAgICAgICAgICAgaWYgKHNtaW4gPCAwLjApIHNtaW4gPSAwO1xyXG4gICAgICAgICAgICBpZiAoc21heCA+IGJ5KSBzbWF4ID0gYnk7IC8vIFNuYXAgdGhlIHNwYW4gdG8gdGhlIGhlaWdodGZpZWxkIGhlaWdodCBncmlkLlxyXG5cclxuICAgICAgICAgICAgdmFyIGlzbWluID0gUmVjYXN0Q29tbW9uLmNsYW1wKE1hdGguZmxvb3Ioc21pbiAqIGljaCksIDAsIFJlY2FzdENvbnN0YW50cy5SQ19TUEFOX01BWF9IRUlHSFQpO1xyXG4gICAgICAgICAgICB2YXIgaXNtYXggPSBSZWNhc3RDb21tb24uY2xhbXAoTWF0aC5jZWlsKHNtYXggKiBpY2gpLCBpc21pbiArIDEsIFJlY2FzdENvbnN0YW50cy5SQ19TUEFOX01BWF9IRUlHSFQpO1xyXG4gICAgICAgICAgICBSZWNhc3RSYXN0ZXJpemF0aW9uLmFkZFNwYW4oaGYsIHgsIHksIGlzbWluLCBpc21heCwgYXJlYSwgZmxhZ01lcmdlVGhyKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE5vIHNwYW5zIHdpbGwgYmUgYWRkZWQgaWYgdGhlIHRyaWFuZ2xlIGRvZXMgbm90IG92ZXJsYXAgdGhlIGhlaWdodGZpZWxkIGdyaWQuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAc2VlIEhlaWdodGZpZWxkXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJhc3Rlcml6ZVRyaWFuZ2xlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByYXN0ZXJpemVUcmlhbmdsZShjdHgsIHZlcnRzLCB2MCwgdjEsIHYyLCBhcmVhLCBzb2xpZCwgZmxhZ01lcmdlVGhyKSB7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJSQVNURVJJWkVfVFJJQU5HTEVTXCIpO1xyXG4gICAgICAgIGljcyA9IDEuMCAvIHNvbGlkLmNzO1xyXG4gICAgICAgIGljaCA9IDEuMCAvIHNvbGlkLmNoO1xyXG4gICAgICAgIHJhc3Rlcml6ZVRyaSh2ZXJ0cywgdjAsIHYxLCB2MiwgYXJlYSwgc29saWQsIHNvbGlkLmJtaW4sIHNvbGlkLmJtYXgsIHNvbGlkLmNzLCBpY3MsIGljaCwgZmxhZ01lcmdlVGhyKTtcclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiUkFTVEVSSVpFX1RSSUFOR0xFU1wiKTtcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogU3BhbnMgd2lsbCBvbmx5IGJlIGFkZGVkIGZvciB0cmlhbmdsZXMgdGhhdCBvdmVybGFwIHRoZSBoZWlnaHRmaWVsZCBncmlkLlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHNlZSBIZWlnaHRmaWVsZFxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyYXN0ZXJpemVUcmlhbmdsZXNBXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByYXN0ZXJpemVUcmlhbmdsZXNBKGN0eCwgdmVydHMsIHRyaXMsIGFyZWFzLCBudCwgc29saWQsIGZsYWdNZXJnZVRocikge1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiUkFTVEVSSVpFX1RSSUFOR0xFU1wiKTtcclxuICAgICAgICB2YXIgaWNzID0gMS4wIC8gc29saWQuY3M7XHJcbiAgICAgICAgdmFyIGljaCA9IDEuMCAvIHNvbGlkLmNoOyAvLyBSYXN0ZXJpemUgdHJpYW5nbGVzLlxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG50OyArK2kpIHtcclxuICAgICAgICAgIHZhciB2MCA9IHRyaXNbaSAqIDMgKyAwXTtcclxuICAgICAgICAgIHZhciB2MSA9IHRyaXNbaSAqIDMgKyAxXTtcclxuICAgICAgICAgIHZhciB2MiA9IHRyaXNbaSAqIDMgKyAyXTsgLy8gUmFzdGVyaXplLlxyXG5cclxuICAgICAgICAgIFJlY2FzdFJhc3Rlcml6YXRpb24ucmFzdGVyaXplVHJpKHZlcnRzLCB2MCwgdjEsIHYyLCBhcmVhc1tpXSwgc29saWQsIHNvbGlkLmJtaW4sIHNvbGlkLmJtYXgsIHNvbGlkLmNzLCBpY3MsIGljaCwgZmxhZ01lcmdlVGhyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJSQVNURVJJWkVfVFJJQU5HTEVTXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTcGFucyB3aWxsIG9ubHkgYmUgYWRkZWQgZm9yIHRyaWFuZ2xlcyB0aGF0IG92ZXJsYXAgdGhlIGhlaWdodGZpZWxkIGdyaWQuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAc2VlIEhlaWdodGZpZWxkXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJhc3Rlcml6ZVRyaWFuZ2xlc0JcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJhc3Rlcml6ZVRyaWFuZ2xlc0IoY3R4LCB2ZXJ0cywgYXJlYXMsIG50LCBzb2xpZCwgZmxhZ01lcmdlVGhyKSB7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJSQVNURVJJWkVfVFJJQU5HTEVTXCIpO1xyXG4gICAgICAgIHZhciBpY3MgPSAxLjAgLyBzb2xpZC5jcztcclxuICAgICAgICB2YXIgaWNoID0gMS4wIC8gc29saWQuY2g7IC8vIFJhc3Rlcml6ZSB0cmlhbmdsZXMuXHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnQ7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHYwID0gaSAqIDMgKyAwO1xyXG4gICAgICAgICAgdmFyIHYxID0gaSAqIDMgKyAxO1xyXG4gICAgICAgICAgdmFyIHYyID0gaSAqIDMgKyAyOyAvLyBSYXN0ZXJpemUuXHJcblxyXG4gICAgICAgICAgUmVjYXN0UmFzdGVyaXphdGlvbi5yYXN0ZXJpemVUcmkodmVydHMsIHYwLCB2MSwgdjIsIGFyZWFzW2ldLCBzb2xpZCwgc29saWQuYm1pbiwgc29saWQuYm1heCwgc29saWQuY3MsIGljcywgaWNoLCBmbGFnTWVyZ2VUaHIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIlJBU1RFUklaRV9UUklBTkdMRVNcIik7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gUmVjYXN0UmFzdGVyaXphdGlvbjtcclxuICB9KCk7XHJcblxyXG4gIHZhciBSZWNhc3RGaWx0ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVjYXN0RmlsdGVyKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0RmlsdGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0RmlsdGVyLCBudWxsLCBbe1xyXG4gICAgICBrZXk6IFwiZmlsdGVyTG93SGFuZ2luZ1dhbGthYmxlT2JzdGFjbGVzXCIsXHJcbiAgICAgIC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQWxsb3dzIHRoZSBmb3JtYXRpb24gb2Ygd2Fsa2FibGUgcmVnaW9ucyB0aGF0IHdpbGwgZmxvdyBvdmVyIGxvdyBseWluZyBcclxuICAgICAgLy8vIG9iamVjdHMgc3VjaCBhcyBjdXJicywgYW5kIHVwIHN0cnVjdHVyZXMgc3VjaCBhcyBzdGFpcndheXMuIFxyXG4gICAgICAvLy8gXHJcbiAgICAgIC8vLyBUd28gbmVpZ2hib3Jpbmcgc3BhbnMgYXJlIHdhbGthYmxlIGlmOiA8dHQ+cmNBYnMoY3VycmVudFNwYW4uc21heCAtIG5laWdoYm9yU3Bhbi5zbWF4KSA8IHdha2xhYmxlQ2xpbWI8L3R0PlxyXG4gICAgICAvLy8gXHJcbiAgICAgIC8vLyBAd2FybmluZyBXaWxsIG92ZXJyaWRlIHRoZSBlZmZlY3Qgb2YgI3JjRmlsdGVyTGVkZ2VTcGFucy4gIFNvIGlmIGJvdGggZmlsdGVycyBhcmUgdXNlZCwgY2FsbFxyXG4gICAgICAvLy8gI3JjRmlsdGVyTGVkZ2VTcGFucyBhZnRlciBjYWxsaW5nIHRoaXMgZmlsdGVyLiBcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjSGVpZ2h0ZmllbGQsIHJjQ29uZmlnXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJMb3dIYW5naW5nV2Fsa2FibGVPYnN0YWNsZXMoY3R4LCB3YWxrYWJsZUNsaW1iLCBzb2xpZCkge1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiRklMVEVSX0xPV19PQlNUQUNMRVNcIik7XHJcbiAgICAgICAgdmFyIHcgPSBzb2xpZC53aWR0aDtcclxuICAgICAgICB2YXIgaCA9IHNvbGlkLmhlaWdodDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHtcclxuICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgKyt4KSB7XHJcbiAgICAgICAgICAgIHZhciBwcyA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c1dhbGthYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0FyZWEgPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgcyA9IHNvbGlkLnNwYW5zW3ggKyB5ICogd107IHMgIT0gbnVsbDsgcHMgPSBzLCBzID0gcy5uZXh0KSB7XHJcbiAgICAgICAgICAgICAgdmFyIHdhbGthYmxlID0gcy5hcmVhICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUE7IC8vIElmIGN1cnJlbnQgc3BhbiBpcyBub3Qgd2Fsa2FibGUsIGJ1dCB0aGVyZSBpcyB3YWxrYWJsZVxyXG4gICAgICAgICAgICAgIC8vIHNwYW4ganVzdCBiZWxvdyBpdCwgbWFyayB0aGUgc3BhbiBhYm92ZSBpdCB3YWxrYWJsZSB0b28uXHJcblxyXG4gICAgICAgICAgICAgIGlmICghd2Fsa2FibGUgJiYgcHJldmlvdXNXYWxrYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHMuc21heCAtIHBzLnNtYXgpIDw9IHdhbGthYmxlQ2xpbWIpIHMuYXJlYSA9IHByZXZpb3VzQXJlYTtcclxuICAgICAgICAgICAgICB9IC8vIENvcHkgd2Fsa2FibGUgZmxhZyBzbyB0aGF0IGl0IGNhbm5vdCBwcm9wYWdhdGVcclxuICAgICAgICAgICAgICAvLyBwYXN0IG11bHRpcGxlIG5vbi13YWxrYWJsZSBvYmplY3RzLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgcHJldmlvdXNXYWxrYWJsZSA9IHdhbGthYmxlO1xyXG4gICAgICAgICAgICAgIHByZXZpb3VzQXJlYSA9IHMuYXJlYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIkZJTFRFUl9MT1dfT0JTVEFDTEVTXCIpO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQSBsZWRnZSBpcyBhIHNwYW4gd2l0aCBvbmUgb3IgbW9yZSBuZWlnaGJvcnMgd2hvc2UgbWF4aW11bSBpcyBmdXJ0aGVyIGF3YXkgdGhhbiBAcCB3YWxrYWJsZUNsaW1iXHJcbiAgICAgIC8vLyBmcm9tIHRoZSBjdXJyZW50IHNwYW4ncyBtYXhpbXVtLlxyXG4gICAgICAvLy8gVGhpcyBtZXRob2QgcmVtb3ZlcyB0aGUgaW1wYWN0IG9mIHRoZSBvdmVyZXN0aW1hdGlvbiBvZiBjb25zZXJ2YXRpdmUgdm94ZWxpemF0aW9uIFxyXG4gICAgICAvLy8gc28gdGhlIHJlc3VsdGluZyBtZXNoIHdpbGwgbm90IGhhdmUgcmVnaW9ucyBoYW5naW5nIGluIHRoZSBhaXIgb3ZlciBsZWRnZXMuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIEEgc3BhbiBpcyBhIGxlZGdlIGlmOiA8dHQ+cmNBYnMoY3VycmVudFNwYW4uc21heCAtIG5laWdoYm9yU3Bhbi5zbWF4KSA+IHdhbGthYmxlQ2xpbWI8L3R0PlxyXG4gICAgICAvLy8gXHJcbiAgICAgIC8vLyBAc2VlIHJjSGVpZ2h0ZmllbGQsIHJjQ29uZmlnXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmlsdGVyTGVkZ2VTcGFuc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyTGVkZ2VTcGFucyhjdHgsIHdhbGthYmxlSGVpZ2h0LCB3YWxrYWJsZUNsaW1iLCBzb2xpZCkge1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiRklMVEVSX0JPUkRFUlwiKTtcclxuICAgICAgICB2YXIgdyA9IHNvbGlkLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gc29saWQuaGVpZ2h0O1xyXG4gICAgICAgIHZhciBNQVhfSEVJR0hUID0gMHhmZmY7IC8vIE1hcmsgYm9yZGVyIHNwYW5zLlxyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgcyA9IHNvbGlkLnNwYW5zW3ggKyB5ICogd107IHMgIT0gbnVsbDsgcyA9IHMubmV4dCkge1xyXG4gICAgICAgICAgICAgIC8vIFNraXAgbm9uIHdhbGthYmxlIHNwYW5zLlxyXG4gICAgICAgICAgICAgIGlmIChzLmFyZWEgPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgdmFyIGJvdCA9IHMuc21heDtcclxuICAgICAgICAgICAgICB2YXIgdG9wID0gcy5uZXh0ICE9IG51bGwgPyBzLm5leHQuc21pbiA6IE1BWF9IRUlHSFQ7IC8vIEZpbmQgbmVpZ2hib3VycyBtaW5pbXVtIGhlaWdodC5cclxuXHJcbiAgICAgICAgICAgICAgdmFyIG1pbmggPSBNQVhfSEVJR0hUOyAvLyBNaW4gYW5kIG1heCBoZWlnaHQgb2YgYWNjZXNzaWJsZSBuZWlnaGJvdXJzLlxyXG5cclxuICAgICAgICAgICAgICB2YXIgYXNtaW4gPSBzLnNtYXg7XHJcbiAgICAgICAgICAgICAgdmFyIGFzbWF4ID0gcy5zbWF4O1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGR4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcbiAgICAgICAgICAgICAgICB2YXIgZHkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTsgLy8gU2tpcCBuZWlnaGJvdXJzIHdoaWNoIGFyZSBvdXQgb2YgYm91bmRzLlxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkeCA8IDAgfHwgZHkgPCAwIHx8IGR4ID49IHcgfHwgZHkgPj0gaCkge1xyXG4gICAgICAgICAgICAgICAgICBtaW5oID0gTWF0aC5taW4obWluaCwgLXdhbGthYmxlQ2xpbWIgLSBib3QpO1xyXG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH0gLy8gRnJvbSBtaW51cyBpbmZpbml0eSB0byB0aGUgZmlyc3Qgc3Bhbi5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG5zID0gc29saWQuc3BhbnNbZHggKyBkeSAqIHddO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ib3QgPSAtd2Fsa2FibGVDbGltYjtcclxuICAgICAgICAgICAgICAgIHZhciBudG9wID0gbnMgIT0gbnVsbCA/IG5zLnNtaW4gOiBNQVhfSEVJR0hUOyAvLyBTa2lwIG5laWdodGJvdXIgaWYgdGhlIGdhcCBiZXR3ZWVuIHRoZSBzcGFucyBpcyB0b28gc21hbGwuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKE1hdGgubWluKHRvcCwgbnRvcCkgLSBNYXRoLm1heChib3QsIG5ib3QpID4gd2Fsa2FibGVIZWlnaHQpIG1pbmggPSBNYXRoLm1pbihtaW5oLCBuYm90IC0gYm90KTsgLy8gUmVzdCBvZiB0aGUgc3BhbnMuXHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX25zID0gc29saWQuc3BhbnNbZHggKyBkeSAqIHddOyBfbnMgIT0gbnVsbDsgX25zID0gX25zLm5leHQpIHtcclxuICAgICAgICAgICAgICAgICAgbmJvdCA9IF9ucy5zbWF4O1xyXG4gICAgICAgICAgICAgICAgICBudG9wID0gX25zLm5leHQgIT0gbnVsbCA/IF9ucy5uZXh0LnNtaW4gOiBNQVhfSEVJR0hUOyAvLyBTa2lwIG5laWdodGJvdXIgaWYgdGhlIGdhcCBiZXR3ZWVuIHRoZSBzcGFucyBpcyB0b28gc21hbGwuXHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoTWF0aC5taW4odG9wLCBudG9wKSAtIE1hdGgubWF4KGJvdCwgbmJvdCkgPiB3YWxrYWJsZUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbmggPSBNYXRoLm1pbihtaW5oLCBuYm90IC0gYm90KTsgLy8gRmluZCBtaW4vbWF4IGFjY2Vzc2libGUgbmVpZ2hib3VyIGhlaWdodC4gXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhuYm90IC0gYm90KSA8PSB3YWxrYWJsZUNsaW1iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobmJvdCA8IGFzbWluKSBhc21pbiA9IG5ib3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobmJvdCA+IGFzbWF4KSBhc21heCA9IG5ib3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSAvLyBUaGUgY3VycmVudCBzcGFuIGlzIGNsb3NlIHRvIGEgbGVkZ2UgaWYgdGhlIGRyb3AgdG8gYW55XHJcbiAgICAgICAgICAgICAgLy8gbmVpZ2hib3VyIHNwYW4gaXMgbGVzcyB0aGFuIHRoZSB3YWxrYWJsZUNsaW1iLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgaWYgKG1pbmggPCAtd2Fsa2FibGVDbGltYikgcy5hcmVhID0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQTsgLy8gSWYgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBhbGwgbmVpZ2hib3VycyBpcyB0b28gbGFyZ2UsXHJcbiAgICAgICAgICAgICAgLy8gd2UgYXJlIGF0IHN0ZWVwIHNsb3BlLCBtYXJrIHRoZSBzcGFuIGFzIGxlZGdlLlxyXG5cclxuICAgICAgICAgICAgICBpZiAoYXNtYXggLSBhc21pbiA+IHdhbGthYmxlQ2xpbWIpIHtcclxuICAgICAgICAgICAgICAgIHMuYXJlYSA9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUE7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiRklMVEVSX0JPUkRFUlwiKTtcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEZvciB0aGlzIGZpbHRlciwgdGhlIGNsZWFyYW5jZSBhYm92ZSB0aGUgc3BhbiBpcyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3BhbidzIFxyXG4gICAgICAvLy8gbWF4aW11bSB0byB0aGUgbmV4dCBoaWdoZXIgc3BhbidzIG1pbmltdW0uIChTYW1lIGdyaWQgY29sdW1uLilcclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gQHNlZSByY0hlaWdodGZpZWxkLCByY0NvbmZpZ1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZpbHRlcldhbGthYmxlTG93SGVpZ2h0U3BhbnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlcldhbGthYmxlTG93SGVpZ2h0U3BhbnMoY3R4LCB3YWxrYWJsZUhlaWdodCwgc29saWQpIHtcclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIkZJTFRFUl9XQUxLQUJMRVwiKTtcclxuICAgICAgICB2YXIgdyA9IHNvbGlkLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gc29saWQuaGVpZ2h0O1xyXG4gICAgICAgIHZhciBNQVhfSEVJR0hUID0gMHhmZmY7IC8vIFJlbW92ZSB3YWxrYWJsZSBmbGFnIGZyb20gc3BhbnMgd2hpY2ggZG8gbm90IGhhdmUgZW5vdWdoXHJcbiAgICAgICAgLy8gc3BhY2UgYWJvdmUgdGhlbSBmb3IgdGhlIGFnZW50IHRvIHN0YW5kIHRoZXJlLlxyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgcyA9IHNvbGlkLnNwYW5zW3ggKyB5ICogd107IHMgIT0gbnVsbDsgcyA9IHMubmV4dCkge1xyXG4gICAgICAgICAgICAgIHZhciBib3QgPSBzLnNtYXg7XHJcbiAgICAgICAgICAgICAgdmFyIHRvcCA9IHMubmV4dCAhPSBudWxsID8gcy5uZXh0LnNtaW4gOiBNQVhfSEVJR0hUO1xyXG4gICAgICAgICAgICAgIGlmICh0b3AgLSBib3QgPD0gd2Fsa2FibGVIZWlnaHQpIHMuYXJlYSA9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJGSUxURVJfV0FMS0FCTEVcIik7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gUmVjYXN0RmlsdGVyO1xyXG4gIH0oKTtcclxuXHJcbiAgdmFyIFJlY2FzdEFyZWEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVjYXN0QXJlYSgpIHtcclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdEFyZWEpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RBcmVhLCBbe1xyXG4gICAgICBrZXk6IFwibWVkaWFuRmlsdGVyV2Fsa2FibGVBcmVhXCIsXHJcbiAgICAgIC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhpcyBmaWx0ZXIgaXMgdXN1YWxseSBhcHBsaWVkIGFmdGVyIGFwcGx5aW5nIGFyZWEgaWQncyB1c2luZyBmdW5jdGlvbnNcclxuICAgICAgLy8vIHN1Y2ggYXMgI3JjTWFya0JveEFyZWEsICNyY01hcmtDb252ZXhQb2x5QXJlYSwgYW5kICNyY01hcmtDeWxpbmRlckFyZWEuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWVkaWFuRmlsdGVyV2Fsa2FibGVBcmVhKGN0eCwgY2hmKSB7XHJcbiAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7XHJcbiAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0O1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiTUVESUFOX0FSRUFcIik7XHJcbiAgICAgICAgdmFyIGFyZWFzID0gbmV3IEFycmF5KGNoZi5zcGFuQ291bnQpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3OyArK3gpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIHkgKiB3XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkge1xyXG4gICAgICAgICAgICAgIHMgPSBjaGYuc3BhbnNbaV07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbaV0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkge1xyXG4gICAgICAgICAgICAgICAgYXJlYXNbaV0gPSBjaGYuYXJlYXNbaV07XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIG5laSA9IG5ldyBBcnJheSg5KTtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA5OyArK2opIHtcclxuICAgICAgICAgICAgICAgIG5laVtqXSA9IGNoZi5hcmVhc1tpXTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGZvciAodmFyIGRpciA9IDA7IGRpciA8IDQ7ICsrZGlyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgYXkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTtcclxuICAgICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1thaV0gIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgbmVpW2RpciAqIDIgKyAwXSA9IGNoZi5hcmVhc1thaV07XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhcyA9IGNoZi5zcGFuc1thaV07XHJcbiAgICAgICAgICAgICAgICAgIHZhciBkaXIyID0gZGlyICsgMSAmIDB4MztcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXIyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBheDIgPSBheCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBheTIgPSBheSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhaTIgPSBjaGYuY2VsbHNbYXgyICsgYXkyICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXIyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2FpMl0gIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgbmVpW2RpciAqIDIgKyAxXSA9IGNoZi5hcmVhc1thaTJdO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBBcnJheXMuc29ydChuZWkpO1xyXG4gICAgICAgICAgICAgIGFyZWFzW2ldID0gbmVpWzRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGYuYXJlYXMgPSBhcmVhcztcclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiTUVESUFOX0FSRUFcIik7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGUgdmFsdWUgb2Ygc3BhY2lhbCBwYXJhbWV0ZXJzIGFyZSBpbiB3b3JsZCB1bml0cy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY01lZGlhbkZpbHRlcldhbGthYmxlQXJlYVxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1hcmtCb3hBcmVhXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtYXJrQm94QXJlYShjdHgsIGJtaW4sIGJtYXgsIGFyZWFNb2QsIGNoZikge1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiTUFSS19CT1hfQVJFQVwiKTtcclxuICAgICAgICB2YXIgbWlueCA9IE1hdGguZmxvb3IoKGJtaW5bMF0gLSBjaGYuYm1pblswXSkgLyBjaGYuY3MpO1xyXG4gICAgICAgIHZhciBtaW55ID0gTWF0aC5mbG9vcigoYm1pblsxXSAtIGNoZi5ibWluWzFdKSAvIGNoZi5jaCk7XHJcbiAgICAgICAgdmFyIG1pbnogPSBNYXRoLmZsb29yKChibWluWzJdIC0gY2hmLmJtaW5bMl0pIC8gY2hmLmNzKTtcclxuICAgICAgICB2YXIgbWF4eCA9IE1hdGguZmxvb3IoKGJtYXhbMF0gLSBjaGYuYm1pblswXSkgLyBjaGYuY3MpO1xyXG4gICAgICAgIHZhciBtYXh5ID0gTWF0aC5mbG9vcigoYm1heFsxXSAtIGNoZi5ibWluWzFdKSAvIGNoZi5jaCk7XHJcbiAgICAgICAgdmFyIG1heHogPSBNYXRoLmZsb29yKChibWF4WzJdIC0gY2hmLmJtaW5bMl0pIC8gY2hmLmNzKTtcclxuICAgICAgICBpZiAobWF4eCA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAobWlueCA+PSBjaGYud2lkdGgpIHJldHVybjtcclxuICAgICAgICBpZiAobWF4eiA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAobWlueiA+PSBjaGYuaGVpZ2h0KSByZXR1cm47XHJcbiAgICAgICAgaWYgKG1pbnggPCAwKSBtaW54ID0gMDtcclxuICAgICAgICBpZiAobWF4eCA+PSBjaGYud2lkdGgpIG1heHggPSBjaGYud2lkdGggLSAxO1xyXG4gICAgICAgIGlmIChtaW56IDwgMCkgbWlueiA9IDA7XHJcbiAgICAgICAgaWYgKG1heHogPj0gY2hmLmhlaWdodCkgbWF4eiA9IGNoZi5oZWlnaHQgLSAxO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB6ID0gbWluejsgeiA8PSBtYXh6OyArK3opIHtcclxuICAgICAgICAgIGZvciAodmFyIHggPSBtaW54OyB4IDw9IG1heHg7ICsreCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgeiAqIGNoZi53aWR0aF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHtcclxuICAgICAgICAgICAgICB2YXIgX3MgPSBjaGYuc3BhbnNbaV07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChfcy55ID49IG1pbnkgJiYgX3MueSA8PSBtYXh5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIGNoZi5hcmVhc1tpXSA9IGFyZWFNb2QuYXBwbHkoY2hmLmFyZWFzW2ldKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJNQVJLX0JPWF9BUkVBXCIpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvZmZzZXRQb2x5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvZmZzZXRQb2x5KHZlcnRzLCBudmVydHMsIG9mZnNldCwgb3V0VmVydHMsIG1heE91dFZlcnRzKSB7XHJcbiAgICAgICAgTUlURVJfTElNSVQgPSAxLjIwO1xyXG4gICAgICAgIHZhciBuID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudmVydHM7IGkrKykge1xyXG4gICAgICAgICAgdmFyIGEgPSAoaSArIG52ZXJ0cyAtIDEpICUgbnZlcnRzO1xyXG4gICAgICAgICAgdmFyIGIgPSBpO1xyXG4gICAgICAgICAgdmFyIGMgPSAoaSArIDEpICUgbnZlcnRzO1xyXG4gICAgICAgICAgdmFyIHZhID0gYSAqIDM7XHJcbiAgICAgICAgICB2YXIgdmIgPSBiICogMztcclxuICAgICAgICAgIHZhciB2YyA9IGMgKiAzO1xyXG4gICAgICAgICAgZHgwID0gdmVydHNbdmJdIC0gdmVydHNbdmFdO1xyXG4gICAgICAgICAgZHkwID0gdmVydHNbdmIgKyAyXSAtIHZlcnRzW3ZhICsgMl07XHJcbiAgICAgICAgICBkMCA9IGR4MCAqIGR4MCArIGR5MCAqIGR5MDtcclxuXHJcbiAgICAgICAgICBpZiAoZDAgPiAxZS02KSB7XHJcbiAgICAgICAgICAgIGQwID0gMS4wIC8gTWF0aC5zcXJ0KGQwKTtcclxuICAgICAgICAgICAgZHgwICo9IGQwO1xyXG4gICAgICAgICAgICBkeTAgKj0gZDA7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZHgxID0gdmVydHNbdmNdIC0gdmVydHNbdmJdO1xyXG4gICAgICAgICAgZHkxID0gdmVydHNbdmMgKyAyXSAtIHZlcnRzW3ZiICsgMl07XHJcbiAgICAgICAgICBkMSA9IGR4MSAqIGR4MSArIGR5MSAqIGR5MTtcclxuXHJcbiAgICAgICAgICBpZiAoZDEgPiAxZS02KSB7XHJcbiAgICAgICAgICAgIGQxID0gMS4wIC8gTWF0aC5zcXJ0KGQxKTtcclxuICAgICAgICAgICAgZHgxICo9IGQxO1xyXG4gICAgICAgICAgICBkeTEgKj0gZDE7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZGx4MCA9IC1keTA7XHJcbiAgICAgICAgICBkbHkwID0gZHgwO1xyXG4gICAgICAgICAgZGx4MSA9IC1keTE7XHJcbiAgICAgICAgICBkbHkxID0gZHgxO1xyXG4gICAgICAgICAgY3Jvc3MgPSBkeDEgKiBkeTAgLSBkeDAgKiBkeTE7XHJcbiAgICAgICAgICBkbXggPSAoZGx4MCArIGRseDEpICogMC41O1xyXG4gICAgICAgICAgZG15ID0gKGRseTAgKyBkbHkxKSAqIDAuNTtcclxuICAgICAgICAgIGRtcjIgPSBkbXggKiBkbXggKyBkbXkgKiBkbXk7XHJcbiAgICAgICAgICB2YXIgYmV2ZWwgPSBkbXIyICogTUlURVJfTElNSVQgKiBNSVRFUl9MSU1JVCA8IDEuMDtcclxuXHJcbiAgICAgICAgICBpZiAoZG1yMiA+IDFlLTYpIHtcclxuICAgICAgICAgICAgc2NhbGUgPSAxLjAgLyBkbXIyO1xyXG4gICAgICAgICAgICBkbXggKj0gc2NhbGU7XHJcbiAgICAgICAgICAgIGRteSAqPSBzY2FsZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoYmV2ZWwgJiYgY3Jvc3MgPCAwLjApIHtcclxuICAgICAgICAgICAgaWYgKG4gKyAyID49IG1heE91dFZlcnRzKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgZCA9ICgxLjAgLSAoZHgwICogZHgxICsgZHkwICogZHkxKSkgKiAwLjU7XHJcbiAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMF0gPSB2ZXJ0c1t2Yl0gKyAoLWRseDAgKyBkeDAgKiBkKSAqIG9mZnNldDtcclxuICAgICAgICAgICAgb3V0VmVydHNbbiAqIDMgKyAxXSA9IHZlcnRzW3ZiICsgMV07XHJcbiAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMl0gPSB2ZXJ0c1t2YiArIDJdICsgKC1kbHkwICsgZHkwICogZCkgKiBvZmZzZXQ7XHJcbiAgICAgICAgICAgIG4rKztcclxuICAgICAgICAgICAgb3V0VmVydHNbbiAqIDMgKyAwXSA9IHZlcnRzW3ZiXSArICgtZGx4MSAtIGR4MSAqIGQpICogb2Zmc2V0O1xyXG4gICAgICAgICAgICBvdXRWZXJ0c1tuICogMyArIDFdID0gdmVydHNbdmIgKyAxXTtcclxuICAgICAgICAgICAgb3V0VmVydHNbbiAqIDMgKyAyXSA9IHZlcnRzW3ZiICsgMl0gKyAoLWRseTEgLSBkeTEgKiBkKSAqIG9mZnNldDtcclxuICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKG4gKyAxID49IG1heE91dFZlcnRzKSByZXR1cm4gMDtcclxuICAgICAgICAgICAgb3V0VmVydHNbbiAqIDMgKyAwXSA9IHZlcnRzW3ZiXSAtIGRteCAqIG9mZnNldDtcclxuICAgICAgICAgICAgb3V0VmVydHNbbiAqIDMgKyAxXSA9IHZlcnRzW3ZiICsgMV07XHJcbiAgICAgICAgICAgIG91dFZlcnRzW24gKiAzICsgMl0gPSB2ZXJ0c1t2YiArIDJdIC0gZG15ICogb2Zmc2V0O1xyXG4gICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbjtcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSB2YWx1ZSBvZiBzcGFjaWFsIHBhcmFtZXRlcnMgYXJlIGluIHdvcmxkIHVuaXRzLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBzZWUgcmNDb21wYWN0SGVpZ2h0ZmllbGQsIHJjTWVkaWFuRmlsdGVyV2Fsa2FibGVBcmVhXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWFya0N5bGluZGVyQXJlYVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWFya0N5bGluZGVyQXJlYShjdHgsIHBvcywgciwgaCwgYXJlYU1vZCwgY2hmKSB7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJNQVJLX0NZTElOREVSX0FSRUFcIik7XHJcbiAgICAgICAgYm1pbiA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBibWF4ID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIGJtaW5bMF0gPSBwb3NbMF0gLSByO1xyXG4gICAgICAgIGJtaW5bMV0gPSBwb3NbMV07XHJcbiAgICAgICAgYm1pblsyXSA9IHBvc1syXSAtIHI7XHJcbiAgICAgICAgYm1heFswXSA9IHBvc1swXSArIHI7XHJcbiAgICAgICAgYm1heFsxXSA9IHBvc1sxXSArIGg7XHJcbiAgICAgICAgYm1heFsyXSA9IHBvc1syXSArIHI7XHJcbiAgICAgICAgcjIgPSByICogcjtcclxuICAgICAgICB2YXIgbWlueCA9IE1hdGguZmxvb3IoKGJtaW5bMF0gLSBjaGYuYm1pblswXSkgLyBjaGYuY3MpO1xyXG4gICAgICAgIHZhciBtaW55ID0gTWF0aC5mbG9vcigoYm1pblsxXSAtIGNoZi5ibWluWzFdKSAvIGNoZi5jaCk7XHJcbiAgICAgICAgdmFyIG1pbnogPSBNYXRoLmZsb29yKChibWluWzJdIC0gY2hmLmJtaW5bMl0pIC8gY2hmLmNzKTtcclxuICAgICAgICB2YXIgbWF4eCA9IE1hdGguZmxvb3IoKGJtYXhbMF0gLSBjaGYuYm1pblswXSkgLyBjaGYuY3MpO1xyXG4gICAgICAgIHZhciBtYXh5ID0gTWF0aC5mbG9vcigoYm1heFsxXSAtIGNoZi5ibWluWzFdKSAvIGNoZi5jaCk7XHJcbiAgICAgICAgdmFyIG1heHogPSBNYXRoLmZsb29yKChibWF4WzJdIC0gY2hmLmJtaW5bMl0pIC8gY2hmLmNzKTtcclxuICAgICAgICBpZiAobWF4eCA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAobWlueCA+PSBjaGYud2lkdGgpIHJldHVybjtcclxuICAgICAgICBpZiAobWF4eiA8IDApIHJldHVybjtcclxuICAgICAgICBpZiAobWlueiA+PSBjaGYuaGVpZ2h0KSByZXR1cm47XHJcbiAgICAgICAgaWYgKG1pbnggPCAwKSBtaW54ID0gMDtcclxuICAgICAgICBpZiAobWF4eCA+PSBjaGYud2lkdGgpIG1heHggPSBjaGYud2lkdGggLSAxO1xyXG4gICAgICAgIGlmIChtaW56IDwgMCkgbWlueiA9IDA7XHJcbiAgICAgICAgaWYgKG1heHogPj0gY2hmLmhlaWdodCkgbWF4eiA9IGNoZi5oZWlnaHQgLSAxO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB6ID0gbWluejsgeiA8PSBtYXh6OyArK3opIHtcclxuICAgICAgICAgIGZvciAodmFyIHggPSBtaW54OyB4IDw9IG1heHg7ICsreCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgeiAqIGNoZi53aWR0aF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHtcclxuICAgICAgICAgICAgICB2YXIgX3MyID0gY2hmLnNwYW5zW2ldO1xyXG4gICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbaV0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChfczIueSA+PSBtaW55ICYmIF9zMi55IDw9IG1heHkpIHtcclxuICAgICAgICAgICAgICAgIHN4ID0gY2hmLmJtaW5bMF0gKyAoeCArIDAuNSkgKiBjaGYuY3M7XHJcbiAgICAgICAgICAgICAgICBzeiA9IGNoZi5ibWluWzJdICsgKHogKyAwLjUpICogY2hmLmNzO1xyXG4gICAgICAgICAgICAgICAgZHggPSBzeCAtIHBvc1swXTtcclxuICAgICAgICAgICAgICAgIGR6ID0gc3ogLSBwb3NbMl07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGR4ICogZHggKyBkeiAqIGR6IDwgcjIpIHtcclxuICAgICAgICAgICAgICAgICAgY2hmLmFyZWFzW2ldID0gYXJlYU1vZC5hcHBseShjaGYuYXJlYXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIk1BUktfQ1lMSU5ERVJfQVJFQVwiKTtcclxuICAgICAgfVxyXG4gICAgfV0sIFt7XHJcbiAgICAgIGtleTogXCJlcm9kZVdhbGthYmxlQXJlYVwiLFxyXG4gICAgICAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEJhc2ljYWxseSwgYW55IHNwYW5zIHRoYXQgYXJlIGNsb3NlciB0byBhIGJvdW5kYXJ5IG9yIG9ic3RydWN0aW9uIHRoYW4gdGhlIHNwZWNpZmllZCByYWRpdXNcclxuICAgICAgLy8vIGFyZSBtYXJrZWQgYXMgdW53YWxrYWJsZS5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyB1c3VhbGx5IGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciB0aGUgaGVpZ2h0ZmllbGQgaGFzIGJlZW4gYnVpbHQuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNCdWlsZENvbXBhY3RIZWlnaHRmaWVsZCwgcmNDb25maWc6OndhbGthYmxlUmFkaXVzXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcm9kZVdhbGthYmxlQXJlYShjdHgsIHJhZGl1cywgY2hmKSB7XHJcbiAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7XHJcbiAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0O1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiRVJPREVfQVJFQVwiKTtcclxuICAgICAgICB2YXIgZGlzdCA9IG5ldyBBcnJheShjaGYuc3BhbkNvdW50KS5maWxsKDI1NSk7IC8vIEFycmF5cy5maWxsKGRpc3QsIDI1NSk7XHJcbiAgICAgICAgLy8gTWFyayBib3VuZGFyeSBjZWxscy5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHtcclxuICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdzsgKyt4KSB7XHJcbiAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW3ggKyB5ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHtcclxuICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldID09IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHtcclxuICAgICAgICAgICAgICAgIGRpc3RbaV0gPSAwO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3MzID0gY2hmLnNwYW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5jID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfczMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbnkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmlkeCA9IGNoZi5jZWxsc1tueCArIG55ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zMywgZGlyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1tuaWR4XSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBuYysrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAvLyBBdCBsZWFzdCBvbmUgbWlzc2luZyBuZWlnaGJvdXIuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChuYyAhPSA0KSBkaXN0W2ldID0gMDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuZDsgLy8gY29uc29sZS5sb2coY2hmLnNwYW5zWzQ1MDI0MF0pO1xyXG4gICAgICAgIC8vIFBhc3MgMVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfeSA9IDA7IF95IDwgaDsgKytfeSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgX3ggPSAwOyBfeCA8IHc7ICsrX3gpIHtcclxuICAgICAgICAgICAgdmFyIF9jID0gY2hmLmNlbGxzW194ICsgX3kgKiB3XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gX2MuaW5kZXgsIF9uaSA9IF9jLmluZGV4ICsgX2MuY291bnQ7IF9pIDwgX25pOyArK19pKSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9zNCA9IGNoZi5zcGFuc1tfaV07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zNCwgMCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIC8vICgtMSwwKVxyXG4gICAgICAgICAgICAgICAgdmFyIGF4ID0gX3ggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXkgPSBfeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zNCwgMCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXMgPSBjaGYuc3BhbnNbYWldO1xyXG4gICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W2FpXSArIDIsIDI1NSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pXSkgZGlzdFtfaV0gPSBuZDsgLy8gKC0xLC0xKVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGFzLCAzKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgYWF4ID0gYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgzKTtcclxuICAgICAgICAgICAgICAgICAgdmFyIGFheSA9IGF5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMyk7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhYWkgPSBjaGYuY2VsbHNbYWF4ICsgYWF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGFzLCAzKTtcclxuICAgICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W2FhaV0gKyAzLCAyNTUpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pXSkgZGlzdFtfaV0gPSBuZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zNCwgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIC8vICgwLC0xKVxyXG4gICAgICAgICAgICAgICAgdmFyIF9heCA9IF94ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9heSA9IF95ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9haSA9IGNoZi5jZWxsc1tfYXggKyBfYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX3M0LCAzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2FzID0gY2hmLnNwYW5zW19haV07XHJcbiAgICAgICAgICAgICAgICBuZCA9IE1hdGgubWluKGRpc3RbX2FpXSArIDIsIDI1NSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pXSkgZGlzdFtfaV0gPSBuZDsgLy8gKDEsLTEpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX2FzLCAyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FheCA9IF9heCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIF9hYXkgPSBfYXkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WSgyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBfYWFpID0gY2hmLmNlbGxzW19hYXggKyBfYWF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hcywgMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICBuZCA9IE1hdGgubWluKGRpc3RbX2FhaV0gKyAzLCAyNTUpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pXSkgZGlzdFtfaV0gPSBuZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFBhc3MgMlxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX3kyID0gaCAtIDE7IF95MiA+PSAwOyAtLV95Mikge1xyXG4gICAgICAgICAgZm9yICh2YXIgX3gyID0gdyAtIDE7IF94MiA+PSAwOyAtLV94Mikge1xyXG4gICAgICAgICAgICAvLyBpZih5ID09IDY3MSYmIHggPT0gNjcxKVxyXG4gICAgICAgICAgICAvLyBcdGNvbnNvbGUubG9nKFwiVGhlcmVcIilcclxuICAgICAgICAgICAgdmFyIF9jMiA9IGNoZi5jZWxsc1tfeDIgKyBfeTIgKiB3XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pMiA9IF9jMi5pbmRleCwgX25pMiA9IF9jMi5pbmRleCArIF9jMi5jb3VudDsgX2kyIDwgX25pMjsgKytfaTIpIHtcclxuICAgICAgICAgICAgICB2YXIgX3M1ID0gY2hmLnNwYW5zW19pMl07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zNSwgMikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIC8vICgxLDApXHJcbiAgICAgICAgICAgICAgICB2YXIgX2F4MiA9IF94MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYXkyID0gX3kyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9haTIgPSBjaGYuY2VsbHNbX2F4MiArIF9heTIgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX3M1LCAyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoX2FpMiA9PSA0NTAyNDEpIGNvbnNvbGUubG9nKFwiSGVyZVwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBfYXMyID0gY2hmLnNwYW5zW19haTJdO1xyXG4gICAgICAgICAgICAgICAgbmQgPSBNYXRoLm1pbihkaXN0W19haTJdICsgMiwgMjU1KTtcclxuICAgICAgICAgICAgICAgIGlmIChuZCA8IGRpc3RbX2kyXSkgZGlzdFtfaTJdID0gbmQ7IC8vICgxLDEpXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oX2FzMiwgMSkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIF9hYXgyID0gX2F4MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIF9hYXkyID0gX2F5MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIF9hYWkyID0gY2hmLmNlbGxzW19hYXgyICsgX2FheTIgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX2FzMiwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICBuZCA9IE1hdGgubWluKGRpc3RbX2FhaTJdICsgMywgMjU1KTtcclxuICAgICAgICAgICAgICAgICAgaWYgKG5kIDwgZGlzdFtfaTJdKSBkaXN0W19pMl0gPSBuZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zNSwgMSkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIC8vICgwLDEpXHJcbiAgICAgICAgICAgICAgICB2YXIgX2F4MyA9IF94MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYXkzID0gX3kyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9haTMgPSBjaGYuY2VsbHNbX2F4MyArIF9heTMgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX3M1LCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2FzMyA9IGNoZi5zcGFuc1tfYWkzXTtcclxuICAgICAgICAgICAgICAgIG5kID0gTWF0aC5taW4oZGlzdFtfYWkzXSArIDIsIDI1NSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pMl0pIGRpc3RbX2kyXSA9IG5kOyAvLyAoLTEsMSlcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMzLCAwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FheDMgPSBfYXgzICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FheTMgPSBfYXkzICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FhaTMgPSBjaGYuY2VsbHNbX2FheDMgKyBfYWF5MyAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfYXMzLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIG5kID0gTWF0aC5taW4oZGlzdFtfYWFpM10gKyAzLCAyNTUpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAobmQgPCBkaXN0W19pMl0pIGRpc3RbX2kyXSA9IG5kO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRociA9IHJhZGl1cyAqIDI7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IGNoZi5zcGFuQ291bnQ7ICsrX2kzKSB7XHJcbiAgICAgICAgICBpZiAoZGlzdFtfaTNdIDwgdGhyKSBjaGYuYXJlYXNbX2kzXSA9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiRVJPREVfQVJFQVwiKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicG9pbnRJblBvbHlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBvaW50SW5Qb2x5KHZlcnRzLCBwKSB7XHJcbiAgICAgICAgdmFyIGMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2k0ID0gMCwgX2ogPSB2ZXJ0cy5sZW5ndGggLSAxOyBfaTQgPCB2ZXJ0cy5sZW5ndGg7IF9qID0gX2k0KyspIHtcclxuICAgICAgICAgIHZhciB2aSA9IF9pNCAqIDM7XHJcbiAgICAgICAgICB2YXIgdmogPSBfaiAqIDM7XHJcbiAgICAgICAgICBpZiAodmVydHNbdmkgKyAyXSA+IHBbMl0gIT0gdmVydHNbdmogKyAyXSA+IHBbMl0gJiYgcFswXSA8ICh2ZXJ0c1t2al0gLSB2ZXJ0c1t2aV0pICogKHBbMl0gLSB2ZXJ0c1t2aSArIDJdKSAvICh2ZXJ0c1t2aiArIDJdIC0gdmVydHNbdmkgKyAyXSkgKyB2ZXJ0c1t2aV0pIGMgPSAhYztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIHZhbHVlIG9mIHNwYWNpYWwgcGFyYW1ldGVycyBhcmUgaW4gd29ybGQgdW5pdHMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIHktdmFsdWVzIG9mIHRoZSBwb2x5Z29uIHZlcnRpY2VzIGFyZSBpZ25vcmVkLiBTbyB0aGUgcG9seWdvbiBpcyBlZmZlY3RpdmVseVxyXG4gICAgICAvLy8gcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lIGF0IEBwIGhtaW4sIHRoZW4gZXh0cnVkZWQgdG8gQHAgaG1heC5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY01lZGlhbkZpbHRlcldhbGthYmxlQXJlYVxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1hcmtDb252ZXhQb2x5QXJlYVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWFya0NvbnZleFBvbHlBcmVhKGN0eCwgdmVydHMsIGhtaW4sIGhtYXgsIGFyZWFNb2QsIGNoZikge1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiTUFSS19DT05WRVhQT0xZX0FSRUFcIik7XHJcbiAgICAgICAgYm1pbiA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBtYXggPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycy5jb3B5KGJtaW4sIHZlcnRzLCAwKTtcclxuICAgICAgICBSZWNhc3RWZWN0b3JzLmNvcHkoYm1heCwgdmVydHMsIDApO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHZlcnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICBSZWNhc3RWZWN0b3JzLm1pbihibWluLCB2ZXJ0cywgaSAqIDMpO1xyXG4gICAgICAgICAgUmVjYXN0VmVjdG9ycy5tYXgoYm1heCwgdmVydHMsIGkgKiAzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJtaW5bMV0gPSBobWluO1xyXG4gICAgICAgIGJtYXhbMV0gPSBobWF4O1xyXG4gICAgICAgIHZhciBtaW54ID0gTWF0aC5mbG9vcigoYm1pblswXSAtIGNoZi5ibWluWzBdKSAvIGNoZi5jcyk7XHJcbiAgICAgICAgdmFyIG1pbnkgPSBNYXRoLmZsb29yKChibWluWzFdIC0gY2hmLmJtaW5bMV0pIC8gY2hmLmNoKTtcclxuICAgICAgICB2YXIgbWlueiA9IE1hdGguZmxvb3IoKGJtaW5bMl0gLSBjaGYuYm1pblsyXSkgLyBjaGYuY3MpO1xyXG4gICAgICAgIHZhciBtYXh4ID0gTWF0aC5mbG9vcigoYm1heFswXSAtIGNoZi5ibWluWzBdKSAvIGNoZi5jcyk7XHJcbiAgICAgICAgdmFyIG1heHkgPSBNYXRoLmZsb29yKChibWF4WzFdIC0gY2hmLmJtaW5bMV0pIC8gY2hmLmNoKTtcclxuICAgICAgICB2YXIgbWF4eiA9IE1hdGguZmxvb3IoKGJtYXhbMl0gLSBjaGYuYm1pblsyXSkgLyBjaGYuY3MpO1xyXG4gICAgICAgIGlmIChtYXh4IDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmIChtaW54ID49IGNoZi53aWR0aCkgcmV0dXJuO1xyXG4gICAgICAgIGlmIChtYXh6IDwgMCkgcmV0dXJuO1xyXG4gICAgICAgIGlmIChtaW56ID49IGNoZi5oZWlnaHQpIHJldHVybjtcclxuICAgICAgICBpZiAobWlueCA8IDApIG1pbnggPSAwO1xyXG4gICAgICAgIGlmIChtYXh4ID49IGNoZi53aWR0aCkgbWF4eCA9IGNoZi53aWR0aCAtIDE7XHJcbiAgICAgICAgaWYgKG1pbnogPCAwKSBtaW56ID0gMDtcclxuICAgICAgICBpZiAobWF4eiA+PSBjaGYuaGVpZ2h0KSBtYXh6ID0gY2hmLmhlaWdodCAtIDE7IC8vIFRPRE86IE9wdGltaXplLlxyXG5cclxuICAgICAgICBmb3IgKHZhciB6ID0gbWluejsgeiA8PSBtYXh6OyArK3opIHtcclxuICAgICAgICAgIGZvciAodmFyIHggPSBtaW54OyB4IDw9IG1heHg7ICsreCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgeiAqIGNoZi53aWR0aF07XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTUgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBfaTUgPCBuaTsgKytfaTUpIHtcclxuICAgICAgICAgICAgICB2YXIgX3M2ID0gY2hmLnNwYW5zW19pNV07XHJcbiAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1tfaTVdID09IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX3M2LnkgPj0gbWlueSAmJiBfczYueSA8PSBtYXh5KSB7XHJcbiAgICAgICAgICAgICAgICBwID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgICAgICAgcFswXSA9IGNoZi5ibWluWzBdICsgKHggKyAwLjUpICogY2hmLmNzO1xyXG4gICAgICAgICAgICAgICAgcFsxXSA9IDA7XHJcbiAgICAgICAgICAgICAgICBwWzJdID0gY2hmLmJtaW5bMl0gKyAoeiArIDAuNSkgKiBjaGYuY3M7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBvaW50SW5Qb2x5KHZlcnRzLCBwKSkge1xyXG4gICAgICAgICAgICAgICAgICBjaGYuYXJlYXNbX2k1XSA9IGFyZWFNb2QuYXBwbHkoY2hmLmFyZWFzW19pNV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIk1BUktfQ09OVkVYUE9MWV9BUkVBXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFJlY2FzdEFyZWE7XHJcbiAgfSgpO1xyXG5cclxuICB2YXIgX3RlbXAkMSwgX3RlbXAyJDE7XHJcblxyXG4gIHZhciBSZWNhc3RSZWdpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVjYXN0UmVnaW9uKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0UmVnaW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0UmVnaW9uLCBudWxsLCBbe1xyXG4gICAgICBrZXk6IFwiY2FsY3VsYXRlRGlzdGFuY2VGaWVsZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2VGaWVsZChjaGYsIHNyYykge1xyXG4gICAgICAgIHZhciBtYXhEaXN0O1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gY2hmLmhlaWdodDsgLy8gSW5pdCBkaXN0YW5jZSBhbmQgcG9pbnRzLlxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoZi5zcGFuQ291bnQ7ICsraSkge1xyXG4gICAgICAgICAgc3JjW2ldID0gMHhmZmZmO1xyXG4gICAgICAgIH0gLy8gTWFyayBib3VuZGFyeSBjZWxscy5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBfeCA9IDA7IF94IDwgdzsgKytfeCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1tfeCArIHkgKiB3XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kgPCBuaTsgKytfaSkge1xyXG4gICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW19pXTtcclxuICAgICAgICAgICAgICB2YXIgYXJlYSA9IGNoZi5hcmVhc1tfaV07XHJcbiAgICAgICAgICAgICAgdmFyIG5jID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgZGlyID0gMDsgZGlyIDwgNDsgKytkaXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGF4ID0gX3ggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoYXJlYSA9PSBjaGYuYXJlYXNbYWldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmMrKztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKG5jICE9IDQpIHtcclxuICAgICAgICAgICAgICAgIHNyY1tfaV0gPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gUGFzcyAxXHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBfeSA9IDA7IF95IDwgaDsgKytfeSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgX3gyID0gMDsgX3gyIDwgdzsgKytfeDIpIHtcclxuICAgICAgICAgICAgdmFyIF9jID0gY2hmLmNlbGxzW194MiArIF95ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTIgPSBfYy5pbmRleCwgX25pID0gX2MuaW5kZXggKyBfYy5jb3VudDsgX2kyIDwgX25pOyArK19pMikge1xyXG4gICAgICAgICAgICAgIHZhciBfcyA9IGNoZi5zcGFuc1tfaTJdO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfcywgMCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIC8vICgtMSwwKVxyXG4gICAgICAgICAgICAgICAgdmFyIF9heCA9IF94MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYXkgPSBfeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYWkgPSBjaGYuY2VsbHNbX2F4ICsgX2F5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXMgPSBjaGYuc3BhbnNbX2FpXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3JjW19haV0gKyAyIDwgc3JjW19pMl0pIHtcclxuICAgICAgICAgICAgICAgICAgc3JjW19pMl0gPSBzcmNbX2FpXSArIDI7XHJcbiAgICAgICAgICAgICAgICB9IC8vICgtMSwtMSlcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oYXMsIDMpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhYXggPSBfYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBhYXkgPSBfYXkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WSgzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBhYWkgPSBjaGYuY2VsbHNbYWF4ICsgYWF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGFzLCAzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChzcmNbYWFpXSArIDMgPCBzcmNbX2kyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNyY1tfaTJdID0gc3JjW2FhaV0gKyAzO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfcywgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIC8vICgwLC0xKVxyXG4gICAgICAgICAgICAgICAgdmFyIF9heDIgPSBfeDIgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2F5MiA9IF95ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9haTIgPSBjaGYuY2VsbHNbX2F4MiArIF9heTIgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX3MsIDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYXMgPSBjaGYuc3BhbnNbX2FpMl07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNyY1tfYWkyXSArIDIgPCBzcmNbX2kyXSkge1xyXG4gICAgICAgICAgICAgICAgICBzcmNbX2kyXSA9IHNyY1tfYWkyXSArIDI7XHJcbiAgICAgICAgICAgICAgICB9IC8vICgxLC0xKVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMsIDIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBfYWF4ID0gX2F4MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIF9hYXkgPSBfYXkyICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMik7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FhaSA9IGNoZi5jZWxsc1tfYWF4ICsgX2FheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfYXMsIDIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKHNyY1tfYWFpXSArIDMgPCBzcmNbX2kyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNyY1tfaTJdID0gc3JjW19hYWldICsgMztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gUGFzcyAyXHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBfeTIgPSBoIC0gMTsgX3kyID49IDA7IC0tX3kyKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBfeDMgPSB3IC0gMTsgX3gzID49IDA7IC0tX3gzKSB7XHJcbiAgICAgICAgICAgIHZhciBfYzIgPSBjaGYuY2VsbHNbX3gzICsgX3kyICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTMgPSBfYzIuaW5kZXgsIF9uaTIgPSBfYzIuaW5kZXggKyBfYzIuY291bnQ7IF9pMyA8IF9uaTI7ICsrX2kzKSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9zMiA9IGNoZi5zcGFuc1tfaTNdO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfczIsIDIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAoMSwwKVxyXG4gICAgICAgICAgICAgICAgdmFyIF9heDMgPSBfeDMgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgyKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2F5MyA9IF95MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYWkzID0gY2hmLmNlbGxzW19heDMgKyBfYXkzICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zMiwgMik7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9hczIgPSBjaGYuc3BhbnNbX2FpM107XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNyY1tfYWkzXSArIDIgPCBzcmNbX2kzXSkge1xyXG4gICAgICAgICAgICAgICAgICBzcmNbX2kzXSA9IHNyY1tfYWkzXSArIDI7XHJcbiAgICAgICAgICAgICAgICB9IC8vICgxLDEpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9hczIsIDEpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBfYWF4MiA9IF9heDMgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBfYWF5MiA9IF9heTMgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WSgxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBfYWFpMiA9IGNoZi5jZWxsc1tfYWF4MiArIF9hYXkyICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9hczIsIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKHNyY1tfYWFpMl0gKyAzIDwgc3JjW19pM10pIHtcclxuICAgICAgICAgICAgICAgICAgICBzcmNbX2kzXSA9IHNyY1tfYWFpMl0gKyAzO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfczIsIDEpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAoMCwxKVxyXG4gICAgICAgICAgICAgICAgdmFyIF9heDQgPSBfeDMgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgxKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2F5NCA9IF95MiArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYWk0ID0gY2hmLmNlbGxzW19heDQgKyBfYXk0ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zMiwgMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9hczMgPSBjaGYuc3BhbnNbX2FpNF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNyY1tfYWk0XSArIDIgPCBzcmNbX2kzXSkge1xyXG4gICAgICAgICAgICAgICAgICBzcmNbX2kzXSA9IHNyY1tfYWk0XSArIDI7XHJcbiAgICAgICAgICAgICAgICB9IC8vICgtMSwxKVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMzLCAwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FheDMgPSBfYXg0ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FheTMgPSBfYXk0ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICB2YXIgX2FhaTMgPSBjaGYuY2VsbHNbX2FheDMgKyBfYWF5MyAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfYXMzLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChzcmNbX2FhaTNdICsgMyA8IHNyY1tfaTNdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3JjW19pM10gPSBzcmNbX2FhaTNdICsgMztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWF4RGlzdCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IGNoZi5zcGFuQ291bnQ7ICsrX2k0KSB7XHJcbiAgICAgICAgICBtYXhEaXN0ID0gTWF0aC5tYXgoc3JjW19pNF0sIG1heERpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1heERpc3Q7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImJveEJsdXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJveEJsdXIoY2hmLCB0aHIsIHNyYykge1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gY2hmLmhlaWdodDtcclxuICAgICAgICB2YXIgZHN0ID0gbmV3IEFycmF5KGNoZi5zcGFuQ291bnQpO1xyXG4gICAgICAgIHRociAqPSAyO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGg7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgX3g0ID0gMDsgX3g0IDwgdzsgKytfeDQpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbX3g0ICsgeSAqIHddO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IGkgPCBuaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07XHJcbiAgICAgICAgICAgICAgdmFyIGNkID0gc3JjW2ldO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoY2QgPD0gdGhyKSB7XHJcbiAgICAgICAgICAgICAgICBkc3RbaV0gPSBjZDtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIGQgPSBjZDtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgZGlyID0gMDsgZGlyIDwgNDsgKytkaXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGF4ID0gX3g0ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBheSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpO1xyXG4gICAgICAgICAgICAgICAgICBkICs9IHNyY1thaV07XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhcyA9IGNoZi5zcGFuc1thaV07XHJcbiAgICAgICAgICAgICAgICAgIHZhciBkaXIyID0gZGlyICsgMSAmIDB4MztcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXIyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBheDIgPSBheCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBheTIgPSBheSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcjIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhaTIgPSBjaGYuY2VsbHNbYXgyICsgYXkyICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXIyKTtcclxuICAgICAgICAgICAgICAgICAgICBkICs9IHNyY1thaTJdO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGQgKz0gY2Q7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGQgKz0gY2QgKiAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgZHN0W2ldID0gTWF0aC5mbG9vcigoZCArIDUpIC8gOSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkc3Q7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZsb29kUmVnaW9uXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmbG9vZFJlZ2lvbih4LCB5LCBpLCBsZXZlbCwgciwgY2hmLCBzcmNSZWcsIHNyY0Rpc3QsIHN0YWNrKSB7XHJcbiAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7XHJcbiAgICAgICAgdmFyIGFyZWEgPSBjaGYuYXJlYXNbaV07IC8vIEZsb29kIGZpbGwgbWFyayByZWdpb24uXHJcblxyXG4gICAgICAgIHN0YWNrID0gW107XHJcbiAgICAgICAgc3RhY2sucHVzaCh4KTtcclxuICAgICAgICBzdGFjay5wdXNoKHkpO1xyXG4gICAgICAgIHN0YWNrLnB1c2goaSk7XHJcbiAgICAgICAgc3JjUmVnW2ldID0gcjtcclxuICAgICAgICBzcmNEaXN0W2ldID0gMDtcclxuICAgICAgICB2YXIgbGV2ID0gbGV2ZWwgPj0gMiA/IGxldmVsIC0gMiA6IDA7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHZhciBjaSA9IHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTtcclxuICAgICAgICAgIHZhciBjeSA9IHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTtcclxuICAgICAgICAgIHZhciBjeCA9IHN0YWNrLnNwbGljZShzdGFjay5sZW5ndGggLSAxLCAxKVswXTtcclxuICAgICAgICAgIHZhciBjcyA9IGNoZi5zcGFuc1tjaV07IC8vIENoZWNrIGlmIGFueSBvZiB0aGUgbmVpZ2hib3VycyBhbHJlYWR5IGhhdmUgYSB2YWxpZCByZWdpb24gc2V0LlxyXG5cclxuICAgICAgICAgIHZhciBhciA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgZGlyID0gMDsgZGlyIDwgNDsgKytkaXIpIHtcclxuICAgICAgICAgICAgLy8gOCBjb25uZWN0ZWRcclxuICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oY3MsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICB2YXIgYXggPSBjeCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcbiAgICAgICAgICAgICAgdmFyIGF5ID0gY3kgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpO1xyXG4gICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGNzLCBkaXIpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2FpXSAhPSBhcmVhKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHZhciBuciA9IHNyY1JlZ1thaV07XHJcblxyXG4gICAgICAgICAgICAgIGlmICgobnIgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAobnIgIT0gMCAmJiBuciAhPSByKSB7XHJcbiAgICAgICAgICAgICAgICBhciA9IG5yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgYXMgPSBjaGYuc3BhbnNbYWldO1xyXG4gICAgICAgICAgICAgIHZhciBkaXIyID0gZGlyICsgMSAmIDB4MztcclxuXHJcbiAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oYXMsIGRpcjIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXgyID0gYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIyKTtcclxuICAgICAgICAgICAgICAgIHZhciBheTIgPSBheSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcjIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFpMiA9IGNoZi5jZWxsc1theDIgKyBheTIgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oYXMsIGRpcjIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbYWkyXSAhPSBhcmVhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBucjIgPSBzcmNSZWdbYWkyXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobnIyICE9IDAgJiYgbnIyICE9IHIpIHtcclxuICAgICAgICAgICAgICAgICAgYXIgPSBucjI7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChhciAhPSAwKSB7XHJcbiAgICAgICAgICAgIHNyY1JlZ1tjaV0gPSAwO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb3VudCsrOyAvLyBFeHBhbmQgbmVpZ2hib3Vycy5cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfZGlyID0gMDsgX2RpciA8IDQ7ICsrX2Rpcikge1xyXG4gICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihjcywgX2RpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICB2YXIgX2F4NSA9IGN4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoX2Rpcik7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBfYXk1ID0gY3kgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShfZGlyKTtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIF9haTUgPSBjaGYuY2VsbHNbX2F4NSArIF9heTUgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oY3MsIF9kaXIpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW19haTVdICE9IGFyZWEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKGNoZi5kaXN0W19haTVdID49IGxldiAmJiBzcmNSZWdbX2FpNV0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc3JjUmVnW19haTVdID0gcjtcclxuICAgICAgICAgICAgICAgIHNyY0Rpc3RbX2FpNV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChfYXg1KTtcclxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goX2F5NSk7XHJcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKF9haTUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvdW50ID4gMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZXhwYW5kUmVnaW9uc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZXhwYW5kUmVnaW9ucyhtYXhJdGVyLCBsZXZlbCwgY2hmLCBzcmNSZWcsIHNyY0Rpc3QsIHN0YWNrLCBmaWxsU3RhY2spIHtcclxuICAgICAgICB2YXIgdyA9IGNoZi53aWR0aDtcclxuICAgICAgICB2YXIgaCA9IGNoZi5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChmaWxsU3RhY2spIHtcclxuICAgICAgICAgIC8vIEZpbmQgY2VsbHMgcmV2ZWFsZWQgYnkgdGhlIHJhaXNlZCBsZXZlbC5cclxuICAgICAgICAgIC8vc3RhY2sgPSBbXTtcclxuICAgICAgICAgIHN0YWNrID0gW107XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoOyArK3kpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX3g1ID0gMDsgX3g1IDwgdzsgKytfeDUpIHtcclxuICAgICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1tfeDUgKyB5ICogd107XHJcblxyXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZi5kaXN0W2ldID49IGxldmVsICYmIHNyY1JlZ1tpXSA9PSAwICYmIGNoZi5hcmVhc1tpXSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goX3g1KTtcclxuICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh5KTtcclxuICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgLy8gdXNlIGNlbGxzIGluIHRoZSBpbnB1dCBzdGFja1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBtYXJrIGFsbCBjZWxscyB3aGljaCBhbHJlYWR5IGhhdmUgYSByZWdpb25cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdGFjay5sZW5ndGg7IGogKz0gMykge1xyXG4gICAgICAgICAgICAgIHZhciBfaTUgPSBzdGFja1tqICsgMl07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChzcmNSZWdbX2k1XSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFja1tqICsgMl0gPSAtMTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGRpcnR5RW50cmllcyA9IFtdO1xyXG4gICAgICAgIHZhciBpdGVyID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHZhciBmYWlsZWQgPSAwOyAvLyBkaXJ0eUVudHJpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICBkaXJ0eUVudHJpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaiA9IDA7IF9qIDwgc3RhY2subGVuZ3RoOyBfaiArPSAzKSB7XHJcbiAgICAgICAgICAgIHZhciBfeDYgPSBzdGFja1tfaiArIDBdO1xyXG4gICAgICAgICAgICB2YXIgX3kzID0gc3RhY2tbX2ogKyAxXTtcclxuICAgICAgICAgICAgdmFyIF9pNiA9IHN0YWNrW19qICsgMl07XHJcblxyXG4gICAgICAgICAgICBpZiAoX2k2IDwgMCkge1xyXG4gICAgICAgICAgICAgIGZhaWxlZCsrO1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgciA9IHNyY1JlZ1tfaTZdO1xyXG4gICAgICAgICAgICB2YXIgZDIgPSAweGZmZjtcclxuICAgICAgICAgICAgdmFyIGFyZWEgPSBjaGYuYXJlYXNbX2k2XTtcclxuICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbX2k2XTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGRpciA9IDA7IGRpciA8IDQ7ICsrZGlyKSB7XHJcbiAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgYXggPSBfeDYgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgYXkgPSBfeTMgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2FpXSAhPSBhcmVhKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChzcmNSZWdbYWldID4gMCAmJiAoc3JjUmVnW2FpXSAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3JjRGlzdFthaV0gKyAyIDwgZDIpIHtcclxuICAgICAgICAgICAgICAgICAgciA9IHNyY1JlZ1thaV07XHJcbiAgICAgICAgICAgICAgICAgIGQyID0gc3JjRGlzdFthaV0gKyAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHIgIT0gMCkge1xyXG4gICAgICAgICAgICAgIHN0YWNrW19qICsgMl0gPSAtMTsgLy8gbWFyayBhcyB1c2VkXHJcblxyXG4gICAgICAgICAgICAgIGRpcnR5RW50cmllcy5wdXNoKF9pNik7XHJcbiAgICAgICAgICAgICAgZGlydHlFbnRyaWVzLnB1c2gocik7XHJcbiAgICAgICAgICAgICAgZGlydHlFbnRyaWVzLnB1c2goZDIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGZhaWxlZCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IC8vIENvcHkgZW50cmllcyB0aGF0IGRpZmZlciBiZXR3ZWVuIHNyYyBhbmQgZHN0IHRvIGtlZXAgdGhlbSBpbiBzeW5jLlxyXG5cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaTcgPSAwOyBfaTcgPCBkaXJ0eUVudHJpZXMubGVuZ3RoOyBfaTcgKz0gMykge1xyXG4gICAgICAgICAgICB2YXIgaWR4ID0gZGlydHlFbnRyaWVzW19pN107IC8vIGlmIChpZHggPT0gMTM0NClcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiZGlydHlcIilcclxuXHJcbiAgICAgICAgICAgIHNyY1JlZ1tpZHhdID0gZGlydHlFbnRyaWVzW19pNyArIDFdO1xyXG4gICAgICAgICAgICBzcmNEaXN0W2lkeF0gPSBkaXJ0eUVudHJpZXNbX2k3ICsgMl07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGZhaWxlZCAqIDMgPT0gc3RhY2subGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChsZXZlbCA+IDApIHtcclxuICAgICAgICAgICAgKytpdGVyO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZXIgPj0gbWF4SXRlcikge1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3JjUmVnO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJzb3J0Q2VsbHNCeUxldmVsXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzb3J0Q2VsbHNCeUxldmVsKHN0YXJ0TGV2ZWwsIGNoZiwgc3JjUmVnLCBuYlN0YWNrcywgc3RhY2tzLCBsb2dsZXZlbHNQZXJTdGFjaykgLy8gdGhlIGxldmVscyBwZXIgc3RhY2sgKDIgaW4gb3VyIGNhc2UpIGFzIGEgYml0IHNoaWZ0XHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgdyA9IGNoZi53aWR0aDtcclxuICAgICAgICB2YXIgaCA9IGNoZi5oZWlnaHQ7XHJcbiAgICAgICAgc3RhcnRMZXZlbCA9IHN0YXJ0TGV2ZWwgPj4gbG9nbGV2ZWxzUGVyU3RhY2s7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmJTdGFja3M7ICsraikge1xyXG4gICAgICAgICAgLy8gc3RhY2tzW2pdID0gbmV3IEFycmF5KDEwMjQpO1xyXG4gICAgICAgICAgLy8gc3RhY2tzW2pdID0gW107XHJcbiAgICAgICAgICBzdGFja3Nbal0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBfeDcgPSAwOyBfeDcgPCB3OyArK194Nykge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1tfeDcgKyB5ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHtcclxuICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldID09IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEgfHwgc3JjUmVnW2ldICE9IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIGxldmVsID0gY2hmLmRpc3RbaV0gPj4gbG9nbGV2ZWxzUGVyU3RhY2s7XHJcbiAgICAgICAgICAgICAgdmFyIHNJZCA9IHN0YXJ0TGV2ZWwgLSBsZXZlbDtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHNJZCA+PSBuYlN0YWNrcykge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoc0lkIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgc0lkID0gMDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHN0YWNrc1tzSWRdLnB1c2goX3g3KTtcclxuICAgICAgICAgICAgICBzdGFja3Nbc0lkXS5wdXNoKHkpO1xyXG4gICAgICAgICAgICAgIHN0YWNrc1tzSWRdLnB1c2goaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFwcGVuZFN0YWNrc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kU3RhY2tzKHNyY1N0YWNrLCBkc3RTdGFjaywgc3JjUmVnKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzcmNTdGFjay5sZW5ndGg7IGogKz0gMykge1xyXG4gICAgICAgICAgdmFyIGkgPSBzcmNTdGFja1tqICsgMl07XHJcblxyXG4gICAgICAgICAgaWYgKGkgPCAwIHx8IHNyY1JlZ1tpXSAhPSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRzdFN0YWNrLnB1c2goc3JjU3RhY2tbal0pO1xyXG4gICAgICAgICAgZHN0U3RhY2sucHVzaChzcmNTdGFja1tqICsgMV0pO1xyXG4gICAgICAgICAgZHN0U3RhY2sucHVzaChzcmNTdGFja1tqICsgMl0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVtb3ZlQWRqYWNlbnROZWlnaGJvdXJzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBZGphY2VudE5laWdoYm91cnMocmVnKSB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGFkamFjZW50IGR1cGxpY2F0ZXMuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWcuY29ubmVjdGlvbnMubGVuZ3RoICYmIHJlZy5jb25uZWN0aW9ucy5sZW5ndGggPiAxOykge1xyXG4gICAgICAgICAgdmFyIG5pID0gKGkgKyAxKSAlIHJlZy5jb25uZWN0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgaWYgKHJlZy5jb25uZWN0aW9uc1tpXSA9PSByZWcuY29ubmVjdGlvbnNbbmldICYmIHJlZy5jb25uZWN0aW9uc1tpXSA+PSAtMTI4ICYmIHJlZy5jb25uZWN0aW9uc1tpXSA8PSAxMjcpIHtcclxuICAgICAgICAgICAgcmVnLmNvbm5lY3Rpb25zLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJlcGxhY2VOZWlnaGJvdXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcGxhY2VOZWlnaGJvdXIocmVnLCBvbGRJZCwgbmV3SWQpIHtcclxuICAgICAgICB2YXIgbmVpQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlZy5jb25uZWN0aW9ucy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgaWYgKHJlZy5jb25uZWN0aW9uc1tpXSA9PSBvbGRJZCkge1xyXG4gICAgICAgICAgICByZWcuY29ubmVjdGlvbnNbaV0gPSBuZXdJZDtcclxuICAgICAgICAgICAgbmVpQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCByZWcuZmxvb3JzLmxlbmd0aDsgKytfaTgpIHtcclxuICAgICAgICAgIGlmIChyZWcuZmxvb3JzW19pOF0gPT0gb2xkSWQpIHtcclxuICAgICAgICAgICAgcmVnLmZsb29ycy5zZXQoX2k4LCBuZXdJZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobmVpQ2hhbmdlZCkge1xyXG4gICAgICAgICAgUmVjYXN0UmVnaW9uLnJlbW92ZUFkamFjZW50TmVpZ2hib3VycyhyZWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY2FuTWVyZ2VXaXRoUmVnaW9uXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5NZXJnZVdpdGhSZWdpb24ocmVnYSwgcmVnYikge1xyXG4gICAgICAgIGlmIChyZWdhLmFyZWFUeXBlICE9IHJlZ2IuYXJlYVR5cGUpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWdhLmNvbm5lY3Rpb25zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICBpZiAocmVnYS5jb25uZWN0aW9uc1tpXSA9PSByZWdiLmlkKSB7XHJcbiAgICAgICAgICAgIG4rKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuID4gMSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2k5ID0gMDsgX2k5IDwgcmVnYS5mbG9vcnMubGVuZ3RoOyArK19pOSkge1xyXG4gICAgICAgICAgaWYgKHJlZ2EuZmxvb3JzW19pOV0gPT0gcmVnYi5pZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkVW5pcXVlRmxvb3JSZWdpb25cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFVuaXF1ZUZsb29yUmVnaW9uKHJlZywgbikge1xyXG4gICAgICAgIGlmICghcmVnLmZsb29ycy5pbmNsdWRlcyhuKSkge1xyXG4gICAgICAgICAgcmVnLmZsb29ycy5wdXNoKG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWVyZ2VSZWdpb25zXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJnZVJlZ2lvbnMocmVnYSwgcmVnYikge1xyXG4gICAgICAgIHZhciBhaWQgPSByZWdhLmlkO1xyXG4gICAgICAgIHZhciBiaWQgPSByZWdiLmlkOyAvLyBEdXBsaWNhdGUgY3VycmVudCBuZWlnaGJvdXJob29kLlxyXG5cclxuICAgICAgICB2YXIgYWNvbiA9IHJlZ2EuY29ubmVjdGlvbnM7XHJcbiAgICAgICAgdmFyIGJjb24gPSByZWdiLmNvbm5lY3Rpb25zOyAvLyBGaW5kIGluc2VydGlvbiBwb1BvbHkgb24gQS5cclxuXHJcbiAgICAgICAgdmFyIGluc2EgPSAtMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY29uLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICBpZiAoYWNvbltpXSA9PSBiaWQpIHtcclxuICAgICAgICAgICAgaW5zYSA9IGk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGluc2EgPT0gLTEpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IC8vIEZpbmQgaW5zZXJ0aW9uIHBvUG9seSBvbiBCLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIGluc2IgPSAtMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCBiY29uLmxlbmd0aDsgKytfaTEwKSB7XHJcbiAgICAgICAgICBpZiAoYmNvbltfaTEwXSA9PSBhaWQpIHtcclxuICAgICAgICAgICAgaW5zYiA9IF9pMTA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGluc2IgPT0gLTEpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IC8vIE1lcmdlIG5laWdoYm91cnMuXHJcblxyXG5cclxuICAgICAgICByZWdhLmNvbm5lY3Rpb25zID0gW107XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTEgPSAwLCBuaSA9IGFjb24ubGVuZ3RoOyBfaTExIDwgbmkgLSAxOyArK19pMTEpIHtcclxuICAgICAgICAgIHJlZ2EuY29ubmVjdGlvbnMucHVzaChhY29uWyhpbnNhICsgMSArIF9pMTEpICUgbmldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTIgPSAwLCBfbmkzID0gYmNvbi5sZW5ndGg7IF9pMTIgPCBfbmkzIC0gMTsgKytfaTEyKSB7XHJcbiAgICAgICAgICByZWdhLmNvbm5lY3Rpb25zLnB1c2goYmNvblsoaW5zYiArIDEgKyBfaTEyKSAlIF9uaTNdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFJlY2FzdFJlZ2lvbi5yZW1vdmVBZGphY2VudE5laWdoYm91cnMocmVnYSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVnYi5mbG9vcnMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgIFJlY2FzdFJlZ2lvbi5hZGRVbmlxdWVGbG9vclJlZ2lvbihyZWdhLCByZWdiLmZsb29yc1tqXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZWdhLnNwYW5Db3VudCArPSByZWdiLnNwYW5Db3VudDtcclxuICAgICAgICByZWdiLnNwYW5Db3VudCA9IDA7XHJcbiAgICAgICAgcmVnYi5jb25uZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpc1JlZ2lvbkNvbm5lY3RlZFRvQm9yZGVyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1JlZ2lvbkNvbm5lY3RlZFRvQm9yZGVyKHJlZykge1xyXG4gICAgICAgIC8vIFJlZ2lvbiBpcyBjb25uZWN0ZWQgdG8gYm9yZGVyIGlmXHJcbiAgICAgICAgLy8gb25lIG9mIHRoZSBuZWlnaGJvdXJzIGlzIG51bGwgaWQuXHJcbiAgICAgICAgcmV0dXJuIHJlZy5jb25uZWN0aW9ucy5pbmNsdWRlcygwKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiaXNTb2xpZEVkZ2VcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU29saWRFZGdlKGNoZiwgc3JjUmVnLCB4LCB5LCBpLCBkaXIpIHtcclxuICAgICAgICB2YXIgcyA9IGNoZi5zcGFuc1tpXTtcclxuICAgICAgICB2YXIgciA9IDA7XHJcblxyXG4gICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG4gICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcik7XHJcbiAgICAgICAgICByID0gc3JjUmVnW2FpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyID09IHNyY1JlZ1tpXSkge1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIndhbGtDb250b3VyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB3YWxrQ29udG91cih4LCB5LCBpLCBkaXIsIGNoZiwgc3JjUmVnLCBjb250KSB7XHJcbiAgICAgICAgdmFyIHN0YXJ0RGlyID0gZGlyO1xyXG4gICAgICAgIHZhciBzdGFydGkgPSBpO1xyXG4gICAgICAgIHZhciBzcyA9IGNoZi5zcGFuc1tpXTtcclxuICAgICAgICB2YXIgY3VyUmVnID0gMDtcclxuXHJcbiAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24oc3MsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG4gICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHNzLCBkaXIpO1xyXG4gICAgICAgICAgY3VyUmVnID0gc3JjUmVnW2FpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnQucHVzaChjdXJSZWcpO1xyXG4gICAgICAgIHZhciBpdGVyID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKCsraXRlciA8IDQwMDAwKSB7XHJcbiAgICAgICAgICB2YXIgcyA9IGNoZi5zcGFuc1tpXTtcclxuXHJcbiAgICAgICAgICBpZiAoUmVjYXN0UmVnaW9uLmlzU29saWRFZGdlKGNoZiwgc3JjUmVnLCB4LCB5LCBpLCBkaXIpKSB7XHJcbiAgICAgICAgICAgIC8vIENob29zZSB0aGUgZWRnZSBjb3JuZXJcclxuICAgICAgICAgICAgdmFyIHIgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgIHZhciBfYXg2ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBfYXk2ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBfYWk2ID0gY2hmLmNlbGxzW19heDYgKyBfYXk2ICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTtcclxuXHJcbiAgICAgICAgICAgICAgciA9IHNyY1JlZ1tfYWk2XTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHIgIT0gY3VyUmVnKSB7XHJcbiAgICAgICAgICAgICAgY3VyUmVnID0gcjtcclxuICAgICAgICAgICAgICBjb250LnB1c2goY3VyUmVnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGlyID0gZGlyICsgMSAmIDB4MzsgLy8gUm90YXRlIENXXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgbmkgPSAtMTtcclxuICAgICAgICAgICAgdmFyIG54ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcbiAgICAgICAgICAgIHZhciBueSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgIHZhciBuYyA9IGNoZi5jZWxsc1tueCArIG55ICogY2hmLndpZHRoXTtcclxuICAgICAgICAgICAgICBuaSA9IG5jLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobmkgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAvLyBTaG91bGQgbm90IGhhcHBlbi5cclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHggPSBueDtcclxuICAgICAgICAgICAgeSA9IG55O1xyXG4gICAgICAgICAgICBpID0gbmk7XHJcbiAgICAgICAgICAgIGRpciA9IGRpciArIDMgJiAweDM7IC8vIFJvdGF0ZSBDQ1dcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoc3RhcnRpID09IGkgJiYgc3RhcnREaXIgPT0gZGlyKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gUmVtb3ZlIGFkamFjZW50IGR1cGxpY2F0ZXMuXHJcblxyXG5cclxuICAgICAgICBpZiAoY29udC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbnQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICB2YXIgbmogPSAoaiArIDEpICUgY29udC5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29udFtqXSA9PSBjb250W25qXSAmJiBjb250W2pdID49IC0xMjggJiYgY29udFtqXSA8PSAxMjcpIHtcclxuICAgICAgICAgICAgICBjb250LnNwbGljZShqLCAxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICArK2o7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1lcmdlQW5kRmlsdGVyUmVnaW9uc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VBbmRGaWx0ZXJSZWdpb25zKGN0eCwgbWluUmVnaW9uQXJlYSwgbWVyZ2VSZWdpb25TaXplLCBtYXhSZWdpb25JZCwgY2hmLCBzcmNSZWcsIG92ZXJsYXBzKSB7XHJcbiAgICAgICAgdmFyIHcgPSBjaGYud2lkdGg7XHJcbiAgICAgICAgdmFyIGggPSBjaGYuaGVpZ2h0O1xyXG4gICAgICAgIHZhciBucmVnID0gbWF4UmVnaW9uSWQgKyAxO1xyXG4gICAgICAgIHZhciByZWdpb25zID0gbmV3IEFycmF5KG5yZWcpOyAvLyBDb25zdHJ1Y3QgcmVnaW9uc1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5yZWc7ICsraSkge1xyXG4gICAgICAgICAgcmVnaW9uc1tpXSA9IG5ldyBSZWNhc3RSZWdpb24uUmVnaW9uKGkpO1xyXG4gICAgICAgIH0gLy8gRmluZCBlZGdlIG9mIGEgcmVnaW9uIGFuZCBmaW5kIGNvbm5lY3Rpb25zIGFyb3VuZCB0aGUgY29udG91ci5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBfeDggPSAwOyBfeDggPCB3OyArK194OCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1tfeDggKyB5ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTEzID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kxMyA8IG5pOyArK19pMTMpIHtcclxuICAgICAgICAgICAgICB2YXIgciA9IHNyY1JlZ1tfaTEzXTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHIgPT0gMCB8fCByID49IG5yZWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIHJlZyA9IHJlZ2lvbnNbcl07XHJcbiAgICAgICAgICAgICAgcmVnLnNwYW5Db3VudCsrOyAvLyBVcGRhdGUgZmxvb3JzLlxyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBqID0gYy5pbmRleDsgaiA8IG5pOyArK2opIHtcclxuICAgICAgICAgICAgICAgIGlmIChfaTEzID09IGopIHtcclxuICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZsb29ySWQgPSBzcmNSZWdbal07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZsb29ySWQgPT0gMCB8fCBmbG9vcklkID49IG5yZWcpIHtcclxuICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZsb29ySWQgPT0gcikge1xyXG4gICAgICAgICAgICAgICAgICByZWcub3ZlcmxhcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmFkZFVuaXF1ZUZsb29yUmVnaW9uKHJlZywgZmxvb3JJZCk7XHJcbiAgICAgICAgICAgICAgfSAvLyBIYXZlIGZvdW5kIGNvbnRvdXJcclxuXHJcblxyXG4gICAgICAgICAgICAgIGlmIChyZWcuY29ubmVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByZWcuYXJlYVR5cGUgPSBjaGYuYXJlYXNbX2kxM107IC8vIENoZWNrIGlmIHRoaXMgY2VsbCBpcyBuZXh0IHRvIGEgYm9yZGVyLlxyXG5cclxuICAgICAgICAgICAgICB2YXIgbmRpciA9IC0xO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlY2FzdFJlZ2lvbi5pc1NvbGlkRWRnZShjaGYsIHNyY1JlZywgX3g4LCB5LCBfaTEzLCBkaXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIG5kaXIgPSBkaXI7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKG5kaXIgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBjZWxsIGlzIGF0IGJvcmRlci5cclxuICAgICAgICAgICAgICAgIC8vIFdhbGsgYXJvdW5kIHRoZSBjb250b3VyIHRvIGZpbmQgYWxsIHRoZSBuZWlnaGJvdXJzLlxyXG4gICAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLndhbGtDb250b3VyKF94OCwgeSwgX2kxMywgbmRpciwgY2hmLCBzcmNSZWcsIHJlZy5jb25uZWN0aW9ucyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBSZW1vdmUgdG9vIHNtYWxsIHJlZ2lvbnMuXHJcblxyXG5cclxuICAgICAgICB2YXIgc3RhY2sgPSBuZXcgQXJyYXkoMzIpO1xyXG4gICAgICAgIHZhciB0cmFjZSA9IG5ldyBBcnJheSgzMik7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwgbnJlZzsgKytfaTE0KSB7XHJcbiAgICAgICAgICB2YXIgX3JlZyA9IHJlZ2lvbnNbX2kxNF07XHJcblxyXG4gICAgICAgICAgaWYgKF9yZWcuaWQgPT0gMCB8fCAoX3JlZy5pZCAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChfcmVnLnNwYW5Db3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChfcmVnLnZpc2l0ZWQpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9IC8vIENvdW50IHRoZSB0b3RhbCBzaXplIG9mIGFsbCB0aGUgY29ubmVjdGVkIHJlZ2lvbnMuXHJcbiAgICAgICAgICAvLyBBbHNvIGtlZXAgdHJhY2sgb2YgdGhlIHJlZ2lvbnMgY29ubmVjdHMgdG8gYSB0aWxlIGJvcmRlci5cclxuXHJcblxyXG4gICAgICAgICAgdmFyIGNvbm5lY3RzVG9Cb3JkZXIgPSBmYWxzZTtcclxuICAgICAgICAgIHZhciBzcGFuQ291bnQgPSAwOyAvL3N0YWNrID0gW107XHJcbiAgICAgICAgICAvL3RyYWNlID0gW107XHJcblxyXG4gICAgICAgICAgc3RhY2sgPSBbXTtcclxuICAgICAgICAgIHRyYWNlID0gW107XHJcbiAgICAgICAgICBfcmVnLnZpc2l0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgc3RhY2sucHVzaChfaTE0KTtcclxuXHJcbiAgICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBQb3BcclxuICAgICAgICAgICAgdmFyIHJpID0gc3RhY2suc3BsaWNlKHN0YWNrLmxlbmd0aCAtIDEsIDEpO1xyXG4gICAgICAgICAgICB2YXIgY3JlZyA9IHJlZ2lvbnNbcmldO1xyXG4gICAgICAgICAgICBzcGFuQ291bnQgKz0gY3JlZy5zcGFuQ291bnQ7XHJcbiAgICAgICAgICAgIHRyYWNlLnB1c2gocmkpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2oyID0gMDsgX2oyIDwgY3JlZy5jb25uZWN0aW9ucy5sZW5ndGg7ICsrX2oyKSB7XHJcbiAgICAgICAgICAgICAgaWYgKChjcmVnLmNvbm5lY3Rpb25zW19qMl0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdHNUb0JvcmRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHZhciBuZWlyZWcgPSByZWdpb25zW2NyZWcuY29ubmVjdGlvbnNbX2oyXV07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChuZWlyZWcudmlzaXRlZCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAobmVpcmVnLmlkID09IDAgfHwgKG5laXJlZy5pZCAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9IC8vIFZpc2l0XHJcblxyXG5cclxuICAgICAgICAgICAgICBzdGFjay5wdXNoKG5laXJlZy5pZCk7XHJcbiAgICAgICAgICAgICAgbmVpcmVnLnZpc2l0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IC8vIElmIHRoZSBhY2N1bXVsYXRlZCByZWdpb25zIHNpemUgaXMgdG9vIHNtYWxsLCByZW1vdmUgaXQuXHJcbiAgICAgICAgICAvLyBEbyBub3QgcmVtb3ZlIGFyZWFzIHdoaWNoIGNvbm5lY3QgdG8gdGlsZSBib3JkZXJzXHJcbiAgICAgICAgICAvLyBhcyB0aGVpciBzaXplIGNhbm5vdCBiZSBlc3RpbWF0ZWQgY29ycmVjdGx5IGFuZCByZW1vdmluZyB0aGVtXHJcbiAgICAgICAgICAvLyBjYW4gcG90ZW50aWFsbHkgcmVtb3ZlIG5lY2Vzc2FyeSBhcmVhcy5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKHNwYW5Db3VudCA8IG1pblJlZ2lvbkFyZWEgJiYgIWNvbm5lY3RzVG9Cb3JkZXIpIHtcclxuICAgICAgICAgICAgLy8gS2lsbCBhbGwgdmlzaXRlZCByZWdpb25zLlxyXG4gICAgICAgICAgICBmb3IgKHZhciBfajMgPSAwOyBfajMgPCB0cmFjZS5sZW5ndGg7ICsrX2ozKSB7XHJcbiAgICAgICAgICAgICAgcmVnaW9uc1t0cmFjZVtfajNdXS5zcGFuQ291bnQgPSAwO1xyXG4gICAgICAgICAgICAgIHJlZ2lvbnNbdHJhY2VbX2ozXV0uaWQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBNZXJnZSB0b28gc21hbGwgcmVnaW9ucyB0byBuZWlnaGJvdXIgcmVnaW9ucy5cclxuXHJcblxyXG4gICAgICAgIHZhciBtZXJnZUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgbWVyZ2VDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kxNSA9IDA7IF9pMTUgPCBucmVnOyArK19pMTUpIHtcclxuICAgICAgICAgICAgdmFyIF9yZWcyID0gcmVnaW9uc1tfaTE1XTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfcmVnMi5pZCA9PSAwIHx8IChfcmVnMi5pZCAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfcmVnMi5vdmVybGFwKSB7XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfcmVnMi5zcGFuQ291bnQgPT0gMCkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgcmVnaW9uIHNob3VsZCBiZSBtZXJnZWQuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKF9yZWcyLnNwYW5Db3VudCA+IG1lcmdlUmVnaW9uU2l6ZSAmJiBSZWNhc3RSZWdpb24uaXNSZWdpb25Db25uZWN0ZWRUb0JvcmRlcihfcmVnMikpIHtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfSAvLyBTbWFsbCByZWdpb24gd2l0aCBtb3JlIHRoYW4gMSBjb25uZWN0aW9uLlxyXG4gICAgICAgICAgICAvLyBPciByZWdpb24gd2hpY2ggaXMgbm90IGNvbm5lY3RlZCB0byBhIGJvcmRlciBhdCBhbGwuXHJcbiAgICAgICAgICAgIC8vIEZpbmQgc21hbGxlc3QgbmVpZ2hib3VyIHJlZ2lvbiB0aGF0IGNvbm5lY3RzIHRvIHRoaXMgb25lLlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBzbWFsbGVzdCA9IDB4ZmZmZmZmZjtcclxuICAgICAgICAgICAgdmFyIG1lcmdlSWQgPSBfcmVnMi5pZDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qNCA9IDA7IF9qNCA8IF9yZWcyLmNvbm5lY3Rpb25zLmxlbmd0aDsgKytfajQpIHtcclxuICAgICAgICAgICAgICBpZiAoKF9yZWcyLmNvbm5lY3Rpb25zW19qNF0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgbXJlZyA9IHJlZ2lvbnNbX3JlZzIuY29ubmVjdGlvbnNbX2o0XV07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChtcmVnLmlkID09IDAgfHwgKG1yZWcuaWQgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCB8fCBtcmVnLm92ZXJsYXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKG1yZWcuc3BhbkNvdW50IDwgc21hbGxlc3QgJiYgUmVjYXN0UmVnaW9uLmNhbk1lcmdlV2l0aFJlZ2lvbihfcmVnMiwgbXJlZykgJiYgUmVjYXN0UmVnaW9uLmNhbk1lcmdlV2l0aFJlZ2lvbihtcmVnLCBfcmVnMikpIHtcclxuICAgICAgICAgICAgICAgIHNtYWxsZXN0ID0gbXJlZy5zcGFuQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBtZXJnZUlkID0gbXJlZy5pZDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gLy8gRm91bmQgbmV3IGlkLlxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChtZXJnZUlkICE9IF9yZWcyLmlkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG9sZElkID0gX3JlZzIuaWQ7XHJcbiAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHJlZ2lvbnNbbWVyZ2VJZF07IC8vIE1lcmdlIG5laWdoYm91cnMuXHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RSZWdpb24ubWVyZ2VSZWdpb25zKHRhcmdldCwgX3JlZzIpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaXh1cCByZWdpb25zIHBvaW50aW5nIHRvIGN1cnJlbnQgcmVnaW9uLlxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2o1ID0gMDsgX2o1IDwgbnJlZzsgKytfajUpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2o1XS5pZCA9PSAwIHx8IChyZWdpb25zW19qNV0uaWQgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICB9IC8vIElmIGFub3RoZXIgcmVnaW9uIHdhcyBhbHJlYWR5IG1lcmdlZCBpbnRvIGN1cnJlbnQgcmVnaW9uXHJcbiAgICAgICAgICAgICAgICAgIC8vIGNoYW5nZSB0aGUgbmlkIG9mIHRoZSBwcmV2aW91cyByZWdpb24gdG9vLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChyZWdpb25zW19qNV0uaWQgPT0gb2xkSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWdpb25zW19qNV0uaWQgPSBtZXJnZUlkO1xyXG4gICAgICAgICAgICAgICAgICB9IC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgcmVnaW9uIHdpdGggdGhlIG5ldyBvbmUgaWYgdGhlXHJcbiAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgcmVnaW9ucyBpcyBuZWlnaGJvdXIuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLnJlcGxhY2VOZWlnaGJvdXIocmVnaW9uc1tfajVdLCBvbGRJZCwgbWVyZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWVyZ2VDb3VudCsrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKG1lcmdlQ291bnQgPiAwKTsgLy8gQ29tcHJlc3MgcmVnaW9uIElkcy5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTYgPSAwOyBfaTE2IDwgbnJlZzsgKytfaTE2KSB7XHJcbiAgICAgICAgICByZWdpb25zW19pMTZdLnJlbWFwID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgaWYgKHJlZ2lvbnNbX2kxNl0uaWQgPT0gMCkge1xyXG4gICAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcCBuaWwgcmVnaW9ucy5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoKHJlZ2lvbnNbX2kxNl0uaWQgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcCBleHRlcm5hbCByZWdpb25zLlxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJlZ2lvbnNbX2kxNl0ucmVtYXAgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHJlZ0lkR2VuID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxNyA9IDA7IF9pMTcgPCBucmVnOyArK19pMTcpIHtcclxuICAgICAgICAgIGlmICghcmVnaW9uc1tfaTE3XS5yZW1hcCkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB2YXIgX29sZElkID0gcmVnaW9uc1tfaTE3XS5pZDtcclxuICAgICAgICAgIHZhciBuZXdJZCA9ICsrcmVnSWRHZW47XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2o2ID0gX2kxNzsgX2o2IDwgbnJlZzsgKytfajYpIHtcclxuICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2o2XS5pZCA9PSBfb2xkSWQpIHtcclxuICAgICAgICAgICAgICByZWdpb25zW19qNl0uaWQgPSBuZXdJZDtcclxuICAgICAgICAgICAgICByZWdpb25zW19qNl0ucmVtYXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWF4UmVnaW9uSWQgPSByZWdJZEdlbjsgLy8gUmVtYXAgcmVnaW9ucy5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxOCA9IDA7IF9pMTggPCBjaGYuc3BhbkNvdW50OyArK19pMTgpIHtcclxuICAgICAgICAgIGlmICgoc3JjUmVnW19pMThdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpID09IDApIHtcclxuICAgICAgICAgICAgc3JjUmVnW19pMThdID0gcmVnaW9uc1tzcmNSZWdbX2kxOF1dLmlkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gUmV0dXJuIHJlZ2lvbnMgdGhhdCB3ZSBmb3VuZCB0byBiZSBvdmVybGFwcGluZy5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTkgPSAwOyBfaTE5IDwgbnJlZzsgKytfaTE5KSB7XHJcbiAgICAgICAgICBpZiAocmVnaW9uc1tfaTE5XS5vdmVybGFwKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXBzLnB1c2gocmVnaW9uc1tfaTE5XS5pZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWF4UmVnaW9uSWQ7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZFVuaXF1ZUNvbm5lY3Rpb25cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFVuaXF1ZUNvbm5lY3Rpb24ocmVnLCBuKSB7XHJcbiAgICAgICAgaWYgKCFyZWcuY29ubmVjdGlvbnMuY29udGFpbnMobikpIHtcclxuICAgICAgICAgIHJlZy5jb25uZWN0aW9ucy5wdXNoKG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWVyZ2VBbmRGaWx0ZXJMYXllclJlZ2lvbnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlQW5kRmlsdGVyTGF5ZXJSZWdpb25zKGN0eCwgbWluUmVnaW9uQXJlYSwgbWF4UmVnaW9uSWQsIGNoZiwgc3JjUmVnLCBvdmVybGFwcykge1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gY2hmLmhlaWdodDtcclxuICAgICAgICB2YXIgbnJlZyA9IG1heFJlZ2lvbklkICsgMTtcclxuICAgICAgICB2YXIgcmVnaW9ucyA9IG5ldyBBcnJheShucmVnKTsgLy8gQ29uc3RydWN0IHJlZ2lvbnNcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBucmVnOyArK2kpIHtcclxuICAgICAgICAgIHJlZ2lvbnNbaV0gPSBuZXcgUmVnaW9uKGkpO1xyXG4gICAgICAgIH0gLy8gRmluZCByZWdpb24gbmVpZ2hib3VycyBhbmQgb3ZlcmxhcHBpbmcgcmVnaW9ucy5cclxuXHJcblxyXG4gICAgICAgIHZhciBscmVncyA9IG5ldyBBcnJheSgzMik7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBfeDkgPSAwOyBfeDkgPCB3OyArK194OSkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1tfeDkgKyB5ICogd107XHJcbiAgICAgICAgICAgIGxyZWdzID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTIwID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kyMCA8IG5pOyArK19pMjApIHtcclxuICAgICAgICAgICAgICB2YXIgcyA9IGNoZi5zcGFuc1tfaTIwXTtcclxuICAgICAgICAgICAgICB2YXIgcmkgPSBzcmNSZWdbX2kyMF07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChyaSA9PSAwIHx8IHJpID49IG5yZWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdmFyIHJlZyA9IHJlZ2lvbnNbcmldO1xyXG4gICAgICAgICAgICAgIHJlZy5zcGFuQ291bnQrKztcclxuICAgICAgICAgICAgICByZWcueW1pbiA9IE1hdGgubWluKHJlZy55bWluLCBzLnkpO1xyXG4gICAgICAgICAgICAgIHJlZy55bWF4ID0gTWF0aC5tYXgocmVnLnltYXgsIHMueSk7IC8vIENvbGxlY3QgYWxsIHJlZ2lvbiBsYXllcnMuXHJcblxyXG4gICAgICAgICAgICAgIGxyZWdzLnB1c2gocmkpOyAvLyBVcGRhdGUgbmVpZ2hib3Vyc1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgYXggPSBfeDkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcik7XHJcbiAgICAgICAgICAgICAgICAgIHZhciByYWkgPSBzcmNSZWdbYWldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKHJhaSA+IDAgJiYgcmFpIDwgbnJlZyAmJiByYWkgIT0gcmkpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRVbmlxdWVDb25uZWN0aW9uKHJlZywgcmFpKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgaWYgKChyYWkgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZy5jb25uZWN0c1RvQm9yZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBVcGRhdGUgb3ZlcmxhcHBpbmcgcmVnaW9ucy5cclxuXHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTIxID0gMDsgX2kyMSA8IGxyZWdzLmxlbmd0aCAtIDE7ICsrX2kyMSkge1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGogPSBfaTIxICsgMTsgaiA8IGxyZWdzLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobHJlZ3NbX2kyMV0gIT0gbHJlZ3Nbal0pIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIF9yaSA9IHJlZ2lvbnNbbHJlZ3NbX2kyMV1dO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgcmogPSByZWdpb25zW2xyZWdzW2pdXTtcclxuICAgICAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmFkZFVuaXF1ZUZsb29yUmVnaW9uKF9yaSwgbHJlZ3Nbal0pO1xyXG4gICAgICAgICAgICAgICAgICBSZWNhc3RSZWdpb24uYWRkVW5pcXVlRmxvb3JSZWdpb24ocmosIGxyZWdzW19pMjFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIENyZWF0ZSAyRCBsYXllcnMgZnJvbSByZWdpb25zLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIGxheWVySWQgPSAxO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTIyID0gMDsgX2kyMiA8IG5yZWc7ICsrX2kyMikge1xyXG4gICAgICAgICAgcmVnaW9uc1tfaTIyXS5pZCA9IDA7XHJcbiAgICAgICAgfSAvLyBNZXJnZSBtb250b25lIHJlZ2lvbnMgdG8gY3JlYXRlIG5vbi1vdmVybGFwcGluZyBhcmVhcy5cclxuXHJcblxyXG4gICAgICAgIHZhciBzdGFjayA9IG5ldyBBcnJheSgzMik7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMjMgPSAxOyBfaTIzIDwgbnJlZzsgKytfaTIzKSB7XHJcbiAgICAgICAgICB2YXIgcm9vdCA9IHJlZ2lvbnNbX2kyM107IC8vIFNraXAgYWxyZWFkeSB2aXNpdGVkLlxyXG5cclxuICAgICAgICAgIGlmIChyb290LmlkICE9IDApIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9IC8vIFN0YXJ0IHNlYXJjaC5cclxuXHJcblxyXG4gICAgICAgICAgcm9vdC5pZCA9IGxheWVySWQ7XHJcbiAgICAgICAgICBzdGFjayA9IFtdO1xyXG4gICAgICAgICAgc3RhY2sucHVzaChfaTIzKTtcclxuXHJcbiAgICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBQb3AgZnJvbnRcclxuICAgICAgICAgICAgdmFyIF9yZWczID0gcmVnaW9uc1tzdGFjay5yZW1vdmUoMCldO1xyXG4gICAgICAgICAgICB2YXIgbmNvbnMgPSBfcmVnMy5jb25uZWN0aW9ucy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfajcgPSAwOyBfajcgPCBuY29uczsgKytfajcpIHtcclxuICAgICAgICAgICAgICB2YXIgbmVpID0gX3JlZzMuY29ubmVjdGlvbnNbX2o3XTtcclxuICAgICAgICAgICAgICB2YXIgcmVnbiA9IHJlZ2lvbnNbbmVpXTsgLy8gU2tpcCBhbHJlYWR5IHZpc2l0ZWQuXHJcblxyXG4gICAgICAgICAgICAgIGlmIChyZWduLmlkICE9IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH0gLy8gU2tpcCBpZiB0aGUgbmVpZ2hib3VyIGlzIG92ZXJsYXBwaW5nIHJvb3QgcmVnaW9uLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgdmFyIG92ZXJsYXAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByb290LmZsb29ycy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvb3QuZmxvb3JzW2tdID09IG5laSkge1xyXG4gICAgICAgICAgICAgICAgICBvdmVybGFwID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAob3ZlcmxhcCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfSAvLyBEZWVwZW5cclxuXHJcblxyXG4gICAgICAgICAgICAgIHN0YWNrLnB1c2gobmVpKTsgLy8gTWFyayBsYXllciBpZFxyXG5cclxuICAgICAgICAgICAgICByZWduLmlkID0gbGF5ZXJJZDsgLy8gTWVyZ2UgY3VycmVudCBsYXllcnMgdG8gcm9vdC5cclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IHJlZ24uZmxvb3JzLmxlbmd0aDsgKytfaykge1xyXG4gICAgICAgICAgICAgICAgUmVjYXN0UmVnaW9uLmFkZFVuaXF1ZUZsb29yUmVnaW9uKHJvb3QsIHJlZ24uZmxvb3JzW19rXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICByb290LnltaW4gPSBNYXRoLm1pbihyb290LnltaW4sIHJlZ24ueW1pbik7XHJcbiAgICAgICAgICAgICAgcm9vdC55bWF4ID0gTWF0aC5tYXgocm9vdC55bWF4LCByZWduLnltYXgpO1xyXG4gICAgICAgICAgICAgIHJvb3Quc3BhbkNvdW50ICs9IHJlZ24uc3BhbkNvdW50O1xyXG4gICAgICAgICAgICAgIHJlZ24uc3BhbkNvdW50ID0gMDtcclxuICAgICAgICAgICAgICByb290LmNvbm5lY3RzVG9Cb3JkZXIgPSByb290LmNvbm5lY3RzVG9Cb3JkZXIgfHwgcmVnbi5jb25uZWN0c1RvQm9yZGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbGF5ZXJJZCsrO1xyXG4gICAgICAgIH0gLy8gUmVtb3ZlIHNtYWxsIHJlZ2lvbnNcclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMjQgPSAwOyBfaTI0IDwgbnJlZzsgKytfaTI0KSB7XHJcbiAgICAgICAgICBpZiAocmVnaW9uc1tfaTI0XS5zcGFuQ291bnQgPiAwICYmIHJlZ2lvbnNbX2kyNF0uc3BhbkNvdW50IDwgbWluUmVnaW9uQXJlYSAmJiAhcmVnaW9uc1tfaTI0XS5jb25uZWN0c1RvQm9yZGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBfcmVnNCA9IHJlZ2lvbnNbX2kyNF0uaWQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfajggPSAwOyBfajggPCBucmVnOyArK19qOCkge1xyXG4gICAgICAgICAgICAgIGlmIChyZWdpb25zW19qOF0uaWQgPT0gX3JlZzQpIHtcclxuICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2o4XS5pZCA9IDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBDb21wcmVzcyByZWdpb24gSWRzLlxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kyNSA9IDA7IF9pMjUgPCBucmVnOyArK19pMjUpIHtcclxuICAgICAgICAgIHJlZ2lvbnNbX2kyNV0ucmVtYXAgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICBpZiAocmVnaW9uc1tfaTI1XS5pZCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIG5pbCByZWdpb25zLlxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICgocmVnaW9uc1tfaTI1XS5pZCAmIFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHKSAhPSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwIGV4dGVybmFsIHJlZ2lvbnMuXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVnaW9uc1tfaTI1XS5yZW1hcCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVnSWRHZW4gPSAwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTI2ID0gMDsgX2kyNiA8IG5yZWc7ICsrX2kyNikge1xyXG4gICAgICAgICAgaWYgKCFyZWdpb25zW19pMjZdLnJlbWFwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBvbGRJZCA9IHJlZ2lvbnNbX2kyNl0uaWQ7XHJcbiAgICAgICAgICB2YXIgbmV3SWQgPSArK3JlZ0lkR2VuO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9qOSA9IF9pMjY7IF9qOSA8IG5yZWc7ICsrX2o5KSB7XHJcbiAgICAgICAgICAgIGlmIChyZWdpb25zW19qOV0uaWQgPT0gb2xkSWQpIHtcclxuICAgICAgICAgICAgICByZWdpb25zW19qOV0uaWQgPSBuZXdJZDtcclxuICAgICAgICAgICAgICByZWdpb25zW19qOV0ucmVtYXAgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWF4UmVnaW9uSWQgPSByZWdJZEdlbjsgLy8gUmVtYXAgcmVnaW9ucy5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kyNyA9IDA7IF9pMjcgPCBjaGYuc3BhbkNvdW50OyArK19pMjcpIHtcclxuICAgICAgICAgIGlmICgoc3JjUmVnW19pMjddICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpID09IDApIHtcclxuICAgICAgICAgICAgc3JjUmVnW19pMjddID0gcmVnaW9uc1tzcmNSZWdbX2kyN11dLmlkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1heFJlZ2lvbklkO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhpcyBpcyB1c3VhbGx5IHRoZSBzZWNvbmQgdG8gdGhlIGxhc3Qgc3RlcCBpbiBjcmVhdGluZyBhIGZ1bGx5IGJ1aWx0XHJcbiAgICAgIC8vLyBjb21wYWN0IGhlaWdodGZpZWxkLiBUaGlzIHN0ZXAgaXMgcmVxdWlyZWQgYmVmb3JlIHJlZ2lvbnMgYXJlIGJ1aWx0XHJcbiAgICAgIC8vLyB1c2luZyAjcmNCdWlsZFJlZ2lvbnMgb3IgI3JjQnVpbGRSZWdpb25zTW9ub3RvbmUuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQWZ0ZXIgdGhpcyBzdGVwLCB0aGUgZGlzdGFuY2UgZGF0YSBpcyBhdmFpbGFibGUgdmlhIHRoZSByY0NvbXBhY3RIZWlnaHRmaWVsZDo6bWF4RGlzdGFuY2VcclxuICAgICAgLy8vIGFuZCByY0NvbXBhY3RIZWlnaHRmaWVsZDo6ZGlzdCBmaWVsZHMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQHNlZSByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNCdWlsZFJlZ2lvbnMsIHJjQnVpbGRSZWdpb25zTW9ub3RvbmVcclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJidWlsZERpc3RhbmNlRmllbGRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkRGlzdGFuY2VGaWVsZChjdHgsIGNoZikge1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiQlVJTERfRElTVEFOQ0VGSUVMRFwiKTtcclxuICAgICAgICB2YXIgc3JjID0gbmV3IEFycmF5KGNoZi5zcGFuQ291bnQpO1xyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiRElTVEFOQ0VGSUVMRF9ESVNUXCIpO1xyXG4gICAgICAgIHZhciBtYXhEaXN0ID0gdGhpcy5jYWxjdWxhdGVEaXN0YW5jZUZpZWxkKGNoZiwgc3JjKTtcclxuICAgICAgICBjaGYubWF4RGlzdGFuY2UgPSBtYXhEaXN0O1xyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJESVNUQU5DRUZJRUxEX0RJU1RcIik7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJESVNUQU5DRUZJRUxEX0JMVVJcIik7IC8vIEJsdXJcclxuXHJcbiAgICAgICAgc3JjID0gdGhpcy5ib3hCbHVyKGNoZiwgMSwgc3JjKTsgLy8gU3RvcmUgZGlzdGFuY2UuXHJcblxyXG4gICAgICAgIGNoZi5kaXN0ID0gc3JjO1xyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJESVNUQU5DRUZJRUxEX0JMVVJcIik7XHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX0RJU1RBTkNFRklFTERcIik7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInBhaW50UmVjdFJlZ2lvblwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGFpbnRSZWN0UmVnaW9uKG1pbngsIG1heHgsIG1pbnksIG1heHksIHJlZ0lkLCBjaGYsIHNyY1JlZykge1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gbWlueTsgeSA8IG1heHk7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgX3k0ID0gbWlueDsgeCA8IG1heHg7ICsreCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgX3k0ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgaSA8IG5pOyArK2kpIHtcclxuICAgICAgICAgICAgICBpZiAoY2hmLmFyZWFzW2ldICE9IFJlY2FzdENvbnN0YW50cy5SQ19OVUxMX0FSRUEpIHtcclxuICAgICAgICAgICAgICAgIHNyY1JlZ1tpXSA9IHJlZ0lkO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIE5vbi1udWxsIHJlZ2lvbnMgd2lsbCBjb25zaXN0IG9mIGNvbm5lY3RlZCwgbm9uLW92ZXJsYXBwaW5nIHdhbGthYmxlIHNwYW5zIHRoYXQgZm9ybSBhIHNpbmdsZSBjb250b3VyLlxyXG4gICAgICAvLy8gQ29udG91cnMgd2lsbCBmb3JtIHNpbXBsZSBwb2x5Z29ucy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBJZiBtdWx0aXBsZSByZWdpb25zIGZvcm0gYW4gYXJlYSB0aGF0IGlzIHNtYWxsZXIgdGhhbiBAcCBtaW5SZWdpb25BcmVhLCB0aGVuIGFsbCBzcGFucyB3aWxsIGJlXHJcbiAgICAgIC8vLyByZS1hc3NpZ25lZCB0byB0aGUgemVybyAobnVsbCkgcmVnaW9uLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFBhcnRpdGlvbmluZyBjYW4gcmVzdWx0IGluIHNtYWxsZXIgdGhhbiBuZWNlc3NhcnkgcmVnaW9ucy4gQHAgbWVyZ2VSZWdpb25BcmVhIGhlbHBzXHJcbiAgICAgIC8vLyByZWR1Y2UgdW5lY2Vzc2FyaWx5IHNtYWxsIHJlZ2lvbnMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gU2VlIHRoZSAjcmNDb25maWcgZG9jdW1lbnRhdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGUgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSByZWdpb24gZGF0YSB3aWxsIGJlIGF2YWlsYWJsZSB2aWEgdGhlIHJjQ29tcGFjdEhlaWdodGZpZWxkOjptYXhSZWdpb25zXHJcbiAgICAgIC8vLyBhbmQgcmNDb21wYWN0U3Bhbjo6cmVnIGZpZWxkcy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAd2FybmluZyBUaGUgZGlzdGFuY2UgZmllbGQgbXVzdCBiZSBjcmVhdGVkIHVzaW5nICNyY0J1aWxkRGlzdGFuY2VGaWVsZCBiZWZvcmUgYXR0ZW1wdGluZyB0byBidWlsZCByZWdpb25zLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBzZWUgcmNDb21wYWN0SGVpZ2h0ZmllbGQsIHJjQ29tcGFjdFNwYW4sIHJjQnVpbGREaXN0YW5jZUZpZWxkLCByY0J1aWxkUmVnaW9uc01vbm90b25lLCByY0NvbmZpZ1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImJ1aWxkUmVnaW9uc01vbm90b25lXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZFJlZ2lvbnNNb25vdG9uZShjdHgsIGNoZiwgYm9yZGVyU2l6ZSwgbWluUmVnaW9uQXJlYSwgbWVyZ2VSZWdpb25BcmVhKSB7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJCVUlMRF9SRUdJT05TXCIpO1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gY2hmLmhlaWdodDtcclxuICAgICAgICB2YXIgaWQgPSAxO1xyXG4gICAgICAgIHZhciBzcmNSZWcgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCk7XHJcbiAgICAgICAgdmFyIG5zd2VlcHMgPSBNYXRoLm1heChjaGYud2lkdGgsIGNoZi5oZWlnaHQpO1xyXG4gICAgICAgIHN3ZWVwcyA9IG5ldyBBcnJheShuc3dlZXBzKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzd2VlcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHN3ZWVwc1tpXSA9IG5ldyBTd2VlcFNwYW4oKTtcclxuICAgICAgICB9IC8vIE1hcmsgYm9yZGVyIHJlZ2lvbnMuXHJcblxyXG5cclxuICAgICAgICBpZiAoYm9yZGVyU2l6ZSA+IDApIHtcclxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSBib3JkZXIgd2lsbCBub3Qgb3ZlcmZsb3cuXHJcbiAgICAgICAgICB2YXIgYncgPSBNYXRoLm1pbih3LCBib3JkZXJTaXplKTtcclxuICAgICAgICAgIHZhciBiaCA9IE1hdGgubWluKGgsIGJvcmRlclNpemUpOyAvLyBQYVBvbHkgcmVnaW9uc1xyXG5cclxuICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCBidywgMCwgaCwgaWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpO1xyXG4gICAgICAgICAgaWQrKztcclxuICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbih3IC0gYncsIHcsIDAsIGgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTtcclxuICAgICAgICAgIGlkKys7XHJcbiAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgMCwgYmgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTtcclxuICAgICAgICAgIGlkKys7XHJcbiAgICAgICAgICBwYWludFJlY3RSZWdpb24oMCwgdywgaCAtIGJoLCBoLCBpZCB8IFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHLCBjaGYsIHNyY1JlZyk7XHJcbiAgICAgICAgICBpZCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hmLmJvcmRlclNpemUgPSBib3JkZXJTaXplO1xyXG4gICAgICAgIHZhciBwcmV2ID0gbmV3IEFycmF5KDI1Nik7IC8vIFN3ZWVwIG9uZSBsaW5lIGF0IGEgdGltZS5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgeSA9IGJvcmRlclNpemU7IHkgPCBoIC0gYm9yZGVyU2l6ZTsgKyt5KSB7XHJcbiAgICAgICAgICAvLyBDb2xsZWN0IHNwYW5zIGZyb20gdGhpcyByb3cuXHJcbiAgICAgICAgICBwcmV2LmZpbGwoMCwgMCwgaWQpO1xyXG4gICAgICAgICAgdmFyIHJpZCA9IDE7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX3k1ID0gYm9yZGVyU2l6ZTsgeCA8IHcgLSBib3JkZXJTaXplOyArK3gpIHtcclxuICAgICAgICAgICAgdmFyIGMgPSBjaGYuY2VsbHNbeCArIF95NSAqIHddO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kyOCA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IF9pMjggPCBuaTsgKytfaTI4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbX2kyOF07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChjaGYuYXJlYXNbX2kyOF0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05VTExfQVJFQSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfSAvLyAteFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgdmFyIHByZXZpZCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIDApICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGF5ID0gX3k1ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKChzcmNSZWdbYWldICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpID09IDAgJiYgY2hmLmFyZWFzW19pMjhdID09IGNoZi5hcmVhc1thaV0pIHtcclxuICAgICAgICAgICAgICAgICAgcHJldmlkID0gc3JjUmVnW2FpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChwcmV2aWQgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcHJldmlkID0gcmlkKys7XHJcbiAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5yaWQgPSBwcmV2aWQ7XHJcbiAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5ucyA9IDA7XHJcbiAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5uZWkgPSAwO1xyXG4gICAgICAgICAgICAgIH0gLy8gLXlcclxuXHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIDMpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2F4NyA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgzKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2F5NyA9IF95NSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYWk3ID0gY2hmLmNlbGxzW19heDcgKyBfYXk3ICogd10uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzcmNSZWdbX2FpN10gIT0gMCAmJiAoc3JjUmVnW19haTddICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpID09IDAgJiYgY2hmLmFyZWFzW19pMjhdID09IGNoZi5hcmVhc1tfYWk3XSkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgbnIgPSBzcmNSZWdbX2FpN107XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoc3dlZXBzW3ByZXZpZF0ubmVpID09IDAgfHwgc3dlZXBzW3ByZXZpZF0ubmVpID09IG5yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubmVpID0gbnI7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubnMrKztcclxuICAgICAgICAgICAgICAgICAgICBwcmV2W25yXSsrO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3ZWVwc1twcmV2aWRdLm5laSA9IFJDX05VTExfTkVJO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBzcmNSZWdbX2kyOF0gPSBwcmV2aWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy8gQ3JlYXRlIHVuaXF1ZSBJRC5cclxuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kyOSA9IDE7IF9pMjkgPCByaWQ7ICsrX2kyOSkge1xyXG4gICAgICAgICAgICBpZiAoc3dlZXBzW19pMjldLm5laSAhPSBSQ19OVUxMX05FSSAmJiBzd2VlcHNbX2kyOV0ubmVpICE9IDAgJiYgcHJldltzd2VlcHNbX2kyOV0ubmVpXSA9PSBzd2VlcHNbX2kyOV0ubnMpIHtcclxuICAgICAgICAgICAgICBzd2VlcHNbX2kyOV0uaWQgPSBzd2VlcHNbX2kyOV0ubmVpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHN3ZWVwc1tfaTI5XS5pZCA9IGlkKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy8gUmVtYXAgSURzXHJcblxyXG5cclxuICAgICAgICAgIGZvciAodmFyIF95NiA9IGJvcmRlclNpemU7IHggPCB3IC0gYm9yZGVyU2l6ZTsgKyt4KSB7XHJcbiAgICAgICAgICAgIHZhciBfYzMgPSBjaGYuY2VsbHNbeCArIF95NiAqIHddO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kzMCA9IF9jMy5pbmRleCwgX25pNCA9IF9jMy5pbmRleCArIF9jMy5jb3VudDsgX2kzMCA8IF9uaTQ7ICsrX2kzMCkge1xyXG4gICAgICAgICAgICAgIGlmIChzcmNSZWdbX2kzMF0gPiAwICYmIHNyY1JlZ1tfaTMwXSA8IHJpZCkge1xyXG4gICAgICAgICAgICAgICAgc3JjUmVnW19pMzBdID0gc3dlZXBzW3NyY1JlZ1tfaTMwXV0uaWQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIkJVSUxEX1JFR0lPTlNfRklMVEVSXCIpOyAvLyBNZXJnZSByZWdpb25zIGFuZCBmaWx0ZXIgb3V0IHNtYWxsIHJlZ2lvbnMuXHJcblxyXG4gICAgICAgIHZhciBvdmVybGFwcyA9IFtdO1xyXG4gICAgICAgIGNoZi5tYXhSZWdpb25zID0gbWVyZ2VBbmRGaWx0ZXJSZWdpb25zKGN0eCwgbWluUmVnaW9uQXJlYSwgbWVyZ2VSZWdpb25BcmVhLCBpZCwgY2hmLCBzcmNSZWcsIG92ZXJsYXBzKTsgLy8gTW9ub3RvbmUgcGFydGl0aW9uaW5nIGRvZXMgbm90IGdlbmVyYXRlIG92ZXJsYXBwaW5nIHJlZ2lvbnMuXHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJCVUlMRF9SRUdJT05TX0ZJTFRFUlwiKTsgLy8gU3RvcmUgdGhlIHJlc3VsdCBvdXQuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMzEgPSAwOyBfaTMxIDwgY2hmLnNwYW5Db3VudDsgKytfaTMxKSB7XHJcbiAgICAgICAgICAvLyBpZiAoaSA9PSAxMzQ0KVxyXG4gICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiNDQzMVwiKVxyXG4gICAgICAgICAgY2hmLnNwYW5zW19pMzFdLnJlZyA9IHNyY1JlZ1tfaTMxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJCVUlMRF9SRUdJT05TXCIpO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gTm9uLW51bGwgcmVnaW9ucyB3aWxsIGNvbnNpc3Qgb2YgY29ubmVjdGVkLCBub24tb3ZlcmxhcHBpbmcgd2Fsa2FibGUgc3BhbnMgdGhhdCBmb3JtIGEgc2luZ2xlIGNvbnRvdXIuXHJcbiAgICAgIC8vLyBDb250b3VycyB3aWxsIGZvcm0gc2ltcGxlIHBvbHlnb25zLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIElmIG11bHRpcGxlIHJlZ2lvbnMgZm9ybSBhbiBhcmVhIHRoYXQgaXMgc21hbGxlciB0aGFuIEBwIG1pblJlZ2lvbkFyZWEsIHRoZW4gYWxsIHNwYW5zIHdpbGwgYmVcclxuICAgICAgLy8vIHJlLWFzc2lnbmVkIHRvIHRoZSB6ZXJvIChudWxsKSByZWdpb24uXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gV2F0ZXJzaGVkIHBhcnRpdGlvbmluZyBjYW4gcmVzdWx0IGluIHNtYWxsZXIgdGhhbiBuZWNlc3NhcnkgcmVnaW9ucywgZXNwZWNpYWxseSBpbiBkaWFnb25hbCBjb3JyaWRvcnMuXHJcbiAgICAgIC8vLyBAcCBtZXJnZVJlZ2lvbkFyZWEgaGVscHMgcmVkdWNlIHVuZWNlc3NhcmlseSBzbWFsbCByZWdpb25zLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFNlZSB0aGUgI3JjQ29uZmlnIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGUgcmVnaW9uIGRhdGEgd2lsbCBiZSBhdmFpbGFibGUgdmlhIHRoZSByY0NvbXBhY3RIZWlnaHRmaWVsZDo6bWF4UmVnaW9uc1xyXG4gICAgICAvLy8gYW5kIHJjQ29tcGFjdFNwYW46OnJlZyBmaWVsZHMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQHdhcm5pbmcgVGhlIGRpc3RhbmNlIGZpZWxkIG11c3QgYmUgY3JlYXRlZCB1c2luZyAjcmNCdWlsZERpc3RhbmNlRmllbGQgYmVmb3JlIGF0dGVtcHRpbmcgdG8gYnVpbGQgcmVnaW9ucy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjQ29tcGFjdEhlaWdodGZpZWxkLCByY0NvbXBhY3RTcGFuLCByY0J1aWxkRGlzdGFuY2VGaWVsZCwgcmNCdWlsZFJlZ2lvbnNNb25vdG9uZSwgcmNDb25maWdcclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJidWlsZFJlZ2lvbnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkUmVnaW9ucyhjdHgsIGNoZiwgYm9yZGVyU2l6ZSwgbWluUmVnaW9uQXJlYSwgbWVyZ2VSZWdpb25BcmVhKSB7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJCVUlMRF9SRUdJT05TXCIpO1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gY2hmLmhlaWdodDtcclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIlJFR0lPTlNfV0FURVJTSEVEXCIpO1xyXG4gICAgICAgIHZhciBMT0dfTkJfU1RBQ0tTID0gMztcclxuICAgICAgICB2YXIgTkJfU1RBQ0tTID0gMSA8PCBMT0dfTkJfU1RBQ0tTO1xyXG4gICAgICAgIHZhciBsdmxTdGFja3MgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOQl9TVEFDS1M7ICsraSkge1xyXG4gICAgICAgICAgbHZsU3RhY2tzLnB1c2goW10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHN0YWNrID0gbmV3IEFycmF5KDEwMjQpO1xyXG4gICAgICAgIHZhciBzcmNSZWcgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCkuZmlsbCgwKTtcclxuICAgICAgICB2YXIgc3JjRGlzdCA9IG5ldyBBcnJheShjaGYuc3BhbkNvdW50KS5maWxsKDApO1xyXG4gICAgICAgIHZhciByZWdpb25JZCA9IDE7XHJcbiAgICAgICAgdmFyIGxldmVsID0gY2hmLm1heERpc3RhbmNlICsgMSAmIH4xOyAvLyBUT0RPOiBGaWd1cmUgYmV0dGVyIGZvcm11bGEsIGV4cGFuZEl0ZXJzIGRlZmluZXMgaG93IG11Y2ggdGhlXHJcbiAgICAgICAgLy8gd2F0ZXJzaGVkIFwib3ZlcmZsb3dzXCIgYW5kIHNpbXBsaWZpZXMgdGhlIHJlZ2lvbnMuIFR5aW5nIGl0IHRvXHJcbiAgICAgICAgLy8gYWdlbnQgcmFkaXVzIHdhcyB1c3VhbGx5IGdvb2QgaW5kaWNhdGlvbiBob3cgZ3JlZWR5IGl0IGNvdWxkIGJlLlxyXG4gICAgICAgIC8vIGNvbnN0IGxldCBleHBhbmRJdGVycyA9IDQgKyB3YWxrYWJsZVJhZGl1cyAqIDI7XHJcblxyXG4gICAgICAgIHZhciBleHBhbmRJdGVycyA9IDg7XHJcblxyXG4gICAgICAgIGlmIChib3JkZXJTaXplID4gMCkge1xyXG4gICAgICAgICAgLy8gTWFrZSBzdXJlIGJvcmRlciB3aWxsIG5vdCBvdmVyZmxvdy5cclxuICAgICAgICAgIHZhciBidyA9IE1hdGgubWluKHcsIGJvcmRlclNpemUpO1xyXG4gICAgICAgICAgdmFyIGJoID0gTWF0aC5taW4oaCwgYm9yZGVyU2l6ZSk7IC8vIFBhUG9seSByZWdpb25zXHJcblxyXG4gICAgICAgICAgcGFpbnRSZWN0UmVnaW9uKDAsIGJ3LCAwLCBoLCByZWdpb25JZCB8IFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHLCBjaGYsIHNyY1JlZyk7XHJcbiAgICAgICAgICByZWdpb25JZCsrO1xyXG4gICAgICAgICAgcGFpbnRSZWN0UmVnaW9uKHcgLSBidywgdywgMCwgaCwgcmVnaW9uSWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpO1xyXG4gICAgICAgICAgcmVnaW9uSWQrKztcclxuICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCB3LCAwLCBiaCwgcmVnaW9uSWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpO1xyXG4gICAgICAgICAgcmVnaW9uSWQrKztcclxuICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCB3LCBoIC0gYmgsIGgsIHJlZ2lvbklkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTtcclxuICAgICAgICAgIHJlZ2lvbklkKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGYuYm9yZGVyU2l6ZSA9IGJvcmRlclNpemU7XHJcbiAgICAgICAgdmFyIHNJZCA9IC0xO1xyXG5cclxuICAgICAgICB3aGlsZSAobGV2ZWwgPiAwKSB7XHJcbiAgICAgICAgICBsZXZlbCA9IGxldmVsID49IDIgPyBsZXZlbCAtIDIgOiAwO1xyXG4gICAgICAgICAgc0lkID0gc0lkICsgMSAmIE5CX1NUQUNLUyAtIDE7IC8vIGN0eD0+c3RhcnRUaW1lcihSQ19USU1FUl9ESVZJREVfVE9fTEVWRUxTKTtcclxuXHJcbiAgICAgICAgICBpZiAoc0lkID09IDApIHtcclxuICAgICAgICAgICAgUmVjYXN0UmVnaW9uLnNvcnRDZWxsc0J5TGV2ZWwobGV2ZWwsIGNoZiwgc3JjUmVnLCBOQl9TVEFDS1MsIGx2bFN0YWNrcywgMSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBSZWNhc3RSZWdpb24uYXBwZW5kU3RhY2tzKGx2bFN0YWNrc1tzSWQgLSAxXSwgbHZsU3RhY2tzW3NJZF0sIHNyY1JlZyk7IC8vIGNvcHkgbGVmdCBvdmVycyBmcm9tIGxhc3QgbGV2ZWxcclxuICAgICAgICAgIH0gLy8gY3R4PT5zdG9wVGltZXIoUkNfVElNRVJfRElWSURFX1RPX0xFVkVMUyk7XHJcblxyXG5cclxuICAgICAgICAgIGN0eC5zdGFydFRpbWVyKFwiQlVJTERfUkVHSU9OU19FWFBBTkRcIik7IC8vIEV4cGFuZCBjdXJyZW50IHJlZ2lvbnMgdW50aWwgbm8gZW1wdHkgY29ubmVjdGVkIGNlbGxzIGZvdW5kLlxyXG5cclxuICAgICAgICAgIFJlY2FzdFJlZ2lvbi5leHBhbmRSZWdpb25zKGV4cGFuZEl0ZXJzLCBsZXZlbCwgY2hmLCBzcmNSZWcsIHNyY0Rpc3QsIGx2bFN0YWNrc1tzSWRdLCBmYWxzZSk7XHJcbiAgICAgICAgICBjdHguc3RvcFRpbWVyKFwiQlVJTERfUkVHSU9OU19FWFBBTkRcIik7XHJcbiAgICAgICAgICBjdHguc3RhcnRUaW1lcihcIkJVSUxEX1JFR0lPTlNfRkxPT0RcIik7IC8vIE1hcmsgbmV3IHJlZ2lvbnMgd2l0aCBJRHMuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsdmxTdGFja3Nbc0lkXS5sZW5ndGg7IGogKz0gMykge1xyXG4gICAgICAgICAgICB2YXIgX3gxMCA9IGx2bFN0YWNrc1tzSWRdW2pdO1xyXG4gICAgICAgICAgICB2YXIgeSA9IGx2bFN0YWNrc1tzSWRdW2ogKyAxXTtcclxuICAgICAgICAgICAgdmFyIF9pMzIgPSBsdmxTdGFja3Nbc0lkXVtqICsgMl07XHJcblxyXG4gICAgICAgICAgICBpZiAoX2kzMiA+PSAwICYmIHNyY1JlZ1tfaTMyXSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgaWYgKFJlY2FzdFJlZ2lvbi5mbG9vZFJlZ2lvbihfeDEwLCB5LCBfaTMyLCBsZXZlbCwgcmVnaW9uSWQsIGNoZiwgc3JjUmVnLCBzcmNEaXN0LCBzdGFjaykpIHtcclxuICAgICAgICAgICAgICAgIHJlZ2lvbklkKys7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX1JFR0lPTlNfRkxPT0RcIik7XHJcbiAgICAgICAgfSAvLyBFeHBhbmQgY3VycmVudCByZWdpb25zIHVudGlsIG5vIGVtcHR5IGNvbm5lY3RlZCBjZWxscyBmb3VuZC5cclxuXHJcblxyXG4gICAgICAgIFJlY2FzdFJlZ2lvbi5leHBhbmRSZWdpb25zKGV4cGFuZEl0ZXJzICogOCwgMCwgY2hmLCBzcmNSZWcsIHNyY0Rpc3QsIHN0YWNrLCB0cnVlKTtcclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiQlVJTERfUkVHSU9OU19XQVRFUlNIRURcIik7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJCVUlMRF9SRUdJT05TX0ZJTFRFUlwiKTsgLy8gTWVyZ2UgcmVnaW9ucyBhbmQgZmlsdGVyIG91dCBzbWFsbGUgcmVnaW9ucy5cclxuXHJcbiAgICAgICAgdmFyIG92ZXJsYXBzID0gW107XHJcbiAgICAgICAgY2hmLm1heFJlZ2lvbnMgPSB0aGlzLm1lcmdlQW5kRmlsdGVyUmVnaW9ucyhjdHgsIG1pblJlZ2lvbkFyZWEsIG1lcmdlUmVnaW9uQXJlYSwgcmVnaW9uSWQsIGNoZiwgc3JjUmVnLCBvdmVybGFwcyk7IC8vIElmIG92ZXJsYXBwaW5nIHJlZ2lvbnMgd2VyZSBmb3VuZCBkdXJpbmcgbWVyZ2luZywgc3BsaXQgdGhvc2UgcmVnaW9ucy5cclxuXHJcbiAgICAgICAgaWYgKG92ZXJsYXBzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwicmNCdWlsZFJlZ2lvbnM6IFwiICsgb3ZlcmxhcHMubGVuZ3RoICsgXCIgb3ZlcmxhcHBpbmcgcmVnaW9ucy5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiQlVJTERfUkVHSU9OU19GSUxURVJcIik7IC8vIFdyaXRlIHRoZSByZXN1bHQgb3V0LlxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTMzID0gMDsgX2kzMyA8IGNoZi5zcGFuQ291bnQ7ICsrX2kzMykge1xyXG4gICAgICAgICAgLy8gaWYgKGkgPT0gMTM0NClcclxuICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIjQ0MzFcIilcclxuICAgICAgICAgIGNoZi5zcGFuc1tfaTMzXS5yZWcgPSBzcmNSZWdbX2kzM107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiQlVJTERfUkVHSU9OU1wiKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYnVpbGRMYXllclJlZ2lvbnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkTGF5ZXJSZWdpb25zKGN0eCwgY2hmLCBib3JkZXJTaXplLCBtaW5SZWdpb25BcmVhKSB7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJCVUlMRF9SRUdJT05TXCIpO1xyXG4gICAgICAgIHZhciB3ID0gY2hmLndpZHRoO1xyXG4gICAgICAgIHZhciBoID0gY2hmLmhlaWdodDtcclxuICAgICAgICB2YXIgaWQgPSAxO1xyXG4gICAgICAgIHZhciBzcmNSZWcgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCk7XHJcbiAgICAgICAgdmFyIG5zd2VlcHMgPSBNYXRoLm1heChjaGYud2lkdGgsIGNoZi5oZWlnaHQpO1xyXG4gICAgICAgIHZhciBzd2VlcHMgPSBuZXcgQXJyYXlMaXN0KG5zd2VlcHMpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN3ZWVwcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgc3dlZXBzW2ldID0gbmV3IFN3ZWVwU3BhbigpO1xyXG4gICAgICAgIH0gLy8gTWFyayBib3JkZXIgcmVnaW9ucy5cclxuXHJcblxyXG4gICAgICAgIGlmIChib3JkZXJTaXplID4gMCkge1xyXG4gICAgICAgICAgLy8gTWFrZSBzdXJlIGJvcmRlciB3aWxsIG5vdCBvdmVyZmxvdy5cclxuICAgICAgICAgIHZhciBidyA9IE1hdGgubWluKHcsIGJvcmRlclNpemUpO1xyXG4gICAgICAgICAgdmFyIGJoID0gTWF0aC5taW4oaCwgYm9yZGVyU2l6ZSk7IC8vIFBhUG9seSByZWdpb25zXHJcblxyXG4gICAgICAgICAgcGFpbnRSZWN0UmVnaW9uKDAsIGJ3LCAwLCBoLCBpZCB8IFJlY2FzdENvbnN0YW50cy5SQ19CT1JERVJfUkVHLCBjaGYsIHNyY1JlZyk7XHJcbiAgICAgICAgICBpZCsrO1xyXG4gICAgICAgICAgcGFpbnRSZWN0UmVnaW9uKHcgLSBidywgdywgMCwgaCwgaWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpO1xyXG4gICAgICAgICAgaWQrKztcclxuICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCB3LCAwLCBiaCwgaWQgfCBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRywgY2hmLCBzcmNSZWcpO1xyXG4gICAgICAgICAgaWQrKztcclxuICAgICAgICAgIHBhaW50UmVjdFJlZ2lvbigwLCB3LCBoIC0gYmgsIGgsIGlkIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcsIGNoZiwgc3JjUmVnKTtcclxuICAgICAgICAgIGlkKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGYuYm9yZGVyU2l6ZSA9IGJvcmRlclNpemU7XHJcbiAgICAgICAgdmFyIHByZXYgPSBuZXcgQXJyYXkoMjU2KTsgLy8gU3dlZXAgb25lIGxpbmUgYXQgYSB0aW1lLlxyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gYm9yZGVyU2l6ZTsgeSA8IGggLSBib3JkZXJTaXplOyArK3kpIHtcclxuICAgICAgICAgIC8vIENvbGxlY3Qgc3BhbnMgZnJvbSB0aGlzIHJvdy5cclxuICAgICAgICAgIHByZXYuZmlsbCgwLCAwLCBpZCk7XHJcbiAgICAgICAgICB2YXIgcmlkID0gMTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfeTcgPSBib3JkZXJTaXplOyB4IDwgdyAtIGJvcmRlclNpemU7ICsreCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgX3k3ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTM0ID0gYy5pbmRleCwgbmkgPSBjLmluZGV4ICsgYy5jb3VudDsgX2kzNCA8IG5pOyArK19pMzQpIHtcclxuICAgICAgICAgICAgICB2YXIgcyA9IGNoZi5zcGFuc1tfaTM0XTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGNoZi5hcmVhc1tfaTM0XSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTlVMTF9BUkVBKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9IC8vIC14XHJcblxyXG5cclxuICAgICAgICAgICAgICB2YXIgcHJldmlkID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgMCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXkgPSBfeTcgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKHNyY1JlZ1thaV0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCAmJiBjaGYuYXJlYXNbX2kzNF0gPT0gY2hmLmFyZWFzW2FpXSkge1xyXG4gICAgICAgICAgICAgICAgICBwcmV2aWQgPSBzcmNSZWdbYWldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHByZXZpZCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aWQgPSByaWQrKztcclxuICAgICAgICAgICAgICAgIHN3ZWVwc1twcmV2aWRdLnJpZCA9IHByZXZpZDtcclxuICAgICAgICAgICAgICAgIHN3ZWVwc1twcmV2aWRdLm5zID0gMDtcclxuICAgICAgICAgICAgICAgIHN3ZWVwc1twcmV2aWRdLm5laSA9IDA7XHJcbiAgICAgICAgICAgICAgfSAvLyAteVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgMykgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfYXg4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKDMpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfYXk4ID0gX3k3ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9haTggPSBjaGYuY2VsbHNbX2F4OCArIF9heTggKiB3XS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgMyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNyY1JlZ1tfYWk4XSAhPSAwICYmIChzcmNSZWdbX2FpOF0gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgPT0gMCAmJiBjaGYuYXJlYXNbX2kzNF0gPT0gY2hmLmFyZWFzW19haThdKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBuciA9IHNyY1JlZ1tfYWk4XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChzd2VlcHNbcHJldmlkXS5uZWkgPT0gMCB8fCBzd2VlcHNbcHJldmlkXS5uZWkgPT0gbnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5uZWkgPSBucjtcclxuICAgICAgICAgICAgICAgICAgICBzd2VlcHNbcHJldmlkXS5ucysrO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZbbnJdKys7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dlZXBzW3ByZXZpZF0ubmVpID0gUkNfTlVMTF9ORUk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHNyY1JlZ1tfaTM0XSA9IHByZXZpZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBDcmVhdGUgdW5pcXVlIElELlxyXG5cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaTM1ID0gMTsgX2kzNSA8IHJpZDsgKytfaTM1KSB7XHJcbiAgICAgICAgICAgIGlmIChzd2VlcHNbX2kzNV0ubmVpICE9IFJDX05VTExfTkVJICYmIHN3ZWVwc1tfaTM1XS5uZWkgIT0gMCAmJiBwcmV2W3N3ZWVwc1tfaTM1XS5uZWldID09IHN3ZWVwc1tfaTM1XS5ucykge1xyXG4gICAgICAgICAgICAgIHN3ZWVwc1tfaTM1XS5pZCA9IHN3ZWVwc1tfaTM1XS5uZWk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc3dlZXBzW19pMzVdLmlkID0gaWQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBSZW1hcCBJRHNcclxuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX3k4ID0gYm9yZGVyU2l6ZTsgeCA8IHcgLSBib3JkZXJTaXplOyArK3gpIHtcclxuICAgICAgICAgICAgdmFyIF9jNCA9IGNoZi5jZWxsc1t4ICsgX3k4ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTM2ID0gX2M0LmluZGV4LCBfbmk1ID0gX2M0LmluZGV4ICsgX2M0LmNvdW50OyBfaTM2IDwgX25pNTsgKytfaTM2KSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNyY1JlZ1tfaTM2XSA+IDAgJiYgc3JjUmVnW19pMzZdIDwgcmlkKSB7XHJcbiAgICAgICAgICAgICAgICBzcmNSZWdbX2kzNl0gPSBzd2VlcHNbc3JjUmVnW19pMzZdXS5pZDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdGFydFRpbWVyKFwiQlVJTERfUkVHSU9OU19GSUxURVJcIik7IC8vIE1lcmdlIG1vbm90b25lIHJlZ2lvbnMgdG8gbGF5ZXJzIGFuZCByZW1vdmUgc21hbGwgcmVnaW9ucy5cclxuXHJcbiAgICAgICAgdmFyIG92ZXJsYXBzID0gW107XHJcbiAgICAgICAgY2hmLm1heFJlZ2lvbnMgPSBtZXJnZUFuZEZpbHRlckxheWVyUmVnaW9ucyhjdHgsIG1pblJlZ2lvbkFyZWEsIGlkLCBjaGYsIHNyY1JlZywgb3ZlcmxhcHMpO1xyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJCVUlMRF9SRUdJT05TX0ZJTFRFUlwiKTsgLy8gU3RvcmUgdGhlIHJlc3VsdCBvdXQuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMzcgPSAwOyBfaTM3IDwgY2hmLnNwYW5Db3VudDsgKytfaTM3KSB7XHJcbiAgICAgICAgICBjaGYuc3BhbnNbX2kzN10ucmVnID0gc3JjUmVnW19pMzddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX1JFR0lPTlNcIik7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gUmVjYXN0UmVnaW9uO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFJlZ2lvbiwgXCJSQ19OVUxMX05FSVwiLCAweGZmZik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RSZWdpb24sIFwiU3dlZXBTcGFuXCIsIChfdGVtcCQxID0gZnVuY3Rpb24gU3dlZXBTcGFuKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN3ZWVwU3Bhbik7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmlkXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaWRcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJuc1wiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5laVwiLCB2b2lkIDApO1xyXG4gIH0gLy8gbmVpZ2hib3VyIGlkXHJcbiAgLCBfdGVtcCQxKSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RSZWdpb24sIFwiUmVnaW9uXCIsIChfdGVtcDIkMSA9IC8vIE51bWJlciBvZiBzcGFucyBiZWxvbmdpbmcgdG8gdGhpcyByZWdpb25cclxuICAvLyBJRCBvZiB0aGUgcmVnaW9uXHJcbiAgLy8gQXJlIHR5cGUuXHJcbiAgZnVuY3Rpb24gUmVnaW9uKGkpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWdpb24pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNwYW5Db3VudFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmVhVHlwZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZW1hcFwiLCBmYWxzZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmlzaXRlZFwiLCBmYWxzZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib3ZlcmxhcFwiLCBmYWxzZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29ubmVjdHNUb0JvcmRlclwiLCBmYWxzZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwieW1pblwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ5bWF4XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbm5lY3Rpb25zXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJmbG9vcnNcIiwgW10pO1xyXG5cclxuICAgIHRoaXMuaWQgPSBpO1xyXG4gICAgdGhpcy55bWluID0gMHhGRkZGO1xyXG4gICAgdGhpcy5jb25uZWN0aW9ucyA9IFtdO1xyXG4gICAgdGhpcy5mbG9vcnMgPSBbXTtcclxuICB9LCBfdGVtcDIkMSkpO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuXHJcbiAgLyoqIFJlcHJlc2VudHMgYSBncm91cCBvZiByZWxhdGVkIGNvbnRvdXJzLiAqL1xyXG4gIHZhciBDb250b3VyU2V0ID0gZnVuY3Rpb24gQ29udG91clNldCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb250b3VyU2V0KTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb250c1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1pblwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtYXhcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjc1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjaFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3aWR0aFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWlnaHRcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm9yZGVyU2l6ZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhFcnJvclwiLCAwKTtcclxuICB9O1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuXHJcbiAgLyoqIFJlcHJlc2VudHMgYSBwb2x5Z29uIG1lc2ggc3VpdGFibGUgZm9yIHVzZSBpbiBidWlsZGluZyBhIG5hdmlnYXRpb24gbWVzaC4gKi9cclxuICB2YXIgUG9seU1lc2ggPSBmdW5jdGlvbiBQb2x5TWVzaCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb2x5TWVzaCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydHNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvbHlzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWdzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmVhc1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibnZlcnRzXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5wb2x5c1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJudnBcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4cG9seXNcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZmxhZ3NcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtaW5cIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWF4XCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY3NcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm9yZGVyU2l6ZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhFZGdlRXJyb3JcIiwgMCk7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gYXJyYXljb3B5JDEob25lLCBvbmVTdGFydCwgdHdvLCB0d29TdGFydCwgbGVuKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIHR3b1t0d29TdGFydCArIGldID0gb25lW29uZVN0YXJ0ICsgaV07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgRWRnZSA9IGZ1bmN0aW9uIEVkZ2UoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRWRnZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydFwiLCBuZXcgQXJyYXkoMikpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvbHlFZGdlXCIsIG5ldyBBcnJheSgyKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9seVwiLCBuZXcgQXJyYXkoMikpO1xyXG4gIH07XHJcblxyXG4gIHZhciBSZWNhc3RNZXNoID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlY2FzdE1lc2goKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RNZXNoKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0TWVzaCwgbnVsbCwgW3tcclxuICAgICAga2V5OiBcImJ1aWxkTWVzaEFkamFjZW5jeVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRNZXNoQWRqYWNlbmN5KHBvbHlzLCBucG9seXMsIG52ZXJ0cywgdmVydHNQZXJQb2x5KSB7XHJcbiAgICAgICAgLy8gQmFzZWQgb24gY29kZSBieSBFcmljIExlbmd5ZWwgZnJvbTpcclxuICAgICAgICAvLyBodHRwOi8vd3d3LnRlcmF0aG9uLmNvbS9jb2RlL2VkZ2VzLnBocFxyXG4gICAgICAgIHZhciBtYXhFZGdlQ291bnQgPSBucG9seXMgKiB2ZXJ0c1BlclBvbHk7XHJcbiAgICAgICAgdmFyIGZpcnN0RWRnZSA9IG5ldyBBcnJheShudmVydHMgKyBtYXhFZGdlQ291bnQpO1xyXG4gICAgICAgIHZhciBuZXh0RWRnZSA9IG52ZXJ0cztcclxuICAgICAgICB2YXIgZWRnZUNvdW50ID0gMDtcclxuICAgICAgICB2YXIgZWRnZXMgPSBuZXcgQXJyYXkobWF4RWRnZUNvdW50KTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudmVydHM7IGkrKykge1xyXG4gICAgICAgICAgZmlyc3RFZGdlW2ldID0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbnBvbHlzOyArK19pKSB7XHJcbiAgICAgICAgICB2YXIgdCA9IF9pICogdmVydHNQZXJQb2x5ICogMjtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZlcnRzUGVyUG9seTsgKytqKSB7XHJcbiAgICAgICAgICAgIGlmIChwb2x5c1t0ICsgal0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpIGJyZWFrO1xyXG4gICAgICAgICAgICB2YXIgdjAgPSBwb2x5c1t0ICsgal07XHJcbiAgICAgICAgICAgIHZhciB2MSA9IGogKyAxID49IHZlcnRzUGVyUG9seSB8fCBwb2x5c1t0ICsgaiArIDFdID09IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYID8gcG9seXNbdCArIDBdIDogcG9seXNbdCArIGogKyAxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2MCA8IHYxKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGVkZ2UgPSBuZXcgRWRnZSgpO1xyXG4gICAgICAgICAgICAgIGVkZ2VzW2VkZ2VDb3VudF0gPSBlZGdlO1xyXG4gICAgICAgICAgICAgIGVkZ2UudmVydFswXSA9IHYwO1xyXG4gICAgICAgICAgICAgIGVkZ2UudmVydFsxXSA9IHYxO1xyXG4gICAgICAgICAgICAgIGVkZ2UucG9seVswXSA9IF9pO1xyXG4gICAgICAgICAgICAgIGVkZ2UucG9seUVkZ2VbMF0gPSBqO1xyXG4gICAgICAgICAgICAgIGVkZ2UucG9seVsxXSA9IF9pO1xyXG4gICAgICAgICAgICAgIGVkZ2UucG9seUVkZ2VbMV0gPSAwOyAvLyBJbnNlcnQgZWRnZVxyXG5cclxuICAgICAgICAgICAgICBmaXJzdEVkZ2VbbmV4dEVkZ2UgKyBlZGdlQ291bnRdID0gZmlyc3RFZGdlW3YwXTtcclxuICAgICAgICAgICAgICBmaXJzdEVkZ2VbdjBdID0gZWRnZUNvdW50O1xyXG4gICAgICAgICAgICAgIGVkZ2VDb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBucG9seXM7ICsrX2kyKSB7XHJcbiAgICAgICAgICB2YXIgX3QgPSBfaTIgKiB2ZXJ0c1BlclBvbHkgKiAyO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCB2ZXJ0c1BlclBvbHk7ICsrX2opIHtcclxuICAgICAgICAgICAgaWYgKHBvbHlzW190ICsgX2pdID09IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYKSBicmVhaztcclxuICAgICAgICAgICAgdmFyIF92ID0gcG9seXNbX3QgKyBfal07XHJcblxyXG4gICAgICAgICAgICB2YXIgX3YyID0gX2ogKyAxID49IHZlcnRzUGVyUG9seSB8fCBwb2x5c1tfdCArIF9qICsgMV0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFggPyBwb2x5c1tfdCArIDBdIDogcG9seXNbX3QgKyBfaiArIDFdO1xyXG5cclxuICAgICAgICAgICAgaWYgKF92ID4gX3YyKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IGZpcnN0RWRnZVtfdjJdOyBlICE9IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYOyBlID0gZmlyc3RFZGdlW25leHRFZGdlICsgZV0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBfZWRnZSA9IGVkZ2VzW2VdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfZWRnZS52ZXJ0WzFdID09IF92ICYmIF9lZGdlLnBvbHlbMF0gPT0gX2VkZ2UucG9seVsxXSkge1xyXG4gICAgICAgICAgICAgICAgICBfZWRnZS5wb2x5WzFdID0gX2kyO1xyXG4gICAgICAgICAgICAgICAgICBfZWRnZS5wb2x5RWRnZVsxXSA9IF9qO1xyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFN0b3JlIGFkamFjZW5jeVxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgZWRnZUNvdW50OyArK19pMykge1xyXG4gICAgICAgICAgdmFyIF9lID0gZWRnZXNbX2kzXTtcclxuXHJcbiAgICAgICAgICBpZiAoX2UucG9seVswXSAhPSBfZS5wb2x5WzFdKSB7XHJcbiAgICAgICAgICAgIHZhciBwMCA9IF9lLnBvbHlbMF0gKiB2ZXJ0c1BlclBvbHkgKiAyO1xyXG4gICAgICAgICAgICB2YXIgcDEgPSBfZS5wb2x5WzFdICogdmVydHNQZXJQb2x5ICogMjtcclxuICAgICAgICAgICAgcG9seXNbcDAgKyB2ZXJ0c1BlclBvbHkgKyBfZS5wb2x5RWRnZVswXV0gPSBfZS5wb2x5WzFdO1xyXG4gICAgICAgICAgICBwb2x5c1twMSArIHZlcnRzUGVyUG9seSArIF9lLnBvbHlFZGdlWzFdXSA9IF9lLnBvbHlbMF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjb21wdXRlVmVydGV4SGFzaFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcHV0ZVZlcnRleEhhc2goeCwgeSwgeikge1xyXG4gICAgICAgIHZhciBoMSA9IDB4OGRhNmIzNDM7IC8vIExhcmdlIG11bHRpcGxpY2F0aXZlIGNvbnN0YW50cztcclxuXHJcbiAgICAgICAgdmFyIGgyID0gMHhkODE2Mzg0MTsgLy8gaGVyZSBhcmJpdHJhcmlseSBjaG9zZW4gcHJpbWVzXHJcblxyXG4gICAgICAgIHZhciBoMyA9IDB4Y2IxYWIzMTtcclxuICAgICAgICB2YXIgbiA9IGgxICogeCArIGgyICogeSArIGgzICogejtcclxuICAgICAgICByZXR1cm4gbiAmIFJlY2FzdE1lc2guVkVSVEVYX0JVQ0tFVF9DT1VOVCAtIDE7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZFZlcnRleFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVmVydGV4KHgsIHksIHosIHZlcnRzLCBmaXJzdFZlcnQsIG5leHRWZXJ0LCBudikge1xyXG4gICAgICAgIHZhciBidWNrZXQgPSBSZWNhc3RNZXNoLmNvbXB1dGVWZXJ0ZXhIYXNoKHgsIDAsIHopO1xyXG4gICAgICAgIHZhciBpID0gZmlyc3RWZXJ0W2J1Y2tldF07XHJcblxyXG4gICAgICAgIHdoaWxlIChpICE9IC0xKSB7XHJcbiAgICAgICAgICB2YXIgX3YzID0gaSAqIDM7XHJcblxyXG4gICAgICAgICAgaWYgKHZlcnRzW192MyArIDBdID09IHggJiYgTWF0aC5hYnModmVydHNbX3YzICsgMV0gLSB5KSA8PSAyICYmIHZlcnRzW192MyArIDJdID09IHopIHJldHVybiBbaSwgbnZdO1xyXG4gICAgICAgICAgaSA9IG5leHRWZXJ0W2ldOyAvLyBuZXh0XHJcbiAgICAgICAgfSAvLyBDb3VsZCBub3QgZmluZCwgY3JlYXRlIG5ldy5cclxuXHJcblxyXG4gICAgICAgIGkgPSBudjtcclxuICAgICAgICBudisrO1xyXG4gICAgICAgIHZhciB2ID0gaSAqIDM7XHJcbiAgICAgICAgdmVydHNbdiArIDBdID0geDtcclxuICAgICAgICB2ZXJ0c1t2ICsgMV0gPSB5O1xyXG4gICAgICAgIHZlcnRzW3YgKyAyXSA9IHo7XHJcbiAgICAgICAgbmV4dFZlcnRbaV0gPSBmaXJzdFZlcnRbYnVja2V0XTtcclxuICAgICAgICBmaXJzdFZlcnRbYnVja2V0XSA9IGk7XHJcbiAgICAgICAgcmV0dXJuIFtpLCBudl07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInByZXZcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXYoaSwgbikge1xyXG4gICAgICAgIHJldHVybiBpIC0gMSA+PSAwID8gaSAtIDEgOiBuIC0gMTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibmV4dFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dChpLCBuKSB7XHJcbiAgICAgICAgcmV0dXJuIGkgKyAxIDwgbiA/IGkgKyAxIDogMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYXJlYTJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFyZWEyKHZlcnRzLCBhLCBiLCBjKSB7XHJcbiAgICAgICAgcmV0dXJuICh2ZXJ0c1tiICsgMF0gLSB2ZXJ0c1thICsgMF0pICogKHZlcnRzW2MgKyAyXSAtIHZlcnRzW2EgKyAyXSkgLSAodmVydHNbYyArIDBdIC0gdmVydHNbYSArIDBdKSAqICh2ZXJ0c1tiICsgMl0gLSB2ZXJ0c1thICsgMl0pO1xyXG4gICAgICB9IC8vIFJldHVybnMgdHJ1ZSBpZmYgYyBpcyBzdHJpY3RseSB0byB0aGUgbGVmdCBvZiB0aGUgZGlyZWN0ZWRcclxuICAgICAgLy8gbGluZSB0aHJvdWdoIGEgdG8gYi5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJsZWZ0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsZWZ0KHZlcnRzLCBhLCBiLCBjKSB7XHJcbiAgICAgICAgcmV0dXJuIFJlY2FzdE1lc2guYXJlYTIodmVydHMsIGEsIGIsIGMpIDwgMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibGVmdE9uXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsZWZ0T24odmVydHMsIGEsIGIsIGMpIHtcclxuICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5hcmVhMih2ZXJ0cywgYSwgYiwgYykgPD0gMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY29sbGluZWFyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb2xsaW5lYXIodmVydHMsIGEsIGIsIGMpIHtcclxuICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5hcmVhMih2ZXJ0cywgYSwgYiwgYykgPT0gMDtcclxuICAgICAgfSAvLyBSZXR1cm5zIHRydWUgaWZmIGFiIHByb3Blcmx5IGludGVyc2VjdHMgY2Q6IHRoZXkgc2hhcmVcclxuICAgICAgLy8gYSBwb1BvbHkgaW50ZXJpb3IgdG8gYm90aCBzZWdtZW50cy4gVGhlIHByb3Blcm5lc3Mgb2YgdGhlXHJcbiAgICAgIC8vIGludGVyc2VjdGlvbiBpcyBlbnN1cmVkIGJ5IHVzaW5nIHN0cmljdCBsZWZ0bmVzcy5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpbnRlcnNlY3RQcm9wXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlcnNlY3RQcm9wKHZlcnRzLCBhLCBiLCBjLCBkKSB7XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGltcHJvcGVyIGNhc2VzLlxyXG4gICAgICAgIGlmIChSZWNhc3RNZXNoLmNvbGxpbmVhcih2ZXJ0cywgYSwgYiwgYykgfHwgUmVjYXN0TWVzaC5jb2xsaW5lYXIodmVydHMsIGEsIGIsIGQpIHx8IFJlY2FzdE1lc2guY29sbGluZWFyKHZlcnRzLCBjLCBkLCBhKSB8fCBSZWNhc3RNZXNoLmNvbGxpbmVhcih2ZXJ0cywgYywgZCwgYikpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5sZWZ0KHZlcnRzLCBhLCBiLCBjKSBeIFJlY2FzdE1lc2gubGVmdCh2ZXJ0cywgYSwgYiwgZCkgJiYgUmVjYXN0TWVzaC5sZWZ0KHZlcnRzLCBjLCBkLCBhKSBeIFJlY2FzdE1lc2gubGVmdCh2ZXJ0cywgYywgZCwgYik7XHJcbiAgICAgIH0gLy8gUmV0dXJucyBUIGlmZiAoYSxiLGMpIGFyZSBjb2xsaW5lYXIgYW5kIHBvUG9seSBjIGxpZXNcclxuICAgICAgLy8gb24gdGhlIGNsb3NlZCBzZWdlbWVudCBhYi5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJiZXR3ZWVuXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBiZXR3ZWVuKHZlcnRzLCBhLCBiLCBjKSB7XHJcbiAgICAgICAgaWYgKCFSZWNhc3RNZXNoLmNvbGxpbmVhcih2ZXJ0cywgYSwgYiwgYykpIHJldHVybiBmYWxzZTsgLy8gSWYgYWIgbm90IHZlcnRpY2FsLCBjaGVjayBiZXR3ZWVubmVzcyBvbiB4OyBlbHNlIG9uIHkuXHJcblxyXG4gICAgICAgIGlmICh2ZXJ0c1thICsgMF0gIT0gdmVydHNbYiArIDBdKSByZXR1cm4gdmVydHNbYSArIDBdIDw9IHZlcnRzW2MgKyAwXSAmJiB2ZXJ0c1tjICsgMF0gPD0gdmVydHNbYiArIDBdIHx8IHZlcnRzW2EgKyAwXSA+PSB2ZXJ0c1tjICsgMF0gJiYgdmVydHNbYyArIDBdID49IHZlcnRzW2IgKyAwXTtlbHNlIHJldHVybiB2ZXJ0c1thICsgMl0gPD0gdmVydHNbYyArIDJdICYmIHZlcnRzW2MgKyAyXSA8PSB2ZXJ0c1tiICsgMl0gfHwgdmVydHNbYSArIDJdID49IHZlcnRzW2MgKyAyXSAmJiB2ZXJ0c1tjICsgMl0gPj0gdmVydHNbYiArIDJdO1xyXG4gICAgICB9IC8vIFJldHVybnMgdHJ1ZSBpZmYgc2VnbWVudHMgYWIgYW5kIGNkIGludGVyc2VjdCwgcHJvcGVybHkgb3IgaW1wcm9wZXJseS5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpbnRlcnNlY3RcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGludGVyc2VjdCh2ZXJ0cywgYSwgYiwgYywgZCkge1xyXG4gICAgICAgIGlmIChSZWNhc3RNZXNoLmludGVyc2VjdFByb3AodmVydHMsIGEsIGIsIGMsIGQpKSByZXR1cm4gdHJ1ZTtlbHNlIGlmIChSZWNhc3RNZXNoLmJldHdlZW4odmVydHMsIGEsIGIsIGMpIHx8IFJlY2FzdE1lc2guYmV0d2Vlbih2ZXJ0cywgYSwgYiwgZCkgfHwgUmVjYXN0TWVzaC5iZXR3ZWVuKHZlcnRzLCBjLCBkLCBhKSB8fCBSZWNhc3RNZXNoLmJldHdlZW4odmVydHMsIGMsIGQsIGIpKSByZXR1cm4gdHJ1ZTtlbHNlIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidmVxdWFsXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZXF1YWwodmVydHMsIGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gdmVydHNbYSArIDBdID09IHZlcnRzW2IgKyAwXSAmJiB2ZXJ0c1thICsgMl0gPT0gdmVydHNbYiArIDJdO1xyXG4gICAgICB9IC8vIFJldHVybnMgVCBpZmYgKHZfaSwgdl9qKSBpcyBhIHByb3BlciBpbnRlcm5hbCAqb3IqIGV4dGVybmFsXHJcbiAgICAgIC8vIGRpYWdvbmFsIG9mIFAsICppZ25vcmluZyBlZGdlcyBpbmNpZGVudCB0byB2X2kgYW5kIHZfaiouXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlhZ29uYWxpZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlhZ29uYWxpZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcykge1xyXG4gICAgICAgIHZhciBkMCA9IChpbmRpY2VzW2ldICYgMHgwZmZmZmZmZikgKiA0O1xyXG4gICAgICAgIHZhciBkMSA9IChpbmRpY2VzW2pdICYgMHgwZmZmZmZmZikgKiA0OyAvLyBGb3IgZWFjaCBlZGdlIChrLGsrMSkgb2YgUFxyXG5cclxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG47IGsrKykge1xyXG4gICAgICAgICAgdmFyIGsxID0gUmVjYXN0TWVzaC5uZXh0KGssIG4pOyAvLyBTa2lwIGVkZ2VzIGluY2lkZW50IHRvIGkgb3IgalxyXG5cclxuICAgICAgICAgIGlmICghKGsgPT0gaSB8fCBrMSA9PSBpIHx8IGsgPT0gaiB8fCBrMSA9PSBqKSkge1xyXG4gICAgICAgICAgICB2YXIgcDAgPSAoaW5kaWNlc1trXSAmIDB4MGZmZmZmZmYpICogNDtcclxuICAgICAgICAgICAgdmFyIHAxID0gKGluZGljZXNbazFdICYgMHgwZmZmZmZmZikgKiA0O1xyXG4gICAgICAgICAgICBpZiAoUmVjYXN0TWVzaC52ZXF1YWwodmVydHMsIGQwLCBwMCkgfHwgUmVjYXN0TWVzaC52ZXF1YWwodmVydHMsIGQxLCBwMCkgfHwgUmVjYXN0TWVzaC52ZXF1YWwodmVydHMsIGQwLCBwMSkgfHwgUmVjYXN0TWVzaC52ZXF1YWwodmVydHMsIGQxLCBwMSkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAoUmVjYXN0TWVzaC5pbnRlcnNlY3QodmVydHMsIGQwLCBkMSwgcDAsIHAxKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gLy8gUmV0dXJucyB0cnVlIGlmZiB0aGUgZGlhZ29uYWwgKGksaikgaXMgc3RyaWN0bHkgaW50ZXJuYWwgdG8gdGhlXHJcbiAgICAgIC8vIHBvbHlnb24gUCBpbiB0aGUgbmVpZ2hib3Job29kIG9mIHRoZSBpIGVuZHBvaW50LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImluQ29uZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5Db25lKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKSB7XHJcbiAgICAgICAgdmFyIHBpID0gKGluZGljZXNbaV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcbiAgICAgICAgdmFyIHBqID0gKGluZGljZXNbal0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcbiAgICAgICAgdmFyIHBpMSA9IChpbmRpY2VzW1JlY2FzdE1lc2gubmV4dChpLCBuKV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcbiAgICAgICAgdmFyIHBpbjEgPSAoaW5kaWNlc1tSZWNhc3RNZXNoLnByZXYoaSwgbildICYgMHgwZmZmZmZmZikgKiA0OyAvLyBJZiBQW2ldIGlzIGEgY29udmV4IHZlcnRleCBbIGkrMSBsZWZ0IG9yIG9uIChpLTEsaSkgXS5cclxuXHJcbiAgICAgICAgaWYgKFJlY2FzdE1lc2gubGVmdE9uKHZlcnRzLCBwaW4xLCBwaSwgcGkxKSkge1xyXG4gICAgICAgICAgcmV0dXJuIFJlY2FzdE1lc2gubGVmdCh2ZXJ0cywgcGksIHBqLCBwaW4xKSAmJiBSZWNhc3RNZXNoLmxlZnQodmVydHMsIHBqLCBwaSwgcGkxKTtcclxuICAgICAgICB9IC8vIEFzc3VtZSAoaS0xLGksaSsxKSBub3QgY29sbGluZWFyLlxyXG4gICAgICAgIC8vIGVsc2UgUFtpXSBpcyByZWZsZXguXHJcblxyXG5cclxuICAgICAgICByZXR1cm4gIShSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGksIHBqLCBwaTEpICYmIFJlY2FzdE1lc2gubGVmdE9uKHZlcnRzLCBwaiwgcGksIHBpbjEpKTtcclxuICAgICAgfSAvLyBSZXR1cm5zIFQgaWZmICh2X2ksIHZfaikgaXMgYSBwcm9wZXIgaW50ZXJuYWxcclxuICAgICAgLy8gZGlhZ29uYWwgb2YgUC5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJkaWFnb25hbFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlhZ29uYWwoaSwgaiwgbiwgdmVydHMsIGluZGljZXMpIHtcclxuICAgICAgICByZXR1cm4gUmVjYXN0TWVzaC5pbkNvbmUoaSwgaiwgbiwgdmVydHMsIGluZGljZXMpICYmIFJlY2FzdE1lc2guZGlhZ29uYWxpZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcyk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImRpYWdvbmFsaWVMb29zZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlhZ29uYWxpZUxvb3NlKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKSB7XHJcbiAgICAgICAgdmFyIGQwID0gKGluZGljZXNbaV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcbiAgICAgICAgdmFyIGQxID0gKGluZGljZXNbal0gJiAweDBmZmZmZmZmKSAqIDQ7IC8vIEZvciBlYWNoIGVkZ2UgKGssaysxKSBvZiBQXHJcblxyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbjsgaysrKSB7XHJcbiAgICAgICAgICB2YXIgazEgPSBSZWNhc3RNZXNoLm5leHQoaywgbik7IC8vIFNraXAgZWRnZXMgaW5jaWRlbnQgdG8gaSBvciBqXHJcblxyXG4gICAgICAgICAgaWYgKCEoayA9PSBpIHx8IGsxID09IGkgfHwgayA9PSBqIHx8IGsxID09IGopKSB7XHJcbiAgICAgICAgICAgIHZhciBwMCA9IChpbmRpY2VzW2tdICYgMHgwZmZmZmZmZikgKiA0O1xyXG4gICAgICAgICAgICB2YXIgcDEgPSAoaW5kaWNlc1trMV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcbiAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDAsIHAwKSB8fCBSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDEsIHAwKSB8fCBSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDAsIHAxKSB8fCBSZWNhc3RNZXNoLnZlcXVhbCh2ZXJ0cywgZDEsIHAxKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmludGVyc2VjdFByb3AodmVydHMsIGQwLCBkMSwgcDAsIHAxKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImluQ29uZUxvb3NlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbkNvbmVMb29zZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcykge1xyXG4gICAgICAgIHZhciBwaSA9IChpbmRpY2VzW2ldICYgMHgwZmZmZmZmZikgKiA0O1xyXG4gICAgICAgIHZhciBwaiA9IChpbmRpY2VzW2pdICYgMHgwZmZmZmZmZikgKiA0O1xyXG4gICAgICAgIHZhciBwaTEgPSAoaW5kaWNlc1tSZWNhc3RNZXNoLm5leHQoaSwgbildICYgMHgwZmZmZmZmZikgKiA0O1xyXG4gICAgICAgIHZhciBwaW4xID0gKGluZGljZXNbUmVjYXN0TWVzaC5wcmV2KGksIG4pXSAmIDB4MGZmZmZmZmYpICogNDsgLy8gSWYgUFtpXSBpcyBhIGNvbnZleCB2ZXJ0ZXggWyBpKzEgbGVmdCBvciBvbiAoaS0xLGkpIF0uXHJcblxyXG4gICAgICAgIGlmIChSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGluMSwgcGksIHBpMSkpIHJldHVybiBSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGksIHBqLCBwaW4xKSAmJiBSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGosIHBpLCBwaTEpOyAvLyBBc3N1bWUgKGktMSxpLGkrMSkgbm90IGNvbGxpbmVhci5cclxuICAgICAgICAvLyBlbHNlIFBbaV0gaXMgcmVmbGV4LlxyXG5cclxuICAgICAgICByZXR1cm4gIShSZWNhc3RNZXNoLmxlZnRPbih2ZXJ0cywgcGksIHBqLCBwaTEpICYmIFJlY2FzdE1lc2gubGVmdE9uKHZlcnRzLCBwaiwgcGksIHBpbjEpKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlhZ29uYWxMb29zZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlhZ29uYWxMb29zZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcykge1xyXG4gICAgICAgIHJldHVybiBSZWNhc3RNZXNoLmluQ29uZUxvb3NlKGksIGosIG4sIHZlcnRzLCBpbmRpY2VzKSAmJiBSZWNhc3RNZXNoLmRpYWdvbmFsaWVMb29zZShpLCBqLCBuLCB2ZXJ0cywgaW5kaWNlcyk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInRyaWFuZ3VsYXRlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0cmlhbmd1bGF0ZShuLCB2ZXJ0cywgaW5kaWNlcywgdHJpcykge1xyXG4gICAgICAgIHZhciBudHJpcyA9IDA7IC8vIFRoZSBsYXN0IGJpdCBvZiB0aGUgaW5kZXggaXMgdXNlZCB0byBpbmRpY2F0ZSBpZiB0aGUgdmVydGV4IGNhbiBiZSByZW1vdmVkLlxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgdmFyIGkxID0gUmVjYXN0TWVzaC5uZXh0KGksIG4pO1xyXG4gICAgICAgICAgdmFyIGkyID0gUmVjYXN0TWVzaC5uZXh0KGkxLCBuKTtcclxuXHJcbiAgICAgICAgICBpZiAoUmVjYXN0TWVzaC5kaWFnb25hbChpLCBpMiwgbiwgdmVydHMsIGluZGljZXMpKSB7XHJcbiAgICAgICAgICAgIGluZGljZXNbaTFdIHw9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAobiA+IDMpIHtcclxuICAgICAgICAgIHZhciBtaW5MZW4gPSAtMTtcclxuICAgICAgICAgIHZhciBtaW5pID0gLTE7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgbjsgX2k3KyspIHtcclxuICAgICAgICAgICAgdmFyIF9pOCA9IFJlY2FzdE1lc2gubmV4dChfaTcsIG4pO1xyXG5cclxuICAgICAgICAgICAgaWYgKChpbmRpY2VzW19pOF0gJiAweDgwMDAwMDAwKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHAwID0gKGluZGljZXNbX2k3XSAmIDB4MGZmZmZmZmYpICogNDtcclxuICAgICAgICAgICAgICB2YXIgcDIgPSAoaW5kaWNlc1tSZWNhc3RNZXNoLm5leHQoX2k4LCBuKV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcbiAgICAgICAgICAgICAgdmFyIGR4ID0gdmVydHNbcDIgKyAwXSAtIHZlcnRzW3AwICsgMF07XHJcbiAgICAgICAgICAgICAgdmFyIGR5ID0gdmVydHNbcDIgKyAyXSAtIHZlcnRzW3AwICsgMl07XHJcbiAgICAgICAgICAgICAgdmFyIGxlbiA9IGR4ICogZHggKyBkeSAqIGR5O1xyXG5cclxuICAgICAgICAgICAgICBpZiAobWluTGVuIDwgMCB8fCBsZW4gPCBtaW5MZW4pIHtcclxuICAgICAgICAgICAgICAgIG1pbkxlbiA9IGxlbjtcclxuICAgICAgICAgICAgICAgIG1pbmkgPSBfaTc7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG1pbmkgPT0gLTEpIHtcclxuICAgICAgICAgICAgLy8gV2UgbWlnaHQgZ2V0IGhlcmUgYmVjYXVzZSB0aGUgY29udG91ciBoYXMgb3ZlcmxhcHBpbmcgc2VnbWVudHMsIGxpa2UgdGhpczpcclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgLy8gQSBvLW89PT09PW8tLS1vIEJcclxuICAgICAgICAgICAgLy8gLyB8QyBEfCBcXFxyXG4gICAgICAgICAgICAvLyBvIG8gbyBvXHJcbiAgICAgICAgICAgIC8vIDogOiA6IDpcclxuICAgICAgICAgICAgLy8gV2UnbGwgdHJ5IHRvIHJlY292ZXIgYnkgbG9vc2luZyB1cCB0aGUgaW5Db25lIHRlc3QgYSBiaXQgc28gdGhhdCBhIGRpYWdvbmFsXHJcbiAgICAgICAgICAgIC8vIGxpa2UgQS1CIG9yIEMtRCBjYW4gYmUgZm91bmQgYW5kIHdlIGNhbiBjb250aW51ZS5cclxuICAgICAgICAgICAgbWluTGVuID0gLTE7XHJcbiAgICAgICAgICAgIG1pbmkgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pOSA9IDA7IF9pOSA8IG47IF9pOSsrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9pMTAgPSBSZWNhc3RNZXNoLm5leHQoX2k5LCBuKTtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIF9pMTEgPSBSZWNhc3RNZXNoLm5leHQoX2kxMCwgbik7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmRpYWdvbmFsTG9vc2UoX2k5LCBfaTExLCBuLCB2ZXJ0cywgaW5kaWNlcykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfcCA9IChpbmRpY2VzW19pOV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9wMiA9IChpbmRpY2VzW1JlY2FzdE1lc2gubmV4dChfaTExLCBuKV0gJiAweDBmZmZmZmZmKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF9keCA9IHZlcnRzW19wMiArIDBdIC0gdmVydHNbX3AgKyAwXTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2R5ID0gdmVydHNbX3AyICsgMl0gLSB2ZXJ0c1tfcCArIDJdO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfbGVuID0gX2R4ICogX2R4ICsgX2R5ICogX2R5O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChtaW5MZW4gPCAwIHx8IF9sZW4gPCBtaW5MZW4pIHtcclxuICAgICAgICAgICAgICAgICAgbWluTGVuID0gX2xlbjtcclxuICAgICAgICAgICAgICAgICAgbWluaSA9IF9pOTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtaW5pID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgLy8gVGhlIGNvbnRvdXIgaXMgbWVzc2VkIHVwLiBUaGlzIHNvbWV0aW1lcyBoYXBwZW5zXHJcbiAgICAgICAgICAgICAgLy8gaWYgdGhlIGNvbnRvdXIgc2ltcGxpZmljYXRpb24gaXMgdG9vIGFnZ3Jlc3NpdmUuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIC1udHJpcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBfaTQgPSBtaW5pO1xyXG5cclxuICAgICAgICAgIHZhciBfaTUgPSBSZWNhc3RNZXNoLm5leHQoX2k0LCBuKTtcclxuXHJcbiAgICAgICAgICB2YXIgX2k2ID0gUmVjYXN0TWVzaC5uZXh0KF9pNSwgbik7XHJcblxyXG4gICAgICAgICAgdHJpc1tudHJpcyAqIDNdID0gaW5kaWNlc1tfaTRdICYgMHgwZmZmZmZmO1xyXG4gICAgICAgICAgdHJpc1tudHJpcyAqIDMgKyAxXSA9IGluZGljZXNbX2k1XSAmIDB4MGZmZmZmZjtcclxuICAgICAgICAgIHRyaXNbbnRyaXMgKiAzICsgMl0gPSBpbmRpY2VzW19pNl0gJiAweDBmZmZmZmY7XHJcbiAgICAgICAgICBudHJpcysrOyAvLyBSZW1vdmVzIFBbaTFdIGJ5IGNvcHlpbmcgUFtpKzFdLi4uUFtuLTFdIGxlZnQgb25lIGluZGV4LlxyXG5cclxuICAgICAgICAgIG4tLTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBrID0gX2k1OyBrIDwgbjsgaysrKSB7XHJcbiAgICAgICAgICAgIGluZGljZXNba10gPSBpbmRpY2VzW2sgKyAxXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoX2k1ID49IG4pIF9pNSA9IDA7XHJcbiAgICAgICAgICBfaTQgPSBSZWNhc3RNZXNoLnByZXYoX2k1LCBuKTsgLy8gVXBkYXRlIGRpYWdvbmFsIGZsYWdzLlxyXG5cclxuICAgICAgICAgIGlmIChSZWNhc3RNZXNoLmRpYWdvbmFsKFJlY2FzdE1lc2gucHJldihfaTQsIG4pLCBfaTUsIG4sIHZlcnRzLCBpbmRpY2VzKSkgaW5kaWNlc1tfaTRdIHw9IDB4ODAwMDAwMDA7ZWxzZSBpbmRpY2VzW19pNF0gJj0gMHgwZmZmZmZmO1xyXG4gICAgICAgICAgaWYgKFJlY2FzdE1lc2guZGlhZ29uYWwoX2k0LCBSZWNhc3RNZXNoLm5leHQoX2k1LCBuKSwgbiwgdmVydHMsIGluZGljZXMpKSBpbmRpY2VzW19pNV0gfD0gMHg4MDAwMDAwMDtlbHNlIGluZGljZXNbX2k1XSAmPSAweDBmZmZmZmY7XHJcbiAgICAgICAgfSAvLyBBcHBlbmQgdGhlIHJlbWFpbmluZyB0cmlhbmdsZS5cclxuXHJcblxyXG4gICAgICAgIHRyaXNbbnRyaXMgKiAzXSA9IGluZGljZXNbMF0gJiAweDBmZmZmZmY7XHJcbiAgICAgICAgdHJpc1tudHJpcyAqIDMgKyAxXSA9IGluZGljZXNbMV0gJiAweDBmZmZmZmY7XHJcbiAgICAgICAgdHJpc1tudHJpcyAqIDMgKyAyXSA9IGluZGljZXNbMl0gJiAweDBmZmZmZmY7XHJcbiAgICAgICAgbnRyaXMrKztcclxuICAgICAgICByZXR1cm4gbnRyaXM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNvdW50UG9seVZlcnRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudFBvbHlWZXJ0cyhwLCBqLCBudnApIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG52cDsgKytpKSB7XHJcbiAgICAgICAgICBpZiAocFtpICsgal0gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpIHJldHVybiBpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG52cDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidWxlZnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVsZWZ0KHZlcnRzLCBhLCBiLCBjKSB7XHJcbiAgICAgICAgcmV0dXJuICh2ZXJ0c1tiICsgMF0gLSB2ZXJ0c1thICsgMF0pICogKHZlcnRzW2MgKyAyXSAtIHZlcnRzW2EgKyAyXSkgLSAodmVydHNbYyArIDBdIC0gdmVydHNbYSArIDBdKSAqICh2ZXJ0c1tiICsgMl0gLSB2ZXJ0c1thICsgMl0pIDwgMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UG9seU1lcmdlVmFsdWVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBvbHlNZXJnZVZhbHVlKHBvbHlzLCBwYSwgcGIsIHZlcnRzLCBudnApIHtcclxuICAgICAgICB2YXIgZWEgPSAtMTtcclxuICAgICAgICB2YXIgZWIgPSAtMTtcclxuICAgICAgICB2YXIgbmEgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKHBvbHlzLCBwYSwgbnZwKTtcclxuICAgICAgICB2YXIgbmIgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKHBvbHlzLCBwYiwgbnZwKTsgLy8gSWYgdGhlIG1lcmdlZCBwb2x5Z29uIHdvdWxkIGJlIHRvbyBiaWcsIGRvIG5vdCBtZXJnZS5cclxuXHJcbiAgICAgICAgaWYgKG5hICsgbmIgLSAyID4gbnZwKSByZXR1cm4gWy0xLCBlYSwgZWJdOyAvLyBDaGVjayBpZiB0aGUgcG9seWdvbnMgc2hhcmUgYW4gZWRnZS5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYTsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgdmEwID0gcG9seXNbcGEgKyBpXTtcclxuICAgICAgICAgIHZhciB2YTEgPSBwb2x5c1twYSArIChpICsgMSkgJSBuYV07XHJcblxyXG4gICAgICAgICAgaWYgKHZhMCA+IHZhMSkge1xyXG4gICAgICAgICAgICB2YXIgdGVtcCA9IHZhMDtcclxuICAgICAgICAgICAgdmEwID0gdmExO1xyXG4gICAgICAgICAgICB2YTEgPSB0ZW1wO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbmI7ICsraikge1xyXG4gICAgICAgICAgICB2YXIgdmIwID0gcG9seXNbcGIgKyBqXTtcclxuICAgICAgICAgICAgdmFyIHZiMSA9IHBvbHlzW3BiICsgKGogKyAxKSAlIG5iXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YjAgPiB2YjEpIHtcclxuICAgICAgICAgICAgICB2YXIgX3RlbXAgPSB2YjA7XHJcbiAgICAgICAgICAgICAgdmIwID0gdmIxO1xyXG4gICAgICAgICAgICAgIHZiMSA9IF90ZW1wO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodmEwID09IHZiMCAmJiB2YTEgPT0gdmIxKSB7XHJcbiAgICAgICAgICAgICAgZWEgPSBpO1xyXG4gICAgICAgICAgICAgIGViID0gajtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gTm8gY29tbW9uIGVkZ2UsIGNhbm5vdCBtZXJnZS5cclxuXHJcblxyXG4gICAgICAgIGlmIChlYSA9PSAtMSB8fCBlYiA9PSAtMSkgcmV0dXJuIFstMSwgZWEsIGViXTsgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBtZXJnZWQgcG9seWdvbiB3b3VsZCBiZSBjb252ZXguXHJcblxyXG4gICAgICAgIHZhciB2YSwgdmIsIHZjO1xyXG4gICAgICAgIHZhID0gcG9seXNbcGEgKyAoZWEgKyBuYSAtIDEpICUgbmFdO1xyXG4gICAgICAgIHZiID0gcG9seXNbcGEgKyBlYV07XHJcbiAgICAgICAgdmMgPSBwb2x5c1twYiArIChlYiArIDIpICUgbmJdO1xyXG4gICAgICAgIGlmICghUmVjYXN0TWVzaC51bGVmdCh2ZXJ0cywgdmEgKiAzLCB2YiAqIDMsIHZjICogMykpIHJldHVybiBbLTEsIGVhLCBlYl07XHJcbiAgICAgICAgdmEgPSBwb2x5c1twYiArIChlYiArIG5iIC0gMSkgJSBuYl07XHJcbiAgICAgICAgdmIgPSBwb2x5c1twYiArIGViXTtcclxuICAgICAgICB2YyA9IHBvbHlzW3BhICsgKGVhICsgMikgJSBuYV07XHJcbiAgICAgICAgaWYgKCFSZWNhc3RNZXNoLnVsZWZ0KHZlcnRzLCB2YSAqIDMsIHZiICogMywgdmMgKiAzKSkgcmV0dXJuIFstMSwgZWEsIGViXTtcclxuICAgICAgICB2YSA9IHBvbHlzW3BhICsgZWFdO1xyXG4gICAgICAgIHZiID0gcG9seXNbcGEgKyAoZWEgKyAxKSAlIG5hXTtcclxuICAgICAgICB2YXIgZHggPSB2ZXJ0c1t2YSAqIDMgKyAwXSAtIHZlcnRzW3ZiICogMyArIDBdO1xyXG4gICAgICAgIHZhciBkeSA9IHZlcnRzW3ZhICogMyArIDJdIC0gdmVydHNbdmIgKiAzICsgMl07XHJcbiAgICAgICAgcmV0dXJuIFtkeCAqIGR4ICsgZHkgKiBkeSwgZWEsIGViXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWVyZ2VQb2x5VmVydHNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlUG9seVZlcnRzKHBvbHlzLCBwYSwgcGIsIGVhLCBlYiwgdG1wLCBudnApIHtcclxuICAgICAgICB2YXIgbmEgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKHBvbHlzLCBwYSwgbnZwKTtcclxuICAgICAgICB2YXIgbmIgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKHBvbHlzLCBwYiwgbnZwKTsgLy8gTWVyZ2UgcG9seWdvbnMuXHJcblxyXG4gICAgICAgIHBvbHlzLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgsIHRtcCwgdG1wICsgbnZwKTtcclxuICAgICAgICB2YXIgbiA9IDA7IC8vIEFkZCBwYVxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5hIC0gMTsgKytpKSB7XHJcbiAgICAgICAgICBwb2x5c1t0bXAgKyBuXSA9IHBvbHlzW3BhICsgKGVhICsgMSArIGkpICUgbmFdO1xyXG4gICAgICAgICAgbisrO1xyXG4gICAgICAgIH0gLy8gQWRkIHBiXHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTEyID0gMDsgX2kxMiA8IG5iIC0gMTsgKytfaTEyKSB7XHJcbiAgICAgICAgICBwb2x5c1t0bXAgKyBuXSA9IHBvbHlzW3BiICsgKGViICsgMSArIF9pMTIpICUgbmJdO1xyXG4gICAgICAgICAgbisrO1xyXG4gICAgICAgIH0gLy9hcnJheWNvcHkocG9seXMsIHRtcCwgcG9seXMsIHBhLCBudnApO1xyXG5cclxuXHJcbiAgICAgICAgYXJyYXljb3B5JDEocG9seXMsIHRtcCwgcG9seXMsIHBhLCBudnApOyAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG52cDsgaSsrKSB7XHJcbiAgICAgICAgLy8gXHRwb2x5c1twYSArIGldID0gcG9seXNbdG1wICsgaV07XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwdXNoRnJvbnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2hGcm9udCh2LCBhcnIsIGFuKSB7XHJcbiAgICAgICAgYW4rKztcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IGFuIC0gMTsgaSA+IDA7IC0taSkge1xyXG4gICAgICAgICAgYXJyW2ldID0gYXJyW2kgLSAxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFyclswXSA9IHY7XHJcbiAgICAgICAgcmV0dXJuIGFuO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwdXNoQmFja1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaEJhY2sodiwgYXJyLCBhbikge1xyXG4gICAgICAgIGFyclthbl0gPSB2O1xyXG4gICAgICAgIGFuKys7XHJcbiAgICAgICAgcmV0dXJuIGFuO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjYW5SZW1vdmVWZXJ0ZXhcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhblJlbW92ZVZlcnRleChjdHgsIG1lc2gsIHJlbSkge1xyXG4gICAgICAgIHZhciBudnAgPSBtZXNoLm52cDsgLy8gQ291bnQgbnVtYmVyIG9mIHBvbHlnb25zIHRvIHJlbW92ZS5cclxuXHJcbiAgICAgICAgdmFyIG51bVRvdWNoZWRWZXJ0cyA9IDA7XHJcbiAgICAgICAgdmFyIG51bVJlbWFpbmluZ0VkZ2VzID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNoLm5wb2x5czsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgcCA9IGkgKiBudnAgKiAyO1xyXG4gICAgICAgICAgdmFyIG52ID0gUmVjYXN0TWVzaC5jb3VudFBvbHlWZXJ0cyhtZXNoLnBvbHlzLCBwLCBudnApO1xyXG4gICAgICAgICAgdmFyIG51bVJlbW92ZWQgPSAwO1xyXG4gICAgICAgICAgdmFyIG51bVZlcnRzID0gMDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG52OyArK2opIHtcclxuICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbcCArIGpdID09IHJlbSkge1xyXG4gICAgICAgICAgICAgIG51bVRvdWNoZWRWZXJ0cysrO1xyXG4gICAgICAgICAgICAgIG51bVJlbW92ZWQrKztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbnVtVmVydHMrKztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAobnVtUmVtb3ZlZCAhPSAwKSB7XHJcbiAgICAgICAgICAgIG51bVJlbWFpbmluZ0VkZ2VzICs9IG51bVZlcnRzIC0gKG51bVJlbW92ZWQgKyAxKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFRoZXJlIHdvdWxkIGJlIHRvbyBmZXcgZWRnZXMgcmVtYWluaW5nIHRvIGNyZWF0ZSBhIHBvbHlnb24uXHJcbiAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGZvciBleGFtcGxlIHdoZW4gYSB0aXAgb2YgYSB0cmlhbmdsZSBpcyBtYXJrZWRcclxuICAgICAgICAvLyBhcyBkZVBvbHlpb24sIGJ1dCB0aGVyZSBhcmUgbm8gb3RoZXIgcG9seXMgdGhhdCBzaGFyZSB0aGUgdmVydGV4LlxyXG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSwgdGhlIHZlcnRleCBzaG91bGQgbm90IGJlIHJlbW92ZWQuXHJcblxyXG5cclxuICAgICAgICBpZiAobnVtUmVtYWluaW5nRWRnZXMgPD0gMikgcmV0dXJuIGZhbHNlOyAvLyBGaW5kIGVkZ2VzIHdoaWNoIHNoYXJlIHRoZSByZW1vdmVkIHZlcnRleC5cclxuXHJcbiAgICAgICAgdmFyIG1heEVkZ2VzID0gbnVtVG91Y2hlZFZlcnRzICogMjtcclxuICAgICAgICB2YXIgbmVkZ2VzID0gMDtcclxuICAgICAgICB2YXIgZWRnZXMgPSBuZXcgQXJyYXkobWF4RWRnZXMgKiAzKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxMyA9IDA7IF9pMTMgPCBtZXNoLm5wb2x5czsgKytfaTEzKSB7XHJcbiAgICAgICAgICB2YXIgX3AzID0gX2kxMyAqIG52cCAqIDI7XHJcblxyXG4gICAgICAgICAgdmFyIF9udiA9IFJlY2FzdE1lc2guY291bnRQb2x5VmVydHMobWVzaC5wb2x5cywgX3AzLCBudnApOyAvLyBDb2xsZWN0IGVkZ2VzIHdoaWNoIHRvdWNoZXMgdGhlIHJlbW92ZWQgdmVydGV4LlxyXG5cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfajIgPSAwLCBrID0gX252IC0gMTsgX2oyIDwgX252OyBrID0gX2oyKyspIHtcclxuICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbX3AzICsgX2oyXSA9PSByZW0gfHwgbWVzaC5wb2x5c1tfcDMgKyBrXSA9PSByZW0pIHtcclxuICAgICAgICAgICAgICAvLyBBcnJhbmdlIGVkZ2Ugc28gdGhhdCBhPXJlbS5cclxuICAgICAgICAgICAgICB2YXIgYSA9IG1lc2gucG9seXNbX3AzICsgX2oyXSxcclxuICAgICAgICAgICAgICAgICAgYiA9IG1lc2gucG9seXNbX3AzICsga107XHJcblxyXG4gICAgICAgICAgICAgIGlmIChiID09IHJlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBhO1xyXG4gICAgICAgICAgICAgICAgYSA9IGI7XHJcbiAgICAgICAgICAgICAgICBiID0gdGVtcDtcclxuICAgICAgICAgICAgICB9IC8vIENoZWNrIGlmIHRoZSBlZGdlIGV4aXN0c1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgdmFyIGV4aXN0cyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IG5lZGdlczsgKyttKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IG0gKiAzO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlZGdlc1tlICsgMV0gPT0gYikge1xyXG4gICAgICAgICAgICAgICAgICAvLyBFeGlzdHMsIGluY3JlbWVudCB2ZXJ0ZXggc2hhcmUgY291bnQuXHJcbiAgICAgICAgICAgICAgICAgIGVkZ2VzW2UgKyAyXSsrO1xyXG4gICAgICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gLy8gQWRkIG5ldyBlZGdlLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgaWYgKCFleGlzdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfZTIgPSBuZWRnZXMgKiAzO1xyXG5cclxuICAgICAgICAgICAgICAgIGVkZ2VzW19lMiArIDBdID0gYTtcclxuICAgICAgICAgICAgICAgIGVkZ2VzW19lMiArIDFdID0gYjtcclxuICAgICAgICAgICAgICAgIGVkZ2VzW19lMiArIDJdID0gMTtcclxuICAgICAgICAgICAgICAgIG5lZGdlcysrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gVGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdGhhbiAyIG9wZW4gZWRnZXMuXHJcbiAgICAgICAgLy8gVGhpcyBjYXRjaGVzIHRoZSBjYXNlIHRoYXQgdHdvIG5vbi1hZGphY2VudCBwb2x5Z29uc1xyXG4gICAgICAgIC8vIHNoYXJlIHRoZSByZW1vdmVkIHZlcnRleC4gSW4gdGhhdCBjYXNlLCBkbyBub3QgcmVtb3ZlIHRoZSB2ZXJ0ZXguXHJcblxyXG5cclxuICAgICAgICB2YXIgbnVtT3BlbkVkZ2VzID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxNCA9IDA7IF9pMTQgPCBuZWRnZXM7ICsrX2kxNCkge1xyXG4gICAgICAgICAgaWYgKGVkZ2VzW19pMTQgKiAzICsgMl0gPCAyKSBudW1PcGVuRWRnZXMrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChudW1PcGVuRWRnZXMgPiAyKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJlbW92ZVZlcnRleFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlVmVydGV4KGN0eCwgbWVzaCwgcmVtLCBtYXhUcmlzKSB7XHJcbiAgICAgICAgdmFyIG52cCA9IG1lc2gubnZwOyAvLyBDb3VudCBudW1iZXIgb2YgcG9seWdvbnMgdG8gcmVtb3ZlLlxyXG5cclxuICAgICAgICB2YXIgbnVtUmVtb3ZlZFZlcnRzID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNoLm5wb2x5czsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgcCA9IGkgKiBudnAgKiAyO1xyXG4gICAgICAgICAgdmFyIG52ID0gUmVjYXN0TWVzaC5jb3VudFBvbHlWZXJ0cyhtZXNoLnBvbHlzLCBwLCBudnApO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnY7ICsraikge1xyXG4gICAgICAgICAgICBpZiAobWVzaC5wb2x5c1twICsgal0gPT0gcmVtKSBudW1SZW1vdmVkVmVydHMrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuZWRnZXMgPSAwO1xyXG4gICAgICAgIHZhciBlZGdlcyA9IG5ldyBBcnJheShudW1SZW1vdmVkVmVydHMgKiBudnAgKiA0KTtcclxuICAgICAgICB2YXIgbmhvbGUgPSAwO1xyXG4gICAgICAgIHZhciBob2xlID0gbmV3IEFycmF5KG51bVJlbW92ZWRWZXJ0cyAqIG52cCk7XHJcbiAgICAgICAgdmFyIG5ocmVnID0gMDtcclxuICAgICAgICB2YXIgaHJlZyA9IG5ldyBBcnJheShudW1SZW1vdmVkVmVydHMgKiBudnApO1xyXG4gICAgICAgIHZhciBuaGFyZWEgPSAwO1xyXG4gICAgICAgIHZhciBoYXJlYSA9IG5ldyBBcnJheShudW1SZW1vdmVkVmVydHMgKiBudnApO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTE1ID0gMDsgX2kxNSA8IG1lc2gubnBvbHlzOyArK19pMTUpIHtcclxuICAgICAgICAgIHZhciBfcDQgPSBfaTE1ICogbnZwICogMjtcclxuXHJcbiAgICAgICAgICB2YXIgX252MiA9IFJlY2FzdE1lc2guY291bnRQb2x5VmVydHMobWVzaC5wb2x5cywgX3A0LCBudnApO1xyXG5cclxuICAgICAgICAgIHZhciBoYXNSZW0gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfajMgPSAwOyBfajMgPCBfbnYyOyArK19qMykge1xyXG4gICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcDQgKyBfajNdID09IHJlbSkgaGFzUmVtID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoaGFzUmVtKSB7XHJcbiAgICAgICAgICAgIC8vIENvbGxlY3QgZWRnZXMgd2hpY2ggZG9lcyBub3QgdG91Y2ggdGhlIHJlbW92ZWQgdmVydGV4LlxyXG4gICAgICAgICAgICBmb3IgKHZhciBfajQgPSAwLCBrID0gX252MiAtIDE7IF9qNCA8IF9udjI7IGsgPSBfajQrKykge1xyXG4gICAgICAgICAgICAgIGlmIChtZXNoLnBvbHlzW19wNCArIF9qNF0gIT0gcmVtICYmIG1lc2gucG9seXNbX3A0ICsga10gIT0gcmVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZSA9IG5lZGdlcyAqIDQ7XHJcbiAgICAgICAgICAgICAgICBlZGdlc1tlICsgMF0gPSBtZXNoLnBvbHlzW19wNCArIGtdO1xyXG4gICAgICAgICAgICAgICAgZWRnZXNbZSArIDFdID0gbWVzaC5wb2x5c1tfcDQgKyBfajRdO1xyXG4gICAgICAgICAgICAgICAgZWRnZXNbZSArIDJdID0gbWVzaC5yZWdzW19pMTVdO1xyXG4gICAgICAgICAgICAgICAgZWRnZXNbZSArIDNdID0gbWVzaC5hcmVhc1tfaTE1XTtcclxuICAgICAgICAgICAgICAgIG5lZGdlcysrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBSZW1vdmUgdGhlIHBvbHlnb24uXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHAyID0gKG1lc2gubnBvbHlzIC0gMSkgKiBudnAgKiAyO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9wNCAhPSBwMikge1xyXG4gICAgICAgICAgICAgIGFycmF5Y29weSQxKG1lc2gucG9seXMsIHAyLCBtZXNoLnBvbHlzLCBfcDQsIG52cCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1lc2gucG9seXMuZmlsbChSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCwgX3A0ICsgbnZwLCBfcDQgKyBudnAgKyBudnApO1xyXG4gICAgICAgICAgICBtZXNoLnJlZ3NbX2kxNV0gPSBtZXNoLnJlZ3NbbWVzaC5ucG9seXMgLSAxXTtcclxuICAgICAgICAgICAgbWVzaC5hcmVhc1tfaTE1XSA9IG1lc2guYXJlYXNbbWVzaC5ucG9seXMgLSAxXTtcclxuICAgICAgICAgICAgbWVzaC5ucG9seXMtLTtcclxuICAgICAgICAgICAgLS1faTE1O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gUmVtb3ZlIHZlcnRleC5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTYgPSByZW07IF9pMTYgPCBtZXNoLm52ZXJ0cyAtIDE7ICsrX2kxNikge1xyXG4gICAgICAgICAgbWVzaC52ZXJ0c1tfaTE2ICogMyArIDBdID0gbWVzaC52ZXJ0c1soX2kxNiArIDEpICogMyArIDBdO1xyXG4gICAgICAgICAgbWVzaC52ZXJ0c1tfaTE2ICogMyArIDFdID0gbWVzaC52ZXJ0c1soX2kxNiArIDEpICogMyArIDFdO1xyXG4gICAgICAgICAgbWVzaC52ZXJ0c1tfaTE2ICogMyArIDJdID0gbWVzaC52ZXJ0c1soX2kxNiArIDEpICogMyArIDJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVzaC5udmVydHMtLTsgLy8gQWRqdXN0IGluZGljZXMgdG8gbWF0Y2ggdGhlIHJlbW92ZWQgdmVydGV4IGxheW91dC5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxNyA9IDA7IF9pMTcgPCBtZXNoLm5wb2x5czsgKytfaTE3KSB7XHJcbiAgICAgICAgICB2YXIgX3A1ID0gX2kxNyAqIG52cCAqIDI7XHJcblxyXG4gICAgICAgICAgdmFyIF9udjMgPSBSZWNhc3RNZXNoLmNvdW50UG9seVZlcnRzKG1lc2gucG9seXMsIF9wNSwgbnZwKTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfajUgPSAwOyBfajUgPCBfbnYzOyArK19qNSkge1xyXG4gICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcDUgKyBfajVdID4gcmVtKSBtZXNoLnBvbHlzW19wNSArIF9qNV0tLTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTggPSAwOyBfaTE4IDwgbmVkZ2VzOyArK19pMTgpIHtcclxuICAgICAgICAgIGlmIChlZGdlc1tfaTE4ICogNCArIDBdID4gcmVtKSBlZGdlc1tfaTE4ICogNCArIDBdLS07XHJcbiAgICAgICAgICBpZiAoZWRnZXNbX2kxOCAqIDQgKyAxXSA+IHJlbSkgZWRnZXNbX2kxOCAqIDQgKyAxXS0tO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5lZGdlcyA9PSAwKSByZXR1cm47IC8vIFN0YXJ0IHdpdGggb25lIHZlcnRleCwga2VlcCBhcHBlbmRpbmcgY29ubmVjdGVkXHJcbiAgICAgICAgLy8gc2VnbWVudHMgdG8gdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIGhvbGUuXHJcblxyXG4gICAgICAgIFJlY2FzdE1lc2gucHVzaEJhY2soZWRnZXNbMF0sIGhvbGUsIG5ob2xlKTtcclxuICAgICAgICBSZWNhc3RNZXNoLnB1c2hCYWNrKGVkZ2VzWzJdLCBocmVnLCBuaHJlZyk7XHJcbiAgICAgICAgUmVjYXN0TWVzaC5wdXNoQmFjayhlZGdlc1szXSwgaGFyZWEsIG5oYXJlYSk7XHJcblxyXG4gICAgICAgIHdoaWxlIChuZWRnZXMgIT0gMCkge1xyXG4gICAgICAgICAgdmFyIG1hdGNoID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kxOSA9IDA7IF9pMTkgPCBuZWRnZXM7ICsrX2kxOSkge1xyXG4gICAgICAgICAgICB2YXIgZWEgPSBlZGdlc1tfaTE5ICogNCArIDBdO1xyXG4gICAgICAgICAgICB2YXIgZWIgPSBlZGdlc1tfaTE5ICogNCArIDFdO1xyXG4gICAgICAgICAgICB2YXIgciA9IGVkZ2VzW19pMTkgKiA0ICsgMl07XHJcbiAgICAgICAgICAgIHZhciBhID0gZWRnZXNbX2kxOSAqIDQgKyAzXTtcclxuICAgICAgICAgICAgdmFyIGFkZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGhvbGVbMF0gPT0gZWIpIHtcclxuICAgICAgICAgICAgICAvLyBUaGUgc2VnbWVudCBtYXRjaGVzIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGhvbGUgYm91bmRhcnkuXHJcbiAgICAgICAgICAgICAgUmVjYXN0TWVzaC5wdXNoRnJvbnQoZWEsIGhvbGUsIG5ob2xlKTtcclxuICAgICAgICAgICAgICBSZWNhc3RNZXNoLnB1c2hGcm9udChyLCBocmVnLCBuaHJlZyk7XHJcbiAgICAgICAgICAgICAgUmVjYXN0TWVzaC5wdXNoRnJvbnQoYSwgaGFyZWEsIG5oYXJlYSk7XHJcbiAgICAgICAgICAgICAgYWRkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChob2xlW25ob2xlIC0gMV0gPT0gZWEpIHtcclxuICAgICAgICAgICAgICAvLyBUaGUgc2VnbWVudCBtYXRjaGVzIHRoZSBlbmQgb2YgdGhlIGhvbGUgYm91bmRhcnkuXHJcbiAgICAgICAgICAgICAgbmhvbGUgPSBSZWNhc3RNZXNoLnB1c2hCYWNrKGViLCBob2xlLCBuaG9sZSk7XHJcbiAgICAgICAgICAgICAgbmhyZWcgPSBSZWNhc3RNZXNoLnB1c2hCYWNrKHIsIGhyZWcsIG5ocmVnKTtcclxuICAgICAgICAgICAgICBuaGFyZWEgPSBSZWNhc3RNZXNoLnB1c2hCYWNrKGEsIGhhcmVhLCBuaGFyZWEpO1xyXG4gICAgICAgICAgICAgIGFkZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChhZGQpIHtcclxuICAgICAgICAgICAgICAvLyBUaGUgZWRnZSBzZWdtZW50IHdhcyBhZGRlZCwgcmVtb3ZlIGl0LlxyXG4gICAgICAgICAgICAgIGVkZ2VzW19pMTkgKiA0ICsgMF0gPSBlZGdlc1sobmVkZ2VzIC0gMSkgKiA0ICsgMF07XHJcbiAgICAgICAgICAgICAgZWRnZXNbX2kxOSAqIDQgKyAxXSA9IGVkZ2VzWyhuZWRnZXMgLSAxKSAqIDQgKyAxXTtcclxuICAgICAgICAgICAgICBlZGdlc1tfaTE5ICogNCArIDJdID0gZWRnZXNbKG5lZGdlcyAtIDEpICogNCArIDJdO1xyXG4gICAgICAgICAgICAgIGVkZ2VzW19pMTkgKiA0ICsgM10gPSBlZGdlc1sobmVkZ2VzIC0gMSkgKiA0ICsgM107XHJcbiAgICAgICAgICAgICAgLS1uZWRnZXM7XHJcbiAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgIC0tX2kxOTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICghbWF0Y2gpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRyaXMgPSBuZXcgQXJyYXkobmhvbGUgKiAzKTtcclxuICAgICAgICB2YXIgdHZlcnRzID0gbmV3IEFycmF5KG5ob2xlICogNCk7XHJcbiAgICAgICAgdmFyIHRob2xlID0gbmV3IEFycmF5KG5ob2xlKTsgLy8gR2VuZXJhdGUgdGVtcCB2ZXJ0ZXggYXJyYXkgZm9yIHRyaWFuZ3VsYXRpb24uXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMjAgPSAwOyBfaTIwIDwgbmhvbGU7ICsrX2kyMCkge1xyXG4gICAgICAgICAgdmFyIHBpID0gaG9sZVtfaTIwXTtcclxuICAgICAgICAgIHR2ZXJ0c1tfaTIwICogNCArIDBdID0gbWVzaC52ZXJ0c1twaSAqIDMgKyAwXTtcclxuICAgICAgICAgIHR2ZXJ0c1tfaTIwICogNCArIDFdID0gbWVzaC52ZXJ0c1twaSAqIDMgKyAxXTtcclxuICAgICAgICAgIHR2ZXJ0c1tfaTIwICogNCArIDJdID0gbWVzaC52ZXJ0c1twaSAqIDMgKyAyXTtcclxuICAgICAgICAgIHR2ZXJ0c1tfaTIwICogNCArIDNdID0gMDtcclxuICAgICAgICAgIHRob2xlW19pMjBdID0gX2kyMDtcclxuICAgICAgICB9IC8vIFRyaWFuZ3VsYXRlIHRoZSBob2xlLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIG50cmlzID0gUmVjYXN0TWVzaC50cmlhbmd1bGF0ZShuaG9sZSwgdHZlcnRzLCB0aG9sZSwgdHJpcyk7XHJcblxyXG4gICAgICAgIGlmIChudHJpcyA8IDApIHtcclxuICAgICAgICAgIG50cmlzID0gLW50cmlzO1xyXG4gICAgICAgICAgY3R4Lndhcm4oXCJyZW1vdmVWZXJ0ZXg6IHRyaWFuZ3VsYXRlKCkgcmV0dXJuZWQgYmFkIHJlc3VsdHMuXCIpO1xyXG4gICAgICAgIH0gLy8gTWVyZ2UgdGhlIGhvbGUgdHJpYW5nbGVzIGJhY2sgdG8gcG9seWdvbnMuXHJcblxyXG5cclxuICAgICAgICB2YXIgcG9seXMgPSBuZXcgQXJyYXkoKG50cmlzICsgMSkgKiBudnApO1xyXG4gICAgICAgIHZhciBwcmVncyA9IG5ldyBBcnJheShudHJpcyk7XHJcbiAgICAgICAgdmFyIHBhcmVhcyA9IG5ldyBBcnJheShudHJpcyk7XHJcblxyXG4gICAgICAgIHZhciBucG9seXMgPSAwO1xyXG4gICAgICAgIHBvbHlzLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgsIDAsIG50cmlzICogbnZwKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2o2ID0gMDsgX2o2IDwgbnRyaXM7ICsrX2o2KSB7XHJcbiAgICAgICAgICB2YXIgdCA9IF9qNiAqIDM7XHJcblxyXG4gICAgICAgICAgaWYgKHRyaXNbdCArIDBdICE9IHRyaXNbdCArIDFdICYmIHRyaXNbdCArIDBdICE9IHRyaXNbdCArIDJdICYmIHRyaXNbdCArIDFdICE9IHRyaXNbdCArIDJdKSB7XHJcbiAgICAgICAgICAgIHBvbHlzW25wb2x5cyAqIG52cCArIDBdID0gaG9sZVt0cmlzW3QgKyAwXV07XHJcbiAgICAgICAgICAgIHBvbHlzW25wb2x5cyAqIG52cCArIDFdID0gaG9sZVt0cmlzW3QgKyAxXV07XHJcbiAgICAgICAgICAgIHBvbHlzW25wb2x5cyAqIG52cCArIDJdID0gaG9sZVt0cmlzW3QgKyAyXV07IC8vIElmIHRoaXMgcG9seWdvbiBjb3ZlcnMgbXVsdGlwbGUgcmVnaW9uIHR5cGVzIHRoZW5cclxuICAgICAgICAgICAgLy8gbWFyayBpdCBhcyBzdWNoXHJcblxyXG4gICAgICAgICAgICBpZiAoaHJlZ1t0cmlzW3QgKyAwXV0gIT0gaHJlZ1t0cmlzW3QgKyAxXV0gfHwgaHJlZ1t0cmlzW3QgKyAxXV0gIT0gaHJlZ1t0cmlzW3QgKyAyXV0pIHByZWdzW25wb2x5c10gPSBSZWNhc3RDb25zdGFudHMuUkNfTVVMVElQTEVfUkVHUztlbHNlIHByZWdzW25wb2x5c10gPSBocmVnW3RyaXNbdCArIDBdXTtcclxuICAgICAgICAgICAgcGFyZWFzW25wb2x5c10gPSBoYXJlYVt0cmlzW3QgKyAwXV07XHJcbiAgICAgICAgICAgIG5wb2x5cysrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5wb2x5cyA9PSAwKSByZXR1cm47IC8vIE1lcmdlIHBvbHlnb25zLlxyXG5cclxuICAgICAgICBpZiAobnZwID4gMykge1xyXG4gICAgICAgICAgZm9yICg7Oykge1xyXG4gICAgICAgICAgICAvLyBGaW5kIGJlc3QgcG9seWdvbnMgdG8gbWVyZ2UuXHJcbiAgICAgICAgICAgIHZhciBiZXN0TWVyZ2VWYWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgYmVzdFBhID0gMCxcclxuICAgICAgICAgICAgICAgIGJlc3RQYiA9IDAsXHJcbiAgICAgICAgICAgICAgICBiZXN0RWEgPSAwLFxyXG4gICAgICAgICAgICAgICAgYmVzdEViID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qNyA9IDA7IF9qNyA8IG5wb2x5cyAtIDE7ICsrX2o3KSB7XHJcbiAgICAgICAgICAgICAgdmFyIHBqID0gX2o3ICogbnZwO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBfayA9IF9qNyArIDE7IF9rIDwgbnBvbHlzOyArK19rKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGsgPSBfayAqIG52cDtcclxuICAgICAgICAgICAgICAgIHZhciB2ZWFlYiA9IFJlY2FzdE1lc2guZ2V0UG9seU1lcmdlVmFsdWUocG9seXMsIHBqLCBwaywgbWVzaC52ZXJ0cywgbnZwKTtcclxuICAgICAgICAgICAgICAgIHZhciB2ID0gdmVhZWJbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgX2VhID0gdmVhZWJbMV07XHJcbiAgICAgICAgICAgICAgICB2YXIgX2ViID0gdmVhZWJbMl07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHYgPiBiZXN0TWVyZ2VWYWwpIHtcclxuICAgICAgICAgICAgICAgICAgYmVzdE1lcmdlVmFsID0gdjtcclxuICAgICAgICAgICAgICAgICAgYmVzdFBhID0gX2o3O1xyXG4gICAgICAgICAgICAgICAgICBiZXN0UGIgPSBfaztcclxuICAgICAgICAgICAgICAgICAgYmVzdEVhID0gX2VhO1xyXG4gICAgICAgICAgICAgICAgICBiZXN0RWIgPSBfZWI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoYmVzdE1lcmdlVmFsID4gMCkge1xyXG4gICAgICAgICAgICAgIC8vIEZvdW5kIGJlc3QsIG1lcmdlLlxyXG4gICAgICAgICAgICAgIHZhciBwYSA9IGJlc3RQYSAqIG52cDtcclxuICAgICAgICAgICAgICB2YXIgcGIgPSBiZXN0UGIgKiBudnA7XHJcbiAgICAgICAgICAgICAgUmVjYXN0TWVzaC5tZXJnZVBvbHlWZXJ0cyhwb2x5cywgcGEsIHBiLCBiZXN0RWEsIGJlc3RFYiwgdG1wUG9seSwgbnZwKTtcclxuICAgICAgICAgICAgICBpZiAocHJlZ3NbYmVzdFBhXSAhPSBwcmVnc1tiZXN0UGJdKSBwcmVnc1tiZXN0UGFdID0gUmVjYXN0Q29uc3RhbnRzLlJDX01VTFRJUExFX1JFR1M7XHJcbiAgICAgICAgICAgICAgdmFyIGxhc3QgPSAobnBvbHlzIC0gMSkgKiBudnA7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChwYiAhPSBsYXN0KSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheWNvcHkkMShwb2x5cywgbGFzdCwgcG9seXMsIHBiLCBudnApO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgcHJlZ3NbYmVzdFBiXSA9IHByZWdzW25wb2x5cyAtIDFdO1xyXG4gICAgICAgICAgICAgIHBhcmVhc1tiZXN0UGJdID0gcGFyZWFzW25wb2x5cyAtIDFdO1xyXG4gICAgICAgICAgICAgIG5wb2x5cy0tO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIENvdWxkIG5vdCBtZXJnZSBhbnkgcG9seWdvbnMsIHN0b3AuXHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFN0b3JlIHBvbHlnb25zLlxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kyMSA9IDA7IF9pMjEgPCBucG9seXM7ICsrX2kyMSkge1xyXG4gICAgICAgICAgaWYgKG1lc2gubnBvbHlzID49IG1heFRyaXMpIGJyZWFrO1xyXG5cclxuICAgICAgICAgIHZhciBfcDYgPSBtZXNoLm5wb2x5cyAqIG52cCAqIDI7XHJcblxyXG4gICAgICAgICAgbWVzaC5wb2x5cy5maWxsKFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYLCBfcDYsIF9wNiArIG52cCAqIDIpO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9qOCA9IDA7IF9qOCA8IG52cDsgKytfajgpIHtcclxuICAgICAgICAgICAgbWVzaC5wb2x5c1tfcDYgKyBfajhdID0gcG9seXNbX2kyMSAqIG52cCArIF9qOF07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbWVzaC5yZWdzW21lc2gubnBvbHlzXSA9IHByZWdzW19pMjFdO1xyXG4gICAgICAgICAgbWVzaC5hcmVhc1ttZXNoLm5wb2x5c10gPSBwYXJlYXNbX2kyMV07XHJcbiAgICAgICAgICBtZXNoLm5wb2x5cysrO1xyXG5cclxuICAgICAgICAgIGlmIChtZXNoLm5wb2x5cyA+IG1heFRyaXMpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJyZW1vdmVWZXJ0ZXg6IFRvbyBtYW55IHBvbHlnb25zIFwiICsgbWVzaC5ucG9seXMgKyBcIiAobWF4OlwiICsgbWF4VHJpcyArIFwiLlwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0gLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAbm90ZSBJZiB0aGUgbWVzaCBkYXRhIGlzIHRvIGJlIHVzZWQgdG8gY29uc3RydWN0IGEgRGV0b3VyIG5hdmlnYXRpb24gbWVzaCwgdGhlbiB0aGUgdXBwZXJcclxuICAgICAgLy8vIGxpbWl0IG11c3QgYmUgcmV0cmljdGVkIHRvIDw9ICNEVF9WRVJUU19QRVJfUE9MWUdPTi5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjQWxsb2NQb2x5TWVzaCwgcmNDb250b3VyU2V0LCByY1BvbHlNZXNoLCByY0NvbmZpZ1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImJ1aWxkUG9seU1lc2hcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkUG9seU1lc2goY3R4LCBjc2V0LCBudnApIHtcclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIkJVSUxEX1BPTFlNRVNIXCIpO1xyXG4gICAgICAgIHZhciBtZXNoID0gbmV3IFBvbHlNZXNoKCk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkzKG1lc2guYm1pbiwgY3NldC5ibWluLCAwKTtcclxuICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTMobWVzaC5ibWF4LCBjc2V0LmJtYXgsIDApO1xyXG4gICAgICAgIG1lc2guY3MgPSBjc2V0LmNzO1xyXG4gICAgICAgIG1lc2guY2ggPSBjc2V0LmNoO1xyXG4gICAgICAgIG1lc2guYm9yZGVyU2l6ZSA9IGNzZXQuYm9yZGVyU2l6ZTtcclxuICAgICAgICBtZXNoLm1heEVkZ2VFcnJvciA9IGNzZXQubWF4RXJyb3I7XHJcbiAgICAgICAgdmFyIG1heFZlcnRpY2VzID0gMDtcclxuICAgICAgICB2YXIgbWF4VHJpcyA9IDA7XHJcbiAgICAgICAgdmFyIG1heFZlcnRzUGVyQ29udCA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3NldC5jb250cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgLy8gU2tpcCBudWxsIGNvbnRvdXJzLlxyXG4gICAgICAgICAgaWYgKGNzZXQuY29udHNbaV0ubnZlcnRzIDwgMykgY29udGludWU7XHJcbiAgICAgICAgICBtYXhWZXJ0aWNlcyArPSBjc2V0LmNvbnRzW2ldLm52ZXJ0cztcclxuICAgICAgICAgIG1heFRyaXMgKz0gY3NldC5jb250c1tpXS5udmVydHMgLSAyO1xyXG4gICAgICAgICAgbWF4VmVydHNQZXJDb250ID0gTWF0aC5tYXgobWF4VmVydHNQZXJDb250LCBjc2V0LmNvbnRzW2ldLm52ZXJ0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWF4VmVydGljZXMgPj0gMHhmZmZlKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihcInJjQnVpbGRQb2x5TWVzaDogVG9vIG1hbnkgdmVydGljZXMgXCIgKyBtYXhWZXJ0aWNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdmZsYWdzID0gbmV3IEFycmF5KG1heFZlcnRpY2VzKS5maWxsKDApO1xyXG4gICAgICAgIHZmbGFncy5maWxsKDApO1xyXG4gICAgICAgIG1lc2gudmVydHMgPSBuZXcgQXJyYXkobWF4VmVydGljZXMgKiAzKS5maWxsKDApO1xyXG4gICAgICAgIG1lc2gucG9seXMgPSBuZXcgQXJyYXkobWF4VHJpcyAqIG52cCAqIDIpLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpOyAvLyBBcnJheXMuZmlsbChtZXNoLnBvbHlzLCBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCk7XHJcblxyXG4gICAgICAgIG1lc2gucmVncyA9IG5ldyBBcnJheShtYXhUcmlzKS5maWxsKDApO1xyXG4gICAgICAgIG1lc2guYXJlYXMgPSBuZXcgQXJyYXkobWF4VHJpcykuZmlsbCgwKTtcclxuICAgICAgICBtZXNoLm52ZXJ0cyA9IDA7XHJcbiAgICAgICAgbWVzaC5ucG9seXMgPSAwO1xyXG4gICAgICAgIG1lc2gubnZwID0gbnZwO1xyXG4gICAgICAgIG1lc2gubWF4cG9seXMgPSBtYXhUcmlzO1xyXG4gICAgICAgIHZhciBuZXh0VmVydCA9IG5ldyBBcnJheShtYXhWZXJ0aWNlcyk7XHJcbiAgICAgICAgdmFyIGZpcnN0VmVydCA9IG5ldyBBcnJheShSZWNhc3RNZXNoLlZFUlRFWF9CVUNLRVRfQ09VTlQpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTIyID0gMDsgX2kyMiA8IFJlY2FzdE1lc2guVkVSVEVYX0JVQ0tFVF9DT1VOVDsgKytfaTIyKSB7XHJcbiAgICAgICAgICBmaXJzdFZlcnRbX2kyMl0gPSAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBpbmRpY2VzID0gbmV3IEFycmF5KG1heFZlcnRzUGVyQ29udCk7XHJcbiAgICAgICAgdmFyIHRyaXMgPSBuZXcgQXJyYXkobWF4VmVydHNQZXJDb250ICogMyk7XHJcbiAgICAgICAgdmFyIHBvbHlzID0gbmV3IEFycmF5KChtYXhWZXJ0c1BlckNvbnQgKyAxKSAqIG52cCk7XHJcbiAgICAgICAgdmFyIHRtcFBvbHkgPSBtYXhWZXJ0c1BlckNvbnQgKiBudnA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMjMgPSAwOyBfaTIzIDwgY3NldC5jb250cy5sZW5ndGg7ICsrX2kyMykge1xyXG4gICAgICAgICAgdmFyIGNvbnQgPSBjc2V0LmNvbnRzW19pMjNdOyAvLyBTa2lwIG51bGwgY29udG91cnMuXHJcblxyXG4gICAgICAgICAgaWYgKGNvbnQubnZlcnRzIDwgMykgY29udGludWU7IC8vIFRyaWFuZ3VsYXRlIGNvbnRvdXJcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNvbnQubnZlcnRzOyArK2opIHtcclxuICAgICAgICAgICAgaW5kaWNlc1tqXSA9IGo7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIG50cmlzID0gUmVjYXN0TWVzaC50cmlhbmd1bGF0ZShjb250Lm52ZXJ0cywgY29udC52ZXJ0cywgaW5kaWNlcywgdHJpcyk7XHJcblxyXG4gICAgICAgICAgaWYgKG50cmlzIDw9IDApIHtcclxuICAgICAgICAgICAgLy8gQmFkIHRyaWFuZ3VsYXRpb24sIHNob3VsZCBub3QgaGFwcGVuLlxyXG4gICAgICAgICAgICBjdHgud2FybihcImJ1aWxkUG9seU1lc2g6IEJhZCB0cmlhbmd1bGF0aW9uIENvbnRvdXIgXCIgKyBfaTIzICsgXCIuXCIpO1xyXG4gICAgICAgICAgICBudHJpcyA9IC1udHJpcztcclxuICAgICAgICAgIH0gLy8gQWRkIGFuZCBtZXJnZSB2ZXJ0aWNlcy5cclxuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2o5ID0gMDsgX2o5IDwgY29udC5udmVydHM7ICsrX2o5KSB7XHJcbiAgICAgICAgICAgIHZhciB2ID0gX2o5ICogNDtcclxuICAgICAgICAgICAgdmFyIGludiA9IFJlY2FzdE1lc2guYWRkVmVydGV4KGNvbnQudmVydHNbdiArIDBdLCBjb250LnZlcnRzW3YgKyAxXSwgY29udC52ZXJ0c1t2ICsgMl0sIG1lc2gudmVydHMsIGZpcnN0VmVydCwgbmV4dFZlcnQsIG1lc2gubnZlcnRzKTtcclxuICAgICAgICAgICAgaW5kaWNlc1tfajldID0gaW52WzBdO1xyXG4gICAgICAgICAgICBtZXNoLm52ZXJ0cyA9IGludlsxXTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoY29udC52ZXJ0c1t2ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1ZFUlRFWCkgIT0gMCkge1xyXG4gICAgICAgICAgICAgIC8vIFRoaXMgdmVydGV4IHNob3VsZCBiZSByZW1vdmVkLlxyXG4gICAgICAgICAgICAgIHZmbGFnc1tpbmRpY2VzW19qOV1dID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBCdWlsZCBpbml0aWFsIHBvbHlnb25zLlxyXG5cclxuXHJcbiAgICAgICAgICB2YXIgbnBvbHlzID0gMDsgLy8gQXJyYXlzLmZpbGwocG9seXMsIFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYKTtcclxuXHJcbiAgICAgICAgICBwb2x5cy5maWxsKFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYKTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfajEwID0gMDsgX2oxMCA8IG50cmlzOyArK19qMTApIHtcclxuICAgICAgICAgICAgdmFyIHQgPSBfajEwICogMztcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmlzW3QgKyAwXSAhPSB0cmlzW3QgKyAxXSAmJiB0cmlzW3QgKyAwXSAhPSB0cmlzW3QgKyAyXSAmJiB0cmlzW3QgKyAxXSAhPSB0cmlzW3QgKyAyXSkge1xyXG4gICAgICAgICAgICAgIHBvbHlzW25wb2x5cyAqIG52cCArIDBdID0gaW5kaWNlc1t0cmlzW3QgKyAwXV07XHJcbiAgICAgICAgICAgICAgcG9seXNbbnBvbHlzICogbnZwICsgMV0gPSBpbmRpY2VzW3RyaXNbdCArIDFdXTtcclxuICAgICAgICAgICAgICBwb2x5c1tucG9seXMgKiBudnAgKyAyXSA9IGluZGljZXNbdHJpc1t0ICsgMl1dO1xyXG4gICAgICAgICAgICAgIG5wb2x5cysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKG5wb2x5cyA9PSAwKSBjb250aW51ZTsgLy8gTWVyZ2UgcG9seWdvbnMuXHJcblxyXG4gICAgICAgICAgaWYgKG52cCA+IDMpIHtcclxuICAgICAgICAgICAgZm9yICg7Oykge1xyXG4gICAgICAgICAgICAgIC8vIEZpbmQgYmVzdCBwb2x5Z29ucyB0byBtZXJnZS5cclxuICAgICAgICAgICAgICB2YXIgYmVzdE1lcmdlVmFsID0gMDtcclxuICAgICAgICAgICAgICB2YXIgYmVzdFBhID0gMCxcclxuICAgICAgICAgICAgICAgICAgYmVzdFBiID0gMCxcclxuICAgICAgICAgICAgICAgICAgYmVzdEVhID0gMCxcclxuICAgICAgICAgICAgICAgICAgYmVzdEViID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2oxMSA9IDA7IF9qMTEgPCBucG9seXMgLSAxOyArK19qMTEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwaiA9IF9qMTEgKiBudnA7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IF9qMTEgKyAxOyBrIDwgbnBvbHlzOyArK2spIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIHBrID0gayAqIG52cDtcclxuICAgICAgICAgICAgICAgICAgdmFyIHZlYWViID0gUmVjYXN0TWVzaC5nZXRQb2x5TWVyZ2VWYWx1ZShwb2x5cywgcGosIHBrLCBtZXNoLnZlcnRzLCBudnApO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgX3Y0ID0gdmVhZWJbMF07XHJcbiAgICAgICAgICAgICAgICAgIHZhciBlYSA9IHZlYWViWzFdO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgZWIgPSB2ZWFlYlsyXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChfdjQgPiBiZXN0TWVyZ2VWYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0TWVyZ2VWYWwgPSBfdjQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdFBhID0gX2oxMTtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0UGIgPSBrO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RFYSA9IGVhO1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RFYiA9IGViO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoYmVzdE1lcmdlVmFsID4gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gRm91bmQgYmVzdCwgbWVyZ2UuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGEgPSBiZXN0UGEgKiBudnA7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGIgPSBiZXN0UGIgKiBudnA7XHJcbiAgICAgICAgICAgICAgICBSZWNhc3RNZXNoLm1lcmdlUG9seVZlcnRzKHBvbHlzLCBwYSwgcGIsIGJlc3RFYSwgYmVzdEViLCB0bXBQb2x5LCBudnApO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhc3RQb2x5ID0gKG5wb2x5cyAtIDEpICogbnZwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYiAhPSBsYXN0UG9seSkge1xyXG4gICAgICAgICAgICAgICAgICAvLyBhcnJheWNvcHkocG9seXMsIGxhc3RQb2x5LCBwb2x5cywgcGIsIG52cCk7XHJcbiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pMjQgPSAwOyBfaTI0IDwgbnZwOyBfaTI0KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBwb2x5c1twYiArIF9pMjRdID0gcG9seXNbbGFzdFBvbHkgKyBfaTI0XTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9seXNbMjhdID09IDgwKSBjb25zb2xlLmxvZyhcImJyZWFrXCIpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbnBvbHlzLS07XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIENvdWxkIG5vdCBtZXJnZSBhbnkgcG9seWdvbnMsIHN0b3AuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy9IZXJlIHRoZXkgYXJlIHRoZSBzYW1lXHJcbiAgICAgICAgICAvLyBTdG9yZSBwb2x5Z29ucy5cclxuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2oxMiA9IDA7IF9qMTIgPCBucG9seXM7ICsrX2oxMikge1xyXG4gICAgICAgICAgICB2YXIgcCA9IG1lc2gubnBvbHlzICogbnZwICogMjtcclxuICAgICAgICAgICAgdmFyIHEgPSBfajEyICogbnZwO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2syID0gMDsgX2syIDwgbnZwOyArK19rMikge1xyXG4gICAgICAgICAgICAgIG1lc2gucG9seXNbcCArIF9rMl0gPSBwb2x5c1txICsgX2syXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWVzaC5yZWdzW21lc2gubnBvbHlzXSA9IGNvbnQucmVnO1xyXG4gICAgICAgICAgICBtZXNoLmFyZWFzW21lc2gubnBvbHlzXSA9IGNvbnQuYXJlYTtcclxuICAgICAgICAgICAgbWVzaC5ucG9seXMrKztcclxuXHJcbiAgICAgICAgICAgIGlmIChtZXNoLm5wb2x5cyA+IG1heFRyaXMpIHtcclxuICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbihcInJjQnVpbGRQb2x5TWVzaDogVG9vIG1hbnkgcG9seWdvbnMgXCIgKyBtZXNoLm5wb2x5cyArIFwiIChtYXg6XCIgKyBtYXhUcmlzICsgXCIpLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gZnMud3JpdGVGaWxlU3luYyhcIi4vcG1lc2hqcy50eHRcIiwgSlNPTi5zdHJpbmdpZnkobWVzaC5wb2x5cykpXHJcbiAgICAgICAgLy9Ob3cgd2UgYXJlIHRoZSBzYW1lIGhlcmVcclxuICAgICAgICAvLyBSZW1vdmUgZWRnZSB2ZXJ0aWNlcy5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMjUgPSAwOyBfaTI1IDwgbWVzaC5udmVydHM7ICsrX2kyNSkge1xyXG4gICAgICAgICAgaWYgKHZmbGFnc1tfaTI1XSAhPSAwKSB7XHJcbiAgICAgICAgICAgIGlmICghUmVjYXN0TWVzaC5jYW5SZW1vdmVWZXJ0ZXgoY3R4LCBtZXNoLCBfaTI1KSkgY29udGludWU7XHJcbiAgICAgICAgICAgIFJlY2FzdE1lc2gucmVtb3ZlVmVydGV4KGN0eCwgbWVzaCwgX2kyNSwgbWF4VHJpcyk7IC8vIFJlbW92ZSB2ZXJ0ZXhcclxuICAgICAgICAgICAgLy8gTm90ZTogbWVzaC5udmVydHMgaXMgYWxyZWFkeSBkZWNyZW1lbnRlZCBpbnNpZGUgcmVtb3ZlVmVydGV4KCkhXHJcbiAgICAgICAgICAgIC8vIEZpeHVwIHZlcnRleCBmbGFnc1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2oxMyA9IF9pMjU7IF9qMTMgPCBtZXNoLm52ZXJ0czsgKytfajEzKSB7XHJcbiAgICAgICAgICAgICAgdmZsYWdzW19qMTNdID0gdmZsYWdzW19qMTMgKyAxXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLS1faTI1O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gQ2FsY3VsYXRlIGFkamFjZW5jeS5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuYnVpbGRNZXNoQWRqYWNlbmN5KG1lc2gucG9seXMsIG1lc2gubnBvbHlzLCBtZXNoLm52ZXJ0cywgbnZwKTsgLy8gRmluZCBwb3J0YWwgZWRnZXNcclxuXHJcbiAgICAgICAgaWYgKG1lc2guYm9yZGVyU2l6ZSA+IDApIHtcclxuICAgICAgICAgIHZhciB3ID0gY3NldC53aWR0aDtcclxuICAgICAgICAgIHZhciBoID0gY3NldC5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kyNiA9IDA7IF9pMjYgPCBtZXNoLm5wb2x5czsgKytfaTI2KSB7XHJcbiAgICAgICAgICAgIHZhciBfcDcgPSBfaTI2ICogMiAqIG52cDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qMTQgPSAwOyBfajE0IDwgbnZwOyArK19qMTQpIHtcclxuICAgICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcDcgKyBfajE0XSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgYnJlYWs7IC8vIFNraXAgY29ubmVjdGVkIGVkZ2VzLlxyXG5cclxuICAgICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcDcgKyBudnAgKyBfajE0XSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgdmFyIG5qID0gX2oxNCArIDE7XHJcbiAgICAgICAgICAgICAgaWYgKG5qID49IG52cCB8fCBtZXNoLnBvbHlzW19wNyArIG5qXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgbmogPSAwO1xyXG4gICAgICAgICAgICAgIHZhciB2YSA9IG1lc2gucG9seXNbX3A3ICsgX2oxNF0gKiAzO1xyXG4gICAgICAgICAgICAgIHZhciB2YiA9IG1lc2gucG9seXNbX3A3ICsgbmpdICogMztcclxuICAgICAgICAgICAgICBpZiAobWVzaC52ZXJ0c1t2YSArIDBdID09IDAgJiYgbWVzaC52ZXJ0c1t2YiArIDBdID09IDApIG1lc2gucG9seXNbX3A3ICsgbnZwICsgX2oxNF0gPSAweDgwMDAgfCAwO2Vsc2UgaWYgKG1lc2gudmVydHNbdmEgKyAyXSA9PSBoICYmIG1lc2gudmVydHNbdmIgKyAyXSA9PSBoKSBtZXNoLnBvbHlzW19wNyArIG52cCArIF9qMTRdID0gMHg4MDAwIHwgMTtlbHNlIGlmIChtZXNoLnZlcnRzW3ZhICsgMF0gPT0gdyAmJiBtZXNoLnZlcnRzW3ZiICsgMF0gPT0gdykgbWVzaC5wb2x5c1tfcDcgKyBudnAgKyBfajE0XSA9IDB4ODAwMCB8IDI7ZWxzZSBpZiAobWVzaC52ZXJ0c1t2YSArIDJdID09IDAgJiYgbWVzaC52ZXJ0c1t2YiArIDJdID09IDApIG1lc2gucG9seXNbX3A3ICsgbnZwICsgX2oxNF0gPSAweDgwMDAgfCAzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBKdXN0IGFsbG9jYXRlIHRoZSBtZXNoIGZsYWdzIGFycmF5LiBUaGUgdXNlciBpcyByZXNwb3NpYmxlIHRvIGZpbGwgaXQuXHJcblxyXG5cclxuICAgICAgICBtZXNoLmZsYWdzID0gbmV3IEFycmF5KG1lc2gubnBvbHlzKTtcclxuICAgICAgICBtZXNoLmZsYWdzLmZpbGwoMCk7XHJcblxyXG4gICAgICAgIGlmIChtZXNoLm52ZXJ0cyA+IDB4ZmZmZikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJyY0J1aWxkUG9seU1lc2g6IFRoZSByZXN1bHRpbmcgbWVzaCBoYXMgdG9vIG1hbnkgdmVydGljZXMgXCIgKyBtZXNoLm52ZXJ0cyArIFwiIChtYXggXCIgKyAweGZmZmYgKyBcIikuIERhdGEgY2FuIGJlIGNvcnJ1cHRlZC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWVzaC5ucG9seXMgPiAweGZmZmYpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwicmNCdWlsZFBvbHlNZXNoOiBUaGUgcmVzdWx0aW5nIG1lc2ggaGFzIHRvbyBtYW55IHBvbHlnb25zIFwiICsgbWVzaC5ucG9seXMgKyBcIiAobWF4IFwiICsgMHhmZmZmICsgXCIpLiBEYXRhIGNhbiBiZSBjb3JydXB0ZWQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX1BPTFlNRVNIXCIpO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgICB9IC8vLyBAc2VlIHJjQWxsb2NQb2x5TWVzaCwgcmNQb2x5TWVzaFxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1lcmdlUG9seU1lc2hlc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VQb2x5TWVzaGVzKGN0eCwgbWVzaGVzLCBubWVzaGVzKSB7XHJcbiAgICAgICAgaWYgKG5tZXNoZXMgPT0gMCB8fCBtZXNoZXMgPT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJNRVJHRV9QT0xZTUVTSFwiKTtcclxuICAgICAgICB2YXIgbWVzaCA9IG5ldyBQb2x5TWVzaCgpO1xyXG4gICAgICAgIG1lc2gubnZwID0gbWVzaGVzWzBdLm52cDtcclxuICAgICAgICBtZXNoLmNzID0gbWVzaGVzWzBdLmNzO1xyXG4gICAgICAgIG1lc2guY2ggPSBtZXNoZXNbMF0uY2g7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkobWVzaC5ibWluLCBtZXNoZXNbMF0uYm1pbiwgMCk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkobWVzaC5ibWF4LCBtZXNoZXNbMF0uYm1heCwgMCk7XHJcbiAgICAgICAgdmFyIG1heFZlcnRzID0gMDtcclxuICAgICAgICB2YXIgbWF4UG9seXMgPSAwO1xyXG4gICAgICAgIHZhciBtYXhWZXJ0c1Blck1lc2ggPSAwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5tZXNoZXM7ICsraSkge1xyXG4gICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1pbihtZXNoLmJtaW4sIG1lc2hlc1tpXS5ibWluLCAwKTtcclxuICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5tYXgobWVzaC5ibWF4LCBtZXNoZXNbaV0uYm1heCwgMCk7XHJcbiAgICAgICAgICBtYXhWZXJ0c1Blck1lc2ggPSBNYXRoLm1heChtYXhWZXJ0c1Blck1lc2gsIG1lc2hlc1tpXS5udmVydHMpO1xyXG4gICAgICAgICAgbWF4VmVydHMgKz0gbWVzaGVzW2ldLm52ZXJ0cztcclxuICAgICAgICAgIG1heFBvbHlzICs9IG1lc2hlc1tpXS5ucG9seXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZXNoLm52ZXJ0cyA9IDA7XHJcbiAgICAgICAgbWVzaC52ZXJ0cyA9IG5ldyBBcnJheShtYXhWZXJ0cyAqIDMpO1xyXG4gICAgICAgIG1lc2gubnBvbHlzID0gMDtcclxuICAgICAgICBtZXNoLnBvbHlzID0gbmV3IEFycmF5KG1heFBvbHlzICogMiAqIG1lc2gubnZwKTtcclxuICAgICAgICBtZXNoLnBvbHlzLmZpbGwoUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgsIDAsIG1lc2gucG9seXMubGVuZ3RoKTtcclxuICAgICAgICBtZXNoLnJlZ3MgPSBuZXcgQXJyYXkobWF4UG9seXMpO1xyXG4gICAgICAgIG1lc2guYXJlYXMgPSBuZXcgQXJyYXkobWF4UG9seXMpO1xyXG4gICAgICAgIG1lc2guZmxhZ3MgPSBuZXcgQXJyYXkobWF4UG9seXMpO1xyXG4gICAgICAgIHZhciBuZXh0VmVydCA9IG5ldyBBcnJheShtYXhWZXJ0cyk7XHJcbiAgICAgICAgdmFyIGZpcnN0VmVydCA9IG5ldyBBcnJheShSZWNhc3RNZXNoLlZFUlRFWF9CVUNLRVRfQ09VTlQpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTI3ID0gMDsgX2kyNyA8IFJlY2FzdE1lc2guVkVSVEVYX0JVQ0tFVF9DT1VOVDsgKytfaTI3KSB7XHJcbiAgICAgICAgICBmaXJzdFZlcnRbX2kyN10gPSAtMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB2cmVtYXAgPSBuZXcgQXJyYXkobWF4VmVydHNQZXJNZXNoKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kyOCA9IDA7IF9pMjggPCBubWVzaGVzOyArK19pMjgpIHtcclxuICAgICAgICAgIHZhciBwbWVzaCA9IG1lc2hlc1tfaTI4XTtcclxuICAgICAgICAgIHZhciBveCA9IE1hdGguZmxvb3IoKHBtZXNoLmJtaW5bMF0gLSBtZXNoLmJtaW5bMF0pIC8gbWVzaC5jcyArIDAuNSk7XHJcbiAgICAgICAgICB2YXIgb3ogPSBNYXRoLmZsb29yKChwbWVzaC5ibWluWzJdIC0gbWVzaC5ibWluWzJdKSAvIG1lc2guY3MgKyAwLjUpO1xyXG4gICAgICAgICAgdmFyIGlzTWluWCA9IG94ID09IDA7XHJcbiAgICAgICAgICB2YXIgaXNNaW5aID0gb3ogPT0gMDtcclxuICAgICAgICAgIHZhciBpc01heFggPSBNYXRoLmZsb29yKChtZXNoLmJtYXhbMF0gLSBwbWVzaC5ibWF4WzBdKSAvIG1lc2guY3MgKyAwLjUpID09IDA7XHJcbiAgICAgICAgICB2YXIgaXNNYXhaID0gTWF0aC5mbG9vcigobWVzaC5ibWF4WzJdIC0gcG1lc2guYm1heFsyXSkgLyBtZXNoLmNzICsgMC41KSA9PSAwO1xyXG4gICAgICAgICAgdmFyIGlzT25Cb3JkZXIgPSBpc01pblggfHwgaXNNaW5aIHx8IGlzTWF4WCB8fCBpc01heFo7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwbWVzaC5udmVydHM7ICsraikge1xyXG4gICAgICAgICAgICB2YXIgdiA9IGogKiAzO1xyXG4gICAgICAgICAgICB2YXIgaW52ID0gYWRkVmVydGV4KHBtZXNoLnZlcnRzW3YgKyAwXSArIG94LCBwbWVzaC52ZXJ0c1t2ICsgMV0sIHBtZXNoLnZlcnRzW3YgKyAyXSArIG96LCBtZXNoLnZlcnRzLCBmaXJzdFZlcnQsIG5leHRWZXJ0LCBtZXNoLm52ZXJ0cyk7XHJcbiAgICAgICAgICAgIHZyZW1hcFtqXSA9IGludlswXTtcclxuICAgICAgICAgICAgbWVzaC5udmVydHMgPSBpbnZbMV07XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2oxNSA9IDA7IF9qMTUgPCBwbWVzaC5ucG9seXM7ICsrX2oxNSkge1xyXG4gICAgICAgICAgICB2YXIgdGd0ID0gbWVzaC5ucG9seXMgKiAyICogbWVzaC5udnA7XHJcbiAgICAgICAgICAgIHZhciBzcmMgPSBfajE1ICogMiAqIG1lc2gubnZwO1xyXG4gICAgICAgICAgICBtZXNoLnJlZ3NbbWVzaC5ucG9seXNdID0gcG1lc2gucmVnc1tfajE1XTtcclxuICAgICAgICAgICAgbWVzaC5hcmVhc1ttZXNoLm5wb2x5c10gPSBwbWVzaC5hcmVhc1tfajE1XTtcclxuICAgICAgICAgICAgbWVzaC5mbGFnc1ttZXNoLm5wb2x5c10gPSBwbWVzaC5mbGFnc1tfajE1XTtcclxuICAgICAgICAgICAgbWVzaC5ucG9seXMrKztcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbWVzaC5udnA7ICsraykge1xyXG4gICAgICAgICAgICAgIGlmIChwbWVzaC5wb2x5c1tzcmMgKyBrXSA9PSBSZWNhc3RDb25zdGFudHMuUkNfTUVTSF9OVUxMX0lEWCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgbWVzaC5wb2x5c1t0Z3QgKyBrXSA9IHZyZW1hcFtwbWVzaC5wb2x5c1tzcmMgKyBrXV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpc09uQm9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2szID0gbWVzaC5udnA7IF9rMyA8IG1lc2gubnZwICogMjsgKytfazMpIHtcclxuICAgICAgICAgICAgICAgIGlmICgocG1lc2gucG9seXNbc3JjICsgX2szXSAmIDB4ODAwMCkgIT0gMCAmJiBwbWVzaC5wb2x5c1tzcmMgKyBfazNdICE9IDB4ZmZmZikge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgZGlyID0gcG1lc2gucG9seXNbc3JjICsgX2szXSAmIDB4ZjtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gUG9ydGFsIHgtXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNaW5YKSBtZXNoLnBvbHlzW3RndCArIF9rM10gPSBwbWVzaC5wb2x5c1tzcmMgKyBfazNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIFBvcnRhbCB6K1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWF4WikgbWVzaC5wb2x5c1t0Z3QgKyBfazNdID0gcG1lc2gucG9seXNbc3JjICsgX2szXTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBQb3J0YWwgeCtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01heFgpIG1lc2gucG9seXNbdGd0ICsgX2szXSA9IHBtZXNoLnBvbHlzW3NyYyArIF9rM107XHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gUG9ydGFsIHotXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNaW5aKSBtZXNoLnBvbHlzW3RndCArIF9rM10gPSBwbWVzaC5wb2x5c1tzcmMgKyBfazNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIENhbGN1bGF0ZSBhZGphY2VuY3kuXHJcblxyXG5cclxuICAgICAgICBidWlsZE1lc2hBZGphY2VuY3kobWVzaC5wb2x5cywgbWVzaC5ucG9seXMsIG1lc2gubnZlcnRzLCBtZXNoLm52cCk7XHJcblxyXG4gICAgICAgIGlmIChtZXNoLm52ZXJ0cyA+IDB4ZmZmZikge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJyY0J1aWxkUG9seU1lc2g6IFRoZSByZXN1bHRpbmcgbWVzaCBoYXMgdG9vIG1hbnkgdmVydGljZXMgXCIgKyBtZXNoLm52ZXJ0cyArIFwiIChtYXggXCIgKyAweGZmZmYgKyBcIikuIERhdGEgY2FuIGJlIGNvcnJ1cHRlZC5cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobWVzaC5ucG9seXMgPiAweGZmZmYpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwicmNCdWlsZFBvbHlNZXNoOiBUaGUgcmVzdWx0aW5nIG1lc2ggaGFzIHRvbyBtYW55IHBvbHlnb25zIFwiICsgbWVzaC5ucG9seXMgKyBcIiAobWF4IFwiICsgMHhmZmZmICsgXCIpLiBEYXRhIGNhbiBiZSBjb3JydXB0ZWQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIk1FUkdFX1BPTFlNRVNIXCIpO1xyXG4gICAgICAgIHJldHVybiBtZXNoO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjb3B5UG9seU1lc2hcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvcHlQb2x5TWVzaChjdHgsIHNyYykge1xyXG4gICAgICAgIHZhciBkc3QgPSBuZXcgUG9seU1lc2goKTtcclxuICAgICAgICBkc3QubnZlcnRzID0gc3JjLm52ZXJ0cztcclxuICAgICAgICBkc3QubnBvbHlzID0gc3JjLm5wb2x5cztcclxuICAgICAgICBkc3QubWF4cG9seXMgPSBzcmMubnBvbHlzO1xyXG4gICAgICAgIGRzdC5udnAgPSBzcmMubnZwO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KGRzdC5ibWluLCBzcmMuYm1pbiwgMCk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkoZHN0LmJtYXgsIHNyYy5ibWF4LCAwKTtcclxuICAgICAgICBkc3QuY3MgPSBzcmMuY3M7XHJcbiAgICAgICAgZHN0LmNoID0gc3JjLmNoO1xyXG4gICAgICAgIGRzdC5ib3JkZXJTaXplID0gc3JjLmJvcmRlclNpemU7XHJcbiAgICAgICAgZHN0Lm1heEVkZ2VFcnJvciA9IHNyYy5tYXhFZGdlRXJyb3I7XHJcbiAgICAgICAgZHN0LnZlcnRzID0gbmV3IEFycmF5KHNyYy5udmVydHMgKiAzKTtcclxuICAgICAgICBhcnJheWNvcHkkMShzcmMudmVydHMsIDAsIGRzdC52ZXJ0cywgMCwgZHN0LnZlcnRzLmxlbmd0aCk7XHJcbiAgICAgICAgZHN0LnBvbHlzID0gbmV3IEFycmF5KHNyYy5ucG9seXMgKiAyICogc3JjLm52cCk7XHJcbiAgICAgICAgYXJyYXljb3B5JDEoc3JjLnBvbHlzLCAwLCBkc3QucG9seXMsIDAsIGRzdC5wb2x5cy5sZW5ndGgpO1xyXG4gICAgICAgIGRzdC5yZWdzID0gbmV3IEFycmF5KHNyYy5ucG9seXMpO1xyXG4gICAgICAgIGFycmF5Y29weSQxKHNyYy5yZWdzLCAwLCBkc3QucmVncywgMCwgZHN0LnJlZ3MubGVuZ3RoKTtcclxuICAgICAgICBkc3QuYXJlYXMgPSBuZXcgQXJyYXkoc3JjLm5wb2x5cyk7XHJcbiAgICAgICAgYXJyYXljb3B5JDEoc3JjLmFyZWFzLCAwLCBkc3QuYXJlYXMsIDAsIGRzdC5hcmVhcy5sZW5ndGgpO1xyXG4gICAgICAgIGRzdC5mbGFncyA9IG5ldyBBcnJheShzcmMubnBvbHlzKTtcclxuICAgICAgICBhcnJheWNvcHkkMShzcmMuZmxhZ3MsIDAsIGRzdC5mbGFncywgMCwgZHN0LmZsYWdzLmxlbmd0aCk7XHJcbiAgICAgICAgcmV0dXJuIGRzdDtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBSZWNhc3RNZXNoO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdE1lc2gsIFwiVkVSVEVYX0JVQ0tFVF9DT1VOVFwiLCAxIDw8IDEyKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKiBSZXByZXNlbnRzIGEgc2ltcGxlLCBub24tb3ZlcmxhcHBpbmcgY29udG91ciBpbiBmaWVsZCBzcGFjZS4gKi9cclxuICB2YXIgQ29udG91ciA9IGZ1bmN0aW9uIENvbnRvdXIoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91cik7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydHNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm52ZXJ0c1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJydmVydHNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5ydmVydHNcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJlYVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWdcIiwgMCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIF90ZW1wJDIsIF90ZW1wMiQyLCBfdGVtcDM7XHJcblxyXG4gIHZhciBSZWNhc3RDb250b3VyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlY2FzdENvbnRvdXIoKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RDb250b3VyKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkNvbXBhcmVIb2xlc1wiLCBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIGlmIChhLm1pbnggPT0gYi5taW54KSB7XHJcbiAgICAgICAgICBpZiAoYS5taW56IDwgYi5taW56KSByZXR1cm4gLTE7XHJcbiAgICAgICAgICBpZiAoYS5taW56ID4gYi5taW56KSByZXR1cm4gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKGEubWlueCA8IGIubWlueCkgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgaWYgKGEubWlueCA+IGIubWlueCkgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJDb21wYXJlRGlhZ0Rpc3RcIiwgZnVuY3Rpb24gKHZhLCB2Yikge1xyXG4gICAgICAgIHZhciBhID0gdmE7XHJcbiAgICAgICAgdmFyIGIgPSB2YjtcclxuICAgICAgICBpZiAoYS5kaXN0IDwgYi5kaXN0KSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGEuZGlzdCA+IGIuZGlzdCkgcmV0dXJuIDE7XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RDb250b3VyLCBbe1xyXG4gICAgICBrZXk6IFwibWVyZ2VSZWdpb25Ib2xlc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VSZWdpb25Ib2xlcyhjdHgsIHJlZ2lvbikge1xyXG4gICAgICAgIC8vIFNvcnQgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0LlxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVnaW9uLm5ob2xlczsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgbWlubGVmdCA9IGZpbmRMZWZ0TW9zdFZlcnRleChyZWdpb24uaG9sZXNbaV0uY29udG91cik7XHJcbiAgICAgICAgICByZWdpb24uaG9sZXNbaV0ubWlueCA9IG1pbmxlZnRbMF07XHJcbiAgICAgICAgICByZWdpb24uaG9sZXNbaV0ubWlueiA9IG1pbmxlZnRbMV07XHJcbiAgICAgICAgICByZWdpb24uaG9sZXNbaV0ubGVmdG1vc3QgPSBtaW5sZWZ0WzJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgQXJyYXlzLnNvcnQocmVnaW9uLmhvbGVzLCBuZXcgQ29tcGFyZUhvbGVzKCkpO1xyXG4gICAgICAgIHZhciBtYXhWZXJ0cyA9IHJlZ2lvbi5vdXRsaW5lLm52ZXJ0cztcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHJlZ2lvbi5uaG9sZXM7IF9pKyspIHtcclxuICAgICAgICAgIG1heFZlcnRzICs9IHJlZ2lvbi5ob2xlc1tfaV0uY29udG91ci5udmVydHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkaWFncyA9IG5ldyBBcnJheShtYXhWZXJ0cyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHBkID0gMDsgcGQgPCBtYXhWZXJ0czsgcGQrKykge1xyXG4gICAgICAgICAgZGlhZ3NbcGRdID0gbmV3IFBvdGVudGlhbERpYWdvbmFsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgb3V0bGluZSA9IHJlZ2lvbi5vdXRsaW5lOyAvLyBNZXJnZSBob2xlcyBpbnRvIHRoZSBvdXRsaW5lIG9uZSBieSBvbmUuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHJlZ2lvbi5uaG9sZXM7IF9pMisrKSB7XHJcbiAgICAgICAgICB2YXIgaG9sZSA9IHJlZ2lvbi5ob2xlc1tfaTJdLmNvbnRvdXI7XHJcbiAgICAgICAgICB2YXIgaW5kZXggPSAtMTtcclxuICAgICAgICAgIHZhciBiZXN0VmVydGV4ID0gcmVnaW9uLmhvbGVzW19pMl0ubGVmdG1vc3Q7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaXRlciA9IDA7IGl0ZXIgPCBob2xlLm52ZXJ0czsgaXRlcisrKSB7XHJcbiAgICAgICAgICAgIC8vIEZpbmQgcG90ZW50aWFsIGRpYWdvbmFscy5cclxuICAgICAgICAgICAgLy8gVGhlICdiZXN0JyB2ZXJ0ZXggbXVzdCBiZSBpbiB0aGUgY29uZSBkZXNjcmliZWQgYnkgMyBjb3NlcXV0aXZlIHZlcnRpY2VzIG9mIHRoZSBvdXRsaW5lLlxyXG4gICAgICAgICAgICAvLyAuLm8gai0xXHJcbiAgICAgICAgICAgIC8vICAgfFxyXG4gICAgICAgICAgICAvLyAgIHwgICAqIGJlc3RcclxuICAgICAgICAgICAgLy8gICB8XHJcbiAgICAgICAgICAgIC8vIGogby0tLS0tbyBqKzFcclxuICAgICAgICAgICAgLy8gICAgICAgICA6XHJcbiAgICAgICAgICAgIHZhciBuZGlhZ3MgPSAwO1xyXG4gICAgICAgICAgICB2YXIgY29ybmVyID0gYmVzdFZlcnRleCAqIDQ7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG91dGxpbmUubnZlcnRzOyBqKyspIHtcclxuICAgICAgICAgICAgICBpZiAoaW5Db25lKGosIG91dGxpbmUubnZlcnRzLCBvdXRsaW5lLnZlcnRzLCBjb3JuZXIsIGhvbGUudmVydHMpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZHggPSBvdXRsaW5lLnZlcnRzW2ogKiA0ICsgMF0gLSBob2xlLnZlcnRzW2Nvcm5lciArIDBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGR6ID0gb3V0bGluZS52ZXJ0c1tqICogNCArIDJdIC0gaG9sZS52ZXJ0c1tjb3JuZXIgKyAyXTtcclxuICAgICAgICAgICAgICAgIGRpYWdzW25kaWFnc10udmVydCA9IGo7XHJcbiAgICAgICAgICAgICAgICBkaWFnc1tuZGlhZ3NdLmRpc3QgPSBkeCAqIGR4ICsgZHogKiBkejtcclxuICAgICAgICAgICAgICAgIG5kaWFncysrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBTb3J0IHBvdGVudGlhbCBkaWFnb25hbHMgYnkgZGlzdGFuY2UsIHdlIHdhbnQgdG8gbWFrZSB0aGUgY29ubmVjdGlvbiBhcyBzaG9ydCBhcyBwb3NzaWJsZS5cclxuXHJcblxyXG4gICAgICAgICAgICBBcnJheXMuc29ydChkaWFncywgMCwgbmRpYWdzLCBuZXcgQ29tcGFyZURpYWdEaXN0KCkpOyAvLyBGaW5kIGEgZGlhZ29uYWwgdGhhdCBpcyBub3QgaW50ZXJzZWN0aW5nIHRoZSBvdXRsaW5lIG5vdCB0aGUgcmVtYWluaW5nIGhvbGVzLlxyXG5cclxuICAgICAgICAgICAgaW5kZXggPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qID0gMDsgX2ogPCBuZGlhZ3M7IF9qKyspIHtcclxuICAgICAgICAgICAgICB2YXIgcHQgPSBkaWFnc1tfal0udmVydCAqIDQ7XHJcbiAgICAgICAgICAgICAgdmFyIGludGVyc2VjdCA9IGludGVyc2VjdFNlZ0NvdW50b3VyKHB0LCBjb3JuZXIsIGRpYWdzW19pMl0udmVydCwgb3V0bGluZS5udmVydHMsIG91dGxpbmUudmVydHMsIG91dGxpbmUudmVydHMsIGhvbGUudmVydHMpO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBrID0gX2kyOyBrIDwgcmVnaW9uLm5ob2xlcyAmJiAhaW50ZXJzZWN0OyBrKyspIHtcclxuICAgICAgICAgICAgICAgIGludGVyc2VjdCB8PSBpbnRlcnNlY3RTZWdDb3VudG91cihwdCwgY29ybmVyLCAtMSwgcmVnaW9uLmhvbGVzW2tdLmNvbnRvdXIubnZlcnRzLCByZWdpb24uaG9sZXNba10uY29udG91ci52ZXJ0cywgb3V0bGluZS52ZXJ0cywgaG9sZS52ZXJ0cyk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoIWludGVyc2VjdCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBkaWFnc1tfal0udmVydDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBJZiBmb3VuZCBub24taW50ZXJzZWN0aW5nIGRpYWdvbmFsLCBzdG9wIGxvb2tpbmcuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGluZGV4ICE9IC0xKSBicmVhazsgLy8gQWxsIHRoZSBwb3RlbnRpYWwgZGlhZ29uYWxzIGZvciB0aGUgY3VycmVudCB2ZXJ0ZXggd2VyZSBpbnRlcnNlY3RpbmcsIHRyeSBuZXh0IHZlcnRleC5cclxuXHJcbiAgICAgICAgICAgIGJlc3RWZXJ0ZXggPSAoYmVzdFZlcnRleCArIDEpICUgaG9sZS5udmVydHM7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGluZGV4ID09IC0xKSB7XHJcbiAgICAgICAgICAgIGN0eC53YXJuKFwibWVyZ2VIb2xlczogRmFpbGVkIHRvIGZpbmQgbWVyZ2UgcG9pbnRzIGZvclwiKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgbWVyZ2VDb250b3VycyhyZWdpb24ub3V0bGluZSwgaG9sZSwgaW5kZXgsIGJlc3RWZXJ0ZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSByYXcgY29udG91cnMgd2lsbCBtYXRjaCB0aGUgcmVnaW9uIG91dGxpbmVzIGV4YWN0bHkuIFRoZSBAcCBtYXhFcnJvciBhbmQgQHAgbWF4RWRnZUxlblxyXG4gICAgICAvLy8gcGFyYW1ldGVycyBjb250cm9sIGhvdyBjbG9zZWx5IHRoZSBzaW1wbGlmaWVkIGNvbnRvdXJzIHdpbGwgbWF0Y2ggdGhlIHJhdyBjb250b3Vycy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBTaW1wbGlmaWVkIGNvbnRvdXJzIGFyZSBnZW5lcmF0ZWQgc3VjaCB0aGF0IHRoZSB2ZXJ0aWNlcyBmb3IgcG9ydGFscyBiZXR3ZWVuIGFyZWFzIG1hdGNoIHVwLlxyXG4gICAgICAvLy8gKFRoZXkgYXJlIGNvbnNpZGVyZWQgbWFuZGF0b3J5IHZlcnRpY2VzLilcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBTZXR0aW5nIEBwIG1heEVkZ2VMZW5ndGggdG8gemVybyB3aWxsIGRpc2FibGVkIHRoZSBlZGdlIGxlbmd0aCBmZWF0dXJlLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFNlZSB0aGUgI3JjQ29uZmlnIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjQWxsb2NDb250b3VyU2V0LCByY0NvbXBhY3RIZWlnaHRmaWVsZCwgcmNDb250b3VyU2V0LCByY0NvbmZpZ1xyXG5cclxuICAgIH1dLCBbe1xyXG4gICAgICBrZXk6IFwiZ2V0Q29ybmVySGVpZ2h0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb3JuZXJIZWlnaHQoeCwgeSwgaSwgZGlyLCBjaGYsIGlzQm9yZGVyVmVydGV4KSB7XHJcbiAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07XHJcbiAgICAgICAgdmFyIGNoID0gcy55O1xyXG4gICAgICAgIHZhciBkaXJwID0gZGlyICsgMSAmIDB4MztcclxuICAgICAgICB2YXIgcmVncyA9IFswLCAwLCAwLCAwXTsgLy8gQ29tYmluZSByZWdpb24gYW5kIGFyZWEgY29kZXMgaW4gb3JkZXIgdG8gcHJldmVudFxyXG4gICAgICAgIC8vIGJvcmRlciB2ZXJ0aWNlcyB3aGljaCBhcmUgaW4gYmV0d2VlbiB0d28gYXJlYXMgdG8gYmUgcmVtb3ZlZC5cclxuXHJcbiAgICAgICAgcmVnc1swXSA9IGNoZi5zcGFuc1tpXS5yZWcgfCBjaGYuYXJlYXNbaV0gPDwgMTY7XHJcblxyXG4gICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgIHZhciBheCA9IHggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG4gICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcik7XHJcbiAgICAgICAgICB2YXIgYXMgPSBjaGYuc3BhbnNbYWldO1xyXG4gICAgICAgICAgY2ggPSBNYXRoLm1heChjaCwgYXMueSk7XHJcbiAgICAgICAgICByZWdzWzFdID0gY2hmLnNwYW5zW2FpXS5yZWcgfCBjaGYuYXJlYXNbYWldIDw8IDE2O1xyXG5cclxuICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKGFzLCBkaXJwKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICB2YXIgYXgyID0gYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXJwKTtcclxuICAgICAgICAgICAgdmFyIGF5MiA9IGF5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlycCk7XHJcbiAgICAgICAgICAgIHZhciBhaTIgPSBjaGYuY2VsbHNbYXgyICsgYXkyICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oYXMsIGRpcnApO1xyXG4gICAgICAgICAgICB2YXIgYXMyID0gY2hmLnNwYW5zW2FpMl07XHJcbiAgICAgICAgICAgIGNoID0gTWF0aC5tYXgoY2gsIGFzMi55KTtcclxuICAgICAgICAgICAgcmVnc1syXSA9IGNoZi5zcGFuc1thaTJdLnJlZyB8IGNoZi5hcmVhc1thaTJdIDw8IDE2O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlycCkgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgIHZhciBfYXggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlycCk7XHJcblxyXG4gICAgICAgICAgdmFyIF9heSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXJwKTtcclxuXHJcbiAgICAgICAgICB2YXIgX2FpID0gY2hmLmNlbGxzW19heCArIF9heSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcnApO1xyXG5cclxuICAgICAgICAgIHZhciBfYXMgPSBjaGYuc3BhbnNbX2FpXTtcclxuICAgICAgICAgIGNoID0gTWF0aC5tYXgoY2gsIF9hcy55KTtcclxuICAgICAgICAgIHJlZ3NbM10gPSBjaGYuc3BhbnNbX2FpXS5yZWcgfCBjaGYuYXJlYXNbX2FpXSA8PCAxNjtcclxuXHJcbiAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfYXMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgdmFyIF9heDIgPSBfYXggKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WChkaXIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9heTIgPSBfYXkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9haTIgPSBjaGYuY2VsbHNbX2F4MiArIF9heTIgKiBjaGYud2lkdGhdLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihfYXMsIGRpcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgX2FzMiA9IGNoZi5zcGFuc1tfYWkyXTtcclxuICAgICAgICAgICAgY2ggPSBNYXRoLm1heChjaCwgX2FzMi55KTtcclxuICAgICAgICAgICAgcmVnc1syXSA9IGNoZi5zcGFuc1tfYWkyXS5yZWcgfCBjaGYuYXJlYXNbX2FpMl0gPDwgMTY7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBDaGVjayBpZiB0aGUgdmVydGV4IGlzIHNwZWNpYWwgZWRnZSB2ZXJ0ZXgsIHRoZXNlIHZlcnRpY2VzIHdpbGwgYmUgcmVtb3ZlZCBsYXRlci5cclxuXHJcbiAgICAgICAgcmV0dXJuIGNoO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ3YWxrQ29udG91clwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gd2Fsa0NvbnRvdXIoeCwgeSwgaSwgY2hmLCBmbGFncywgcG9pbnRzKSB7XHJcbiAgICAgICAgLy8gQ2hvb3NlIHRoZSBmaXJzdCBub24tY29ubmVjdGVkIGVkZ2VcclxuICAgICAgICB2YXIgZGlyID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKChmbGFnc1tpXSAmIDEgPDwgZGlyKSA9PSAwKSB7XHJcbiAgICAgICAgICBkaXIrKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdGFydERpciA9IGRpcjtcclxuICAgICAgICB2YXIgc3RhcnRpID0gaTtcclxuICAgICAgICB2YXIgYXJlYSA9IGNoZi5hcmVhc1tpXTtcclxuICAgICAgICB2YXIgaXRlciA9IDA7XHJcblxyXG4gICAgICAgIHdoaWxlICgrK2l0ZXIgPCA0MDAwMCkge1xyXG4gICAgICAgICAgaWYgKChmbGFnc1tpXSAmIDEgPDwgZGlyKSAhPSAwKSB7XHJcbiAgICAgICAgICAgIC8vIENob29zZSB0aGUgZWRnZSBjb3JuZXJcclxuICAgICAgICAgICAgdmFyIGlzQm9yZGVyVmVydGV4ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBpc0FyZWFCb3JkZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHB4ID0geDtcclxuICAgICAgICAgICAgdmFyIHB5ID0gUmVjYXN0Q29udG91ci5nZXRDb3JuZXJIZWlnaHQoeCwgeSwgaSwgZGlyLCBjaGYsIGlzQm9yZGVyVmVydGV4KTtcclxuICAgICAgICAgICAgdmFyIHB6ID0geTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZGlyKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgcHorKztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBweCsrO1xyXG4gICAgICAgICAgICAgICAgcHorKztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICBweCsrO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciByID0gMDtcclxuICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGF4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcbiAgICAgICAgICAgICAgdmFyIGF5ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICAgICAgdmFyIGFpID0gY2hmLmNlbGxzW2F4ICsgYXkgKiBjaGYud2lkdGhdLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpO1xyXG4gICAgICAgICAgICAgIHIgPSBjaGYuc3BhbnNbYWldLnJlZztcclxuICAgICAgICAgICAgICBpZiAoYXJlYSAhPSBjaGYuYXJlYXNbYWldKSBpc0FyZWFCb3JkZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNCb3JkZXJWZXJ0ZXgpIHIgfD0gUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9WRVJURVg7XHJcbiAgICAgICAgICAgIGlmIChpc0FyZWFCb3JkZXIpIHIgfD0gUmVjYXN0Q29uc3RhbnRzLlJDX0FSRUFfQk9SREVSO1xyXG4gICAgICAgICAgICBwb2ludHMucHVzaChweCk7XHJcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHB5KTtcclxuICAgICAgICAgICAgcG9pbnRzLnB1c2gocHopO1xyXG4gICAgICAgICAgICBwb2ludHMucHVzaChyKTtcclxuICAgICAgICAgICAgZmxhZ3NbaV0gJj0gfigxIDw8IGRpcik7IC8vIFJlbW92ZSB2aXNpdGVkIGVkZ2VzXHJcblxyXG4gICAgICAgICAgICBkaXIgPSBkaXIgKyAxICYgMHgzOyAvLyBSb3RhdGUgQ1dcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBuaSA9IC0xO1xyXG4gICAgICAgICAgICB2YXIgbnggPSB4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTtcclxuICAgICAgICAgICAgdmFyIG55ID0geSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICAgIHZhciBfcyA9IGNoZi5zcGFuc1tpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKF9zLCBkaXIpICE9IFJlY2FzdENvbnN0YW50cy5SQ19OT1RfQ09OTkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG5jID0gY2hmLmNlbGxzW254ICsgbnkgKiBjaGYud2lkdGhdO1xyXG4gICAgICAgICAgICAgIG5pID0gbmMuaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKF9zLCBkaXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobmkgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAvLyBTaG91bGQgbm90IGhhcHBlbi5cclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHggPSBueDtcclxuICAgICAgICAgICAgeSA9IG55O1xyXG4gICAgICAgICAgICBpID0gbmk7XHJcbiAgICAgICAgICAgIGRpciA9IGRpciArIDMgJiAweDM7IC8vIFJvdGF0ZSBDQ1dcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoc3RhcnRpID09IGkgJiYgc3RhcnREaXIgPT0gZGlyKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlzdGFuY2VQdFNlZ1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdGFuY2VQdFNlZyh4LCB6LCBweCwgcHosIHF4LCBxeikge1xyXG4gICAgICAgIHZhciBwcXggPSBxeCAtIHB4O1xyXG4gICAgICAgIHZhciBwcXogPSBxeiAtIHB6O1xyXG4gICAgICAgIHZhciBkeCA9IHggLSBweDtcclxuICAgICAgICB2YXIgZHogPSB6IC0gcHo7XHJcbiAgICAgICAgdmFyIGQgPSBwcXggKiBwcXggKyBwcXogKiBwcXo7XHJcbiAgICAgICAgdmFyIHQgPSBwcXggKiBkeCArIHBxeiAqIGR6O1xyXG4gICAgICAgIGlmIChkID4gMCkgdCAvPSBkO1xyXG4gICAgICAgIGlmICh0IDwgMCkgdCA9IDA7ZWxzZSBpZiAodCA+IDEpIHQgPSAxO1xyXG4gICAgICAgIGR4ID0gcHggKyB0ICogcHF4IC0geDtcclxuICAgICAgICBkeiA9IHB6ICsgdCAqIHBxeiAtIHo7XHJcbiAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeiAqIGR6O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJzaW1wbGlmeUNvbnRvdXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNpbXBsaWZ5Q29udG91cihwb2ludHMsIHNpbXBsaWZpZWQsIG1heEVycm9yLCBtYXhFZGdlTGVuLCBidWlsZEZsYWdzKSB7XHJcbiAgICAgICAgLy8gQWRkIGluaXRpYWwgcG9pbnRzLlxyXG4gICAgICAgIHZhciBoYXNDb25uZWN0aW9ucyA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gNCkge1xyXG4gICAgICAgICAgaWYgKChwb2ludHNbaSArIDNdICYgUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfUkVHX01BU0spICE9IDApIHtcclxuICAgICAgICAgICAgaGFzQ29ubmVjdGlvbnMgPSB0cnVlO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChoYXNDb25uZWN0aW9ucykge1xyXG4gICAgICAgICAgLy8gVGhlIGNvbnRvdXIgaGFzIHNvbWUgcG9ydGFscyB0byBvdGhlciByZWdpb25zLlxyXG4gICAgICAgICAgLy8gQWRkIGEgbmV3IHBvUG9seSB0byBldmVyeSBsb2NhdGlvbiB3aGVyZSB0aGUgcmVnaW9uIGNoYW5nZXMuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaTMgPSAwLCBuaSA9IHBvaW50cy5sZW5ndGggLyA0OyBfaTMgPCBuaTsgKytfaTMpIHtcclxuICAgICAgICAgICAgdmFyIGlpID0gKF9pMyArIDEpICUgbmk7XHJcbiAgICAgICAgICAgIHZhciBkaWZmZXJlbnRSZWdzID0gKHBvaW50c1tfaTMgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9SRUdfTUFTSykgIT0gKHBvaW50c1tpaSAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19DT05UT1VSX1JFR19NQVNLKTtcclxuICAgICAgICAgICAgdmFyIGFyZWFCb3JkZXJzID0gKHBvaW50c1tfaTMgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQVJFQV9CT1JERVIpICE9IChwb2ludHNbaWkgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQVJFQV9CT1JERVIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRpZmZlcmVudFJlZ3MgfHwgYXJlYUJvcmRlcnMpIHtcclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkLnB1c2gocG9pbnRzW19pMyAqIDQgKyAwXSk7XHJcbiAgICAgICAgICAgICAgc2ltcGxpZmllZC5wdXNoKHBvaW50c1tfaTMgKiA0ICsgMV0pO1xyXG4gICAgICAgICAgICAgIHNpbXBsaWZpZWQucHVzaChwb2ludHNbX2kzICogNCArIDJdKTtcclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkLnB1c2goX2kzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNpbXBsaWZpZWQubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNvbm5lY3Rpb25zIGF0IGFsbCxcclxuICAgICAgICAgIC8vIGNyZWF0ZSBzb21lIGluaXRpYWwgcG9pbnRzIGZvciB0aGUgc2ltcGxpZmljYXRpb24gcHJvY2Vzcy5cclxuICAgICAgICAgIC8vIEZpbmQgbG93ZXItbGVmdCBhbmQgdXBwZXItcmlnaHQgdmVydGljZXMgb2YgdGhlIGNvbnRvdXIuXHJcbiAgICAgICAgICB2YXIgbGx4ID0gcG9pbnRzWzBdO1xyXG4gICAgICAgICAgdmFyIGxseSA9IHBvaW50c1sxXTtcclxuICAgICAgICAgIHZhciBsbHogPSBwb2ludHNbMl07XHJcbiAgICAgICAgICB2YXIgbGxpID0gMDtcclxuICAgICAgICAgIHZhciB1cnggPSBwb2ludHNbMF07XHJcbiAgICAgICAgICB2YXIgdXJ5ID0gcG9pbnRzWzFdO1xyXG4gICAgICAgICAgdmFyIHVyeiA9IHBvaW50c1syXTtcclxuICAgICAgICAgIHZhciB1cmkgPSAwO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9pNCA9IDA7IF9pNCA8IHBvaW50cy5sZW5ndGg7IF9pNCArPSA0KSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gcG9pbnRzW19pNCArIDBdO1xyXG4gICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tfaTQgKyAxXTtcclxuICAgICAgICAgICAgdmFyIHogPSBwb2ludHNbX2k0ICsgMl07XHJcblxyXG4gICAgICAgICAgICBpZiAoeCA8IGxseCB8fCB4ID09IGxseCAmJiB6IDwgbGx6KSB7XHJcbiAgICAgICAgICAgICAgbGx4ID0geDtcclxuICAgICAgICAgICAgICBsbHkgPSB5O1xyXG4gICAgICAgICAgICAgIGxseiA9IHo7XHJcbiAgICAgICAgICAgICAgbGxpID0gX2k0IC8gNDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHggPiB1cnggfHwgeCA9PSB1cnggJiYgeiA+IHVyeikge1xyXG4gICAgICAgICAgICAgIHVyeCA9IHg7XHJcbiAgICAgICAgICAgICAgdXJ5ID0geTtcclxuICAgICAgICAgICAgICB1cnogPSB6O1xyXG4gICAgICAgICAgICAgIHVyaSA9IF9pNCAvIDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBzaW1wbGlmaWVkLnB1c2gobGx4KTtcclxuICAgICAgICAgIHNpbXBsaWZpZWQucHVzaChsbHkpO1xyXG4gICAgICAgICAgc2ltcGxpZmllZC5wdXNoKGxseik7XHJcbiAgICAgICAgICBzaW1wbGlmaWVkLnB1c2gobGxpKTtcclxuICAgICAgICAgIHNpbXBsaWZpZWQucHVzaCh1cngpO1xyXG4gICAgICAgICAgc2ltcGxpZmllZC5wdXNoKHVyeSk7XHJcbiAgICAgICAgICBzaW1wbGlmaWVkLnB1c2godXJ6KTtcclxuICAgICAgICAgIHNpbXBsaWZpZWQucHVzaCh1cmkpO1xyXG4gICAgICAgIH0gLy8gQWRkIHBvaW50cyB1bnRpbCBhbGwgcmF3IHBvaW50cyBhcmUgd2l0aGluXHJcbiAgICAgICAgLy8gZXJyb3IgdG9sZXJhbmNlIHRvIHRoZSBzaW1wbGlmaWVkIHNoYXBlLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIHBuID0gcG9pbnRzLmxlbmd0aCAvIDQ7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pNSA9IDA7IF9pNSA8IHNpbXBsaWZpZWQubGVuZ3RoIC8gNDspIHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNpbXBsaWZpZWQubGVuZ3RoKVxyXG4gICAgICAgICAgdmFyIF9paSA9IChfaTUgKyAxKSAlIChzaW1wbGlmaWVkLmxlbmd0aCAvIDQpO1xyXG5cclxuICAgICAgICAgIHZhciBheCA9IHNpbXBsaWZpZWRbX2k1ICogNCArIDBdO1xyXG4gICAgICAgICAgdmFyIGF6ID0gc2ltcGxpZmllZFtfaTUgKiA0ICsgMl07XHJcbiAgICAgICAgICB2YXIgYWkgPSBzaW1wbGlmaWVkW19pNSAqIDQgKyAzXTtcclxuICAgICAgICAgIHZhciBieCA9IHNpbXBsaWZpZWRbX2lpICogNCArIDBdO1xyXG4gICAgICAgICAgdmFyIGJ6ID0gc2ltcGxpZmllZFtfaWkgKiA0ICsgMl07XHJcbiAgICAgICAgICB2YXIgYmkgPSBzaW1wbGlmaWVkW19paSAqIDQgKyAzXTsgLy8gRmluZCBtYXhpbXVtIGRldmlhdGlvbiBmcm9tIHRoZSBzZWdtZW50LlxyXG5cclxuICAgICAgICAgIHZhciBtYXhkID0gMDtcclxuICAgICAgICAgIHZhciBtYXhpID0gLTE7XHJcbiAgICAgICAgICB2YXIgY2kgPSB2b2lkIDAsXHJcbiAgICAgICAgICAgICAgY2luYyA9IHZvaWQgMCxcclxuICAgICAgICAgICAgICBlbmRpID0gdm9pZCAwOyAvLyBUcmF2ZXJzZSB0aGUgc2VnbWVudCBpbiBsZXhpbG9naWNhbCBvcmRlciBzbyB0aGF0IHRoZVxyXG4gICAgICAgICAgLy8gbWF4IGRldmlhdGlvbiBpcyBjYWxjdWxhdGVkIHNpbWlsYXJseSB3aGVuIHRyYXZlcnNpbmdcclxuICAgICAgICAgIC8vIG9wcG9zaXRlIHNlZ21lbnRzLlxyXG5cclxuICAgICAgICAgIGlmIChieCA+IGF4IHx8IGJ4ID09IGF4ICYmIGJ6ID4gYXopIHtcclxuICAgICAgICAgICAgY2luYyA9IDE7XHJcbiAgICAgICAgICAgIGNpID0gKGFpICsgY2luYykgJSBwbjtcclxuICAgICAgICAgICAgZW5kaSA9IGJpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2luYyA9IHBuIC0gMTtcclxuICAgICAgICAgICAgY2kgPSAoYmkgKyBjaW5jKSAlIHBuO1xyXG4gICAgICAgICAgICBlbmRpID0gYWk7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wID0gYXg7XHJcbiAgICAgICAgICAgIGF4ID0gYng7XHJcbiAgICAgICAgICAgIGJ4ID0gdGVtcDtcclxuICAgICAgICAgICAgdGVtcCA9IGF6O1xyXG4gICAgICAgICAgICBheiA9IGJ6O1xyXG4gICAgICAgICAgICBieiA9IHRlbXA7XHJcbiAgICAgICAgICB9IC8vIFRlc3NlbGxhdGUgb25seSBvdXRlciBlZGdlcyBvciBlZGdlcyBiZXR3ZWVuIGFyZWFzLlxyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coXCJzdGFydFwiKVxyXG5cclxuXHJcbiAgICAgICAgICBpZiAoKHBvaW50c1tjaSAqIDQgKyAzXSAmIFJlY2FzdENvbnN0YW50cy5SQ19DT05UT1VSX1JFR19NQVNLKSA9PSAwIHx8IChwb2ludHNbY2kgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQVJFQV9CT1JERVIpICE9IDApIHtcclxuICAgICAgICAgICAgd2hpbGUgKGNpICE9IGVuZGkpIHtcclxuICAgICAgICAgICAgICAvLyBpZihNYXRoLnJhbmRvbSgpIDwgLjAxKSBjb25zb2xlLmxvZyhgJHtjaX0gJHtlbmRpfWApO1xyXG4gICAgICAgICAgICAgIHZhciBkID0gUmVjYXN0Q29udG91ci5kaXN0YW5jZVB0U2VnKHBvaW50c1tjaSAqIDQgKyAwXSwgcG9pbnRzW2NpICogNCArIDJdLCBheCwgYXosIGJ4LCBieik7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChkID4gbWF4ZCkge1xyXG4gICAgICAgICAgICAgICAgbWF4ZCA9IGQ7XHJcbiAgICAgICAgICAgICAgICBtYXhpID0gY2k7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBjaSA9IChjaSArIGNpbmMpICUgcG47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy8gY29uc29sZS5sb2coXCJzdG9wXCIpXHJcbiAgICAgICAgICAvLyBJZiB0aGUgbWF4IGRldmlhdGlvbiBpcyBsYXJnZXIgdGhhbiBhY2NlcHRlZCBlcnJvcixcclxuICAgICAgICAgIC8vIGFkZCBuZXcgcG9pbnQsIGVsc2UgY29udGludWUgdG8gbmV4dCBzZWdtZW50LlxyXG5cclxuXHJcbiAgICAgICAgICBpZiAobWF4aSAhPSAtMSAmJiBtYXhkID4gbWF4RXJyb3IgKiBtYXhFcnJvcikge1xyXG4gICAgICAgICAgICAvLyBBZGQgdGhlIHBvaW50LlxyXG4gICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k1ICsgMSkgKiA0ICsgMCwgMCwgcG9pbnRzW21heGkgKiA0ICsgMF0pO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k1ICsgMSkgKiA0ICsgMSwgMCwgcG9pbnRzW21heGkgKiA0ICsgMV0pO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k1ICsgMSkgKiA0ICsgMiwgMCwgcG9pbnRzW21heGkgKiA0ICsgMl0pO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k1ICsgMSkgKiA0ICsgMywgMCwgbWF4aSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICArK19pNTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFNwbGl0IHRvbyBsZXQgZWRnZXMuXHJcblxyXG5cclxuICAgICAgICBpZiAobWF4RWRnZUxlbiA+IDAgJiYgKGJ1aWxkRmxhZ3MgJiAoUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfVEVTU19XQUxMX0VER0VTIHwgUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfVEVTU19BUkVBX0VER0VTKSkgIT0gMCkge1xyXG4gICAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgc2ltcGxpZmllZC5sZW5ndGggLyA0Oykge1xyXG4gICAgICAgICAgICB2YXIgX2lpMiA9IChfaTYgKyAxKSAlIChzaW1wbGlmaWVkLmxlbmd0aCAvIDQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9heDMgPSBzaW1wbGlmaWVkW19pNiAqIDQgKyAwXTtcclxuICAgICAgICAgICAgdmFyIF9heiA9IHNpbXBsaWZpZWRbX2k2ICogNCArIDJdO1xyXG4gICAgICAgICAgICB2YXIgX2FpMyA9IHNpbXBsaWZpZWRbX2k2ICogNCArIDNdO1xyXG4gICAgICAgICAgICB2YXIgX2J4ID0gc2ltcGxpZmllZFtfaWkyICogNCArIDBdO1xyXG4gICAgICAgICAgICB2YXIgX2J6ID0gc2ltcGxpZmllZFtfaWkyICogNCArIDJdO1xyXG4gICAgICAgICAgICB2YXIgX2JpID0gc2ltcGxpZmllZFtfaWkyICogNCArIDNdOyAvLyBGaW5kIG1heGltdW0gZGV2aWF0aW9uIGZyb20gdGhlIHNlZ21lbnQuXHJcblxyXG4gICAgICAgICAgICB2YXIgX21heGkgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIHZhciBfY2kgPSAoX2FpMyArIDEpICUgcG47IC8vIFRlc3NlbGxhdGUgb25seSBvdXRlciBlZGdlcyBvciBlZGdlcyBiZXR3ZWVuIGFyZWFzLlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciB0ZXNzID0gZmFsc2U7IC8vIFdhbGwgZWRnZXMuXHJcblxyXG4gICAgICAgICAgICBpZiAoKGJ1aWxkRmxhZ3MgJiBSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9URVNTX1dBTExfRURHRVMpICE9IDAgJiYgKHBvaW50c1tfY2kgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9SRUdfTUFTSykgPT0gMCkgdGVzcyA9IHRydWU7IC8vIEVkZ2VzIGJldHdlZW4gYXJlYXMuXHJcblxyXG4gICAgICAgICAgICBpZiAoKGJ1aWxkRmxhZ3MgJiBSZWNhc3RDb25zdGFudHMuUkNfQ09OVE9VUl9URVNTX0FSRUFfRURHRVMpICE9IDAgJiYgKHBvaW50c1tfY2kgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQVJFQV9CT1JERVIpICE9IDApIHRlc3MgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRlc3MpIHtcclxuICAgICAgICAgICAgICB2YXIgZHggPSBfYnggLSBfYXgzO1xyXG4gICAgICAgICAgICAgIHZhciBkeiA9IF9ieiAtIF9hejtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGR4ICogZHggKyBkeiAqIGR6ID4gbWF4RWRnZUxlbiAqIG1heEVkZ2VMZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIFJvdW5kIGJhc2VkIG9uIHRoZSBzZWdtZW50cyBpbiBsZXhpbG9naWNhbCBvcmRlciBzbyB0aGF0IHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gbWF4IHRlc3NlbGF0aW9uIGlzIGNvbnNpc3RlbnQgcmVnYXJkbGVzIGluIHdoaWNoIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgLy8gc2VnbWVudHMgYXJlIHRyYXZlcnNlZC5cclxuICAgICAgICAgICAgICAgIHZhciBuID0gX2JpIDwgX2FpMyA/IF9iaSArIHBuIC0gX2FpMyA6IF9iaSAtIF9haTM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG4gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChfYnggPiBfYXgzIHx8IF9ieCA9PSBfYXgzICYmIF9ieiA+IF9heikgX21heGkgPSBNYXRoLmZsb29yKChfYWkzICsgbiAvIDIpICUgcG4pO2Vsc2UgX21heGkgPSBNYXRoLmZsb29yKChfYWkzICsgKG4gKyAxKSAvIDIpICUgcG4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBJZiB0aGUgbWF4IGRldmlhdGlvbiBpcyBsYXJnZXIgdGhhbiBhY2NlcHRlZCBlcnJvcixcclxuICAgICAgICAgICAgLy8gYWRkIG5ldyBwb2ludCwgZWxzZSBjb250aW51ZSB0byBuZXh0IHNlZ21lbnQuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKF9tYXhpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgLy8gQWRkIHRoZSBwb2ludC5cclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMCwgMCwgcG9pbnRzW19tYXhpICogNCArIDBdKTtcclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMSwgMCwgcG9pbnRzW19tYXhpICogNCArIDFdKTtcclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMiwgMCwgcG9pbnRzW19tYXhpICogNCArIDJdKTtcclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZSgoX2k2ICsgMSkgKiA0ICsgMywgMCwgX21heGkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICsrX2k2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTcgPSAwOyBfaTcgPCBzaW1wbGlmaWVkLmxlbmd0aCAvIDQ7ICsrX2k3KSB7XHJcbiAgICAgICAgICAvLyBUaGUgZWRnZSB2ZXJ0ZXggZmxhZyBpcyB0YWtlIGZyb20gdGhlIGN1cnJlbnQgcmF3IHBvaW50LFxyXG4gICAgICAgICAgLy8gYW5kIHRoZSBuZWlnaGJvdXIgcmVnaW9uIGlzIHRha2UgZnJvbSB0aGUgbmV4dCByYXcgcG9pbnQuXHJcbiAgICAgICAgICB2YXIgX2FpNCA9IChzaW1wbGlmaWVkW19pNyAqIDQgKyAzXSArIDEpICUgcG47XHJcblxyXG4gICAgICAgICAgdmFyIF9iaTIgPSBzaW1wbGlmaWVkW19pNyAqIDQgKyAzXTtcclxuICAgICAgICAgIHNpbXBsaWZpZWRbX2k3ICogNCArIDNdID0gcG9pbnRzW19haTQgKiA0ICsgM10gJiAoUmVjYXN0Q29uc3RhbnRzLlJDX0NPTlRPVVJfUkVHX01BU0sgfCBSZWNhc3RDb25zdGFudHMuUkNfQVJFQV9CT1JERVIpIHwgcG9pbnRzW19iaTIgKiA0ICsgM10gJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1ZFUlRFWDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNhbGNBcmVhT2ZQb2x5Z29uMkRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNBcmVhT2ZQb2x5Z29uMkQodmVydHMsIG52ZXJ0cykge1xyXG4gICAgICAgIHZhciBhcmVhID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBudmVydHMgLSAxOyBpIDwgbnZlcnRzOyBqID0gaSsrKSB7XHJcbiAgICAgICAgICB2YXIgdmkgPSBpICogNDtcclxuICAgICAgICAgIHZhciB2aiA9IGogKiA0O1xyXG4gICAgICAgICAgYXJlYSArPSB2ZXJ0c1t2aSArIDBdICogdmVydHNbdmogKyAyXSAtIHZlcnRzW3ZqICsgMF0gKiB2ZXJ0c1t2aSArIDJdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChhcmVhICsgMSkgLyAyO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpbnRlcnNlY3RTZWdDb3VudG91clwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW50ZXJzZWN0U2VnQ291bnRvdXIoZDAsIGQxLCBpLCBuLCB2ZXJ0cywgZDB2ZXJ0cywgZDF2ZXJ0cykge1xyXG4gICAgICAgIC8vIEZvciBlYWNoIGVkZ2UgKGssaysxKSBvZiBQXHJcbiAgICAgICAgdmFyIHB2ZXJ0cyA9IG5ldyBBcnJheSg0ICogNCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGcgPSAwOyBnIDwgNDsgZysrKSB7XHJcbiAgICAgICAgICBwdmVydHNbZ10gPSBkMHZlcnRzW2QwICsgZ107XHJcbiAgICAgICAgICBwdmVydHNbNCArIGddID0gZDF2ZXJ0c1tkMSArIGddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZDAgPSAwO1xyXG4gICAgICAgIGQxID0gNDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBuOyBrKyspIHtcclxuICAgICAgICAgIHZhciBrMSA9IFJlY2FzdE1lc2gubmV4dChrLCBuKTsgLy8gU2tpcCBlZGdlcyBpbmNpZGVudCB0byBpLlxyXG5cclxuICAgICAgICAgIGlmIChpID09IGsgfHwgaSA9PSBrMSkgY29udGludWU7XHJcbiAgICAgICAgICB2YXIgcDAgPSBrICogNDtcclxuICAgICAgICAgIHZhciBwMSA9IGsxICogNDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfZyA9IDA7IF9nIDwgNDsgX2crKykge1xyXG4gICAgICAgICAgICBwdmVydHNbOCArIF9nXSA9IHZlcnRzW3AwICsgX2ddO1xyXG4gICAgICAgICAgICBwdmVydHNbMTIgKyBfZ10gPSB2ZXJ0c1twMSArIF9nXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBwMCA9IDg7XHJcbiAgICAgICAgICBwMSA9IDEyO1xyXG4gICAgICAgICAgaWYgKFJlY2FzdE1lc2gudmVxdWFsKHB2ZXJ0cywgZDAsIHAwKSB8fCBSZWNhc3RNZXNoLnZlcXVhbChwdmVydHMsIGQxLCBwMCkgfHwgUmVjYXN0TWVzaC52ZXF1YWwocHZlcnRzLCBkMCwgcDEpIHx8IFJlY2FzdE1lc2gudmVxdWFsKHB2ZXJ0cywgZDEsIHAxKSkgY29udGludWU7XHJcbiAgICAgICAgICBpZiAoUmVjYXN0TWVzaC5pbnRlcnNlY3QocHZlcnRzLCBkMCwgZDEsIHAwLCBwMSkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpbkNvbmVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluQ29uZShpLCBuLCB2ZXJ0cywgcGosIHZlcnRwaikge1xyXG4gICAgICAgIHBpID0gaSAqIDQ7XHJcbiAgICAgICAgcGkxID0gUmVjYXN0TWVzaC5uZXh0KGksIG4pICogNDtcclxuICAgICAgICBwaW4xID0gUmVjYXN0TWVzaC5wcmV2KGksIG4pICogNDtcclxuICAgICAgICBwdmVydHMgPSBuZXcgQXJyYXkoNCAqIDQpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBnID0gMDsgZyA8IDQ7IGcrKykge1xyXG4gICAgICAgICAgcHZlcnRzW2ddID0gdmVydHNbcGkgKyBnXTtcclxuICAgICAgICAgIHB2ZXJ0c1s0ICsgZ10gPSB2ZXJ0c1twaTEgKyBnXTtcclxuICAgICAgICAgIHB2ZXJ0c1s4ICsgZ10gPSB2ZXJ0c1twaW4xICsgZ107XHJcbiAgICAgICAgICBwdmVydHNbMTIgKyBnXSA9IHZlcnRwaltwaiArIGddO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGkgPSAwO1xyXG4gICAgICAgIHBpMSA9IDQ7XHJcbiAgICAgICAgcGluMSA9IDg7XHJcbiAgICAgICAgcGogPSAxMjsgLy8gSWYgUFtpXSBpcyBhIGNvbnZleCB2ZXJ0ZXggWyBpKzEgbGVmdCBvciBvbiAoaS0xLGkpIF0uXHJcblxyXG4gICAgICAgIGlmIChSZWNhc3RNZXNoLmxlZnRPbihwdmVydHMsIHBpbjEsIHBpLCBwaTEpKSByZXR1cm4gUmVjYXN0TWVzaC5sZWZ0KHB2ZXJ0cywgcGksIHBqLCBwaW4xKSAmJiBSZWNhc3RNZXNoLmxlZnQocHZlcnRzLCBwaiwgcGksIHBpMSk7IC8vIEFzc3VtZSAoaS0xLGksaSsxKSBub3QgY29sbGluZWFyLlxyXG4gICAgICAgIC8vIGVsc2UgUFtpXSBpcyByZWZsZXguXHJcblxyXG4gICAgICAgIHJldHVybiAhKFJlY2FzdE1lc2gubGVmdE9uKHB2ZXJ0cywgcGksIHBqLCBwaTEpICYmIFJlY2FzdE1lc2gubGVmdE9uKHB2ZXJ0cywgcGosIHBpLCBwaW4xKSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJlbW92ZURlZ2VuZXJhdGVTZWdtZW50c1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlRGVnZW5lcmF0ZVNlZ21lbnRzKHNpbXBsaWZpZWQpIHtcclxuICAgICAgICAvLyBSZW1vdmUgYWRqYWNlbnQgdmVydGljZXMgd2hpY2ggYXJlIGVxdWFsIG9uIHh6LXBsYW5lLFxyXG4gICAgICAgIC8vIG9yIGVsc2UgdGhlIHRyaWFuZ3VsYXRvciB3aWxsIGdldCBjb25mdXNlZC5cclxuICAgICAgICB2YXIgbnB0cyA9IHNpbXBsaWZpZWQubGVuZ3RoIC8gNDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBucHRzOyArK2kpIHtcclxuICAgICAgICAgIHZhciBuaSA9IFJlY2FzdE1lc2gubmV4dChpLCBucHRzKTsgLy9cdFx0XHRpZiAodmVxdWFsKCZzaW1wbGlmaWVkW2kqNF0sICZzaW1wbGlmaWVkW25pKjRdKSlcclxuXHJcbiAgICAgICAgICBpZiAoc2ltcGxpZmllZFtpICogNF0gPT0gc2ltcGxpZmllZFtuaSAqIDRdICYmIHNpbXBsaWZpZWRbaSAqIDQgKyAyXSA9PSBzaW1wbGlmaWVkW25pICogNCArIDJdKSB7XHJcbiAgICAgICAgICAgIC8vIERlZ2VuZXJhdGUgc2VnbWVudCwgcmVtb3ZlLlxyXG4gICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZShpICogNCwgMSk7XHJcbiAgICAgICAgICAgIHNpbXBsaWZpZWQuc3BsaWNlKGkgKiA0LCAxKTtcclxuICAgICAgICAgICAgc2ltcGxpZmllZC5zcGxpY2UoaSAqIDQsIDEpO1xyXG4gICAgICAgICAgICBzaW1wbGlmaWVkLnNwbGljZShpICogNCwgMSk7XHJcbiAgICAgICAgICAgIG5wdHMtLTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1lcmdlQ29udG91cnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlQ29udG91cnMoY2EsIGNiLCBpYSwgaWIpIHtcclxuICAgICAgICB2YXIgbWF4VmVydHMgPSBjYS5udmVydHMgKyBjYi5udmVydHMgKyAyO1xyXG4gICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBBcnJheShtYXhWZXJ0cyAqIDQpO1xyXG4gICAgICAgIHZhciBudiA9IDA7IC8vIENvcHkgY29udG91ciBBLlxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBjYS5udmVydHM7ICsraSkge1xyXG4gICAgICAgICAgdmFyIGRzdCA9IG52ICogNDtcclxuICAgICAgICAgIHZhciBzcmMgPSAoaWEgKyBpKSAlIGNhLm52ZXJ0cyAqIDQ7XHJcbiAgICAgICAgICB2ZXJ0c1tkc3QgKyAwXSA9IGNhLnZlcnRzW3NyYyArIDBdO1xyXG4gICAgICAgICAgdmVydHNbZHN0ICsgMV0gPSBjYS52ZXJ0c1tzcmMgKyAxXTtcclxuICAgICAgICAgIHZlcnRzW2RzdCArIDJdID0gY2EudmVydHNbc3JjICsgMl07XHJcbiAgICAgICAgICB2ZXJ0c1tkc3QgKyAzXSA9IGNhLnZlcnRzW3NyYyArIDNdO1xyXG4gICAgICAgICAgbnYrKztcclxuICAgICAgICB9IC8vIENvcHkgY29udG91ciBCXHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPD0gY2IubnZlcnRzOyArK19pOCkge1xyXG4gICAgICAgICAgdmFyIF9kc3QgPSBudiAqIDQ7XHJcblxyXG4gICAgICAgICAgdmFyIF9zcmMgPSAoaWIgKyBfaTgpICUgY2IubnZlcnRzICogNDtcclxuXHJcbiAgICAgICAgICB2ZXJ0c1tfZHN0ICsgMF0gPSBjYi52ZXJ0c1tfc3JjICsgMF07XHJcbiAgICAgICAgICB2ZXJ0c1tfZHN0ICsgMV0gPSBjYi52ZXJ0c1tfc3JjICsgMV07XHJcbiAgICAgICAgICB2ZXJ0c1tfZHN0ICsgMl0gPSBjYi52ZXJ0c1tfc3JjICsgMl07XHJcbiAgICAgICAgICB2ZXJ0c1tfZHN0ICsgM10gPSBjYi52ZXJ0c1tfc3JjICsgM107XHJcbiAgICAgICAgICBudisrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2EudmVydHMgPSB2ZXJ0cztcclxuICAgICAgICBjYS5udmVydHMgPSBudjtcclxuICAgICAgICBjYi52ZXJ0cyA9IG51bGw7XHJcbiAgICAgICAgY2IubnZlcnRzID0gMDtcclxuICAgICAgfSAvLyBGaW5kcyB0aGUgbG93ZXN0IGxlZnRtb3N0IHZlcnRleCBvZiBhIGNvbnRvdXIuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZExlZnRNb3N0VmVydGV4XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTGVmdE1vc3RWZXJ0ZXgoY29udG91cikge1xyXG4gICAgICAgIHZhciBtaW54ID0gY29udG91ci52ZXJ0c1swXTtcclxuICAgICAgICB2YXIgbWlueiA9IGNvbnRvdXIudmVydHNbMl07XHJcbiAgICAgICAgdmFyIGxlZnRtb3N0ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBjb250b3VyLm52ZXJ0czsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgeCA9IGNvbnRvdXIudmVydHNbaSAqIDQgKyAwXTtcclxuICAgICAgICAgIHZhciB6ID0gY29udG91ci52ZXJ0c1tpICogNCArIDJdO1xyXG5cclxuICAgICAgICAgIGlmICh4IDwgbWlueCB8fCB4ID09IG1pbnggJiYgeiA8IG1pbnopIHtcclxuICAgICAgICAgICAgbWlueCA9IHg7XHJcbiAgICAgICAgICAgIG1pbnogPSB6O1xyXG4gICAgICAgICAgICBsZWZ0bW9zdCA9IGk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW21pbngsIG1pbnosIGxlZnRtb3N0XTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYnVpbGRDb250b3Vyc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRDb250b3VycyhjdHgsIGNoZiwgbWF4RXJyb3IsIG1heEVkZ2VMZW4sIGJ1aWxkRmxhZ3MpIHtcclxuICAgICAgICB2YXIgdyA9IGNoZi53aWR0aDtcclxuICAgICAgICB2YXIgaCA9IGNoZi5oZWlnaHQ7XHJcbiAgICAgICAgdmFyIGJvcmRlclNpemUgPSBjaGYuYm9yZGVyU2l6ZTtcclxuICAgICAgICB2YXIgY3NldCA9IG5ldyBDb250b3VyU2V0KCk7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJCVUlMRF9DT05UT1VSU1wiKTtcclxuICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTMoY3NldC5ibWluLCBjaGYuYm1pbiwgMCk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkzKGNzZXQuYm1heCwgY2hmLmJtYXgsIDApO1xyXG5cclxuICAgICAgICBpZiAoYm9yZGVyU2l6ZSA+IDApIHtcclxuICAgICAgICAgIC8vIElmIHRoZSBoZWlnaHRmaWVsZCB3YXMgYnVpbGQgd2l0aCBib3JkZXJzaXplLCByZW1vdmUgdGhlIG9mZnNldC5cclxuICAgICAgICAgIHBhZCA9IGJvcmRlclNpemUgKiBjaGYuY3M7XHJcbiAgICAgICAgICBjc2V0LmJtaW5bMF0gKz0gcGFkO1xyXG4gICAgICAgICAgY3NldC5ibWluWzJdICs9IHBhZDtcclxuICAgICAgICAgIGNzZXQuYm1heFswXSAtPSBwYWQ7XHJcbiAgICAgICAgICBjc2V0LmJtYXhbMl0gLT0gcGFkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3NldC5jcyA9IGNoZi5jcztcclxuICAgICAgICBjc2V0LmNoID0gY2hmLmNoO1xyXG4gICAgICAgIGNzZXQud2lkdGggPSBjaGYud2lkdGggLSBjaGYuYm9yZGVyU2l6ZSAqIDI7XHJcbiAgICAgICAgY3NldC5oZWlnaHQgPSBjaGYuaGVpZ2h0IC0gY2hmLmJvcmRlclNpemUgKiAyO1xyXG4gICAgICAgIGNzZXQuYm9yZGVyU2l6ZSA9IGNoZi5ib3JkZXJTaXplO1xyXG4gICAgICAgIGNzZXQubWF4RXJyb3IgPSBtYXhFcnJvcjtcclxuICAgICAgICB2YXIgZmxhZ3MgPSBuZXcgQXJyYXkoY2hmLnNwYW5Db3VudCkuZmlsbCgwKTtcclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIkJVSUxEX0NPTlRPVVJTX1RSQUNFXCIpOyAvLyBNYXJrIGJvdW5kYXJpZXMuXHJcblxyXG4gICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaDsgKyt5KSB7XHJcbiAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHc7ICsreCkge1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1t4ICsgeSAqIHddO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IGkgPCBuaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgLy8gaWYoeSA9PSAzICYmIHggPT0gMyAmJiBpID09IDEzNDQpXHJcbiAgICAgICAgICAgICAgLy8gXHRjb25zb2xlLmxvZyhcImVhcmxpZXJcIik7XHJcbiAgICAgICAgICAgICAgdmFyIHJlcyA9IDA7XHJcbiAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07XHJcblxyXG4gICAgICAgICAgICAgIGlmIChjaGYuc3BhbnNbaV0ucmVnID09IDAgfHwgKGNoZi5zcGFuc1tpXS5yZWcgJiBSZWNhc3RDb25zdGFudHMuUkNfQk9SREVSX1JFRykgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZmxhZ3NbaV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBkaXIgPSAwOyBkaXIgPCA0OyArK2Rpcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIHIgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChSZWNhc3RDb21tb24uR2V0Q29uKHMsIGRpcikgIT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGF4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBheSA9IHkgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShkaXIpO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgYWkgPSBjaGYuY2VsbHNbYXggKyBheSAqIHddLmluZGV4ICsgUmVjYXN0Q29tbW9uLkdldENvbihzLCBkaXIpO1xyXG4gICAgICAgICAgICAgICAgICByID0gY2hmLnNwYW5zW2FpXS5yZWc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHIgPT0gY2hmLnNwYW5zW2ldLnJlZykgcmVzIHw9IDEgPDwgZGlyO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgZmxhZ3NbaV0gPSByZXMgXiAweGY7IC8vIEludmVyc2UsIG1hcmsgbm9uIGNvbm5lY3RlZCBlZGdlcy5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX0NPTlRPVVJTX1RSQUNFXCIpO1xyXG4gICAgICAgIHZhciB2ZXJ0cyA9IG5ldyBBcnJheSgyNTYpO1xyXG4gICAgICAgIHZhciBzaW1wbGlmaWVkID0gbmV3IEFycmF5KDY0KTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX3kgPSAwOyBfeSA8IGg7ICsrX3kpIHtcclxuICAgICAgICAgIGZvciAodmFyIF94ID0gMDsgX3ggPCB3OyArK194KSB7XHJcbiAgICAgICAgICAgIHZhciBfYyA9IGNoZi5jZWxsc1tfeCArIF95ICogd107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTkgPSBfYy5pbmRleCwgX25pID0gX2MuaW5kZXggKyBfYy5jb3VudDsgX2k5IDwgX25pOyArK19pOSkge1xyXG4gICAgICAgICAgICAgIC8vIGlmKHk9PTMgJiYgeCA9PSAzICYmIGkgPT0gMTM0NClcclxuICAgICAgICAgICAgICAvLyBcdGNvbnNvbGUubG9nKFwiZGFrXCIpO1xyXG4gICAgICAgICAgICAgIGlmIChmbGFnc1tfaTldID09IDAgfHwgZmxhZ3NbX2k5XSA9PSAweGYpIHtcclxuICAgICAgICAgICAgICAgIGZsYWdzW19pOV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICB2YXIgcmVnID0gY2hmLnNwYW5zW19pOV0ucmVnO1xyXG4gICAgICAgICAgICAgIGlmIChyZWcgPT0gMCB8fCAocmVnICYgUmVjYXN0Q29uc3RhbnRzLlJDX0JPUkRFUl9SRUcpICE9IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIHZhciBhcmVhID0gY2hmLmFyZWFzW19pOV07XHJcbiAgICAgICAgICAgICAgdmVydHMgPSBbXTtcclxuICAgICAgICAgICAgICBzaW1wbGlmaWVkID0gW107XHJcbiAgICAgICAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJCVUlMRF9DT05UT1VSU19UUkFDRVwiKTtcclxuICAgICAgICAgICAgICBSZWNhc3RDb250b3VyLndhbGtDb250b3VyKF94LCBfeSwgX2k5LCBjaGYsIGZsYWdzLCB2ZXJ0cyk7XHJcbiAgICAgICAgICAgICAgY3R4LnN0b3BUaW1lcihcIkJVSUxEX0NPTlRPVVJTX1RSQUNFXCIpO1xyXG4gICAgICAgICAgICAgIGN0eC5zdGFydFRpbWVyKFwiQlVJTERfQ09OVE9VUlNfU0lNUExJRllcIik7XHJcbiAgICAgICAgICAgICAgUmVjYXN0Q29udG91ci5zaW1wbGlmeUNvbnRvdXIodmVydHMsIHNpbXBsaWZpZWQsIG1heEVycm9yLCBtYXhFZGdlTGVuLCBidWlsZEZsYWdzKTtcclxuICAgICAgICAgICAgICBSZWNhc3RDb250b3VyLnJlbW92ZURlZ2VuZXJhdGVTZWdtZW50cyhzaW1wbGlmaWVkKTtcclxuICAgICAgICAgICAgICBjdHguc3RvcFRpbWVyKFwiQlVJTERfQ09OVE9VUlNfU0lNUExJRllcIik7IC8vIFN0b3JlIHJlZ2lvbj0+Y29udG91ciByZW1hcCBpbmZvLlxyXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBjb250b3VyLlxyXG5cclxuICAgICAgICAgICAgICBpZiAoc2ltcGxpZmllZC5sZW5ndGggLyA0ID49IDMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb250ID0gbmV3IENvbnRvdXIoKTtcclxuICAgICAgICAgICAgICAgIGNzZXQuY29udHMucHVzaChjb250KTtcclxuICAgICAgICAgICAgICAgIGNvbnQubnZlcnRzID0gc2ltcGxpZmllZC5sZW5ndGggLyA0O1xyXG4gICAgICAgICAgICAgICAgY29udC52ZXJ0cyA9IG5ldyBBcnJheShzaW1wbGlmaWVkLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBjb250LnZlcnRzLmxlbmd0aDsgbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnQudmVydHNbbF0gPSBzaW1wbGlmaWVkW2xdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChib3JkZXJTaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVpZ2h0ZmllbGQgd2FzIGJ1aWxkIHdpdGggYm9yZGVyc2l6ZSwgcmVtb3ZlIHRoZSBvZmZzZXQuXHJcbiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY29udC5udmVydHM7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnQudmVydHNbaiAqIDRdIC09IGJvcmRlclNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udC52ZXJ0c1tqICogNCArIDJdIC09IGJvcmRlclNpemU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb250Lm5ydmVydHMgPSB2ZXJ0cy5sZW5ndGggLyA0O1xyXG4gICAgICAgICAgICAgICAgY29udC5ydmVydHMgPSBuZXcgQXJyYXkodmVydHMubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfbCA9IDA7IF9sIDwgY29udC5ydmVydHMubGVuZ3RoOyBfbCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnQucnZlcnRzW19sXSA9IHZlcnRzW19sXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm9yZGVyU2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlaWdodGZpZWxkIHdhcyBidWlsZCB3aXRoIGJvcmRlcnNpemUsIHJlbW92ZSB0aGUgb2Zmc2V0LlxyXG4gICAgICAgICAgICAgICAgICBmb3IgKHZhciBfajIgPSAwOyBfajIgPCBjb250Lm5ydmVydHM7ICsrX2oyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udC5ydmVydHNbX2oyICogNF0gLT0gYm9yZGVyU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICBjb250LnJ2ZXJ0c1tfajIgKiA0ICsgMl0gLT0gYm9yZGVyU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnQucmVnID0gcmVnO1xyXG4gICAgICAgICAgICAgICAgY29udC5hcmVhID0gYXJlYTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIE1lcmdlIGhvbGVzIGlmIG5lZWRlZC5cclxuXHJcblxyXG4gICAgICAgIGlmIChjc2V0LmNvbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIC8vIENhbGN1bGF0ZSB3aW5kaW5nIG9mIGFsbCBwb2x5Z29ucy5cclxuICAgICAgICAgIHZhciB3aW5kaW5nID0gbmV3IEFycmF5KGNzZXQuY29udHMubGVuZ3RoKTtcclxuICAgICAgICAgIHZhciBuaG9sZXMgPSAwO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgY3NldC5jb250cy5sZW5ndGg7ICsrX2kxMCkge1xyXG4gICAgICAgICAgICB2YXIgX2NvbnQgPSBjc2V0LmNvbnRzW19pMTBdOyAvLyBJZiB0aGUgY29udG91ciBpcyB3b3VuZCBiYWNrd2FyZHMsIGl0IGlzIGEgaG9sZS5cclxuXHJcbiAgICAgICAgICAgIHdpbmRpbmdbX2kxMF0gPSBSZWNhc3RDb250b3VyLmNhbGNBcmVhT2ZQb2x5Z29uMkQoX2NvbnQudmVydHMsIF9jb250Lm52ZXJ0cykgPCAwID8gLTEgOiAxO1xyXG4gICAgICAgICAgICBpZiAod2luZGluZ1tfaTEwXSA8IDApIG5ob2xlcysrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChuaG9sZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIENvbGxlY3Qgb3V0bGluZSBjb250b3VyIGFuZCBob2xlcyBjb250b3VycyBwZXIgcmVnaW9uLlxyXG4gICAgICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCB0aGVyZSBpcyBvbmUgb3V0bGluZSBhbmQgbXVsdGlwbGUgaG9sZXMuXHJcbiAgICAgICAgICAgIHZhciBucmVnaW9ucyA9IGNoZi5tYXhSZWdpb25zICsgMTtcclxuICAgICAgICAgICAgdmFyIHJlZ2lvbnMgPSBuZXcgQXJyYXkobnJlZ2lvbnMpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2kxMSA9IDA7IF9pMTEgPCBucmVnaW9uczsgX2kxMSsrKSB7XHJcbiAgICAgICAgICAgICAgcmVnaW9uc1tfaTExXSA9IG5ldyBDb250b3VyUmVnaW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pMTIgPSAwOyBfaTEyIDwgY3NldC5jb250cy5sZW5ndGg7ICsrX2kxMikge1xyXG4gICAgICAgICAgICAgIHZhciBfY29udDIgPSBjc2V0LmNvbnRzW19pMTJdOyAvLyBQb3NpdGl2ZWx5IHdvdWxkIGNvbnRvdXJzIGFyZSBvdXRsaW5lcywgbmVnYXRpdmUgaG9sZXMuXHJcblxyXG4gICAgICAgICAgICAgIGlmICh3aW5kaW5nW19pMTJdID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lvbnNbX2NvbnQyLnJlZ10ub3V0bGluZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwicmNCdWlsZENvbnRvdXJzOiBNdWx0aXBsZSBvdXRsaW5lcyBmb3IgcmVnaW9uIFwiICsgX2NvbnQyLnJlZyArIFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZWdpb25zW19jb250Mi5yZWddLm91dGxpbmUgPSBfY29udDI7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2NvbnQyLnJlZ10ubmhvbGVzKys7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTEzID0gMDsgX2kxMyA8IG5yZWdpb25zOyBfaTEzKyspIHtcclxuICAgICAgICAgICAgICBpZiAocmVnaW9uc1tfaTEzXS5uaG9sZXMgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByZWdpb25zW19pMTNdLmhvbGVzID0gbmV3IENvbnRvdXJIb2xlW3JlZ2lvbnNbX2kxM10ubmhvbGVzXSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIG5oID0gMDsgbmggPCByZWdpb25zW19pMTNdLm5ob2xlczsgbmgrKykge1xyXG4gICAgICAgICAgICAgICAgICByZWdpb25zW19pMTNdLmhvbGVzW25oXSA9IG5ldyBDb250b3VySG9sZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJlZ2lvbnNbX2kxM10ubmhvbGVzID0gMDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwgY3NldC5jb250cy5sZW5ndGg7ICsrX2kxNCkge1xyXG4gICAgICAgICAgICAgIHZhciBfY29udDMgPSBjc2V0LmNvbnRzW19pMTRdO1xyXG4gICAgICAgICAgICAgIHZhciBfcmVnID0gcmVnaW9uc1tfY29udDMucmVnXTtcclxuICAgICAgICAgICAgICBpZiAod2luZGluZ1tfaTE0XSA8IDApIF9yZWcuaG9sZXNbX3JlZy5uaG9sZXMrK10uY29udG91ciA9IF9jb250MztcclxuICAgICAgICAgICAgfSAvLyBGaW5hbGx5IG1lcmdlIGVhY2ggcmVnaW9ucyBob2xlcyBpbnRvIHRoZSBvdXRsaW5lLlxyXG5cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pMTUgPSAwOyBfaTE1IDwgbnJlZ2lvbnM7IF9pMTUrKykge1xyXG4gICAgICAgICAgICAgIHZhciBfcmVnMiA9IHJlZ2lvbnNbX2kxNV07XHJcbiAgICAgICAgICAgICAgaWYgKF9yZWcyLm5ob2xlcyA9PSAwKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9yZWcyLm91dGxpbmUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VSZWdpb25Ib2xlcyhjdHgsIF9yZWcyKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIHJlZ2lvbiBkb2VzIG5vdCBoYXZlIGFuIG91dGxpbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGNvbnRvdXIgYmVjYW9tZXMgc2VsZm92ZXJsYXBwaW5nIGJlY2F1c2Ugb2ZcclxuICAgICAgICAgICAgICAgIC8vIHRvbyBhZ2dyZXNzaXZlIHNpbXBsaWZpY2F0aW9uIHNldHRpbmdzLlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJyY0J1aWxkQ29udG91cnM6IEJhZCBvdXRsaW5lIGZvciByZWdpb24gXCIgKyBfaTE1ICsgXCIsIGNvbnRvdXIgc2ltcGxpZmljYXRpb24gaXMgbGlrZWx5IHRvbyBhZ2dyZXNzaXZlLlwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJCVUlMRF9DT05UT1VSU1wiKTtcclxuICAgICAgICByZXR1cm4gY3NldDtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBSZWNhc3RDb250b3VyO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdENvbnRvdXIsIFwiQ29udG91clJlZ2lvblwiLCAoX3RlbXAkMiA9IGZ1bmN0aW9uIENvbnRvdXJSZWdpb24oKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29udG91clJlZ2lvbik7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib3V0bGluZVwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhvbGVzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJuaG9sZXNcIiwgdm9pZCAwKTtcclxuICB9LCBfdGVtcCQyKSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb250b3VyLCBcIkNvbnRvdXJIb2xlXCIsIChfdGVtcDIkMiA9IGZ1bmN0aW9uIENvbnRvdXJIb2xlKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbnRvdXJIb2xlKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZWZ0bW9zdFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1pbnhcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtaW56XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29udG91clwiLCB2b2lkIDApO1xyXG4gIH0sIF90ZW1wMiQyKSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RDb250b3VyLCBcIlBvdGVudGlhbERpYWdvbmFsXCIsIChfdGVtcDMgPSBmdW5jdGlvbiBQb3RlbnRpYWxEaWFnb25hbCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3RlbnRpYWxEaWFnb25hbCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGlzdFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRcIiwgdm9pZCAwKTtcclxuICB9LCBfdGVtcDMpKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKiBDb250YWlucyB0cmlhbmdsZSBtZXNoZXMgdGhhdCByZXByZXNlbnQgZGV0YWlsZWQgaGVpZ2h0IGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBwb2x5Z29ucyBpbiBpdHMgYXNzb2NpYXRlZCBwb2x5Z29uIG1lc2ggb2JqZWN0LiAqL1xyXG4gIHZhciBQb2x5TWVzaERldGFpbCA9IGZ1bmN0aW9uIFBvbHlNZXNoRGV0YWlsKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvbHlNZXNoRGV0YWlsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNoZXNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmlzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJubWVzaGVzXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm52ZXJ0c1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJudHJpc1wiLCAwKTtcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBhcnJheWNvcHkkMihvbmUsIG9uZVN0YXJ0LCB0d28sIHR3b1N0YXJ0LCBsZW4pIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgdHdvW3R3b1N0YXJ0ICsgaV0gPSBvbmVbb25lU3RhcnQgKyBpXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBIZWlnaHRQYXRjaCA9IGZ1bmN0aW9uIEhlaWdodFBhdGNoKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhlaWdodFBhdGNoKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ4bWluXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInltaW5cIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2lkdGhcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaGVpZ2h0XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRhdGFcIiwgW10pO1xyXG4gIH07XHJcblxyXG4gIHZhciBSZWNhc3RNZXNoRGV0YWlsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlY2FzdE1lc2hEZXRhaWwoKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZWNhc3RNZXNoRGV0YWlsKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0TWVzaERldGFpbCwgW3tcclxuICAgICAga2V5OiBcIm1lcmdlUG9seU1lc2hEZXRhaWxzXCIsXHJcbiAgICAgIC8vLyBAc2VlIHJjQWxsb2NQb2x5TWVzaERldGFpbCwgcmNQb2x5TWVzaERldGFpbFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbWVyZ2VQb2x5TWVzaERldGFpbHMoY3R4LCBtZXNoZXMsIG5tZXNoZXMpIHtcclxuICAgICAgICBtZXNoID0gbmV3IFBvbHlNZXNoRGV0YWlsKCk7XHJcbiAgICAgICAgY3R4LnN0YXJ0VGltZXIoXCJNRVJHRV9QT0xZTUVTSERFVEFJTFwiKTtcclxuICAgICAgICB2YXIgbWF4VmVydHMgPSAwO1xyXG4gICAgICAgIHZhciBtYXhUcmlzID0gMDtcclxuICAgICAgICB2YXIgbWF4TWVzaGVzID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBubWVzaGVzOyArK2kpIHtcclxuICAgICAgICAgIGlmIChtZXNoZXNbaV0gPT0gbnVsbCkgY29udGludWU7XHJcbiAgICAgICAgICBtYXhWZXJ0cyArPSBtZXNoZXNbaV0ubnZlcnRzO1xyXG4gICAgICAgICAgbWF4VHJpcyArPSBtZXNoZXNbaV0ubnRyaXM7XHJcbiAgICAgICAgICBtYXhNZXNoZXMgKz0gbWVzaGVzW2ldLm5tZXNoZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtZXNoLm5tZXNoZXMgPSAwO1xyXG4gICAgICAgIG1lc2gubWVzaGVzID0gbmV3IEFycmF5KG1heE1lc2hlcyAqIDQpO1xyXG4gICAgICAgIG1lc2gubnRyaXMgPSAwO1xyXG4gICAgICAgIG1lc2gudHJpcyA9IG5ldyBBcnJheShtYXhUcmlzICogNCk7XHJcbiAgICAgICAgbWVzaC5udmVydHMgPSAwO1xyXG4gICAgICAgIG1lc2gudmVydHMgPSBuZXcgQXJyYXkobWF4VmVydHMgKiAzKTsgLy8gTWVyZ2UgZGF0YXMuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBubWVzaGVzOyArK19pKSB7XHJcbiAgICAgICAgICB2YXIgZG0gPSBtZXNoZXNbX2ldO1xyXG4gICAgICAgICAgaWYgKGRtID09IG51bGwpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZG0ubm1lc2hlczsgKytqKSB7XHJcbiAgICAgICAgICAgIHZhciBkc3QgPSBtZXNoLm5tZXNoZXMgKiA0O1xyXG4gICAgICAgICAgICB2YXIgc3JjID0gaiAqIDQ7XHJcbiAgICAgICAgICAgIG1lc2gubWVzaGVzW2RzdCArIDBdID0gbWVzaC5udmVydHMgKyBkbS5tZXNoZXNbc3JjICsgMF07XHJcbiAgICAgICAgICAgIG1lc2gubWVzaGVzW2RzdCArIDFdID0gZG0ubWVzaGVzW3NyYyArIDFdO1xyXG4gICAgICAgICAgICBtZXNoLm1lc2hlc1tkc3QgKyAyXSA9IG1lc2gubnRyaXMgKyBkbS5tZXNoZXNbc3JjICsgMl07XHJcbiAgICAgICAgICAgIG1lc2gubWVzaGVzW2RzdCArIDNdID0gZG0ubWVzaGVzW3NyYyArIDNdO1xyXG4gICAgICAgICAgICBtZXNoLm5tZXNoZXMrKztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGRtLm52ZXJ0czsgKytrKSB7XHJcbiAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KG1lc2gudmVydHMsIG1lc2gubnZlcnRzICogMywgZG0udmVydHMsIGsgKiAzKTtcclxuICAgICAgICAgICAgbWVzaC5udmVydHMrKztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfayA9IDA7IF9rIDwgZG0ubnRyaXM7ICsrX2spIHtcclxuICAgICAgICAgICAgbWVzaC50cmlzW21lc2gubnRyaXMgKiA0ICsgMF0gPSBkbS50cmlzW19rICogNCArIDBdO1xyXG4gICAgICAgICAgICBtZXNoLnRyaXNbbWVzaC5udHJpcyAqIDQgKyAxXSA9IGRtLnRyaXNbX2sgKiA0ICsgMV07XHJcbiAgICAgICAgICAgIG1lc2gudHJpc1ttZXNoLm50cmlzICogNCArIDJdID0gZG0udHJpc1tfayAqIDQgKyAyXTtcclxuICAgICAgICAgICAgbWVzaC50cmlzW21lc2gubnRyaXMgKiA0ICsgM10gPSBkbS50cmlzW19rICogNCArIDNdO1xyXG4gICAgICAgICAgICBtZXNoLm50cmlzKys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguc3RvcFRpbWVyKFwiTUVSR0VfUE9MWU1FU0hERVRBSUxcIik7XHJcbiAgICAgICAgcmV0dXJuIG1lc2g7XHJcbiAgICAgIH1cclxuICAgIH1dLCBbe1xyXG4gICAgICBrZXk6IFwidmRpc3RTcTJfM1wiLFxyXG4gICAgICAvLyBNYXggdHJpcyBmb3IgZGVsYXVuYXkgaXMgMm4tMi1rIChuPW51bSB2ZXJ0cywgaz1udW0gaHVsbCB2ZXJ0cykuXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZGlzdFNxMl8zKHZlcnRzLCBwLCBxKSB7XHJcbiAgICAgICAgdmFyIGR4ID0gdmVydHNbcSArIDBdIC0gdmVydHNbcCArIDBdO1xyXG4gICAgICAgIHZhciBkeSA9IHZlcnRzW3EgKyAyXSAtIHZlcnRzW3AgKyAyXTtcclxuICAgICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZkaXN0MlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmRpc3QyKHZlcnRzLCBwLCBxKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChSZWNhc3RNZXNoRGV0YWlsLnZkaXN0U3EyXzModmVydHMsIHAsIHEpKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidmRpc3RTcTJfMlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmRpc3RTcTJfMihwLCBxKSB7XHJcbiAgICAgICAgdmFyIGR4ID0gcVswXSAtIHBbMF07XHJcbiAgICAgICAgdmFyIGR5ID0gcVsyXSAtIHBbMl07XHJcbiAgICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2ZGlzdDJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZkaXN0MihwLCBxKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChSZWNhc3RNZXNoRGV0YWlsLnZkaXN0U3EyXzIocCwgcSkpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2ZGlzdFNxMlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdmRpc3RTcTIocCwgdmVydHMsIHEpIHtcclxuICAgICAgICBkeCA9IHZlcnRzW3EgKyAwXSAtIHBbMF07XHJcbiAgICAgICAgZHkgPSB2ZXJ0c1txICsgMl0gLSBwWzJdO1xyXG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidmRpc3QyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZGlzdDIocCwgdmVydHMsIHEpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KFJlY2FzdE1lc2hEZXRhaWwudmRpc3RTcTJfMyhwLCB2ZXJ0cywgcSkpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ2Y3Jvc3MyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB2Y3Jvc3MyKHZlcnRzLCBwMSwgcDIsIHAzKSB7XHJcbiAgICAgICAgdTEgPSB2ZXJ0c1twMiArIDBdIC0gdmVydHNbcDEgKyAwXTtcclxuICAgICAgICB2MSA9IHZlcnRzW3AyICsgMl0gLSB2ZXJ0c1twMSArIDJdO1xyXG4gICAgICAgIHUyID0gdmVydHNbcDMgKyAwXSAtIHZlcnRzW3AxICsgMF07XHJcbiAgICAgICAgdjIgPSB2ZXJ0c1twMyArIDJdIC0gdmVydHNbcDEgKyAyXTtcclxuICAgICAgICByZXR1cm4gdTEgKiB2MiAtIHYxICogdTI7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInZjcm9zczJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHZjcm9zczIocDEsIHAyLCBwMykge1xyXG4gICAgICAgIHUxID0gcDJbMF0gLSBwMVswXTtcclxuICAgICAgICB2MSA9IHAyWzJdIC0gcDFbMl07XHJcbiAgICAgICAgdTIgPSBwM1swXSAtIHAxWzBdO1xyXG4gICAgICAgIHYyID0gcDNbMl0gLSBwMVsyXTtcclxuICAgICAgICByZXR1cm4gdTEgKiB2MiAtIHYxICogdTI7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNpcmN1bUNpcmNsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2lyY3VtQ2lyY2xlKHZlcnRzLCBwMSwgcDIsIHAzLCBjLCByKSB7XHJcbiAgICAgICAgRVBTID0gMWUtNjsgLy8gQ2FsY3VsYXRlIHRoZSBjaXJjbGUgcmVsYXRpdmUgdG8gcDEsIHRvIGFzb21lIHByZWNpc2lvbiBpc3N1ZXMuXHJcblxyXG4gICAgICAgIHYxID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIHYyID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIHYzID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5zdWIodjIsIHZlcnRzLCBwMiwgcDEpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5zdWIodjMsIHZlcnRzLCBwMywgcDEpO1xyXG4gICAgICAgIGNwID0gdmNyb3NzMih2MSwgdjIsIHYzKTtcclxuXHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGNwKSA+IEVQUykge1xyXG4gICAgICAgICAgdjFTcSA9IFJlY2FzdE1lc2hEZXRhaWwudmRvdDIodjEsIHYxKTtcclxuICAgICAgICAgIHYyU3EgPSBSZWNhc3RNZXNoRGV0YWlsLnZkb3QyKHYyLCB2Mik7XHJcbiAgICAgICAgICB2M1NxID0gUmVjYXN0TWVzaERldGFpbC52ZG90Mih2MywgdjMpO1xyXG4gICAgICAgICAgY1swXSA9ICh2MVNxICogKHYyWzJdIC0gdjNbMl0pICsgdjJTcSAqICh2M1syXSAtIHYxWzJdKSArIHYzU3EgKiAodjFbMl0gLSB2MlsyXSkpIC8gKDIgKiBjcCk7XHJcbiAgICAgICAgICBjWzFdID0gMDtcclxuICAgICAgICAgIGNbMl0gPSAodjFTcSAqICh2M1swXSAtIHYyWzBdKSArIHYyU3EgKiAodjFbMF0gLSB2M1swXSkgKyB2M1NxICogKHYyWzBdIC0gdjFbMF0pKSAvICgyICogY3ApO1xyXG4gICAgICAgICAgci5zZXQoUmVjYXN0TWVzaERldGFpbC52ZGlzdDIoYywgdjEpKTtcclxuICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5hZGQoYywgYywgdmVydHMsIHAxKTtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHkoYywgdmVydHMsIHAxKTtcclxuICAgICAgICByLnNldCgwKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImRpc3RQdFRyaVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdFB0VHJpKHAsIHZlcnRzLCBhLCBiLCBjKSB7XHJcbiAgICAgICAgdmFyIHYwID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIHZhciB2MSA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICB2YXIgdjIgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgUmVjYXN0VmVjdG9ycyQxLnN1YkEodjAsIHZlcnRzLCBjLCBhKTtcclxuICAgICAgICBSZWNhc3RWZWN0b3JzJDEuc3ViQSh2MSwgdmVydHMsIGIsIGEpO1xyXG4gICAgICAgIFJlY2FzdFZlY3RvcnMkMS5zdWJCKHYyLCBwLCB2ZXJ0cywgYSk7XHJcbiAgICAgICAgdmFyIGRvdDAwID0gUmVjYXN0TWVzaERldGFpbC52ZG90Mih2MCwgdjApO1xyXG4gICAgICAgIHZhciBkb3QwMSA9IFJlY2FzdE1lc2hEZXRhaWwudmRvdDIodjAsIHYxKTtcclxuICAgICAgICB2YXIgZG90MDIgPSBSZWNhc3RNZXNoRGV0YWlsLnZkb3QyKHYwLCB2Mik7XHJcbiAgICAgICAgdmFyIGRvdDExID0gUmVjYXN0TWVzaERldGFpbC52ZG90Mih2MSwgdjEpO1xyXG4gICAgICAgIHZhciBkb3QxMiA9IFJlY2FzdE1lc2hEZXRhaWwudmRvdDIodjEsIHYyKTsgLy8gQ29tcHV0ZSBiYXJ5Y2VudHJpYyBjb29yZGluYXRlc1xyXG5cclxuICAgICAgICB2YXIgaW52RGVub20gPSAxLjAgLyAoZG90MDAgKiBkb3QxMSAtIGRvdDAxICogZG90MDEpO1xyXG4gICAgICAgIHZhciB1ID0gKGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSAqIGludkRlbm9tO1xyXG4gICAgICAgIHZhciB2ID0gKGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSAqIGludkRlbm9tOyAvLyBJZiBwb1BvbHkgbGllcyBpbnNpZGUgdGhlIHRyaWFuZ2xlLCByZXR1cm4gaW50ZXJwb2xhdGVkIHktY29vcmQuXHJcblxyXG4gICAgICAgIHZhciBFUFMgPSAxZS00O1xyXG5cclxuICAgICAgICBpZiAodSA+PSAtRVBTICYmIHYgPj0gLUVQUyAmJiB1ICsgdiA8PSAxICsgRVBTKSB7XHJcbiAgICAgICAgICB2YXIgeSA9IHZlcnRzW2EgKyAxXSArIHYwWzFdICogdSArIHYxWzFdICogdjtcclxuICAgICAgICAgIHJldHVybiBNYXRoLmFicyh5IC0gcFsxXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlzdGFuY2VQdFNlZ1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdGFuY2VQdFNlZyh2ZXJ0cywgcHQsIHAsIHEpIHtcclxuICAgICAgICB2YXIgcHF4ID0gdmVydHNbcSArIDBdIC0gdmVydHNbcCArIDBdO1xyXG4gICAgICAgIHZhciBwcXkgPSB2ZXJ0c1txICsgMV0gLSB2ZXJ0c1twICsgMV07XHJcbiAgICAgICAgdmFyIHBxeiA9IHZlcnRzW3EgKyAyXSAtIHZlcnRzW3AgKyAyXTtcclxuICAgICAgICB2YXIgZHggPSB2ZXJ0c1twdCArIDBdIC0gdmVydHNbcCArIDBdO1xyXG4gICAgICAgIHZhciBkeSA9IHZlcnRzW3B0ICsgMV0gLSB2ZXJ0c1twICsgMV07XHJcbiAgICAgICAgdmFyIGR6ID0gdmVydHNbcHQgKyAyXSAtIHZlcnRzW3AgKyAyXTtcclxuICAgICAgICB2YXIgZCA9IHBxeCAqIHBxeCArIHBxeSAqIHBxeSArIHBxeiAqIHBxejtcclxuICAgICAgICB2YXIgdCA9IHBxeCAqIGR4ICsgcHF5ICogZHkgKyBwcXogKiBkejtcclxuICAgICAgICBpZiAoZCA+IDApIHQgLz0gZDtcclxuICAgICAgICBpZiAodCA8IDApIHQgPSAwO2Vsc2UgaWYgKHQgPiAxKSB0ID0gMTtcclxuICAgICAgICBkeCA9IHZlcnRzW3AgKyAwXSArIHQgKiBwcXggLSB2ZXJ0c1twdCArIDBdO1xyXG4gICAgICAgIGR5ID0gdmVydHNbcCArIDFdICsgdCAqIHBxeSAtIHZlcnRzW3B0ICsgMV07XHJcbiAgICAgICAgZHogPSB2ZXJ0c1twICsgMl0gKyB0ICogcHF6IC0gdmVydHNbcHQgKyAyXTtcclxuICAgICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJkaXN0YW5jZVB0U2VnMmRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3RhbmNlUHRTZWcyZCh2ZXJ0cywgcHQsIHBvbHksIHAsIHEpIHtcclxuICAgICAgICB2YXIgcHF4ID0gcG9seVtxICsgMF0gLSBwb2x5W3AgKyAwXTtcclxuICAgICAgICB2YXIgcHF6ID0gcG9seVtxICsgMl0gLSBwb2x5W3AgKyAyXTtcclxuICAgICAgICB2YXIgZHggPSB2ZXJ0c1twdCArIDBdIC0gcG9seVtwICsgMF07XHJcbiAgICAgICAgdmFyIGR6ID0gdmVydHNbcHQgKyAyXSAtIHBvbHlbcCArIDJdO1xyXG4gICAgICAgIHZhciBkID0gcHF4ICogcHF4ICsgcHF6ICogcHF6O1xyXG4gICAgICAgIHZhciB0ID0gcHF4ICogZHggKyBwcXogKiBkejtcclxuICAgICAgICBpZiAoZCA+IDApIHQgLz0gZDtcclxuICAgICAgICBpZiAodCA8IDApIHQgPSAwO2Vsc2UgaWYgKHQgPiAxKSB0ID0gMTtcclxuICAgICAgICBkeCA9IHBvbHlbcCArIDBdICsgdCAqIHBxeCAtIHZlcnRzW3B0ICsgMF07XHJcbiAgICAgICAgZHogPSBwb2x5W3AgKyAyXSArIHQgKiBwcXogLSB2ZXJ0c1twdCArIDJdO1xyXG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHogKiBkejtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlzdFRvVHJpTWVzaFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdFRvVHJpTWVzaChwLCB2ZXJ0cywgbnZlcnRzLCB0cmlzLCBudHJpcykge1xyXG4gICAgICAgIHZhciBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudHJpczsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgdmEgPSB0cmlzW2kgKiA0ICsgMF0gKiAzO1xyXG4gICAgICAgICAgdmFyIHZiID0gdHJpc1tpICogNCArIDFdICogMztcclxuICAgICAgICAgIHZhciB2YyA9IHRyaXNbaSAqIDQgKyAyXSAqIDM7XHJcblxyXG4gICAgICAgICAgdmFyIF9kID0gUmVjYXN0TWVzaERldGFpbC5kaXN0UHRUcmkocCwgdmVydHMsIHZhLCB2YiwgdmMpO1xyXG5cclxuICAgICAgICAgIGlmIChfZCA8IGRtaW4pIGRtaW4gPSBfZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChkbWluID09IE51bWJlci5NQVhfVkFMVUUpIHJldHVybiAtMTtcclxuICAgICAgICByZXR1cm4gZG1pbjtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZGlzdFRvUG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzdFRvUG9seShudmVydCwgdmVydHMsIHApIHtcclxuICAgICAgICB2YXIgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICAgICAgdmFyIGMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kyID0gMCwgX2ogPSBudmVydCAtIDE7IF9pMiA8IG52ZXJ0OyBfaiA9IF9pMisrKSB7XHJcbiAgICAgICAgICB2YXIgdmkgPSBfaTIgKiAzO1xyXG4gICAgICAgICAgdmFyIHZqID0gX2ogKiAzO1xyXG4gICAgICAgICAgaWYgKHZlcnRzW3ZpICsgMl0gPiBwWzJdICE9IHZlcnRzW3ZqICsgMl0gPiBwWzJdICYmIHBbMF0gPCAodmVydHNbdmogKyAwXSAtIHZlcnRzW3ZpICsgMF0pICogKHBbMl0gLSB2ZXJ0c1t2aSArIDJdKSAvICh2ZXJ0c1t2aiArIDJdIC0gdmVydHNbdmkgKyAyXSkgKyB2ZXJ0c1t2aSArIDBdKSBjID0gIWM7XHJcbiAgICAgICAgICBkbWluID0gTWF0aC5taW4oZG1pbiwgUmVjYXN0TWVzaERldGFpbC5kaXN0YW5jZVB0U2VnMmQocCwgMCwgdmVydHMsIHZqLCB2aSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGMgPyAtZG1pbiA6IGRtaW47XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldEhlaWdodFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SGVpZ2h0KGZ4LCBmeSwgZnosIGNzLCBpY3MsIGNoLCByYWRpdXMsIGhwKSB7XHJcbiAgICAgICAgdmFyIGl4ID0gTWF0aC5mbG9vcihmeCAqIGljcyArIDAuMDEpO1xyXG4gICAgICAgIHZhciBpeiA9IE1hdGguZmxvb3IoZnogKiBpY3MgKyAwLjAxKTtcclxuICAgICAgICBpeCA9IFJlY2FzdENvbW1vbi5jbGFtcChpeCAtIGhwLnhtaW4sIDAsIGhwLndpZHRoIC0gMSk7XHJcbiAgICAgICAgaXogPSBSZWNhc3RDb21tb24uY2xhbXAoaXogLSBocC55bWluLCAwLCBocC5oZWlnaHQgLSAxKTtcclxuICAgICAgICB2YXIgaCA9IGhwLmRhdGFbaXggKyBpeiAqIGhwLndpZHRoXTtcclxuXHJcbiAgICAgICAgaWYgKGggPT0gUmVjYXN0TWVzaERldGFpbC5SQ19VTlNFVF9IRUlHSFQpIHtcclxuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGRhdGEgbWlnaHQgYmUgYmFkLlxyXG4gICAgICAgICAgLy8gV2FsayBhZGphY2VudCBjZWxscyBfaW4gYSBzcGlyYWwgdXAgdG8gJ3JhZGl1cycsIGFuZCBsb29rXHJcbiAgICAgICAgICAvLyBmb3IgYSBwaXhlbCB3aGljaCBoYXMgYSB2YWxpZCBoZWlnaHQuXHJcbiAgICAgICAgICB2YXIgeCA9IDEsXHJcbiAgICAgICAgICAgICAgeiA9IDAsXHJcbiAgICAgICAgICAgICAgX2R4ID0gMSxcclxuICAgICAgICAgICAgICBkeiA9IDA7XHJcbiAgICAgICAgICB2YXIgbWF4U2l6ZSA9IHJhZGl1cyAqIDIgKyAxO1xyXG4gICAgICAgICAgdmFyIG1heEl0ZXIgPSBtYXhTaXplICogbWF4U2l6ZSAtIDE7XHJcbiAgICAgICAgICB2YXIgbmV4dFJpbmdJdGVyU3RhcnQgPSA4O1xyXG4gICAgICAgICAgdmFyIG5leHRSaW5nSXRlcnMgPSAxNjtcclxuICAgICAgICAgIGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4SXRlcjsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBueCA9IGl4ICsgeDtcclxuICAgICAgICAgICAgdmFyIG56ID0gaXogKyB6O1xyXG5cclxuICAgICAgICAgICAgaWYgKG54ID49IDAgJiYgbnogPj0gMCAmJiBueCA8IGhwLndpZHRoICYmIG56IDwgaHAuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgdmFyIG5oID0gaHAuZGF0YVtueCArIG56ICogaHAud2lkdGhdO1xyXG5cclxuICAgICAgICAgICAgICBpZiAobmggIT0gUmVjYXN0TWVzaERldGFpbC5SQ19VTlNFVF9IRUlHSFQpIHtcclxuICAgICAgICAgICAgICAgIGQgPSBNYXRoLmFicyhuaCAqIGNoIC0gZnkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChkIDwgZG1pbikge1xyXG4gICAgICAgICAgICAgICAgICBoID0gbmg7XHJcbiAgICAgICAgICAgICAgICAgIGRtaW4gPSBkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBXZSBhcmUgc2VhcmNoaW5nIF9pbiBhIGdyaWQgd2hpY2ggbG9va3MgYXBwcm94aW1hdGVseSBsaWtlIHRoaXM6XHJcbiAgICAgICAgICAgIC8vICBfX19fX19fX19fXHJcbiAgICAgICAgICAgIC8vIHwyIF9fX19fXyAyfFxyXG4gICAgICAgICAgICAvLyB8IHwxIF9fIDF8IHxcclxuICAgICAgICAgICAgLy8gfCB8IHxfX3wgfCB8XHJcbiAgICAgICAgICAgIC8vIHwgfF9fX19fX3wgfFxyXG4gICAgICAgICAgICAvLyB8X19fX19fX19fX3xcclxuICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBmaW5kIHRoZSBiZXN0IGhlaWdodCBhcyBjbG9zZSB0byB0aGUgY2VudGVyIGNlbGwgYXMgcG9zc2libGUuIFRoaXMgbWVhbnMgdGhhdFxyXG4gICAgICAgICAgICAvLyBpZiB3ZSBmaW5kIGEgaGVpZ2h0IF9pbiBvbmUgb2YgdGhlIG5laWdoYm9yIGNlbGxzIHRvIHRoZSBjZW50ZXIsIHdlIGRvbid0IHdhbnQgdG9cclxuICAgICAgICAgICAgLy8gZXhwYW5kIGZ1cnRoZXIgb3V0IHRoYW4gdGhlIDggbmVpZ2hib3JzIC0gd2Ugd2FudCB0byBsaW1pdCBvdXIgc2VhcmNoIHRvIHRoZSBjbG9zZXN0XHJcbiAgICAgICAgICAgIC8vIG9mIHRoZXNlIFwicmluZ3NcIiwgYnV0IHRoZSBiZXN0IGhlaWdodCBfaW4gdGhlIHJpbmcuXHJcbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlLCB0aGUgY2VudGVyIGlzIGp1c3QgMSBjZWxsLiBXZSBjaGVja2VkIHRoYXQgYXQgdGhlIGVudHJhbmNlIHRvIHRoZSBmdW5jdGlvbi5cclxuICAgICAgICAgICAgLy8gVGhlIG5leHQgXCJyaW5nXCIgY29udGFpbnMgOCBjZWxscyAobWFya2VkIDEgYWJvdmUpLiBUaG9zZSBhcmUgYWxsIHRoZSBuZWlnaGJvcnMgdG8gdGhlIGNlbnRlciBjZWxsLlxyXG4gICAgICAgICAgICAvLyBUaGUgbmV4dCBvbmUgYWdhaW4gY29udGFpbnMgMTYgY2VsbHMgKG1hcmtlZCAyKS4gSW4gZ2VuZXJhbCBlYWNoIHJpbmcgaGFzIDggYWRkaXRpb25hbCBjZWxscywgd2hpY2hcclxuICAgICAgICAgICAgLy8gY2FuIGJlIHRob3VnaHQgb2YgYXMgYWRkaW5nIDIgY2VsbHMgYXJvdW5kIHRoZSBcImNlbnRlclwiIG9mIGVhY2ggc2lkZSB3aGVuIHdlIGV4cGFuZCB0aGUgcmluZy5cclxuICAgICAgICAgICAgLy8gSGVyZSB3ZSBkZXRlY3QgaWYgd2UgYXJlIGFib3V0IHRvIGVudGVyIHRoZSBuZXh0IHJpbmcsIGFuZCBpZiB3ZSBhcmUgYW5kIHdlIGhhdmUgZm91bmRcclxuICAgICAgICAgICAgLy8gYSBoZWlnaHQsIHdlIGFib3J0IHRoZSBzZWFyY2guXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGkgKyAxID09IG5leHRSaW5nSXRlclN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgaWYgKGggIT0gUmVjYXN0TWVzaERldGFpbC5SQ19VTlNFVF9IRUlHSFQpIGJyZWFrO1xyXG4gICAgICAgICAgICAgIG5leHRSaW5nSXRlclN0YXJ0ICs9IG5leHRSaW5nSXRlcnM7XHJcbiAgICAgICAgICAgICAgbmV4dFJpbmdJdGVycyArPSA4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoeCA9PSB6IHx8IHggPCAwICYmIHggPT0gLXogfHwgeCA+IDAgJiYgeCA9PSAxIC0geikge1xyXG4gICAgICAgICAgICAgIHZhciB0bXAgPSBfZHg7XHJcbiAgICAgICAgICAgICAgX2R4ID0gLWR6O1xyXG4gICAgICAgICAgICAgIGR6ID0gdG1wO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB4ICs9IF9keDtcclxuICAgICAgICAgICAgeiArPSBkejtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJmaW5kRWRnZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZEVkZ2UoZWRnZXMsIHMsIHQpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aCAvIDQ7IGkrKykge1xyXG4gICAgICAgICAgdmFyIGUgPSBpICogNDtcclxuICAgICAgICAgIGlmIChlZGdlc1tlICsgMF0gPT0gcyAmJiBlZGdlc1tlICsgMV0gPT0gdCB8fCBlZGdlc1tlICsgMF0gPT0gdCAmJiBlZGdlc1tlICsgMV0gPT0gcykgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gRVZfVU5ERUY7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZEVkZ2VcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEVkZ2UoY3R4LCBlZGdlcywgbWF4RWRnZXMsIHMsIHQsIGwsIHIpIHtcclxuICAgICAgICBpZiAoZWRnZXMubGVuZ3RoIC8gNCA+PSBtYXhFZGdlcykge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oXCJhZGRFZGdlOiBUb28gbWFueSBlZGdlcyAoXCIgKyBlZGdlcy5sZW5ndGggLyA0ICsgXCIvXCIgKyBtYXhFZGdlcyArIFwiKS5cIik7XHJcbiAgICAgICAgfSAvLyBBZGQgZWRnZSBpZiBub3QgYWxyZWFkeSBfaW4gdGhlIHRyaWFuZ3VsYXRpb24uXHJcblxyXG5cclxuICAgICAgICB2YXIgZSA9IGZpbmRFZGdlKGVkZ2VzLCBzLCB0KTtcclxuXHJcbiAgICAgICAgaWYgKGUgPT0gRVZfVU5ERUYpIHtcclxuICAgICAgICAgIGVkZ2VzLnB1c2gocyk7XHJcbiAgICAgICAgICBlZGdlcy5wdXNoKHQpO1xyXG4gICAgICAgICAgZWRnZXMucHVzaChsKTtcclxuICAgICAgICAgIGVkZ2VzLnB1c2gocik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ1cGRhdGVMZWZ0RmFjZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTGVmdEZhY2UoZWRnZXMsIGUsIHMsIHQsIGYpIHtcclxuICAgICAgICBpZiAoZWRnZXNbZSArIDBdID09IHMgJiYgZWRnZXNbZSArIDFdID09IHQgJiYgZWRnZXNbZSArIDJdID09IEVWX1VOREVGKSBlZGdlcy5zZXQoZSArIDIsIGYpO2Vsc2UgaWYgKGVkZ2VzW2UgKyAxXSA9PSBzICYmIGVkZ2VzW2UgKyAwXSA9PSB0ICYmIGVkZ2VzW2UgKyAzXSA9PSBFVl9VTkRFRikgZWRnZXMuc2V0KGUgKyAzLCBmKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwib3ZlcmxhcFNlZ1NlZzJkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVybGFwU2VnU2VnMmQodmVydHMsIGEsIGIsIGMsIGQpIHtcclxuICAgICAgICBhMSA9IHZjcm9zczIodmVydHMsIGEsIGIsIGQpO1xyXG4gICAgICAgIGEyID0gdmNyb3NzMih2ZXJ0cywgYSwgYiwgYyk7XHJcblxyXG4gICAgICAgIGlmIChhMSAqIGEyIDwgMC4wKSB7XHJcbiAgICAgICAgICBhMyA9IHZjcm9zczIodmVydHMsIGMsIGQsIGEpO1xyXG4gICAgICAgICAgYTQgPSBhMyArIGEyIC0gYTE7XHJcbiAgICAgICAgICBpZiAoYTMgKiBhNCA8IDAuMCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm92ZXJsYXBFZGdlc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3ZlcmxhcEVkZ2VzKHB0cywgZWRnZXMsIHMxLCB0MSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWRnZXMubGVuZ3RoIC8gNDsgKytpKSB7XHJcbiAgICAgICAgICB2YXIgczAgPSBlZGdlc1tpICogNCArIDBdO1xyXG4gICAgICAgICAgdmFyIHQwID0gZWRnZXNbaSAqIDQgKyAxXTsgLy8gU2FtZSBvciBjb25uZWN0ZWQgZWRnZXMgZG8gbm90IG92ZXJsYXAuXHJcblxyXG4gICAgICAgICAgaWYgKHMwID09IHMxIHx8IHMwID09IHQxIHx8IHQwID09IHMxIHx8IHQwID09IHQxKSBjb250aW51ZTtcclxuICAgICAgICAgIGlmIChvdmVybGFwU2VnU2VnMmQocHRzLCBzMCAqIDMsIHQwICogMywgczEgKiAzLCB0MSAqIDMpKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY29tcGxldGVGYWNldFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY29tcGxldGVGYWNldChjdHgsIHB0cywgbnB0cywgZWRnZXMsIG1heEVkZ2VzLCBuZmFjZXMsIGUpIHtcclxuICAgICAgICBFUFMgPSAxZS01O1xyXG4gICAgICAgIHZhciBlZGdlID0gZSAqIDQ7IC8vIENhY2hlIHMgYW5kIHQuXHJcblxyXG4gICAgICAgIHZhciBzLCB0O1xyXG5cclxuICAgICAgICBpZiAoZWRnZXNbZWRnZSArIDJdID09IEVWX1VOREVGKSB7XHJcbiAgICAgICAgICBzID0gZWRnZXNbZWRnZSArIDBdO1xyXG4gICAgICAgICAgdCA9IGVkZ2VzW2VkZ2UgKyAxXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVkZ2VzW2VkZ2UgKyAzXSA9PSBFVl9VTkRFRikge1xyXG4gICAgICAgICAgcyA9IGVkZ2VzW2VkZ2UgKyAxXTtcclxuICAgICAgICAgIHQgPSBlZGdlc1tlZGdlICsgMF07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIEVkZ2UgYWxyZWFkeSBjb21wbGV0ZWQuXHJcbiAgICAgICAgICByZXR1cm4gbmZhY2VzO1xyXG4gICAgICAgIH0gLy8gRmluZCBiZXN0IHBvUG9seSBvbiBsZWZ0IG9mIGVkZ2UuXHJcblxyXG5cclxuICAgICAgICB2YXIgcHQgPSBucHRzO1xyXG4gICAgICAgIHZhciBjID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIHZhciByID0gbmV3IEF0b21pY1JlZmVyZW5jZSgtMSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHUgPSAwOyB1IDwgbnB0czsgKyt1KSB7XHJcbiAgICAgICAgICBpZiAodSA9PSBzIHx8IHUgPT0gdCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgaWYgKHZjcm9zczIocHRzLCBzICogMywgdCAqIDMsIHUgKiAzKSA+IEVQUykge1xyXG4gICAgICAgICAgICBpZiAoci5nZXQoKSA8IDApIHtcclxuICAgICAgICAgICAgICAvLyBUaGUgY2lyY2xlIGlzIG5vdCB1cGRhdGVkIHlldCwgZG8gaXQgbm93LlxyXG4gICAgICAgICAgICAgIHB0ID0gdTtcclxuICAgICAgICAgICAgICBjaXJjdW1DaXJjbGUocHRzLCBzICogMywgdCAqIDMsIHUgKiAzLCBjLCByKTtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZCA9IFJlY2FzdE1lc2hEZXRhaWwudmRpc3QyKGMsIHB0cywgdSAqIDMpO1xyXG4gICAgICAgICAgICB0b2wgPSAwLjAwMTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkID4gci5nZXQoKSAqICgxICsgdG9sKSkge1xyXG4gICAgICAgICAgICAgIC8vIE91dHNpZGUgY3VycmVudCBjaXJjdW1jaXJjbGUsIHNraXAuXHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZCA8IHIuZ2V0KCkgKiAoMSAtIHRvbCkpIHtcclxuICAgICAgICAgICAgICAvLyBJbnNpZGUgc2FmZSBjaXJjdW1jaXJjbGUsIHVwZGF0ZSBjaXJjbGUuXHJcbiAgICAgICAgICAgICAgcHQgPSB1O1xyXG4gICAgICAgICAgICAgIGNpcmN1bUNpcmNsZShwdHMsIHMgKiAzLCB0ICogMywgdSAqIDMsIGMsIHIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIEluc2lkZSBlcHNpbG9uIGNpcmN1bSBjaXJjbGUsIGRvIGV4dHJhIHRlc3RzIHRvIG1ha2Ugc3VyZSB0aGUgZWRnZSBpcyB2YWxpZC5cclxuICAgICAgICAgICAgICAvLyBzLXUgYW5kIHQtdSBjYW5ub3Qgb3ZlcmxhcCB3aXRoIHMtcHQgbm9yIHQtcHQgaWYgdGhleSBleGlzdHMuXHJcbiAgICAgICAgICAgICAgaWYgKG92ZXJsYXBFZGdlcyhwdHMsIGVkZ2VzLCBzLCB1KSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgaWYgKG92ZXJsYXBFZGdlcyhwdHMsIGVkZ2VzLCB0LCB1KSkgY29udGludWU7IC8vIEVkZ2UgaXMgdmFsaWQuXHJcblxyXG4gICAgICAgICAgICAgIHB0ID0gdTtcclxuICAgICAgICAgICAgICBjaXJjdW1DaXJjbGUocHRzLCBzICogMywgdCAqIDMsIHUgKiAzLCBjLCByKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gQWRkIG5ldyB0cmlhbmdsZSBvciB1cGRhdGUgZWRnZSBpbmZvIGlmIHMtdCBpcyBvbiBodWxsLlxyXG5cclxuXHJcbiAgICAgICAgaWYgKHB0IDwgbnB0cykge1xyXG4gICAgICAgICAgLy8gVXBkYXRlIGZhY2UgaW5mb3JtYXRpb24gb2YgZWRnZSBiZWluZyBjb21wUG9seWVkLlxyXG4gICAgICAgICAgdXBkYXRlTGVmdEZhY2UoZWRnZXMsIGUgKiA0LCBzLCB0LCBuZmFjZXMpOyAvLyBBZGQgbmV3IGVkZ2Ugb3IgdXBkYXRlIGZhY2UgaW5mbyBvZiBvbGQgZWRnZS5cclxuXHJcbiAgICAgICAgICBlID0gZmluZEVkZ2UoZWRnZXMsIHB0LCBzKTtcclxuICAgICAgICAgIGlmIChlID09IEVWX1VOREVGKSBhZGRFZGdlKGN0eCwgZWRnZXMsIG1heEVkZ2VzLCBwdCwgcywgbmZhY2VzLCBFVl9VTkRFRik7ZWxzZSB1cGRhdGVMZWZ0RmFjZShlZGdlcywgZSAqIDQsIHB0LCBzLCBuZmFjZXMpOyAvLyBBZGQgbmV3IGVkZ2Ugb3IgdXBkYXRlIGZhY2UgaW5mbyBvZiBvbGQgZWRnZS5cclxuXHJcbiAgICAgICAgICBlID0gZmluZEVkZ2UoZWRnZXMsIHQsIHB0KTtcclxuICAgICAgICAgIGlmIChlID09IEVWX1VOREVGKSBhZGRFZGdlKGN0eCwgZWRnZXMsIG1heEVkZ2VzLCB0LCBwdCwgbmZhY2VzLCBFVl9VTkRFRik7ZWxzZSB1cGRhdGVMZWZ0RmFjZShlZGdlcywgZSAqIDQsIHQsIHB0LCBuZmFjZXMpO1xyXG4gICAgICAgICAgbmZhY2VzKys7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHVwZGF0ZUxlZnRGYWNlKGVkZ2VzLCBlICogNCwgcywgdCwgRVZfSFVMTCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmZhY2VzO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJkZWxhdW5heUh1bGxcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGF1bmF5SHVsbChjdHgsIG5wdHMsIHB0cywgbmh1bGwsIGh1bGwsIHRyaXMpIHtcclxuICAgICAgICB2YXIgbmZhY2VzID0gMDtcclxuICAgICAgICB2YXIgbWF4RWRnZXMgPSBucHRzICogMTA7XHJcbiAgICAgICAgdmFyIGVkZ2VzID0gbmV3IEFycmF5KDY0KTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBuaHVsbCAtIDE7IGkgPCBuaHVsbDsgaiA9IGkrKykge1xyXG4gICAgICAgICAgYWRkRWRnZShjdHgsIGVkZ2VzLCBtYXhFZGdlcywgaHVsbFtqXSwgaHVsbFtpXSwgRVZfSFVMTCwgRVZfVU5ERUYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnRFZGdlID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRFZGdlIDwgZWRnZXMubGVuZ3RoIC8gNCkge1xyXG4gICAgICAgICAgaWYgKGVkZ2VzW2N1cnJlbnRFZGdlICogNCArIDJdID09IEVWX1VOREVGKSB7XHJcbiAgICAgICAgICAgIG5mYWNlcyA9IGNvbXBsZXRlRmFjZXQoY3R4LCBwdHMsIG5wdHMsIGVkZ2VzLCBtYXhFZGdlcywgbmZhY2VzLCBjdXJyZW50RWRnZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGVkZ2VzW2N1cnJlbnRFZGdlICogNCArIDNdID09IEVWX1VOREVGKSB7XHJcbiAgICAgICAgICAgIG5mYWNlcyA9IGNvbXBsZXRlRmFjZXQoY3R4LCBwdHMsIG5wdHMsIGVkZ2VzLCBtYXhFZGdlcywgbmZhY2VzLCBjdXJyZW50RWRnZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY3VycmVudEVkZ2UrKztcclxuICAgICAgICB9IC8vIENyZWF0ZSB0cmlzXHJcblxyXG5cclxuICAgICAgICB0cmlzID0gW107XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IG5mYWNlcyAqIDQ7ICsrX2kzKSB7XHJcbiAgICAgICAgICB0cmlzLnB1c2goLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgZWRnZXMubGVuZ3RoIC8gNDsgKytfaTQpIHtcclxuICAgICAgICAgIHZhciBlID0gX2k0ICogNDtcclxuXHJcbiAgICAgICAgICBpZiAoZWRnZXNbZSArIDNdID49IDApIHtcclxuICAgICAgICAgICAgLy8gTGVmdCBmYWNlXHJcbiAgICAgICAgICAgIHZhciB0ID0gZWRnZXNbZSArIDNdICogNDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmlzW3QgKyAwXSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgIHRyaXMuc2V0KHQgKyAwLCBlZGdlc1tlICsgMF0pO1xyXG4gICAgICAgICAgICAgIHRyaXMuc2V0KHQgKyAxLCBlZGdlc1tlICsgMV0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaXNbdCArIDBdID09IGVkZ2VzW2UgKyAxXSkgdHJpcy5zZXQodCArIDIsIGVkZ2VzW2UgKyAwXSk7ZWxzZSBpZiAodHJpc1t0ICsgMV0gPT0gZWRnZXNbZSArIDBdKSB0cmlzLnNldCh0ICsgMiwgZWRnZXNbZSArIDFdKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoZWRnZXNbZSArIDJdID49IDApIHtcclxuICAgICAgICAgICAgLy8gUmlnaHRcclxuICAgICAgICAgICAgdmFyIF90ID0gZWRnZXNbZSArIDJdICogNDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0cmlzW190ICsgMF0gPT0gLTEpIHtcclxuICAgICAgICAgICAgICB0cmlzLnNldChfdCArIDAsIGVkZ2VzW2UgKyAxXSk7XHJcbiAgICAgICAgICAgICAgdHJpcy5zZXQoX3QgKyAxLCBlZGdlc1tlICsgMF0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyaXNbX3QgKyAwXSA9PSBlZGdlc1tlICsgMF0pIHRyaXMuc2V0KF90ICsgMiwgZWRnZXNbZSArIDFdKTtlbHNlIGlmICh0cmlzW190ICsgMV0gPT0gZWRnZXNbZSArIDFdKSB0cmlzLnNldChfdCArIDIsIGVkZ2VzW2UgKyAwXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCB0cmlzLmxlbmd0aCAvIDQ7ICsrX2k1KSB7XHJcbiAgICAgICAgICB2YXIgX3QyID0gX2k1ICogNDtcclxuXHJcbiAgICAgICAgICBpZiAodHJpc1tfdDIgKyAwXSA9PSAtMSB8fCB0cmlzW190MiArIDFdID09IC0xIHx8IHRyaXNbX3QyICsgMl0gPT0gLTEpIHtcclxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiRGFuZ2xpbmchIFwiICsgdHJpc1tfdDJdICsgXCIgXCIgKyB0cmlzW190MiArIDFdICsgXCIgIFwiICsgdHJpc1tfdDIgKyAyXSk7IC8vY3R4LmxvZyhSQ19MT0dfV0FSTklORywgXCJkZWxhdW5heUh1bGw6IFJlbW92aW5nIGRhbmdsaW5nIGZhY2UgJWQgWyVkLCVkLCVkXS5cIiwgaSwgdFswXSx0WzFdLHRbMl0pO1xyXG5cclxuICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMCwgdHJpc1t0cmlzLmxlbmd0aCAtIDRdKTtcclxuICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMSwgdHJpc1t0cmlzLmxlbmd0aCAtIDNdKTtcclxuICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMiwgdHJpc1t0cmlzLmxlbmd0aCAtIDJdKTtcclxuICAgICAgICAgICAgdHJpcy5zZXQoX3QyICsgMywgdHJpc1t0cmlzLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgdHJpcy5yZW1vdmUodHJpcy5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgLS1faTU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IC8vIENhbGN1bGF0ZSBtaW5pbXVtIGV4dGVuZCBvZiB0aGUgcG9seWdvbi5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwb2x5TWluRXh0ZW50XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwb2x5TWluRXh0ZW50KHZlcnRzLCBudmVydHMpIHtcclxuICAgICAgICB2YXIgbWluRGlzdCA9IE51bWJlci5NQVhfVkFMVUU7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnZlcnRzOyBpKyspIHtcclxuICAgICAgICAgIHZhciBuaSA9IChpICsgMSkgJSBudmVydHM7XHJcbiAgICAgICAgICB2YXIgcDEgPSBpICogMztcclxuICAgICAgICAgIHZhciBwMiA9IG5pICogMztcclxuICAgICAgICAgIHZhciBtYXhFZGdlRGlzdCA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudmVydHM7IGorKykge1xyXG4gICAgICAgICAgICBpZiAoaiA9PSBpIHx8IGogPT0gbmkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9kMiA9IFJlY2FzdE1lc2hEZXRhaWwuZGlzdGFuY2VQdFNlZzJkKHZlcnRzLCBqICogMywgdmVydHMsIHAxLCBwMik7XHJcblxyXG4gICAgICAgICAgICBtYXhFZGdlRGlzdCA9IE1hdGgubWF4KG1heEVkZ2VEaXN0LCBfZDIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG1pbkRpc3QgPSBNYXRoLm1pbihtaW5EaXN0LCBtYXhFZGdlRGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KG1pbkRpc3QpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ0cmlhbmd1bGF0ZUh1bGxcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWFuZ3VsYXRlSHVsbChudmVydHMsIHZlcnRzLCBuaHVsbCwgaHVsbCwgdHJpcykge1xyXG4gICAgICAgIHZhciBzdGFydCA9IDAsXHJcbiAgICAgICAgICAgIGxlZnQgPSAxLFxyXG4gICAgICAgICAgICByaWdodCA9IG5odWxsIC0gMTsgLy8gU3RhcnQgZnJvbSBhbiBlYXIgd2l0aCBzaG9ydGVzdCBwZXJpbWV0ZXIuXHJcbiAgICAgICAgLy8gVGhpcyB0ZW5kcyB0byBmYXZvciB3ZWxsIGZvcm1lZCB0cmlhbmdsZXMgYXMgc3RhcnRpbmcgcG9pbnQuXHJcblxyXG4gICAgICAgIHZhciBkbWluID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuaHVsbDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgcGkgPSBSZWNhc3RNZXNoLnByZXYoaSwgbmh1bGwpO1xyXG4gICAgICAgICAgdmFyIG5pID0gUmVjYXN0TWVzaC5uZXh0KGksIG5odWxsKTtcclxuICAgICAgICAgIHZhciBwdiA9IGh1bGxbcGldICogMztcclxuICAgICAgICAgIHZhciBjdiA9IGh1bGxbaV0gKiAzO1xyXG4gICAgICAgICAgdmFyIG52ID0gaHVsbFtuaV0gKiAzO1xyXG5cclxuICAgICAgICAgIHZhciBfZDMgPSBSZWNhc3RNZXNoRGV0YWlsLnZkaXN0Mih2ZXJ0cywgcHYsIGN2KSArIFJlY2FzdE1lc2hEZXRhaWwudmRpc3QyKHZlcnRzLCBjdiwgbnYpICsgUmVjYXN0TWVzaERldGFpbC52ZGlzdDIodmVydHMsIG52LCBwdik7XHJcblxyXG4gICAgICAgICAgaWYgKF9kMyA8IGRtaW4pIHtcclxuICAgICAgICAgICAgc3RhcnQgPSBpO1xyXG4gICAgICAgICAgICBsZWZ0ID0gbmk7XHJcbiAgICAgICAgICAgIHJpZ2h0ID0gcGk7XHJcbiAgICAgICAgICAgIGRtaW4gPSBfZDM7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBBZGQgZmlyc3QgdHJpYW5nbGVcclxuXHJcblxyXG4gICAgICAgIHRyaXMucHVzaChodWxsW3N0YXJ0XSk7XHJcbiAgICAgICAgdHJpcy5wdXNoKGh1bGxbbGVmdF0pO1xyXG4gICAgICAgIHRyaXMucHVzaChodWxsW3JpZ2h0XSk7XHJcbiAgICAgICAgdHJpcy5wdXNoKDApOyAvLyBUcmlhbmd1bGF0ZSB0aGUgcG9seWdvbiBieSBtb3ZpbmcgbGVmdCBvciByaWdodCxcclxuICAgICAgICAvLyBkZXBlbmRpbmcgb24gd2hpY2ggdHJpYW5nbGUgaGFzIHNob3J0ZXIgcGVyaW1ldGVyLlxyXG4gICAgICAgIC8vIFRoaXMgaGV1cmlzdGljIHdhcyBjaG9zZSBlbXByaWNhbGx5LCBzaW5jZSBpdCBzZWVtc1xyXG4gICAgICAgIC8vIGhhbmRsZSB0ZXNzZWxhdGVkIHN0cmFpZ2h0IGVkZ2VzIHdlbGwuXHJcblxyXG4gICAgICAgIHdoaWxlIChSZWNhc3RNZXNoLm5leHQobGVmdCwgbmh1bGwpICE9IHJpZ2h0KSB7XHJcbiAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgc2Ugc2hvdWxkIGFkdmFuY2UgbGVmdCBvciByaWdodC5cclxuICAgICAgICAgIHZhciBubGVmdCA9IFJlY2FzdE1lc2gubmV4dChsZWZ0LCBuaHVsbCk7XHJcbiAgICAgICAgICB2YXIgbnJpZ2h0ID0gUmVjYXN0TWVzaC5wcmV2KHJpZ2h0LCBuaHVsbCk7XHJcbiAgICAgICAgICB2YXIgY3ZsZWZ0ID0gaHVsbFtsZWZ0XSAqIDM7XHJcbiAgICAgICAgICB2YXIgbnZsZWZ0ID0gaHVsbFtubGVmdF0gKiAzO1xyXG4gICAgICAgICAgdmFyIGN2cmlnaHQgPSBodWxsW3JpZ2h0XSAqIDM7XHJcbiAgICAgICAgICB2YXIgbnZyaWdodCA9IGh1bGxbbnJpZ2h0XSAqIDM7XHJcbiAgICAgICAgICB2YXIgZGxlZnQgPSBSZWNhc3RNZXNoRGV0YWlsLnZkaXN0Mih2ZXJ0cywgY3ZsZWZ0LCBudmxlZnQpICsgUmVjYXN0TWVzaERldGFpbC52ZGlzdDIodmVydHMsIG52bGVmdCwgY3ZyaWdodCk7XHJcbiAgICAgICAgICB2YXIgZHJpZ2h0ID0gUmVjYXN0TWVzaERldGFpbC52ZGlzdDIodmVydHMsIGN2cmlnaHQsIG52cmlnaHQpICsgUmVjYXN0TWVzaERldGFpbC52ZGlzdDIodmVydHMsIGN2bGVmdCwgbnZyaWdodCk7XHJcblxyXG4gICAgICAgICAgaWYgKGRsZWZ0IDwgZHJpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRyaXMucHVzaChodWxsW2xlZnRdKTtcclxuICAgICAgICAgICAgdHJpcy5wdXNoKGh1bGxbbmxlZnRdKTtcclxuICAgICAgICAgICAgdHJpcy5wdXNoKGh1bGxbcmlnaHRdKTtcclxuICAgICAgICAgICAgdHJpcy5wdXNoKDApO1xyXG4gICAgICAgICAgICBsZWZ0ID0gbmxlZnQ7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0cmlzLnB1c2goaHVsbFtsZWZ0XSk7XHJcbiAgICAgICAgICAgIHRyaXMucHVzaChodWxsW25yaWdodF0pO1xyXG4gICAgICAgICAgICB0cmlzLnB1c2goaHVsbFtyaWdodF0pO1xyXG4gICAgICAgICAgICB0cmlzLnB1c2goMCk7XHJcbiAgICAgICAgICAgIHJpZ2h0ID0gbnJpZ2h0O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0Sml0dGVyWFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Sml0dGVyWChpKSB7XHJcbiAgICAgICAgcmV0dXJuIChpICogMHg4ZGE2YjM0MyAmIDB4ZmZmZikgLyA2NTUzNS4wICogMi4wIC0gMS4wO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRKaXR0ZXJZXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRKaXR0ZXJZKGkpIHtcclxuICAgICAgICByZXR1cm4gKGkgKiAweGQ4MTYzODQxICYgMHhmZmZmKSAvIDY1NTM1LjAgKiAyLjAgLSAxLjA7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImJ1aWxkUG9seURldGFpbFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRQb2x5RGV0YWlsKGN0eCwgX2luLCBuaW4sIHNhbXBsZURpc3QsIHNhbXBsZU1heEVycm9yLCBoZWlnaHRTZWFyY2hSYWRpdXMsIGNoZiwgaHAsIHZlcnRzLCB0cmlzKSB7XHJcbiAgICAgICAgdmFyIHNhbXBsZXMgPSBbXTtcclxuICAgICAgICB2YXIgbnZlcnRzID0gMDtcclxuICAgICAgICB2YXIgZWRnZSA9IG5ldyBBcnJheSgoUmVjYXN0TWVzaERldGFpbC5NQVhfVkVSVFNfUEVSX0VER0UgKyAxKSAqIDMpO1xyXG4gICAgICAgIHZhciBodWxsID0gbmV3IEFycmF5KFJlY2FzdE1lc2hEZXRhaWwuTUFYX1ZFUlRTKTtcclxuICAgICAgICB2YXIgbmh1bGwgPSAwO1xyXG4gICAgICAgIG52ZXJ0cyA9IG5pbjtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuaW47ICsraSkge1xyXG4gICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLmNvcHk0KHZlcnRzLCBpICogMywgX2luLCBpICogMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cmlzID0gW107XHJcbiAgICAgICAgdmFyIGNzID0gY2hmLmNzO1xyXG4gICAgICAgIHZhciBpY3MgPSAxLjAgLyBjczsgLy8gQ2FsY3VsYXRlIG1pbmltdW0gZXh0ZW50cyBvZiB0aGUgcG9seWdvbiBiYXNlZCBvbiBpbnB1dCBkYXRhLlxyXG5cclxuICAgICAgICB2YXIgbWluRXh0ZW50ID0gUmVjYXN0TWVzaERldGFpbC5wb2x5TWluRXh0ZW50KHZlcnRzLCBudmVydHMpOyAvLyBUZXNzZWxsYXRlIG91dGxpbmVzLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgZG9uZSBfaW4gc2VwYXJhdGUgcGFzcyBfaW4gb3JkZXIgdG8gZW5zdXJlXHJcbiAgICAgICAgLy8gc2VhbWxlc3MgaGVpZ2h0IHZhbHVlcyBhY3Jvc3MgdGhlIHBseSBib3VuZGFyaWVzLlxyXG5cclxuICAgICAgICBpZiAoc2FtcGxlRGlzdCA+IDApIHtcclxuICAgICAgICAgIGZvciAodmFyIF9pNiA9IDAsIGogPSBuaW4gLSAxOyBfaTYgPCBuaW47IGogPSBfaTYrKykge1xyXG4gICAgICAgICAgICB2YXIgdmogPSBqICogMztcclxuICAgICAgICAgICAgdmFyIHZpID0gX2k2ICogMztcclxuICAgICAgICAgICAgdmFyIHN3YXBwZWQgPSBmYWxzZTsgLy8gTWFrZSBzdXJlIHRoZSBzZWdtZW50cyBhcmUgYWx3YXlzIGhhbmRsZWQgX2luIHNhbWUgb3JkZXJcclxuICAgICAgICAgICAgLy8gdXNpbmcgbGV4b2xvZ2ljYWwgc29ydCBvciBlbHNlIHRoZXJlIHdpbGwgYmUgc2VhbXMuXHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoX2luW3ZqICsgMF0gLSBfaW5bdmkgKyAwXSkgPCAxZS02KSB7XHJcbiAgICAgICAgICAgICAgaWYgKF9pblt2aiArIDJdID4gX2luW3ZpICsgMl0pIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gdmk7XHJcbiAgICAgICAgICAgICAgICB2aSA9IHZqO1xyXG4gICAgICAgICAgICAgICAgdmogPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgc3dhcHBlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmIChfaW5bdmogKyAwXSA+IF9pblt2aSArIDBdKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RlbXAgPSB2aTtcclxuICAgICAgICAgICAgICAgIHZpID0gdmo7XHJcbiAgICAgICAgICAgICAgICB2aiA9IF90ZW1wO1xyXG4gICAgICAgICAgICAgICAgc3dhcHBlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IC8vIENyZWF0ZSBzYW1wbGVzIGFsZXQgdGhlIGVkZ2UuXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIF9keDIgPSBfaW5bdmkgKyAwXSAtIF9pblt2aiArIDBdO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9keSA9IF9pblt2aSArIDFdIC0gX2luW3ZqICsgMV07XHJcblxyXG4gICAgICAgICAgICB2YXIgZHogPSBfaW5bdmkgKyAyXSAtIF9pblt2aiArIDJdO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9kNCA9IE1hdGguc3FydChfZHgyICogX2R4MiArIGR6ICogZHopO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5uID0gMSArIE1hdGguZmxvb3IoX2Q0IC8gc2FtcGxlRGlzdCk7XHJcbiAgICAgICAgICAgIGlmIChubiA+PSBSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUU19QRVJfRURHRSkgbm4gPSBSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUU19QRVJfRURHRSAtIDE7XHJcbiAgICAgICAgICAgIGlmIChudmVydHMgKyBubiA+PSBSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUUykgbm4gPSBSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUUyAtIDEgLSBudmVydHM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8PSBubjsgKytrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHUgPSBrIC8gbm47XHJcbiAgICAgICAgICAgICAgdmFyIHBvcyA9IGsgKiAzO1xyXG4gICAgICAgICAgICAgIGVkZ2VbcG9zICsgMF0gPSBfaW5bdmogKyAwXSArIF9keDIgKiB1O1xyXG4gICAgICAgICAgICAgIGVkZ2VbcG9zICsgMV0gPSBfaW5bdmogKyAxXSArIF9keSAqIHU7XHJcbiAgICAgICAgICAgICAgZWRnZVtwb3MgKyAyXSA9IF9pblt2aiArIDJdICsgZHogKiB1O1xyXG4gICAgICAgICAgICAgIGVkZ2VbcG9zICsgMV0gPSBSZWNhc3RNZXNoRGV0YWlsLmdldEhlaWdodChlZGdlW3BvcyArIDBdLCBlZGdlW3BvcyArIDFdLCBlZGdlW3BvcyArIDJdLCBjcywgaWNzLCBjaGYuY2gsIGhlaWdodFNlYXJjaFJhZGl1cywgaHApICogY2hmLmNoO1xyXG4gICAgICAgICAgICB9IC8vIFNpbXBsaWZ5IHNhbXBsZXMuXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIGlkeCA9IG5ldyBBcnJheShSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUU19QRVJfRURHRSk7XHJcbiAgICAgICAgICAgIGlkeFswXSA9IDA7XHJcbiAgICAgICAgICAgIGlkeFsxXSA9IG5uO1xyXG4gICAgICAgICAgICB2YXIgbmlkeCA9IDI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfazIgPSAwOyBfazIgPCBuaWR4IC0gMTspIHtcclxuICAgICAgICAgICAgICB2YXIgYSA9IGlkeFtfazJdO1xyXG4gICAgICAgICAgICAgIHZhciBiID0gaWR4W19rMiArIDFdO1xyXG4gICAgICAgICAgICAgIHZhciB2YSA9IGEgKiAzO1xyXG4gICAgICAgICAgICAgIHZhciB2YiA9IGIgKiAzOyAvLyBGaW5kIG1heGltdW0gZGV2aWF0aW9uIGFsZXQgdGhlIHNlZ21lbnQuXHJcblxyXG4gICAgICAgICAgICAgIHZhciBtYXhkID0gMDtcclxuICAgICAgICAgICAgICB2YXIgbWF4aSA9IC0xO1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBtID0gYSArIDE7IG0gPCBiOyArK20pIHtcclxuICAgICAgICAgICAgICAgIHZhciBkZXYgPSBSZWNhc3RNZXNoRGV0YWlsLmRpc3RhbmNlUHRTZWcoZWRnZSwgbSAqIDMsIHZhLCB2Yik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRldiA+IG1heGQpIHtcclxuICAgICAgICAgICAgICAgICAgbWF4ZCA9IGRldjtcclxuICAgICAgICAgICAgICAgICAgbWF4aSA9IG07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSAvLyBJZiB0aGUgbWF4IGRldmlhdGlvbiBpcyBsYXJnZXIgdGhhbiBhY2NlcHRlZCBlcnJvcixcclxuICAgICAgICAgICAgICAvLyBhZGQgbmV3IHBvaW50LCBlbHNlIGNvbnRpbnVlIHRvIG5leHQgc2VnbWVudC5cclxuXHJcblxyXG4gICAgICAgICAgICAgIGlmIChtYXhpICE9IC0xICYmIG1heGQgPiBzYW1wbGVNYXhFcnJvciAqIHNhbXBsZU1heEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfbSA9IG5pZHg7IF9tID4gX2syOyAtLV9tKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlkeFtfbV0gPSBpZHhbX20gLSAxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZHhbX2syICsgMV0gPSBtYXhpO1xyXG4gICAgICAgICAgICAgICAgbmlkeCsrO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICArK19rMjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGh1bGxbbmh1bGwrK10gPSBqOyAvLyBBZGQgbmV3IHZlcnRpY2VzLlxyXG5cclxuICAgICAgICAgICAgaWYgKHN3YXBwZWQpIHtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBfazMgPSBuaWR4IC0gMjsgX2szID4gMDsgLS1fazMpIHtcclxuICAgICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KHZlcnRzLCBudmVydHMgKiAzLCBlZGdlLCBpZHhbX2szXSAqIDMpO1xyXG4gICAgICAgICAgICAgICAgaHVsbFtuaHVsbCsrXSA9IG52ZXJ0cztcclxuICAgICAgICAgICAgICAgIG52ZXJ0cysrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBmb3IgKHZhciBfazQgPSAxOyBfazQgPCBuaWR4IC0gMTsgKytfazQpIHtcclxuICAgICAgICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5KHZlcnRzLCBudmVydHMgKiAzLCBlZGdlLCBpZHhbX2s0XSAqIDMpO1xyXG4gICAgICAgICAgICAgICAgaHVsbFtuaHVsbCsrXSA9IG52ZXJ0cztcclxuICAgICAgICAgICAgICAgIG52ZXJ0cysrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gSWYgdGhlIHBvbHlnb24gbWluaW11bSBleHRlbnQgaXMgc21hbGwgKHNsaXZlciBvciBzbWFsbCB0cmlhbmdsZSksIGRvIG5vdCB0cnkgdG8gYWRkIGludGVybmFsIHBvaW50cy5cclxuXHJcblxyXG4gICAgICAgIGlmIChtaW5FeHRlbnQgPCBzYW1wbGVEaXN0ICogMikge1xyXG4gICAgICAgICAgUmVjYXN0TWVzaERldGFpbC50cmlhbmd1bGF0ZUh1bGwobnZlcnRzLCB2ZXJ0cywgbmh1bGwsIGh1bGwsIHRyaXMpO1xyXG4gICAgICAgICAgcmV0dXJuIFtudmVydHMsIHRyaXNdO1xyXG4gICAgICAgIH0gLy8gVGVzc2VsbGF0ZSB0aGUgYmFzZSBtZXNoLlxyXG4gICAgICAgIC8vIFdlJ3JlIHVzaW5nIHRoZSB0cmlhbmd1bGF0ZUh1bGwgaW5zdGVhZCBvZiBkZWxhdW5heUh1bGwgYXMgaXQgdGVuZHMgdG9cclxuICAgICAgICAvLyBjcmVhdGUgYSBiaXQgYmV0dGVyIHRyaWFuZ3VsYXRpb24gZm9yIGxldCB0aGluIHRyaWFuZ2xlcyB3aGVuIHRoZXJlXHJcbiAgICAgICAgLy8gYXJlIG5vIGludGVybmFsIHBvaW50cy5cclxuXHJcblxyXG4gICAgICAgIFJlY2FzdE1lc2hEZXRhaWwudHJpYW5ndWxhdGVIdWxsKG52ZXJ0cywgdmVydHMsIG5odWxsLCBodWxsLCB0cmlzKTtcclxuXHJcbiAgICAgICAgaWYgKHRyaXMubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIC8vIENvdWxkIG5vdCB0cmlhbmd1bGF0ZSB0aGUgcG9seSwgbWFrZSBzdXJlIHRoZXJlIGlzIHNvbWUgdmFsaWQgZGF0YSB0aGVyZS5cclxuICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwiYnVpbGRQb2x5RGV0YWlsOiBDb3VsZCBub3QgdHJpYW5ndWxhdGUgcG9seWdvbiAoXCIgKyBudmVydHMgKyBcIikgdmVydHMpLlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzYW1wbGVEaXN0ID4gMCkge1xyXG4gICAgICAgICAgLy8gQ3JlYXRlIHNhbXBsZSBsb2NhdGlvbnMgX2luIGEgZ3JpZC5cclxuICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgdmFyIGJtYXggPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weTMoYm1pbiwgX2luLCAwKTtcclxuICAgICAgICAgIFJlY2FzdFZlY3RvcnMkMS5jb3B5MyhibWF4LCBfaW4sIDApO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9pNyA9IDE7IF9pNyA8IG5pbjsgKytfaTcpIHtcclxuICAgICAgICAgICAgUmVjYXN0VmVjdG9ycyQxLm1pbihibWluLCBfaW4sIF9pNyAqIDMpO1xyXG4gICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEubWF4KGJtYXgsIF9pbiwgX2k3ICogMyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIHgwID0gTWF0aC5mbG9vcihibWluWzBdIC8gc2FtcGxlRGlzdCk7XHJcbiAgICAgICAgICB2YXIgeDEgPSBNYXRoLmNlaWwoYm1heFswXSAvIHNhbXBsZURpc3QpO1xyXG4gICAgICAgICAgdmFyIHowID0gTWF0aC5mbG9vcihibWluWzJdIC8gc2FtcGxlRGlzdCk7XHJcbiAgICAgICAgICB2YXIgejEgPSBNYXRoLmNlaWwoYm1heFsyXSAvIHNhbXBsZURpc3QpO1xyXG4gICAgICAgICAgc2FtcGxlcyA9IFtdO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIHogPSB6MDsgeiA8IHoxOyArK3opIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IHgwOyB4IDwgeDE7ICsreCkge1xyXG4gICAgICAgICAgICAgIHZhciBwdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICAgICAgICBwdFswXSA9IHggKiBzYW1wbGVEaXN0O1xyXG4gICAgICAgICAgICAgIHB0WzFdID0gKGJtYXhbMV0gKyBibWluWzFdKSAqIDAuNTtcclxuICAgICAgICAgICAgICBwdFsyXSA9IHogKiBzYW1wbGVEaXN0OyAvLyBNYWtlIHN1cmUgdGhlIHNhbXBsZXMgYXJlIG5vdCB0b28gY2xvc2UgdG8gdGhlIGVkZ2VzLlxyXG5cclxuICAgICAgICAgICAgICBpZiAoUmVjYXN0TWVzaERldGFpbC5kaXN0VG9Qb2x5KG5pbiwgX2luLCBwdCkgPiAtc2FtcGxlRGlzdCAvIDIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIHNhbXBsZXMucHVzaCh4KTtcclxuICAgICAgICAgICAgICBzYW1wbGVzLnB1c2goUmVjYXN0TWVzaERldGFpbC5nZXRIZWlnaHQocHRbMF0sIHB0WzFdLCBwdFsyXSwgY3MsIGljcywgY2hmLmNoLCBoZWlnaHRTZWFyY2hSYWRpdXMsIGhwKSk7XHJcbiAgICAgICAgICAgICAgc2FtcGxlcy5wdXNoKHopO1xyXG4gICAgICAgICAgICAgIHNhbXBsZXMucHVzaCgwKTsgLy8gTm90IGFkZGVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy8gQWRkIHRoZSBzYW1wbGVzIHN0YXJ0aW5nIGZyb20gdGhlIG9uZSB0aGF0IGhhcyB0aGUgbW9zdFxyXG4gICAgICAgICAgLy8gZXJyb3IuIFRoZSBwcm9jZWR1cmUgc3RvcHMgd2hlbiBhbGwgc2FtcGxlcyBhcmUgYWRkZWRcclxuICAgICAgICAgIC8vIG9yIHdoZW4gdGhlIG1heCBlcnJvciBpcyB3aXRoaW4gdHJlc2hvbGQuXHJcblxyXG5cclxuICAgICAgICAgIHZhciBuc2FtcGxlcyA9IHNhbXBsZXMubGVuZ3RoIC8gNDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBpdGVyID0gMDsgaXRlciA8IG5zYW1wbGVzOyArK2l0ZXIpIHtcclxuICAgICAgICAgICAgaWYgKG52ZXJ0cyA+PSBSZWNhc3RNZXNoRGV0YWlsLk1BWF9WRVJUUykgYnJlYWs7IC8vIEZpbmQgc2FtcGxlIHdpdGggbW9zdCBlcnJvci5cclxuXHJcbiAgICAgICAgICAgIHZhciBiZXN0cHQgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgICAgIHZhciBiZXN0ZCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBiZXN0aSA9IC0xO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2k4ID0gMDsgX2k4IDwgbnNhbXBsZXM7ICsrX2k4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIHMgPSBfaTggKiA0O1xyXG4gICAgICAgICAgICAgIGlmIChzYW1wbGVzW3MgKyAzXSAhPSAwKSBjb250aW51ZTsgLy8gc2tpcCBhZGRlZC5cclxuXHJcbiAgICAgICAgICAgICAgdmFyIF9wdCA9IG5ldyBBcnJheSgzKTsgLy8gVGhlIHNhbXBsZSBsb2NhdGlvbiBpcyBqaXR0ZXJlZCB0byBnZXQgcmlkIG9mIHNvbWUgYmFkIHRyaWFuZ3VsYXRpb25zXHJcbiAgICAgICAgICAgICAgLy8gd2hpY2ggYXJlIGNhdXNlIGJ5IHN5bW1ldHJpY2FsIGRhdGEgZnJvbSB0aGUgZ3JpZCBzdHJ1Y3R1cmUuXHJcblxyXG5cclxuICAgICAgICAgICAgICBfcHRbMF0gPSBzYW1wbGVzW3MgKyAwXSAqIHNhbXBsZURpc3QgKyBSZWNhc3RNZXNoRGV0YWlsLmdldEppdHRlclgoX2k4KSAqIGNzICogMC4xO1xyXG4gICAgICAgICAgICAgIF9wdFsxXSA9IHNhbXBsZXNbcyArIDFdICogY2hmLmNoO1xyXG4gICAgICAgICAgICAgIF9wdFsyXSA9IHNhbXBsZXNbcyArIDJdICogc2FtcGxlRGlzdCArIFJlY2FzdE1lc2hEZXRhaWwuZ2V0Sml0dGVyWShfaTgpICogY3MgKiAwLjE7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBfZDUgPSBSZWNhc3RNZXNoRGV0YWlsLmRpc3RUb1RyaU1lc2goX3B0LCB2ZXJ0cywgbnZlcnRzLCB0cmlzLCB0cmlzLmxlbmd0aCAvIDQpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX2Q1IDwgMCkgY29udGludWU7IC8vIGRpZCBub3QgaGl0IHRoZSBtZXNoLlxyXG5cclxuICAgICAgICAgICAgICBpZiAoX2Q1ID4gYmVzdGQpIHtcclxuICAgICAgICAgICAgICAgIGJlc3RkID0gX2Q1O1xyXG4gICAgICAgICAgICAgICAgYmVzdGkgPSBfaTg7XHJcbiAgICAgICAgICAgICAgICBiZXN0cHQgPSBfcHQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IC8vIElmIHRoZSBtYXggZXJyb3IgaXMgd2l0aGluIGFjY2VwdGVkIHRocmVzaG9sZCwgc3RvcCB0ZXNzZWxhdGluZy5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoYmVzdGQgPD0gc2FtcGxlTWF4RXJyb3IgfHwgYmVzdGkgPT0gLTEpIGJyZWFrOyAvLyBNYXJrIHNhbXBsZSBhcyBhZGRlZC5cclxuXHJcbiAgICAgICAgICAgIHNhbXBsZXMuc2V0KGJlc3RpICogNCArIDMsIDEpOyAvLyBBZGQgdGhlIG5ldyBzYW1wbGUgcG9pbnQuXHJcblxyXG4gICAgICAgICAgICBSZWNhc3RWZWN0b3JzJDEuY29weSh2ZXJ0cywgbnZlcnRzICogMywgYmVzdHB0LCAwKTtcclxuICAgICAgICAgICAgbnZlcnRzKys7IC8vIENyZWF0ZSBuZXcgdHJpYW5ndWxhdGlvbi5cclxuICAgICAgICAgICAgLy8gVE9ETzogSW5jcmVtZW50YWwgYWRkIGluc3RlYWQgb2YgZnVsbCByZWJ1aWxkLlxyXG5cclxuICAgICAgICAgICAgZGVsYXVuYXlIdWxsKGN0eCwgbnZlcnRzLCB2ZXJ0cywgbmh1bGwsIGh1bGwsIHRyaXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG50cmlzID0gdHJpcy5sZW5ndGggLyA0O1xyXG5cclxuICAgICAgICBpZiAobnRyaXMgPiBSZWNhc3RNZXNoRGV0YWlsLk1BWF9UUklTKSB7XHJcbiAgICAgICAgICB2YXIgc3ViTGlzdCA9IHRyaXMuc3ViTGlzdCgwLCBSZWNhc3RNZXNoRGV0YWlsLk1BWF9UUklTICogNCk7XHJcbiAgICAgICAgICB0cmlzID0gW107XHJcbiAgICAgICAgICB0cmlzLmFkZEFsbChzdWJMaXN0KTtcclxuICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKFwicmNCdWlsZFBvbHlNZXNoRGV0YWlsOiBTaHJpbmtpbmcgdHJpYW5nbGUgY291bnQgZnJvbSBcIiArIG50cmlzICsgXCIgdG8gbWF4IFwiICsgUmVjYXN0TWVzaERldGFpbC5NQVhfVFJJUyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW252ZXJ0cywgdHJpc107XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInNlZWRBcnJheVdpdGhQb2x5Q2VudGVyXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZWVkQXJyYXlXaXRoUG9seUNlbnRlcihjdHgsIGNoZiwgbWVzaHBvbHksIHBvbHksIG5wb2x5LCB2ZXJ0cywgYnMsIGhwLCBhcnJheSkge1xyXG4gICAgICAgIC8vIE5vdGU6IFJlYWRzIHRvIHRoZSBjb21wYWN0IGhlaWdodGZpZWxkIGFyZSBvZmZzZXQgYnkgYm9yZGVyIHNpemUgKGJzKVxyXG4gICAgICAgIC8vIHNpbmNlIGJvcmRlciBzaXplIG9mZnNldCBpcyBhbHJlYWR5IHJlbW92ZWQgZnJvbSB0aGUgcG9seW1lc2ggdmVydGljZXMuXHJcbiAgICAgICAgdmFyIG9mZnNldCA9IFswLCAwLCAtMSwgLTEsIDAsIC0xLCAxLCAtMSwgMSwgMCwgMSwgMSwgMCwgMSwgLTEsIDEsIC0xLCAwXTsgLy8gRmluZCBjZWxsIGNsb3Nlc3QgdG8gYSBsZXQgdmVydGV4XHJcblxyXG4gICAgICAgIHZhciBzdGFydENlbGxYID0gMCxcclxuICAgICAgICAgICAgc3RhcnRDZWxsWSA9IDAsXHJcbiAgICAgICAgICAgIHN0YXJ0U3BhbkluZGV4ID0gLTE7XHJcbiAgICAgICAgdmFyIGRtaW4gPSBSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBucG9seSAmJiBkbWluID4gMDsgKytqKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDkgJiYgZG1pbiA+IDA7ICsraykge1xyXG4gICAgICAgICAgICB2YXIgYXggPSB2ZXJ0c1ttZXNocG9seVtwb2x5ICsgal0gKiAzICsgMF0gKyBvZmZzZXRbayAqIDIgKyAwXTtcclxuICAgICAgICAgICAgdmFyIGF5ID0gdmVydHNbbWVzaHBvbHlbcG9seSArIGpdICogMyArIDFdO1xyXG4gICAgICAgICAgICB2YXIgYXogPSB2ZXJ0c1ttZXNocG9seVtwb2x5ICsgal0gKiAzICsgMl0gKyBvZmZzZXRbayAqIDIgKyAxXTtcclxuICAgICAgICAgICAgaWYgKGF4IDwgaHAueG1pbiB8fCBheCA+PSBocC54bWluICsgaHAud2lkdGggfHwgYXogPCBocC55bWluIHx8IGF6ID49IGhwLnltaW4gKyBocC5oZWlnaHQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgYyA9IGNoZi5jZWxsc1theCArIGJzICsgKGF6ICsgYnMpICogY2hmLndpZHRoXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBjLmluZGV4LCBuaSA9IGMuaW5kZXggKyBjLmNvdW50OyBpIDwgbmkgJiYgZG1pbiA+IDA7ICsraSkge1xyXG4gICAgICAgICAgICAgIHZhciBzID0gY2hmLnNwYW5zW2ldO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgX2Q2ID0gTWF0aC5hYnMoYXkgLSBzLnkpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX2Q2IDwgZG1pbikge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRDZWxsWCA9IGF4O1xyXG4gICAgICAgICAgICAgICAgc3RhcnRDZWxsWSA9IGF6O1xyXG4gICAgICAgICAgICAgICAgc3RhcnRTcGFuSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgZG1pbiA9IF9kNjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIEZpbmQgY2VudGVyIG9mIHRoZSBwb2x5Z29uXHJcblxyXG5cclxuICAgICAgICB2YXIgcGN4ID0gMCxcclxuICAgICAgICAgICAgcGN5ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2oyID0gMDsgX2oyIDwgbnBvbHk7ICsrX2oyKSB7XHJcbiAgICAgICAgICBwY3ggKz0gdmVydHNbbWVzaHBvbHlbcG9seSArIF9qMl0gKiAzICsgMF07XHJcbiAgICAgICAgICBwY3kgKz0gdmVydHNbbWVzaHBvbHlbcG9seSArIF9qMl0gKiAzICsgMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwY3ggLz0gbnBvbHk7XHJcbiAgICAgICAgcGN5IC89IG5wb2x5O1xyXG4gICAgICAgIGFycmF5ID0gW107XHJcbiAgICAgICAgYXJyYXkucHVzaChzdGFydENlbGxYKTtcclxuICAgICAgICBhcnJheS5wdXNoKHN0YXJ0Q2VsbFkpO1xyXG4gICAgICAgIGFycmF5LnB1c2goc3RhcnRTcGFuSW5kZXgpO1xyXG4gICAgICAgIHZhciBkaXJzID0gWzAsIDEsIDIsIDNdO1xyXG4gICAgICAgIGhwLmRhdGEuZmlsbCgwLCAwLCBocC53aWR0aCAqIGhwLmhlaWdodCk7IC8vIERGUyB0byBtb3ZlIHRvIHRoZSBjZW50ZXIuIE5vdGUgdGhhdCB3ZSBuZWVkIGEgREZTIGhlcmUgYW5kIGNhbiBub3QganVzdCBtb3ZlXHJcbiAgICAgICAgLy8gZGlyZWN0bHkgdG93YXJkcyB0aGUgY2VudGVyIHdpdGhvdXQgcmVjb3JkaW5nIGludGVybWVkaWF0ZSBub2RlcywgZXZlbiB0aG91Z2ggdGhlIHBvbHlnb25zXHJcbiAgICAgICAgLy8gYXJlIGNvbnZleC4gSW4gdmVyeSByYXJlIHdlIGNhbiBnZXQgc3R1Y2sgZHVlIHRvIGNvbnRvdXIgc2ltcGxpZmljYXRpb24gaWYgd2UgZG8gbm90XHJcbiAgICAgICAgLy8gcmVjb3JkIG5vZGVzLlxyXG5cclxuICAgICAgICB2YXIgY3ggPSAtMSxcclxuICAgICAgICAgICAgY3kgPSAtMSxcclxuICAgICAgICAgICAgY2kgPSAtMTtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgIGlmIChhcnJheS5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgICAgIGN0eC53YXJuKFwiV2FsayB0b3dhcmRzIHBvbHlnb24gY2VudGVyIGZhaWxlZCB0byByZWFjaCBjZW50ZXJcIik7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNpID0gYXJyYXkuc3BsaWNlKGFycmF5Lmxlbmd0aCAtIDEsIDEpWzBdO1xyXG4gICAgICAgICAgY3kgPSBhcnJheS5zcGxpY2UoYXJyYXkubGVuZ3RoIC0gMSwgMSlbMF07XHJcbiAgICAgICAgICBjeCA9IGFycmF5LnNwbGljZShhcnJheS5sZW5ndGggLSAxLCAxKVswXTsgLy8gQ2hlY2sgaWYgY2xvc2UgdG8gY2VudGVyIG9mIHRoZSBwb2x5Z29uLlxyXG5cclxuICAgICAgICAgIGlmIChjeCA9PSBwY3ggJiYgY3kgPT0gcGN5KSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfSAvLyBJZiB3ZSBhcmUgYWxyZWFkeSBhdCB0aGUgY29ycmVjdCBYLXBvc2l0aW9uLCBwcmVmZXIgZGlyZWN0aW9uXHJcbiAgICAgICAgICAvLyBkaXJlY3RseSB0b3dhcmRzIHRoZSBjZW50ZXIgX2luIHRoZSBZLWF4aXM7IG90aGVyd2lzZSBwcmVmZXJcclxuICAgICAgICAgIC8vIGRpcmVjdGlvbiBfaW4gdGhlIFgtYXhpc1xyXG5cclxuXHJcbiAgICAgICAgICB2YXIgZGlyZWN0RGlyID0gdm9pZCAwO1xyXG4gICAgICAgICAgaWYgKGN4ID09IHBjeCkgZGlyZWN0RGlyID0gUmVjYXN0Q29tbW9uLnJjR2V0RGlyRm9yT2Zmc2V0KDAsIHBjeSA+IGN5ID8gMSA6IC0xKTtlbHNlIGRpcmVjdERpciA9IFJlY2FzdENvbW1vbi5yY0dldERpckZvck9mZnNldChwY3ggPiBjeCA/IDEgOiAtMSwgMCk7IC8vIFB1c2ggdGhlIGRpcmVjdCBkaXIgbGFzdCBzbyB3ZSBzdGFydCB3aXRoIHRoaXMgb24gbmV4dCBpdGVyYXRpb25cclxuXHJcbiAgICAgICAgICB2YXIgdG1wID0gZGlyc1szXTtcclxuICAgICAgICAgIGRpcnNbM10gPSBkaXJzW2RpcmVjdERpcl07XHJcbiAgICAgICAgICBkaXJzW2RpcmVjdERpcl0gPSB0bXA7XHJcbiAgICAgICAgICB2YXIgX2NzID0gY2hmLnNwYW5zW2NpXTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCA0OyArK19pOSkge1xyXG4gICAgICAgICAgICB2YXIgZGlyID0gZGlyc1tfaTldO1xyXG4gICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihfY3MsIGRpcikgPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgbmV3WCA9IGN4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoZGlyKTtcclxuICAgICAgICAgICAgdmFyIG5ld1kgPSBjeSArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRZKGRpcik7XHJcbiAgICAgICAgICAgIHZhciBocHggPSBuZXdYIC0gaHAueG1pbjtcclxuICAgICAgICAgICAgdmFyIGhweSA9IG5ld1kgLSBocC55bWluO1xyXG4gICAgICAgICAgICBpZiAoaHB4IDwgMCB8fCBocHggPj0gaHAud2lkdGggfHwgaHB5IDwgMCB8fCBocHkgPj0gaHAuaGVpZ2h0KSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKGhwLmRhdGFbaHB4ICsgaHB5ICogaHAud2lkdGhdICE9IDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBocC5kYXRhW2hweCArIGhweSAqIGhwLndpZHRoXSA9IDE7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2gobmV3WCk7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2gobmV3WSk7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2goY2hmLmNlbGxzW25ld1ggKyBicyArIChuZXdZICsgYnMpICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24oX2NzLCBkaXIpKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0bXAgPSBkaXJzWzNdO1xyXG4gICAgICAgICAgZGlyc1szXSA9IGRpcnNbZGlyZWN0RGlyXTtcclxuICAgICAgICAgIGRpcnNbZGlyZWN0RGlyXSA9IHRtcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFycmF5ID0gW107IC8vIGdldEhlaWdodERhdGEgc2VlZHMgYXJlIGdpdmVuIF9pbiBjb29yZGluYXRlcyB3aXRoIGJvcmRlcnNcclxuXHJcbiAgICAgICAgYXJyYXkucHVzaChjeCArIGJzKTtcclxuICAgICAgICBhcnJheS5wdXNoKGN5ICsgYnMpO1xyXG4gICAgICAgIGFycmF5LnB1c2goY2kpO1xyXG4gICAgICAgIGhwLmRhdGEuZmlsbChSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVCwgMCwgaHAud2lkdGggKiBocC5oZWlnaHQpO1xyXG4gICAgICAgIHZhciBjcyA9IGNoZi5zcGFuc1tjaV07XHJcbiAgICAgICAgaHAuZGF0YVtjeCAtIGhwLnhtaW4gKyAoY3kgLSBocC55bWluKSAqIGhwLndpZHRoXSA9IGNzLnk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInB1c2gzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwdXNoMyhxdWV1ZSwgdjEsIHYyLCB2Mykge1xyXG4gICAgICAgIHF1ZXVlLnB1c2godjEpO1xyXG4gICAgICAgIHF1ZXVlLnB1c2godjIpO1xyXG4gICAgICAgIHF1ZXVlLnB1c2godjMpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRIZWlnaHREYXRhXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIZWlnaHREYXRhKGN0eCwgY2hmLCBtZXNocG9seXMsIHBvbHksIG5wb2x5LCB2ZXJ0cywgYnMsIGhwLCByZWdpb24pIHtcclxuICAgICAgICAvLyBOb3RlOiBSZWFkcyB0byB0aGUgY29tcGFjdCBoZWlnaHRmaWVsZCBhcmUgb2Zmc2V0IGJ5IGJvcmRlciBzaXplIChicylcclxuICAgICAgICAvLyBzaW5jZSBib3JkZXIgc2l6ZSBvZmZzZXQgaXMgYWxyZWFkeSByZW1vdmVkIGZyb20gdGhlIHBvbHltZXNoIHZlcnRpY2VzLlxyXG4gICAgICAgIHZhciBxdWV1ZSA9IFtdO1xyXG4gICAgICAgIGhwLmRhdGEuZmlsbChSZWNhc3RDb25zdGFudHMuUkNfVU5TRVRfSEVJR0hULCAwLCBocC53aWR0aCAqIGhwLmhlaWdodCk7XHJcbiAgICAgICAgdmFyIGVtcHR5ID0gdHJ1ZTsgLy8gV2UgY2Fubm90IHNhbXBsZSBmcm9tIHRoaXMgbGV0IGlmIGl0IHdhcyBjcmVhdGVkIGZyb20gcG9seXNcclxuICAgICAgICAvLyBvZiBkaWZmZXJlbnQgcmVnaW9ucy4gSWYgaXQgd2FzIHRoZW4gaXQgY291bGQgcG90ZW50aWFsbHkgYmUgb3ZlcmxhcHBpbmdcclxuICAgICAgICAvLyB3aXRoIHBvbHlzIG9mIHRoYXQgcmVnaW9uIGFuZCB0aGUgaGVpZ2h0cyBzYW1wbGVkIGhlcmUgY291bGQgYmUgd3JvbmcuXHJcblxyXG4gICAgICAgIGlmIChyZWdpb24gIT0gUmVjYXN0Q29uc3RhbnRzLlJDX01VTFRJUExFX1JFR1MpIHtcclxuICAgICAgICAgIC8vIENvcHkgdGhlIGhlaWdodCBmcm9tIHRoZSBzYW1lIHJlZ2lvbiwgYW5kIG1hcmsgcmVnaW9uIGJvcmRlcnNcclxuICAgICAgICAgIC8vIGFzIHNlZWQgcG9pbnRzIHRvIGZpbGwgdGhlIHJlc3QuXHJcbiAgICAgICAgICBmb3IgKHZhciBoeSA9IDA7IGh5IDwgaHAuaGVpZ2h0OyBoeSsrKSB7XHJcbiAgICAgICAgICAgIHZhciB5ID0gaHAueW1pbiArIGh5ICsgYnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBoeCA9IDA7IGh4IDwgaHAud2lkdGg7IGh4KyspIHtcclxuICAgICAgICAgICAgICB2YXIgeCA9IGhwLnhtaW4gKyBoeCArIGJzO1xyXG4gICAgICAgICAgICAgIHZhciBjID0gY2hmLmNlbGxzW3ggKyB5ICogY2hmLndpZHRoXTtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGMuaW5kZXgsIG5pID0gYy5pbmRleCArIGMuY291bnQ7IGkgPCBuaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZihoeSA9PSAxICYmIGh4ID09IDEgJiYgaSA9PSAxMzQ0KVxyXG4gICAgICAgICAgICAgICAgLy8gXHRjb25zb2xlLmxvZyhcIkJhZFwiKVxyXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBjaGYuc3BhbnNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHMucmVnID09IHJlZ2lvbikge1xyXG4gICAgICAgICAgICAgICAgICAvLyBTdG9yZSBoZWlnaHRcclxuICAgICAgICAgICAgICAgICAgaHAuZGF0YVtoeCArIGh5ICogaHAud2lkdGhdID0gcy55O1xyXG4gICAgICAgICAgICAgICAgICBlbXB0eSA9IGZhbHNlOyAvLyBJZiBhbnkgb2YgdGhlIG5laWdoYm91cnMgaXMgbm90IF9pbiBzYW1lIHJlZ2lvbixcclxuICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjdXJyZW50IGxvY2F0aW9uIGFzIGZsb29kIGZpbGwgc3RhcnRcclxuXHJcbiAgICAgICAgICAgICAgICAgIHZhciBib3JkZXIgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGRpciA9IDA7IGRpciA8IDQ7ICsrZGlyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKSAhPSBSZWNhc3RDb25zdGFudHMuUkNfTk9UX0NPTk5FQ1RFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGF4ID0geCArIFJlY2FzdENvbW1vbi5HZXREaXJPZmZzZXRYKGRpcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgYXkgPSB5ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFkoZGlyKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBhaSA9IGNoZi5jZWxsc1theCArIGF5ICogY2hmLndpZHRoXS5pbmRleCArIFJlY2FzdENvbW1vbi5HZXRDb24ocywgZGlyKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciBhcyA9IGNoZi5zcGFuc1thaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGFzLnJlZyAhPSByZWdpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBpZiAoYm9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUmVjYXN0TWVzaERldGFpbC5wdXNoMyhxdWV1ZSwgeCwgeSwgaSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gaWYgdGhlIHBvbHlnb24gZG9lcyBub3QgY29udGFpbiBhbnkgcG9pbnRzIGZyb20gdGhlIGN1cnJlbnQgcmVnaW9uIChyYXJlLCBidXQgaGFwcGVucylcclxuICAgICAgICAvLyBvciBpZiBpdCBjb3VsZCBwb3RlbnRpYWxseSBiZSBvdmVybGFwcGluZyBwb2x5Z29ucyBvZiB0aGUgc2FtZSByZWdpb24sXHJcbiAgICAgICAgLy8gdGhlbiB1c2UgdGhlIGNlbnRlciBhcyB0aGUgc2VlZCBwb2ludC5cdFx0XHJcblxyXG5cclxuICAgICAgICBpZiAoZW1wdHkpIFJlY2FzdE1lc2hEZXRhaWwuc2VlZEFycmF5V2l0aFBvbHlDZW50ZXIoY3R4LCBjaGYsIG1lc2hwb2x5cywgcG9seSwgbnBvbHksIHZlcnRzLCBicywgaHAsIHF1ZXVlKTtcclxuICAgICAgICB2YXIgaGVhZCA9IDA7IC8vIFdlIGFzc3VtZSB0aGUgc2VlZCBpcyBjZW50ZXJlZCBfaW4gdGhlIHBvbHlnb24sIHNvIGEgQkZTIHRvIGNvbGxlY3RcclxuICAgICAgICAvLyBoZWlnaHQgZGF0YSB3aWxsIGVuc3VyZSB3ZSBkbyBub3QgbW92ZSBvbnRvIG92ZXJsYXBwaW5nIHBvbHlnb25zIGFuZFxyXG4gICAgICAgIC8vIHNhbXBsZSB3cm9uZyBoZWlnaHRzLlxyXG5cclxuICAgICAgICB3aGlsZSAoaGVhZCAqIDMgPCBxdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgIHZhciBjeCA9IHF1ZXVlW2hlYWQgKiAzICsgMF07XHJcbiAgICAgICAgICB2YXIgY3kgPSBxdWV1ZVtoZWFkICogMyArIDFdO1xyXG4gICAgICAgICAgdmFyIGNpID0gcXVldWVbaGVhZCAqIDMgKyAyXTtcclxuICAgICAgICAgIGhlYWQrKztcclxuXHJcbiAgICAgICAgICBpZiAoaGVhZCA+PSBSZWNhc3RNZXNoRGV0YWlsLlJFVFJBQ1RfU0laRSkge1xyXG4gICAgICAgICAgICBoZWFkID0gMDtcclxuICAgICAgICAgICAgcXVldWUgPSBxdWV1ZS5zbGljZShSZWNhc3RNZXNoRGV0YWlsLlJFVFJBQ1RfU0laRSAqIDMsIHF1ZXVlLmxlbmd0aCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGNzID0gY2hmLnNwYW5zW2NpXTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfZGlyID0gMDsgX2RpciA8IDQ7ICsrX2Rpcikge1xyXG4gICAgICAgICAgICBpZiAoUmVjYXN0Q29tbW9uLkdldENvbihjcywgX2RpcikgPT0gUmVjYXN0Q29uc3RhbnRzLlJDX05PVF9DT05ORUNURUQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9heCA9IGN4ICsgUmVjYXN0Q29tbW9uLkdldERpck9mZnNldFgoX2Rpcik7XHJcblxyXG4gICAgICAgICAgICB2YXIgX2F5ID0gY3kgKyBSZWNhc3RDb21tb24uR2V0RGlyT2Zmc2V0WShfZGlyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBfaHggPSBfYXggLSBocC54bWluIC0gYnM7XHJcblxyXG4gICAgICAgICAgICB2YXIgX2h5ID0gX2F5IC0gaHAueW1pbiAtIGJzO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9oeCA8IDAgfHwgX2h4ID49IGhwLndpZHRoIHx8IF9oeSA8IDAgfHwgX2h5ID49IGhwLmhlaWdodCkgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChocC5kYXRhW19oeCArIF9oeSAqIGhwLndpZHRoXSAhPSBSZWNhc3RNZXNoRGV0YWlsLlJDX1VOU0VUX0hFSUdIVCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgX2FpID0gY2hmLmNlbGxzW19heCArIF9heSAqIGNoZi53aWR0aF0uaW5kZXggKyBSZWNhc3RDb21tb24uR2V0Q29uKGNzLCBfZGlyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBfYXMgPSBjaGYuc3BhbnNbX2FpXTtcclxuICAgICAgICAgICAgaHAuZGF0YVtfaHggKyBfaHkgKiBocC53aWR0aF0gPSBfYXMueTtcclxuICAgICAgICAgICAgUmVjYXN0TWVzaERldGFpbC5wdXNoMyhxdWV1ZSwgX2F4LCBfYXksIF9haSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRFZGdlRmxhZ3NcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVkZ2VGbGFncyh2ZXJ0cywgdmEsIHZiLCB2cG9seSwgbnBvbHkpIHtcclxuICAgICAgICAvLyBSZXR1cm4gdHJ1ZSBpZiBlZGdlICh2YSx2YikgaXMgcGFydCBvZiB0aGUgcG9seWdvbi5cclxuICAgICAgICB2YXIgdGhyU3FyID0gMC4wMDEgKiAwLjAwMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBucG9seSAtIDE7IGkgPCBucG9seTsgaiA9IGkrKykge1xyXG4gICAgICAgICAgaWYgKFJlY2FzdE1lc2hEZXRhaWwuZGlzdGFuY2VQdFNlZzJkKHZlcnRzLCB2YSwgdnBvbHksIGogKiAzLCBpICogMykgPCB0aHJTcXIgJiYgUmVjYXN0TWVzaERldGFpbC5kaXN0YW5jZVB0U2VnMmQodmVydHMsIHZiLCB2cG9seSwgaiAqIDMsIGkgKiAzKSA8IHRoclNxcikgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VHJpRmxhZ3NcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRyaUZsYWdzKHZlcnRzLCB2YSwgdmIsIHZjLCB2cG9seSwgbnBvbHkpIHtcclxuICAgICAgICB2YXIgZmxhZ3MgPSAwO1xyXG4gICAgICAgIGZsYWdzIHw9IFJlY2FzdE1lc2hEZXRhaWwuZ2V0RWRnZUZsYWdzKHZlcnRzLCB2YSwgdmIsIHZwb2x5LCBucG9seSkgPDwgMDtcclxuICAgICAgICBmbGFncyB8PSBSZWNhc3RNZXNoRGV0YWlsLmdldEVkZ2VGbGFncyh2ZXJ0cywgdmIsIHZjLCB2cG9seSwgbnBvbHkpIDw8IDI7XHJcbiAgICAgICAgZmxhZ3MgfD0gUmVjYXN0TWVzaERldGFpbC5nZXRFZGdlRmxhZ3ModmVydHMsIHZjLCB2YSwgdnBvbHksIG5wb2x5KSA8PCA0O1xyXG4gICAgICAgIHJldHVybiBmbGFncztcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFNlZSB0aGUgI3JjQ29uZmlnIGRvY3VtZW50YXRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAc2VlIHJjQWxsb2NQb2x5TWVzaERldGFpbCwgcmNQb2x5TWVzaCwgcmNDb21wYWN0SGVpZ2h0ZmllbGQsIHJjUG9seU1lc2hEZXRhaWwsIHJjQ29uZmlnXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYnVpbGRQb2x5TWVzaERldGFpbFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRQb2x5TWVzaERldGFpbChjdHgsIG1lc2gsIGNoZiwgc2FtcGxlRGlzdCwgc2FtcGxlTWF4RXJyb3IpIHtcclxuICAgICAgICBjdHguc3RhcnRUaW1lcihcIkJVSUxEX1BPTFlNRVNIREVUQUlMXCIpO1xyXG4gICAgICAgIGlmIChtZXNoLm52ZXJ0cyA9PSAwIHx8IG1lc2gubnBvbHlzID09IDApIHJldHVybiBudWxsO1xyXG4gICAgICAgIHZhciBkbWVzaCA9IG5ldyBQb2x5TWVzaERldGFpbCgpO1xyXG4gICAgICAgIHZhciBudnAgPSBtZXNoLm52cDtcclxuICAgICAgICB2YXIgY3MgPSBtZXNoLmNzO1xyXG4gICAgICAgIHZhciBjaCA9IG1lc2guY2g7XHJcbiAgICAgICAgdmFyIG9yaWcgPSBtZXNoLmJtaW47XHJcbiAgICAgICAgdmFyIGJvcmRlclNpemUgPSBtZXNoLmJvcmRlclNpemU7XHJcbiAgICAgICAgdmFyIGhlaWdodFNlYXJjaFJhZGl1cyA9IE1hdGguZmxvb3IoTWF0aC5tYXgoMSwgTWF0aC5jZWlsKG1lc2gubWF4RWRnZUVycm9yKSkpO1xyXG4gICAgICAgIHZhciB0cmlzID0gW107XHJcbiAgICAgICAgdmFyIHZlcnRzID0gbmV3IEFycmF5KDI1NiAqIDMpLmZpbGwoMCk7XHJcbiAgICAgICAgdmFyIGhwID0gbmV3IEhlaWdodFBhdGNoKCk7XHJcbiAgICAgICAgdmFyIG5Qb2x5VmVydHMgPSAwO1xyXG4gICAgICAgIHZhciBtYXhodyA9IDAsXHJcbiAgICAgICAgICAgIG1heGhoID0gMDtcclxuICAgICAgICB2YXIgYm91bmRzID0gbmV3IEFycmF5KG1lc2gubnBvbHlzICogNCkuZmlsbCgwKTtcclxuICAgICAgICB2YXIgcG9seSA9IG5ldyBBcnJheShudnAgKiAzKS5maWxsKDApO1xyXG4gICAgICAgIHBvbHkuZmlsbCgwKTsgLy8gRmluZCBtYXggc2l6ZSBmb3IgYSBwb2x5Z29uIGFyZWEuXHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVzaC5ucG9seXM7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHAgPSBpICogbnZwICogMjtcclxuICAgICAgICAgIGJvdW5kc1tpICogNCArIDBdID0gY2hmLndpZHRoO1xyXG4gICAgICAgICAgYm91bmRzW2kgKiA0ICsgMV0gPSAwO1xyXG4gICAgICAgICAgYm91bmRzW2kgKiA0ICsgMl0gPSBjaGYuaGVpZ2h0O1xyXG4gICAgICAgICAgYm91bmRzW2kgKiA0ICsgM10gPSAwO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnZwOyArK2opIHtcclxuICAgICAgICAgICAgaWYgKG1lc2gucG9seXNbcCArIGpdID09IFJlY2FzdENvbnN0YW50cy5SQ19NRVNIX05VTExfSURYKSB7XHJcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaSArIFwiIFwiICsgailcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHYgPSBtZXNoLnBvbHlzW3AgKyBqXSAqIDM7XHJcbiAgICAgICAgICAgIGJvdW5kc1tpICogNCArIDBdID0gTWF0aC5taW4oYm91bmRzW2kgKiA0ICsgMF0sIG1lc2gudmVydHNbdiArIDBdKTtcclxuICAgICAgICAgICAgYm91bmRzW2kgKiA0ICsgMV0gPSBNYXRoLm1heChib3VuZHNbaSAqIDQgKyAxXSwgbWVzaC52ZXJ0c1t2ICsgMF0pO1xyXG4gICAgICAgICAgICBib3VuZHNbaSAqIDQgKyAyXSA9IE1hdGgubWluKGJvdW5kc1tpICogNCArIDJdLCBtZXNoLnZlcnRzW3YgKyAyXSk7XHJcbiAgICAgICAgICAgIGJvdW5kc1tpICogNCArIDNdID0gTWF0aC5tYXgoYm91bmRzW2kgKiA0ICsgM10sIG1lc2gudmVydHNbdiArIDJdKTtcclxuICAgICAgICAgICAgblBvbHlWZXJ0cysrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGJvdW5kc1tpICogNCArIDBdID0gTWF0aC5tYXgoMCwgYm91bmRzW2kgKiA0ICsgMF0gLSAxKTtcclxuICAgICAgICAgIGJvdW5kc1tpICogNCArIDFdID0gTWF0aC5taW4oY2hmLndpZHRoLCBib3VuZHNbaSAqIDQgKyAxXSArIDEpO1xyXG4gICAgICAgICAgYm91bmRzW2kgKiA0ICsgMl0gPSBNYXRoLm1heCgwLCBib3VuZHNbaSAqIDQgKyAyXSAtIDEpO1xyXG4gICAgICAgICAgYm91bmRzW2kgKiA0ICsgM10gPSBNYXRoLm1pbihjaGYuaGVpZ2h0LCBib3VuZHNbaSAqIDQgKyAzXSArIDEpO1xyXG4gICAgICAgICAgaWYgKGJvdW5kc1tpICogNCArIDBdID49IGJvdW5kc1tpICogNCArIDFdIHx8IGJvdW5kc1tpICogNCArIDJdID49IGJvdW5kc1tpICogNCArIDNdKSBjb250aW51ZTtcclxuICAgICAgICAgIG1heGh3ID0gTWF0aC5tYXgobWF4aHcsIGJvdW5kc1tpICogNCArIDFdIC0gYm91bmRzW2kgKiA0ICsgMF0pO1xyXG4gICAgICAgICAgbWF4aGggPSBNYXRoLm1heChtYXhoaCwgYm91bmRzW2kgKiA0ICsgM10gLSBib3VuZHNbaSAqIDQgKyAyXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBocC5kYXRhID0gbmV3IEFycmF5KG1heGh3ICogbWF4aGgpO1xyXG4gICAgICAgIGhwLmRhdGEuZmlsbCgwKTtcclxuICAgICAgICBkbWVzaC5ubWVzaGVzID0gbWVzaC5ucG9seXM7XHJcbiAgICAgICAgZG1lc2gubnZlcnRzID0gMDtcclxuICAgICAgICBkbWVzaC5udHJpcyA9IDA7XHJcbiAgICAgICAgZG1lc2gubWVzaGVzID0gbmV3IEFycmF5KGRtZXNoLm5tZXNoZXMgKiA0KTtcclxuICAgICAgICBkbWVzaC5tZXNoZXMuZmlsbCgwKTtcclxuICAgICAgICB2YXIgdmNhcCA9IG5Qb2x5VmVydHMgKyBNYXRoLmZsb29yKG5Qb2x5VmVydHMgLyAyKTtcclxuICAgICAgICB2YXIgdGNhcCA9IHZjYXAgKiAyO1xyXG4gICAgICAgIGRtZXNoLm52ZXJ0cyA9IDA7XHJcbiAgICAgICAgZG1lc2gudmVydHMgPSBuZXcgQXJyYXkodmNhcCAqIDMpLmZpbGwoMCk7XHJcbiAgICAgICAgZG1lc2gubnRyaXMgPSAwO1xyXG4gICAgICAgIGRtZXNoLnRyaXMgPSBuZXcgQXJyYXkodGNhcCAqIDQpLmZpbGwoMCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTAgPSAwOyBfaTEwIDwgbWVzaC5ucG9seXM7ICsrX2kxMCkge1xyXG4gICAgICAgICAgdmFyIF9wID0gX2kxMCAqIG52cCAqIDI7IC8vIFN0b3JlIHBvbHlnb24gdmVydGljZXMgZm9yIHByb2Nlc3NpbmcuXHJcblxyXG5cclxuICAgICAgICAgIHZhciBucG9seSA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2ozID0gMDsgX2ozIDwgbnZwOyArK19qMykge1xyXG4gICAgICAgICAgICBpZiAobWVzaC5wb2x5c1tfcCArIF9qM10gPT0gUmVjYXN0Q29uc3RhbnRzLlJDX01FU0hfTlVMTF9JRFgpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgdmFyIF92ID0gbWVzaC5wb2x5c1tfcCArIF9qM10gKiAzO1xyXG5cclxuICAgICAgICAgICAgcG9seVtfajMgKiAzICsgMF0gPSBtZXNoLnZlcnRzW192ICsgMF0gKiBjcztcclxuICAgICAgICAgICAgcG9seVtfajMgKiAzICsgMV0gPSBtZXNoLnZlcnRzW192ICsgMV0gKiBjaDtcclxuICAgICAgICAgICAgcG9seVtfajMgKiAzICsgMl0gPSBtZXNoLnZlcnRzW192ICsgMl0gKiBjcztcclxuICAgICAgICAgICAgbnBvbHkrKztcclxuICAgICAgICAgIH0gLy8gR2V0IHRoZSBoZWlnaHQgZGF0YSBmcm9tIHRoZSBhcmVhIG9mIHRoZSBwb2x5Z29uLlxyXG5cclxuXHJcbiAgICAgICAgICBocC54bWluID0gYm91bmRzW19pMTAgKiA0ICsgMF07XHJcbiAgICAgICAgICBocC55bWluID0gYm91bmRzW19pMTAgKiA0ICsgMl07XHJcbiAgICAgICAgICBocC53aWR0aCA9IGJvdW5kc1tfaTEwICogNCArIDFdIC0gYm91bmRzW19pMTAgKiA0ICsgMF07XHJcbiAgICAgICAgICBocC5oZWlnaHQgPSBib3VuZHNbX2kxMCAqIDQgKyAzXSAtIGJvdW5kc1tfaTEwICogNCArIDJdO1xyXG4gICAgICAgICAgUmVjYXN0TWVzaERldGFpbC5nZXRIZWlnaHREYXRhKGN0eCwgY2hmLCBtZXNoLnBvbHlzLCBfcCwgbnBvbHksIG1lc2gudmVydHMsIGJvcmRlclNpemUsIGhwLCBtZXNoLnJlZ3NbX2kxMF0pOyAvLyBCdWlsZCBkZXRhaWwgbWVzaC5cclxuXHJcbiAgICAgICAgICB2YXIgbnZlcnRzID0gdm9pZCAwO1xyXG5cclxuICAgICAgICAgIHZhciBfUmVjYXN0TWVzaERldGFpbCRidWkgPSBSZWNhc3RNZXNoRGV0YWlsLmJ1aWxkUG9seURldGFpbChjdHgsIHBvbHksIG5wb2x5LCBzYW1wbGVEaXN0LCBzYW1wbGVNYXhFcnJvciwgaGVpZ2h0U2VhcmNoUmFkaXVzLCBjaGYsIGhwLCB2ZXJ0cywgdHJpcyk7XHJcblxyXG4gICAgICAgICAgdmFyIF9SZWNhc3RNZXNoRGV0YWlsJGJ1aTIgPSBfc2xpY2VkVG9BcnJheShfUmVjYXN0TWVzaERldGFpbCRidWksIDIpO1xyXG5cclxuICAgICAgICAgIG52ZXJ0cyA9IF9SZWNhc3RNZXNoRGV0YWlsJGJ1aTJbMF07XHJcbiAgICAgICAgICB0cmlzID0gX1JlY2FzdE1lc2hEZXRhaWwkYnVpMlsxXTtcclxuXHJcbiAgICAgICAgICAvLyBNb3ZlIGRldGFpbCB2ZXJ0cyB0byB3b3JsZCBzcGFjZS5cclxuICAgICAgICAgIGZvciAodmFyIF9qNCA9IDA7IF9qNCA8IG52ZXJ0czsgKytfajQpIHtcclxuICAgICAgICAgICAgdmVydHNbX2o0ICogMyArIDBdICs9IG9yaWdbMF07XHJcbiAgICAgICAgICAgIHZlcnRzW19qNCAqIDMgKyAxXSArPSBvcmlnWzFdICsgY2hmLmNoOyAvLyBJcyB0aGlzIG9mZnNldCBuZWNlc3Nhcnk/XHJcblxyXG4gICAgICAgICAgICB2ZXJ0c1tfajQgKiAzICsgMl0gKz0gb3JpZ1syXTtcclxuICAgICAgICAgIH0gLy8gT2Zmc2V0IGxldCB0b28sIHdpbGwgYmUgdXNlZCB0byBmbGFnIGNoZWNraW5nLlxyXG5cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfajUgPSAwOyBfajUgPCBucG9seTsgKytfajUpIHtcclxuICAgICAgICAgICAgcG9seVtfajUgKiAzICsgMF0gKz0gb3JpZ1swXTtcclxuICAgICAgICAgICAgcG9seVtfajUgKiAzICsgMV0gKz0gb3JpZ1sxXTtcclxuICAgICAgICAgICAgcG9seVtfajUgKiAzICsgMl0gKz0gb3JpZ1syXTtcclxuICAgICAgICAgIH0gLy8gU3RvcmUgZGV0YWlsIHN1Ym1lc2guXHJcblxyXG5cclxuICAgICAgICAgIHZhciBudHJpcyA9IHRyaXMubGVuZ3RoIC8gNDtcclxuICAgICAgICAgIGRtZXNoLm1lc2hlc1tfaTEwICogNCArIDBdID0gZG1lc2gubnZlcnRzO1xyXG4gICAgICAgICAgZG1lc2gubWVzaGVzW19pMTAgKiA0ICsgMV0gPSBudmVydHM7XHJcbiAgICAgICAgICBkbWVzaC5tZXNoZXNbX2kxMCAqIDQgKyAyXSA9IGRtZXNoLm50cmlzO1xyXG4gICAgICAgICAgZG1lc2gubWVzaGVzW19pMTAgKiA0ICsgM10gPSBudHJpczsgLy8gU3RvcmUgdmVydGljZXMsIGFsbG9jYXRlIG1vcmUgbWVtb3J5IGlmIG5lY2Vzc2FyeS5cclxuXHJcbiAgICAgICAgICBpZiAoZG1lc2gubnZlcnRzICsgbnZlcnRzID4gdmNhcCkge1xyXG4gICAgICAgICAgICB3aGlsZSAoZG1lc2gubnZlcnRzICsgbnZlcnRzID4gdmNhcCkge1xyXG4gICAgICAgICAgICAgIHZjYXAgKz0gMjU2O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3diA9IG5ldyBBcnJheSh2Y2FwICogMyk7XHJcbiAgICAgICAgICAgIGlmIChkbWVzaC5udmVydHMgIT0gMCkgYXJyYXljb3B5JDIoZG1lc2gudmVydHMsIDAsIG5ld3YsIDAsIDMgKiBkbWVzaC5udmVydHMpO1xyXG4gICAgICAgICAgICBkbWVzaC52ZXJ0cyA9IG5ld3Y7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2o2ID0gMDsgX2o2IDwgbnZlcnRzOyArK19qNikge1xyXG4gICAgICAgICAgICBkbWVzaC52ZXJ0c1tkbWVzaC5udmVydHMgKiAzICsgMF0gPSB2ZXJ0c1tfajYgKiAzICsgMF07XHJcbiAgICAgICAgICAgIGRtZXNoLnZlcnRzW2RtZXNoLm52ZXJ0cyAqIDMgKyAxXSA9IHZlcnRzW19qNiAqIDMgKyAxXTtcclxuICAgICAgICAgICAgZG1lc2gudmVydHNbZG1lc2gubnZlcnRzICogMyArIDJdID0gdmVydHNbX2o2ICogMyArIDJdO1xyXG4gICAgICAgICAgICBkbWVzaC5udmVydHMrKztcclxuICAgICAgICAgIH0gLy8gU3RvcmUgdHJpYW5nbGVzLCBhbGxvY2F0ZSBtb3JlIG1lbW9yeSBpZiBuZWNlc3NhcnkuXHJcblxyXG5cclxuICAgICAgICAgIGlmIChkbWVzaC5udHJpcyArIG50cmlzID4gdGNhcCkge1xyXG4gICAgICAgICAgICB3aGlsZSAoZG1lc2gubnRyaXMgKyBudHJpcyA+IHRjYXApIHtcclxuICAgICAgICAgICAgICB0Y2FwICs9IDI1NjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG5ld3QgPSBuZXcgQXJyYXkodGNhcCAqIDQpO1xyXG4gICAgICAgICAgICBpZiAoZG1lc2gubnRyaXMgIT0gMCkgYXJyYXljb3B5JDIoZG1lc2gudHJpcywgMCwgbmV3dCwgMCwgNCAqIGRtZXNoLm50cmlzKTtcclxuICAgICAgICAgICAgZG1lc2gudHJpcyA9IG5ld3Q7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2o3ID0gMDsgX2o3IDwgbnRyaXM7ICsrX2o3KSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gX2o3ICogNDtcclxuICAgICAgICAgICAgZG1lc2gudHJpc1tkbWVzaC5udHJpcyAqIDQgKyAwXSA9IHRyaXNbdCArIDBdO1xyXG4gICAgICAgICAgICBkbWVzaC50cmlzW2RtZXNoLm50cmlzICogNCArIDFdID0gdHJpc1t0ICsgMV07XHJcbiAgICAgICAgICAgIGRtZXNoLnRyaXNbZG1lc2gubnRyaXMgKiA0ICsgMl0gPSB0cmlzW3QgKyAyXTtcclxuICAgICAgICAgICAgZG1lc2gudHJpc1tkbWVzaC5udHJpcyAqIDQgKyAzXSA9IFJlY2FzdE1lc2hEZXRhaWwuZ2V0VHJpRmxhZ3ModmVydHMsIHRyaXNbdCArIDBdICogMywgdHJpc1t0ICsgMV0gKiAzLCB0cmlzW3QgKyAyXSAqIDMsIHBvbHksIG5wb2x5KTtcclxuICAgICAgICAgICAgZG1lc2gubnRyaXMrKztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5zdG9wVGltZXIoXCJCVUlMRF9QT0xZTUVTSERFVEFJTFwiKTtcclxuICAgICAgICByZXR1cm4gZG1lc2g7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gUmVjYXN0TWVzaERldGFpbDtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RNZXNoRGV0YWlsLCBcIk1BWF9WRVJUU1wiLCAxMjcpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgXCJNQVhfVFJJU1wiLCAyNTUpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgXCJNQVhfVkVSVFNfUEVSX0VER0VcIiwgMzIpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgXCJSQ19VTlNFVF9IRUlHSFRcIiwgMHhmZmYpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgXCJFVl9VTkRFRlwiLCAtMSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RNZXNoRGV0YWlsLCBcIkVWX0hVTExcIiwgLTIpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0TWVzaERldGFpbCwgXCJ2ZG90MlwiLCBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgcmV0dXJuIGFbMF0gKiBiWzBdICsgYVsyXSAqIGJbMl07XHJcbiAgfSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RNZXNoRGV0YWlsLCBcIlJFVFJBQ1RfU0laRVwiLCAyNTYpO1xyXG5cclxuICB2YXIgUmVjYXN0QnVpbGRlclJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWNhc3RCdWlsZGVyUmVzdWx0KHBtZXNoLCBkbWVzaCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0QnVpbGRlclJlc3VsdCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwbWVzaFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZG1lc2hcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIHRoaXMucG1lc2ggPSBwbWVzaDtcclxuICAgICAgdGhpcy5kbWVzaCA9IGRtZXNoO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RCdWlsZGVyUmVzdWx0LCBbe1xyXG4gICAgICBrZXk6IFwiZ2V0TWVzaFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWVzaCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wbWVzaDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0TWVzaERldGFpbFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TWVzaERldGFpbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbWVzaDtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBSZWNhc3RCdWlsZGVyUmVzdWx0O1xyXG4gIH0oKTtcclxuXHJcbiAgdmFyIFJlY2FzdEJ1aWxkZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gY2xhc3MgUmVjYXN0QnVpbGRlclByb2dyZXNzTGlzdGVuZXIge1xyXG4gICAgLy8gICAgIG9uUHJvZ3Jlc3MoY29tcGxldGVkLCB0b3RhbCk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBSZWNhc3RCdWlsZGVyKCkge1xyXG4gICAgLy8gICAgIHByb2dyZXNzTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgLy8gfVxyXG4gICAgZnVuY3Rpb24gUmVjYXN0QnVpbGRlcigpIHtcclxuICAgICAgdmFyIHByb2dyZXNzTGlzdGVuZXIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG51bGw7XHJcblxyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVjYXN0QnVpbGRlcik7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9ncmVzc0xpc3RlbmVyXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICB0aGlzLnByb2dyZXNzTGlzdGVuZXIgPSBwcm9ncmVzc0xpc3RlbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhSZWNhc3RCdWlsZGVyLCBbe1xyXG4gICAgICBrZXk6IFwiYnVpbGRUaWxlc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRUaWxlcyhnZW9tLCBjZmcsIHRocmVhZHMpIHtcclxuICAgICAgICB2YXIgYm1pbiA9IGdlb20uZ2V0TWVzaEJvdW5kc01pbigpO1xyXG4gICAgICAgIHZhciBibWF4ID0gZ2VvbS5nZXRNZXNoQm91bmRzTWF4KCk7XHJcbiAgICAgICAgdmFyIHR3aCA9IFJlY2FzdC5jYWxjVGlsZUNvdW50KGJtaW4sIGJtYXgsIGNmZy5jcywgY2ZnLnRpbGVTaXplKTtcclxuICAgICAgICB2YXIgdHcgPSB0d2hbMF07XHJcbiAgICAgICAgdmFyIHRoID0gdHdoWzFdO1xyXG4gICAgICAgIHJlc3VsdCA9IG51bGw7XHJcblxyXG4gICAgICAgIGlmICh0aHJlYWRzID09IDEpIHtcclxuICAgICAgICAgIHJlc3VsdCA9IGJ1aWxkU2luZ2xlVGhyZWFkKGdlb20sIGNmZywgYm1pbiwgYm1heCwgdHcsIHRoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVzdWx0ID0gYnVpbGRNdWx0aVRocmVhZChnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHR3LCB0aCwgdGhyZWFkcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJidWlsZFNpbmdsZVRocmVhZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRTaW5nbGVUaHJlYWQoZ2VvbSwgY2ZnLCBibWluLCBibWF4LCB0dywgdGgpIHtcclxuICAgICAgICByZXN1bHQgPSBuZXcgUmVjYXN0QnVpbGRlclJlc3VsdFt0d11bdGhdKCk7XHJcbiAgICAgICAgY291bnRlciA9IG5ldyBBdG9taWNJbnRlZ2VyKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdHc7ICsreCkge1xyXG4gICAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aDsgKyt5KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFt4XVt5XSA9IGJ1aWxkVGlsZShnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHgsIHksIGNvdW50ZXIsIHR3ICogdGgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYnVpbGRNdWx0aVRocmVhZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYnVpbGRNdWx0aVRocmVhZChnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHR3LCB0aCwgdGhyZWFkcykge1xyXG4gICAgICAgIGVjID0gRXhlY3V0b3JzLm5ld0ZpeGVkVGhyZWFkUG9vbCh0aHJlYWRzKTtcclxuICAgICAgICByZXN1bHQgPSBuZXcgUmVjYXN0QnVpbGRlclJlc3VsdFt0d11bdGhdKCk7XHJcbiAgICAgICAgY291bnRlciA9IG5ldyBBdG9taWNJbnRlZ2VyKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdHc7ICsreCkge1xyXG4gICAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoeSkge1xyXG4gICAgICAgICAgICB2YXIgdHggPSB4O1xyXG4gICAgICAgICAgICB2YXIgdHkgPSB5O1xyXG4gICAgICAgICAgICBlYy5zdWJtaXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIHJlc3VsdFt0eF1bdHldID0gYnVpbGRUaWxlKGdlb20sIGNmZywgYm1pbiwgYm1heCwgdHgsIHR5LCBjb3VudGVyLCB0dyAqIHRoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgdGg7ICsreSkge1xyXG4gICAgICAgICAgICBfbG9vcCh5KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVjLnNodXRkb3duKCk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBlYy5hd2FpdFRlcm1pbmF0aW9uKDEwMDAsIFRpbWVVbml0LkhPVVJTKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7fVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJidWlsZFRpbGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkVGlsZShnZW9tLCBjZmcsIGJtaW4sIGJtYXgsIHR4LCB0eSwgY291bnRlciwgdG90YWwpIHtcclxuICAgICAgICByZXN1bHQgPSBidWlsZChnZW9tLCBuZXcgUmVjYXN0QnVpbGRlckNvbmZpZyhjZmcsIGJtaW4sIGJtYXgsIHR4LCB0eSwgdHJ1ZSkpO1xyXG5cclxuICAgICAgICBpZiAocHJvZ3Jlc3NMaXN0ZW5lciAhPSBudWxsKSB7XHJcbiAgICAgICAgICBwcm9ncmVzc0xpc3RlbmVyLm9uUHJvZ3Jlc3MoY291bnRlci5pbmNyZW1lbnRBbmRHZXQoKSwgdG90YWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYnVpbGRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkKGdlb20sIGJ1aWxkZXJDZmcpIHtcclxuICAgICAgICB2YXIgY2ZnID0gYnVpbGRlckNmZy5jZmc7XHJcbiAgICAgICAgdmFyIGN0eCA9IG5ldyBDb250ZXh0KCk7XHJcbiAgICAgICAgdmFyIGNoZiA9IHRoaXMuYnVpbGRDb21wYWN0SGVpZ2h0ZmllbGQoZ2VvbSwgYnVpbGRlckNmZywgY3R4KTsgLy8gUGFydGl0aW9uIHRoZSBoZWlnaHRmaWVsZCBzbyB0aGF0IHdlIGNhbiB1c2Ugc2ltcGxlIGFsZ29yaXRobSBsYXRlclxyXG4gICAgICAgIC8vIHRvIHRyaWFuZ3VsYXRlIHRoZSB3YWxrYWJsZSBhcmVhcy5cclxuICAgICAgICAvLyBUaGVyZSBhcmUgMyBtYXJ0aXRpb25pbmcgbWV0aG9kcywgZWFjaCB3aXRoIHNvbWUgcHJvcyBhbmQgY29uczpcclxuICAgICAgICAvLyAxKSBXYXRlcnNoZWQgcGFydGl0aW9uaW5nXHJcbiAgICAgICAgLy8gLSB0aGUgY2xhc3NpYyBSZWNhc3QgcGFydGl0aW9uaW5nXHJcbiAgICAgICAgLy8gLSBjcmVhdGVzIHRoZSBuaWNlc3QgdGVzc2VsbGF0aW9uXHJcbiAgICAgICAgLy8gLSB1c3VhbGx5IHNsb3dlc3RcclxuICAgICAgICAvLyAtIHBhcnRpdGlvbnMgdGhlIGhlaWdodGZpZWxkIGludG8gbmljZSByZWdpb25zIHdpdGhvdXQgaG9sZXMgb3JcclxuICAgICAgICAvLyBvdmVybGFwc1xyXG4gICAgICAgIC8vIC0gdGhlIGFyZSBzb21lIGNvcm5lciBjYXNlcyB3aGVyZSB0aGlzIG1ldGhvZCBjcmVhdGVzIHByb2R1Y2VzIGhvbGVzXHJcbiAgICAgICAgLy8gYW5kIG92ZXJsYXBzXHJcbiAgICAgICAgLy8gLSBob2xlcyBtYXkgYXBwZWFyIHdoZW4gYSBzbWFsbCBvYnN0YWNsZXMgaXMgY2xvc2UgdG8gbGFyZ2Ugb3BlbiBhcmVhXHJcbiAgICAgICAgLy8gKHRyaWFuZ3VsYXRpb24gY2FuIGhhbmRsZSB0aGlzKVxyXG4gICAgICAgIC8vIC0gb3ZlcmxhcHMgbWF5IG9jY3VyIGlmIHlvdSBoYXZlIG5hcnJvdyBzcGlyYWwgY29ycmlkb3JzIChpLmVcclxuICAgICAgICAvLyBzdGFpcnMpLCB0aGlzIG1ha2UgdHJpYW5ndWxhdGlvbiB0byBmYWlsXHJcbiAgICAgICAgLy8gKiBnZW5lcmFsbHkgdGhlIGJlc3QgY2hvaWNlIGlmIHlvdSBwcmVjb21wdXRlIHRoZSBuYWNtZXNoLCB1c2UgdGhpc1xyXG4gICAgICAgIC8vIGlmIHlvdSBoYXZlIGxhcmdlIG9wZW4gYXJlYXNcclxuICAgICAgICAvLyAyKSBNb25vdG9uZSBwYXJ0aW9uaW5nXHJcbiAgICAgICAgLy8gLSBmYXN0ZXN0XHJcbiAgICAgICAgLy8gLSBwYXJ0aXRpb25zIHRoZSBoZWlnaHRmaWVsZCBpbnRvIHJlZ2lvbnMgd2l0aG91dCBob2xlcyBhbmQgb3ZlcmxhcHNcclxuICAgICAgICAvLyAoZ3VhcmFudGVlZClcclxuICAgICAgICAvLyAtIGNyZWF0ZXMgbGV0IHRoaW4gcG9seWdvbnMsIHdoaWNoIHNvbWV0aW1lcyBjYXVzZXMgcGF0aHMgd2l0aFxyXG4gICAgICAgIC8vIGRldG91cnNcclxuICAgICAgICAvLyAqIHVzZSB0aGlzIGlmIHlvdSB3YW50IGZhc3QgbmF2bWVzaCBnZW5lcmF0aW9uXHJcbiAgICAgICAgLy8gMykgTGF5ZXIgcGFydGl0b2luaW5nXHJcbiAgICAgICAgLy8gLSBxdWl0ZSBmYXN0XHJcbiAgICAgICAgLy8gLSBwYXJ0aXRpb25zIHRoZSBoZWlnaGZpZWxkIGludG8gbm9uLW92ZXJsYXBwaW5nIHJlZ2lvbnNcclxuICAgICAgICAvLyAtIHJlbGllcyBvbiB0aGUgdHJpYW5ndWxhdGlvbiBjb2RlIHRvIGNvcGUgd2l0aCBob2xlcyAodGh1cyBzbG93ZXJcclxuICAgICAgICAvLyB0aGFuIG1vbm90b25lIHBhcnRpdGlvbmluZylcclxuICAgICAgICAvLyAtIHByb2R1Y2VzIGJldHRlciB0cmlhbmdsZXMgdGhhbiBtb25vdG9uZSBwYXJ0aXRpb25pbmdcclxuICAgICAgICAvLyAtIGRvZXMgbm90IGhhdmUgdGhlIGNvcm5lciBjYXNlcyBvZiB3YXRlcnNoZWQgcGFydGl0aW9uaW5nXHJcbiAgICAgICAgLy8gLSBjYW4gYmUgc2xvdyBhbmQgY3JlYXRlIGEgYml0IHVnbHkgdGVzc2VsbGF0aW9uIChzdGlsbCBiZXR0ZXIgdGhhblxyXG4gICAgICAgIC8vIG1vbm90b25lKVxyXG4gICAgICAgIC8vIGlmIHlvdSBoYXZlIGxhcmdlIG9wZW4gYXJlYXMgd2l0aCBzbWFsbCBvYnN0YWNsZXMgKG5vdCBhIHByb2JsZW0gaWZcclxuICAgICAgICAvLyB5b3UgdXNlIHRpbGVzKVxyXG4gICAgICAgIC8vICogZ29vZCBjaG9pY2UgdG8gdXNlIGZvciB0aWxlZCBuYXZtZXNoIHdpdGggbWVkaXVtIGFuZCBzbWFsbCBzaXplZFxyXG4gICAgICAgIC8vIHRpbGVzXHJcblxyXG4gICAgICAgIGlmIChjZmcucGFydGl0aW9uVHlwZSA9PSBSZWNhc3RDb25zdGFudHMuV0FURVJTSEVEKSB7XHJcbiAgICAgICAgICAvLyBQcmVwYXJlIGZvciByZWdpb24gcGFydGl0aW9uaW5nLCBieSBjYWxjdWxhdGluZyBkaXN0YW5jZSBmaWVsZFxyXG4gICAgICAgICAgLy8gYVBvbHkgdGhlIHdhbGthYmxlIHN1cmZhY2UuXHJcbiAgICAgICAgICBSZWNhc3RSZWdpb24uYnVpbGREaXN0YW5jZUZpZWxkKGN0eCwgY2hmKTsgLy8gUGFydGl0aW9uIHRoZSB3YWxrYWJsZSBzdXJmYWNlIGludG8gc2ltcGxlIHJlZ2lvbnMgd2l0aG91dCBob2xlcy5cclxuXHJcbiAgICAgICAgICBSZWNhc3RSZWdpb24uYnVpbGRSZWdpb25zKGN0eCwgY2hmLCBidWlsZGVyQ2ZnLmJvcmRlclNpemUsIGNmZy5taW5SZWdpb25BcmVhLCBjZmcubWVyZ2VSZWdpb25BcmVhKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNmZy5wYXJ0aXRpb25UeXBlID09IFBhcnRpdGlvblR5cGUuTU9OT1RPTkUpIHtcclxuICAgICAgICAgIC8vIFBhcnRpdGlvbiB0aGUgd2Fsa2FibGUgc3VyZmFjZSBpbnRvIHNpbXBsZSByZWdpb25zIHdpdGhvdXQgaG9sZXMuXHJcbiAgICAgICAgICAvLyBNb25vdG9uZSBwYXJ0aXRpb25pbmcgZG9lcyBub3QgbmVlZCBkaXN0YW5jZWZpZWxkLlxyXG4gICAgICAgICAgUmVjYXN0UmVnaW9uLmJ1aWxkUmVnaW9uc01vbm90b25lKGN0eCwgY2hmLCBidWlsZGVyQ2ZnLmJvcmRlclNpemUsIGNmZy5taW5SZWdpb25BcmVhLCBjZmcubWVyZ2VSZWdpb25BcmVhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gUGFydGl0aW9uIHRoZSB3YWxrYWJsZSBzdXJmYWNlIGludG8gc2ltcGxlIHJlZ2lvbnMgd2l0aG91dCBob2xlcy5cclxuICAgICAgICAgIFJlY2FzdFJlZ2lvbi5idWlsZExheWVyUmVnaW9ucyhjdHgsIGNoZiwgYnVpbGRlckNmZy5ib3JkZXJTaXplLCBjZmcubWluUmVnaW9uQXJlYSk7XHJcbiAgICAgICAgfSAvL1xyXG4gICAgICAgIC8vIFN0ZXAgNS4gVHJhY2UgYW5kIHNpbXBsaWZ5IHJlZ2lvbiBjb250b3Vycy5cclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIENyZWF0ZSBjb250b3Vycy5cclxuXHJcblxyXG4gICAgICAgIHZhciBjc2V0ID0gUmVjYXN0Q29udG91ci5idWlsZENvbnRvdXJzKGN0eCwgY2hmLCBjZmcubWF4U2ltcGxpZmljYXRpb25FcnJvciwgY2ZnLm1heEVkZ2VMZW4sIFJlY2FzdENvbnN0YW50cy5SQ19DT05UT1VSX1RFU1NfV0FMTF9FREdFUyk7IC8vXHJcbiAgICAgICAgLy8gU3RlcCA2LiBCdWlsZCBwb2x5Z29ucyBtZXNoIGZyb20gY29udG91cnMuXHJcbiAgICAgICAgLy9cclxuXHJcbiAgICAgICAgdmFyIHBtZXNoID0gUmVjYXN0TWVzaC5idWlsZFBvbHlNZXNoKGN0eCwgY3NldCwgY2ZnLm1heFZlcnRzUGVyUG9seSk7IC8vXHJcbiAgICAgICAgLy8gU3RlcCA3LiBDcmVhdGUgZGV0YWlsIG1lc2ggd2hpY2ggYWxsb3dzIHRvIGFjY2VzcyBhcHByb3hpbWF0ZSBoZWlnaHRcclxuICAgICAgICAvLyBvbiBlYWNoIHBvbHlnb24uXHJcbiAgICAgICAgLy9cclxuXHJcbiAgICAgICAgdmFyIGRtZXNoID0gYnVpbGRlckNmZy5idWlsZE1lc2hEZXRhaWwgPyBSZWNhc3RNZXNoRGV0YWlsLmJ1aWxkUG9seU1lc2hEZXRhaWwoY3R4LCBwbWVzaCwgY2hmLCBjZmcuZGV0YWlsU2FtcGxlRGlzdCwgY2ZnLmRldGFpbFNhbXBsZU1heEVycm9yKSA6IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWNhc3RCdWlsZGVyUmVzdWx0KHBtZXNoLCBkbWVzaCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImJ1aWxkQ29tcGFjdEhlaWdodGZpZWxkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZENvbXBhY3RIZWlnaHRmaWVsZChnZW9tUHJvdmlkZXIsIGJ1aWxkZXJDZmcsIGN0eCkge1xyXG4gICAgICAgIHZhciBjZmcgPSBidWlsZGVyQ2ZnLmNmZzsgLy9cclxuICAgICAgICAvLyBTdGVwIDIuIFJhc3Rlcml6ZSBpbnB1dCBwb2x5Z29uIHNvdXAuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBBbGxvY2F0ZSB2b3hlbCBoZWlnaHRmaWVsZCB3aGVyZSB3ZSByYXN0ZXJpemUgb3VyIGlucHV0IGRhdGEgdG8uXHJcblxyXG4gICAgICAgIHZhciBzb2xpZCA9IG5ldyBIZWlnaHRmaWVsZChidWlsZGVyQ2ZnLndpZHRoLCBidWlsZGVyQ2ZnLmhlaWdodCwgYnVpbGRlckNmZy5ibWluLCBidWlsZGVyQ2ZnLmJtYXgsIGNmZy5jcywgY2ZnLmNoKTsgLy8gQWxsb2NhdGUgYXJyYXkgdGhhdCBjYW4gaG9sZCB0cmlhbmdsZSBhcmVhIHR5cGVzLlxyXG4gICAgICAgIC8vIElmIHlvdSBoYXZlIG11bHRpcGxlIG1lc2hlcyB5b3UgbmVlZCB0byBwcm9jZXNzLCBhbGxvY2F0ZVxyXG4gICAgICAgIC8vIGFuZCBhcnJheSB3aGljaCBjYW4gaG9sZCB0aGUgbWF4IG51bWJlciBvZiB0cmlhbmdsZXMgeW91IG5lZWQgdG9cclxuICAgICAgICAvLyBwcm9jZXNzLlxyXG4gICAgICAgIC8vIEZpbmQgdHJpYW5nbGVzIHdoaWNoIGFyZSB3YWxrYWJsZSBiYXNlZCBvbiB0aGVpciBzbG9wZSBhbmQgcmFzdGVyaXplXHJcbiAgICAgICAgLy8gdGhlbS5cclxuICAgICAgICAvLyBJZiB5b3VyIGlucHV0IGRhdGEgaXMgbXVsdGlwbGUgbWVzaGVzLCB5b3UgY2FuIHRyYW5zZm9ybSB0aGVtIGhlcmUsXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlXHJcbiAgICAgICAgLy8gdGhlIGFyZSB0eXBlIGZvciBlYWNoIG9mIHRoZSBtZXNoZXMgYW5kIHJhc3Rlcml6ZSB0aGVtLlxyXG5cclxuICAgICAgICB2YXIgbWVzaGVzID0gZ2VvbVByb3ZpZGVyLm1lc2hlcygpO1xyXG5cclxuICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobWVzaGVzKSxcclxuICAgICAgICAgICAgX3N0ZXA7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykge1xyXG4gICAgICAgICAgICB2YXIgZ2VvbSA9IF9zdGVwLnZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgdmVydHMgPSBnZW9tLmdldFZlcnRzKCk7XHJcbiAgICAgICAgICAgIHZhciB0aWxlZCA9IGNmZy50aWxlU2l6ZSA+IDA7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbHRyaXMgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRpbGVkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHRibWluID0gbmV3IEFycmF5KDIpO1xyXG4gICAgICAgICAgICAgIHZhciB0Ym1heCA9IG5ldyBBcnJheSgyKTtcclxuICAgICAgICAgICAgICB0Ym1pblswXSA9IGJ1aWxkZXJDZmcuYm1pblswXTtcclxuICAgICAgICAgICAgICB0Ym1pblsxXSA9IGJ1aWxkZXJDZmcuYm1pblsyXTtcclxuICAgICAgICAgICAgICB0Ym1heFswXSA9IGJ1aWxkZXJDZmcuYm1heFswXTtcclxuICAgICAgICAgICAgICB0Ym1heFsxXSA9IGJ1aWxkZXJDZmcuYm1heFsyXTtcclxuICAgICAgICAgICAgICB2YXIgbm9kZXMgPSBnZW9tLmdldENodW5rc092ZXJsYXBwaW5nUmVjdCh0Ym1pbiwgdGJtYXgpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZGVzKSxcclxuICAgICAgICAgICAgICAgICAgX3N0ZXAzO1xyXG5cclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBfc3RlcDMudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB0cmlzID0gbm9kZS50cmlzO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgbnRyaXMgPSB0cmlzLmxlbmd0aCAvIDM7XHJcbiAgICAgICAgICAgICAgICAgIHRvdGFsdHJpcyArPSBudHJpcztcclxuICAgICAgICAgICAgICAgICAgdmFyIG1fdHJpYXJlYXMgPSBSZWNhc3QubWFya1dhbGthYmxlVHJpYW5nbGVzKGN0eCwgY2ZnLndhbGthYmxlU2xvcGVBbmdsZSwgdmVydHMsIHRyaXMsIG50cmlzLCBjZmcud2Fsa2FibGVBcmVhTW9kKTtcclxuICAgICAgICAgICAgICAgICAgUmVjYXN0UmFzdGVyaXphdGlvbi5yYXN0ZXJpemVUcmlhbmdsZXMoY3R4LCB2ZXJ0cywgdHJpcywgbV90cmlhcmVhcywgbnRyaXMsIHNvbGlkLCBjZmcud2Fsa2FibGVDbGltYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTtcclxuICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciBfdHJpcyA9IGdlb20uZ2V0VHJpcygpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgX250cmlzID0gX3RyaXMubGVuZ3RoIC8gMztcclxuXHJcbiAgICAgICAgICAgICAgdmFyIF9tX3RyaWFyZWFzID0gUmVjYXN0Lm1hcmtXYWxrYWJsZVRyaWFuZ2xlcyhjdHgsIGNmZy53YWxrYWJsZVNsb3BlQW5nbGUsIHZlcnRzLCBfdHJpcywgX250cmlzLCBjZmcud2Fsa2FibGVBcmVhTW9kKTtcclxuXHJcbiAgICAgICAgICAgICAgdG90YWx0cmlzID0gX250cmlzO1xyXG4gICAgICAgICAgICAgIFJlY2FzdFJhc3Rlcml6YXRpb24ucmFzdGVyaXplVHJpYW5nbGVzQShjdHgsIHZlcnRzLCBfdHJpcywgX21fdHJpYXJlYXMsIF9udHJpcywgc29saWQsIGNmZy53YWxrYWJsZUNsaW1iKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhzb2xpZC5zcGFuc1swXSlcclxuICAgICAgICAgIC8vXHJcbiAgICAgICAgICAvLyBTdGVwIDMuIEZpbHRlciB3YWxrYWJsZXMgc3VyZmFjZXMuXHJcbiAgICAgICAgICAvL1xyXG4gICAgICAgICAgLy8gT25jZSBhbGwgZ2VvbWV0cnkgaXMgcmFzdGVyaXplZCwgd2UgZG8gaW5pdGlhbCBwYXNzIG9mIGZpbHRlcmluZyB0b1xyXG4gICAgICAgICAgLy8gcmVtb3ZlIHVud2FudGVkIG92ZXJoYW5ncyBjYXVzZWQgYnkgdGhlIGNvbnNlcnZhdGl2ZSByYXN0ZXJpemF0aW9uXHJcbiAgICAgICAgICAvLyBhcyB3ZWxsIGFzIGZpbHRlciBzcGFucyB3aGVyZSB0aGUgY2hhcmFjdGVyIGNhbm5vdCBwb3NzaWJseSBzdGFuZC5cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBfaXRlcmF0b3IuZigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUmVjYXN0RmlsdGVyLmZpbHRlckxvd0hhbmdpbmdXYWxrYWJsZU9ic3RhY2xlcyhjdHgsIGNmZy53YWxrYWJsZUNsaW1iLCBzb2xpZCk7XHJcbiAgICAgICAgUmVjYXN0RmlsdGVyLmZpbHRlckxlZGdlU3BhbnMoY3R4LCBjZmcud2Fsa2FibGVIZWlnaHQsIGNmZy53YWxrYWJsZUNsaW1iLCBzb2xpZCk7XHJcbiAgICAgICAgUmVjYXN0RmlsdGVyLmZpbHRlcldhbGthYmxlTG93SGVpZ2h0U3BhbnMoY3R4LCBjZmcud2Fsa2FibGVIZWlnaHQsIHNvbGlkKTsgLy9cclxuICAgICAgICAvLyBTdGVwIDQuIFBhcnRpdGlvbiB3YWxrYWJsZSBzdXJmYWNlIHRvIHNpbXBsZSByZWdpb25zLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gQ29tcGFjdCB0aGUgaGVpZ2h0ZmllbGQgc28gdGhhdCBpdCBpcyBmYXN0ZXIgdG8gaGFuZGxlIGZyb20gbm93IG9uLlxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCByZXN1bHQgbW9yZSBjYWNoZSBjb2hlcmVudCBkYXRhIGFzIHdlbGwgYXMgdGhlIG5laWdoYm91cnNcclxuICAgICAgICAvLyBiZXR3ZWVuIHdhbGthYmxlIGNlbGxzIHdpbGwgYmUgY2FsY3VsYXRlZC5cclxuXHJcbiAgICAgICAgdmFyIGNoZiA9IFJlY2FzdC5idWlsZENvbXBhY3RIZWlnaHRmaWVsZChjdHgsIGNmZy53YWxrYWJsZUhlaWdodCwgY2ZnLndhbGthYmxlQ2xpbWIsIHNvbGlkKTsgLy8gY29uc29sZS5sb2coY2hmLnNwYW5zWzQ1MDI0MF0pXHJcbiAgICAgICAgLy8gRXJvZGUgdGhlIHdhbGthYmxlIGFyZWEgYnkgYWdlbnQgcmFkaXVzLlxyXG5cclxuICAgICAgICBSZWNhc3RBcmVhLmVyb2RlV2Fsa2FibGVBcmVhKGN0eCwgY2ZnLndhbGthYmxlUmFkaXVzLCBjaGYpOyAvLyAoT3B0aW9uYWwpIE1hcmsgYXJlYXMuXHJcblxyXG4gICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZ2VvbVByb3ZpZGVyLmdldENvbnZleFZvbHVtZXMoKSksXHJcbiAgICAgICAgICAgIF9zdGVwMjtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7XHJcbiAgICAgICAgICAgIHZhciB2b2wgPSBfc3RlcDIudmFsdWU7XHJcbiAgICAgICAgICAgIFJlY2FzdEFyZWEubWFya0NvbnZleFBvbHlBcmVhKGN0eCwgdm9sLnZlcnRzLCB2b2wuaG1pbiwgdm9sLmhtYXgsIHZvbC5hcmVhTW9kLCBjaGYpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIF9pdGVyYXRvcjIuZigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNoZjtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYnVpbGRMYXllcnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJ1aWxkTGF5ZXJzKGdlb20sIGNmZykge1xyXG4gICAgICAgIHZhciBjdHggPSBuZXcgQ29udGV4dCgpO1xyXG4gICAgICAgIHZhciBjaGYgPSBidWlsZENvbXBhY3RIZWlnaHRmaWVsZChnZW9tLCBjZmcsIGN0eCk7XHJcbiAgICAgICAgcmV0dXJuIFJlY2FzdExheWVycy5idWlsZEhlaWdodGZpZWxkTGF5ZXJzKGN0eCwgY2hmLCBjZmcuYm9yZGVyU2l6ZSwgY2ZnLmNmZy53YWxrYWJsZUhlaWdodCk7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gUmVjYXN0QnVpbGRlcjtcclxuICB9KCk7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIC8vLyBSZXByZXNlbnRzIHRoZSBzb3VyY2UgZGF0YSB1c2VkIHRvIGJ1aWxkIGFuIG5hdmlnYXRpb24gbWVzaCB0aWxlLlxyXG4gIHZhciBOYXZNZXNoRGF0YUNyZWF0ZVBhcmFtcyA9IGZ1bmN0aW9uIE5hdk1lc2hEYXRhQ3JlYXRlUGFyYW1zKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5hdk1lc2hEYXRhQ3JlYXRlUGFyYW1zKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJ0c1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydENvdW50XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvbHlzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwb2x5RmxhZ3NcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvbHlBcmVhc1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9seUNvdW50XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm52cFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZXRhaWxNZXNoZXNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRldGFpbFZlcnRzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZXRhaWxWZXJ0c0NvdW50XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRldGFpbFRyaXNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRldGFpbFRyaUNvdW50XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9mZk1lc2hDb25WZXJ0c1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib2ZmTWVzaENvblJhZFwiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib2ZmTWVzaENvbkZsYWdzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvZmZNZXNoQ29uQXJlYXNcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9mZk1lc2hDb25EaXJcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9mZk1lc2hDb25Vc2VySURcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9mZk1lc2hDb25Db3VudFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2VySWRcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGlsZVhcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGlsZVlcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGlsZUxheWVyXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtaW5cIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtYXhcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlSGVpZ2h0XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlUmFkaXVzXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlQ2xpbWJcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY3NcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYnVpbGRCdlRyZWVcIiwgZmFsc2UpO1xyXG4gIH0gLy8vIEB9XHJcbiAgO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuXHJcbiAgLyoqIFByb3ZpZGVzIGhpZ2ggbGV2ZWwgaW5mb3JtYXRpb24gcmVsYXRlZCB0byBhIGR0IG9iamVjdC4qL1xyXG4gIHZhciBNZXNoSGVhZGVyID0gZnVuY3Rpb24gTWVzaEhlYWRlcigpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNZXNoSGVhZGVyKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYWdpY1wiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnNpb25cIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ4XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwieVwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxheWVyXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidXNlcklkXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9seUNvdW50XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVydENvdW50XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibWF4TGlua0NvdW50XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGV0YWlsTWVzaENvdW50XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGV0YWlsVmVydENvdW50XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGV0YWlsVHJpQ291bnRcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJidk5vZGVDb3VudFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9mZk1lc2hDb25Db3VudFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9mZk1lc2hCYXNlXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2Fsa2FibGVIZWlnaHRcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3YWxrYWJsZVJhZGl1c1wiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndhbGthYmxlQ2xpbWJcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWluXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1heFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJ2UXVhbnRGYWN0b3JcIiwgdm9pZCAwKTtcclxuICB9O1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTWVzaEhlYWRlciwgXCJEVF9OQVZNRVNIX01BR0lDXCIsICdEJyA8PCAyNCB8ICdOJyA8PCAxNiB8ICdBJyA8PCA4IHwgJ1YnKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE1lc2hIZWFkZXIsIFwiRFRfTkFWTUVTSF9WRVJTSU9OXCIsIDcpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTWVzaEhlYWRlciwgXCJEVF9OQVZNRVNIX1ZFUlNJT05fUkVDQVNUNEpcIiwgMHg4ODA3KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE1lc2hIZWFkZXIsIFwiRFRfTkFWTUVTSF9TVEFURV9NQUdJQ1wiLCAnRCcgPDwgMjQgfCAnTicgPDwgMTYgfCAnTScgPDwgOCB8ICdTJyk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShNZXNoSGVhZGVyLCBcIkRUX05BVk1FU0hfU1RBVEVfVkVSU0lPTlwiLCAxKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKiBEZWZpbmVzIHRoZSBsb2NhdGlvbiBvZiBkZXRhaWwgc3ViLW1lc2ggZGF0YSB3aXRoaW4gYSBkdE1lc2hUaWxlLiAqL1xyXG4gIHZhciBQb2x5RGV0YWlsID0gZnVuY3Rpb24gUG9seURldGFpbCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb2x5RGV0YWlsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2ZXJ0QmFzZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmlCYXNlXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRDb3VudFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmlDb3VudFwiLCAwKTtcclxuICB9O1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogQm91bmRpbmcgdm9sdW1lIG5vZGUuXHJcbiAgICogXHJcbiAgICogQG5vdGUgVGhpcyBzdHJ1Y3R1cmUgaXMgcmFyZWx5IGlmIGV2ZXIgdXNlZCBieSB0aGUgZW5kIHVzZXIuXHJcbiAgICogQHNlZSBNZXNoVGlsZVxyXG4gICAqL1xyXG4gIHZhciBCVk5vZGUgPSBmdW5jdGlvbiBCVk5vZGUoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQlZOb2RlKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJibWluXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYm1heFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlcIiwgMCk7XHJcbiAgfTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIE1lc2hEYXRhID0gZnVuY3Rpb24gTWVzaERhdGEoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVzaERhdGEpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlYWRlclwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlcnRzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwb2x5c1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGV0YWlsTWVzaGVzXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZXRhaWxWZXJ0c1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGV0YWlsVHJpc1wiLCBbXSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYnZUcmVlXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvZmZNZXNoQ29uc1wiLCBbXSk7XHJcbiAgfTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcblxyXG4gIC8qKlxyXG4gICAqIERlZmluZXMgYW4gbmF2aWdhdGlvbiBtZXNoIG9mZi1tZXNoIGNvbm5lY3Rpb24gd2l0aGluIGEgZHRQb2x5IG9iamVjdC4gQW4gb2ZmLW1lc2ggY29ubmVjdGlvbiBpcyBhIHVzZXIgZGVmaW5lZFxyXG4gICAqIHRyYXZlcnNhYmxlIGNvbm5lY3Rpb24gbWFkZSB1cCB0byB0d28gdmVydGljZXMuXHJcbiAgICovXHJcbiAgdmFyIE9mZk1lc2hDb25uZWN0aW9uID0gZnVuY3Rpb24gT2ZmTWVzaENvbm5lY3Rpb24oKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT2ZmTWVzaENvbm5lY3Rpb24pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvc1wiLCBuZXcgQXJyYXkoNikpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJhZFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwb2x5XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZsYWdzXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNpZGVcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidXNlcklkXCIsIDApO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGFycmF5Y29weSQzKG9uZSwgb25lU3RhcnQsIHR3bywgdHdvU3RhcnQsIGxlbikge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICB0d29bdHdvU3RhcnQgKyBpXSA9IG9uZVtvbmVTdGFydCArIGldO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIEJWSXRlbSA9IGZ1bmN0aW9uIEJWSXRlbSgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCVkl0ZW0pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtaW5cIiwgbmV3IEFycmF5KDMpLmZpbGwoMCkpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJtYXhcIiwgbmV3IEFycmF5KDMpLmZpbGwoMCkpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlcIiwgMCk7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gY29tcGFyZVgoYSwgYikge1xyXG4gICAgaWYgKGEuYm1pblswXSA8IGIuYm1pblswXSkgcmV0dXJuIC0xO1xyXG4gICAgaWYgKGEuYm1pblswXSA+IGIuYm1pblswXSkgcmV0dXJuIDE7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNvbXBhcmVZKGEsIGIpIHtcclxuICAgIGlmIChhLmJtaW5bMV0gPCBiLmJtaW5bMV0pIHJldHVybiAtMTtcclxuICAgIGlmIChhLmJtaW5bMV0gPiBiLmJtaW5bMV0pIHJldHVybiAxO1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21wYXJlWihhLCBiKSB7XHJcbiAgICBpZiAoYS5ibWluWzJdIDwgYi5ibWluWzJdKSByZXR1cm4gLTE7XHJcbiAgICBpZiAoYS5ibWluWzJdID4gYi5ibWluWzJdKSByZXR1cm4gMTtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgdmFyIE5hdk1lc2hCdWlsZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5hdk1lc2hCdWlsZGVyKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmF2TWVzaEJ1aWxkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhOYXZNZXNoQnVpbGRlciwgbnVsbCwgW3tcclxuICAgICAga2V5OiBcImNhbGNFeHRlbmRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYWxjRXh0ZW5kcyhpdGVtcywgbml0ZW1zLCBpbWluLCBpbWF4KSB7XHJcbiAgICAgICAgdmFyIGJtaW4gPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgdmFyIGJtYXggPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgYm1pblswXSA9IGl0ZW1zW2ltaW5dLmJtaW5bMF07XHJcbiAgICAgICAgYm1pblsxXSA9IGl0ZW1zW2ltaW5dLmJtaW5bMV07XHJcbiAgICAgICAgYm1pblsyXSA9IGl0ZW1zW2ltaW5dLmJtaW5bMl07XHJcbiAgICAgICAgYm1heFswXSA9IGl0ZW1zW2ltaW5dLmJtYXhbMF07XHJcbiAgICAgICAgYm1heFsxXSA9IGl0ZW1zW2ltaW5dLmJtYXhbMV07XHJcbiAgICAgICAgYm1heFsyXSA9IGl0ZW1zW2ltaW5dLmJtYXhbMl07XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSBpbWluICsgMTsgaSA8IGltYXg7ICsraSkge1xyXG4gICAgICAgICAgdmFyIGl0ID0gaXRlbXNbaV07XHJcbiAgICAgICAgICBpZiAoaXQuYm1pblswXSA8IGJtaW5bMF0pIGJtaW5bMF0gPSBpdC5ibWluWzBdO1xyXG4gICAgICAgICAgaWYgKGl0LmJtaW5bMV0gPCBibWluWzFdKSBibWluWzFdID0gaXQuYm1pblsxXTtcclxuICAgICAgICAgIGlmIChpdC5ibWluWzJdIDwgYm1pblsyXSkgYm1pblsyXSA9IGl0LmJtaW5bMl07XHJcbiAgICAgICAgICBpZiAoaXQuYm1heFswXSA+IGJtYXhbMF0pIGJtYXhbMF0gPSBpdC5ibWF4WzBdO1xyXG4gICAgICAgICAgaWYgKGl0LmJtYXhbMV0gPiBibWF4WzFdKSBibWF4WzFdID0gaXQuYm1heFsxXTtcclxuICAgICAgICAgIGlmIChpdC5ibWF4WzJdID4gYm1heFsyXSkgYm1heFsyXSA9IGl0LmJtYXhbMl07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW2JtaW4sIGJtYXhdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJsb25nZXN0QXhpc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbG9uZ2VzdEF4aXMoeCwgeSwgeikge1xyXG4gICAgICAgIHZhciBheGlzID0gMDtcclxuICAgICAgICB2YXIgbWF4VmFsID0geDtcclxuXHJcbiAgICAgICAgaWYgKHkgPiBtYXhWYWwpIHtcclxuICAgICAgICAgIGF4aXMgPSAxO1xyXG4gICAgICAgICAgbWF4VmFsID0geTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh6ID4gbWF4VmFsKSB7XHJcbiAgICAgICAgICBheGlzID0gMjtcclxuICAgICAgICAgIG1heFZhbCA9IHo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYXhpcztcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwic3ViZGl2aWRlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJkaXZpZGUoaXRlbXMsIG5pdGVtcywgaW1pbiwgaW1heCwgY3VyTm9kZSwgbm9kZXMpIHtcclxuICAgICAgICB2YXIgaW51bSA9IGltYXggLSBpbWluO1xyXG4gICAgICAgIHZhciBpY3VyID0gY3VyTm9kZTtcclxuICAgICAgICB2YXIgbm9kZSA9IG5ldyBCVk5vZGUoKTtcclxuICAgICAgICBub2Rlc1tjdXJOb2RlKytdID0gbm9kZTtcclxuXHJcbiAgICAgICAgaWYgKGludW0gPT0gMSkge1xyXG4gICAgICAgICAgLy8gTGVhZlxyXG4gICAgICAgICAgbm9kZS5ibWluWzBdID0gaXRlbXNbaW1pbl0uYm1pblswXTtcclxuICAgICAgICAgIG5vZGUuYm1pblsxXSA9IGl0ZW1zW2ltaW5dLmJtaW5bMV07XHJcbiAgICAgICAgICBub2RlLmJtaW5bMl0gPSBpdGVtc1tpbWluXS5ibWluWzJdO1xyXG4gICAgICAgICAgbm9kZS5ibWF4WzBdID0gaXRlbXNbaW1pbl0uYm1heFswXTtcclxuICAgICAgICAgIG5vZGUuYm1heFsxXSA9IGl0ZW1zW2ltaW5dLmJtYXhbMV07XHJcbiAgICAgICAgICBub2RlLmJtYXhbMl0gPSBpdGVtc1tpbWluXS5ibWF4WzJdO1xyXG4gICAgICAgICAgbm9kZS5pID0gaXRlbXNbaW1pbl0uaTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gU3BsaXRcclxuICAgICAgICAgIHZhciBtaW5tYXggPSBOYXZNZXNoQnVpbGRlci5jYWxjRXh0ZW5kcyhpdGVtcywgbml0ZW1zLCBpbWluLCBpbWF4KTtcclxuICAgICAgICAgIG5vZGUuYm1pbiA9IG1pbm1heFswXTtcclxuICAgICAgICAgIG5vZGUuYm1heCA9IG1pbm1heFsxXTtcclxuICAgICAgICAgIHZhciBheGlzID0gTmF2TWVzaEJ1aWxkZXIubG9uZ2VzdEF4aXMobm9kZS5ibWF4WzBdIC0gbm9kZS5ibWluWzBdLCBub2RlLmJtYXhbMV0gLSBub2RlLmJtaW5bMV0sIG5vZGUuYm1heFsyXSAtIG5vZGUuYm1pblsyXSk7XHJcblxyXG4gICAgICAgICAgaWYgKGF4aXMgPT0gMCkge1xyXG4gICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHgtYXhpc1xyXG4gICAgICAgICAgICAvL0FycmF5cy5zb3J0KGl0ZW1zLCBpbWluLCBpbWluICsgaW51bSwgbmV3IENvbXBhcmVJdGVtWCgpKTtcclxuICAgICAgICAgICAgLy9UT0RPOiBpcyB0aGlzIHJpZ2h0P1xyXG4gICAgICAgICAgICB2YXIgc2hhbGxvd0NvcHkgPSBpdGVtcy5zbGljZShpbWluLCBpbWluICsgaW51bSk7XHJcbiAgICAgICAgICAgIHNoYWxsb3dDb3B5ID0gc2hhbGxvd0NvcHkuc29ydChjb21wYXJlWCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gaW1pbjsgaSA8IGltaW4gKyBpbnVtOyBpKyspIHtcclxuICAgICAgICAgICAgICBpdGVtc1tpXSA9IHNoYWxsb3dDb3B5W2kgLSBpbWluXTtcclxuICAgICAgICAgICAgICBpZiAoIWl0ZW1zW2ldKSBjb25zb2xlLmxvZyhcInVoLW9oXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGF4aXMgPT0gMSkge1xyXG4gICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHktYXhpc1xyXG4gICAgICAgICAgICAvL0FycmF5cy5zb3J0KGl0ZW1zLCBpbWluLCBpbWluICsgaW51bSwgbmV3IENvbXBhcmVJdGVtWSgpKTtcclxuICAgICAgICAgICAgdmFyIF9zaGFsbG93Q29weSA9IGl0ZW1zLnNsaWNlKGltaW4sIGltaW4gKyBpbnVtKTtcclxuXHJcbiAgICAgICAgICAgIF9zaGFsbG93Q29weSA9IF9zaGFsbG93Q29weS5zb3J0KGNvbXBhcmVZKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gaW1pbjsgX2kgPCBpbWluICsgaW51bTsgX2krKykge1xyXG4gICAgICAgICAgICAgIGl0ZW1zW19pXSA9IF9zaGFsbG93Q29weVtfaSAtIGltaW5dO1xyXG4gICAgICAgICAgICAgIGlmICghaXRlbXNbX2ldKSBjb25zb2xlLmxvZyhcInVoLW9oXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBTb3J0IGFQb2x5IHotYXhpc1xyXG4gICAgICAgICAgICAvL0FycmF5cy5zb3J0KGl0ZW1zLCBpbWluLCBpbWluICsgaW51bSwgbmV3IENvbXBhcmVJdGVtWigpKTtcclxuICAgICAgICAgICAgdmFyIF9zaGFsbG93Q29weTIgPSBpdGVtcy5zbGljZShpbWluLCBpbWluICsgaW51bSk7XHJcblxyXG4gICAgICAgICAgICBfc2hhbGxvd0NvcHkyID0gX3NoYWxsb3dDb3B5Mi5zb3J0KGNvbXBhcmVaKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pMiA9IGltaW47IF9pMiA8IGltaW4gKyBpbnVtOyBfaTIrKykge1xyXG4gICAgICAgICAgICAgIGl0ZW1zW19pMl0gPSBfc2hhbGxvd0NvcHkyW19pMiAtIGltaW5dO1xyXG4gICAgICAgICAgICAgIGlmICghaXRlbXNbX2kyXSkgY29uc29sZS5sb2coXCJ1aC1vaFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBpc3BsaXQgPSBNYXRoLmZsb29yKGltaW4gKyBpbnVtIC8gMik7IC8vIExlZnRcclxuXHJcbiAgICAgICAgICBjdXJOb2RlID0gTmF2TWVzaEJ1aWxkZXIuc3ViZGl2aWRlKGl0ZW1zLCBuaXRlbXMsIGltaW4sIGlzcGxpdCwgY3VyTm9kZSwgbm9kZXMpOyAvLyBSaWdodFxyXG5cclxuICAgICAgICAgIGN1ck5vZGUgPSBOYXZNZXNoQnVpbGRlci5zdWJkaXZpZGUoaXRlbXMsIG5pdGVtcywgaXNwbGl0LCBpbWF4LCBjdXJOb2RlLCBub2Rlcyk7XHJcbiAgICAgICAgICB2YXIgaWVzY2FwZSA9IGN1ck5vZGUgLSBpY3VyOyAvLyBOZWdhdGl2ZSBpbmRleCBtZWFucyBlc2NhcGUuXHJcblxyXG4gICAgICAgICAgbm9kZS5pID0gLWllc2NhcGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY3VyTm9kZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY3JlYXRlQlZUcmVlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVCVlRyZWUocGFyYW1zLCBub2Rlcykge1xyXG4gICAgICAgIC8vIEJ1aWxkIHRyZWVcclxuICAgICAgICB2YXIgcXVhbnRGYWN0b3IgPSAxIC8gcGFyYW1zLmNzO1xyXG4gICAgICAgIHZhciBpdGVtcyA9IG5ldyBBcnJheShwYXJhbXMucG9seUNvdW50KS5maWxsKG51bGwpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5wb2x5Q291bnQ7IGkrKykge1xyXG4gICAgICAgICAgdmFyIGl0ID0gbmV3IEJWSXRlbSgpO1xyXG4gICAgICAgICAgaXRlbXNbaV0gPSBpdDtcclxuICAgICAgICAgIGl0LmkgPSBpOyAvLyBDYWxjIHBvbHlnb24gYm91bmRzLiBVc2UgZGV0YWlsIG1lc2hlcyBpZiBhdmFpbGFibGUuXHJcblxyXG4gICAgICAgICAgaWYgKHBhcmFtcy5kZXRhaWxNZXNoZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBwYXJhbXMuZGV0YWlsTWVzaGVzW2kgKiA0ICsgMF07XHJcbiAgICAgICAgICAgIHZhciBuZHYgPSBwYXJhbXMuZGV0YWlsTWVzaGVzW2kgKiA0ICsgMV07XHJcbiAgICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgICB2YXIgYm1heCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICAgICAgdmFyIGR2ID0gdmIgKiAzO1xyXG4gICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYm1pbiwgcGFyYW1zLmRldGFpbFZlcnRzLCBkdik7XHJcbiAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShibWF4LCBwYXJhbXMuZGV0YWlsVmVydHMsIGR2KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgbmR2OyBqKyspIHtcclxuICAgICAgICAgICAgICBEZXRvdXJDb21tb24udk1pbihibWluLCBwYXJhbXMuZGV0YWlsVmVydHMsIGR2ICsgaiAqIDMpO1xyXG4gICAgICAgICAgICAgIERldG91ckNvbW1vbi52TWF4KGJtYXgsIHBhcmFtcy5kZXRhaWxWZXJ0cywgZHYgKyBqICogMyk7XHJcbiAgICAgICAgICAgIH0gLy8gQlYtdHJlZSB1c2VzIGNzIGZvciBhbGwgZGltZW5zaW9uc1xyXG5cclxuXHJcbiAgICAgICAgICAgIGl0LmJtaW5bMF0gPSBEZXRvdXJDb21tb24uY2xhbXAoTWF0aC5yb3VuZCgoYm1pblswXSAtIHBhcmFtcy5ibWluWzBdKSAqIHF1YW50RmFjdG9yKSwgMCwgMHhmZmZmKTtcclxuICAgICAgICAgICAgaXQuYm1pblsxXSA9IERldG91ckNvbW1vbi5jbGFtcChNYXRoLnJvdW5kKChibWluWzFdIC0gcGFyYW1zLmJtaW5bMV0pICogcXVhbnRGYWN0b3IpLCAwLCAweGZmZmYpO1xyXG4gICAgICAgICAgICBpdC5ibWluWzJdID0gRGV0b3VyQ29tbW9uLmNsYW1wKE1hdGgucm91bmQoKGJtaW5bMl0gLSBwYXJhbXMuYm1pblsyXSkgKiBxdWFudEZhY3RvciksIDAsIDB4ZmZmZik7XHJcbiAgICAgICAgICAgIGl0LmJtYXhbMF0gPSBEZXRvdXJDb21tb24uY2xhbXAoTWF0aC5yb3VuZCgoYm1heFswXSAtIHBhcmFtcy5ibWluWzBdKSAqIHF1YW50RmFjdG9yKSwgMCwgMHhmZmZmKTtcclxuICAgICAgICAgICAgaXQuYm1heFsxXSA9IERldG91ckNvbW1vbi5jbGFtcChNYXRoLnJvdW5kKChibWF4WzFdIC0gcGFyYW1zLmJtaW5bMV0pICogcXVhbnRGYWN0b3IpLCAwLCAweGZmZmYpO1xyXG4gICAgICAgICAgICBpdC5ibWF4WzJdID0gRGV0b3VyQ29tbW9uLmNsYW1wKE1hdGgucm91bmQoKGJtYXhbMl0gLSBwYXJhbXMuYm1pblsyXSkgKiBxdWFudEZhY3RvciksIDAsIDB4ZmZmZik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgcCA9IGkgKiBwYXJhbXMubnZwICogMjtcclxuICAgICAgICAgICAgaXQuYm1pblswXSA9IGl0LmJtYXhbMF0gPSBwYXJhbXMudmVydHNbcGFyYW1zLnBvbHlzW3BdICogMyArIDBdO1xyXG4gICAgICAgICAgICBpdC5ibWluWzFdID0gaXQuYm1heFsxXSA9IHBhcmFtcy52ZXJ0c1twYXJhbXMucG9seXNbcF0gKiAzICsgMV07XHJcbiAgICAgICAgICAgIGl0LmJtaW5bMl0gPSBpdC5ibWF4WzJdID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twXSAqIDMgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qID0gMTsgX2ogPCBwYXJhbXMubnZwOyArK19qKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHBhcmFtcy5wb2x5c1twICsgX2pdID09IE5hdk1lc2hCdWlsZGVyLk1FU0hfTlVMTF9JRFgpIGJyZWFrO1xyXG4gICAgICAgICAgICAgIHZhciB4ID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twICsgX2pdICogMyArIDBdO1xyXG4gICAgICAgICAgICAgIHZhciB5ID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twICsgX2pdICogMyArIDFdO1xyXG4gICAgICAgICAgICAgIHZhciB6ID0gcGFyYW1zLnZlcnRzW3BhcmFtcy5wb2x5c1twICsgX2pdICogMyArIDJdO1xyXG4gICAgICAgICAgICAgIGlmICh4IDwgaXQuYm1pblswXSkgaXQuYm1pblswXSA9IHg7XHJcbiAgICAgICAgICAgICAgaWYgKHkgPCBpdC5ibWluWzFdKSBpdC5ibWluWzFdID0geTtcclxuICAgICAgICAgICAgICBpZiAoeiA8IGl0LmJtaW5bMl0pIGl0LmJtaW5bMl0gPSB6O1xyXG4gICAgICAgICAgICAgIGlmICh4ID4gaXQuYm1heFswXSkgaXQuYm1heFswXSA9IHg7XHJcbiAgICAgICAgICAgICAgaWYgKHkgPiBpdC5ibWF4WzFdKSBpdC5ibWF4WzFdID0geTtcclxuICAgICAgICAgICAgICBpZiAoeiA+IGl0LmJtYXhbMl0pIGl0LmJtYXhbMl0gPSB6O1xyXG4gICAgICAgICAgICB9IC8vIFJlbWFwIHlcclxuXHJcblxyXG4gICAgICAgICAgICBpdC5ibWluWzFdID0gTWF0aC5mbG9vcihpdC5ibWluWzFdICogcGFyYW1zLmNoIC8gcGFyYW1zLmNzKTtcclxuICAgICAgICAgICAgaXQuYm1heFsxXSA9IE1hdGguY2VpbChpdC5ibWF4WzFdICogcGFyYW1zLmNoIC8gcGFyYW1zLmNzKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBOYXZNZXNoQnVpbGRlci5zdWJkaXZpZGUoaXRlbXMsIHBhcmFtcy5wb2x5Q291bnQsIDAsIHBhcmFtcy5wb2x5Q291bnQsIDAsIG5vZGVzKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY2xhc3NpZnlPZmZNZXNoUG9pbnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsYXNzaWZ5T2ZmTWVzaFBvaW50KHB0LCBibWluLCBibWF4KSB7XHJcbiAgICAgICAgdmFyIG91dGNvZGUgPSAwO1xyXG4gICAgICAgIG91dGNvZGUgfD0gcHRbMF0gPj0gYm1heFswXSA/IE5hdk1lc2hCdWlsZGVyLlhQIDogMDtcclxuICAgICAgICBvdXRjb2RlIHw9IHB0WzJdID49IGJtYXhbMl0gPyBaUCA6IDA7XHJcbiAgICAgICAgb3V0Y29kZSB8PSBwdFswXSA8IGJtaW5bMF0gPyBYTSA6IDA7XHJcbiAgICAgICAgb3V0Y29kZSB8PSBwdFsyXSA8IGJtaW5bMl0gPyBaTSA6IDA7XHJcblxyXG4gICAgICAgIHN3aXRjaCAob3V0Y29kZSkge1xyXG4gICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5YUDpcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcblxyXG4gICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5YUCB8IE5hdk1lc2hCdWlsZGVyLlpQOlxyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuXHJcbiAgICAgICAgICBjYXNlIE5hdk1lc2hCdWlsZGVyLlpQOlxyXG4gICAgICAgICAgICByZXR1cm4gMjtcclxuXHJcbiAgICAgICAgICBjYXNlIE5hdk1lc2hCdWlsZGVyLlhNIHwgTmF2TWVzaEJ1aWxkZXIuWlA6XHJcbiAgICAgICAgICAgIHJldHVybiAzO1xyXG5cclxuICAgICAgICAgIGNhc2UgTmF2TWVzaEJ1aWxkZXIuWE06XHJcbiAgICAgICAgICAgIHJldHVybiA0O1xyXG5cclxuICAgICAgICAgIGNhc2UgTmF2TWVzaEJ1aWxkZXIuWE0gfCBOYXZNZXNoQnVpbGRlci5aTTpcclxuICAgICAgICAgICAgcmV0dXJuIDU7XHJcblxyXG4gICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5aTTpcclxuICAgICAgICAgICAgcmV0dXJuIDY7XHJcblxyXG4gICAgICAgICAgY2FzZSBOYXZNZXNoQnVpbGRlci5YUCB8IE5hdk1lc2hCdWlsZGVyLlpNOlxyXG4gICAgICAgICAgICByZXR1cm4gNztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAweGZmO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCdWlsZHMgbmF2aWdhdGlvbiBtZXNoIHRpbGUgZGF0YSBmcm9tIHRoZSBwcm92aWRlZCB0aWxlIGNyZWF0aW9uIGRhdGEuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAcGFyYW0gcGFyYW1zXHJcbiAgICAgICAqICAgICAgICAgICAgVGlsZSBjcmVhdGlvbiBkYXRhLlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHJldHVybiBjcmVhdGVkIHRpbGUgZGF0YVxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjcmVhdGVOYXZNZXNoRGF0YVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTmF2TWVzaERhdGEocGFyYW1zKSB7XHJcbiAgICAgICAgaWYgKHBhcmFtcy52ZXJ0Q291bnQgPj0gMHhmZmZmKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAocGFyYW1zLnZlcnRDb3VudCA9PSAwIHx8IHBhcmFtcy52ZXJ0cyA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBpZiAocGFyYW1zLnBvbHlDb3VudCA9PSAwIHx8IHBhcmFtcy5wb2x5cyA9PSBudWxsKSByZXR1cm4gbnVsbDtcclxuICAgICAgICB2YXIgbnZwID0gcGFyYW1zLm52cDsgLy8gQ2xhc3NpZnkgb2ZmLW1lc2ggY29ubmVjdGlvbiBwb2ludHMuIFdlIHN0b3JlIG9ubHkgdGhlIGNvbm5lY3Rpb25zXHJcbiAgICAgICAgLy8gd2hvc2Ugc3RhcnQgcG9Qb2x5IGlzIGluc2lkZSB0aGUgdGlsZS5cclxuXHJcbiAgICAgICAgdmFyIG9mZk1lc2hDb25DbGFzcyA9IG51bGw7XHJcbiAgICAgICAgdmFyIHN0b3JlZE9mZk1lc2hDb25Db3VudCA9IDA7XHJcbiAgICAgICAgdmFyIG9mZk1lc2hDb25MaW5rQ291bnQgPSAwO1xyXG5cclxuICAgICAgICBpZiAocGFyYW1zLm9mZk1lc2hDb25Db3VudCA+IDApIHtcclxuICAgICAgICAgIG9mZk1lc2hDb25DbGFzcyA9IG5ldyBBcnJheShwYXJhbXMub2ZmTWVzaENvbkNvdW50ICogMik7IC8vIEZpbmQgdGlnaHQgaGVpZ2ggYm91bmRzLCB1c2VkIGZvciBjdWxsaW5nIG91dCBvZmYtbWVzaCBzdGFydFxyXG4gICAgICAgICAgLy8gbG9jYXRpb25zLlxyXG5cclxuICAgICAgICAgIHZhciBobWluID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICAgIHZhciBobWF4ID0gLU51bWJlci5NQVhfVkFMVUU7XHJcblxyXG4gICAgICAgICAgaWYgKHBhcmFtcy5kZXRhaWxWZXJ0cyAhPSBudWxsICYmIHBhcmFtcy5kZXRhaWxWZXJ0c0NvdW50ICE9IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMuZGV0YWlsVmVydHNDb3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgdmFyIF9oID0gcGFyYW1zLmRldGFpbFZlcnRzW2kgKiAzICsgMV07XHJcbiAgICAgICAgICAgICAgaG1pbiA9IE1hdGgubWluKGhtaW4sIF9oKTtcclxuICAgICAgICAgICAgICBobWF4ID0gTWF0aC5tYXgoaG1heCwgX2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaTMgPSAwOyBfaTMgPCBwYXJhbXMudmVydENvdW50OyArK19pMykge1xyXG4gICAgICAgICAgICAgIHZhciBpdiA9IF9pMyAqIDM7XHJcbiAgICAgICAgICAgICAgaCA9IHBhcmFtcy5ibWluWzFdICsgcGFyYW1zLnZlcnRzW2l2ICsgMV0gKiBwYXJhbXMuY2g7XHJcbiAgICAgICAgICAgICAgaG1pbiA9IE1hdGgubWluKGhtaW4sIGgpO1xyXG4gICAgICAgICAgICAgIGhtYXggPSBNYXRoLm1heChobWF4LCBoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGhtaW4gLT0gcGFyYW1zLndhbGthYmxlQ2xpbWI7XHJcbiAgICAgICAgICBobWF4ICs9IHBhcmFtcy53YWxrYWJsZUNsaW1iO1xyXG4gICAgICAgICAgdmFyIGJtaW4gPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgICB2YXIgYm1heCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShibWluLCBwYXJhbXMuYm1pbik7XHJcbiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoYm1heCwgcGFyYW1zLmJtYXgpO1xyXG4gICAgICAgICAgYm1pblsxXSA9IGhtaW47XHJcbiAgICAgICAgICBibWF4WzFdID0gaG1heDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaTQgPSAwOyBfaTQgPCBwYXJhbXMub2ZmTWVzaENvbkNvdW50OyArK19pNCkge1xyXG4gICAgICAgICAgICB2YXIgcDAgPSBuZXcgVmVjdG9yUHRyJDEocGFyYW1zLm9mZk1lc2hDb25WZXJ0cywgKF9pNCAqIDIgKyAwKSAqIDMpO1xyXG4gICAgICAgICAgICB2YXIgcDEgPSBuZXcgVmVjdG9yUHRyJDEocGFyYW1zLm9mZk1lc2hDb25WZXJ0cywgKF9pNCAqIDIgKyAxKSAqIDMpO1xyXG4gICAgICAgICAgICBvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDBdID0gTmF2TWVzaEJ1aWxkZXIuY2xhc3NpZnlPZmZNZXNoUG9pbnQocDAsIGJtaW4sIGJtYXgpO1xyXG4gICAgICAgICAgICBvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDFdID0gTmF2TWVzaEJ1aWxkZXIuY2xhc3NpZnlPZmZNZXNoUG9pbnQocDEsIGJtaW4sIGJtYXgpOyAvLyBaZXJvIG91dCBvZmYtbWVzaCBzdGFydCBwb3NpdGlvbnMgd2hpY2ggYXJlIG5vdCBldmVuXHJcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IHRvdWNoaW5nIHRoZSBtZXNoLlxyXG5cclxuICAgICAgICAgICAgaWYgKG9mZk1lc2hDb25DbGFzc1tfaTQgKiAyICsgMF0gPT0gMHhmZikge1xyXG4gICAgICAgICAgICAgIGlmIChwMFsxXSA8IGJtaW5bMV0gfHwgcDBbMV0gPiBibWF4WzFdKSBvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDBdID0gMDtcclxuICAgICAgICAgICAgfSAvLyBDb3VudCBob3cgbWFueSBsaW5rcyBzaG91bGQgYmUgYWxsb2NhdGVkIGZvciBvZmYtbWVzaFxyXG4gICAgICAgICAgICAvLyBjb25uZWN0aW9ucy5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAob2ZmTWVzaENvbkNsYXNzW19pNCAqIDIgKyAwXSA9PSAweGZmKSBvZmZNZXNoQ29uTGlua0NvdW50Kys7XHJcbiAgICAgICAgICAgIGlmIChvZmZNZXNoQ29uQ2xhc3NbX2k0ICogMiArIDFdID09IDB4ZmYpIG9mZk1lc2hDb25MaW5rQ291bnQrKztcclxuICAgICAgICAgICAgaWYgKG9mZk1lc2hDb25DbGFzc1tfaTQgKiAyICsgMF0gPT0gMHhmZikgc3RvcmVkT2ZmTWVzaENvbkNvdW50Kys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBPZmYtbWVzaCBjb25uZWN0aW9uc3MgYXJlIHN0b3JlZCBhcyBwb2x5Z29ucywgYWRqdXN0IHZhbHVlcy5cclxuXHJcblxyXG4gICAgICAgIHZhciB0b3RQb2x5Q291bnQgPSBwYXJhbXMucG9seUNvdW50ICsgc3RvcmVkT2ZmTWVzaENvbkNvdW50O1xyXG4gICAgICAgIHZhciB0b3RWZXJ0Q291bnQgPSBwYXJhbXMudmVydENvdW50ICsgc3RvcmVkT2ZmTWVzaENvbkNvdW50ICogMjsgLy8gRmluZCBwb3J0YWwgZWRnZXMgd2hpY2ggYXJlIGF0IHRpbGUgYm9yZGVycy5cclxuXHJcbiAgICAgICAgdmFyIGVkZ2VDb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIHBvcnRhbENvdW50ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgcGFyYW1zLnBvbHlDb3VudDsgKytfaTUpIHtcclxuICAgICAgICAgIHZhciBwID0gX2k1ICogMiAqIG52cDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG52cDsgKytqKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucG9seXNbcCArIGpdID09IE5hdk1lc2hCdWlsZGVyLk1FU0hfTlVMTF9JRFgpIGJyZWFrO1xyXG4gICAgICAgICAgICBlZGdlQ291bnQrKztcclxuXHJcbiAgICAgICAgICAgIGlmICgocGFyYW1zLnBvbHlzW3AgKyBudnAgKyBqXSAmIDB4ODAwMCkgIT0gMCkge1xyXG4gICAgICAgICAgICAgIHZhciBkaXIgPSBwYXJhbXMucG9seXNbcCArIG52cCArIGpdICYgMHhmO1xyXG4gICAgICAgICAgICAgIGlmIChkaXIgIT0gMHhmKSBwb3J0YWxDb3VudCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWF4TGlua0NvdW50ID0gZWRnZUNvdW50ICsgcG9ydGFsQ291bnQgKiAyICsgb2ZmTWVzaENvbkxpbmtDb3VudCAqIDI7IC8vIEZpbmQgdW5pcXVlIGRldGFpbCB2ZXJ0aWNlcy5cclxuXHJcbiAgICAgICAgdmFyIHVuaXF1ZURldGFpbFZlcnRDb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGRldGFpbFRyaUNvdW50ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHBhcmFtcy5kZXRhaWxNZXNoZXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgLy8gSGFzIGRldGFpbCBtZXNoLCBjb3VudCB1bmlxdWUgZGV0YWlsIHZlcnRleCBjb3VudCBhbmQgdXNlIGlucHV0XHJcbiAgICAgICAgICAvLyBkZXRhaWwgdHJpIGNvdW50LlxyXG4gICAgICAgICAgZGV0YWlsVHJpQ291bnQgPSBwYXJhbXMuZGV0YWlsVHJpQ291bnQ7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k2ID0gMDsgX2k2IDwgcGFyYW1zLnBvbHlDb3VudDsgKytfaTYpIHtcclxuICAgICAgICAgICAgdmFyIF9wID0gX2k2ICogbnZwICogMjtcclxuXHJcbiAgICAgICAgICAgIHZhciBuZHYgPSBwYXJhbXMuZGV0YWlsTWVzaGVzW19pNiAqIDQgKyAxXTtcclxuICAgICAgICAgICAgdmFyIG52ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qMiA9IDA7IF9qMiA8IG52cDsgKytfajIpIHtcclxuICAgICAgICAgICAgICBpZiAocGFyYW1zLnBvbHlzW19wICsgX2oyXSA9PSBOYXZNZXNoQnVpbGRlci5NRVNIX05VTExfSURYKSBicmVhaztcclxuICAgICAgICAgICAgICBudisrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZHYgLT0gbnY7XHJcbiAgICAgICAgICAgIHVuaXF1ZURldGFpbFZlcnRDb3VudCArPSBuZHY7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIE5vIGlucHV0IGRldGFpbCBtZXNoLCBidWlsZCBkZXRhaWwgbWVzaCBmcm9tIG5hdiBwb2x5cy5cclxuICAgICAgICAgIHVuaXF1ZURldGFpbFZlcnRDb3VudCA9IDA7IC8vIE5vIGV4dHJhIGRldGFpbCB2ZXJ0cy5cclxuXHJcbiAgICAgICAgICBkZXRhaWxUcmlDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k3ID0gMDsgX2k3IDwgcGFyYW1zLnBvbHlDb3VudDsgKytfaTcpIHtcclxuICAgICAgICAgICAgdmFyIF9wMiA9IF9pNyAqIG52cCAqIDI7XHJcblxyXG4gICAgICAgICAgICB2YXIgX252ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qMyA9IDA7IF9qMyA8IG52cDsgKytfajMpIHtcclxuICAgICAgICAgICAgICBpZiAocGFyYW1zLnBvbHlzW19wMiArIF9qM10gPT0gTmF2TWVzaEJ1aWxkZXIuTUVTSF9OVUxMX0lEWCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgX252Kys7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRldGFpbFRyaUNvdW50ICs9IF9udiAtIDI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYnZUcmVlU2l6ZSA9IHBhcmFtcy5idWlsZEJ2VHJlZSA/IHBhcmFtcy5wb2x5Q291bnQgKiAyIDogMDtcclxuICAgICAgICB2YXIgaGVhZGVyID0gbmV3IE1lc2hIZWFkZXIoKTtcclxuICAgICAgICB2YXIgbmF2VmVydHMgPSBuZXcgQXJyYXkoMyAqIHRvdFZlcnRDb3VudCk7XHJcbiAgICAgICAgdmFyIG5hdlBvbHlzID0gbmV3IEFycmF5KHRvdFBvbHlDb3VudCk7XHJcbiAgICAgICAgdmFyIG5hdkRNZXNoZXMgPSBuZXcgQXJyYXkocGFyYW1zLnBvbHlDb3VudCk7XHJcbiAgICAgICAgdmFyIG5hdkRWZXJ0cyA9IG5ldyBBcnJheSgzICogdW5pcXVlRGV0YWlsVmVydENvdW50KTtcclxuICAgICAgICB2YXIgbmF2RFRyaXMgPSBuZXcgQXJyYXkoNCAqIGRldGFpbFRyaUNvdW50KTtcclxuICAgICAgICB2YXIgbmF2QnZ0cmVlID0gbmV3IEFycmF5KGJ2VHJlZVNpemUpO1xyXG4gICAgICAgIHZhciBvZmZNZXNoQ29ucyA9IG5ldyBBcnJheShzdG9yZWRPZmZNZXNoQ29uQ291bnQpOyAvLyBTdG9yZSBoZWFkZXJcclxuXHJcbiAgICAgICAgaGVhZGVyLm1hZ2ljID0gTWVzaEhlYWRlci5EVF9OQVZNRVNIX01BR0lDO1xyXG4gICAgICAgIGhlYWRlci52ZXJzaW9uID0gTWVzaEhlYWRlci5EVF9OQVZNRVNIX1ZFUlNJT047XHJcbiAgICAgICAgaGVhZGVyLnggPSBwYXJhbXMudGlsZVg7XHJcbiAgICAgICAgaGVhZGVyLnkgPSBwYXJhbXMudGlsZVk7XHJcbiAgICAgICAgaGVhZGVyLmxheWVyID0gcGFyYW1zLnRpbGVMYXllcjtcclxuICAgICAgICBoZWFkZXIudXNlcklkID0gcGFyYW1zLnVzZXJJZDtcclxuICAgICAgICBoZWFkZXIucG9seUNvdW50ID0gdG90UG9seUNvdW50O1xyXG4gICAgICAgIGhlYWRlci52ZXJ0Q291bnQgPSB0b3RWZXJ0Q291bnQ7XHJcbiAgICAgICAgaGVhZGVyLm1heExpbmtDb3VudCA9IG1heExpbmtDb3VudDtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoaGVhZGVyLmJtaW4sIHBhcmFtcy5ibWluKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoaGVhZGVyLmJtYXgsIHBhcmFtcy5ibWF4KTtcclxuICAgICAgICBoZWFkZXIuZGV0YWlsTWVzaENvdW50ID0gcGFyYW1zLnBvbHlDb3VudDtcclxuICAgICAgICBoZWFkZXIuZGV0YWlsVmVydENvdW50ID0gdW5pcXVlRGV0YWlsVmVydENvdW50O1xyXG4gICAgICAgIGhlYWRlci5kZXRhaWxUcmlDb3VudCA9IGRldGFpbFRyaUNvdW50O1xyXG4gICAgICAgIGhlYWRlci5idlF1YW50RmFjdG9yID0gMS4wIC8gcGFyYW1zLmNzO1xyXG4gICAgICAgIGhlYWRlci5vZmZNZXNoQmFzZSA9IHBhcmFtcy5wb2x5Q291bnQ7XHJcbiAgICAgICAgaGVhZGVyLndhbGthYmxlSGVpZ2h0ID0gcGFyYW1zLndhbGthYmxlSGVpZ2h0O1xyXG4gICAgICAgIGhlYWRlci53YWxrYWJsZVJhZGl1cyA9IHBhcmFtcy53YWxrYWJsZVJhZGl1cztcclxuICAgICAgICBoZWFkZXIud2Fsa2FibGVDbGltYiA9IHBhcmFtcy53YWxrYWJsZUNsaW1iO1xyXG4gICAgICAgIGhlYWRlci5vZmZNZXNoQ29uQ291bnQgPSBzdG9yZWRPZmZNZXNoQ29uQ291bnQ7XHJcbiAgICAgICAgaGVhZGVyLmJ2Tm9kZUNvdW50ID0gYnZUcmVlU2l6ZTtcclxuICAgICAgICB2YXIgb2ZmTWVzaFZlcnRzQmFzZSA9IHBhcmFtcy52ZXJ0Q291bnQ7XHJcbiAgICAgICAgdmFyIG9mZk1lc2hQb2x5QmFzZSA9IHBhcmFtcy5wb2x5Q291bnQ7IC8vIFN0b3JlIHZlcnRpY2VzXHJcbiAgICAgICAgLy8gTWVzaCB2ZXJ0aWNlc1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBwYXJhbXMudmVydENvdW50OyArK19pOCkge1xyXG4gICAgICAgICAgdmFyIF9pdiA9IF9pOCAqIDM7XHJcblxyXG4gICAgICAgICAgdmFyIHYgPSBfaTggKiAzO1xyXG4gICAgICAgICAgbmF2VmVydHNbdl0gPSBwYXJhbXMuYm1pblswXSArIHBhcmFtcy52ZXJ0c1tfaXZdICogcGFyYW1zLmNzO1xyXG4gICAgICAgICAgbmF2VmVydHNbdiArIDFdID0gcGFyYW1zLmJtaW5bMV0gKyBwYXJhbXMudmVydHNbX2l2ICsgMV0gKiBwYXJhbXMuY2g7XHJcbiAgICAgICAgICBuYXZWZXJ0c1t2ICsgMl0gPSBwYXJhbXMuYm1pblsyXSArIHBhcmFtcy52ZXJ0c1tfaXYgKyAyXSAqIHBhcmFtcy5jczsgLy8gY29uc29sZS5sb2cobmF2VmVydHMpXHJcbiAgICAgICAgfSAvLyBPZmYtbWVzaCBsaW5rIHZlcnRpY2VzLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIG4gPSAwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBwYXJhbXMub2ZmTWVzaENvbkNvdW50OyArK19pOSkge1xyXG4gICAgICAgICAgLy8gT25seSBzdG9yZSBjb25uZWN0aW9ucyB3aGljaCBzdGFydCBmcm9tIHRoaXMgdGlsZS5cclxuICAgICAgICAgIGlmIChvZmZNZXNoQ29uQ2xhc3NbX2k5ICogMiArIDBdID09IDB4ZmYpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmt2ID0gX2k5ICogMiAqIDM7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3YgPSAob2ZmTWVzaFZlcnRzQmFzZSArIG4gKiAyKSAqIDM7XHJcblxyXG4gICAgICAgICAgICBhcnJheWNvcHkkMyhwYXJhbXMub2ZmTWVzaENvblZlcnRzLCBsaW5rdiwgbmF2VmVydHMsIF92LCA2KTtcclxuICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gU3RvcmUgcG9seWdvbnNcclxuICAgICAgICAvLyBNZXNoIHBvbHlzXHJcblxyXG5cclxuICAgICAgICB2YXIgc3JjID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCBwYXJhbXMucG9seUNvdW50OyArK19pMTApIHtcclxuICAgICAgICAgIHZhciBfcDMgPSBuZXcgUG9seShfaTEwLCBudnApO1xyXG5cclxuICAgICAgICAgIG5hdlBvbHlzW19pMTBdID0gX3AzO1xyXG4gICAgICAgICAgX3AzLnZlcnRDb3VudCA9IDA7XHJcbiAgICAgICAgICBfcDMuZmxhZ3MgPSBwYXJhbXMucG9seUZsYWdzW19pMTBdO1xyXG5cclxuICAgICAgICAgIF9wMy5zZXRBcmVhKHBhcmFtcy5wb2x5QXJlYXNbX2kxMF0pO1xyXG5cclxuICAgICAgICAgIF9wMy5zZXRUeXBlKFBvbHkuRFRfUE9MWVRZUEVfR1JPVU5EKTtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfajQgPSAwOyBfajQgPCBudnA7ICsrX2o0KSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucG9seXNbc3JjICsgX2o0XSA9PSBOYXZNZXNoQnVpbGRlci5NRVNIX05VTExfSURYKSBicmVhaztcclxuICAgICAgICAgICAgX3AzLnZlcnRzW19qNF0gPSBwYXJhbXMucG9seXNbc3JjICsgX2o0XTtcclxuXHJcbiAgICAgICAgICAgIGlmICgocGFyYW1zLnBvbHlzW3NyYyArIG52cCArIF9qNF0gJiAweDgwMDApICE9IDApIHtcclxuICAgICAgICAgICAgICAvLyBCb3JkZXIgb3IgcG9ydGFsIGVkZ2UuXHJcbiAgICAgICAgICAgICAgdmFyIF9kaXIgPSBwYXJhbXMucG9seXNbc3JjICsgbnZwICsgX2o0XSAmIDB4ZjtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9kaXIgPT0gMHhmKSAvLyBCb3JkZXJcclxuICAgICAgICAgICAgICAgIF9wMy5uZWlzW19qNF0gPSAwO2Vsc2UgaWYgKF9kaXIgPT0gMCkgLy8gUG9ydGFsIHgtXHJcbiAgICAgICAgICAgICAgICBfcDMubmVpc1tfajRdID0gTmF2TWVzaC5EVF9FWFRfTElOSyB8IDQ7ZWxzZSBpZiAoX2RpciA9PSAxKSAvLyBQb3J0YWwgeitcclxuICAgICAgICAgICAgICAgIF9wMy5uZWlzW19qNF0gPSBOYXZNZXNoLkRUX0VYVF9MSU5LIHwgMjtlbHNlIGlmIChfZGlyID09IDIpIC8vIFBvcnRhbCB4K1xyXG4gICAgICAgICAgICAgICAgX3AzLm5laXNbX2o0XSA9IE5hdk1lc2guRFRfRVhUX0xJTksgfCAwO2Vsc2UgaWYgKF9kaXIgPT0gMykgLy8gUG9ydGFsIHotXHJcbiAgICAgICAgICAgICAgICBfcDMubmVpc1tfajRdID0gTmF2TWVzaC5EVF9FWFRfTElOSyB8IDY7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gTm9ybWFsIGNvbm5lY3Rpb25cclxuICAgICAgICAgICAgICBfcDMubmVpc1tfajRdID0gcGFyYW1zLnBvbHlzW3NyYyArIG52cCArIF9qNF0gKyAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfcDMudmVydENvdW50Kys7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgc3JjICs9IG52cCAqIDI7XHJcbiAgICAgICAgfSAvLyBPZmYtbWVzaCBjb25uZWN0aW9uIHZlcnRpY2VzLlxyXG5cclxuXHJcbiAgICAgICAgbiA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTEgPSAwOyBfaTExIDwgcGFyYW1zLm9mZk1lc2hDb25Db3VudDsgKytfaTExKSB7XHJcbiAgICAgICAgICAvLyBPbmx5IHN0b3JlIGNvbm5lY3Rpb25zIHdoaWNoIHN0YXJ0IGZyb20gdGhpcyB0aWxlLlxyXG4gICAgICAgICAgaWYgKG9mZk1lc2hDb25DbGFzc1tfaTExICogMiArIDBdID09IDB4ZmYpIHtcclxuICAgICAgICAgICAgdmFyIF9wNCA9IG5ldyBQb2x5KG9mZk1lc2hQb2x5QmFzZSArIG4sIG52cCk7XHJcblxyXG4gICAgICAgICAgICBuYXZQb2x5c1tvZmZNZXNoUG9seUJhc2UgKyBuXSA9IF9wNDtcclxuICAgICAgICAgICAgX3A0LnZlcnRDb3VudCA9IDI7XHJcbiAgICAgICAgICAgIF9wNC52ZXJ0c1swXSA9IG9mZk1lc2hWZXJ0c0Jhc2UgKyBuICogMjtcclxuICAgICAgICAgICAgX3A0LnZlcnRzWzFdID0gb2ZmTWVzaFZlcnRzQmFzZSArIG4gKiAyICsgMTtcclxuICAgICAgICAgICAgX3A0LmZsYWdzID0gcGFyYW1zLm9mZk1lc2hDb25GbGFnc1tfaTExXTtcclxuXHJcbiAgICAgICAgICAgIF9wNC5zZXRBcmVhKHBhcmFtcy5vZmZNZXNoQ29uQXJlYXNbX2kxMV0pO1xyXG5cclxuICAgICAgICAgICAgX3A0LnNldFR5cGUoUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pO1xyXG5cclxuICAgICAgICAgICAgbisrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gU3RvcmUgZGV0YWlsIG1lc2hlcyBhbmQgdmVydGljZXMuXHJcbiAgICAgICAgLy8gVGhlIG5hdiBwb2x5Z29uIHZlcnRpY2VzIGFyZSBzdG9yZWQgYXMgdGhlIGZpcnN0IHZlcnRpY2VzIG9uIGVhY2hcclxuICAgICAgICAvLyBtZXNoLlxyXG4gICAgICAgIC8vIFdlIGNvbXByZXNzIHRoZSBtZXNoIGRhdGEgYnkgc2tpcHBpbmcgdGhlbSBhbmQgdXNpbmcgdGhlIG5hdm1lc2hcclxuICAgICAgICAvLyBjb29yZGluYXRlcy5cclxuXHJcblxyXG4gICAgICAgIGlmIChwYXJhbXMuZGV0YWlsTWVzaGVzICE9IG51bGwpIHtcclxuICAgICAgICAgIHZhciB2YmFzZSA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kxMiA9IDA7IF9pMTIgPCBwYXJhbXMucG9seUNvdW50OyArK19pMTIpIHtcclxuICAgICAgICAgICAgdmFyIGR0bCA9IG5ldyBQb2x5RGV0YWlsKCk7XHJcbiAgICAgICAgICAgIG5hdkRNZXNoZXNbX2kxMl0gPSBkdGw7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbX2kxMiAqIDQgKyAwXTtcclxuICAgICAgICAgICAgdmFyIF9uZHYgPSBwYXJhbXMuZGV0YWlsTWVzaGVzW19pMTIgKiA0ICsgMV07XHJcbiAgICAgICAgICAgIHZhciBfbnYyID0gbmF2UG9seXNbX2kxMl0udmVydENvdW50O1xyXG4gICAgICAgICAgICBkdGwudmVydEJhc2UgPSB2YmFzZTtcclxuICAgICAgICAgICAgZHRsLnZlcnRDb3VudCA9IF9uZHYgLSBfbnYyO1xyXG4gICAgICAgICAgICBkdGwudHJpQmFzZSA9IHBhcmFtcy5kZXRhaWxNZXNoZXNbX2kxMiAqIDQgKyAyXTtcclxuICAgICAgICAgICAgZHRsLnRyaUNvdW50ID0gcGFyYW1zLmRldGFpbE1lc2hlc1tfaTEyICogNCArIDNdOyAvLyBDb3B5IHZlcnRpY2VzIGV4Y2VwdCB0aGUgZmlyc3QgJ252JyB2ZXJ0cyB3aGljaCBhcmUgZXF1YWwgdG9cclxuICAgICAgICAgICAgLy8gbmF2IGxldCB2ZXJ0cy5cclxuXHJcbiAgICAgICAgICAgIGlmIChfbmR2IC0gX252MiAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgYXJyYXljb3B5JDMocGFyYW1zLmRldGFpbFZlcnRzLCAodmIgKyBfbnYyKSAqIDMsIG5hdkRWZXJ0cywgdmJhc2UgKiAzLCAzICogKF9uZHYgLSBfbnYyKSk7XHJcbiAgICAgICAgICAgICAgdmJhc2UgKz0gX25kdiAtIF9udjI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy8gU3RvcmUgdHJpYW5nbGVzLlxyXG5cclxuXHJcbiAgICAgICAgICBhcnJheWNvcHkkMyhwYXJhbXMuZGV0YWlsVHJpcywgMCwgbmF2RFRyaXMsIDAsIDQgKiBwYXJhbXMuZGV0YWlsVHJpQ291bnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBDcmVhdGUgZHVtbXkgZGV0YWlsIG1lc2ggYnkgdHJpYW5ndWxhdGluZyBwb2x5cy5cclxuICAgICAgICAgIHZhciB0YmFzZSA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kxMyA9IDA7IF9pMTMgPCBwYXJhbXMucG9seUNvdW50OyArK19pMTMpIHtcclxuICAgICAgICAgICAgdmFyIF9kdGwgPSBuZXcgUG9seURldGFpbCgpO1xyXG5cclxuICAgICAgICAgICAgbmF2RE1lc2hlc1tfaTEzXSA9IF9kdGw7XHJcbiAgICAgICAgICAgIHZhciBfbnYzID0gbmF2UG9seXNbX2kxM10udmVydENvdW50O1xyXG4gICAgICAgICAgICBfZHRsLnZlcnRCYXNlID0gMDtcclxuICAgICAgICAgICAgX2R0bC52ZXJ0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICBfZHRsLnRyaUJhc2UgPSB0YmFzZTtcclxuICAgICAgICAgICAgX2R0bC50cmlDb3VudCA9IF9udjMgLSAyOyAvLyBUcmlhbmd1bGF0ZSBwb2x5Z29uIChsb2NhbCBpbmRpY2VzKS5cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9qNSA9IDI7IF9qNSA8IF9udjM7ICsrX2o1KSB7XHJcbiAgICAgICAgICAgICAgdmFyIHQgPSB0YmFzZSAqIDQ7XHJcbiAgICAgICAgICAgICAgbmF2RFRyaXNbdCArIDBdID0gMDtcclxuICAgICAgICAgICAgICBuYXZEVHJpc1t0ICsgMV0gPSBfajUgLSAxO1xyXG4gICAgICAgICAgICAgIG5hdkRUcmlzW3QgKyAyXSA9IF9qNTsgLy8gQml0IGZvciBlYWNoIGVkZ2UgdGhhdCBiZWxvbmdzIHRvIGxldCBib3VuZGFyeS5cclxuXHJcbiAgICAgICAgICAgICAgbmF2RFRyaXNbdCArIDNdID0gMSA8PCAyO1xyXG4gICAgICAgICAgICAgIGlmIChfajUgPT0gMikgbmF2RFRyaXNbdCArIDNdIHw9IDEgPDwgMDtcclxuICAgICAgICAgICAgICBpZiAoX2o1ID09IF9udjMgLSAxKSBuYXZEVHJpc1t0ICsgM10gfD0gMSA8PCA0O1xyXG4gICAgICAgICAgICAgIHRiYXNlKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFN0b3JlIGFuZCBjcmVhdGUgQlZ0cmVlLlxyXG4gICAgICAgIC8vIFRPRE86IHRha2UgZGV0YWlsIG1lc2ggaW50byBhY2NvdW50ISB1c2UgYnl0ZSBwZXIgYmJveCBleHRlbnQ/XHJcblxyXG5cclxuICAgICAgICBpZiAocGFyYW1zLmJ1aWxkQnZUcmVlKSB7XHJcbiAgICAgICAgICAvLyBEbyBub3Qgc2V0IGhlYWRlci5idk5vZGVDb3VudCBzZXQgdG8gbWFrZSBpdCB3b3JrIGxvb2sgZXhhY3RseSB0aGUgc2FtZSBhcyBpbiBvcmlnaW5hbCBEZXRvdXIgIFxyXG4gICAgICAgICAgaGVhZGVyLmJ2Tm9kZUNvdW50ID0gTmF2TWVzaEJ1aWxkZXIuY3JlYXRlQlZUcmVlKHBhcmFtcywgbmF2QnZ0cmVlKTtcclxuICAgICAgICB9IC8vIFN0b3JlIE9mZi1NZXNoIGNvbm5lY3Rpb25zLlxyXG5cclxuXHJcbiAgICAgICAgbiA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMTQgPSAwOyBfaTE0IDwgcGFyYW1zLm9mZk1lc2hDb25Db3VudDsgKytfaTE0KSB7XHJcbiAgICAgICAgICAvLyBPbmx5IHN0b3JlIGNvbm5lY3Rpb25zIHdoaWNoIHN0YXJ0IGZyb20gdGhpcyB0aWxlLlxyXG4gICAgICAgICAgaWYgKG9mZk1lc2hDb25DbGFzc1tfaTE0ICogMiArIDBdID09IDB4ZmYpIHtcclxuICAgICAgICAgICAgdmFyIGNvbiA9IG5ldyBPZmZNZXNoQ29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICBvZmZNZXNoQ29uc1tuXSA9IGNvbjtcclxuICAgICAgICAgICAgY29uLnBvbHkgPSBvZmZNZXNoUG9seUJhc2UgKyBuOyAvLyBDb3B5IGNvbm5lY3Rpb24gZW5kLXBvaW50cy5cclxuXHJcbiAgICAgICAgICAgIHZhciBlbmRQdHMgPSBfaTE0ICogMiAqIDM7XHJcbiAgICAgICAgICAgIGFycmF5Y29weSQzKHBhcmFtcy5vZmZNZXNoQ29uVmVydHMsIGVuZFB0cywgY29uLnBvcywgMCwgNik7XHJcbiAgICAgICAgICAgIGNvbi5yYWQgPSBwYXJhbXMub2ZmTWVzaENvblJhZFtfaTE0XTtcclxuICAgICAgICAgICAgY29uLmZsYWdzID0gcGFyYW1zLm9mZk1lc2hDb25EaXJbX2kxNF0gIT0gMCA/IE5hdk1lc2guRFRfT0ZGTUVTSF9DT05fQklESVIgOiAwO1xyXG4gICAgICAgICAgICBjb24uc2lkZSA9IG9mZk1lc2hDb25DbGFzc1tfaTE0ICogMiArIDFdO1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm9mZk1lc2hDb25Vc2VySUQgIT0gbnVsbCkgY29uLnVzZXJJZCA9IHBhcmFtcy5vZmZNZXNoQ29uVXNlcklEW19pMTRdO1xyXG4gICAgICAgICAgICBuKys7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbm1kID0gbmV3IE1lc2hEYXRhKCk7XHJcbiAgICAgICAgbm1kLmhlYWRlciA9IGhlYWRlcjtcclxuICAgICAgICBubWQudmVydHMgPSBuYXZWZXJ0cztcclxuICAgICAgICBubWQucG9seXMgPSBuYXZQb2x5cztcclxuICAgICAgICBubWQuZGV0YWlsTWVzaGVzID0gbmF2RE1lc2hlcztcclxuICAgICAgICBubWQuZGV0YWlsVmVydHMgPSBuYXZEVmVydHM7XHJcbiAgICAgICAgbm1kLmRldGFpbFRyaXMgPSBuYXZEVHJpcztcclxuICAgICAgICBubWQuYnZUcmVlID0gbmF2QnZ0cmVlO1xyXG4gICAgICAgIG5tZC5vZmZNZXNoQ29ucyA9IG9mZk1lc2hDb25zO1xyXG4gICAgICAgIHJldHVybiBubWQ7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gTmF2TWVzaEJ1aWxkZXI7XHJcbiAgfSgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsIFwiTUVTSF9OVUxMX0lEWFwiLCAweGZmZmYpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsIFwiWFBcIiwgMSA8PCAwKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2hCdWlsZGVyLCBcIlpQXCIsIDEgPDwgMSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoQnVpbGRlciwgXCJYTVwiLCAxIDw8IDIpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaEJ1aWxkZXIsIFwiWk1cIiwgMSA8PCAzKTtcclxuXHJcbiAgdmFyIFJlY2FzdFRlc3RNZXNoQnVpbGRlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZWNhc3RUZXN0TWVzaEJ1aWxkZXIobV9nZW9tLCBtX3BhcnRpdGlvblR5cGUsIG1fY2VsbFNpemUsIG1fY2VsbEhlaWdodCwgbV9hZ2VudEhlaWdodCwgbV9hZ2VudFJhZGl1cywgbV9hZ2VudE1heENsaW1iLCBtX2FnZW50TWF4U2xvcGUsIG1fcmVnaW9uTWluU2l6ZSwgbV9yZWdpb25NZXJnZVNpemUsIG1fZWRnZU1heExlbiwgbV9lZGdlTWF4RXJyb3IsIG1fdmVydHNQZXJQb2x5LCBtX2RldGFpbFNhbXBsZURpc3QsIG1fZGV0YWlsU2FtcGxlTWF4RXJyb3IpIHtcclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlY2FzdFRlc3RNZXNoQnVpbGRlcik7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNoRGF0YVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgdmFyIGNmZyA9IG5ldyBSZWNhc3RDb25maWcobV9wYXJ0aXRpb25UeXBlLCBtX2NlbGxTaXplLCBtX2NlbGxIZWlnaHQsIG1fYWdlbnRIZWlnaHQsIG1fYWdlbnRSYWRpdXMsIG1fYWdlbnRNYXhDbGltYiwgbV9hZ2VudE1heFNsb3BlLCBtX3JlZ2lvbk1pblNpemUsIG1fcmVnaW9uTWVyZ2VTaXplLCBtX2VkZ2VNYXhMZW4sIG1fZWRnZU1heEVycm9yLCBtX3ZlcnRzUGVyUG9seSwgbV9kZXRhaWxTYW1wbGVEaXN0LCBtX2RldGFpbFNhbXBsZU1heEVycm9yLCAwLCBTYW1wbGVBcmVhTW9kaWZpY2F0aW9ucy5TQU1QTEVfQVJFQU1PRF9HUk9VTkQpO1xyXG4gICAgICB2YXIgYmNmZyA9IG5ldyBSZWNhc3RCdWlsZGVyQ29uZmlnJDEoY2ZnLCBtX2dlb20uZ2V0TWVzaEJvdW5kc01pbigpLCBtX2dlb20uZ2V0TWVzaEJvdW5kc01heCgpKTtcclxuICAgICAgdmFyIHJjQnVpbGRlciA9IG5ldyBSZWNhc3RCdWlsZGVyKCk7XHJcbiAgICAgIHZhciByY1Jlc3VsdCA9IHJjQnVpbGRlci5idWlsZChtX2dlb20sIGJjZmcpO1xyXG4gICAgICB2YXIgbV9wbWVzaCA9IHJjUmVzdWx0LmdldE1lc2goKTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbV9wbWVzaC5ucG9seXM7ICsraSkge1xyXG4gICAgICAgIG1fcG1lc2guZmxhZ3NbaV0gPSAxO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgbV9kbWVzaCA9IHJjUmVzdWx0LmdldE1lc2hEZXRhaWwoKTtcclxuICAgICAgdmFyIHBhcmFtcyA9IG5ldyBOYXZNZXNoRGF0YUNyZWF0ZVBhcmFtcygpO1xyXG4gICAgICBwYXJhbXMudmVydHMgPSBtX3BtZXNoLnZlcnRzO1xyXG4gICAgICBwYXJhbXMudmVydENvdW50ID0gbV9wbWVzaC5udmVydHM7XHJcbiAgICAgIHBhcmFtcy5wb2x5cyA9IG1fcG1lc2gucG9seXM7XHJcbiAgICAgIHBhcmFtcy5wb2x5QXJlYXMgPSBtX3BtZXNoLmFyZWFzO1xyXG4gICAgICBwYXJhbXMucG9seUZsYWdzID0gbV9wbWVzaC5mbGFncztcclxuICAgICAgcGFyYW1zLnBvbHlDb3VudCA9IG1fcG1lc2gubnBvbHlzO1xyXG4gICAgICBwYXJhbXMubnZwID0gbV9wbWVzaC5udnA7XHJcbiAgICAgIHBhcmFtcy5kZXRhaWxNZXNoZXMgPSBtX2RtZXNoLm1lc2hlcztcclxuICAgICAgcGFyYW1zLmRldGFpbFZlcnRzID0gbV9kbWVzaC52ZXJ0cztcclxuICAgICAgcGFyYW1zLmRldGFpbFZlcnRzQ291bnQgPSBtX2RtZXNoLm52ZXJ0cztcclxuICAgICAgcGFyYW1zLmRldGFpbFRyaXMgPSBtX2RtZXNoLnRyaXM7XHJcbiAgICAgIHBhcmFtcy5kZXRhaWxUcmlDb3VudCA9IG1fZG1lc2gubnRyaXM7XHJcbiAgICAgIHBhcmFtcy53YWxrYWJsZUhlaWdodCA9IG1fYWdlbnRIZWlnaHQ7XHJcbiAgICAgIHBhcmFtcy53YWxrYWJsZVJhZGl1cyA9IG1fYWdlbnRSYWRpdXM7XHJcbiAgICAgIHBhcmFtcy53YWxrYWJsZUNsaW1iID0gbV9hZ2VudE1heENsaW1iO1xyXG4gICAgICBwYXJhbXMuYm1pbiA9IG1fcG1lc2guYm1pbjtcclxuICAgICAgcGFyYW1zLmJtYXggPSBtX3BtZXNoLmJtYXg7XHJcbiAgICAgIHBhcmFtcy5jcyA9IG1fY2VsbFNpemU7XHJcbiAgICAgIHBhcmFtcy5jaCA9IG1fY2VsbEhlaWdodDtcclxuICAgICAgcGFyYW1zLmJ1aWxkQnZUcmVlID0gdHJ1ZTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0cyA9IG5ldyBBcnJheSg2KTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0c1swXSA9IDAuMTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0c1sxXSA9IDAuMjtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0c1syXSA9IDAuMztcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0c1szXSA9IDAuNDtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0c1s0XSA9IDAuNTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25WZXJ0c1s1XSA9IDAuNjtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25SYWQgPSBuZXcgQXJyYXkoMSk7XHJcbiAgICAgIHBhcmFtcy5vZmZNZXNoQ29uUmFkWzBdID0gMC4xO1xyXG4gICAgICBwYXJhbXMub2ZmTWVzaENvbkRpciA9IG5ldyBBcnJheSgxKTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25EaXJbMF0gPSAxO1xyXG4gICAgICBwYXJhbXMub2ZmTWVzaENvbkFyZWFzID0gbmV3IEFycmF5KDEpO1xyXG4gICAgICBwYXJhbXMub2ZmTWVzaENvbkFyZWFzWzBdID0gMjtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25GbGFncyA9IG5ldyBBcnJheSgxKTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25GbGFnc1swXSA9IDEyO1xyXG4gICAgICBwYXJhbXMub2ZmTWVzaENvblVzZXJJRCA9IG5ldyBBcnJheSgxKTtcclxuICAgICAgcGFyYW1zLm9mZk1lc2hDb25Vc2VySURbMF0gPSAweDQ1Njc7XHJcbiAgICAgIHBhcmFtcy5vZmZNZXNoQ29uQ291bnQgPSAxO1xyXG4gICAgICB0aGlzLm1lc2hEYXRhID0gTmF2TWVzaEJ1aWxkZXIuY3JlYXRlTmF2TWVzaERhdGEocGFyYW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCBbe1xyXG4gICAgICBrZXk6IFwiZ2V0TWVzaERhdGFcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1lc2hEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lc2hEYXRhO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFJlY2FzdFRlc3RNZXNoQnVpbGRlcjtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV9jZWxsU2l6ZVwiLCAwLjMpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCBcIm1fY2VsbEhlaWdodFwiLCAwLjIpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCBcIm1fYWdlbnRIZWlnaHRcIiwgMi4wKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFRlc3RNZXNoQnVpbGRlciwgXCJtX2FnZW50UmFkaXVzXCIsIDAuNik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV9hZ2VudE1heENsaW1iXCIsIDAuOSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV9hZ2VudE1heFNsb3BlXCIsIDQ1LjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCBcIm1fcmVnaW9uTWluU2l6ZVwiLCA4KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFJlY2FzdFRlc3RNZXNoQnVpbGRlciwgXCJtX3JlZ2lvbk1lcmdlU2l6ZVwiLCAyMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV9lZGdlTWF4TGVuXCIsIDEyLjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCBcIm1fZWRnZU1heEVycm9yXCIsIDEuMyk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV92ZXJ0c1BlclBvbHlcIiwgNik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV9kZXRhaWxTYW1wbGVEaXN0XCIsIDYuMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShSZWNhc3RUZXN0TWVzaEJ1aWxkZXIsIFwibV9kZXRhaWxTYW1wbGVNYXhFcnJvclwiLCAxLjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUmVjYXN0VGVzdE1lc2hCdWlsZGVyLCBcImZyb21GaWxlXCIsIGZ1bmN0aW9uIChvYmpGaWxlQ29udGVudHMpIHtcclxuICAgIHJldHVybiBuZXcgUmVjYXN0VGVzdE1lc2hCdWlsZGVyKG5ldyBPYmpJbXBvcnRlcigpLmxvYWQob2JqRmlsZUNvbnRlbnRzKSwgUmVjYXN0Q29uc3RhbnRzLldBVEVSU0hFRCwgdGhpcy5tX2NlbGxTaXplLCB0aGlzLm1fY2VsbEhlaWdodCwgdGhpcy5tX2FnZW50SGVpZ2h0LCB0aGlzLm1fYWdlbnRSYWRpdXMsIHRoaXMubV9hZ2VudE1heENsaW1iLCB0aGlzLm1fYWdlbnRNYXhTbG9wZSwgdGhpcy5tX3JlZ2lvbk1pblNpemUsIHRoaXMubV9yZWdpb25NZXJnZVNpemUsIHRoaXMubV9lZGdlTWF4TGVuLCB0aGlzLm1fZWRnZU1heEVycm9yLCB0aGlzLm1fdmVydHNQZXJQb2x5LCB0aGlzLm1fZGV0YWlsU2FtcGxlRGlzdCwgdGhpcy5tX2RldGFpbFNhbXBsZU1heEVycm9yKTtcclxuICB9KTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIE5vZGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqIHBhcmVudCBvZiB0aGUgbm9kZSBpcyBub3QgYWRqYWNlbnQuIEZvdW5kIHVzaW5nIHJheWNhc3QuICovXHJcblxyXG4gICAgLyoqIFBvc2l0aW9uIG9mIHRoZSBub2RlLiAqL1xyXG5cclxuICAgIC8qKiBDb3N0IGZyb20gcHJldmlvdXMgbm9kZSB0byBjdXJyZW50IG5vZGUuICovXHJcblxyXG4gICAgLyoqIENvc3QgdXAgdG8gdGhlIG5vZGUuICovXHJcblxyXG4gICAgLyoqIEluZGV4IHRvIHBhcmVudCBub2RlLiAqL1xyXG5cclxuICAgIC8qKiBleHRyYSBzdGF0ZSBpbmZvcm1hdGlvbi4gQSBwb2x5UmVmIGNhbiBoYXZlIG11bHRpcGxlIG5vZGVzIHdpdGggZGlmZmVyZW50IGV4dHJhIGluZm8uIHNlZSBEVF9NQVhfU1RBVEVTX1BFUl9OT0RFICovXHJcblxyXG4gICAgLyoqIE5vZGUgZmxhZ3MuIEEgY29tYmluYXRpb24gb2YgZHROb2RlRmxhZ3MuICovXHJcblxyXG4gICAgLyoqIFBvbHlnb24gcmVmIHRoZSBub2RlIGNvcnJlc3BvbmRzIHRvLiAqL1xyXG4gICAgZnVuY3Rpb24gTm9kZShpbmRleCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm9kZSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleFwiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvc1wiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiY29zdFwiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvdGFsXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicGlkeFwiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXRlXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZmxhZ3NcIiwgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZFwiLCAwKTtcclxuXHJcbiAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoTm9kZSwgW3tcclxuICAgICAga2V5OiBcInRvU3RyaW5nXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuICAgICAgICByZXR1cm4gXCJOb2RlIFtpZD1cIiArIGlkICsgXCJdXCI7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gTm9kZTtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOb2RlLCBcIkRUX05PREVfT1BFTlwiLCAweDAxKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE5vZGUsIFwiRFRfTk9ERV9DTE9TRURcIiwgMHgwMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOb2RlLCBcIkRUX05PREVfUEFSRU5UX0RFVEFDSEVEXCIsIDB4MDQpO1xyXG5cclxuICB2YXIgTm9kZVBvb2wgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm9kZVBvb2woKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb2RlUG9vbCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX21hcFwiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX25vZGVzXCIsIFtdKTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoTm9kZVBvb2wsIFt7XHJcbiAgICAgIGtleTogXCJjbGVhclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5tX25vZGVzID0gW107XHJcbiAgICAgICAgdGhpcy5tX21hcCA9IFtdO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJmaW5kTm9kZXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmROb2RlcyhpZCkge1xyXG4gICAgICAgIHZhciBub2RlcyA9IHRoaXMubV9tYXBbaWRdO1xyXG5cclxuICAgICAgICBpZiAobm9kZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgbm9kZXMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBub2RlcztcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZE5vZGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmROb2RlKGlkKSB7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5tX21hcFtpZF07XHJcblxyXG4gICAgICAgIGlmIChub2RlcyAhPSBudWxsICYmICFub2Rlcy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5vZGVzWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZpbmROb2RlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTm9kZShpZCwgc3RhdGUpIHtcclxuICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLm1fbWFwW2lkXTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVzICE9IG51bGwpIHtcclxuICAgICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RlcyksXHJcbiAgICAgICAgICAgICAgX3N0ZXA7XHJcblxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgICAgICB2YXIgbm9kZSA9IF9zdGVwLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICBpZiAobm9kZS5zdGF0ZSA9PSBzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcclxuICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0Tm9kZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm9kZShpZCkge1xyXG4gICAgICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcclxuICAgICAgICB2YXIgbm9kZXMgPSB0aGlzLm1fbWFwW2lkXTtcclxuXHJcbiAgICAgICAgaWYgKG5vZGVzICE9IG51bGwpIHtcclxuICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobm9kZXMpLFxyXG4gICAgICAgICAgICAgIF9zdGVwMjtcclxuXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykge1xyXG4gICAgICAgICAgICAgIHZhciBub2RlID0gX3N0ZXAyLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICBpZiAobm9kZS5zdGF0ZSA9PSBzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7XHJcbiAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZShpZCwgc3RhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJjcmVhdGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZShpZCwgc3RhdGUpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IG5ldyBOb2RlKHRoaXMubV9ub2Rlcy5sZW5ndGggKyAxKTtcclxuICAgICAgICBub2RlLmlkID0gaWQ7XHJcbiAgICAgICAgbm9kZS5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgIHRoaXMubV9ub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgIHZhciBub2RlcyA9IHRoaXMubV9tYXBbaWRdO1xyXG5cclxuICAgICAgICBpZiAobm9kZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgbm9kZXMgPSBbXTtcclxuICAgICAgICAgIHRoaXMubV9tYXBbaWRdID0gbm9kZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXROb2RlSWR4XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXROb2RlSWR4KG5vZGUpIHtcclxuICAgICAgICByZXR1cm4gbm9kZSAhPSBudWxsID8gbm9kZS5pbmRleCA6IDA7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE5vZGVBdElkeFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm9kZUF0SWR4KGlkeCkge1xyXG4gICAgICAgIHJldHVybiBpZHggIT0gMCA/IHRoaXMubV9ub2Rlc1tpZHggLSAxXSA6IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE5vZGVDb3VudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm9kZUNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fbm9kZXMubGVuZ3RoO1xyXG4gICAgICB9IC8vIGdldE5vZGUocmVmKSB7XHJcbiAgICAgIC8vIHJldHVybiB0aGlzLmdldE5vZGUocmVmLCAwKTtcclxuICAgICAgLy8gfVxyXG5cclxuICAgICAgLypcclxuICAgICAgXHJcbiAgICAgIGlubGluZSBsZXQgZ2V0TWF4Tm9kZXMoKSBjb25zdCB7IHJldHVybiBtX21heE5vZGVzOyB9XHJcbiAgICAgIGlubGluZSBkdE5vZGVJbmRleCBnZXRGaXJzdChidWNrZXQpIGNvbnN0IHsgcmV0dXJuIG1fZmlyc3RbYnVja2V0XTsgfVxyXG4gICAgICBpbmxpbmUgZHROb2RlSW5kZXggZ2V0TmV4dChpKSBjb25zdCB7IHJldHVybiBtX25leHRbaV07IH1cclxuICAgICAgKi9cclxuXHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIE5vZGVQb29sO1xyXG4gIH0oKTtcclxuXHJcbiAgLy9odHRwczovL3RydWV0b2NvZGUuY29tL2JpbmFyeS10cmVlbWF4LWhlYXAtcHJpb3JpdHktcXVldWUtYW5kLWltcGxlbWVudGF0aW9uLXVzaW5nLWphdmFzY3JpcHQvNDI3L1xyXG4gIHZhciBQcmlvcml0eVF1ZXVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUoY29tcGFyYXRvcikge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJpb3JpdHlRdWV1ZSk7XHJcblxyXG4gICAgICB0aGlzLmNvbXBhcmF0b3IgPSBjb21wYXJhdG9yO1xyXG4gICAgICB0aGlzLmFycmF5ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFByaW9yaXR5UXVldWUsIFt7XHJcbiAgICAgIGtleTogXCJpc0VtcHR5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5Lmxlbmd0aCA9PSAwO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwb2xsXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwb2xsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5LnNwbGljZSgwLCAxKVswXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiaW5zZXJ0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnNlcnQoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucHVzaChlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicHVzaFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaChlbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5hcnJheS5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuYXJyYXkuc29ydCh0aGlzLmNvbXBhcmF0b3IpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvZmZlclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb2ZmZXIoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucHVzaChlbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVtb3ZlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuYXJyYXkuaW5kZXhPZihlbGVtZW50KTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkgdGhpcy5hcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFByaW9yaXR5UXVldWU7XHJcbiAgfSgpO1xyXG5cclxuICBmdW5jdGlvbiBjb21wYXJlKG9uZSwgdHdvKSB7XHJcbiAgICBpZiAob25lID09IHR3bykgcmV0dXJuIDA7XHJcbiAgICBpZiAob25lIDwgdHdvKSByZXR1cm4gLTE7ZWxzZSByZXR1cm4gMTtcclxuICB9XHJcblxyXG4gIHZhciBOb2RlUXVldWUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm9kZVF1ZXVlKCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm9kZVF1ZXVlKTtcclxuXHJcbiAgICAgIHRoaXMubV9oZWFwID0gbmV3IFByaW9yaXR5UXVldWUoZnVuY3Rpb24gKG4xLCBuMikge1xyXG4gICAgICAgIHJldHVybiBjb21wYXJlKG4xLnRvdGFsLCBuMi50b3RhbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhOb2RlUXVldWUsIFt7XHJcbiAgICAgIGtleTogXCJjbGVhclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5tX2hlYXAgPSBuZXcgUHJpb3JpdHlRdWV1ZShmdW5jdGlvbiAobjEsIG4yKSB7XHJcbiAgICAgICAgICByZXR1cm4gY29tcGFyZShuMS50b3RhbCwgbjIudG90YWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJ0b3BcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2hlYXAucGVlaygpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwb3BcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBvcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2hlYXAucG9sbCgpO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwdXNoXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwdXNoKG5vZGUpIHtcclxuICAgICAgICB0aGlzLm1faGVhcC5pbnNlcnQobm9kZSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcIm1vZGlmeVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbW9kaWZ5KG5vZGUpIHtcclxuICAgICAgICB0aGlzLm1faGVhcC5yZW1vdmUobm9kZSk7XHJcbiAgICAgICAgdGhpcy5tX2hlYXAub2ZmZXIobm9kZSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImlzRW1wdHlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9oZWFwLmlzRW1wdHkoKTtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBOb2RlUXVldWU7XHJcbiAgfSgpO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuICB2YXIgUXVlcnlEYXRhID0gZnVuY3Rpb24gUXVlcnlEYXRhKCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFF1ZXJ5RGF0YSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdHVzXCIsIG51bGwpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxhc3RCZXN0Tm9kZVwiLCBudWxsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJsYXN0QmVzdE5vZGVDb3N0XCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXJ0UmVmXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCA1LCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZFJlZlwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGFydFBvc1wiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZFBvc1wiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpbHRlclwiLCBudWxsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcHRpb25zXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJheWNhc3RMaW1pdFNxclwiLCAwKTtcclxuICB9O1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuICB2YXIgU3RhdHVzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN0YXR1cyhpblZhbHVlKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGF0dXMpO1xyXG5cclxuICAgICAgdGhpcy52YWx1ZSA9IGluVmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFN0YXR1cywgW3tcclxuICAgICAga2V5OiBcImlzRmFpbGVkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZhaWxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PSBTdGF0dXMuRkFJTFVSRTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiaXNJblByb2dyZXNzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0luUHJvZ3Jlc3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT0gU3RhdHVzLklOX1BST0dSRVNTO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpc1N1Y2Nlc3NcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU3VjY2VzcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9PSBTdGF0dXMuU1VDQ1NFU1MgfHwgdGhpcy52YWx1ZSA9PSBTdGF0dXMuUEFSVElBTF9SRVNVTFQ7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImlzUGFydGlhbFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNQYXJ0aWFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09IFN0YXR1cy5QQVJUSUFMX1JFU1VMVDtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBTdGF0dXM7XHJcbiAgfSgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoU3RhdHVzLCBcIkZBSUxVUkVcIiwgMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTdGF0dXMsIFwiU1VDQ1NFU1NcIiwgMSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTdGF0dXMsIFwiSU5fUFJPR1JFU1NcIiwgMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShTdGF0dXMsIFwiUEFSVElBTF9SRVNVTFRcIiwgMyk7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIC8vVE9ETzogKFBQKSBBZGQgY29tbWVudHNcclxuICB2YXIgVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBVcGRhdGVTbGljZWRQYXRoUmVzdWx0KHN0YXR1cywgaXRlcmF0aW9ucykge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGF0dXNcIiwgbnVsbCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpdGVyYXRpb25zXCIsIDApO1xyXG5cclxuICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQsIFt7XHJcbiAgICAgIGtleTogXCJnZXRTdGF0dXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0YXR1cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldEl0ZXJhdGlvbnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEl0ZXJhdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlcmF0aW9ucztcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBVcGRhdGVTbGljZWRQYXRoUmVzdWx0O1xyXG4gIH0oKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIEZpbmRQYXRoUmVzdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIC8vLyAgQHBhcmFtW291dF1cdHBhdGhcdFx0QW4gb3JkZXJlZCBsaXN0IG9mIHBvbHlnb24gcmVmZXJlbmNlcyByZXByZXNlbnRpbmcgdGhlIHBhdGguIChTdGFydCB0byBlbmQuKSBcclxuICAgIGZ1bmN0aW9uIEZpbmRQYXRoUmVzdWx0KHN0YXR1cywgcmVmcykge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmluZFBhdGhSZXN1bHQpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdHVzXCIsIG51bGwpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVmc1wiLCBbXSk7XHJcblxyXG4gICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICAgICAgdGhpcy5yZWZzID0gcmVmcztcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoRmluZFBhdGhSZXN1bHQsIFt7XHJcbiAgICAgIGtleTogXCJnZXRTdGF0dXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFN0YXR1cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFJlZnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlZnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmcztcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBGaW5kUGF0aFJlc3VsdDtcclxuICB9KCk7XHJcblxyXG4gIC8qXHJcbiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTAgTWlra28gTW9ub25lbiBtZW1vbkBpbnNpZGUub3JnXHJcbiAgUmVjYXN0NEogQ29weXJpZ2h0IChjKSAyMDE1IFBpb3RyIFBpYXN0dWNraSBwaW90ckBqdGlsaWEub3JnXHJcblxyXG4gIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXHJcbiAgd2FycmFudHkuICBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xyXG4gIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXHJcbiAgUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXHJcbiAgaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxyXG4gIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcclxuICAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxyXG4gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxyXG4gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcclxuICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cclxuICAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxyXG4gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXHJcbiAgMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cclxuICAqL1xyXG4gIC8vVE9ETzogKFBQKSBBZGQgY29tbWVudHNcclxuICB2YXIgRmluZExvY2FsTmVpZ2hib3VyaG9vZFJlc3VsdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaW5kTG9jYWxOZWlnaGJvdXJob29kUmVzdWx0KHJlZnMsIHBhcmVudFJlZnMpIHtcclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbmRMb2NhbE5laWdoYm91cmhvb2RSZXN1bHQpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVmc1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXJlbnRSZWZzXCIsIFtdKTtcclxuXHJcbiAgICAgIHRoaXMucmVmcyA9IHJlZnM7XHJcbiAgICAgIHRoaXMucGFyZW50UmVmcyA9IHBhcmVudFJlZnM7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKEZpbmRMb2NhbE5laWdoYm91cmhvb2RSZXN1bHQsIFt7XHJcbiAgICAgIGtleTogXCJnZXRSZWZzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWZzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZnM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFBhcmVudFJlZnNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmVudFJlZnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50UmVmcztcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBGaW5kTG9jYWxOZWlnaGJvdXJob29kUmVzdWx0O1xyXG4gIH0oKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIEdldFBvbHlXYWxsU2VnbWVudHNSZXN1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gR2V0UG9seVdhbGxTZWdtZW50c1Jlc3VsdChzZWdtZW50VmVydHMsIHNlZ21lbnRSZWZzKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHZXRQb2x5V2FsbFNlZ21lbnRzUmVzdWx0KTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlZ21lbnRWZXJ0c1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZWdtZW50UmVmc1wiLCBbXSk7XHJcblxyXG4gICAgICB0aGlzLnNlZ21lbnRWZXJ0cyA9IHNlZ21lbnRWZXJ0cztcclxuICAgICAgdGhpcy5zZWdtZW50UmVmcyA9IHNlZ21lbnRSZWZzO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhHZXRQb2x5V2FsbFNlZ21lbnRzUmVzdWx0LCBbe1xyXG4gICAgICBrZXk6IFwiZ2V0U2VnbWVudFZlcnRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWdtZW50VmVydHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudFZlcnRzO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRTZWdtZW50UmVmc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VnbWVudFJlZnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudFJlZnM7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gR2V0UG9seVdhbGxTZWdtZW50c1Jlc3VsdDtcclxuICB9KCk7XHJcblxyXG4gIHZhciBTdHJhaWdodFBhdGhJdGVtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFN0cmFpZ2h0UGF0aEl0ZW0ocG9zLCBmbGFncywgcmVmKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdHJhaWdodFBhdGhJdGVtKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBvc1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJmbGFnc1wiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlZlwiLCAwKTtcclxuXHJcbiAgICAgIHRoaXMucG9zID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3MpO1xyXG4gICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7XHJcbiAgICAgIHRoaXMucmVmID0gcmVmO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhTdHJhaWdodFBhdGhJdGVtLCBbe1xyXG4gICAgICBrZXk6IFwiZ2V0UG9zXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQb3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRGbGFnc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmxhZ3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhZ3M7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFJlZlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVmKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZjtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBTdHJhaWdodFBhdGhJdGVtO1xyXG4gIH0oKTtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIE1vdmVBbG9uZ1N1cmZhY2VSZXN1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgLyoqIFRoZSByZXN1bHQgcG9zaXRpb24gb2YgdGhlIG1vdmVyLiBbKHgsIHksIHopXSAqL1xyXG5cclxuICAgIC8qKiBUaGUgcmVmZXJlbmNlIGlkcyBvZiB0aGUgcG9seWdvbnMgdmlzaXRlZCBkdXJpbmcgdGhlIG1vdmUuICovXHJcbiAgICBmdW5jdGlvbiBNb3ZlQWxvbmdTdXJmYWNlUmVzdWx0KHJlc3VsdFBvcywgdmlzaXRlZCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW92ZUFsb25nU3VyZmFjZVJlc3VsdCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZXN1bHRQb3NcIiwgW10pO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmlzaXRlZFwiLCBbXSk7XHJcblxyXG4gICAgICB0aGlzLnJlc3VsdFBvcyA9IHJlc3VsdFBvcztcclxuICAgICAgdGhpcy52aXNpdGVkID0gdmlzaXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoTW92ZUFsb25nU3VyZmFjZVJlc3VsdCwgW3tcclxuICAgICAga2V5OiBcImdldFJlc3VsdFBvc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVzdWx0UG9zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdFBvcztcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0VmlzaXRlZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VmlzaXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aXNpdGVkO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIE1vdmVBbG9uZ1N1cmZhY2VSZXN1bHQ7XHJcbiAgfSgpO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuXHJcbiAgLyoqXHJcbiAgICogUHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgcmF5Y2FzdCBoaXQuIEZpbGxlZCBieSBOYXZNZXNoUXVlcnk6OnJheWNhc3RcclxuICAgKi9cclxuICB2YXIgUmF5Y2FzdEhpdCA9IGZ1bmN0aW9uIFJheWNhc3RIaXQoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmF5Y2FzdEhpdCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoaXROb3JtYWxcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXRoXCIsIFtdKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXRoQ29zdFwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJoaXRFZGdlSW5kZXhcIiwgMCk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIF90ZW1wJDM7XHJcblxyXG4gIGZ1bmN0aW9uIG9yKHYxLCB2Mikge1xyXG4gICAgdmFyIGhpID0gMHg4MDAwMDAwMDtcclxuICAgIHZhciBsb3cgPSAweDdmZmZmZmZmO1xyXG4gICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpO1xyXG4gICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpO1xyXG4gICAgdmFyIGxvdzEgPSB2MSAmIGxvdztcclxuICAgIHZhciBsb3cyID0gdjIgJiBsb3c7XHJcbiAgICB2YXIgaCA9IGhpMSB8IGhpMjtcclxuICAgIHZhciBsID0gbG93MSB8IGxvdzI7XHJcbiAgICByZXR1cm4gaCAqIGhpICsgbDtcclxuICB9XHJcblxyXG4gIHZhciBQb3J0YWxSZXN1bHQgPSBmdW5jdGlvbiBQb3J0YWxSZXN1bHQobGVmdCwgcmlnaHQsIGZyb21UeXBlLCB0b1R5cGUpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQb3J0YWxSZXN1bHQpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxlZnRcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyaWdodFwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyb21UeXBlXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidG9UeXBlXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgdGhpcy5sZWZ0ID0gbGVmdDtcclxuICAgIHRoaXMucmlnaHQgPSByaWdodDtcclxuICAgIHRoaXMuZnJvbVR5cGUgPSBmcm9tVHlwZTtcclxuICAgIHRoaXMudG9UeXBlID0gdG9UeXBlO1xyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGFycmF5Y29weSQ0KG9uZSwgb25lU3RhcnQsIHR3bywgdHdvU3RhcnQsIGxlbikge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICB0d29bdHdvU3RhcnQgKyBpXSA9IG9uZVtvbmVTdGFydCArIGldO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIE5hdk1lc2hRdWVyeSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIFVzZSByYXljYXN0cyBkdXJpbmcgcGF0aGZpbmQgdG8gXCJzaG9ydGN1dFwiIChyYXljYXN0IHN0aWxsIGNvbnNpZGVyIGNvc3RzKVxyXG4gICAgICogT3B0aW9ucyBmb3IgTmF2TWVzaFF1ZXJ5Ojppbml0U2xpY2VkRmluZFBhdGggYW5kIHVwZGF0ZVNsaWNlZEZpbmRQYXRoXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKiogUmF5Y2FzdCBzaG91bGQgY2FsY3VsYXRlIG1vdmVtZW50IGNvc3QgYVBvbHkgdGhlIHJheSBhbmQgZmlsbCBSYXljYXN0SGl0Ojpjb3N0ICovXHJcbiAgICAvLy8gVmVydGV4IGZsYWdzIHJldHVybmVkIGJ5IGZpbmRTdHJhaWdodFBhdGguXHJcblxyXG4gICAgLyoqIFRoZSB2ZXJ0ZXggaXMgdGhlIHN0YXJ0IHBvc2l0aW9uIGluIHRoZSBwYXRoLiAqL1xyXG5cclxuICAgIC8qKiBUaGUgdmVydGV4IGlzIHRoZSBlbmQgcG9zaXRpb24gaW4gdGhlIHBhdGguICovXHJcblxyXG4gICAgLyoqIFRoZSB2ZXJ0ZXggaXMgdGhlIHN0YXJ0IG9mIGFuIG9mZi1tZXNoIGNvbm5lY3Rpb24uICovXHJcbiAgICAvLy8gT3B0aW9ucyBmb3IgZmluZFN0cmFpZ2h0UGF0aC5cclxuICAgIC8vLzwgQWRkIGEgdmVydGV4IGF0IGV2ZXJ5IHBvbHlnb24gZWRnZSBjcm9zc2luZyB3aGVyZSBhcmVhIGNoYW5nZXMuXHJcbiAgICAvLy88IEFkZCBhIHZlcnRleCBhdCBldmVyeSBwb2x5Z29uIGVkZ2UgY3Jvc3NpbmcuXHJcbiAgICAvLyBTZWFyY2ggaGV1cmlzdGljIHNjYWxlLlxyXG4gICAgLy8vIDwgU2xpY2VkIHF1ZXJ5IHN0YXRlLlxyXG4gICAgZnVuY3Rpb24gTmF2TWVzaFF1ZXJ5KG5hdikge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmF2TWVzaFF1ZXJ5KTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbmF2XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX25vZGVQb29sXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3RpbnlOb2RlUG9vbFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9vcGVuTGlzdFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9xdWVyeVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgdGhpcy5tX25hdiA9IG5hdjtcclxuICAgICAgdGhpcy5tX25vZGVQb29sID0gbmV3IE5vZGVQb29sKCk7XHJcbiAgICAgIHRoaXMubV90aW55Tm9kZVBvb2wgPSBuZXcgTm9kZVBvb2woKTtcclxuICAgICAgdGhpcy5tX29wZW5MaXN0ID0gbmV3IE5vZGVRdWV1ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhOYXZNZXNoUXVlcnksIFt7XHJcbiAgICAgIGtleTogXCJmaW5kUmFuZG9tUG9pbnRcIixcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXR1cm5zIHJhbmRvbSBsb2NhdGlvbiBvbiBuYXZtZXNoLlxyXG4gICAgICAgKiBQb2x5Z29ucyBhcmUgY2hvc2VuIHdlaWdodGVkIGJ5IGFyZWEuIFRoZSBzZWFyY2ggcnVucyBpbiBsaW5lYXIgcmVsYXRlZCB0byBudW1iZXIgb2YgcG9seWdvbi5cclxuICAgICAgICogQHBhcmFtIGZpbHRlciBUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAgKiBAcGFyYW0gZnJhbmQgRnVuY3Rpb24gcmV0dXJuaW5nIGEgcmFuZG9tIG51bWJlciBbMC4uMSkuXHJcbiAgICAgICAqIEByZXR1cm4gUmFuZG9tIGxvY2F0aW9uXHJcbiAgICAgICAqL1xyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZFJhbmRvbVBvaW50KGZpbHRlciwgZnJhbmQpIHtcclxuICAgICAgICAvLyBSYW5kb21seSBwaWNrIG9uZSB0aWxlLiBBc3N1bWUgdGhhdCBhbGwgdGlsZXMgY292ZXIgcm91Z2hseSB0aGUgc2FtZSBhcmVhLlxyXG4gICAgICAgIHRpbGUgPSBudWxsO1xyXG4gICAgICAgIHRzdW0gPSAwLjA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX25hdi5nZXRNYXhUaWxlcygpOyBpKyspIHtcclxuICAgICAgICAgIHZhciBfdCA9IHRoaXMubV9uYXYuZ2V0VGlsZShpKTtcclxuXHJcbiAgICAgICAgICBpZiAoX3QgPT0gbnVsbCB8fCBfdC5kYXRhID09IG51bGwgfHwgX3QuZGF0YS5oZWFkZXIgPT0gbnVsbCkgY29udGludWU7IC8vIENob29zZSByYW5kb20gdGlsZSB1c2luZyByZXNlcnZvaSBzYW1wbGluZy5cclxuXHJcbiAgICAgICAgICBhcmVhID0gMS4wOyAvLyBDb3VsZCBiZSB0aWxlIGFyZWEgdG9vLlxyXG5cclxuICAgICAgICAgIHRzdW0gKz0gYXJlYTtcclxuICAgICAgICAgIHUgPSBmcmFuZC5mcmFuZCgpO1xyXG4gICAgICAgICAgaWYgKHUgKiB0c3VtIDw9IGFyZWEpIHRpbGUgPSBfdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aWxlID09IG51bGwpIHJldHVybiBuZXcgRmluZFJhbmRvbVBvaW50UmVzdWx0KFN0YXR1cy5GQUlMVVJFLCAwLCBudWxsKTsgLy8gUmFuZG9tbHkgcGljayBvbmUgcG9seWdvbiB3ZWlnaHRlZCBieSBwb2x5Z29uIGFyZWEuXHJcblxyXG4gICAgICAgIHZhciBwb2x5ID0gbnVsbDtcclxuICAgICAgICB2YXIgcG9seVJlZiA9IDA7XHJcbiAgICAgICAgdmFyIGJhc2UgPSB0aGlzLm1fbmF2LmdldFBvbHlSZWZCYXNlKHRpbGUpO1xyXG4gICAgICAgIGFyZWFTdW0gPSAwLjA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aWxlLmRhdGEuaGVhZGVyLnBvbHlDb3VudDsgKytfaSkge1xyXG4gICAgICAgICAgdmFyIHAgPSB0aWxlLmRhdGEucG9seXNbX2ldOyAvLyBEbyBub3QgcmV0dXJuIG9mZi1tZXNoIGNvbm5lY3Rpb24gcG9seWdvbnMuXHJcblxyXG4gICAgICAgICAgaWYgKHAuZ2V0VHlwZSgpICE9IFBvbHkuRFRfUE9MWVRZUEVfR1JPVU5EKSBjb250aW51ZTsgLy8gTXVzdCBwYXNzIGZpbHRlclxyXG5cclxuICAgICAgICAgIHZhciByZWYgPSB0aGlzLm9yKGJhc2UsIF9pKTtcclxuICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIocmVmLCB0aWxlLCBwKSkgY29udGludWU7IC8vIENhbGMgYXJlYSBvZiB0aGUgcG9seWdvbi5cclxuXHJcbiAgICAgICAgICBwb2x5QXJlYSA9IDAuMDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IHAudmVydENvdW50OyArK2opIHtcclxuICAgICAgICAgICAgdmFyIHZhID0gcC52ZXJ0c1swXSAqIDM7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IHAudmVydHNbaiAtIDFdICogMztcclxuICAgICAgICAgICAgdmFyIHZjID0gcC52ZXJ0c1tqXSAqIDM7XHJcbiAgICAgICAgICAgIHBvbHlBcmVhICs9IERldG91ckNvbW1vbi50cmlBcmVhMkQ0KHRpbGUuZGF0YS52ZXJ0cywgdmEsIHZiLCB2Yyk7XHJcbiAgICAgICAgICB9IC8vIENob29zZSByYW5kb20gcG9seWdvbiB3ZWlnaHRlZCBieSBhcmVhLCB1c2luZyByZXNlcnZvaSBzYW1wbGluZy5cclxuXHJcblxyXG4gICAgICAgICAgYXJlYVN1bSArPSBwb2x5QXJlYTtcclxuICAgICAgICAgIHUgPSBmcmFuZC5mcmFuZCgpO1xyXG5cclxuICAgICAgICAgIGlmICh1ICogYXJlYVN1bSA8PSBwb2x5QXJlYSkge1xyXG4gICAgICAgICAgICBwb2x5ID0gcDtcclxuICAgICAgICAgICAgcG9seVJlZiA9IHJlZjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwb2x5ID09IG51bGwpIHJldHVybiBuZXcgRmluZFJhbmRvbVBvaW50UmVzdWx0KFN0YXR1cy5GQUlMVVJFLCAwLCBudWxsKTsgLy8gUmFuZG9tbHkgcGljayBwb1BvbHkgb24gcG9seWdvbi5cclxuXHJcbiAgICAgICAgdmFyIHZlcnRzID0gbmV3IEFycmF5KDMgKiB0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpKTtcclxuICAgICAgICB2YXIgYXJlYXMgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSk7XHJcbiAgICAgICAgYXJyYXljb3B5JDQodGlsZS5kYXRhLnZlcnRzLCBwb2x5LnZlcnRzWzBdICogMywgdmVydHMsIDAsIDMpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfaiA9IDE7IF9qIDwgcG9seS52ZXJ0Q291bnQ7ICsrX2opIHtcclxuICAgICAgICAgIGFycmF5Y29weSQ0KHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tfal0gKiAzLCB2ZXJ0cywgX2ogKiAzLCAzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHMgPSBmcmFuZC5mcmFuZCgpO1xyXG4gICAgICAgIHQgPSBmcmFuZC5mcmFuZCgpO1xyXG4gICAgICAgIHZhciBwdCA9IERldG91ckNvbW1vbi5yYW5kb21Qb2ludEluQ29udmV4UG9seSh2ZXJ0cywgcG9seS52ZXJ0Q291bnQsIGFyZWFzLCBzLCB0KTtcclxuICAgICAgICBwdFsxXSA9IGdldFBvbHlIZWlnaHQocG9seVJlZiwgcHQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmluZFJhbmRvbVBvaW50UmVzdWx0KFN0YXR1cy5TVUNDU0VTUywgcG9seVJlZiwgcHQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZXR1cm5zIHJhbmRvbSBsb2NhdGlvbiBvbiBuYXZtZXNoIHdpdGhpbiB0aGUgcmVhY2ggb2Ygc3BlY2lmaWVkIGxvY2F0aW9uLlxyXG4gICAgICAgKiBQb2x5Z29ucyBhcmUgY2hvc2VuIHdlaWdodGVkIGJ5IGFyZWEuIFRoZSBzZWFyY2ggcnVucyBpbiBsaW5lYXIgcmVsYXRlZCB0byBudW1iZXIgb2YgcG9seWdvbi5cclxuICAgICAgICogVGhlIGxvY2F0aW9uIGlzIG5vdCBleGFjdGx5IGNvbnN0cmFpbmVkIGJ5IHRoZSBjaXJjbGUsIGJ1dCBpdCBsaW1pdHMgdGhlIHZpc2l0ZWQgcG9seWdvbnMuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAcGFyYW0gc3RhcnRSZWYgVGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiB3aGVyZSB0aGUgc2VhcmNoIHN0YXJ0cy5cclxuICAgICAgICogQHBhcmFtIGNlbnRlclBvcyBUaGUgY2VudGVyIG9mIHRoZSBzZWFyY2ggY2lyY2xlLiBbKHgsIHksIHopXVxyXG4gICAgICAgKiBAcGFyYW0gbWF4UmFkaXVzIFxyXG4gICAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuXHJcbiAgICAgICAqIEBwYXJhbSBmcmFuZCBGdW5jdGlvbiByZXR1cm5pbmcgYSByYW5kb20gbnVtYmVyIFswLi4xKS5cclxuICAgICAgICogQHJldHVybiBSYW5kb20gbG9jYXRpb25cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZFJhbmRvbVBvaW50QXJvdW5kQ2lyY2xlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kUmFuZG9tUG9pbnRBcm91bmRDaXJjbGUoc3RhcnRSZWYsIGNlbnRlclBvcywgbWF4UmFkaXVzLCBmaWx0ZXIsIGZyYW5kKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIHN0YXJ0IHJlZlwiKTtcclxuICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUoc3RhcnRSZWYpO1xyXG4gICAgICAgIHZhciBzdGFydFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICB2YXIgc3RhcnRQb2x5ID0gdGlsZUFuZFBvbHlbMV07XHJcbiAgICAgICAgaWYgKCFmaWx0ZXIucGFzc0ZpbHRlcihzdGFydFJlZiwgc3RhcnRUaWxlLCBzdGFydFBvbHkpKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBzdGFydFwiKTtcclxuICAgICAgICBtX25vZGVQb29sID0gW107XHJcbiAgICAgICAgdGhpcy5tX29wZW5MaXN0ID0gW107XHJcbiAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IG1fbm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHN0YXJ0Tm9kZS5wb3MsIGNlbnRlclBvcyk7XHJcbiAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5jb3N0ID0gMDtcclxuICAgICAgICBzdGFydE5vZGUudG90YWwgPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IERUX05PREVfT1BFTjtcclxuICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChzdGFydE5vZGUpO1xyXG4gICAgICAgIHJhZGl1c1NxciA9IG1heFJhZGl1cyAqIG1heFJhZGl1cztcclxuICAgICAgICBhcmVhU3VtID0gMC4wO1xyXG4gICAgICAgIHZhciByYW5kb21UaWxlID0gbnVsbDtcclxuICAgICAgICB2YXIgcmFuZG9tUG9seSA9IG51bGw7XHJcbiAgICAgICAgdmFyIHJhbmRvbVBvbHlSZWYgPSAwO1xyXG5cclxuICAgICAgICB3aGlsZSAoIXRoaXMubV9vcGVuTGlzdC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgdmFyIGJlc3ROb2RlID0gdGhpcy5tX29wZW5MaXN0LnBvcCgpO1xyXG4gICAgICAgICAgYmVzdE5vZGUuZmxhZ3MgJj0gfkRUX05PREVfT1BFTjtcclxuICAgICAgICAgIGJlc3ROb2RlLmZsYWdzIHw9IERUX05PREVfQ0xPU0VEOyAvLyBHZXQgbGV0IGFuZCB0aWxlLlxyXG4gICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLlxyXG5cclxuICAgICAgICAgIHZhciBiZXN0UmVmID0gYmVzdE5vZGUuaWQ7XHJcbiAgICAgICAgICB2YXIgYmVzdFRpbGVQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGJlc3RSZWYpO1xyXG4gICAgICAgICAgdmFyIGJlc3RUaWxlID0gYmVzdFRpbGVQb2x5WzBdO1xyXG4gICAgICAgICAgdmFyIGJlc3RQb2x5ID0gYmVzdFRpbGVQb2x5WzFdOyAvLyBQbGFjZSByYW5kb20gbG9jYXRpb25zIG9uIG9uIGdyb3VuZC5cclxuXHJcbiAgICAgICAgICBpZiAoYmVzdFBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfR1JPVU5EKSB7XHJcbiAgICAgICAgICAgIC8vIENhbGMgYXJlYSBvZiB0aGUgcG9seWdvbi5cclxuICAgICAgICAgICAgcG9seUFyZWEgPSAwLjA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IGJlc3RQb2x5LnZlcnRDb3VudDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHZhID0gYmVzdFBvbHkudmVydHNbMF0gKiAzO1xyXG4gICAgICAgICAgICAgIHZhciB2YiA9IGJlc3RQb2x5LnZlcnRzW2ogLSAxXSAqIDM7XHJcbiAgICAgICAgICAgICAgdmFyIHZjID0gYmVzdFBvbHkudmVydHNbal0gKiAzO1xyXG4gICAgICAgICAgICAgIHBvbHlBcmVhICs9IERldG91ckNvbW1vbi50cmlBcmVhMkQ0KGJlc3RUaWxlLmRhdGEudmVydHMsIHZhLCB2YiwgdmMpO1xyXG4gICAgICAgICAgICB9IC8vIENob29zZSByYW5kb20gcG9seWdvbiB3ZWlnaHRlZCBieSBhcmVhLCB1c2luZyByZXNlcnZvaSBzYW1wbGluZy5cclxuXHJcblxyXG4gICAgICAgICAgICBhcmVhU3VtICs9IHBvbHlBcmVhO1xyXG4gICAgICAgICAgICB1ID0gZnJhbmQuZnJhbmQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1ICogYXJlYVN1bSA8PSBwb2x5QXJlYSkge1xyXG4gICAgICAgICAgICAgIHJhbmRvbVRpbGUgPSBiZXN0VGlsZTtcclxuICAgICAgICAgICAgICByYW5kb21Qb2x5ID0gYmVzdFBvbHk7XHJcbiAgICAgICAgICAgICAgcmFuZG9tUG9seVJlZiA9IGJlc3RSZWY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gLy8gR2V0IHBhcmVudCBsZXQgYW5kIHRpbGUuXHJcblxyXG5cclxuICAgICAgICAgIHZhciBwYXJlbnRSZWYgPSAwO1xyXG4gICAgICAgICAgaWYgKGJlc3ROb2RlLnBpZHggIT0gMCkgcGFyZW50UmVmID0gbV9ub2RlUG9vbC5nZXROb2RlQXRJZHgoYmVzdE5vZGUucGlkeCkuaWQ7XHJcblxyXG4gICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnRUaWxlUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShwYXJlbnRSZWYpO1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50VGlsZSA9IHBhcmVudFRpbGVQb2x5WzBdO1xyXG4gICAgICAgICAgICB2YXIgcGFyZW50UG9seSA9IHBhcmVudFRpbGVQb2x5WzFdO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvciAodmFyIGkgPSBiZXN0UG9seS5maXJzdExpbms7IGkgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IGkgPSBiZXN0VGlsZS5saW5rc1tpXS5uZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gYmVzdFRpbGUubGlua3NbaV07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBsaW5rLnJlZjsgLy8gU2tpcCBpbnZhbGlkIG5laWdoYm91cnMgYW5kIGRvIG5vdCBmb2xsb3cgYmFjayB0byBwYXJlbnQuXHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyUmVmID09IDAgfHwgbmVpZ2hib3VyUmVmID09IHBhcmVudFJlZikgY29udGludWU7IC8vIEV4cGFuZCB0byBuZWlnaGJvdXJcclxuXHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IG5laWdoYm91clRpbGVQb2x5WzBdO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IG5laWdoYm91clRpbGVQb2x5WzFdOyAvLyBEbyBub3QgYWR2YW5jZSBpZiB0aGUgcG9seWdvbiBpcyBleGNsdWRlZCBieSB0aGUgZmlsdGVyLlxyXG5cclxuICAgICAgICAgICAgaWYgKCFmaWx0ZXIucGFzc0ZpbHRlcihuZWlnaGJvdXJSZWYsIG5laWdoYm91clRpbGUsIG5laWdoYm91clBvbHkpKSBjb250aW51ZTsgLy8gRmluZCBlZGdlIGFuZCBjYWxjIGRpc3RhbmNlIHRvIHRoZSBlZGdlLlxyXG5cclxuICAgICAgICAgICAgdmFyIHBvcnRhbHBvaW50cyA9IHRoaXMuZ2V0UG9ydGFsUG9pbnRzNyhiZXN0UmVmLCBiZXN0UG9seSwgYmVzdFRpbGUsIG5laWdoYm91clJlZiwgbmVpZ2hib3VyUG9seSwgbmVpZ2hib3VyVGlsZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIHZhciBfdmEgPSBwb3J0YWxwb2ludHMubGVmdDtcclxuICAgICAgICAgICAgdmFyIF92YiA9IHBvcnRhbHBvaW50cy5yaWdodDsgLy8gSWYgdGhlIGNpcmNsZSBpcyBub3QgdG91Y2hpbmcgdGhlIG5leHQgcG9seWdvbiwgc2tpcCBpdC5cclxuXHJcbiAgICAgICAgICAgIHZhciBkaXN0c2VnID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDMoY2VudGVyUG9zLCBfdmEsIF92Yik7XHJcbiAgICAgICAgICAgIGRpc3RTcXIgPSBkaXN0c2VnWzBdO1xyXG4gICAgICAgICAgICBpZiAoZGlzdFNxciA+IHJhZGl1c1NxcikgY29udGludWU7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gbV9ub2RlUG9vbC5nZXROb2RlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDApIGNvbnRpbnVlOyAvLyBDb3N0XHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSBuZWlnaGJvdXJOb2RlLnBvcyA9IERldG91ckNvbW1vbi52TGVycDMoX3ZhLCBfdmIsIDAuNSk7XHJcbiAgICAgICAgICAgIHRvdGFsID0gYmVzdE5vZGUudG90YWwgKyBEZXRvdXJDb21tb24udkRpc3QyKGJlc3ROb2RlLnBvcywgbmVpZ2hib3VyTm9kZS5wb3MpOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsIHNraXAuXHJcblxyXG4gICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCAmJiB0b3RhbCA+PSBuZWlnaGJvdXJOb2RlLnRvdGFsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5pZCA9IG5laWdoYm91clJlZjtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyA9IG5laWdoYm91ck5vZGUuZmxhZ3MgJiB+Tm9kZS5EVF9OT0RFX0NMT1NFRDtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gbV9ub2RlUG9vbC5nZXROb2RlSWR4KGJlc3ROb2RlKTtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS50b3RhbCA9IHRvdGFsO1xyXG5cclxuICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDApIHtcclxuICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QubW9kaWZ5KG5laWdoYm91ck5vZGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgPSBOb2RlLkRUX05PREVfT1BFTjtcclxuICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJhbmRvbVBvbHkgPT0gbnVsbCkgcmV0dXJuIG5ldyBGaW5kUmFuZG9tUG9pbnRSZXN1bHQoU3RhdHVzLkZBSUxVUkUsIDAsIG51bGwpOyAvLyBSYW5kb21seSBwaWNrIHBvUG9seSBvbiBwb2x5Z29uLlxyXG5cclxuICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkoMyAqIHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkpO1xyXG4gICAgICAgIHZhciBhcmVhcyA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpKTtcclxuICAgICAgICBhcnJheWNvcHkkNChyYW5kb21UaWxlLmRhdGEudmVydHMsIHJhbmRvbVBvbHkudmVydHNbMF0gKiAzLCB2ZXJ0cywgMCwgMyk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9qMiA9IDE7IF9qMiA8IHJhbmRvbVBvbHkudmVydENvdW50OyArK19qMikge1xyXG4gICAgICAgICAgYXJyYXljb3B5JDQocmFuZG9tVGlsZS5kYXRhLnZlcnRzLCByYW5kb21Qb2x5LnZlcnRzW19qMl0gKiAzLCB2ZXJ0cywgX2oyICogMywgMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzID0gZnJhbmQuZnJhbmQoKTtcclxuICAgICAgICB0ID0gZnJhbmQuZnJhbmQoKTtcclxuICAgICAgICB2YXIgcHQgPSBEZXRvdXJDb21tb24ucmFuZG9tUG9pbnRJbkNvbnZleFBvbHkodmVydHMsIHJhbmRvbVBvbHkudmVydENvdW50LCBhcmVhcywgcywgdCk7XHJcbiAgICAgICAgcHRbMV0gPSBnZXRQb2x5SGVpZ2h0KHJhbmRvbVBvbHlSZWYsIHB0KTtcclxuICAgICAgICByZXR1cm4gbmV3IEZpbmRSYW5kb21Qb2ludFJlc3VsdChTdGF0dXMuU1VDQ1NFU1MsIHJhbmRvbVBvbHlSZWYsIHB0KTtcclxuICAgICAgfSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBVc2VzIHRoZSBkZXRhaWwgcG9seWdvbnMgdG8gZmluZCB0aGUgc3VyZmFjZSBoZWlnaHQuIChNb3N0IGFjY3VyYXRlLilcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAcCBwb3MgZG9lcyBub3QgaGF2ZSB0byBiZSB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcG9seWdvbiBvciBuYXZpZ2F0aW9uIG1lc2guXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gU2VlIGNsb3Nlc3RQb2ludE9uUG9seUJvdW5kYXJ5KCkgZm9yIGEgbGltaXRlZCBidXQgZmFzdGVyIG9wdGlvbi5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBGaW5kcyB0aGUgY2xvc2VzdCBwb1BvbHkgb24gdGhlIHNwZWNpZmllZCBwb2x5Z29uLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0cmVmXHRcdFx0VGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbi5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdHBvc1x0XHRcdFRoZSBwb3NpdGlvbiB0byBjaGVjay4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0Y2xvc2VzdFx0XHRcclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0cG9zT3ZlclBvbHlcdFxyXG4gICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNsb3Nlc3RQb2ludE9uUG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VzdFBvaW50T25Qb2x5KHJlZiwgcG9zKSB7XHJcbiAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHJlZik7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICB2YXIgcG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBPZmYtbWVzaCBjb25uZWN0aW9ucyBkb24ndCBoYXZlIGRldGFpbCBwb2x5Z29ucy5cclxuXHJcbiAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB7XHJcbiAgICAgICAgICB2YXIgX3YgPSBwb2x5LnZlcnRzWzBdICogMztcclxuXHJcbiAgICAgICAgICB2YXIgX3YyID0gcG9seS52ZXJ0c1sxXSAqIDM7XHJcblxyXG4gICAgICAgICAgdmFyIF9kID0gRGV0b3VyQ29tbW9uLnZEaXN0Myhwb3MsIHRpbGUuZGF0YS52ZXJ0cywgX3YpO1xyXG5cclxuICAgICAgICAgIHZhciBfZDIgPSBEZXRvdXJDb21tb24udkRpc3QzKHBvcywgdGlsZS5kYXRhLnZlcnRzLCBfdjIpO1xyXG5cclxuICAgICAgICAgIHZhciBfdSA9IF9kIC8gKF9kICsgX2QyKTtcclxuXHJcbiAgICAgICAgICB2YXIgX2Nsb3Nlc3QgPSBEZXRvdXJDb21tb24udkxlcnA0KHRpbGUuZGF0YS52ZXJ0cywgX3YsIF92MiwgX3UpO1xyXG5cclxuICAgICAgICAgIHJldHVybiBuZXcgQ2xvc2VzUG9pbnRPblBvbHlSZXN1bHQoZmFsc2UsIF9jbG9zZXN0KTtcclxuICAgICAgICB9IC8vIENsYW1wIHBvUG9seSB0byBiZSBpbnNpZGUgdGhlIHBvbHlnb24uXHJcblxyXG5cclxuICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSAqIDMpO1xyXG4gICAgICAgIHZhciBlZGdlZCA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpKTtcclxuICAgICAgICB2YXIgZWRnZXQgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSk7XHJcbiAgICAgICAgdmFyIG52ID0gcG9seS52ZXJ0Q291bnQ7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnY7ICsraSkge1xyXG4gICAgICAgICAgYXJyYXljb3B5JDQodGlsZS5kYXRhLnZlcnRzLCBwb2x5LnZlcnRzW2ldICogMywgdmVydHMsIGkgKiAzLCAzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwb3NPdmVyUG9seSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBjbG9zZXN0ID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShjbG9zZXN0LCBwb3MpO1xyXG5cclxuICAgICAgICBpZiAoIURldG91ckNvbW1vbi5kaXN0YW5jZVB0UG9seUVkZ2VzU3FyKHBvcywgdmVydHMsIG52LCBlZGdlZCwgZWRnZXQpKSB7XHJcbiAgICAgICAgICAvLyBQb1BvbHkgaXMgb3V0c2lkZSB0aGUgcG9seWdvbiwgZHRDbGFtcCB0byBuZWFyZXN0IGVkZ2UuXHJcbiAgICAgICAgICB2YXIgZG1pbiA9IGVkZ2VkWzBdO1xyXG4gICAgICAgICAgdmFyIGltaW4gPSAwO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9pMiA9IDE7IF9pMiA8IG52OyArK19pMikge1xyXG4gICAgICAgICAgICBpZiAoZWRnZWRbX2kyXSA8IGRtaW4pIHtcclxuICAgICAgICAgICAgICBkbWluID0gZWRnZWRbX2kyXTtcclxuICAgICAgICAgICAgICBpbWluID0gX2kyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIHZhID0gaW1pbiAqIDM7XHJcbiAgICAgICAgICB2YXIgdmIgPSAoaW1pbiArIDEpICUgbnYgKiAzO1xyXG4gICAgICAgICAgY2xvc2VzdCA9IERldG91ckNvbW1vbi52TGVycDQodmVydHMsIHZhLCB2YiwgZWRnZXRbaW1pbl0pO1xyXG4gICAgICAgICAgcG9zT3ZlclBvbHkgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcG9zT3ZlclBvbHkgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGlwID0gcG9seS5pbmRleDtcclxuXHJcbiAgICAgICAgaWYgKHRpbGUuZGF0YS5kZXRhaWxNZXNoZXMgIT0gbnVsbCAmJiB0aWxlLmRhdGEuZGV0YWlsTWVzaGVzLmxlbmd0aCA+IGlwKSB7XHJcbiAgICAgICAgICB2YXIgcGQgPSB0aWxlLmRhdGEuZGV0YWlsTWVzaGVzW2lwXTsgLy8gRmluZCBoZWlnaHQgYXQgdGhlIGxvY2F0aW9uLlxyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGQudHJpQ291bnQ7ICsraikge1xyXG4gICAgICAgICAgICB2YXIgX3QyID0gKHBkLnRyaUJhc2UgKyBqKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBBcnJheSgzKTsgLy9XYXMgbmV3IEFycmF5KDMpW11cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgMzsgKytrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRpbGUuZGF0YS5kZXRhaWxUcmlzW190MiArIGtdIDwgcG9seS52ZXJ0Q291bnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBvbHkudmVydHNbdGlsZS5kYXRhLmRldGFpbFRyaXNbX3QyICsga11dICogMztcclxuICAgICAgICAgICAgICAgIHZba10gPSBbdGlsZS5kYXRhLnZlcnRzW2luZGV4XSwgdGlsZS5kYXRhLnZlcnRzW2luZGV4ICsgMV0sIHRpbGUuZGF0YS52ZXJ0c1tpbmRleCArIDJdXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9pbmRleCA9IChwZC52ZXJ0QmFzZSArICh0aWxlLmRhdGEuZGV0YWlsVHJpc1tfdDIgKyBrXSAtIHBvbHkudmVydENvdW50KSkgKiAzO1xyXG5cclxuICAgICAgICAgICAgICAgIHZba10gPSBbdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleF0sIHRpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXggKyAxXSwgdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleCArIDJdXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBoZWlnaHRSZXN1bHQgPSBEZXRvdXJDb21tb24uY2xvc2VzdEhlaWdodFBvaW50VHJpYW5nbGUoY2xvc2VzdCwgdlswXSwgdlsxXSwgdlsyXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaGVpZ2h0UmVzdWx0WzBdKSB7XHJcbiAgICAgICAgICAgICAgY2xvc2VzdFsxXSA9IGhlaWdodFJlc3VsdFsxXTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBDbG9zZXN0UG9pbnRPblBvbHlSZXN1bHQocG9zT3ZlclBvbHksIGNsb3Nlc3QpO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gTXVjaCBmYXN0ZXIgdGhhbiBjbG9zZXN0UG9pbnRPblBvbHkoKS5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBJZiB0aGUgcHJvdmlkZWQgcG9zaXRpb24gbGllcyB3aXRoaW4gdGhlIHBvbHlnb24ncyB4ei1ib3VuZHMgKGFib3ZlIG9yIGJlbG93KSxcclxuICAgICAgLy8vIHRoZW4gQHAgcG9zIGFuZCBAcCBjbG9zZXN0IHdpbGwgYmUgZXF1YWwuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIGhlaWdodCBvZiBAcCBjbG9zZXN0IHdpbGwgYmUgdGhlIHBvbHlnb24gYm91bmRhcnkuIFRoZSBoZWlnaHQgZGV0YWlsIGlzIG5vdCB1c2VkLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBwIHBvcyBkb2VzIG5vdCBoYXZlIHRvIGJlIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBwb2x5Ym9uIG9yIHRoZSBuYXZpZ2F0aW9uIG1lc2guXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gUmV0dXJucyBhIHBvUG9seSBvbiB0aGUgYm91bmRhcnkgY2xvc2VzdCB0byB0aGUgc291cmNlIHBvUG9seSBpZiB0aGUgc291cmNlIHBvUG9seSBpcyBvdXRzaWRlIHRoZSBcclxuICAgICAgLy8vIHBvbHlnb24ncyB4ei1ib3VuZHMuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyZWZcdFx0XHRUaGUgcmVmZXJlbmNlIGlkIHRvIHRoZSBwb2x5Z29uLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0cG9zXHRcdFx0VGhlIHBvc2l0aW9uIHRvIGNoZWNrLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRjbG9zZXN0XHRcdFRoZSBjbG9zZXN0IHBvaW50LiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNsb3Nlc3RQb2ludE9uUG9seUJvdW5kYXJ5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeShyZWYsIHBvcykge1xyXG4gICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihyZWYpO1xyXG4gICAgICAgIHZhciB0aWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgdmFyIHBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gQ29sbGVjdCB2ZXJ0aWNlcy5cclxuXHJcbiAgICAgICAgdmFyIHZlcnRzID0gbmV3IEFycmF5KHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkgKiAzKTtcclxuICAgICAgICB2YXIgZWRnZWQgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSk7XHJcbiAgICAgICAgdmFyIGVkZ2V0ID0gbmV3IEFycmF5KHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkpO1xyXG4gICAgICAgIHZhciBudiA9IHBvbHkudmVydENvdW50O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG52OyArK2kpIHtcclxuICAgICAgICAgIGFycmF5Y29weSQ0KHRpbGUuZGF0YS52ZXJ0cywgcG9seS52ZXJ0c1tpXSAqIDMsIHZlcnRzLCBpICogMywgMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY2xvc2VzdDtcclxuXHJcbiAgICAgICAgaWYgKERldG91ckNvbW1vbi5kaXN0YW5jZVB0UG9seUVkZ2VzU3FyKHBvcywgdmVydHMsIG52LCBlZGdlZCwgZWRnZXQpKSB7XHJcbiAgICAgICAgICBjbG9zZXN0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBQb1BvbHkgaXMgb3V0c2lkZSB0aGUgcG9seWdvbiwgZHRDbGFtcCB0byBuZWFyZXN0IGVkZ2UuXHJcbiAgICAgICAgICB2YXIgZG1pbiA9IGVkZ2VkWzBdO1xyXG4gICAgICAgICAgdmFyIGltaW4gPSAwO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9pMyA9IDE7IF9pMyA8IG52OyArK19pMykge1xyXG4gICAgICAgICAgICBpZiAoZWRnZWRbX2kzXSA8IGRtaW4pIHtcclxuICAgICAgICAgICAgICBkbWluID0gZWRnZWRbX2kzXTtcclxuICAgICAgICAgICAgICBpbWluID0gX2kzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIHZhID0gaW1pbiAqIDM7XHJcbiAgICAgICAgICB2YXIgdmIgPSAoaW1pbiArIDEpICUgbnYgKiAzO1xyXG4gICAgICAgICAgY2xvc2VzdCA9IERldG91ckNvbW1vbi52TGVycDQodmVydHMsIHZhLCB2YiwgZWRnZXRbaW1pbl0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNsb3Nlc3Q7XHJcbiAgICAgIH0gLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBXaWxsIHJldHVybiAjRFRfRkFJTFVSRSBpZiB0aGUgcHJvdmlkZWQgcG9zaXRpb24gaXMgb3V0c2lkZSB0aGUgeHotYm91bmRzXHJcbiAgICAgIC8vLyBvZiB0aGUgcG9seWdvbi5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIHBvbHlnb24gYXQgdGhlIHByb3ZpZGVkIHBvc2l0aW9uIHVzaW5nIHRoZSBoZWlnaHQgZGV0YWlsLiAoTW9zdCBhY2N1cmF0ZS4pXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyZWZcdFx0XHRUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBwb2x5Z29uLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0cG9zXHRcdFx0QSBwb3NpdGlvbiB3aXRoaW4gdGhlIHh6LWJvdW5kcyBvZiB0aGUgcG9seWdvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0aGVpZ2h0XHRcdFRoZSBoZWlnaHQgYXQgdGhlIHN1cmZhY2Ugb2YgdGhlIHBvbHlnb24uXHJcbiAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UG9seUhlaWdodFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9seUhlaWdodChyZWYsIHBvcykge1xyXG4gICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihyZWYpO1xyXG4gICAgICAgIHZhciB0aWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgdmFyIHBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuXHJcbiAgICAgICAgaWYgKHBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB7XHJcbiAgICAgICAgICB2YXIgaSA9IHBvbHkudmVydHNbMF0gKiAzO1xyXG4gICAgICAgICAgaSA9IHBvbHkudmVydHNbMV0gKiAzO1xyXG4gICAgICAgICAgbGV0djEgPSBbdGlsZS5kYXRhLnZlcnRzW2ldLCB0aWxlLmRhdGEudmVydHNbaSArIDFdLCB0aWxlLmRhdGEudmVydHNbaSArIDJdXTtcclxuICAgICAgICAgIGQwID0gRGV0b3VyQ29tbW9uLnZEaXN0MkQocG9zLCB2MCk7XHJcbiAgICAgICAgICBkMSA9IERldG91ckNvbW1vbi52RGlzdDJEKHBvcywgdjEpO1xyXG4gICAgICAgICAgdSA9IGQwIC8gKGQwICsgZDEpO1xyXG4gICAgICAgICAgcmV0dXJuIHYwWzFdICsgKHYxWzFdIC0gdjBbMV0pICogdTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdmFyIGlwID0gcG9seS5pbmRleDtcclxuICAgICAgICAgIHZhciBwZCA9IHRpbGUuZGF0YS5kZXRhaWxNZXNoZXNbaXBdO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGQudHJpQ291bnQ7ICsraikge1xyXG4gICAgICAgICAgICB2YXIgX3QzID0gKHBkLnRyaUJhc2UgKyBqKSAqIDQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgdiA9IG5ldyBBcnJheSgzKTsgLy9uZXcgQXJyYXkoMylbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgMzsgKytrKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHRpbGUuZGF0YS5kZXRhaWxUcmlzW190MyArIGtdIDwgcG9seS52ZXJ0Q291bnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBvbHkudmVydHNbdGlsZS5kYXRhLmRldGFpbFRyaXNbX3QzICsga11dICogMztcclxuICAgICAgICAgICAgICAgIHZba10gPSBbdGlsZS5kYXRhLnZlcnRzW2luZGV4XSwgdGlsZS5kYXRhLnZlcnRzW2luZGV4ICsgMV0sIHRpbGUuZGF0YS52ZXJ0c1tpbmRleCArIDJdXTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9pbmRleDIgPSAocGQudmVydEJhc2UgKyAodGlsZS5kYXRhLmRldGFpbFRyaXNbX3QzICsga10gLSBwb2x5LnZlcnRDb3VudCkpICogMztcclxuXHJcbiAgICAgICAgICAgICAgICB2W2tdID0gW3RpbGUuZGF0YS5kZXRhaWxWZXJ0c1tfaW5kZXgyXSwgdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleDIgKyAxXSwgdGlsZS5kYXRhLmRldGFpbFZlcnRzW19pbmRleDIgKyAyXV07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgaGVpZ2h0UmVzdWx0ID0gRGV0b3VyQ29tbW9uLmNsb3Nlc3RIZWlnaHRQb2ludFRyaWFuZ2xlKHBvcywgdlswXSwgdlsxXSwgdlsyXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaGVpZ2h0UmVzdWx0WzBdKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGhlaWdodFJlc3VsdFsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgcmVmIFwiICsgcmVmICsgXCIgcG9zIFwiICsgQXJyYXlzLnRvU3RyaW5nKHBvcykpO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQG5vdGUgSWYgdGhlIHNlYXJjaCBib3ggZG9lcyBub3QgaW50ZXJzZWN0IGFueSBwb2x5Z29ucyB0aGUgc2VhcmNoIHdpbGxcclxuICAgICAgLy8vIHJldHVybiAjRFRfU1VDQ0VTUywgYnV0IEBwIG5lYXJlc3RSZWYgd2lsbCBiZSB6ZXJvLiBTbyBpZiBpbiBkb3VidCwgY2hlY2tcclxuICAgICAgLy8vIEBwIG5lYXJlc3RSZWYgYmVmb3JlIHVzaW5nIEBwIG5lYXJlc3RQdC5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAfVxyXG4gICAgICAvLy8gQG5hbWUgTG9jYWwgUXVlcnkgRnVuY3Rpb25zXHJcbiAgICAgIC8vL0B7XHJcbiAgICAgIC8vLyBGaW5kcyB0aGUgcG9seWdvbiBuZWFyZXN0IHRvIHRoZSBzcGVjaWZpZWQgY2VudGVyIHBvaW50LlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0Y2VudGVyXHRcdFRoZSBjZW50ZXIgb2YgdGhlIHNlYXJjaCBib3guIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRleHRlbnRzXHRcdFRoZSBzZWFyY2ggZGlzdGFuY2UgYVBvbHkgZWFjaCBheGlzLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0ZmlsdGVyXHRcdFRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuXHJcbiAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZE5lYXJlc3RQb2x5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTmVhcmVzdFBvbHkoY2VudGVyLCBleHRlbnRzLCBmaWx0ZXIpIHtcclxuICAgICAgICB2YXIgbmVhcmVzdFB0ID0gbnVsbDsgLy8gR2V0IG5lYXJieSBwb2x5Z29ucyBmcm9tIHByb3hpbWl0eSBncmlkLlxyXG5cclxuICAgICAgICB2YXIgcG9seXMgPSB0aGlzLnF1ZXJ5UG9seWdvbnMoY2VudGVyLCBleHRlbnRzLCBmaWx0ZXIpOyAvLyBGaW5kIG5lYXJlc3QgcG9seWdvbiBhbW9uZ3N0IHRoZSBuZWFyYnkgcG9seWdvbnMuXHJcblxyXG4gICAgICAgIHZhciBuZWFyZXN0ID0gMDtcclxuICAgICAgICB2YXIgbmVhcmVzdERpc3RhbmNlU3FyID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2x5cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgdmFyIHJlZiA9IHBvbHlzW2ldO1xyXG4gICAgICAgICAgdmFyIGNsb3Nlc3QgPSB0aGlzLmNsb3Nlc3RQb2ludE9uUG9seShyZWYsIGNlbnRlcik7XHJcbiAgICAgICAgICB2YXIgcG9zT3ZlclBvbHkgPSBjbG9zZXN0LmlzUG9zT3ZlclBvbHkoKTtcclxuICAgICAgICAgIHZhciBjbG9zZXN0UHRQb2x5ID0gY2xvc2VzdC5nZXRDbG9zZXN0KCk7IC8vIElmIGEgcG9Qb2x5IGlzIGRpcmVjdGx5IG92ZXIgYSBwb2x5Z29uIGFuZCBjbG9zZXIgdGhhblxyXG4gICAgICAgICAgLy8gY2xpbWIgaGVpZ2h0LCBmYXZvciB0aGF0IGluc3RlYWQgb2Ygc3RyYWlnaHQgbGluZSBuZWFyZXN0IHBvaW50LlxyXG5cclxuICAgICAgICAgIHZhciBkID0gMDtcclxuICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIoY2VudGVyLCBjbG9zZXN0UHRQb2x5KTtcclxuXHJcbiAgICAgICAgICBpZiAocG9zT3ZlclBvbHkpIHtcclxuICAgICAgICAgICAgdmFyIHRpbGFBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBvbHlzW2ldKTtcclxuICAgICAgICAgICAgdmFyIF90aWxlID0gdGlsYUFuZFBvbHlbMF07XHJcbiAgICAgICAgICAgIGQgPSBNYXRoLmFicyhkaWZmWzFdKSAtIF90aWxlLmRhdGEuaGVhZGVyLndhbGthYmxlQ2xpbWI7XHJcbiAgICAgICAgICAgIGQgPSBkID4gMCA/IGQgKiBkIDogMDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGQgPSBEZXRvdXJDb21tb24udkxlblNxcihkaWZmKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoZCA8IG5lYXJlc3REaXN0YW5jZVNxcikge1xyXG4gICAgICAgICAgICBuZWFyZXN0UHQgPSBjbG9zZXN0UHRQb2x5O1xyXG4gICAgICAgICAgICBuZWFyZXN0RGlzdGFuY2VTcXIgPSBkO1xyXG4gICAgICAgICAgICBuZWFyZXN0ID0gcmVmO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kTmVhcmVzdFBvbHlSZXN1bHQobmVhcmVzdCwgbmVhcmVzdFB0KTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYW5kXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhbmQodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGhpID0gMHg4MDAwMDAwMDtcclxuICAgICAgICB2YXIgbG93ID0gMHg3ZmZmZmZmZjtcclxuICAgICAgICB2YXIgaGkxID0gfn4odjEgLyBoaSk7XHJcbiAgICAgICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpO1xyXG4gICAgICAgIHZhciBsb3cxID0gdjEgJiBsb3c7XHJcbiAgICAgICAgdmFyIGxvdzIgPSB2MiAmIGxvdztcclxuICAgICAgICB2YXIgaCA9IGhpMSAmIGhpMjtcclxuICAgICAgICB2YXIgbCA9IGxvdzEgJiBsb3cyO1xyXG4gICAgICAgIHJldHVybiBoICogaGkgKyBsO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3IodjEsIHYyKSB7XHJcbiAgICAgICAgdmFyIGhpID0gMHg4MDAwMDAwMDtcclxuICAgICAgICB2YXIgbG93ID0gMHg3ZmZmZmZmZjtcclxuICAgICAgICB2YXIgaGkxID0gfn4odjEgLyBoaSk7XHJcbiAgICAgICAgdmFyIGhpMiA9IH5+KHYyIC8gaGkpO1xyXG4gICAgICAgIHZhciBsb3cxID0gdjEgJiBsb3c7XHJcbiAgICAgICAgdmFyIGxvdzIgPSB2MiAmIGxvdztcclxuICAgICAgICB2YXIgaCA9IGhpMSB8IGhpMjtcclxuICAgICAgICB2YXIgbCA9IGxvdzEgfCBsb3cyO1xyXG4gICAgICAgIHJldHVybiBoICogaGkgKyBsO1xyXG4gICAgICB9IC8vIEZJWE1FOiAoUFApIGR1cGxpY2F0ZT9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJxdWVyeVBvbHlnb25zSW5UaWxlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeVBvbHlnb25zSW5UaWxlKHRpbGUsIHFtaW4sIHFtYXgsIGZpbHRlcikge1xyXG4gICAgICAgIHZhciBwb2x5cyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAodGlsZS5kYXRhLmJ2VHJlZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICB2YXIgbm9kZUluZGV4ID0gMDtcclxuICAgICAgICAgIHZhciB0Ym1pbiA9IHRpbGUuZGF0YS5oZWFkZXIuYm1pbjtcclxuICAgICAgICAgIHZhciB0Ym1heCA9IHRpbGUuZGF0YS5oZWFkZXIuYm1heDtcclxuICAgICAgICAgIHZhciBxZmFjID0gdGlsZS5kYXRhLmhlYWRlci5idlF1YW50RmFjdG9yOyAvLyBDYWxjdWxhdGUgcXVhbnRpemVkIGJveFxyXG5cclxuICAgICAgICAgIHZhciBibWluID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgdmFyIGJtYXggPSBuZXcgQXJyYXkoMyk7IC8vIGR0Q2xhbXAgcXVlcnkgYm94IHRvIHdvcmxkIGJveC5cclxuXHJcbiAgICAgICAgICB2YXIgbWlueCA9IERldG91ckNvbW1vbi5jbGFtcChxbWluWzBdLCB0Ym1pblswXSwgdGJtYXhbMF0pIC0gdGJtaW5bMF07XHJcbiAgICAgICAgICB2YXIgbWlueSA9IERldG91ckNvbW1vbi5jbGFtcChxbWluWzFdLCB0Ym1pblsxXSwgdGJtYXhbMV0pIC0gdGJtaW5bMV07XHJcbiAgICAgICAgICB2YXIgbWlueiA9IERldG91ckNvbW1vbi5jbGFtcChxbWluWzJdLCB0Ym1pblsyXSwgdGJtYXhbMl0pIC0gdGJtaW5bMl07XHJcbiAgICAgICAgICB2YXIgbWF4eCA9IERldG91ckNvbW1vbi5jbGFtcChxbWF4WzBdLCB0Ym1pblswXSwgdGJtYXhbMF0pIC0gdGJtaW5bMF07XHJcbiAgICAgICAgICB2YXIgbWF4eSA9IERldG91ckNvbW1vbi5jbGFtcChxbWF4WzFdLCB0Ym1pblsxXSwgdGJtYXhbMV0pIC0gdGJtaW5bMV07XHJcbiAgICAgICAgICB2YXIgbWF4eiA9IERldG91ckNvbW1vbi5jbGFtcChxbWF4WzJdLCB0Ym1pblsyXSwgdGJtYXhbMl0pIC0gdGJtaW5bMl07IC8vIFF1YW50aXplXHJcblxyXG4gICAgICAgICAgYm1pblswXSA9IHRoaXMuYW5kKE1hdGguZmxvb3IocWZhYyAqIG1pbngpLCAweGZmZmUpO1xyXG4gICAgICAgICAgYm1pblsxXSA9IHRoaXMuYW5kKE1hdGguZmxvb3IocWZhYyAqIG1pbnkpLCAweGZmZmUpO1xyXG4gICAgICAgICAgYm1pblsyXSA9IHRoaXMuYW5kKE1hdGguZmxvb3IocWZhYyAqIG1pbnopLCAweGZmZmUpO1xyXG4gICAgICAgICAgYm1heFswXSA9IHRoaXMub3IoTWF0aC5mbG9vcihxZmFjICogbWF4eCArIDEpLCAxKTtcclxuICAgICAgICAgIGJtYXhbMV0gPSB0aGlzLm9yKE1hdGguZmxvb3IocWZhYyAqIG1heHkgKyAxKSwgMSk7XHJcbiAgICAgICAgICBibWF4WzJdID0gdGhpcy5vcihNYXRoLmZsb29yKHFmYWMgKiBtYXh6ICsgMSksIDEpOyAvLyBUcmF2ZXJzZSB0cmVlXHJcblxyXG4gICAgICAgICAgdmFyIGJhc2UgPSB0aGlzLm1fbmF2LmdldFBvbHlSZWZCYXNlKHRpbGUpO1xyXG4gICAgICAgICAgdmFyIGVuZCA9IHRpbGUuZGF0YS5oZWFkZXIuYnZOb2RlQ291bnQ7XHJcblxyXG4gICAgICAgICAgd2hpbGUgKG5vZGVJbmRleCA8IGVuZCkge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRpbGUuZGF0YS5idlRyZWVbbm9kZUluZGV4XTtcclxuICAgICAgICAgICAgdmFyIG92ZXJsYXAgPSBEZXRvdXJDb21tb24ub3ZlcmxhcFF1YW50Qm91bmRzKGJtaW4sIGJtYXgsIG5vZGUuYm1pbiwgbm9kZS5ibWF4KTtcclxuICAgICAgICAgICAgdmFyIGlzTGVhZk5vZGUgPSBub2RlLmkgPj0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0xlYWZOb2RlICYmIG92ZXJsYXApIHtcclxuICAgICAgICAgICAgICB2YXIgcmVmID0gdGhpcy5vcihiYXNlLCBub2RlLmkpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBhc3NGaWx0ZXIocmVmLCB0aWxlLCB0aWxlLmRhdGEucG9seXNbbm9kZS5pXSkpIHtcclxuICAgICAgICAgICAgICAgIHBvbHlzLnB1c2gocmVmKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvdmVybGFwIHx8IGlzTGVhZk5vZGUpIG5vZGVJbmRleCsrO2Vsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciBlc2NhcGVJbmRleCA9IC1ub2RlLmk7XHJcbiAgICAgICAgICAgICAgbm9kZUluZGV4ICs9IGVzY2FwZUluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHBvbHlzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB2YXIgX2JtaW4gPSBuZXcgQXJyYXkoMyk7XHJcblxyXG4gICAgICAgICAgdmFyIF9ibWF4ID0gbmV3IEFycmF5KDMpO1xyXG5cclxuICAgICAgICAgIHZhciBfYmFzZSA9IHRoaXMubV9uYXYuZ2V0UG9seVJlZkJhc2UodGlsZSk7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aWxlLmRhdGEuaGVhZGVyLnBvbHlDb3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBwID0gdGlsZS5kYXRhLnBvbHlzW2ldOyAvLyBEbyBub3QgcmV0dXJuIG9mZi1tZXNoIGNvbm5lY3Rpb24gcG9seWdvbnMuXHJcblxyXG4gICAgICAgICAgICBpZiAocC5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9yZWYgPSBfYmFzZSB8IGk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKF9yZWYsIHRpbGUsIHApKSBjb250aW51ZTsgLy8gQ2FsYyBwb2x5Z29uIGJvdW5kcy5cclxuXHJcbiAgICAgICAgICAgIHZhciB2ID0gcC52ZXJ0c1swXSAqIDM7XHJcbiAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShfYm1pbiwgdGlsZS5kYXRhLnZlcnRzLCB2KTtcclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KF9ibWF4LCB0aWxlLmRhdGEudmVydHMsIHYpO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCBwLnZlcnRDb3VudDsgKytqKSB7XHJcbiAgICAgICAgICAgICAgdiA9IHAudmVydHNbal0gKiAzO1xyXG4gICAgICAgICAgICAgIERldG91ckNvbW1vbi52TWluKF9ibWluLCB0aWxlLmRhdGEudmVydHMsIHYpO1xyXG4gICAgICAgICAgICAgIERldG91ckNvbW1vbi52TWF4KF9ibWF4LCB0aWxlLmRhdGEudmVydHMsIHYpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAob3ZlcmxhcEJvdW5kcyhxbWluLCBxbWF4LCBfYm1pbiwgX2JtYXgpKSB7XHJcbiAgICAgICAgICAgICAgcG9seXMucHVzaChfcmVmKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiBwb2x5cztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEZpbmRzIHBvbHlnb25zIHRoYXQgb3ZlcmxhcCB0aGUgc2VhcmNoIGJveC5cclxuICAgICAgICogXHJcbiAgICAgICAqIElmIG5vIHBvbHlnb25zIGFyZSBmb3VuZCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHdpdGggYSBwb2x5Q291bnQgb2YgemVyby5cclxuICAgICAgICogXHJcbiAgICAgICAqIEBwYXJhbSBjZW50ZXJcclxuICAgICAgICogICAgICAgICAgICBUaGUgY2VudGVyIG9mIHRoZSBzZWFyY2ggYm94LiBbKHgsIHksIHopXVxyXG4gICAgICAgKiBAcGFyYW0gZXh0ZW50c1xyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBzZWFyY2ggZGlzdGFuY2UgYVBvbHkgZWFjaCBheGlzLiBbKHgsIHksIHopXVxyXG4gICAgICAgKiBAcGFyYW0gKGZpbHRlcilcclxuICAgICAgICogICAgICAgICAgICBUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAgKiBAcmV0dXJuIFRoZSByZWZlcmVuY2UgaWRzIG9mIHRoZSBwb2x5Z29ucyB0aGF0IG92ZXJsYXAgdGhlIHF1ZXJ5IGJveC5cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicXVlcnlQb2x5Z29uc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcXVlcnlQb2x5Z29ucyhjZW50ZXIsIGV4dGVudHMsIGZpbHRlcikge1xyXG4gICAgICAgIHZhciBibWluID0gRGV0b3VyQ29tbW9uLnZTdWIoY2VudGVyLCBleHRlbnRzKTtcclxuICAgICAgICB2YXIgYm1heCA9IERldG91ckNvbW1vbi52QWRkKGNlbnRlciwgZXh0ZW50cyk7IC8vIEZpbmQgdGlsZXMgdGhlIHF1ZXJ5IHRvdWNoZXMuXHJcblxyXG4gICAgICAgIHZhciBtaW54eSA9IHRoaXMubV9uYXYuY2FsY1RpbGVMb2MoYm1pbik7XHJcbiAgICAgICAgdmFyIG1pbnggPSBtaW54eVswXTtcclxuICAgICAgICB2YXIgbWlueSA9IG1pbnh5WzFdO1xyXG4gICAgICAgIHZhciBtYXh4eSA9IHRoaXMubV9uYXYuY2FsY1RpbGVMb2MoYm1heCk7XHJcbiAgICAgICAgdmFyIG1heHggPSBtYXh4eVswXTtcclxuICAgICAgICB2YXIgbWF4eSA9IG1heHh5WzFdO1xyXG4gICAgICAgIHZhciBwb2x5cyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gbWlueTsgeSA8PSBtYXh5OyArK3kpIHtcclxuICAgICAgICAgIGZvciAodmFyIF94ID0gbWlueDsgX3ggPD0gbWF4eDsgKytfeCkge1xyXG4gICAgICAgICAgICB2YXIgbmVpcyA9IHRoaXMubV9uYXYuZ2V0VGlsZXNBdChfeCwgeSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5laXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgICAgICB2YXIgcG9seXNJblRpbGUgPSB0aGlzLnF1ZXJ5UG9seWdvbnNJblRpbGUobmVpc1tqXSwgYm1pbiwgYm1heCwgZmlsdGVyKTtcclxuICAgICAgICAgICAgICBwb2x5cy5wdXNoLmFwcGx5KHBvbHlzLCBfdG9Db25zdW1hYmxlQXJyYXkocG9seXNJblRpbGUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHBvbHlzO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBGaW5kcyBhIHBhdGggZnJvbSB0aGUgc3RhcnQgcG9seWdvbiB0byB0aGUgZW5kIHBvbHlnb24uXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBJZiB0aGUgZW5kIHBvbHlnb24gY2Fubm90IGJlIHJlYWNoZWQgdGhyb3VnaCB0aGUgbmF2aWdhdGlvbiBncmFwaCwgdGhlIGxhc3QgcG9seWdvbiBpbiB0aGUgcGF0aCB3aWxsIGJlIHRoZVxyXG4gICAgICAgKiBuZWFyZXN0IHRoZSBlbmQgcG9seWdvbi5cclxuICAgICAgICogXHJcbiAgICAgICAqIFRoZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyBhcmUgdXNlZCB0byBjYWxjdWxhdGUgdHJhdmVyc2FsIGNvc3RzLiAoVGhlIHktdmFsdWVzIGltcGFjdCB0aGUgcmVzdWx0LilcclxuICAgICAgICogXHJcbiAgICAgICAqIEBwYXJhbSBzdGFydFJlZlxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSByZWZyZW5jZSBpZCBvZiB0aGUgc3RhcnQgcG9seWdvbi5cclxuICAgICAgICogQHBhcmFtIGVuZFJlZlxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIGVuZCBwb2x5Z29uLlxyXG4gICAgICAgKiBAcGFyYW0gc3RhcnRQb3NcclxuICAgICAgICogICAgICAgICAgICBBIHBvc2l0aW9uIHdpdGhpbiB0aGUgc3RhcnQgcG9seWdvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgICogQHBhcmFtIGVuZFBvc1xyXG4gICAgICAgKiAgICAgICAgICAgIEEgcG9zaXRpb24gd2l0aGluIHRoZSBlbmQgcG9seWdvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgICogQHBhcmFtIGZpbHRlclxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuXHJcbiAgICAgICAqIEByZXR1cm4gRm91bmQgcGF0aFxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJmaW5kUGF0aFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZFBhdGgoc3RhcnRSZWYsIGVuZFJlZiwgc3RhcnRQb3MsIGVuZFBvcywgZmlsdGVyKSB7XHJcbiAgICAgICAgaWYgKHN0YXJ0UmVmID09IDAgfHwgZW5kUmVmID09IDApIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJTdGFydCBvciBlbmQgcmVmID0gMFwiKTsgLy8gVmFsaWRhdGUgaW5wdXRcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihlbmRSZWYpKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBzdGFydCBvciBlbmQgcmVmXCIpO1xyXG5cclxuICAgICAgICBpZiAoc3RhcnRSZWYgPT0gZW5kUmVmKSB7XHJcbiAgICAgICAgICB2YXIgX3BhdGggPSBuZXcgQXJyYXkoMSk7XHJcblxyXG4gICAgICAgICAgX3BhdGgucHVzaChzdGFydFJlZik7XHJcblxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChTdGF0dXMuU1VDQ1NFU1MsIF9wYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubV9ub2RlUG9vbCA9IFtdO1xyXG4gICAgICAgIHRoaXMubV9vcGVuTGlzdCA9IFtdO1xyXG4gICAgICAgIHZhciBzdGFydE5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHN0YXJ0Tm9kZS5wb3MsIHN0YXJ0UG9zKTtcclxuICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLmNvc3QgPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS50b3RhbCA9IERldG91ckNvbW1vbi52RGlzdDIoc3RhcnRQb3MsIGVuZFBvcykgKiBOYXZNZXNoUXVlcnkuSF9TQ0FMRTtcclxuICAgICAgICBzdGFydE5vZGUuaWQgPSBzdGFydFJlZjtcclxuICAgICAgICBzdGFydE5vZGUuZmxhZ3MgPSBOb2RlLkRUX05PREVfT1BFTjtcclxuICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChzdGFydE5vZGUpO1xyXG4gICAgICAgIHZhciBsYXN0QmVzdE5vZGUgPSBzdGFydE5vZGU7XHJcbiAgICAgICAgbGFzdEJlc3ROb2RlQ29zdCA9IHN0YXJ0Tm9kZS50b3RhbDtcclxuICAgICAgICB2YXIgc3RhdHVzID0gU3RhdHVzLlNVQ0NTRVNTO1xyXG5cclxuICAgICAgICB3aGlsZSAoIXRoaXMubV9vcGVuTGlzdC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgLy8gUmVtb3ZlIG5vZGUgZnJvbSBvcGVuIGxpc3QgYW5kIHB1dCBpdCBpbiBjbG9zZWQgbGlzdC5cclxuICAgICAgICAgIHZhciBiZXN0Tm9kZSA9IHRoaXMubV9vcGVuTGlzdC5wb3AoKTtcclxuICAgICAgICAgIGJlc3ROb2RlLmZsYWdzICY9IH5Ob2RlLkRUX05PREVfT1BFTjtcclxuICAgICAgICAgIGJlc3ROb2RlLmZsYWdzIHw9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7IC8vIFJlYWNoZWQgdGhlIGdvYWwsIHN0b3Agc2VhcmNoaW5nLlxyXG5cclxuICAgICAgICAgIGlmIChiZXN0Tm9kZS5pZCA9PSBlbmRSZWYpIHtcclxuICAgICAgICAgICAgbGFzdEJlc3ROb2RlID0gYmVzdE5vZGU7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfSAvLyBHZXQgY3VycmVudCBsZXQgYW5kIHRpbGUuXHJcbiAgICAgICAgICAvLyBUaGUgQVBJIGlucHV0IGhhcyBiZWVuIGNoZWtlZCBhbHJlYWR5LCBza2lwIGNoZWNraW5nIGludGVybmFsIGRhdGEuXHJcblxyXG5cclxuICAgICAgICAgIHZhciBiZXN0UmVmID0gYmVzdE5vZGUuaWQ7XHJcbiAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUoYmVzdFJlZik7XHJcbiAgICAgICAgICB2YXIgYmVzdFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgIHZhciBiZXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgcGFyZW50IGxldCBhbmQgdGlsZS5cclxuXHJcbiAgICAgICAgICB2YXIgcGFyZW50UmVmID0gMDtcclxuICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gbnVsbDtcclxuICAgICAgICAgIHZhciBwYXJlbnRQb2x5ID0gbnVsbDtcclxuICAgICAgICAgIGlmIChiZXN0Tm9kZS5waWR4ICE9IDApIHBhcmVudFJlZiA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgoYmVzdE5vZGUucGlkeCkuaWQ7XHJcblxyXG4gICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBhcmVudFJlZik7XHJcbiAgICAgICAgICAgIHBhcmVudFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgICAgcGFyZW50UG9seSA9IHRpbGVBbmRQb2x5WzFdO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvciAodmFyIGkgPSBiZXN0UG9seS5maXJzdExpbms7IGkgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IGkgPSBiZXN0VGlsZS5saW5rc1tpXS5uZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBiZXN0VGlsZS5saW5rc1tpXS5yZWY7IC8vIFNraXAgaW52YWxpZCBpZHMgYW5kIGRvIG5vdCBleHBhbmQgYmFjayB0byB3aGVyZSB3ZSBjYW1lIGZyb20uXHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyUmVmID09IDAgfHwgbmVpZ2hib3VyUmVmID09IHBhcmVudFJlZikgY29udGludWU7IC8vIEdldCBuZWlnaGJvdXIgbGV0IGFuZCB0aWxlLlxyXG4gICAgICAgICAgICAvLyBUaGUgQVBJIGlucHV0IGhhcyBiZWVuIGNoZWtlZCBhbHJlYWR5LCBza2lwIGNoZWNraW5nIGludGVybmFsIGRhdGEuXHJcblxyXG4gICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IHRpbGVBbmRQb2x5WzFdO1xyXG4gICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBkZWFsIGV4cGxpY2l0bHkgd2l0aCBjcm9zc2luZyB0aWxlIGJvdW5kYXJpZXNcclxuXHJcbiAgICAgICAgICAgIHZhciBjcm9zc1NpZGUgPSAwO1xyXG4gICAgICAgICAgICBpZiAoYmVzdFRpbGUubGlua3NbaV0uc2lkZSAhPSAweGZmKSBjcm9zc1NpZGUgPSBiZXN0VGlsZS5saW5rc1tpXS5zaWRlID4+IDE7IC8vIGdldCB0aGUgbm9kZVxyXG5cclxuICAgICAgICAgICAgdmFyIG5laWdoYm91ck5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShuZWlnaGJvdXJSZWYsIGNyb3NzU2lkZSk7IC8vIElmIHRoZSBub2RlIGlzIHZpc2l0ZWQgdGhlIGZpcnN0IHRpbWUsIGNhbGN1bGF0ZSBub2RlIHBvc2l0aW9uLlxyXG5cclxuICAgICAgICAgICAgaWYgKG5laWdoYm91ck5vZGUuZmxhZ3MgPT0gMCkge1xyXG4gICAgICAgICAgICAgIG5laWdoYm91ck5vZGUucG9zID0gdGhpcy5nZXRFZGdlTWlkUG9pbnQ2KGJlc3RSZWYsIGJlc3RQb2x5LCBiZXN0VGlsZSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJQb2x5LCBuZWlnaGJvdXJUaWxlKTtcclxuICAgICAgICAgICAgfSAvLyBDYWxjdWxhdGUgY29zdCBhbmQgaGV1cmlzdGljLlxyXG5cclxuXHJcbiAgICAgICAgICAgIGNvc3QgPSAwO1xyXG4gICAgICAgICAgICBoZXVyaXN0aWMgPSAwOyAvLyBTcGVjaWFsIGNhc2UgZm9yIGxhc3Qgbm9kZS5cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gZW5kUmVmKSB7XHJcbiAgICAgICAgICAgICAgLy8gQ29zdFxyXG4gICAgICAgICAgICAgIGN1ckNvc3QgPSBmaWx0ZXIuZ2V0Q29zdChiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCBwYXJlbnRSZWYsIHBhcmVudFRpbGUsIHBhcmVudFBvbHksIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KTtcclxuICAgICAgICAgICAgICB2YXIgZW5kQ29zdCA9IGZpbHRlci5nZXRDb3N0KG5laWdoYm91ck5vZGUucG9zLCBlbmRQb3MsIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5LCAwLCBudWxsLCBudWxsKTtcclxuICAgICAgICAgICAgICBjb3N0ID0gYmVzdE5vZGUuY29zdCArIGN1ckNvc3QgKyBlbmRDb3N0O1xyXG4gICAgICAgICAgICAgIGhldXJpc3RpYyA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gQ29zdFxyXG4gICAgICAgICAgICAgIGN1ckNvc3QgPSBmaWx0ZXIuZ2V0Q29zdChiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCBwYXJlbnRSZWYsIHBhcmVudFRpbGUsIHBhcmVudFBvbHksIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KTtcclxuICAgICAgICAgICAgICBjb3N0ID0gYmVzdE5vZGUuY29zdCArIGN1ckNvc3Q7XHJcbiAgICAgICAgICAgICAgaGV1cmlzdGljID0gRGV0b3VyQ29tbW9uLnZEaXN0MihuZWlnaGJvdXJOb2RlLnBvcywgZW5kUG9zKSAqIE5hdk1lc2hRdWVyeS5IX1NDQUxFO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0b3RhbCA9IGNvc3QgKyBoZXVyaXN0aWM7IC8vIFRoZSBub2RlIGlzIGFscmVhZHkgaW4gb3BlbiBsaXN0IGFuZCB0aGUgbmV3IHJlc3VsdCBpcyB3b3JzZSwgc2tpcC5cclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwICYmIHRvdGFsID49IG5laWdoYm91ck5vZGUudG90YWwpIGNvbnRpbnVlOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IHZpc2l0ZWQgYW5kIHByb2Nlc3MsIGFuZCB0aGUgbmV3IHJlc3VsdCBpcyB3b3JzZSwgc2tpcC5cclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDAgJiYgdG90YWwgPj0gbmVpZ2hib3VyTm9kZS50b3RhbCkgY29udGludWU7IC8vIEFkZCBvciB1cGRhdGUgdGhlIG5vZGUuXHJcblxyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnBpZHggPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUlkeChiZXN0Tm9kZSk7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUuaWQgPSBuZWlnaGJvdXJSZWY7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgPSBuZWlnaGJvdXJOb2RlLmZsYWdzICYgfk5vZGUuRFRfTk9ERV9DTE9TRUQ7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUuY29zdCA9IGNvc3Q7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUudG90YWwgPSB0b3RhbDtcclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gQWxyZWFkeSBpbiBvcGVuLCB1cGRhdGUgbm9kZSBsb2NhdGlvbi5cclxuICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QubW9kaWZ5KG5laWdoYm91ck5vZGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIFB1dCB0aGUgbm9kZSBpbiBvcGVuIGxpc3QuXHJcbiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfT1BFTjtcclxuICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgICAgfSAvLyBVcGRhdGUgbmVhcmVzdCBub2RlIHRvIHRhcmdldCBzbyBmYXIuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGhldXJpc3RpYyA8IGxhc3RCZXN0Tm9kZUNvc3QpIHtcclxuICAgICAgICAgICAgICBsYXN0QmVzdE5vZGVDb3N0ID0gaGV1cmlzdGljO1xyXG4gICAgICAgICAgICAgIGxhc3RCZXN0Tm9kZSA9IG5laWdoYm91ck5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBwYXRoID0gZ2V0UGF0aFRvTm9kZShsYXN0QmVzdE5vZGUpO1xyXG4gICAgICAgIGlmIChsYXN0QmVzdE5vZGUuaWQgIT0gZW5kUmVmKSBzdGF0dXMgPSBTdGF0dXMuUEFSVElBTF9SRVNVTFQ7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChzdGF0dXMsIHBhdGgpO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBJbnRpYWxpemVzIGEgc2xpY2VkIHBhdGggcXVlcnkuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBDb21tb24gdXNlIGNhc2U6IC0jIENhbGwgaW5pdFNsaWNlZEZpbmRQYXRoKCkgdG8gaW5pdGlhbGl6ZSB0aGUgc2xpY2VkIHBhdGggcXVlcnkuIC0jIENhbGwgdXBkYXRlU2xpY2VkRmluZFBhdGgoKVxyXG4gICAgICAgKiB1bnRpbCBpdCByZXR1cm5zIGNvbXBQb2x5ZS4gLSMgQ2FsbCBmaW5hbGl6ZVNsaWNlZEZpbmRQYXRoKCkgdG8gZ2V0IHRoZSBwYXRoLlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIHN0YXJ0UmVmXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgc3RhcnQgcG9seWdvbi5cclxuICAgICAgICogQHBhcmFtIGVuZFJlZlxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIGVuZCBwb2x5Z29uLlxyXG4gICAgICAgKiBAcGFyYW0gc3RhcnRQb3NcclxuICAgICAgICogICAgICAgICAgICBBIHBvc2l0aW9uIHdpdGhpbiB0aGUgc3RhcnQgcG9seWdvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgICogQHBhcmFtIGVuZFBvc1xyXG4gICAgICAgKiAgICAgICAgICAgIEEgcG9zaXRpb24gd2l0aGluIHRoZSBlbmQgcG9seWdvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgICogQHBhcmFtIGZpbHRlclxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuXHJcbiAgICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgICAqICAgICAgICAgICAgcXVlcnkgb3B0aW9ucyAoc2VlOiAjRmluZFBhdGhPcHRpb25zKVxyXG4gICAgICAgKiBAcmV0dXJuXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImluaXRTbGljZWRGaW5kUGF0aFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFNsaWNlZEZpbmRQYXRoKHN0YXJ0UmVmLCBlbmRSZWYsIHN0YXJ0UG9zLCBlbmRQb3MsIGZpbHRlciwgb3B0aW9ucykge1xyXG4gICAgICAgIC8vIEluaXQgcGF0aCBzdGF0ZS5cclxuICAgICAgICB0aGlzLm1fcXVlcnkgPSBuZXcgUXVlcnlEYXRhKCk7XHJcbiAgICAgICAgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5GQUlMVVJFO1xyXG4gICAgICAgIHRoaXMubV9xdWVyeS5zdGFydFJlZiA9IHN0YXJ0UmVmO1xyXG4gICAgICAgIHRoaXMubV9xdWVyeS5lbmRSZWYgPSBlbmRSZWY7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV9xdWVyeS5zdGFydFBvcywgc3RhcnRQb3MpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcXVlcnkuZW5kUG9zLCBlbmRQb3MpO1xyXG4gICAgICAgIHRoaXMubV9xdWVyeS5maWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICAgICAgdGhpcy5tX3F1ZXJ5Lm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMubV9xdWVyeS5yYXljYXN0TGltaXRTcXIgPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgICAgIGlmIChzdGFydFJlZiA9PSAwIHx8IGVuZFJlZiA9PSAwKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiU3RhcnQgb3IgZW5kIHJlZiA9IDBcIik7IC8vIFZhbGlkYXRlIGlucHV0XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikgfHwgIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYoZW5kUmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgc3RhcnQgb3IgZW5kIHJlZlwiKTsgLy8gdHJhZGUgcXVhbGl0eSB3aXRoIHBlcmZvcm1hbmNlP1xyXG5cclxuICAgICAgICBpZiAoKG9wdGlvbnMgJiBOYXZNZXNoUXVlcnkuRFRfRklORFBBVEhfQU5ZX0FOR0xFKSAhPSAwKSB7XHJcbiAgICAgICAgICAvLyBsaW1pdGluZyB0byBzZXZlcmFsIHRpbWVzIHRoZSBjaGFyYWN0ZXIgcmFkaXVzIHlpZWxkcyBuaWNlIHJlc3VsdHMuIEl0IGlzIG5vdCBzZW5zaXRpdmVcclxuICAgICAgICAgIC8vIHNvIGl0IGlzIGVub3VnaCB0byBjb21wdXRlIGl0IGZyb20gdGhlIGZpcnN0IHRpbGUuXHJcbiAgICAgICAgICB2YXIgX3RpbGUyID0gdGhpcy5tX25hdi5nZXRUaWxlQnlSZWYoc3RhcnRSZWYpO1xyXG5cclxuICAgICAgICAgIGFnZW50UmFkaXVzID0gX3RpbGUyLmRhdGEuaGVhZGVyLndhbGthYmxlUmFkaXVzO1xyXG4gICAgICAgICAgdGhpcy5tX3F1ZXJ5LnJheWNhc3RMaW1pdFNxciA9IERldG91ckNvbW1vbi5zcXIoYWdlbnRSYWRpdXMgKiBOYXZNZXNoLkRUX1JBWV9DQVNUX0xJTUlUX1BST1BPUlRJT05TKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdGFydFJlZiA9PSBlbmRSZWYpIHtcclxuICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuU1VDQ1NFU1M7XHJcbiAgICAgICAgICByZXR1cm4gU3RhdHVzLlNVQ0NTRVNTO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tX25vZGVQb29sLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5tX29wZW5MaXN0LmNsZWFyKCk7XHJcbiAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlKHN0YXJ0UmVmKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc3RhcnROb2RlLnBvcywgc3RhcnRQb3MpO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5waWR4ID0gMDtcclxuICAgICAgICBzdGFydE5vZGUuY29zdCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLnRvdGFsID0gRGV0b3VyQ29tbW9uLnZEaXN0MihzdGFydFBvcywgZW5kUG9zKSAqIE5hdk1lc2hRdWVyeS5IX1NDQUxFO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9PUEVOO1xyXG4gICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKHN0YXJ0Tm9kZSk7XHJcbiAgICAgICAgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5JTl9QUk9HUkVTUztcclxuICAgICAgICB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlID0gc3RhcnROb2RlO1xyXG4gICAgICAgIHRoaXMubV9xdWVyeS5sYXN0QmVzdE5vZGVDb3N0ID0gc3RhcnROb2RlLnRvdGFsO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcXVlcnkuc3RhdHVzO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBVcGRhdGVzIGFuIGluLXByb2dyZXNzIHNsaWNlZCBwYXRoIHF1ZXJ5LlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIG1heEl0ZXJcclxuICAgICAgICogICAgICAgICAgICBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlcmF0aW9ucyB0byBwZXJmb3JtLlxyXG4gICAgICAgKiBAcmV0dXJuIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBxdWVyeS5cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidXBkYXRlU2xpY2VkRmluZFBhdGhcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVNsaWNlZEZpbmRQYXRoKG1heEl0ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5tX3F1ZXJ5LnN0YXR1cyAhPSBTdGF0dXMuSU5fUFJPR1JFU1MpIHJldHVybiBuZXcgVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCh0aGlzLm1fcXVlcnkuc3RhdHVzLCAwKTsgLy8gTWFrZSBzdXJlIHRoZSByZXF1ZXN0IGlzIHN0aWxsIHZhbGlkLlxyXG5cclxuICAgICAgICBpZiAoIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYodGhpcy5tX3F1ZXJ5LnN0YXJ0UmVmKSB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZih0aGlzLm1fcXVlcnkuZW5kUmVmKSkge1xyXG4gICAgICAgICAgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5GQUlMVVJFO1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGVTbGljZWRQYXRoUmVzdWx0KHRoaXMubV9xdWVyeS5zdGF0dXMsIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGl0ZXIgPSAwO1xyXG5cclxuICAgICAgICB3aGlsZSAoaXRlciA8IG1heEl0ZXIgJiYgIXRoaXMubV9vcGVuTGlzdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgIGl0ZXIrKzsgLy8gUmVtb3ZlIG5vZGUgZnJvbSBvcGVuIGxpc3QgYW5kIHB1dCBpdCBpbiBjbG9zZWQgbGlzdC5cclxuXHJcbiAgICAgICAgICB2YXIgYmVzdE5vZGUgPSB0aGlzLm1fb3Blbkxpc3QucG9wKCk7XHJcbiAgICAgICAgICBiZXN0Tm9kZS5mbGFncyAmPSB+Tm9kZS5EVF9OT0RFX09QRU47XHJcbiAgICAgICAgICBiZXN0Tm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEOyAvLyBSZWFjaGVkIHRoZSBnb2FsLCBzdG9wIHNlYXJjaGluZy5cclxuXHJcbiAgICAgICAgICBpZiAoYmVzdE5vZGUuaWQgPT0gdGhpcy5tX3F1ZXJ5LmVuZFJlZikge1xyXG4gICAgICAgICAgICB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlID0gYmVzdE5vZGU7XHJcbiAgICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuU1VDQ1NFU1M7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVXBkYXRlU2xpY2VkUGF0aFJlc3VsdCh0aGlzLm1fcXVlcnkuc3RhdHVzLCBpdGVyKTtcclxuICAgICAgICAgIH0gLy8gR2V0IGN1cnJlbnQgbGV0IGFuZCB0aWxlLlxyXG4gICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbFxyXG4gICAgICAgICAgLy8gZGF0YS5cclxuXHJcblxyXG4gICAgICAgICAgdmFyIGJlc3RSZWYgPSBiZXN0Tm9kZS5pZDtcclxuICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHZvaWQgMDtcclxuXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihiZXN0UmVmKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5LnN0YXR1cyA9IFN0YXR1cy5GQUlMVVJFOyAvLyBUaGUgcG9seWdvbiBoYXMgZGlzYXBwZWFyZWQgZHVyaW5nIHRoZSBzbGljZWQgcXVlcnksIGZhaWwuXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQodGhpcy5tX3F1ZXJ5LnN0YXR1cywgaXRlcik7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGJlc3RUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICB2YXIgYmVzdFBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gR2V0IHBhcmVudCBhbmQgZ3JhbmQgcGFyZW50IGxldCBhbmQgdGlsZS5cclxuXHJcbiAgICAgICAgICB2YXIgcGFyZW50UmVmID0gMCxcclxuICAgICAgICAgICAgICBncmFuZHBhUmVmID0gMDtcclxuICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gbnVsbDtcclxuICAgICAgICAgIHZhciBwYXJlbnRQb2x5ID0gbnVsbDtcclxuICAgICAgICAgIHZhciBwYXJlbnROb2RlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBpZiAoYmVzdE5vZGUucGlkeCAhPSAwKSB7XHJcbiAgICAgICAgICAgIHBhcmVudE5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KGJlc3ROb2RlLnBpZHgpO1xyXG4gICAgICAgICAgICBwYXJlbnRSZWYgPSBwYXJlbnROb2RlLmlkO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50Tm9kZS5waWR4ICE9IDApIGdyYW5kcGFSZWYgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KHBhcmVudE5vZGUucGlkeCkuaWQ7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnZhbGlkUGFyZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHBhcmVudFJlZik7XHJcbiAgICAgICAgICAgICAgcGFyZW50VGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgICAgIHBhcmVudFBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgIGludmFsaWRQYXJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW52YWxpZFBhcmVudCB8fCBncmFuZHBhUmVmICE9IDAgJiYgIXRoaXMubV9uYXYuaXNWYWxpZFBvbHlSZWYoZ3JhbmRwYVJlZikpIHtcclxuICAgICAgICAgICAgICAvLyBUaGUgcG9seWdvbiBoYXMgZGlzYXBwZWFyZWQgZHVyaW5nIHRoZSBzbGljZWQgcXVlcnksXHJcbiAgICAgICAgICAgICAgLy8gZmFpbC5cclxuICAgICAgICAgICAgICB0aGlzLm1fcXVlcnkuc3RhdHVzID0gU3RhdHVzLkZBSUxVUkU7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVcGRhdGVTbGljZWRQYXRoUmVzdWx0KHRoaXMubV9xdWVyeS5zdGF0dXMsIGl0ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IC8vIGRlY2lkZSB3aGV0aGVyIHRvIHRlc3QgcmF5Y2FzdCB0byBwcmV2aW91cyBub2Rlc1xyXG5cclxuXHJcbiAgICAgICAgICB2YXIgdHJ5TE9TID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgaWYgKCh0aGlzLm1fcXVlcnkub3B0aW9ucyAmIE5hdk1lc2hRdWVyeS5EVF9GSU5EUEFUSF9BTllfQU5HTEUpICE9IDApIHtcclxuICAgICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwICYmIERldG91ckNvbW1vbi52RGlzdFNxcihwYXJlbnROb2RlLnBvcywgYmVzdE5vZGUucG9zKSA8IHRoaXMubV9xdWVyeS5yYXljYXN0TGltaXRTcXIpIHRyeUxPUyA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IGJlc3RQb2x5LmZpcnN0TGluazsgaSAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgaSA9IGJlc3RUaWxlLmxpbmtzW2ldLm5leHQpIHtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm91clJlZiA9IGJlc3RUaWxlLmxpbmtzW2ldLnJlZjsgLy8gYmVzdFRpbGUubGlua3MuZm9yRWFjaCh6PT5jb25zb2xlLmxvZyh6LnJlZikpO1xyXG4gICAgICAgICAgICAvLyBTa2lwIGludmFsaWQgaWRzIGFuZCBkbyBub3QgZXhwYW5kIGJhY2sgdG8gd2hlcmUgd2UgY2FtZVxyXG4gICAgICAgICAgICAvLyBmcm9tLlxyXG5cclxuICAgICAgICAgICAgaWYgKG5laWdoYm91clJlZiA9PSAwIHx8IG5laWdoYm91clJlZiA9PSBwYXJlbnRSZWYpIGNvbnRpbnVlOyAvLyBHZXQgbmVpZ2hib3VyIGxldCBhbmQgdGlsZS5cclxuICAgICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbFxyXG4gICAgICAgICAgICAvLyBkYXRhLlxyXG5cclxuICAgICAgICAgICAgdmFyIHRpbGVBbmRQb2x5VW5zID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlID0gdGlsZUFuZFBvbHlVbnNbMF07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJQb2x5ID0gdGlsZUFuZFBvbHlVbnNbMV07XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tX3F1ZXJ5LmZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBnZXQgdGhlIG5laWdoYm9yIG5vZGVcclxuXHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmLCAwKTsgLy8gZG8gbm90IGV4cGFuZCB0byBub2RlcyB0aGF0IHdlcmUgYWxyZWFkeSB2aXNpdGVkIGZyb20gdGhlXHJcbiAgICAgICAgICAgIC8vIHNhbWUgcGFyZW50XHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5waWR4ICE9IDAgJiYgbmVpZ2hib3VyTm9kZS5waWR4ID09IGJlc3ROb2RlLnBpZHgpIGNvbnRpbnVlOyAvLyBJZiB0aGUgbm9kZSBpcyB2aXNpdGVkIHRoZSBmaXJzdCB0aW1lLCBjYWxjdWxhdGUgbm9kZVxyXG4gICAgICAgICAgICAvLyBwb3NpdGlvbi5cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWlnaGJvdXJOb2RlLmZsYWdzID09IDApIHtcclxuICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnBvcyA9IHRoaXMuZ2V0RWRnZU1pZFBvaW50NihiZXN0UmVmLCBiZXN0UG9seSwgYmVzdFRpbGUsIG5laWdoYm91clJlZiwgbmVpZ2hib3VyUG9seSwgbmVpZ2hib3VyVGlsZSk7XHJcbiAgICAgICAgICAgIH0gLy8gQ2FsY3VsYXRlIGNvc3QgYW5kIGhldXJpc3RpYy5cclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgX2Nvc3QgPSAwO1xyXG4gICAgICAgICAgICB2YXIgX2hldXJpc3RpYyA9IDA7IC8vIHJheWNhc3QgcGFyZW50XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmRTaG9ydEN1dCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyeUxPUykge1xyXG4gICAgICAgICAgICAgIHZhciByYXlIaXQgPSByYXljYXN0KHBhcmVudFJlZiwgcGFyZW50Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCB0aGlzLm1fcXVlcnkuZmlsdGVyLCBOYXZNZXNoUXVlcnkuRFRfUkFZQ0FTVF9VU0VfQ09TVFMsIGdyYW5kcGFSZWYpO1xyXG4gICAgICAgICAgICAgIGZvdW5kU2hvcnRDdXQgPSByYXlIaXQudCA+PSAxLjA7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChmb3VuZFNob3J0Q3V0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzaG9ydGN1dCBmb3VuZCB1c2luZyByYXljYXN0LiBVc2luZyBzaG9ydGVyIGNvc3RcclxuICAgICAgICAgICAgICAgIC8vIGluc3RlYWRcclxuICAgICAgICAgICAgICAgIF9jb3N0ID0gcGFyZW50Tm9kZS5jb3N0ICsgcmF5SGl0LnBhdGhDb3N0O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyB1cGRhdGUgbW92ZSBjb3N0XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKCFmb3VuZFNob3J0Q3V0KSB7XHJcbiAgICAgICAgICAgICAgLy8gTm8gc2hvcnRjdXQgZm91bmQuXHJcbiAgICAgICAgICAgICAgdmFyIF9jdXJDb3N0ID0gdGhpcy5tX3F1ZXJ5LmZpbHRlci5nZXRDb3N0KGJlc3ROb2RlLnBvcywgbmVpZ2hib3VyTm9kZS5wb3MsIHBhcmVudFJlZiwgcGFyZW50VGlsZSwgcGFyZW50UG9seSwgYmVzdFJlZiwgYmVzdFRpbGUsIGJlc3RQb2x5LCBuZWlnaGJvdXJSZWYsIG5laWdoYm91clRpbGUsIG5laWdoYm91clBvbHkpO1xyXG5cclxuICAgICAgICAgICAgICBfY29zdCA9IGJlc3ROb2RlLmNvc3QgKyBfY3VyQ29zdDtcclxuICAgICAgICAgICAgfSAvLyBTcGVjaWFsIGNhc2UgZm9yIGxhc3Qgbm9kZS5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyUmVmID09IHRoaXMubV9xdWVyeS5lbmRSZWYpIHtcclxuICAgICAgICAgICAgICB2YXIgZW5kQ29zdCA9IHRoaXMubV9xdWVyeS5maWx0ZXIuZ2V0Q29zdChuZWlnaGJvdXJOb2RlLnBvcywgdGhpcy5tX3F1ZXJ5LmVuZFBvcywgYmVzdFJlZiwgYmVzdFRpbGUsIGJlc3RQb2x5LCBuZWlnaGJvdXJSZWYsIG5laWdoYm91clRpbGUsIG5laWdoYm91clBvbHksIDAsIG51bGwsIG51bGwpO1xyXG4gICAgICAgICAgICAgIF9jb3N0ID0gX2Nvc3QgKyBlbmRDb3N0O1xyXG4gICAgICAgICAgICAgIF9oZXVyaXN0aWMgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIF9oZXVyaXN0aWMgPSBEZXRvdXJDb21tb24udkRpc3QyKG5laWdoYm91ck5vZGUucG9zLCB0aGlzLm1fcXVlcnkuZW5kUG9zKSAqIE5hdk1lc2hRdWVyeS5IX1NDQUxFO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgX3RvdGFsID0gX2Nvc3QgKyBfaGV1cmlzdGljOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsXHJcbiAgICAgICAgICAgIC8vIHNraXAuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX09QRU4pICE9IDAgJiYgX3RvdGFsID49IG5laWdoYm91ck5vZGUudG90YWwpIGNvbnRpbnVlOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IHZpc2l0ZWQgYW5kIHByb2Nlc3MsIGFuZCB0aGUgbmV3IHJlc3VsdFxyXG4gICAgICAgICAgICAvLyBpcyB3b3JzZSwgc2tpcC5cclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDAgJiYgX3RvdGFsID49IG5laWdoYm91ck5vZGUudG90YWwpIGNvbnRpbnVlOyAvLyBBZGQgb3IgdXBkYXRlIHRoZSBub2RlLlxyXG5cclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gZm91bmRTaG9ydEN1dCA/IGJlc3ROb2RlLnBpZHggOiB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUlkeChiZXN0Tm9kZSk7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUuaWQgPSBuZWlnaGJvdXJSZWY7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgPSB0aGlzLmFuZChuZWlnaGJvdXJOb2RlLmZsYWdzLCB+dGhpcy5vcihOb2RlLkRUX05PREVfQ0xPU0VELCBOb2RlLkRUX05PREVfUEFSRU5UX0RFVEFDSEVEKSk7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUuY29zdCA9IF9jb3N0O1xyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gX3RvdGFsO1xyXG4gICAgICAgICAgICBpZiAoZm91bmRTaG9ydEN1dCkgbmVpZ2hib3VyTm9kZS5mbGFncyA9IHRoaXMub3IobmVpZ2hib3VyTm9kZS5mbGFncywgTm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCkge1xyXG4gICAgICAgICAgICAgIC8vIEFscmVhZHkgaW4gb3BlbiwgdXBkYXRlIG5vZGUgbG9jYXRpb24uXHJcbiAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0Lm1vZGlmeShuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBQdXQgdGhlIG5vZGUgaW4gb3BlbiBsaXN0LlxyXG4gICAgICAgICAgICAgIG5laWdoYm91ck5vZGUuZmxhZ3MgfD0gTm9kZS5EVF9OT0RFX09QRU47XHJcbiAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2gobmVpZ2hib3VyTm9kZSk7XHJcbiAgICAgICAgICAgIH0gLy8gVXBkYXRlIG5lYXJlc3Qgbm9kZSB0byB0YXJnZXQgc28gZmFyLlxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChfaGV1cmlzdGljIDwgdGhpcy5tX3F1ZXJ5Lmxhc3RCZXN0Tm9kZUNvc3QpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlQ29zdCA9IF9oZXVyaXN0aWM7XHJcbiAgICAgICAgICAgICAgdGhpcy5tX3F1ZXJ5Lmxhc3RCZXN0Tm9kZSA9IG5laWdoYm91ck5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIEV4aGF1c3RlZCBhbGwgbm9kZXMsIGJ1dCBjb3VsZCBub3QgZmluZCBwYXRoLlxyXG5cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubV9vcGVuTGlzdC5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuUEFSVElBTF9SRVNVTFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFVwZGF0ZVNsaWNlZFBhdGhSZXN1bHQodGhpcy5tX3F1ZXJ5LnN0YXR1cywgaXRlcik7XHJcbiAgICAgIH0gLy8vIEZpbmFsaXplcyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhIHNsaWNlZCBwYXRoIHF1ZXJ5LlxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRwYXRoXHRcdEFuIG9yZGVyZWQgbGlzdCBvZiBwb2x5Z29uIHJlZmVyZW5jZXMgcmVwcmVzZW50aW5nIHRoZSBwYXRoLiAoU3RhcnQgdG8gZW5kLikgXHJcbiAgICAgIC8vLyAgXHRcdFx0XHRcdFx0XHRbKHBvbHlSZWYpICogQHAgcGF0aENvdW50XVxyXG4gICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZpbmFsaXplU2xpY2VkRmluZFBhdGhcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmFsaXplU2xpY2VkRmluZFBhdGgoKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubV9xdWVyeS5zdGF0dXMgPT0gU3RhdHVzLkZBSUxVUkUpIHtcclxuICAgICAgICAgIC8vIFJlc2V0IHF1ZXJ5LlxyXG4gICAgICAgICAgdGhpcy5tX3F1ZXJ5ID0gbmV3IFF1ZXJ5RGF0YSgpO1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChTdGF0dXMuRkFJTFVSRSwgcGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tX3F1ZXJ5LnN0YXJ0UmVmID09IHRoaXMubV9xdWVyeS5lbmRSZWYpIHtcclxuICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIHNlYXJjaCBzdGFydHMgYW5kIGVuZHMgYXQgc2FtZSBwb2x5LlxyXG4gICAgICAgICAgcGF0aC5wdXNoKHRoaXMubV9xdWVyeS5zdGFydFJlZik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIFJldmVyc2UgdGhlIHBhdGguXHJcbiAgICAgICAgICBpZiAodGhpcy5tX3F1ZXJ5Lmxhc3RCZXN0Tm9kZS5pZCAhPSB0aGlzLm1fcXVlcnkuZW5kUmVmKSB0aGlzLm1fcXVlcnkuc3RhdHVzID0gU3RhdHVzLlBBUlRJQUxfUkVTVUxUO1xyXG4gICAgICAgICAgdmFyIHByZXYgPSBudWxsO1xyXG4gICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlO1xyXG4gICAgICAgICAgdmFyIHByZXZSYXkgPSAwO1xyXG5cclxuICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdmFyIG5leHQgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KG5vZGUucGlkeCk7XHJcbiAgICAgICAgICAgIG5vZGUucGlkeCA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlSWR4KHByZXYpO1xyXG4gICAgICAgICAgICBwcmV2ID0gbm9kZTtcclxuICAgICAgICAgICAgdmFyIG5leHRSYXkgPSBub2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRDsgLy8ga2VlcCB0cmFjayBvZiB3aGV0aGVyIHBhcmVudCBpcyBub3QgYWRqYWNlbnQgKGkuZS4gZHVlIHRvIHJheWNhc3Qgc2hvcnRjdXQpXHJcblxyXG4gICAgICAgICAgICBub2RlLmZsYWdzID0gdGhpcy5vcih0aGlzLmFuZChub2RlLmZsYWdzLCB+Tm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCksIHByZXZSYXkpOyAvLyBhbmQgc3RvcmUgaXQgaW4gdGhlIHJldmVyc2VkIHBhdGgncyBub2RlXHJcblxyXG4gICAgICAgICAgICBwcmV2UmF5ID0gbmV4dFJheTtcclxuICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICB9IHdoaWxlIChub2RlICE9IG51bGwpOyAvLyBTdG9yZSBwYXRoXHJcblxyXG5cclxuICAgICAgICAgIG5vZGUgPSBwcmV2O1xyXG5cclxuICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdmFyIF9uZXh0ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVBdElkeChub2RlLnBpZHgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKChub2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCkgIT0gMCkge1xyXG4gICAgICAgICAgICAgIHZhciBpcmVzdWx0ID0gcmF5Y2FzdChub2RlLmlkLCBub2RlLnBvcywgX25leHQucG9zLCB0aGlzLm1fcXVlcnkuZmlsdGVyLCAwLCAwKTtcclxuICAgICAgICAgICAgICBwYXRoLmFkZEFsbChpcmVzdWx0LnBhdGgpOyAvLyByYXljYXN0IGVuZHMgb24gbGV0IGJvdW5kYXJ5IGFuZCB0aGUgcGF0aCBtaWdodCBpbmNsdWRlIHRoZSBuZXh0IGxldCBib3VuZGFyeS5cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHBhdGhbcGF0aC5sZW5ndGggLSAxXSA9PSBfbmV4dC5pZCkgcGF0aC5yZW1vdmUocGF0aC5sZW5ndGggLSAxKTsgLy8gcmVtb3ZlIHRvIGFkdXBsaWNhdGVzXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUuaWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBub2RlID0gX25leHQ7XHJcbiAgICAgICAgICB9IHdoaWxlIChub2RlICE9IG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHN0YXR1cyA9IHRoaXMubV9xdWVyeS5zdGF0dXM7IC8vIFJlc2V0IHF1ZXJ5LlxyXG5cclxuICAgICAgICB0aGlzLm1fcXVlcnkgPSBuZXcgUXVlcnlEYXRhKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChzdGF0dXMsIHBhdGgpO1xyXG4gICAgICB9IC8vLyBGaW5hbGl6ZXMgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgb2YgYW4gaW5jb21wUG9seWUgc2xpY2VkIHBhdGggcXVlcnksIHJldHVybmluZyB0aGUgcGF0aCB0byB0aGUgZnVydGhlc3RcclxuICAgICAgLy8vIHBvbHlnb24gb24gdGhlIGV4aXN0aW5nIHBhdGggdGhhdCB3YXMgdmlzaXRlZCBkdXJpbmcgdGhlIHNlYXJjaC5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGV4aXN0aW5nXHRcdEFuIGFycmF5IG9mIHBvbHlnb24gcmVmZXJlbmNlcyBmb3IgdGhlIGV4aXN0aW5nIHBhdGguXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRleGlzdGluZ1NpemVcdFRoZSBudW1iZXIgb2YgcG9seWdvbiBpbiB0aGUgQHAgZXhpc3RpbmcgYXJyYXkuXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdHBhdGhcdFx0XHRBbiBvcmRlcmVkIGxpc3Qgb2YgcG9seWdvbiByZWZlcmVuY2VzIHJlcHJlc2VudGluZyB0aGUgcGF0aC4gKFN0YXJ0IHRvIGVuZC4pIFxyXG4gICAgICAvLy8gIFx0XHRcdFx0XHRcdFx0XHRbKHBvbHlSZWYpICogQHAgcGF0aENvdW50XVxyXG4gICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZpbmFsaXplU2xpY2VkRmluZFBhdGhQYXJ0aWFsXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5hbGl6ZVNsaWNlZEZpbmRQYXRoUGFydGlhbChleGlzdGluZykge1xyXG4gICAgICAgIHZhciBwYXRoID0gW107XHJcblxyXG4gICAgICAgIGlmIChleGlzdGluZy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBGaW5kUGF0aFJlc3VsdChTdGF0dXMuRkFJTFVSRSwgcGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tX3F1ZXJ5LnN0YXR1cyA9PSBTdGF0dXMuRkFJTFVSRSkge1xyXG4gICAgICAgICAgLy8gUmVzZXQgcXVlcnkuXHJcbiAgICAgICAgICB0aGlzLm1fcXVlcnkgPSBuZXcgUXVlcnlEYXRhKCk7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KFN0YXR1cy5GQUlMVVJFLCBwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1fcXVlcnkuc3RhcnRSZWYgPT0gdGhpcy5tX3F1ZXJ5LmVuZFJlZikge1xyXG4gICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiB0aGUgc2VhcmNoIHN0YXJ0cyBhbmQgZW5kcyBhdCBzYW1lIHBvbHkuXHJcbiAgICAgICAgICBwYXRoLnB1c2godGhpcy5tX3F1ZXJ5LnN0YXJ0UmVmKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gRmluZCBmdXJ0aGVzdCBleGlzdGluZyBub2RlIHRoYXQgd2FzIHZpc2l0ZWQuXHJcbiAgICAgICAgICB2YXIgcHJldiA9IG51bGw7XHJcbiAgICAgICAgICB2YXIgbm9kZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IGV4aXN0aW5nLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZmluZE5vZGUoZXhpc3RpbmdbaV0pO1xyXG4gICAgICAgICAgICBpZiAobm9kZSAhPSBudWxsKSBicmVhaztcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAobm9kZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubV9xdWVyeS5zdGF0dXMgPSBTdGF0dXMuUEFSVElBTF9SRVNVTFQ7XHJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLm1fcXVlcnkubGFzdEJlc3ROb2RlO1xyXG4gICAgICAgICAgfSAvLyBSZXZlcnNlIHRoZSBwYXRoLlxyXG5cclxuXHJcbiAgICAgICAgICB2YXIgcHJldlJheSA9IDA7XHJcblxyXG4gICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTtcclxuICAgICAgICAgICAgbm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgocHJldik7XHJcbiAgICAgICAgICAgIHByZXYgPSBub2RlO1xyXG4gICAgICAgICAgICB2YXIgbmV4dFJheSA9IHRoaXMuYW5kKG5vZGUuZmxhZ3MsIE5vZGUuRFRfTk9ERV9QQVJFTlRfREVUQUNIRUQpOyAvLyBrZWVwIHRyYWNrIG9mIHdoZXRoZXIgcGFyZW50IGlzIG5vdCBhZGphY2VudCAoaS5lLiBkdWUgdG8gcmF5Y2FzdCBzaG9ydGN1dClcclxuXHJcbiAgICAgICAgICAgIG5vZGUuZmxhZ3MgPSB0aGlzLm9yKHRoaXMuYW5kKG5vZGUuZmxhZ3MgJiB+Tm9kZS5EVF9OT0RFX1BBUkVOVF9ERVRBQ0hFRCksIHByZXZSYXkpOyAvLyBhbmQgc3RvcmUgaXQgaW4gdGhlIHJldmVyc2VkIHBhdGgncyBub2RlXHJcblxyXG4gICAgICAgICAgICBwcmV2UmF5ID0gbmV4dFJheTtcclxuICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICB9IHdoaWxlIChub2RlICE9IG51bGwpOyAvLyBTdG9yZSBwYXRoXHJcblxyXG5cclxuICAgICAgICAgIG5vZGUgPSBwcmV2O1xyXG5cclxuICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdmFyIF9uZXh0MiA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTtcclxuXHJcbiAgICAgICAgICAgIGlmICgobm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9QQVJFTlRfREVUQUNIRUQpICE9IDApIHtcclxuICAgICAgICAgICAgICB2YXIgaXJlc3VsdCA9IHJheWNhc3Qobm9kZS5pZCwgbm9kZS5wb3MsIF9uZXh0Mi5wb3MsIHRoaXMubV9xdWVyeS5maWx0ZXIsIDAsIDApO1xyXG4gICAgICAgICAgICAgIHBhdGguYWRkQWxsKGlyZXN1bHQucGF0aCk7IC8vIHJheWNhc3QgZW5kcyBvbiBsZXQgYm91bmRhcnkgYW5kIHRoZSBwYXRoIG1pZ2h0IGluY2x1ZGUgdGhlIG5leHQgbGV0IGJvdW5kYXJ5LlxyXG5cclxuICAgICAgICAgICAgICBpZiAocGF0aFtwYXRoLmxlbmd0aCAtIDFdID09IF9uZXh0Mi5pZCkgcGF0aC5yZW1vdmUocGF0aC5sZW5ndGggLSAxKTsgLy8gcmVtb3ZlIHRvIGFkdXBsaWNhdGVzXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcGF0aC5wdXNoKG5vZGUuaWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBub2RlID0gX25leHQyO1xyXG4gICAgICAgICAgfSB3aGlsZSAobm9kZSAhPSBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdGF0dXMgPSB0aGlzLm1fcXVlcnkuc3RhdHVzOyAvLyBSZXNldCBxdWVyeS5cclxuXHJcbiAgICAgICAgdGhpcy5tX3F1ZXJ5ID0gbmV3IFF1ZXJ5RGF0YSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmluZFBhdGhSZXN1bHQoc3RhdHVzLCBwYXRoKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYXBwZW5kVmVydGV4XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBlbmRWZXJ0ZXgocG9zLCBmbGFncywgcmVmLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCkge1xyXG4gICAgICAgIGlmIChzdHJhaWdodFBhdGgubGVuZ3RoID4gMCAmJiBEZXRvdXJDb21tb24udkVxdWFsKHN0cmFpZ2h0UGF0aFtzdHJhaWdodFBhdGgubGVuZ3RoIC0gMV0ucG9zLCBwb3MpKSB7XHJcbiAgICAgICAgICAvLyBUaGUgdmVydGljZXMgYXJlIGVxdWFsLCB1cGRhdGUgZmxhZ3MgYW5kIHBvbHkuXHJcbiAgICAgICAgICBzdHJhaWdodFBhdGhbc3RyYWlnaHRQYXRoLmxlbmd0aCAtIDFdLmZsYWdzID0gZmxhZ3M7XHJcbiAgICAgICAgICBzdHJhaWdodFBhdGhbc3RyYWlnaHRQYXRoLmxlbmd0aCAtIDFdLnJlZiA9IHJlZjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHN0cmFpZ2h0UGF0aC5sZW5ndGggPCBtYXhTdHJhaWdodFBhdGgpIHtcclxuICAgICAgICAgICAgLy8gQXBwZW5kIG5ldyB2ZXJ0ZXguXHJcbiAgICAgICAgICAgIHN0cmFpZ2h0UGF0aC5wdXNoKG5ldyBTdHJhaWdodFBhdGhJdGVtKHBvcywgZmxhZ3MsIHJlZikpO1xyXG4gICAgICAgICAgfSAvLyBJZiByZWFjaGVkIGVuZCBvZiBwYXRoIG9yIHRoZXJlIGlzIG5vIHNwYWNlIHRvIGFwcGVuZCBtb3JlIHZlcnRpY2VzLCByZXR1cm4uXHJcblxyXG5cclxuICAgICAgICAgIGlmIChmbGFncyA9PSBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0VORCB8fCBzdHJhaWdodFBhdGgubGVuZ3RoID49IG1heFN0cmFpZ2h0UGF0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RhdHVzLlNVQ0NTRVNTO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFN0YXR1cy5JTl9QUk9HUkVTUztcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYXBwZW5kUG9ydGFsc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kUG9ydGFscyhzdGFydElkeCwgZW5kSWR4LCBlbmRQb3MsIHBhdGgsIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHN0YXJ0UG9zID0gc3RyYWlnaHRQYXRoW3N0cmFpZ2h0UGF0aC5sZW5ndGggLSAxXS5wb3M7IC8vIEFwcGVuZCBvciB1cGRhdGUgbGFzdCB2ZXJ0ZXhcclxuXHJcbiAgICAgICAgdmFyIHN0YXQgPSBudWxsO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJZHg7IGkgPCBlbmRJZHg7IGkrKykge1xyXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHBvcnRhbFxyXG4gICAgICAgICAgdmFyIGZyb20gPSBwYXRoW2ldO1xyXG4gICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKGZyb20pO1xyXG4gICAgICAgICAgdmFyIGZyb21UaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICB2YXIgZnJvbVBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuICAgICAgICAgIHZhciB0byA9IHBhdGhbaSArIDFdO1xyXG4gICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWYodG8pO1xyXG4gICAgICAgICAgdmFyIHRvVGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgdmFyIHRvUG9seSA9IHRpbGVBbmRQb2x5WzFdO1xyXG4gICAgICAgICAgdmFyIHBvcnRhbHMgPSB0aGlzLmdldFBvcnRhbFBvaW50czcoZnJvbSwgZnJvbVBvbHksIGZyb21UaWxlLCB0bywgdG9Qb2x5LCB0b1RpbGUsIDAsIDApO1xyXG4gICAgICAgICAgdmFyIGxlZnQgPSBwb3J0YWxzLmxlZnQ7XHJcbiAgICAgICAgICB2YXIgcmlnaHQgPSBwb3J0YWxzLnJpZ2h0O1xyXG5cclxuICAgICAgICAgIGlmICgob3B0aW9ucyAmIE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfQVJFQV9DUk9TU0lOR1MpICE9IDApIHtcclxuICAgICAgICAgICAgLy8gU2tpcCBpbnRlcnNlY3Rpb24gaWYgb25seSBhcmVhIGNyb3NzaW5ncyBhcmUgcmVxdWVzdGVkLlxyXG4gICAgICAgICAgICBpZiAoZnJvbVBvbHkuZ2V0QXJlYSgpID09IHRvUG9seS5nZXRBcmVhKCkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfSAvLyBBcHBlbmQgaW50ZXJzZWN0aW9uXHJcblxyXG5cclxuICAgICAgICAgIHZhciBpbnRlcmVjdCA9IERldG91ckNvbW1vbi5pbnRlcnNlY3RTZWdTZWcyRChzdGFydFBvcywgZW5kUG9zLCBsZWZ0LCByaWdodCk7XHJcblxyXG4gICAgICAgICAgaWYgKGludGVyZWN0WzBdKSB7XHJcbiAgICAgICAgICAgIHQgPSBpbnRlcmVjdC50aGlyZDtcclxuICAgICAgICAgICAgdmFyIHB0ID0gRGV0b3VyQ29tbW9uLnZMZXJwMyhsZWZ0LCByaWdodCwgdCk7XHJcbiAgICAgICAgICAgIHN0YXQgPSB0aGlzLmFwcGVuZFZlcnRleChwdCwgMCwgcGF0aFtpICsgMV0sIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoKTtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0YXQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gU3RhdHVzLklOX1BST0dSRVNTO1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vLyBGaW5kcyB0aGUgc3RyYWlnaHQgcGF0aCBmcm9tIHRoZSBzdGFydCB0byB0aGUgZW5kIHBvc2l0aW9uIHdpdGhpbiB0aGUgcG9seWdvbiBjb3JyaWRvci5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gVGhpcyBtZXRob2QgcGVmb3JtcyB3aGF0IGlzIG9mdGVuIGNhbGxlZCAnc3RyaW5nIHB1bGxpbmcnLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBzdGFydCBwb3NpdGlvbiBpcyBjbGFtcGVkIHRvIHRoZSBmaXJzdCBwb2x5Z29uIGluIHRoZSBwYXRoLCBhbmQgdGhlIFxyXG4gICAgICAvLy8gZW5kIHBvc2l0aW9uIGlzIGNsYW1wZWQgdG8gdGhlIGxhc3QuIFNvIHRoZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9ucyBzaG91bGQgXHJcbiAgICAgIC8vLyBub3JtYWxseSBiZSB3aXRoaW4gb3IgdmVyeSBuZWFyIHRoZSBmaXJzdCBhbmQgbGFzdCBwb2x5Z29ucyByZXNwZWN0aXZlbHkuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIHJldHVybmVkIHBvbHlnb24gcmVmZXJlbmNlcyByZXByZXNlbnQgdGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiBcclxuICAgICAgLy8vIHRoYXQgaXMgZW50ZXJlZCBhdCB0aGUgYXNzb2NpYXRlZCBwYXRoIHBvc2l0aW9uLiBUaGUgcmVmZXJlbmNlIGlkIGFzc29jaWF0ZWQgXHJcbiAgICAgIC8vLyB3aXRoIHRoZSBlbmQgcG9Qb2x5IHdpbGwgYWx3YXlzIGJlIHplcm8uICBUaGlzIGFsbG93cywgZm9yIGV4YW1wbGUsIG1hdGNoaW5nIFxyXG4gICAgICAvLy8gb2ZmLW1lc2ggbGluayBwb2ludHMgdG8gdGhlaXIgcmVwcmVzZW50YXRpdmUgcG9seWdvbnMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gSWYgdGhlIHByb3ZpZGVkIHJlc3VsdCBidWZmZXJzIGFyZSB0b28gc21hbGwgZm9yIHRoZSBlbnRpcmUgcmVzdWx0IHNldCwgXHJcbiAgICAgIC8vLyB0aGV5IHdpbGwgYmUgZmlsbGVkIGFzIGZhciBhcyBwb3NzaWJsZSBmcm9tIHRoZSBzdGFydCB0b3dhcmQgdGhlIGVuZCBcclxuICAgICAgLy8vIHBvc2l0aW9uLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdHN0YXJ0UG9zXHRcdFx0UGF0aCBzdGFydCBwb3NpdGlvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGVuZFBvc1x0XHRcdFx0UGF0aCBlbmQgcG9zaXRpb24uIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRwYXRoXHRcdFx0XHRBbiBhcnJheSBvZiBwb2x5Z29uIHJlZmVyZW5jZXMgdGhhdCByZXByZXNlbnQgdGhlIHBhdGggY29ycmlkb3IuXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdHN0cmFpZ2h0UGF0aFx0XHRQb2ludHMgZGVzY3JpYmluZyB0aGUgc3RyYWlnaHQgcGF0aC4gWyh4LCB5LCB6KSAqIEBwIHN0cmFpZ2h0UGF0aENvdW50XS5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdG1heFN0cmFpZ2h0UGF0aFx0XHRUaGUgbWF4aW11bSBudW1iZXIgb2YgcG9pbnRzIHRoZSBzdHJhaWdodCBwYXRoIGFycmF5cyBjYW4gaG9sZC4gIFtMaW1pdDogPiAwXVxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0b3B0aW9uc1x0XHRcdFx0UXVlcnkgb3B0aW9ucy4gKHNlZTogI2R0U3RyYWlnaHRQYXRoT3B0aW9ucylcclxuICAgICAgLy8vIEByZXR1cm5zIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBxdWVyeS5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJmaW5kU3RyYWlnaHRQYXRoXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kU3RyYWlnaHRQYXRoKHN0YXJ0UG9zLCBlbmRQb3MsIHBhdGgsIG1heFN0cmFpZ2h0UGF0aCwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiRW1wdHkgcGF0aFwiKTtcclxuICAgICAgICB9IC8vIFRPRE86IFNob3VsZCB0aGlzIGJlIGNhbGxlcnMgcmVzcG9uc2liaWxpdHk/XHJcblxyXG5cclxuICAgICAgICB2YXIgY2xvc2VzdFN0YXJ0UG9zID0gdGhpcy5jbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeShwYXRoWzBdLCBzdGFydFBvcyk7XHJcbiAgICAgICAgdmFyIGNsb3Nlc3RFbmRQb3MgPSB0aGlzLmNsb3Nlc3RQb2ludE9uUG9seUJvdW5kYXJ5KHBhdGhbcGF0aC5sZW5ndGggLSAxXSwgZW5kUG9zKTtcclxuICAgICAgICB2YXIgc3RyYWlnaHRQYXRoID0gW107IC8vIEFkZCBzdGFydCBwb2ludC5cclxuXHJcbiAgICAgICAgdmFyIHN0YXQgPSB0aGlzLmFwcGVuZFZlcnRleChjbG9zZXN0U3RhcnRQb3MsIE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfU1RBUlQsIHBhdGhbMF0sIHN0cmFpZ2h0UGF0aCwgbWF4U3RyYWlnaHRQYXRoKTtcclxuICAgICAgICBpZiAoIXN0YXQgPT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gc3RyYWlnaHRQYXRoO1xyXG5cclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICB2YXIgcG9ydGFsQXBleCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4oY2xvc2VzdFN0YXJ0UG9zKTtcclxuICAgICAgICAgIHZhciBwb3J0YWxMZWZ0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3J0YWxBcGV4KTtcclxuICAgICAgICAgIHZhciBwb3J0YWxSaWdodCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7XHJcbiAgICAgICAgICB2YXIgYXBleEluZGV4ID0gMDtcclxuICAgICAgICAgIHZhciBsZWZ0SW5kZXggPSAwO1xyXG4gICAgICAgICAgdmFyIHJpZ2h0SW5kZXggPSAwO1xyXG4gICAgICAgICAgdmFyIGxlZnRQb2x5VHlwZSA9IDA7XHJcbiAgICAgICAgICB2YXIgcmlnaHRQb2x5VHlwZSA9IDA7XHJcbiAgICAgICAgICB2YXIgbGVmdFBvbHlSZWYgPSBwYXRoWzBdO1xyXG4gICAgICAgICAgdmFyIHJpZ2h0UG9seVJlZiA9IHBhdGhbMF07XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHZhciB0b1R5cGUgPSB2b2lkIDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSArIDEgPCBwYXRoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIC8vIE5leHQgcG9ydGFsLlxyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9ydGFsUG9pbnRzID0gdGhpcy5nZXRQb3J0YWxQb2ludHMyKHBhdGhbaV0sIHBhdGhbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSBwb3J0YWxQb2ludHMubGVmdDtcclxuICAgICAgICAgICAgICAgIHJpZ2h0ID0gcG9ydGFsUG9pbnRzLnJpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdG9UeXBlID0gcG9ydGFsUG9pbnRzLnRvVHlwZTtcclxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZXN0RW5kUG9zID0gdGhpcy5jbG9zZXN0UG9pbnRPblBvbHlCb3VuZGFyeShwYXRoW2ldLCBlbmRQb3MpOyAvLyBBcHBlbmQgcG9ydGFscyBhUG9seSB0aGUgY3VycmVudCBzdHJhaWdodCBwYXRoIHNlZ21lbnQuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5kKG9wdGlvbnMsIHRoaXMub3IoTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9BUkVBX0NST1NTSU5HUywgTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9BTExfQ1JPU1NJTkdTKSkgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICBzdGF0ID0gYXBwZW5kUG9ydGFscyhhcGV4SW5kZXgsIGksIGNsb3Nlc3RFbmRQb3MsIHBhdGgsIHN0cmFpZ2h0UGF0aCwgb3B0aW9ucywgbWF4U3RyYWlnaHRQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0cmFpZ2h0UGF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZFZlcnRleChjbG9zZXN0RW5kUG9zLCAwLCBwYXRoW2ldLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyYWlnaHRQYXRoO1xyXG4gICAgICAgICAgICAgIH0gLy8gSWYgc3RhcnRpbmcgcmVhbGx5IGNsb3NlIHRoZSBwb3J0YWwsIGFkdmFuY2UuXHJcblxyXG5cclxuICAgICAgICAgICAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZHQgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJEMyhwb3J0YWxBcGV4LCBsZWZ0LCByaWdodCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZHRbMF0gPCBEZXRvdXJDb21tb24uc3FyKDAuMDAxKSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIEVuZCBvZiB0aGUgcGF0aC5cclxuICAgICAgICAgICAgICBsZWZ0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihjbG9zZXN0RW5kUG9zKTtcclxuICAgICAgICAgICAgICByaWdodCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4oY2xvc2VzdEVuZFBvcyk7XHJcbiAgICAgICAgICAgICAgdG9UeXBlID0gUG9seS5EVF9QT0xZVFlQRV9HUk9VTkQ7XHJcbiAgICAgICAgICAgIH0gLy8gUmlnaHQgdmVydGV4LlxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChEZXRvdXJDb21tb24udHJpQXJlYTJEMyhwb3J0YWxBcGV4LCBwb3J0YWxSaWdodCwgcmlnaHQpIDw9IDAuMCkge1xyXG4gICAgICAgICAgICAgIGlmIChEZXRvdXJDb21tb24udkVxdWFsKHBvcnRhbEFwZXgsIHBvcnRhbFJpZ2h0KSB8fCBEZXRvdXJDb21tb24udHJpQXJlYTJEMyhwb3J0YWxBcGV4LCBwb3J0YWxMZWZ0LCByaWdodCkgPiAwLjApIHtcclxuICAgICAgICAgICAgICAgIHBvcnRhbFJpZ2h0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihyaWdodCk7XHJcbiAgICAgICAgICAgICAgICByaWdodFBvbHlSZWYgPSBpICsgMSA8IHBhdGgubGVuZ3RoID8gcGF0aFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICAgICAgcmlnaHRQb2x5VHlwZSA9IHRvVHlwZTtcclxuICAgICAgICAgICAgICAgIHJpZ2h0SW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgcG9ydGFscyBhUG9seSB0aGUgY3VycmVudCBzdHJhaWdodCBwYXRoIHNlZ21lbnQuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmQob3B0aW9ucywgdGhpcy5vcihOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FSRUFfQ1JPU1NJTkdTLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FMTF9DUk9TU0lOR1MpKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN0YXQgPSBhcHBlbmRQb3J0YWxzKGFwZXhJbmRleCwgbGVmdEluZGV4LCBwb3J0YWxMZWZ0LCBwYXRoLCBzdHJhaWdodFBhdGgsIG9wdGlvbnMsIG1heFN0cmFpZ2h0UGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICghc3RhdCA9PSBTdGF0dXMuSU5fUFJPR1JFU1MpIHJldHVybiBzdHJhaWdodFBhdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcG9ydGFsQXBleCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsTGVmdCk7XHJcbiAgICAgICAgICAgICAgICBhcGV4SW5kZXggPSBsZWZ0SW5kZXg7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmxhZ3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxlZnRQb2x5UmVmID09IDApIGZsYWdzID0gTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9FTkQ7ZWxzZSBpZiAobGVmdFBvbHlUeXBlID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSBmbGFncyA9IE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfT0ZGTUVTSF9DT05ORUNUSU9OO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZiA9IGxlZnRQb2x5UmVmOyAvLyBBcHBlbmQgb3IgdXBkYXRlIHZlcnRleFxyXG5cclxuICAgICAgICAgICAgICAgIHN0YXQgPSB0aGlzLmFwcGVuZFZlcnRleChwb3J0YWxBcGV4LCBmbGFncywgcmVmLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0YXQgPT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gc3RyYWlnaHRQYXRoO1xyXG4gICAgICAgICAgICAgICAgcG9ydGFsTGVmdCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7XHJcbiAgICAgICAgICAgICAgICBwb3J0YWxSaWdodCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7XHJcbiAgICAgICAgICAgICAgICBsZWZ0SW5kZXggPSBhcGV4SW5kZXg7XHJcbiAgICAgICAgICAgICAgICByaWdodEluZGV4ID0gYXBleEluZGV4OyAvLyBSZXN0YXJ0XHJcblxyXG4gICAgICAgICAgICAgICAgaSA9IGFwZXhJbmRleDtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBMZWZ0IHZlcnRleC5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDMocG9ydGFsQXBleCwgcG9ydGFsTGVmdCwgbGVmdCkgPj0gMC4wKSB7XHJcbiAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi52RXF1YWwocG9ydGFsQXBleCwgcG9ydGFsTGVmdCkgfHwgRGV0b3VyQ29tbW9uLnRyaUFyZWEyRDMocG9ydGFsQXBleCwgcG9ydGFsUmlnaHQsIGxlZnQpIDwgMC4wKSB7XHJcbiAgICAgICAgICAgICAgICBwb3J0YWxMZWZ0ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihsZWZ0KTtcclxuICAgICAgICAgICAgICAgIGxlZnRQb2x5UmVmID0gaSArIDEgPCBwYXRoLmxlbmd0aCA/IHBhdGhbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgICAgIGxlZnRQb2x5VHlwZSA9IHRvVHlwZTtcclxuICAgICAgICAgICAgICAgIGxlZnRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBwb3J0YWxzIGFQb2x5IHRoZSBjdXJyZW50IHN0cmFpZ2h0IHBhdGggc2VnbWVudC5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuZChvcHRpb25zICYgdGhpcy5vcihOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FSRUFfQ1JPU1NJTkdTLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FMTF9DUk9TU0lOR1MpKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN0YXQgPSBhcHBlbmRQb3J0YWxzKGFwZXhJbmRleCwgcmlnaHRJbmRleCwgcG9ydGFsUmlnaHQsIHBhdGgsIHN0cmFpZ2h0UGF0aCwgb3B0aW9ucywgbWF4U3RyYWlnaHRQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ID09IFN0YXR1cy5JTl9QUk9HUkVTUykgcmV0dXJuIHN0cmFpZ2h0UGF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwb3J0YWxBcGV4ID0gRGV0b3VyQ29tbW9uLnZDb3B5X3JldHVybihwb3J0YWxSaWdodCk7XHJcbiAgICAgICAgICAgICAgICBhcGV4SW5kZXggPSByaWdodEluZGV4O1xyXG4gICAgICAgICAgICAgICAgdmFyIF9mbGFncyA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRQb2x5UmVmID09IDApIF9mbGFncyA9IE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfRU5EO2Vsc2UgaWYgKHJpZ2h0UG9seVR5cGUgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIF9mbGFncyA9IE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfT0ZGTUVTSF9DT05ORUNUSU9OO1xyXG4gICAgICAgICAgICAgICAgdmFyIF9yZWYyID0gcmlnaHRQb2x5UmVmOyAvLyBBcHBlbmQgb3IgdXBkYXRlIHZlcnRleFxyXG5cclxuICAgICAgICAgICAgICAgIHN0YXQgPSB0aGlzLmFwcGVuZFZlcnRleChwb3J0YWxBcGV4LCBfZmxhZ3MsIF9yZWYyLCBzdHJhaWdodFBhdGgsIG1heFN0cmFpZ2h0UGF0aCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0YXQgPT0gU3RhdHVzLklOX1BST0dSRVNTKSByZXR1cm4gc3RyYWlnaHRQYXRoO1xyXG4gICAgICAgICAgICAgICAgcG9ydGFsTGVmdCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7XHJcbiAgICAgICAgICAgICAgICBwb3J0YWxSaWdodCA9IERldG91ckNvbW1vbi52Q29weV9yZXR1cm4ocG9ydGFsQXBleCk7XHJcbiAgICAgICAgICAgICAgICBsZWZ0SW5kZXggPSBhcGV4SW5kZXg7XHJcbiAgICAgICAgICAgICAgICByaWdodEluZGV4ID0gYXBleEluZGV4OyAvLyBSZXN0YXJ0XHJcblxyXG4gICAgICAgICAgICAgICAgaSA9IGFwZXhJbmRleDtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBBcHBlbmQgcG9ydGFscyBhUG9seSB0aGUgY3VycmVudCBzdHJhaWdodCBwYXRoIHNlZ21lbnQuXHJcblxyXG5cclxuICAgICAgICAgIGlmICh0aGlzLmFuZChvcHRpb25zICYgdGhpcy5vcihOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FSRUFfQ1JPU1NJTkdTLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0FMTF9DUk9TU0lOR1MpKSAhPSAwKSB7XHJcbiAgICAgICAgICAgIHN0YXQgPSBhcHBlbmRQb3J0YWxzKGFwZXhJbmRleCwgcGF0aC5sZW5ndGggLSAxLCBjbG9zZXN0RW5kUG9zLCBwYXRoLCBzdHJhaWdodFBhdGgsIG9wdGlvbnMsIG1heFN0cmFpZ2h0UGF0aCk7XHJcbiAgICAgICAgICAgIGlmICghc3RhdCA9PSBTdGF0dXMuSU5fUFJPR1JFU1MpIHJldHVybiBzdHJhaWdodFBhdGg7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFwcGVuZFZlcnRleChjbG9zZXN0RW5kUG9zLCBOYXZNZXNoUXVlcnkuRFRfU1RSQUlHSFRQQVRIX0VORCwgMCwgc3RyYWlnaHRQYXRoLCBtYXhTdHJhaWdodFBhdGgpO1xyXG4gICAgICAgIHJldHVybiBzdHJhaWdodFBhdGg7XHJcbiAgICAgIH0gLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyBvcHRpbWl6ZWQgZm9yIHNtYWxsIGRlbHRhIG1vdmVtZW50IGFuZCBhIHNtYWxsIG51bWJlciBvZiBcclxuICAgICAgLy8vIHBvbHlnb25zLiBJZiB1c2VkIGZvciB0b28gZ3JlYXQgYSBkaXN0YW5jZSwgdGhlIHJlc3VsdCBzZXQgd2lsbCBmb3JtIGFuIFxyXG4gICAgICAvLy8gaW5jb21wUG9seWUgcGF0aC5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAcCByZXN1bHRQb3Mgd2lsbCBlcXVhbCB0aGUgQHAgZW5kUG9zIGlmIHRoZSBlbmQgaXMgcmVhY2hlZC4gXHJcbiAgICAgIC8vLyBPdGhlcndpc2UgdGhlIGNsb3Nlc3QgcmVhY2hhYmxlIHBvc2l0aW9uIHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIEBwIHJlc3VsdFBvcyBpcyBub3QgcHJvamVjdGVkIG9udG8gdGhlIHN1cmZhY2Ugb2YgdGhlIG5hdmlnYXRpb24gXHJcbiAgICAgIC8vLyBtZXNoLiBVc2UgI2dldFBvbHlIZWlnaHQgaWYgdGhpcyBpcyBuZWVkZWQuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhpcyBtZXRob2QgdHJlYXRzIHRoZSBlbmQgcG9zaXRpb24gaW4gdGhlIHNhbWUgbWFubmVyIGFzIFxyXG4gICAgICAvLy8gdGhlICNyYXljYXN0IG1ldGhvZC4gKEFzIGEgMkQgcG9pbnQuKSBTZWUgdGhhdCBtZXRob2QncyBkb2N1bWVudGF0aW9uIFxyXG4gICAgICAvLy8gZm9yIGRldGFpbHMuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIElmIHRoZSBAcCB2aXNpdGVkIGFycmF5IGlzIHRvbyBzbWFsbCB0byBob2xkIHRoZSBlbnRpcmUgcmVzdWx0IHNldCwgaXQgd2lsbCBcclxuICAgICAgLy8vIGJlIGZpbGxlZCBhcyBmYXIgYXMgcG9zc2libGUgZnJvbSB0aGUgc3RhcnQgcG9zaXRpb24gdG93YXJkIHRoZSBlbmQgXHJcbiAgICAgIC8vLyBwb3NpdGlvbi5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBNb3ZlcyBmcm9tIHRoZSBzdGFydCB0byB0aGUgZW5kIHBvc2l0aW9uIGNvbnN0cmFpbmVkIHRvIHRoZSBuYXZpZ2F0aW9uIG1lc2guXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRzdGFydFJlZlx0XHRUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBzdGFydCBwb2x5Z29uLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0c3RhcnRQb3NcdFx0QSBwb3NpdGlvbiBvZiB0aGUgbW92ZXIgd2l0aGluIHRoZSBzdGFydCBwb2x5Z29uLiBbKHgsIHksIHgpXVxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0ZW5kUG9zXHRcdFx0VGhlIGRlc2lyZWQgZW5kIHBvc2l0aW9uIG9mIHRoZSBtb3Zlci4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGZpbHRlclx0XHRcdFRoZSBwb2x5Z29uIGZpbHRlciB0byBhcHBseSB0byB0aGUgcXVlcnkuXHJcbiAgICAgIC8vLyBAcmV0dXJucyBQYXRoXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibW92ZUFsb25nU3VyZmFjZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZUFsb25nU3VyZmFjZShzdGFydFJlZiwgc3RhcnRQb3MsIGVuZFBvcywgZmlsdGVyKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIlN0YXJ0IHJlZiA9IDBcIik7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgc3RhcnQgcmVmXCIpO1xyXG4gICAgICAgIHRoaXMubV90aW55Tm9kZVBvb2wgPSBuZXcgTm9kZVBvb2woKTtcclxuICAgICAgICB2YXIgc3RhcnROb2RlID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlKHN0YXJ0UmVmKTtcclxuICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLmNvc3QgPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS50b3RhbCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLmlkID0gc3RhcnRSZWY7XHJcbiAgICAgICAgc3RhcnROb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX0NMT1NFRDtcclxuICAgICAgICB2YXIgc3RhY2sgPSBbXTtcclxuICAgICAgICBzdGFjay5wdXNoKHN0YXJ0Tm9kZSk7XHJcbiAgICAgICAgdmFyIGJlc3RQb3MgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgdmFyIGJlc3REaXN0ID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB2YXIgYmVzdE5vZGUgPSBudWxsO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShiZXN0UG9zLCBzdGFydFBvcyk7IC8vIFNlYXJjaCBjb25zdHJhaW50c1xyXG5cclxuICAgICAgICB2YXIgc2VhcmNoUG9zID0gRGV0b3VyQ29tbW9uLnZMZXJwMyhzdGFydFBvcywgZW5kUG9zLCAwLjUpO1xyXG4gICAgICAgIHZhciBzZWFyY2hSYWRTcXIgPSBEZXRvdXJDb21tb24uc3FyKERldG91ckNvbW1vbi52RGlzdDIoc3RhcnRQb3MsIGVuZFBvcykgLyAyLjAgKyAwLjAwMSk7XHJcbiAgICAgICAgdmFyIHZlcnRzID0gbmV3IEFycmF5KHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkgKiAzKS5maWxsKDApO1xyXG5cclxuICAgICAgICB3aGlsZSAoIXN0YWNrLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAvLyBQb3AgZnJvbnQuXHJcbiAgICAgICAgICB2YXIgY3VyTm9kZSA9IHN0YWNrLnBvcCgpOyAvLyBHZXQgbGV0IGFuZCB0aWxlLlxyXG4gICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLlxyXG5cclxuICAgICAgICAgIHZhciBjdXJSZWYgPSBjdXJOb2RlLmlkO1xyXG4gICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGN1clJlZik7XHJcbiAgICAgICAgICB2YXIgY3VyVGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgdmFyIGN1clBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gQ29sbGVjdCB2ZXJ0aWNlcy5cclxuXHJcbiAgICAgICAgICB2YXIgbnZlcnRzID0gY3VyUG9seS52ZXJ0Q291bnQ7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudmVydHM7ICsraSkge1xyXG4gICAgICAgICAgICBhcnJheWNvcHkkNChjdXJUaWxlLmRhdGEudmVydHMsIGN1clBvbHkudmVydHNbaV0gKiAzLCB2ZXJ0cywgaSAqIDMsIDMpO1xyXG4gICAgICAgICAgfSAvLyBJZiB0YXJnZXQgaXMgaW5zaWRlIHRoZSBwb2x5LCBzdG9wIHNlYXJjaC5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKERldG91ckNvbW1vbi5wb2ludEluUG9seWdvbihlbmRQb3MsIHZlcnRzLCBudmVydHMpKSB7XHJcbiAgICAgICAgICAgIGJlc3ROb2RlID0gY3VyTm9kZTtcclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGJlc3RQb3MsIGVuZFBvcyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfSAvLyBGaW5kIHdhbGwgZWRnZXMgYW5kIGZpbmQgbmVhcmVzdCBwb1BvbHkgaW5zaWRlIHRoZSB3YWxscy5cclxuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k0ID0gMCwgaiA9IGN1clBvbHkudmVydENvdW50IC0gMTsgX2k0IDwgY3VyUG9seS52ZXJ0Q291bnQ7IGogPSBfaTQrKykge1xyXG4gICAgICAgICAgICAvLyBGaW5kIGxpbmtzIHRvIG5laWdoYm91cnMuXHJcbiAgICAgICAgICAgIHZhciBNQVhfTkVJUyA9IDg7XHJcbiAgICAgICAgICAgIHZhciBubmVpcyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBuZWlzID0gbmV3IEFycmF5KE1BWF9ORUlTKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgoY3VyUG9seS5uZWlzW2pdICYgTmF2TWVzaC5EVF9FWFRfTElOSykgIT0gMCkge1xyXG4gICAgICAgICAgICAgIC8vIFRpbGUgYm9yZGVyLlxyXG4gICAgICAgICAgICAgIGZvciAodmFyIGsgPSBjdXJQb2x5LmZpcnN0TGluazsgayAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgayA9IGN1clRpbGUubGlua3Nba10ubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBjdXJUaWxlLmxpbmtzW2tdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChsaW5rLmVkZ2UgPT0gaikge1xyXG4gICAgICAgICAgICAgICAgICBpZiAobGluay5yZWYgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGxpbmsucmVmKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmVpVGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWlQb2x5ID0gdGlsZUFuZFBvbHlbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIucGFzc0ZpbHRlcihsaW5rLnJlZiwgbmVpVGlsZSwgbmVpUG9seSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChubmVpcyA8IE1BWF9ORUlTKSBuZWlzW25uZWlzKytdID0gbGluay5yZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1clBvbHkubmVpc1tqXSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGlkeCA9IGN1clBvbHkubmVpc1tqXSAtIDE7XHJcbiAgICAgICAgICAgICAgdmFyIHJlZiA9IG9yKHRoaXMubV9uYXYuZ2V0UG9seVJlZkJhc2UoY3VyVGlsZSksIGlkeCk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXIucGFzc0ZpbHRlcihyZWYsIGN1clRpbGUsIGN1clRpbGUuZGF0YS5wb2x5c1tpZHhdKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW50ZXJuYWwgZWRnZSwgZW5jb2RlIGlkLlxyXG4gICAgICAgICAgICAgICAgbmVpc1tubmVpcysrXSA9IHJlZjtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChubmVpcyA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gV2FsbCBlZGdlLCBjYWxjIGRpc3RhbmNlLlxyXG4gICAgICAgICAgICAgIHZhciB2aiA9IGogKiAzO1xyXG4gICAgICAgICAgICAgIHZhciB2aSA9IF9pNCAqIDM7XHJcbiAgICAgICAgICAgICAgdmFyIGRpc3RTZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJENChlbmRQb3MsIHZlcnRzLCB2aiwgdmkpO1xyXG4gICAgICAgICAgICAgIHZhciBfZGlzdFNxciA9IGRpc3RTZWdbMF07XHJcbiAgICAgICAgICAgICAgdmFyIF90c2VnID0gZGlzdFNlZ1sxXTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9kaXN0U3FyIDwgYmVzdERpc3QpIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBuZWFyZXN0IGRpc3RhbmNlLlxyXG4gICAgICAgICAgICAgICAgYmVzdFBvcyA9IERldG91ckNvbW1vbi52TGVycDQodmVydHMsIHZqLCB2aSwgX3RzZWcpO1xyXG4gICAgICAgICAgICAgICAgYmVzdERpc3QgPSBfZGlzdFNxcjtcclxuICAgICAgICAgICAgICAgIGJlc3ROb2RlID0gY3VyTm9kZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG5uZWlzOyArK19rKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGlmIG5vIG5vZGUgY2FuIGJlIGFsbG9jYXRlZC5cclxuICAgICAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlKG5laXNbX2tdKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZWlnaGJvdXJOb2RlID09IG51bGwpIGNvbnRpbnVlOyAvLyBTa2lwIGlmIGFscmVhZHkgdmlzaXRlZC5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfQ0xPU0VEKSAhPSAwKSBjb250aW51ZTsgLy8gU2tpcCB0aGUgbGluayBpZiBpdCBpcyB0b28gZmFyIGZyb20gc2VhcmNoIGNvbnN0cmFpbnQuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBNYXliZSBzaG91bGQgdXNlIGdldFBvcnRhbFBvaW50cygpLCBidXQgdGhpcyBvbmUgaXMgd2F5IGZhc3Rlci5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX3ZqID0gaiAqIDM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF92aSA9IF9pNCAqIDM7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJENChzZWFyY2hQb3MsIHZlcnRzLCBfdmosIF92aSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2Rpc3RTcXIyID0gZGlzdHNlZ1swXTtcclxuICAgICAgICAgICAgICAgIGlmIChfZGlzdFNxcjIgPiBzZWFyY2hSYWRTcXIpIGNvbnRpbnVlOyAvLyBNYXJrIGFzIHRoZSBub2RlIGFzIHZpc2l0ZWQgYW5kIHB1c2ggdG8gcXVldWUuXHJcblxyXG4gICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlSWR4KGN1ck5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEO1xyXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB2aXNpdGVkID0gW107XHJcblxyXG4gICAgICAgIGlmIChiZXN0Tm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAvLyBSZXZlcnNlIHRoZSBwYXRoLlxyXG4gICAgICAgICAgdmFyIHByZXYgPSBudWxsO1xyXG4gICAgICAgICAgdmFyIG5vZGUgPSBiZXN0Tm9kZTtcclxuXHJcbiAgICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlQXRJZHgobm9kZS5waWR4KTtcclxuICAgICAgICAgICAgbm9kZS5waWR4ID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlSWR4KHByZXYpO1xyXG4gICAgICAgICAgICBwcmV2ID0gbm9kZTtcclxuICAgICAgICAgICAgbm9kZSA9IG5leHQ7XHJcbiAgICAgICAgICB9IHdoaWxlIChub2RlICE9IG51bGwpOyAvLyBTdG9yZSByZXN1bHRcclxuXHJcblxyXG4gICAgICAgICAgbm9kZSA9IHByZXY7XHJcblxyXG4gICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICB2aXNpdGVkLnB1c2gobm9kZS5pZCk7XHJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLm1fdGlueU5vZGVQb29sLmdldE5vZGVBdElkeChub2RlLnBpZHgpO1xyXG4gICAgICAgICAgfSB3aGlsZSAobm9kZSAhPSBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgTW92ZUFsb25nU3VyZmFjZVJlc3VsdChiZXN0UG9zLCB2aXNpdGVkKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UG9ydGFsUG9pbnRzMlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9ydGFsUG9pbnRzMihmcm9tLCB0bykge1xyXG4gICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZihmcm9tKTtcclxuICAgICAgICB2YXIgZnJvbVRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICB2YXIgZnJvbVBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuICAgICAgICB2YXIgZnJvbVR5cGUgPSBmcm9tUG9seS5nZXRUeXBlKCk7XHJcbiAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWYodG8pO1xyXG4gICAgICAgIHZhciB0b1RpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICB2YXIgdG9Qb2x5ID0gdGlsZUFuZFBvbHlbMV07XHJcbiAgICAgICAgdmFyIHRvVHlwZSA9IHRvUG9seS5nZXRUeXBlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9ydGFsUG9pbnRzNyhmcm9tLCBmcm9tUG9seSwgZnJvbVRpbGUsIHRvLCB0b1BvbHksIHRvVGlsZSwgZnJvbVR5cGUsIHRvVHlwZSk7XHJcbiAgICAgIH0gLy8gUmV0dXJucyBwb3J0YWwgcG9pbnRzIGJldHdlZW4gdHdvIHBvbHlnb25zLlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFBvcnRhbFBvaW50czdcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBvcnRhbFBvaW50czcoZnJvbSwgZnJvbVBvbHksIGZyb21UaWxlLCB0bywgdG9Qb2x5LCB0b1RpbGUsIGZyb21UeXBlLCB0b1R5cGUpIHtcclxuICAgICAgICB2YXIgbGVmdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICB2YXIgcmlnaHQgPSBuZXcgQXJyYXkoMyk7IC8vIEZpbmQgdGhlIGxpbmsgdGhhdCBwb2ludHMgdG8gdGhlICd0bycgcG9seWdvbi5cclxuXHJcbiAgICAgICAgdmFyIGxpbmsgPSBudWxsO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gZnJvbVBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gZnJvbVRpbGUubGlua3NbaV0ubmV4dCkge1xyXG4gICAgICAgICAgaWYgKGZyb21UaWxlLmxpbmtzW2ldLnJlZiA9PSB0bykge1xyXG4gICAgICAgICAgICBsaW5rID0gZnJvbVRpbGUubGlua3NbaV07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGxpbmsgPT0gbnVsbCkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIk51bGwgbGlua1wiKTsgLy8gSGFuZGxlIG9mZi1tZXNoIGNvbm5lY3Rpb25zLlxyXG5cclxuICAgICAgICBpZiAoZnJvbVBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSB7XHJcbiAgICAgICAgICAvLyBGaW5kIGxpbmsgdGhhdCBwb2ludHMgdG8gZmlyc3QgdmVydGV4LlxyXG4gICAgICAgICAgZm9yICh2YXIgX2k1ID0gZnJvbVBvbHkuZmlyc3RMaW5rOyBfaTUgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IF9pNSA9IGZyb21UaWxlLmxpbmtzW19pNV0ubmV4dCkge1xyXG4gICAgICAgICAgICBpZiAoZnJvbVRpbGUubGlua3NbX2k1XS5yZWYgPT0gdG8pIHtcclxuICAgICAgICAgICAgICB2YXIgdiA9IGZyb21UaWxlLmxpbmtzW19pNV0uZWRnZTtcclxuICAgICAgICAgICAgICBhcnJheWNvcHkkNChmcm9tVGlsZS5kYXRhLnZlcnRzLCBmcm9tUG9seS52ZXJ0c1t2XSAqIDMsIGxlZnQsIDAsIDMpO1xyXG4gICAgICAgICAgICAgIGFycmF5Y29weSQ0KGZyb21UaWxlLmRhdGEudmVydHMsIGZyb21Qb2x5LnZlcnRzW3ZdICogMywgcmlnaHQsIDAsIDMpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBuZXcgUG9ydGFsUmVzdWx0KGxlZnQsIHJpZ2h0LCBmcm9tVHlwZSwgdG9UeXBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIG9mZm1lc2ggZnJvbSBjb25uZWN0aW9uXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRvUG9seS5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIHtcclxuICAgICAgICAgIGZvciAodmFyIF9pNiA9IHRvUG9seS5maXJzdExpbms7IF9pNiAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgX2k2ID0gdG9UaWxlLmxpbmtzW19pNl0ubmV4dCkge1xyXG4gICAgICAgICAgICBpZiAodG9UaWxlLmxpbmtzW19pNl0ucmVmID09IGZyb20pIHtcclxuICAgICAgICAgICAgICB2YXIgX3YzID0gdG9UaWxlLmxpbmtzW19pNl0uZWRnZTtcclxuICAgICAgICAgICAgICBhcnJheWNvcHkkNCh0b1RpbGUuZGF0YS52ZXJ0cywgdG9Qb2x5LnZlcnRzW192M10gKiAzLCBsZWZ0LCAwLCAzKTtcclxuICAgICAgICAgICAgICBhcnJheWNvcHkkNCh0b1RpbGUuZGF0YS52ZXJ0cywgdG9Qb2x5LnZlcnRzW192M10gKiAzLCByaWdodCwgMCwgMyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQb3J0YWxSZXN1bHQobGVmdCwgcmlnaHQsIGZyb21UeXBlLCB0b1R5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgb2ZmbWVzaCB0byBjb25uZWN0aW9uXCIpO1xyXG4gICAgICAgIH0gLy8gRmluZCBwb3J0YWwgdmVydGljZXMuXHJcblxyXG5cclxuICAgICAgICB2YXIgdjAgPSBmcm9tUG9seS52ZXJ0c1tsaW5rLmVkZ2VdO1xyXG4gICAgICAgIHZhciB2MSA9IGZyb21Qb2x5LnZlcnRzWyhsaW5rLmVkZ2UgKyAxKSAlIGZyb21Qb2x5LnZlcnRDb3VudF07XHJcbiAgICAgICAgYXJyYXljb3B5JDQoZnJvbVRpbGUuZGF0YS52ZXJ0cywgdjAgKiAzLCBsZWZ0LCAwLCAzKTtcclxuICAgICAgICBhcnJheWNvcHkkNChmcm9tVGlsZS5kYXRhLnZlcnRzLCB2MSAqIDMsIHJpZ2h0LCAwLCAzKTsgLy8gSWYgdGhlIGxpbmsgaXMgYXQgdGlsZSBib3VuZGFyeSwgZHRDbGFtcCB0aGUgdmVydGljZXMgdG9cclxuICAgICAgICAvLyB0aGUgbGluayB3aWR0aC5cclxuXHJcbiAgICAgICAgaWYgKGxpbmsuc2lkZSAhPSAweGZmKSB7XHJcbiAgICAgICAgICAvLyBVbnBhY2sgcG9ydGFsIGxpbWl0cy5cclxuICAgICAgICAgIGlmIChsaW5rLmJtaW4gIT0gMCB8fCBsaW5rLmJtYXggIT0gMjU1KSB7XHJcbiAgICAgICAgICAgIHMgPSAxLjAgLyAyNTUuMDtcclxuICAgICAgICAgICAgdG1pbiA9IGxpbmsuYm1pbiAqIHM7XHJcbiAgICAgICAgICAgIHRtYXggPSBsaW5rLmJtYXggKiBzO1xyXG4gICAgICAgICAgICBsZWZ0ID0gRGV0b3VyQ29tbW9uLnZMZXJwMyhmcm9tVGlsZS5kYXRhLnZlcnRzLCB2MCAqIDMsIHYxICogMywgdG1pbik7XHJcbiAgICAgICAgICAgIHJpZ2h0ID0gRGV0b3VyQ29tbW9uLnZMZXJwMyhmcm9tVGlsZS5kYXRhLnZlcnRzLCB2MCAqIDMsIHYxICogMywgdG1heCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFBvcnRhbFJlc3VsdChsZWZ0LCByaWdodCwgZnJvbVR5cGUsIHRvVHlwZSk7XHJcbiAgICAgIH0gLy8gUmV0dXJucyBlZGdlIG1pZCBwb1BvbHkgYmV0d2VlbiB0d28gcG9seWdvbnMuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0RWRnZU1pZFBvaW50MlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RWRnZU1pZFBvaW50Mihmcm9tLCB0bykge1xyXG4gICAgICAgIHZhciBwcG9pbnRzID0gdGhpcy5nZXRQb3J0YWxQb2ludHMyKGZyb20sIHRvKTtcclxuICAgICAgICB2YXIgbGVmdCA9IHBwb2ludHMubGVmdDtcclxuICAgICAgICB2YXIgcmlnaHQgPSBwcG9pbnRzLnJpZ2h0O1xyXG4gICAgICAgIHZhciBtaWQgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgbWlkWzBdID0gKGxlZnRbMF0gKyByaWdodFswXSkgKiAwLjU7XHJcbiAgICAgICAgbWlkWzFdID0gKGxlZnRbMV0gKyByaWdodFsxXSkgKiAwLjU7XHJcbiAgICAgICAgbWlkWzJdID0gKGxlZnRbMl0gKyByaWdodFsyXSkgKiAwLjU7XHJcbiAgICAgICAgcmV0dXJuIG1pZDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0RWRnZU1pZFBvaW50NlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RWRnZU1pZFBvaW50Nihmcm9tLCBmcm9tUG9seSwgZnJvbVRpbGUsIHRvLCB0b1BvbHksIHRvVGlsZSkge1xyXG4gICAgICAgIHZhciBwcG9pbnRzID0gdGhpcy5nZXRQb3J0YWxQb2ludHM3KGZyb20sIGZyb21Qb2x5LCBmcm9tVGlsZSwgdG8sIHRvUG9seSwgdG9UaWxlLCAwLCAwKTtcclxuICAgICAgICB2YXIgbGVmdCA9IHBwb2ludHMubGVmdDtcclxuICAgICAgICB2YXIgcmlnaHQgPSBwcG9pbnRzLnJpZ2h0O1xyXG4gICAgICAgIHZhciBtaWQgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgbWlkWzBdID0gKGxlZnRbMF0gKyByaWdodFswXSkgKiAwLjU7XHJcbiAgICAgICAgbWlkWzFdID0gKGxlZnRbMV0gKyByaWdodFsxXSkgKiAwLjU7XHJcbiAgICAgICAgbWlkWzJdID0gKGxlZnRbMl0gKyByaWdodFsyXSkgKiAwLjU7XHJcbiAgICAgICAgcmV0dXJuIG1pZDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmF5Y2FzdFwiLFxyXG4gICAgICAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoaXMgbWV0aG9kIGlzIG1lYW50IHRvIGJlIHVzZWQgZm9yIHF1aWNrLCBzaG9ydCBkaXN0YW5jZSBjaGVja3MuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gSWYgdGhlIHBhdGggYXJyYXkgaXMgdG9vIHNtYWxsIHRvIGhvbGQgdGhlIHJlc3VsdCwgaXQgd2lsbCBiZSBmaWxsZWQgYXMgXHJcbiAgICAgIC8vLyBmYXIgYXMgcG9zc2libGUgZnJvbSB0aGUgc3RhcnQgcG9zdGlvbiB0b3dhcmQgdGhlIGVuZCBwb3NpdGlvbi5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyA8Yj5Vc2luZyB0aGUgSGl0IFBhcmFtZXRlciB0IG9mIFJheWNhc3RIaXQ8L2I+XHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIElmIHRoZSBoaXQgcGFyYW1ldGVyIGlzIGEgdmVyeSBoaWdoIHZhbHVlIChGTFRfTUFYKSwgdGhlbiB0aGUgcmF5IGhhcyBoaXQgXHJcbiAgICAgIC8vLyB0aGUgZW5kIHBvc2l0aW9uLiBJbiB0aGlzIGNhc2UgdGhlIHBhdGggcmVwcmVzZW50cyBhIHZhbGlkIGNvcnJpZG9yIHRvIHRoZSBcclxuICAgICAgLy8vIGVuZCBwb3NpdGlvbiBhbmQgdGhlIHZhbHVlIG9mIEBwIGhpdE5vcm1hbCBpcyB1bmRlZmluZWQuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gSWYgdGhlIGhpdCBwYXJhbWV0ZXIgaXMgemVybywgdGhlbiB0aGUgc3RhcnQgcG9zaXRpb24gaXMgb24gdGhlIHdhbGwgdGhhdCBcclxuICAgICAgLy8vIHdhcyBoaXQgYW5kIHRoZSB2YWx1ZSBvZiBAcCBoaXROb3JtYWwgaXMgdW5kZWZpbmVkLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIElmIDAgPCB0IDwgMS4wIHRoZW4gdGhlIGZvbGxvd2luZyBhcHBsaWVzOlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEBjb2RlXHJcbiAgICAgIC8vLyBkaXN0YW5jZVRvSGl0Qm9yZGVyID0gZGlzdGFuY2VUb0VuZFBvc2l0aW9uICogdFxyXG4gICAgICAvLy8gaGl0UG9Qb2x5ID0gc3RhcnRQb3MgKyAoZW5kUG9zIC0gc3RhcnRQb3MpICogdFxyXG4gICAgICAvLy8gQGVuZGNvZGVcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyA8Yj5Vc2UgQ2FzZSBSZXN0cmljdGlvbjwvYj5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGUgcmF5Y2FzdCBpZ25vcmVzIHRoZSB5LXZhbHVlIG9mIHRoZSBlbmQgcG9zaXRpb24uICgyRCBjaGVjay4pIFRoaXMgXHJcbiAgICAgIC8vLyBwbGFjZXMgc2lnbmlmaWNhbnQgbGltaXRzIG9uIGhvdyBpdCBjYW4gYmUgdXNlZC4gRm9yIGV4YW1wbGU6XHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQ29uc2lkZXIgYSBzY2VuZSB3aGVyZSB0aGVyZSBpcyBhIG1haW4gZmxvb3Igd2l0aCBhIHNlY29uZCBmbG9vciBiYWxjb255IFxyXG4gICAgICAvLy8gdGhhdCBoYW5ncyBvdmVyIHRoZSBtYWluIGZsb29yLiBTbyB0aGUgZmlyc3QgZmxvb3IgbWVzaCBleHRlbmRzIGJlbG93IHRoZSBcclxuICAgICAgLy8vIGJhbGNvbnkgbWVzaC4gVGhlIHN0YXJ0IHBvc2l0aW9uIGlzIHNvbWV3aGVyZSBvbiB0aGUgZmlyc3QgZmxvb3IuIFRoZSBlbmQgXHJcbiAgICAgIC8vLyBwb3NpdGlvbiBpcyBvbiB0aGUgYmFsY29ueS5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGUgcmF5Y2FzdCB3aWxsIHNlYXJjaCB0b3dhcmQgdGhlIGVuZCBwb3NpdGlvbiBhUG9seSB0aGUgZmlyc3QgZmxvb3IgbWVzaC4gXHJcbiAgICAgIC8vLyBJZiBpdCByZWFjaGVzIHRoZSBlbmQgcG9zaXRpb24ncyB4ei1jb29yZGluYXRlcyBpdCB3aWxsIGluZGljYXRlIEZMVF9NQVhcclxuICAgICAgLy8vIChubyB3YWxsIGhpdCksIG1lYW5pbmcgaXQgcmVhY2hlZCB0aGUgZW5kIHBvc2l0aW9uLiBUaGlzIGlzIG9uZSBleGFtcGxlIG9mIHdoeVxyXG4gICAgICAvLy8gdGhpcyBtZXRob2QgaXMgbWVhbnQgZm9yIHNob3J0IGRpc3RhbmNlIGNoZWNrcy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBDYXN0cyBhICd3YWxrYWJpbGl0eScgcmF5IGFQb2x5IHRoZSBzdXJmYWNlIG9mIHRoZSBuYXZpZ2F0aW9uIG1lc2ggZnJvbSBcclxuICAgICAgLy8vIHRoZSBzdGFydCBwb3NpdGlvbiB0b3dhcmQgdGhlIGVuZCBwb3NpdGlvbi5cclxuICAgICAgLy8vIEBub3RlIEEgd3JhcHBlciBhcm91bmQgcmF5Y2FzdCguLi4sIFJheWNhc3RIaXQqKS4gUmV0YWluZWQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRzdGFydFJlZlx0VGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgc3RhcnQgcG9seWdvbi5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdHN0YXJ0UG9zXHRBIHBvc2l0aW9uIHdpdGhpbiB0aGUgc3RhcnQgcG9seWdvbiByZXByZXNlbnRpbmcgXHJcbiAgICAgIC8vLyAgXHRcdFx0XHRcdFx0XHR0aGUgc3RhcnQgb2YgdGhlIHJheS4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGVuZFBvc1x0XHRUaGUgcG9zaXRpb24gdG8gY2FzdCB0aGUgcmF5IHRvd2FyZC4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0dFx0XHRcdFRoZSBoaXQgcGFyYW1ldGVyLiAoRkxUX01BWCBpZiBubyB3YWxsIGhpdC4pXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdGhpdE5vcm1hbFx0VGhlIG5vcm1hbCBvZiB0aGUgbmVhcmVzdCB3YWxsIGhpdC4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGZpbHRlclx0XHRUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRwYXRoXHRcdFRoZSByZWZlcmVuY2UgaWRzIG9mIHRoZSB2aXNpdGVkIHBvbHlnb25zLiBbb3B0XVxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRwYXRoQ291bnRcdFRoZSBudW1iZXIgb2YgdmlzaXRlZCBwb2x5Z29ucy4gW29wdF1cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdG1heFBhdGhcdFx0VGhlIG1heGltdW0gbnVtYmVyIG9mIHBvbHlnb25zIHRoZSBAcCBwYXRoIGFycmF5IGNhbiBob2xkLlxyXG4gICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5LlxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmF5Y2FzdChzdGFydFJlZiwgc3RhcnRQb3MsIGVuZFBvcywgZmlsdGVyLCBvcHRpb25zLCBwcmV2UmVmKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIHN0YXJ0IHJlZlwiKTtcclxuICAgICAgICBpZiAocHJldlJlZiAhPSAwICYmICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHByZXZSZWYpKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBwcmVmIHJlZlwiKTtcclxuICAgICAgICB2YXIgaGl0ID0gbmV3IFJheWNhc3RIaXQoKTtcclxuICAgICAgICB2YXIgdmVydHMgPSBuZXcgQXJyYXkodGhpcy5tX25hdi5nZXRNYXhWZXJ0c1BlclBvbHkoKSAqIDMgKyAzKTtcclxuICAgICAgICB2YXIgY3VyUG9zID0gbmV3IEFycmF5KDMpLFxyXG4gICAgICAgICAgICBsYXN0UG9zID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShjdXJQb3MsIHN0YXJ0UG9zKTtcclxuICAgICAgICB2YXIgZGlyID0gRGV0b3VyQ29tbW9uLnZTdWIoZW5kUG9zLCBzdGFydFBvcyk7XHJcbiAgICAgICAgdmFyIHByZXZUaWxlLCB0aWxlLCBuZXh0VGlsZTtcclxuICAgICAgICB2YXIgcHJldlBvbHksIHBvbHksIG5leHRQb2x5OyAvLyBUaGUgQVBJIGlucHV0IGhhcyBiZWVuIGNoZWNrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLlxyXG5cclxuICAgICAgICB2YXIgY3VyUmVmID0gc3RhcnRSZWY7XHJcbiAgICAgICAgdmFyIHRpbGVBbmRQb2x5VW5zID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGN1clJlZik7XHJcbiAgICAgICAgdGlsZSA9IHRpbGVBbmRQb2x5VW5zWzBdO1xyXG4gICAgICAgIHBvbHkgPSB0aWxlQW5kUG9seVVuc1sxXTtcclxuICAgICAgICBuZXh0VGlsZSA9IHByZXZUaWxlID0gdGlsZTtcclxuICAgICAgICBuZXh0UG9seSA9IHByZXZQb2x5ID0gcG9seTtcclxuXHJcbiAgICAgICAgaWYgKHByZXZSZWYgIT0gMCkge1xyXG4gICAgICAgICAgdGlsZUFuZFBvbHlVbnMgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUocHJldlJlZik7XHJcbiAgICAgICAgICBwcmV2VGlsZSA9IHRpbGVBbmRQb2x5VW5zWzBdO1xyXG4gICAgICAgICAgcHJldlBvbHkgPSB0aWxlQW5kUG9seVVuc1sxXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdoaWxlIChjdXJSZWYgIT0gMCkge1xyXG4gICAgICAgICAgLy8gQ2FzdCByYXkgYWdhaW5zdCBjdXJyZW50IHBvbHlnb24uXHJcbiAgICAgICAgICAvLyBDb2xsZWN0IHZlcnRpY2VzLlxyXG4gICAgICAgICAgdmFyIG52ID0gMDtcclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvbHkudmVydENvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgYXJyYXljb3B5JDQodGlsZS5kYXRhLnZlcnRzLCBwb2x5LnZlcnRzW2ldICogMywgdmVydHMsIG52ICogMywgMyk7XHJcbiAgICAgICAgICAgIG52Kys7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGlyZXN1bHQgPSBEZXRvdXJDb21tb24uaW50ZXJzZWN0U2VnbWVudFBvbHkyRChzdGFydFBvcywgZW5kUG9zLCB2ZXJ0cywgbnYpO1xyXG5cclxuICAgICAgICAgIGlmICghaXJlc3VsdC5pbnRlcnNlY3RzKSB7XHJcbiAgICAgICAgICAgIC8vIENvdWxkIG5vdCBoaXQgdGhlIHBvbHlnb24sIGtlZXAgdGhlIG9sZCB0IGFuZCByZXBvcnQgaGl0LlxyXG4gICAgICAgICAgICByZXR1cm4gaGl0O1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGhpdC5oaXRFZGdlSW5kZXggPSBpcmVzdWx0LnNlZ01heDsgLy8gS2VlcCB0cmFjayBvZiBmdXJ0aGVzdCB0IHNvIGZhci5cclxuXHJcbiAgICAgICAgICBpZiAoaXJlc3VsdC50bWF4ID4gaGl0LnQpIGhpdC50ID0gaXJlc3VsdC50bWF4OyAvLyBTdG9yZSB2aXNpdGVkIHBvbHlnb25zLlxyXG5cclxuICAgICAgICAgIGhpdC5wYXRoLnB1c2goY3VyUmVmKTsgLy8gUmF5IGVuZCBpcyBjb21wUG9seWVseSBpbnNpZGUgdGhlIHBvbHlnb24uXHJcblxyXG4gICAgICAgICAgaWYgKGlyZXN1bHQuc2VnTWF4ID09IC0xKSB7XHJcbiAgICAgICAgICAgIGhpdC50ID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gYWRkIHRoZSBjb3N0XHJcblxyXG4gICAgICAgICAgICBpZiAoKG9wdGlvbnMgJiBOYXZNZXNoUXVlcnkuRFRfUkFZQ0FTVF9VU0VfQ09TVFMpICE9IDApIGhpdC5wYXRoQ29zdCArPSBmaWx0ZXIuZ2V0Q29zdChjdXJQb3MsIGVuZFBvcywgcHJldlJlZiwgcHJldlRpbGUsIHByZXZQb2x5LCBjdXJSZWYsIHRpbGUsIHBvbHksIGN1clJlZiwgdGlsZSwgcG9seSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoaXQ7XHJcbiAgICAgICAgICB9IC8vIEZvbGxvdyBuZWlnaGJvdXJzLlxyXG5cclxuXHJcbiAgICAgICAgICB2YXIgbmV4dFJlZiA9IDA7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k3ID0gcG9seS5maXJzdExpbms7IF9pNyAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgX2k3ID0gdGlsZS5saW5rc1tfaTddLm5leHQpIHtcclxuICAgICAgICAgICAgdmFyIGxpbmsgPSB0aWxlLmxpbmtzW19pN107IC8vIEZpbmQgbGluayB3aGljaCBjb250YWlucyB0aGlzIGVkZ2UuXHJcblxyXG4gICAgICAgICAgICBpZiAobGluay5lZGdlICE9IGlyZXN1bHQuc2VnTWF4KSBjb250aW51ZTsgLy8gR2V0IHBvaW50ZXIgdG8gdGhlIG5leHQgcG9seWdvbi5cclxuXHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5VW5zID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGxpbmsucmVmKTtcclxuICAgICAgICAgICAgbmV4dFRpbGUgPSB0aWxlQW5kUG9seVVuc1swXTtcclxuICAgICAgICAgICAgbmV4dFBvbHkgPSB0aWxlQW5kUG9seVVuc1sxXTsgLy8gU2tpcCBvZmYtbWVzaCBjb25uZWN0aW9ucy5cclxuXHJcbiAgICAgICAgICAgIGlmIChuZXh0UG9seS5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIGNvbnRpbnVlOyAvLyBTa2lwIGxpbmtzIGJhc2VkIG9uIGZpbHRlci5cclxuXHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobGluay5yZWYsIG5leHRUaWxlLCBuZXh0UG9seSkpIGNvbnRpbnVlOyAvLyBJZiB0aGUgbGluayBpcyBpbnRlcm5hbCwganVzdCByZXR1cm4gdGhlIHJlZi5cclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5rLnNpZGUgPT0gMHhmZikge1xyXG4gICAgICAgICAgICAgIG5leHRSZWYgPSBsaW5rLnJlZjtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSAvLyBJZiB0aGUgbGluayBpcyBhdCB0aWxlIGJvdW5kYXJ5LFxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgbGluayBzcGFucyB0aGUgd2hvbGUgZWRnZSwgYW5kIGFjY2VwdC5cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAobGluay5ibWluID09IDAgJiYgbGluay5ibWF4ID09IDI1NSkge1xyXG4gICAgICAgICAgICAgIG5leHRSZWYgPSBsaW5rLnJlZjtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSAvLyBDaGVjayBmb3IgcGFydGlhbCBlZGdlIGxpbmtzLlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBfdjQgPSBwb2x5LnZlcnRzW2xpbmsuZWRnZV07XHJcbiAgICAgICAgICAgIHZhciBfdjUgPSBwb2x5LnZlcnRzWyhsaW5rLmVkZ2UgKyAxKSAlIHBvbHkudmVydENvdW50XTtcclxuICAgICAgICAgICAgdmFyIGxlZnQgPSBfdjQgKiAzO1xyXG4gICAgICAgICAgICB2YXIgcmlnaHQgPSBfdjUgKiAzOyAvLyBDaGVjayB0aGF0IHRoZSBpbnRlcnNlY3Rpb24gbGllcyBpbnNpZGUgdGhlIGxpbmsgcG9ydGFsLlxyXG5cclxuICAgICAgICAgICAgaWYgKGxpbmsuc2lkZSA9PSAwIHx8IGxpbmsuc2lkZSA9PSA0KSB7XHJcbiAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGxpbmsgc2l6ZS5cclxuICAgICAgICAgICAgICBsbWluID0gdGlsZS5kYXRhLnZlcnRzW2xlZnQgKyAyXSArICh0aWxlLmRhdGEudmVydHNbcmlnaHQgKyAyXSAtIHRpbGUuZGF0YS52ZXJ0c1tsZWZ0ICsgMl0pICogKGxpbmsuYm1pbiAqIHMpO1xyXG4gICAgICAgICAgICAgIGxtYXggPSB0aWxlLmRhdGEudmVydHNbbGVmdCArIDJdICsgKHRpbGUuZGF0YS52ZXJ0c1tyaWdodCArIDJdIC0gdGlsZS5kYXRhLnZlcnRzW2xlZnQgKyAyXSkgKiAobGluay5ibWF4ICogcyk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChsbWluID4gbG1heCkge1xyXG4gICAgICAgICAgICAgICAgdGVtcCA9IGxtaW47XHJcbiAgICAgICAgICAgICAgICBsbWluID0gbG1heDtcclxuICAgICAgICAgICAgICAgIGxtYXggPSB0ZW1wO1xyXG4gICAgICAgICAgICAgIH0gLy8gRmluZCBaIGludGVyc2VjdGlvbi5cclxuXHJcblxyXG4gICAgICAgICAgICAgIHogPSBzdGFydFBvc1syXSArIChlbmRQb3NbMl0gLSBzdGFydFBvc1syXSkgKiBpcmVzdWx0LnRtYXg7XHJcblxyXG4gICAgICAgICAgICAgIGlmICh6ID49IGxtaW4gJiYgeiA8PSBsbWF4KSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0UmVmID0gbGluay5yZWY7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGluay5zaWRlID09IDIgfHwgbGluay5zaWRlID09IDYpIHtcclxuICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgbGluayBzaXplLlxyXG4gICAgICAgICAgICAgIGxtaW4gPSB0aWxlLmRhdGEudmVydHNbbGVmdF0gKyAodGlsZS5kYXRhLnZlcnRzW3JpZ2h0XSAtIHRpbGUuZGF0YS52ZXJ0c1tsZWZ0XSkgKiAobGluay5ibWluICogcyk7XHJcbiAgICAgICAgICAgICAgbG1heCA9IHRpbGUuZGF0YS52ZXJ0c1tsZWZ0XSArICh0aWxlLmRhdGEudmVydHNbcmlnaHRdIC0gdGlsZS5kYXRhLnZlcnRzW2xlZnRdKSAqIChsaW5rLmJtYXggKiBzKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGxtaW4gPiBsbWF4KSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wID0gbG1pbjtcclxuICAgICAgICAgICAgICAgIGxtaW4gPSBsbWF4O1xyXG4gICAgICAgICAgICAgICAgbG1heCA9IHRlbXA7XHJcbiAgICAgICAgICAgICAgfSAvLyBGaW5kIFggaW50ZXJzZWN0aW9uLlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgeCA9IHN0YXJ0UG9zWzBdICsgKGVuZFBvc1swXSAtIHN0YXJ0UG9zWzBdKSAqIGlyZXN1bHQudG1heDtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKHggPj0gbG1pbiAmJiB4IDw9IGxtYXgpIHtcclxuICAgICAgICAgICAgICAgIG5leHRSZWYgPSBsaW5rLnJlZjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBhZGQgdGhlIGNvc3RcclxuXHJcblxyXG4gICAgICAgICAgaWYgKChvcHRpb25zICYgTmF2TWVzaFF1ZXJ5LkRUX1JBWUNBU1RfVVNFX0NPU1RTKSAhPSAwKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbXB1dGUgdGhlIGludGVyc2VjdGlvbiBwb1BvbHkgYXQgdGhlIGZ1cnRoZXN0IGVuZCBvZiB0aGUgcG9seWdvblxyXG4gICAgICAgICAgICAvLyBhbmQgY29ycmVjdCB0aGUgaGVpZ2h0IChzaW5jZSB0aGUgcmF5Y2FzdCBtb3ZlcyBpbiAyZClcclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGxhc3RQb3MsIGN1clBvcyk7XHJcbiAgICAgICAgICAgIGN1clBvcyA9IERldG91ckNvbW1vbi52TWFkKHN0YXJ0UG9zLCBkaXIsIGhpdC50KTtcclxuICAgICAgICAgICAgdmFyIGUxID0gbmV3IFZlY3RvclB0cih2ZXJ0cywgaXJlc3VsdC5zZWdNYXggKiAzKTtcclxuICAgICAgICAgICAgdmFyIGUyID0gbmV3IFZlY3RvclB0cih2ZXJ0cywgKGlyZXN1bHQuc2VnTWF4ICsgMSkgJSBudiAqIDMpO1xyXG4gICAgICAgICAgICB2YXIgZURpciA9IERldG91ckNvbW1vbi52U3ViKGUyLCBlMSk7XHJcbiAgICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIobmV3IFZlY3RvclB0cihjdXJQb3MpLCBlMSk7XHJcbiAgICAgICAgICAgIHMgPSBEZXRvdXJDb21tb24uc3FyKGVEaXJbMF0pID4gRGV0b3VyQ29tbW9uLnNxcihlRGlyWzJdKSA/IGRpZmZbMF0gLyBlRGlyWzBdIDogZGlmZlsyXSAvIGVEaXJbMl07XHJcbiAgICAgICAgICAgIGN1clBvc1sxXSA9IGUxWzFdICsgZURpclsxXSAqIHM7XHJcbiAgICAgICAgICAgIGhpdC5wYXRoQ29zdCArPSBmaWx0ZXIuZ2V0Q29zdChsYXN0UG9zLCBjdXJQb3MsIHByZXZSZWYsIHByZXZUaWxlLCBwcmV2UG9seSwgY3VyUmVmLCB0aWxlLCBwb2x5LCBuZXh0UmVmLCBuZXh0VGlsZSwgbmV4dFBvbHkpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChuZXh0UmVmID09IDApIHtcclxuICAgICAgICAgICAgLy8gTm8gbmVpZ2hib3VyLCB3ZSBoaXQgYSB3YWxsLlxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgaGl0IG5vcm1hbC5cclxuICAgICAgICAgICAgdmFyIGEgPSBpcmVzdWx0LnNlZ01heDtcclxuICAgICAgICAgICAgdmFyIGIgPSBpcmVzdWx0LnNlZ01heCArIDEgPCBudiA/IGlyZXN1bHQuc2VnTWF4ICsgMSA6IDA7XHJcbiAgICAgICAgICAgIHZhciB2YSA9IGEgKiAzO1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBiICogMztcclxuICAgICAgICAgICAgZHggPSB2ZXJ0c1t2Yl0gLSB2ZXJ0c1t2YV07XHJcbiAgICAgICAgICAgIGR6ID0gdmVydHNbdmIgKyAyXSAtIHZlcnRzW3ZhICsgMl07XHJcbiAgICAgICAgICAgIGhpdC5oaXROb3JtYWxbMF0gPSBkejtcclxuICAgICAgICAgICAgaGl0LmhpdE5vcm1hbFsxXSA9IDA7XHJcbiAgICAgICAgICAgIGhpdC5oaXROb3JtYWxbMl0gPSAtZHg7XHJcbiAgICAgICAgICAgIHZOb3JtYWxpemUoaGl0LmhpdE5vcm1hbCk7XHJcbiAgICAgICAgICAgIHJldHVybiBoaXQ7XHJcbiAgICAgICAgICB9IC8vIE5vIGhpdCwgYWR2YW5jZSB0byBuZWlnaGJvdXIgcG9seWdvbi5cclxuXHJcblxyXG4gICAgICAgICAgcHJldlJlZiA9IGN1clJlZjtcclxuICAgICAgICAgIGN1clJlZiA9IG5leHRSZWY7XHJcbiAgICAgICAgICBwcmV2VGlsZSA9IHRpbGU7XHJcbiAgICAgICAgICB0aWxlID0gbmV4dFRpbGU7XHJcbiAgICAgICAgICBwcmV2UG9seSA9IHBvbHk7XHJcbiAgICAgICAgICBwb2x5ID0gbmV4dFBvbHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gaGl0O1xyXG4gICAgICB9IC8vLyBAcGFyXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQXQgbGVhc3Qgb25lIHJlc3VsdCBhcnJheSBtdXN0IGJlIHByb3ZpZGVkLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBvcmRlciBvZiB0aGUgcmVzdWx0IHNldCBpcyBmcm9tIGxlYXN0IHRvIGhpZ2hlc3QgY29zdCB0byByZWFjaCB0aGUgcG9seWdvbi5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBBIGNvbW1vbiB1c2UgY2FzZSBmb3IgdGhpcyBtZXRob2QgaXMgdG8gcGVyZm9ybSBEaWprc3RyYSBzZWFyY2hlcy4gXHJcbiAgICAgIC8vLyBDYW5kaWRhdGUgcG9seWdvbnMgYXJlIGZvdW5kIGJ5IHNlYXJjaGluZyB0aGUgZ3JhcGggYmVnaW5uaW5nIGF0IHRoZSBzdGFydCBwb2x5Z29uLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIElmIGEgcG9seWdvbiBpcyBub3QgZm91bmQgdmlhIHRoZSBncmFwaCBzZWFyY2gsIGV2ZW4gaWYgaXQgaW50ZXJzZWN0cyB0aGUgXHJcbiAgICAgIC8vLyBzZWFyY2ggY2lyY2xlLCBpdCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0IHNldC4gRm9yIGV4YW1wbGU6XHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gcG9seUEgaXMgdGhlIHN0YXJ0IHBvbHlnb24uXHJcbiAgICAgIC8vLyBwb2x5QiBzaGFyZXMgYW4gZWRnZSB3aXRoIHBvbHlBLiAoSXMgYWRqYWNlbnQuKVxyXG4gICAgICAvLy8gcG9seUMgc2hhcmVzIGFuIGVkZ2Ugd2l0aCBwb2x5QiwgYnV0IG5vdCB3aXRoIHBvbHlBXHJcbiAgICAgIC8vLyBFdmVuIGlmIHRoZSBzZWFyY2ggY2lyY2xlIG92ZXJsYXBzIHBvbHlDLCBpdCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgXHJcbiAgICAgIC8vLyByZXN1bHQgc2V0IHVubGVzcyBwb2x5QiBpcyBhbHNvIGluIHRoZSBzZXQuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIFRoZSB2YWx1ZSBvZiB0aGUgY2VudGVyIHBvUG9seSBpcyB1c2VkIGFzIHRoZSBzdGFydCBwb3NpdGlvbiBmb3IgY29zdCBcclxuICAgICAgLy8vIGNhbGN1bGF0aW9ucy4gSXQgaXMgbm90IHByb2plY3RlZCBvbnRvIHRoZSBzdXJmYWNlIG9mIHRoZSBtZXNoLCBzbyBpdHMgXHJcbiAgICAgIC8vLyB5LXZhbHVlIHdpbGwgZWZmZWN0IHRoZSBjb3N0cy5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBJbnRlcnNlY3Rpb24gdGVzdHMgb2NjdXIgaW4gMkQuIEFsbCBwb2x5Z29ucyBhbmQgdGhlIHNlYXJjaCBjaXJjbGUgYXJlIFxyXG4gICAgICAvLy8gcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lLiBTbyB0aGUgeS12YWx1ZSBvZiB0aGUgY2VudGVyIHBvUG9seSBkb2VzIG5vdCBcclxuICAgICAgLy8vIGVmZmVjdCBpbnRlcnNlY3Rpb24gdGVzdHMuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gSWYgdGhlIHJlc3VsdCBhcnJheXMgYXJlIHRvIHNtYWxsIHRvIGhvbGQgdGhlIGVudGlyZSByZXN1bHQgc2V0LCB0aGV5IHdpbGwgYmUgXHJcbiAgICAgIC8vLyBmaWxsZWQgdG8gY2FwYWNpdHkuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vQH1cclxuICAgICAgLy8vIEBuYW1lIERpamtzdHJhIFNlYXJjaCBGdW5jdGlvbnNcclxuICAgICAgLy8vIEB7IFxyXG4gICAgICAvLy8gRmluZHMgdGhlIHBvbHlnb25zIGFQb2x5IHRoZSBuYXZpZ2F0aW9uIGdyYXBoIHRoYXQgdG91Y2ggdGhlIHNwZWNpZmllZCBjaXJjbGUuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRzdGFydFJlZlx0XHRUaGUgcmVmZXJlbmNlIGlkIG9mIHRoZSBwb2x5Z29uIHdoZXJlIHRoZSBzZWFyY2ggc3RhcnRzLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0Y2VudGVyUG9zXHRcdFRoZSBjZW50ZXIgb2YgdGhlIHNlYXJjaCBjaXJjbGUuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyYWRpdXNcdFx0XHRUaGUgcmFkaXVzIG9mIHRoZSBzZWFyY2ggY2lyY2xlLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0ZmlsdGVyXHRcdFx0VGhlIHBvbHlnb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoZSBxdWVyeS5cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0cmVzdWx0UmVmXHRcdFRoZSByZWZlcmVuY2UgaWRzIG9mIHRoZSBwb2x5Z29ucyB0b3VjaGVkIGJ5IHRoZSBjaXJjbGUuIFtvcHRdXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdHJlc3VsdFBhcmVudFx0VGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBhcmVudCBwb2x5Z29ucyBmb3IgZWFjaCByZXN1bHQuIFxyXG4gICAgICAvLy8gIFx0XHRcdFx0XHRcdFx0XHRaZXJvIGlmIGEgcmVzdWx0IHBvbHlnb24gaGFzIG5vIHBhcmVudC4gW29wdF1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0cmVzdWx0Q29zdFx0XHRUaGUgc2VhcmNoIGNvc3QgZnJvbSBAcCBjZW50ZXJQb3MgdG8gdGhlIHBvbHlnb24uIFtvcHRdXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdHJlc3VsdENvdW50XHRcdFRoZSBudW1iZXIgb2YgcG9seWdvbnMgZm91bmQuIFtvcHRdXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRtYXhSZXN1bHRcdFx0VGhlIG1heGltdW0gbnVtYmVyIG9mIHBvbHlnb25zIHRoZSByZXN1bHQgYXJyYXlzIGNhbiBob2xkLlxyXG4gICAgICAvLy8gQHJldHVybnMgVGhlIHN0YXR1cyBmbGFncyBmb3IgdGhlIHF1ZXJ5LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImZpbmRQb2x5c0Fyb3VuZENpcmNsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZFBvbHlzQXJvdW5kQ2lyY2xlKHN0YXJ0UmVmLCBjZW50ZXJQb3MsIHJhZGl1cywgZmlsdGVyKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIHN0YXJ0IHJlZlwiKTtcclxuICAgICAgICB2YXIgcmVzdWx0UmVmID0gW107XHJcbiAgICAgICAgdmFyIHJlc3VsdFBhcmVudCA9IFtdO1xyXG4gICAgICAgIHZhciByZXN1bHRDb3N0ID0gW107XHJcbiAgICAgICAgdGhpcy5tX25vZGVQb29sID0gW107XHJcbiAgICAgICAgdGhpcy5tX29wZW5MaXN0ID0gW107XHJcbiAgICAgICAgdmFyIHN0YXJ0Tm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlKHN0YXJ0UmVmKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc3RhcnROb2RlLnBvcywgY2VudGVyUG9zKTtcclxuICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLmNvc3QgPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS50b3RhbCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLmlkID0gc3RhcnRSZWY7XHJcbiAgICAgICAgc3RhcnROb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX09QRU47XHJcbiAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2goc3RhcnROb2RlKTtcclxuICAgICAgICByYWRpdXNTcXIgPSBEZXRvdXJDb21tb24uc3FyKHJhZGl1cyk7XHJcblxyXG4gICAgICAgIHdoaWxlICghdGhpcy5tX29wZW5MaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICB2YXIgYmVzdE5vZGUgPSBtX29wZW5MaXN0LnBvcCgpO1xyXG4gICAgICAgICAgYmVzdE5vZGUuZmxhZ3MgJj0gfk5vZGUuRFRfTk9ERV9PUEVOO1xyXG4gICAgICAgICAgYmVzdE5vZGUuZmxhZ3MgfD0gTm9kZS5EVF9OT0RFX0NMT1NFRDsgLy8gR2V0IGxldCBhbmQgdGlsZS5cclxuICAgICAgICAgIC8vIFRoZSBBUEkgaW5wdXQgaGFzIGJlZW4gY2hla2VkIGFscmVhZHksIHNraXAgY2hlY2tpbmcgaW50ZXJuYWwgZGF0YS5cclxuXHJcbiAgICAgICAgICB2YXIgYmVzdFJlZiA9IGJlc3ROb2RlLmlkO1xyXG4gICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGJlc3RSZWYpO1xyXG4gICAgICAgICAgdmFyIGJlc3RUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICB2YXIgYmVzdFBvbHkgPSB0aWxlQW5kUG9seVsxXTsgLy8gR2V0IHBhcmVudCBsZXQgYW5kIHRpbGUuXHJcblxyXG4gICAgICAgICAgdmFyIHBhcmVudFJlZiA9IDA7XHJcbiAgICAgICAgICB2YXIgcGFyZW50VGlsZSA9IG51bGw7XHJcbiAgICAgICAgICB2YXIgcGFyZW50UG9seSA9IG51bGw7XHJcbiAgICAgICAgICBpZiAoYmVzdE5vZGUucGlkeCAhPSAwKSBwYXJlbnRSZWYgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KGJlc3ROb2RlLnBpZHgpLmlkO1xyXG5cclxuICAgICAgICAgIGlmIChwYXJlbnRSZWYgIT0gMCkge1xyXG4gICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShwYXJlbnRSZWYpO1xyXG4gICAgICAgICAgICBwYXJlbnRUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICAgIHBhcmVudFBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICByZXN1bHRSZWYucHVzaChiZXN0UmVmKTtcclxuICAgICAgICAgIHJlc3VsdFBhcmVudC5wdXNoKHBhcmVudFJlZik7XHJcbiAgICAgICAgICByZXN1bHRDb3N0LnB1c2goYmVzdE5vZGUudG90YWwpO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGkgPSBiZXN0UG9seS5maXJzdExpbms7IGkgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IGkgPSBiZXN0VGlsZS5saW5rc1tpXS5uZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gYmVzdFRpbGUubGlua3NbaV07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBsaW5rLnJlZjsgLy8gU2tpcCBpbnZhbGlkIG5laWdoYm91cnMgYW5kIGRvIG5vdCBmb2xsb3cgYmFjayB0byBwYXJlbnQuXHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyUmVmID09IDAgfHwgbmVpZ2hib3VyUmVmID09IHBhcmVudFJlZikgY29udGludWU7IC8vIEV4cGFuZCB0byBuZWlnaGJvdXJcclxuXHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIERvIG5vdCBhZHZhbmNlIGlmIHRoZSBwb2x5Z29uIGlzIGV4Y2x1ZGVkIGJ5IHRoZSBmaWx0ZXIuXHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBGaW5kIGVkZ2UgYW5kIGNhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuXHJcblxyXG4gICAgICAgICAgICB2YXIgcHAgPSB0aGlzLmdldFBvcnRhbFBvaW50czcoYmVzdFJlZiwgYmVzdFBvbHksIGJlc3RUaWxlLCBuZWlnaGJvdXJSZWYsIG5laWdoYm91clBvbHksIG5laWdoYm91clRpbGUsIDAsIDApO1xyXG4gICAgICAgICAgICB2YXIgdmEgPSBwcC5sZWZ0O1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBwcC5yaWdodDsgLy8gSWYgdGhlIGNpcmNsZSBpcyBub3QgdG91Y2hpbmcgdGhlIG5leHQgcG9seWdvbiwgc2tpcCBpdC5cclxuXHJcbiAgICAgICAgICAgIHZhciBkaXN0c2VnID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDMoY2VudGVyUG9zLCB2YSwgdmIpO1xyXG4gICAgICAgICAgICBkaXN0U3FyID0gZGlzdHNlZ1swXTtcclxuICAgICAgICAgICAgaWYgKGRpc3RTcXIgPiByYWRpdXNTcXIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyTm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDApIGNvbnRpbnVlOyAvLyBDb3N0XHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSBuZWlnaGJvdXJOb2RlLnBvcyA9IHZMZXJwMyh2YSwgdmIsIDAuNSk7XHJcbiAgICAgICAgICAgIGNvc3QgPSBmaWx0ZXIuZ2V0Q29zdChiZXN0Tm9kZS5wb3MsIG5laWdoYm91ck5vZGUucG9zLCBwYXJlbnRSZWYsIHBhcmVudFRpbGUsIHBhcmVudFBvbHksIGJlc3RSZWYsIGJlc3RUaWxlLCBiZXN0UG9seSwgbmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KTtcclxuICAgICAgICAgICAgdG90YWwgPSBiZXN0Tm9kZS50b3RhbCArIGNvc3Q7IC8vIFRoZSBub2RlIGlzIGFscmVhZHkgaW4gb3BlbiBsaXN0IGFuZCB0aGUgbmV3IHJlc3VsdCBpcyB3b3JzZSwgc2tpcC5cclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwICYmIHRvdGFsID49IG5laWdoYm91ck5vZGUudG90YWwpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmlkID0gbmVpZ2hib3VyUmVmO1xyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnBpZHggPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUlkeChiZXN0Tm9kZSk7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUudG90YWwgPSB0b3RhbDtcclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9PUEVOKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0Lm1vZGlmeShuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX09QRU47XHJcbiAgICAgICAgICAgICAgdGhpcy5tX29wZW5MaXN0LnB1c2gobmVpZ2hib3VyTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRmluZFBvbHlzQXJvdW5kUmVzdWx0KHJlc3VsdFJlZiwgcmVzdWx0UGFyZW50LCByZXN1bHRDb3N0KTtcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBvcmRlciBvZiB0aGUgcmVzdWx0IHNldCBpcyBmcm9tIGxlYXN0IHRvIGhpZ2hlc3QgY29zdC5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gQXQgbGVhc3Qgb25lIHJlc3VsdCBhcnJheSBtdXN0IGJlIHByb3ZpZGVkLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEEgY29tbW9uIHVzZSBjYXNlIGZvciB0aGlzIG1ldGhvZCBpcyB0byBwZXJmb3JtIERpamtzdHJhIHNlYXJjaGVzLiBcclxuICAgICAgLy8vIENhbmRpZGF0ZSBwb2x5Z29ucyBhcmUgZm91bmQgYnkgc2VhcmNoaW5nIHRoZSBncmFwaCBiZWdpbm5pbmcgYXQgdGhlIHN0YXJ0IFxyXG4gICAgICAvLy8gcG9seWdvbi5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gVGhlIHNhbWUgaW50ZXJzZWN0aW9uIHRlc3QgcmVzdHJpY3Rpb25zIHRoYXQgYXBwbHkgdG8gZmluZFBvbHlzQXJvdW5kQ2lyY2xlKClcclxuICAgICAgLy8vIG1ldGhvZCBhcHBseSB0byB0aGlzIG1ldGhvZC5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gVGhlIDNEIGNlbnRyb2lkIG9mIHRoZSBzZWFyY2ggcG9seWdvbiBpcyB1c2VkIGFzIHRoZSBzdGFydCBwb3NpdGlvbiBmb3IgY29zdCBcclxuICAgICAgLy8vIGNhbGN1bGF0aW9ucy5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gSW50ZXJzZWN0aW9uIHRlc3RzIG9jY3VyIGluIDJELiBBbGwgcG9seWdvbnMgYXJlIHByb2plY3RlZCBvbnRvIHRoZSBcclxuICAgICAgLy8vIHh6LXBsYW5lLiBTbyB0aGUgeS12YWx1ZXMgb2YgdGhlIHZlcnRpY2VzIGRvIG5vdCBlZmZlY3QgaW50ZXJzZWN0aW9uIHRlc3RzLlxyXG4gICAgICAvLy8gXHJcbiAgICAgIC8vLyBJZiB0aGUgcmVzdWx0IGFycmF5cyBhcmUgaXMgdG9vIHNtYWxsIHRvIGhvbGQgdGhlIGVudGlyZSByZXN1bHQgc2V0LCB0aGV5IHdpbGwgXHJcbiAgICAgIC8vLyBiZSBmaWxsZWQgdG8gY2FwYWNpdHkuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gRmluZHMgdGhlIHBvbHlnb25zIGFQb2x5IHRoZSBuYXZpYXRpb24gZ3JhcGggdGhhdCB0b3VjaCB0aGUgc3BlY2lmaWVkIGNvbnZleCBwb2x5Z29uLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0c3RhcnRSZWZcdFx0VGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiB3aGVyZSB0aGUgc2VhcmNoIHN0YXJ0cy5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdHZlcnRzXHRcdFx0VGhlIHZlcnRpY2VzIGRlc2NyaWJpbmcgdGhlIGNvbnZleCBwb2x5Z29uLiAoQ0NXKSBcclxuICAgICAgLy8vICBcdFx0XHRcdFx0XHRcdFx0Wyh4LCB5LCB6KSAqIEBwIG52ZXJ0c11cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdG52ZXJ0c1x0XHRcdFRoZSBudW1iZXIgb2YgdmVydGljZXMgaW4gdGhlIHBvbHlnb24uXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRmaWx0ZXJcdFx0XHRUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRyZXN1bHRSZWZcdFx0VGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBvbHlnb25zIHRvdWNoZWQgYnkgdGhlIHNlYXJjaCBwb2x5Z29uLiBbb3B0XVxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRyZXN1bHRQYXJlbnRcdFRoZSByZWZlcmVuY2UgaWRzIG9mIHRoZSBwYXJlbnQgcG9seWdvbnMgZm9yIGVhY2ggcmVzdWx0LiBaZXJvIGlmIGEgXHJcbiAgICAgIC8vLyAgXHRcdFx0XHRcdFx0XHRcdHJlc3VsdCBwb2x5Z29uIGhhcyBubyBwYXJlbnQuIFtvcHRdXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdHJlc3VsdENvc3RcdFx0VGhlIHNlYXJjaCBjb3N0IGZyb20gdGhlIGNlbnRyb2lkIHBvUG9seSB0byB0aGUgcG9seWdvbi4gW29wdF1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0cmVzdWx0Q291bnRcdFx0VGhlIG51bWJlciBvZiBwb2x5Z29ucyBmb3VuZC5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdG1heFJlc3VsdFx0XHRUaGUgbWF4aW11bSBudW1iZXIgb2YgcG9seWdvbnMgdGhlIHJlc3VsdCBhcnJheXMgY2FuIGhvbGQuXHJcbiAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZFBvbHlzQXJvdW5kU2hhcGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmRQb2x5c0Fyb3VuZFNoYXBlKHN0YXJ0UmVmLCB2ZXJ0cywgbnZlcnRzLCBmaWx0ZXIpIHtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgICAgIGlmIChzdGFydFJlZiA9PSAwIHx8ICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgc3RhcnQgcmVmXCIpO1xyXG4gICAgICAgIHZhciByZXN1bHRSZWYgPSBbXTtcclxuICAgICAgICB2YXIgcmVzdWx0UGFyZW50ID0gW107XHJcbiAgICAgICAgdmFyIHJlc3VsdENvc3QgPSBbXTtcclxuICAgICAgICB0aGlzLm1fbm9kZVBvb2wgPSBbXTtcclxuICAgICAgICB0aGlzLm1fb3Blbkxpc3QgPSBbXTtcclxuICAgICAgICB2YXIgY2VudGVyUG9zID0gWzAsIDAsIDBdO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG52ZXJ0czsgKytpKSB7XHJcbiAgICAgICAgICBjZW50ZXJQb3NbMF0gKz0gdmVydHNbaSAqIDNdO1xyXG4gICAgICAgICAgY2VudGVyUG9zWzFdICs9IHZlcnRzW2kgKiAzICsgMV07XHJcbiAgICAgICAgICBjZW50ZXJQb3NbMl0gKz0gdmVydHNbaSAqIDMgKyAyXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNjYWxlID0gMS4wIC8gbnZlcnRzO1xyXG4gICAgICAgIGNlbnRlclBvc1swXSAqPSBzY2FsZTtcclxuICAgICAgICBjZW50ZXJQb3NbMV0gKj0gc2NhbGU7XHJcbiAgICAgICAgY2VudGVyUG9zWzJdICo9IHNjYWxlO1xyXG4gICAgICAgIHZhciBzdGFydE5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHN0YXJ0Tm9kZS5wb3MsIGNlbnRlclBvcyk7XHJcbiAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5jb3N0ID0gMDtcclxuICAgICAgICBzdGFydE5vZGUudG90YWwgPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9PUEVOO1xyXG4gICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKHN0YXJ0Tm9kZSk7XHJcblxyXG4gICAgICAgIHdoaWxlICghdGhpcy5tX29wZW5MaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICB2YXIgYmVzdE5vZGUgPSB0aGlzLm1fb3Blbkxpc3QucG9wKCk7XHJcbiAgICAgICAgICBiZXN0Tm9kZS5mbGFncyAmPSB+Tm9kZS5EVF9OT0RFX09QRU47XHJcbiAgICAgICAgICBiZXN0Tm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEOyAvLyBHZXQgbGV0IGFuZCB0aWxlLlxyXG4gICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLlxyXG5cclxuICAgICAgICAgIHZhciBiZXN0UmVmID0gYmVzdE5vZGUuaWQ7XHJcbiAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUoYmVzdFJlZik7XHJcbiAgICAgICAgICB2YXIgYmVzdFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgIHZhciBiZXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgcGFyZW50IGxldCBhbmQgdGlsZS5cclxuXHJcbiAgICAgICAgICB2YXIgcGFyZW50UmVmID0gMDtcclxuICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gbnVsbDtcclxuICAgICAgICAgIHZhciBwYXJlbnRQb2x5ID0gbnVsbDtcclxuICAgICAgICAgIGlmIChiZXN0Tm9kZS5waWR4ICE9IDApIHBhcmVudFJlZiA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgoYmVzdE5vZGUucGlkeCkuaWQ7XHJcblxyXG4gICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBhcmVudFJlZik7XHJcbiAgICAgICAgICAgIHBhcmVudFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgICAgcGFyZW50UG9seSA9IHRpbGVBbmRQb2x5WzFdO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJlc3VsdFJlZi5wdXNoKGJlc3RSZWYpO1xyXG4gICAgICAgICAgcmVzdWx0UGFyZW50LnB1c2gocGFyZW50UmVmKTtcclxuICAgICAgICAgIHJlc3VsdENvc3QucHVzaChiZXN0Tm9kZS50b3RhbCk7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k4ID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBfaTggIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IF9pOCA9IGJlc3RUaWxlLmxpbmtzW19pOF0ubmV4dCkge1xyXG4gICAgICAgICAgICB2YXIgbGluayA9IGJlc3RUaWxlLmxpbmtzW19pOF07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJSZWYgPSBsaW5rLnJlZjsgLy8gU2tpcCBpbnZhbGlkIG5laWdoYm91cnMgYW5kIGRvIG5vdCBmb2xsb3cgYmFjayB0byBwYXJlbnQuXHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyUmVmID09IDAgfHwgbmVpZ2hib3VyUmVmID09IHBhcmVudFJlZikgY29udGludWU7IC8vIEV4cGFuZCB0byBuZWlnaGJvdXJcclxuXHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIERvIG5vdCBhZHZhbmNlIGlmIHRoZSBwb2x5Z29uIGlzIGV4Y2x1ZGVkIGJ5IHRoZSBmaWx0ZXIuXHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpbHRlci5wYXNzRmlsdGVyKG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSkpIGNvbnRpbnVlOyAvLyBGaW5kIGVkZ2UgYW5kIGNhbGMgZGlzdGFuY2UgdG8gdGhlIGVkZ2UuXHJcblxyXG4gICAgICAgICAgICB2YXIgcHAgPSB0aGlzLmdldFBvcnRhbFBvaW50czcoYmVzdFJlZiwgYmVzdFBvbHksIGJlc3RUaWxlLCBuZWlnaGJvdXJSZWYsIG5laWdoYm91clBvbHksIG5laWdoYm91clRpbGUsIDAsIDApO1xyXG4gICAgICAgICAgICB2YXIgdmEgPSBwcC5sZWZ0O1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBwcC5yaWdodDsgLy8gSWYgdGhlIGxldCBpcyBub3QgdG91Y2hpbmcgdGhlIGVkZ2UgdG8gdGhlIG5leHQgcG9seWdvbiwgc2tpcCB0aGUgY29ubmVjdGlvbiBpdC5cclxuXHJcbiAgICAgICAgICAgIHZhciBpciA9IERldG91ckNvbW1vbi5pbnRlcnNlY3RTZWdtZW50UG9seTJEKHZhLCB2YiwgdmVydHMsIG52ZXJ0cyk7XHJcbiAgICAgICAgICAgIGlmICghaXIuaW50ZXJzZWN0cykgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmIChpci50bWluID4gMS4wIHx8IGlyLnRtYXggPCAwLjApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyTm9kZSA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDApIGNvbnRpbnVlOyAvLyBDb3N0XHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyTm9kZS5mbGFncyA9PSAwKSBuZWlnaGJvdXJOb2RlLnBvcyA9IERldG91ckNvbW1vbi52TGVycDModmEsIHZiLCAwLjUpO1xyXG4gICAgICAgICAgICBjb3N0ID0gZmlsdGVyLmdldENvc3QoYmVzdE5vZGUucG9zLCBuZWlnaGJvdXJOb2RlLnBvcywgcGFyZW50UmVmLCBwYXJlbnRUaWxlLCBwYXJlbnRQb2x5LCBiZXN0UmVmLCBiZXN0VGlsZSwgYmVzdFBvbHksIG5laWdoYm91clJlZiwgbmVpZ2hib3VyVGlsZSwgbmVpZ2hib3VyUG9seSk7XHJcbiAgICAgICAgICAgIHRvdGFsID0gYmVzdE5vZGUudG90YWwgKyBjb3N0OyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsIHNraXAuXHJcblxyXG4gICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCAmJiB0b3RhbCA+PSBuZWlnaGJvdXJOb2RlLnRvdGFsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5pZCA9IG5laWdoYm91clJlZjtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpO1xyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gdG90YWw7XHJcblxyXG4gICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5tb2RpZnkobmVpZ2hib3VyTm9kZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9PUEVOO1xyXG4gICAgICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKG5laWdoYm91ck5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEZpbmRQb2x5c0Fyb3VuZFJlc3VsdChyZXN1bHRSZWYsIHJlc3VsdFBhcmVudCwgcmVzdWx0Q29zdCk7XHJcbiAgICAgIH0gLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGlzIG1ldGhvZCBpcyBvcHRpbWl6ZWQgZm9yIGEgc21hbGwgc2VhcmNoIHJhZGl1cyBhbmQgc21hbGwgbnVtYmVyIG9mIHJlc3VsdCBcclxuICAgICAgLy8vIHBvbHlnb25zLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIENhbmRpZGF0ZSBwb2x5Z29ucyBhcmUgZm91bmQgYnkgc2VhcmNoaW5nIHRoZSBuYXZpZ2F0aW9uIGdyYXBoIGJlZ2lubmluZyBhdCBcclxuICAgICAgLy8vIHRoZSBzdGFydCBwb2x5Z29uLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBzYW1lIGludGVyc2VjdGlvbiB0ZXN0IHJlc3RyaWN0aW9ucyB0aGF0IGFwcGx5IHRvIHRoZSBmaW5kUG9seXNBcm91bmRDaXJjbGUgXHJcbiAgICAgIC8vLyBtZWh0b2QgYXBwbGllcyB0byB0aGlzIG1ldGhvZC5cclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwb1BvbHkgaXMgdXNlZCBhcyB0aGUgc3RhcnQgcG9Qb2x5IGZvciBjb3N0IGNhbGN1bGF0aW9ucy4gXHJcbiAgICAgIC8vLyBJdCBpcyBub3QgcHJvamVjdGVkIG9udG8gdGhlIHN1cmZhY2Ugb2YgdGhlIG1lc2gsIHNvIGl0cyB5LXZhbHVlIHdpbGwgZWZmZWN0IFxyXG4gICAgICAvLy8gdGhlIGNvc3RzLlxyXG4gICAgICAvLy8gXHJcbiAgICAgIC8vLyBJbnRlcnNlY3Rpb24gdGVzdHMgb2NjdXIgaW4gMkQuIEFsbCBwb2x5Z29ucyBhbmQgdGhlIHNlYXJjaCBjaXJjbGUgYXJlIFxyXG4gICAgICAvLy8gcHJvamVjdGVkIG9udG8gdGhlIHh6LXBsYW5lLiBTbyB0aGUgeS12YWx1ZSBvZiB0aGUgY2VudGVyIHBvUG9seSBkb2VzIG5vdCBcclxuICAgICAgLy8vIGVmZmVjdCBpbnRlcnNlY3Rpb24gdGVzdHMuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIElmIHRoZSByZXN1bHQgYXJyYXlzIGFyZSBpcyB0b28gc21hbGwgdG8gaG9sZCB0aGUgZW50aXJlIHJlc3VsdCBzZXQsIHRoZXkgd2lsbCBcclxuICAgICAgLy8vIGJlIGZpbGxlZCB0byBjYXBhY2l0eS5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gRmluZHMgdGhlIG5vbi1vdmVybGFwcGluZyBuYXZpZ2F0aW9uIHBvbHlnb25zIGluIHRoZSBsb2NhbCBuZWlnaGJvdXJob29kIGFyb3VuZCB0aGUgY2VudGVyIHBvc2l0aW9uLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0c3RhcnRSZWZcdFx0VGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiB3aGVyZSB0aGUgc2VhcmNoIHN0YXJ0cy5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGNlbnRlclBvc1x0XHRUaGUgY2VudGVyIG9mIHRoZSBxdWVyeSBjaXJjbGUuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyYWRpdXNcdFx0XHRUaGUgcmFkaXVzIG9mIHRoZSBxdWVyeSBjaXJjbGUuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRmaWx0ZXJcdFx0XHRUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRyZXN1bHRSZWZcdFx0VGhlIHJlZmVyZW5jZSBpZHMgb2YgdGhlIHBvbHlnb25zIHRvdWNoZWQgYnkgdGhlIGNpcmNsZS5cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0cmVzdWx0UGFyZW50XHRUaGUgcmVmZXJlbmNlIGlkcyBvZiB0aGUgcGFyZW50IHBvbHlnb25zIGZvciBlYWNoIHJlc3VsdC4gXHJcbiAgICAgIC8vLyAgXHRcdFx0XHRcdFx0XHRcdFplcm8gaWYgYSByZXN1bHQgcG9seWdvbiBoYXMgbm8gcGFyZW50LiBbb3B0XVxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRyZXN1bHRDb3VudFx0XHRUaGUgbnVtYmVyIG9mIHBvbHlnb25zIGZvdW5kLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0bWF4UmVzdWx0XHRcdFRoZSBtYXhpbXVtIG51bWJlciBvZiBwb2x5Z29ucyB0aGUgcmVzdWx0IGFycmF5cyBjYW4gaG9sZC5cclxuICAgICAgLy8vIEByZXR1cm5zIFRoZSBzdGF0dXMgZmxhZ3MgZm9yIHRoZSBxdWVyeS5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJmaW5kTG9jYWxOZWlnaGJvdXJob29kXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kTG9jYWxOZWlnaGJvdXJob29kKHN0YXJ0UmVmLCBjZW50ZXJQb3MsIHJhZGl1cywgZmlsdGVyKSB7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgaW5wdXRcclxuICAgICAgICBpZiAoc3RhcnRSZWYgPT0gMCB8fCAhdGhpcy5tX25hdi5pc1ZhbGlkUG9seVJlZihzdGFydFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIHN0YXJ0IHJlZlwiKTtcclxuICAgICAgICB2YXIgcmVzdWx0UmVmID0gW107XHJcbiAgICAgICAgdmFyIHJlc3VsdFBhcmVudCA9IFtdO1xyXG4gICAgICAgIHRoaXMubV90aW55Tm9kZVBvb2wgPSBuZXcgTm9kZVBvb2woKTtcclxuICAgICAgICB2YXIgc3RhcnROb2RlID0gdGhpcy5tX3RpbnlOb2RlUG9vbC5nZXROb2RlKHN0YXJ0UmVmKTtcclxuICAgICAgICBzdGFydE5vZGUucGlkeCA9IDA7XHJcbiAgICAgICAgc3RhcnROb2RlLmlkID0gc3RhcnRSZWY7XHJcbiAgICAgICAgc3RhcnROb2RlLmZsYWdzID0gTm9kZS5EVF9OT0RFX0NMT1NFRDtcclxuICAgICAgICB2YXIgc3RhY2sgPSBbXTtcclxuICAgICAgICBzdGFjay5wdXNoKHN0YXJ0Tm9kZSk7XHJcbiAgICAgICAgcmVzdWx0UmVmLnB1c2goc3RhcnROb2RlLmlkKTtcclxuICAgICAgICByZXN1bHRQYXJlbnQucHVzaCgwKTtcclxuICAgICAgICB2YXIgcmFkaXVzU3FyID0gRGV0b3VyQ29tbW9uLnNxcihyYWRpdXMpO1xyXG4gICAgICAgIHZhciBwYSA9IG5ldyBBcnJheSh0aGlzLm1fbmF2LmdldE1heFZlcnRzUGVyUG9seSgpICogMyk7XHJcbiAgICAgICAgdmFyIHBiID0gbmV3IEFycmF5KHRoaXMubV9uYXYuZ2V0TWF4VmVydHNQZXJQb2x5KCkgKiAzKTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCFzdGFjay5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgLy8gUG9wIGZyb250LlxyXG4gICAgICAgICAgdmFyIGN1ck5vZGUgPSBzdGFjay5wb3AoKTsgLy8gR2V0IGxldCBhbmQgdGlsZS5cclxuICAgICAgICAgIC8vIFRoZSBBUEkgaW5wdXQgaGFzIGJlZW4gY2hla2VkIGFscmVhZHksIHNraXAgY2hlY2tpbmcgaW50ZXJuYWwgZGF0YS5cclxuXHJcbiAgICAgICAgICB2YXIgY3VyUmVmID0gY3VyTm9kZS5pZDtcclxuICAgICAgICAgIHZhciB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShjdXJSZWYpO1xyXG4gICAgICAgICAgdmFyIGN1clRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgIHZhciBjdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IGN1clBvbHkuZmlyc3RMaW5rOyBpICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBpID0gY3VyVGlsZS5saW5rc1tpXS5uZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBsaW5rID0gY3VyVGlsZS5saW5rc1tpXTtcclxuICAgICAgICAgICAgdmFyIG5laWdoYm91clJlZiA9IGxpbmsucmVmOyAvLyBTa2lwIGludmFsaWQgbmVpZ2hib3Vycy5cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gMCkgY29udGludWU7IC8vIFNraXAgaWYgY2Fubm90IGFsbG9jYSBtb3JlIG5vZGVzLlxyXG5cclxuICAgICAgICAgICAgdmFyIG5laWdoYm91ck5vZGUgPSB0aGlzLm1fdGlueU5vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmKTtcclxuICAgICAgICAgICAgaWYgKG5laWdoYm91ck5vZGUgPT0gbnVsbCkgY29udGludWU7IC8vIFNraXAgdmlzaXRlZC5cclxuXHJcbiAgICAgICAgICAgIGlmICgobmVpZ2hib3VyTm9kZS5mbGFncyAmIE5vZGUuRFRfTk9ERV9DTE9TRUQpICE9IDApIGNvbnRpbnVlOyAvLyBFeHBhbmQgdG8gbmVpZ2hib3VyXHJcblxyXG4gICAgICAgICAgICB0aWxlQW5kUG9seSA9IHRoaXMubV9uYXYuZ2V0VGlsZUFuZFBvbHlCeVJlZlVuc2FmZShuZWlnaGJvdXJSZWYpO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyVGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyUG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBTa2lwIG9mZi1tZXNoIGNvbm5lY3Rpb25zLlxyXG5cclxuICAgICAgICAgICAgaWYgKG5laWdoYm91clBvbHkuZ2V0VHlwZSgpID09IFBvbHkuRFRfUE9MWVRZUEVfT0ZGTUVTSF9DT05ORUNUSU9OKSBjb250aW51ZTsgLy8gRG8gbm90IGFkdmFuY2UgaWYgdGhlIHBvbHlnb24gaXMgZXhjbHVkZWQgYnkgdGhlIGZpbHRlci5cclxuXHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KSkgY29udGludWU7IC8vIEZpbmQgZWRnZSBhbmQgY2FsYyBkaXN0YW5jZSB0byB0aGUgZWRnZS5cclxuXHJcbiAgICAgICAgICAgIHZhciBwcCA9IHRoaXMuZ2V0UG9ydGFsUG9pbnRzNyhjdXJSZWYsIGN1clBvbHksIGN1clRpbGUsIG5laWdoYm91clJlZiwgbmVpZ2hib3VyUG9seSwgbmVpZ2hib3VyVGlsZSwgMCwgMCk7XHJcbiAgICAgICAgICAgIHZhciB2YSA9IHBwLmxlZnQ7XHJcbiAgICAgICAgICAgIHZhciB2YiA9IHBwLnJpZ2h0OyAvLyBJZiB0aGUgY2lyY2xlIGlzIG5vdCB0b3VjaGluZyB0aGUgbmV4dCBwb2x5Z29uLCBza2lwIGl0LlxyXG5cclxuICAgICAgICAgICAgdmFyIGRpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJEMyhjZW50ZXJQb3MsIHZhLCB2Yik7XHJcbiAgICAgICAgICAgIHZhciBfZGlzdFNxcjMgPSBkaXN0c2VnWzBdO1xyXG4gICAgICAgICAgICBpZiAoX2Rpc3RTcXIzID4gcmFkaXVzU3FyKSBjb250aW51ZTsgLy8gTWFyayBub2RlIHZpc2l0ZWQsIHRoaXMgaXMgZG9uZSBiZWZvcmUgdGhlIG92ZXJsYXAgdGVzdCBzbyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHdlIHdpbGwgbm90IHZpc2l0IHRoZSBsZXQgYWdhaW4gaWYgdGhlIHRlc3QgZmFpbHMuXHJcblxyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLmZsYWdzIHw9IE5vZGUuRFRfTk9ERV9DTE9TRUQ7XHJcbiAgICAgICAgICAgIG5laWdoYm91ck5vZGUucGlkeCA9IHRoaXMubV90aW55Tm9kZVBvb2wuZ2V0Tm9kZUlkeChjdXJOb2RlKTsgLy8gQ2hlY2sgdGhhdCB0aGUgcG9seWdvbiBkb2VzIG5vdCBjb2xsaWRlIHdpdGggZXhpc3RpbmcgcG9seWdvbnMuXHJcbiAgICAgICAgICAgIC8vIENvbGxlY3QgdmVydGljZXMgb2YgdGhlIG5laWdoYm91ciBwb2x5LlxyXG5cclxuICAgICAgICAgICAgdmFyIG5wYSA9IG5laWdoYm91clBvbHkudmVydENvdW50O1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBucGE7ICsraykge1xyXG4gICAgICAgICAgICAgIGFycmF5Y29weSQ0KG5laWdoYm91clRpbGUuZGF0YS52ZXJ0cywgbmVpZ2hib3VyUG9seS52ZXJ0c1trXSAqIDMsIHBhLCBrICogMywgMyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBvdmVybGFwID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlc3VsdFJlZi5sZW5ndGg7ICsraikge1xyXG4gICAgICAgICAgICAgIHZhciBwYXN0UmVmID0gcmVzdWx0UmVmW2pdOyAvLyBDb25uZWN0ZWQgcG9seXMgZG8gbm90IG92ZXJsYXAuXHJcblxyXG4gICAgICAgICAgICAgIHZhciBjb25uZWN0ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgX2syID0gY3VyUG9seS5maXJzdExpbms7IF9rMiAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgX2syID0gY3VyVGlsZS5saW5rc1tfazJdLm5leHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJUaWxlLmxpbmtzW19rMl0ucmVmID09IHBhc3RSZWYpIHtcclxuICAgICAgICAgICAgICAgICAgY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAoY29ubmVjdGVkKSBjb250aW51ZTsgLy8gUG90ZW50aWFsbHkgb3ZlcmxhcHBpbmcuXHJcblxyXG4gICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBhc3RSZWYpO1xyXG4gICAgICAgICAgICAgIHZhciBwYXN0VGlsZSA9IHRpbGVBbmRQb2x5WzBdO1xyXG4gICAgICAgICAgICAgIHZhciBwYXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgdmVydGljZXMgYW5kIHRlc3Qgb3ZlcmxhcFxyXG5cclxuICAgICAgICAgICAgICB2YXIgbnBiID0gcGFzdFBvbHkudmVydENvdW50O1xyXG5cclxuICAgICAgICAgICAgICBmb3IgKHZhciBfazMgPSAwOyBfazMgPCBucGI7ICsrX2szKSB7XHJcbiAgICAgICAgICAgICAgICBhcnJheWNvcHkkNChwYXN0VGlsZS5kYXRhLnZlcnRzLCBwYXN0UG9seS52ZXJ0c1tfazNdICogMywgcGIsIF9rMyAqIDMsIDMpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi5vdmVybGFwUG9seVBvbHkyRChwYSwgbnBhLCBwYiwgbnBiKSkge1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxhcCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChvdmVybGFwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgcmVzdWx0UmVmLnB1c2gobmVpZ2hib3VyUmVmKTtcclxuICAgICAgICAgICAgcmVzdWx0UGFyZW50LnB1c2goY3VyUmVmKTtcclxuICAgICAgICAgICAgc3RhY2sucHVzaChuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRmluZExvY2FsTmVpZ2hib3VyaG9vZFJlc3VsdChyZXN1bHRSZWYsIHJlc3VsdFBhcmVudCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImluc2VydEludGVydmFsXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnNlcnRJbnRlcnZhbChpbnRzLCB0bWluLCB0bWF4LCByZWYpIHtcclxuICAgICAgICAvLyBGaW5kIGluc2VydGlvbiBwb2ludC5cclxuICAgICAgICB2YXIgaWR4ID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGlkeCA8IGludHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBpZiAodG1heCA8PSBpbnRzW2lkeF0udG1pbikgYnJlYWs7XHJcbiAgICAgICAgICBpZHgrKztcclxuICAgICAgICB9IC8vIFN0b3JlXHJcblxyXG5cclxuICAgICAgICBpbnRzLmFkZChpZHgsIG5ldyBTZWdJbnRlcnZhbChyZWYsIHRtaW4sIHRtYXgpKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwib3JcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9yKHYxLCB2Mikge1xyXG4gICAgICAgIHZhciBoaSA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgdmFyIGxvdyA9IDB4N2ZmZmZmZmY7XHJcbiAgICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpO1xyXG4gICAgICAgIHZhciBoaTIgPSB+fih2MiAvIGhpKTtcclxuICAgICAgICB2YXIgbG93MSA9IHYxICYgbG93O1xyXG4gICAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7XHJcbiAgICAgICAgdmFyIGggPSBoaTEgfCBoaTI7XHJcbiAgICAgICAgdmFyIGwgPSBsb3cxIHwgbG93MjtcclxuICAgICAgICByZXR1cm4gaCAqIGhpICsgbDtcclxuICAgICAgfSAvLy8gQHBhclxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIElmIHRoZSBAcCBzZWdtZW50UmVmcyBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQsIHRoZW4gYWxsIHBvbHlnb24gc2VnbWVudHMgd2lsbCBiZSByZXR1cm5lZC4gXHJcbiAgICAgIC8vLyBPdGhlcndpc2Ugb25seSB0aGUgd2FsbCBzZWdtZW50cyBhcmUgcmV0dXJuZWQuXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIEEgc2VnbWVudCB0aGF0IGlzIG5vcm1hbGx5IGEgcG9ydGFsIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdCBzZXQgYXMgYSBcclxuICAgICAgLy8vIHdhbGwgaWYgdGhlIEBwIGZpbHRlciByZXN1bHRzIGluIHRoZSBuZWlnaGJvciBwb2x5Z29uIGJlY29vbW1pbmcgaW1wYXNzYWJsZS5cclxuICAgICAgLy8vIFxyXG4gICAgICAvLy8gVGhlIEBwIHNlZ21lbnRWZXJ0cyBhbmQgQHAgc2VnbWVudFJlZnMgYnVmZmVycyBzaG91bGQgbm9ybWFsbHkgYmUgc2l6ZWQgZm9yIHRoZSBcclxuICAgICAgLy8vIG1heGltdW0gc2VnbWVudHMgcGVyIHBvbHlnb24gb2YgdGhlIHNvdXJjZSBuYXZpZ2F0aW9uIG1lc2guXHJcbiAgICAgIC8vLyBcclxuICAgICAgLy8vIFJldHVybnMgdGhlIHNlZ21lbnRzIGZvciB0aGUgc3BlY2lmaWVkIHBvbHlnb24sIG9wdGlvbmFsbHkgaW5jbHVkaW5nIHBvcnRhbHMuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyZWZcdFx0XHRcdFRoZSByZWZlcmVuY2UgaWQgb2YgdGhlIHBvbHlnb24uXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRmaWx0ZXJcdFx0XHRUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRzZWdtZW50VmVydHNcdFRoZSBzZWdtZW50cy4gWyhheCwgYXksIGF6LCBieCwgYnksIGJ6KSAqIHNlZ21lbnRDb3VudF1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0c2VnbWVudFJlZnNcdFx0VGhlIHJlZmVyZW5jZSBpZHMgb2YgZWFjaCBzZWdtZW50J3MgbmVpZ2hib3IgcG9seWdvbi4gXHJcbiAgICAgIC8vLyAgXHRcdFx0XHRcdFx0XHRcdE9yIHplcm8gaWYgdGhlIHNlZ21lbnQgaXMgYSB3YWxsLiBbb3B0XSBbKHBhcmVudFJlZikgKiBAcCBzZWdtZW50Q291bnRdIFxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRzZWdtZW50Q291bnRcdFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgcmV0dXJuZWQuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRtYXhTZWdtZW50c1x0XHRUaGUgbWF4aW11bSBudW1iZXIgb2Ygc2VnbWVudHMgdGhlIHJlc3VsdCBhcnJheXMgY2FuIGhvbGQuXHJcbiAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UG9seVdhbGxTZWdtZW50c1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UG9seVdhbGxTZWdtZW50cyhyZWYsIHN0b3JlUG9ydGFscywgZmlsdGVyKSB7XHJcbiAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHJlZik7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICB2YXIgcG9seSA9IHRpbGVBbmRQb2x5WzFdO1xyXG4gICAgICAgIHZhciBzZWdtZW50UmVmcyA9IFtdO1xyXG4gICAgICAgIHZhciBzZWdtZW50VmVydHMgPSBbXTtcclxuICAgICAgICB2YXIgaW50cyA9IG5ldyBBcnJheSgxNik7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gcG9seS52ZXJ0Q291bnQgLSAxOyBpIDwgcG9seS52ZXJ0Q291bnQ7IGogPSBpKyspIHtcclxuICAgICAgICAgIC8vIFNraXAgbm9uLXNvbGlkIGVkZ2VzLlxyXG4gICAgICAgICAgaW50cyA9IFtdO1xyXG5cclxuICAgICAgICAgIGlmICgocG9seS5uZWlzW2pdICYgTmF2TWVzaC5EVF9FWFRfTElOSykgIT0gMCkge1xyXG4gICAgICAgICAgICAvLyBUaWxlIGJvcmRlci5cclxuICAgICAgICAgICAgZm9yICh2YXIgayA9IHBvbHkuZmlyc3RMaW5rOyBrICE9IE5hdk1lc2guRFRfTlVMTF9MSU5LOyBrID0gdGlsZS5saW5rc1trXS5uZXh0KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGxpbmsgPSB0aWxlLmxpbmtzW2tdO1xyXG5cclxuICAgICAgICAgICAgICBpZiAobGluay5lZGdlID09IGopIHtcclxuICAgICAgICAgICAgICAgIGlmIChsaW5rLnJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKGxpbmsucmVmKTtcclxuICAgICAgICAgICAgICAgICAgdmFyIG5laVRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgICAgICAgICAgdmFyIG5laVBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIucGFzc0ZpbHRlcihsaW5rLnJlZiwgbmVpVGlsZSwgbmVpUG9seSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRJbnRlcnZhbChpbnRzLCBsaW5rLmJtaW4sIGxpbmsuYm1heCwgbGluay5yZWYpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbnRlcm5hbCBlZGdlXHJcbiAgICAgICAgICAgIHZhciBuZWlSZWYgPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHBvbHkubmVpc1tqXSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGlkeCA9IHBvbHkubmVpc1tqXSAtIDE7XHJcbiAgICAgICAgICAgICAgbmVpUmVmID0gdGhpcy5vcih0aGlzLm1fbmF2LmdldFBvbHlSZWZCYXNlKHRpbGUpLCBpZHgpO1xyXG4gICAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobmVpUmVmLCB0aWxlLCB0aWxlLmRhdGEucG9seXNbaWR4XSkpIG5laVJlZiA9IDA7XHJcbiAgICAgICAgICAgIH0gLy8gSWYgdGhlIGVkZ2UgbGVhZHMgdG8gYW5vdGhlciBwb2x5Z29uIGFuZCBwb3J0YWxzIGFyZSBub3Qgc3RvcmVkLCBza2lwLlxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWlSZWYgIT0gMCAmJiAhc3RvcmVQb3J0YWxzKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdmoyID0gcG9seS52ZXJ0c1tqXSAqIDM7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3ZpMiA9IHBvbHkudmVydHNbaV0gKiAzO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlZyA9IG5ldyBBcnJheSg2KTtcclxuICAgICAgICAgICAgYXJyYXljb3B5JDQodGlsZS5kYXRhLnZlcnRzLCBfdmoyLCBzZWcsIDAsIDMpO1xyXG4gICAgICAgICAgICBhcnJheWNvcHkkNCh0aWxlLmRhdGEudmVydHMsIF92aTIsIHNlZywgMywgMyk7XHJcbiAgICAgICAgICAgIHNlZ21lbnRWZXJ0cy5wdXNoKHNlZyk7XHJcbiAgICAgICAgICAgIHNlZ21lbnRSZWZzLnB1c2gobmVpUmVmKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9IC8vIEFkZCBzZW50aW5lbHNcclxuXHJcblxyXG4gICAgICAgICAgaW5zZXJ0SW50ZXJ2YWwoaW50cywgLTEsIDAsIDApO1xyXG4gICAgICAgICAgaW5zZXJ0SW50ZXJ2YWwoaW50cywgMjU1LCAyNTYsIDApOyAvLyBTdG9yZSBzZWdtZW50cy5cclxuXHJcbiAgICAgICAgICB2YXIgdmogPSBwb2x5LnZlcnRzW2pdICogMztcclxuICAgICAgICAgIHZhciB2aSA9IHBvbHkudmVydHNbaV0gKiAzO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIF9rNCA9IDE7IF9rNCA8IGludHMubGVuZ3RoOyArK19rNCkge1xyXG4gICAgICAgICAgICAvLyBQb3J0YWwgc2VnbWVudC5cclxuICAgICAgICAgICAgaWYgKHN0b3JlUG9ydGFscyAmJiBpbnRzW19rNF0ucmVmICE9IDApIHtcclxuICAgICAgICAgICAgICB0bWluID0gaW50c1tfazRdLnRtaW4gLyAyNTUuMDtcclxuICAgICAgICAgICAgICB0bWF4ID0gaW50c1tfazRdLnRtYXggLyAyNTUuMDtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIF9zZWcgPSBuZXcgQXJyYXkoNik7XHJcblxyXG4gICAgICAgICAgICAgIGFycmF5Y29weSQ0KHZMZXJwNCh0aWxlLmRhdGEudmVydHMsIHZqLCB2aSwgdG1pbiksIDAsIF9zZWcsIDAsIDMpO1xyXG4gICAgICAgICAgICAgIGFycmF5Y29weSQ0KHZMZXJwNCh0aWxlLmRhdGEudmVydHMsIHZqLCB2aSwgdG1heCksIDAsIF9zZWcsIDMsIDMpO1xyXG4gICAgICAgICAgICAgIHNlZ21lbnRWZXJ0cy5wdXNoKF9zZWcpO1xyXG4gICAgICAgICAgICAgIHNlZ21lbnRSZWZzLnB1c2goaW50c1tfazRdLnJlZik7XHJcbiAgICAgICAgICAgIH0gLy8gV2FsbCBzZWdtZW50LlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBpbWluID0gaW50c1tfazQgLSAxXS50bWF4O1xyXG4gICAgICAgICAgICB2YXIgaW1heCA9IGludHNbX2s0XS50bWluO1xyXG5cclxuICAgICAgICAgICAgaWYgKGltaW4gIT0gaW1heCkge1xyXG4gICAgICAgICAgICAgIHRtaW4gPSBpbWluIC8gMjU1LjA7XHJcbiAgICAgICAgICAgICAgdG1heCA9IGltYXggLyAyNTUuMDtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIF9zZWcyID0gbmV3IEFycmF5KDYpO1xyXG5cclxuICAgICAgICAgICAgICBhcnJheWNvcHkkNCh2TGVycDQodGlsZS5kYXRhLnZlcnRzLCB2aiwgdmksIHRtaW4pLCAwLCBfc2VnMiwgMCwgMyk7XHJcbiAgICAgICAgICAgICAgYXJyYXljb3B5JDQodkxlcnA0KHRpbGUuZGF0YS52ZXJ0cywgdmosIHZpLCB0bWF4KSwgMCwgX3NlZzIsIDMsIDMpO1xyXG4gICAgICAgICAgICAgIHNlZ21lbnRWZXJ0cy5wdXNoKF9zZWcyKTtcclxuICAgICAgICAgICAgICBzZWdtZW50UmVmcy5wdXNoKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEdldFBvbHlXYWxsU2VnbWVudHNSZXN1bHQoc2VnbWVudFZlcnRzLCBzZWdtZW50UmVmcyk7XHJcbiAgICAgIH0gLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBAcCBoaXRQb3MgaXMgbm90IGFkanVzdGVkIHVzaW5nIHRoZSBoZWlnaHQgZGV0YWlsIGRhdGEuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gQHAgaGl0RGlzdCB3aWxsIGVxdWFsIHRoZSBzZWFyY2ggcmFkaXVzIGlmIHRoZXJlIGlzIG5vIHdhbGwgd2l0aGluIHRoZSBcclxuICAgICAgLy8vIHJhZGl1cy4gSW4gdGhpcyBjYXNlIHRoZSB2YWx1ZXMgb2YgQHAgaGl0UG9zIGFuZCBAcCBoaXROb3JtYWwgYXJlXHJcbiAgICAgIC8vLyB1bmRlZmluZWQuXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIG5vcm1hbCB3aWxsIGJlY29tZSB1bnByZWRpY2FibGUgaWYgQHAgaGl0RGlzdCBpcyBhIHZlcnkgc21hbGwgbnVtYmVyLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIEZpbmRzIHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBzcGVjaWZpZWQgcG9zaXRpb24gdG8gdGhlIG5lYXJlc3QgcG9seWdvbiB3YWxsLlxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0c3RhcnRSZWZcdFx0VGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiBjb250YWluaW5nIEBwIGNlbnRlclBvcy5cclxuICAgICAgLy8vICBAcGFyYW1baW5dXHRcdGNlbnRlclBvc1x0XHRUaGUgY2VudGVyIG9mIHRoZSBzZWFyY2ggY2lyY2xlLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gIEBwYXJhbVtpbl1cdFx0bWF4UmFkaXVzXHRcdFRoZSByYWRpdXMgb2YgdGhlIHNlYXJjaCBjaXJjbGUuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRmaWx0ZXJcdFx0XHRUaGUgcG9seWdvbiBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5LlxyXG4gICAgICAvLy8gIEBwYXJhbVtvdXRdXHRoaXREaXN0XHRcdFx0VGhlIGRpc3RhbmNlIHRvIHRoZSBuZWFyZXN0IHdhbGwgZnJvbSBAcCBjZW50ZXJQb3MuXHJcbiAgICAgIC8vLyAgQHBhcmFtW291dF1cdGhpdFBvc1x0XHRcdFRoZSBuZWFyZXN0IHBvc2l0aW9uIG9uIHRoZSB3YWxsIHRoYXQgd2FzIGhpdC4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vICBAcGFyYW1bb3V0XVx0aGl0Tm9ybWFsXHRcdFRoZSBub3JtYWxpemVkIHJheSBmb3JtZWQgZnJvbSB0aGUgd2FsbCBwb1BvbHkgdG8gdGhlIFxyXG4gICAgICAvLy8gIFx0XHRcdFx0XHRcdFx0XHRzb3VyY2UgcG9pbnQuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcmV0dXJucyBUaGUgc3RhdHVzIGZsYWdzIGZvciB0aGUgcXVlcnkuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZmluZERpc3RhbmNlVG9XYWxsXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaW5kRGlzdGFuY2VUb1dhbGwoc3RhcnRSZWYsIGNlbnRlclBvcywgbWF4UmFkaXVzLCBmaWx0ZXIpIHtcclxuICAgICAgICAvLyBWYWxpZGF0ZSBpbnB1dFxyXG4gICAgICAgIGlmIChzdGFydFJlZiA9PSAwIHx8ICF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKHN0YXJ0UmVmKSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgc3RhcnQgcmVmXCIpO1xyXG4gICAgICAgIHRoaXMubV9ub2RlUG9vbCA9IFtdO1xyXG4gICAgICAgIHRoaXMubV9vcGVuTGlzdCA9IFtdO1xyXG4gICAgICAgIHZhciBzdGFydE5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZShzdGFydFJlZik7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHN0YXJ0Tm9kZS5wb3MsIGNlbnRlclBvcyk7XHJcbiAgICAgICAgc3RhcnROb2RlLnBpZHggPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5jb3N0ID0gMDtcclxuICAgICAgICBzdGFydE5vZGUudG90YWwgPSAwO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5pZCA9IHN0YXJ0UmVmO1xyXG4gICAgICAgIHN0YXJ0Tm9kZS5mbGFncyA9IE5vZGUuRFRfTk9ERV9PUEVOO1xyXG4gICAgICAgIHRoaXMubV9vcGVuTGlzdC5wdXNoKHN0YXJ0Tm9kZSk7XHJcbiAgICAgICAgcmFkaXVzU3FyID0gRGV0b3VyQ29tbW9uLnNxcihtYXhSYWRpdXMpO1xyXG4gICAgICAgIHZhciBoaXRQb3MgPSBuZXcgQXJyYXkoMyk7XHJcbiAgICAgICAgdmFyIGJlc3R2aiA9IG51bGw7XHJcbiAgICAgICAgdmFyIGJlc3R2aSA9IG51bGw7XHJcblxyXG4gICAgICAgIHdoaWxlICghdGhpcy5tX29wZW5MaXN0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICB2YXIgYmVzdE5vZGUgPSB0aGlzLm1fb3Blbkxpc3QucG9wKCk7XHJcbiAgICAgICAgICBiZXN0Tm9kZS5mbGFncyAmPSB+Tm9kZS5EVF9OT0RFX09QRU47XHJcbiAgICAgICAgICBiZXN0Tm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfQ0xPU0VEOyAvLyBHZXQgbGV0IGFuZCB0aWxlLlxyXG4gICAgICAgICAgLy8gVGhlIEFQSSBpbnB1dCBoYXMgYmVlbiBjaGVrZWQgYWxyZWFkeSwgc2tpcCBjaGVja2luZyBpbnRlcm5hbCBkYXRhLlxyXG5cclxuICAgICAgICAgIHZhciBiZXN0UmVmID0gYmVzdE5vZGUuaWQ7XHJcbiAgICAgICAgICB2YXIgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUoYmVzdFJlZik7XHJcbiAgICAgICAgICB2YXIgYmVzdFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgIHZhciBiZXN0UG9seSA9IHRpbGVBbmRQb2x5WzFdOyAvLyBHZXQgcGFyZW50IGxldCBhbmQgdGlsZS5cclxuXHJcbiAgICAgICAgICB2YXIgcGFyZW50UmVmID0gMDtcclxuICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gbnVsbDtcclxuICAgICAgICAgIHZhciBwYXJlbnRQb2x5ID0gbnVsbDtcclxuICAgICAgICAgIGlmIChiZXN0Tm9kZS5waWR4ICE9IDApIHBhcmVudFJlZiA9IHRoaXMubV9ub2RlUG9vbC5nZXROb2RlQXRJZHgoYmVzdE5vZGUucGlkeCkuaWQ7XHJcblxyXG4gICAgICAgICAgaWYgKHBhcmVudFJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKHBhcmVudFJlZik7XHJcbiAgICAgICAgICAgIHBhcmVudFRpbGUgPSB0aWxlQW5kUG9seVswXTtcclxuICAgICAgICAgICAgcGFyZW50UG9seSA9IHRpbGVBbmRQb2x5WzFdO1xyXG4gICAgICAgICAgfSAvLyBIaXQgdGVzdCB3YWxscy5cclxuXHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBiZXN0UG9seS52ZXJ0Q291bnQgLSAxOyBpIDwgYmVzdFBvbHkudmVydENvdW50OyBqID0gaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIFNraXAgbm9uLXNvbGlkIGVkZ2VzLlxyXG4gICAgICAgICAgICBpZiAoKGJlc3RQb2x5Lm5laXNbal0gJiBOYXZNZXNoLkRUX0VYVF9MSU5LKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gVGlsZSBib3JkZXIuXHJcbiAgICAgICAgICAgICAgdmFyIHNvbGlkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgayA9IGJlc3RQb2x5LmZpcnN0TGluazsgayAhPSBOYXZNZXNoLkRUX05VTExfTElOSzsgayA9IGJlc3RUaWxlLmxpbmtzW2tdLm5leHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gYmVzdFRpbGUubGlua3Nba107XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsuZWRnZSA9PSBqKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChsaW5rLnJlZiAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZUFuZFBvbHkgPSB0aGlzLm1fbmF2LmdldFRpbGVBbmRQb2x5QnlSZWZVbnNhZmUobGluay5yZWYpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWlUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5laVBvbHkgPSB0aWxlQW5kUG9seVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLnBhc3NGaWx0ZXIobGluay5yZWYsIG5laVRpbGUsIG5laVBvbHkpKSBzb2xpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmICghc29saWQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGJlc3RQb2x5Lm5laXNbal0gIT0gMCkge1xyXG4gICAgICAgICAgICAgIC8vIEludGVybmFsIGVkZ2VcclxuICAgICAgICAgICAgICB2YXIgaWR4ID0gYmVzdFBvbHkubmVpc1tqXSAtIDE7XHJcbiAgICAgICAgICAgICAgdmFyIHJlZiA9IHRoaXMubV9uYXYuZ2V0UG9seVJlZkJhc2UoYmVzdFRpbGUpIHwgaWR4O1xyXG4gICAgICAgICAgICAgIGlmIChmaWx0ZXIucGFzc0ZpbHRlcihyZWYsIGJlc3RUaWxlLCBiZXN0VGlsZS5kYXRhLnBvbHlzW2lkeF0pKSBjb250aW51ZTtcclxuICAgICAgICAgICAgfSAvLyBDYWxjIGRpc3RhbmNlIHRvIHRoZSBlZGdlLlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciB2aiA9IGJlc3RQb2x5LnZlcnRzW2pdICogMztcclxuICAgICAgICAgICAgdmFyIHZpID0gYmVzdFBvbHkudmVydHNbaV0gKiAzO1xyXG4gICAgICAgICAgICB2YXIgZGlzdHNlZyA9IERldG91ckNvbW1vbi5kaXN0YW5jZVB0U2VnU3FyMkQ0KGNlbnRlclBvcywgYmVzdFRpbGUuZGF0YS52ZXJ0cywgdmosIHZpKTtcclxuICAgICAgICAgICAgZGlzdFNxciA9IGRpc3RzZWdbMF07XHJcbiAgICAgICAgICAgIHRzZWcgPSBkaXN0c2VnWzFdOyAvLyBFZGdlIGlzIHRvbyBmYXIsIHNraXAuXHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzdFNxciA+IHJhZGl1c1NxcikgY29udGludWU7IC8vIEhpdCB3YWxsLCB1cGRhdGUgcmFkaXVzLlxyXG5cclxuICAgICAgICAgICAgcmFkaXVzU3FyID0gZGlzdFNxcjsgLy8gQ2FsY3VsYXRlIGhpdCBwb3MuXHJcblxyXG4gICAgICAgICAgICBoaXRQb3NbMF0gPSBiZXN0VGlsZS5kYXRhLnZlcnRzW3ZqXSArIChiZXN0VGlsZS5kYXRhLnZlcnRzW3ZpXSAtIGJlc3RUaWxlLmRhdGEudmVydHNbdmpdKSAqIHRzZWc7XHJcbiAgICAgICAgICAgIGhpdFBvc1sxXSA9IGJlc3RUaWxlLmRhdGEudmVydHNbdmogKyAxXSArIChiZXN0VGlsZS5kYXRhLnZlcnRzW3ZpICsgMV0gLSBiZXN0VGlsZS5kYXRhLnZlcnRzW3ZqICsgMV0pICogdHNlZztcclxuICAgICAgICAgICAgaGl0UG9zWzJdID0gYmVzdFRpbGUuZGF0YS52ZXJ0c1t2aiArIDJdICsgKGJlc3RUaWxlLmRhdGEudmVydHNbdmkgKyAyXSAtIGJlc3RUaWxlLmRhdGEudmVydHNbdmogKyAyXSkgKiB0c2VnO1xyXG4gICAgICAgICAgICBiZXN0dmogPSBuZXcgVmVjdG9yUHRyKGJlc3RUaWxlLmRhdGEudmVydHMsIHZqKTtcclxuICAgICAgICAgICAgYmVzdHZpID0gbmV3IFZlY3RvclB0cihiZXN0VGlsZS5kYXRhLnZlcnRzLCB2aSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k5ID0gYmVzdFBvbHkuZmlyc3RMaW5rOyBfaTkgIT0gTmF2TWVzaC5EVF9OVUxMX0xJTks7IF9pOSA9IGJlc3RUaWxlLmxpbmtzW19pOV0ubmV4dCkge1xyXG4gICAgICAgICAgICB2YXIgX2xpbmsgPSBiZXN0VGlsZS5saW5rc1tfaTldO1xyXG4gICAgICAgICAgICB2YXIgbmVpZ2hib3VyUmVmID0gX2xpbmsucmVmOyAvLyBTa2lwIGludmFsaWQgbmVpZ2hib3VycyBhbmQgZG8gbm90IGZvbGxvdyBiYWNrIHRvIHBhcmVudC5cclxuXHJcbiAgICAgICAgICAgIGlmIChuZWlnaGJvdXJSZWYgPT0gMCB8fCBuZWlnaGJvdXJSZWYgPT0gcGFyZW50UmVmKSBjb250aW51ZTsgLy8gRXhwYW5kIHRvIG5laWdoYm91ci5cclxuXHJcbiAgICAgICAgICAgIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmVW5zYWZlKG5laWdoYm91clJlZik7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJUaWxlID0gdGlsZUFuZFBvbHlbMF07XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJQb2x5ID0gdGlsZUFuZFBvbHlbMV07IC8vIFNraXAgb2ZmLW1lc2ggY29ubmVjdGlvbnMuXHJcblxyXG4gICAgICAgICAgICBpZiAobmVpZ2hib3VyUG9seS5nZXRUeXBlKCkgPT0gUG9seS5EVF9QT0xZVFlQRV9PRkZNRVNIX0NPTk5FQ1RJT04pIGNvbnRpbnVlOyAvLyBDYWxjIGRpc3RhbmNlIHRvIHRoZSBlZGdlLlxyXG5cclxuICAgICAgICAgICAgdmFyIHZhID0gYmVzdFBvbHkudmVydHNbX2xpbmsuZWRnZV0gKiAzO1xyXG4gICAgICAgICAgICB2YXIgdmIgPSBiZXN0UG9seS52ZXJ0c1soX2xpbmsuZWRnZSArIDEpICUgYmVzdFBvbHkudmVydENvdW50XSAqIDM7XHJcblxyXG4gICAgICAgICAgICB2YXIgX2Rpc3RzZWcgPSBEZXRvdXJDb21tb24uZGlzdGFuY2VQdFNlZ1NxcjJENChjZW50ZXJQb3MsIGJlc3RUaWxlLmRhdGEudmVydHMsIHZhLCB2Yik7XHJcblxyXG4gICAgICAgICAgICBkaXN0U3FyID0gX2Rpc3RzZWdbMF07IC8vIElmIHRoZSBjaXJjbGUgaXMgbm90IHRvdWNoaW5nIHRoZSBuZXh0IHBvbHlnb24sIHNraXAgaXQuXHJcblxyXG4gICAgICAgICAgICBpZiAoZGlzdFNxciA+IHJhZGl1c1NxcikgY29udGludWU7XHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyLnBhc3NGaWx0ZXIobmVpZ2hib3VyUmVmLCBuZWlnaGJvdXJUaWxlLCBuZWlnaGJvdXJQb2x5KSkgY29udGludWU7XHJcbiAgICAgICAgICAgIHZhciBuZWlnaGJvdXJOb2RlID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGUobmVpZ2hib3VyUmVmKTtcclxuICAgICAgICAgICAgaWYgKChuZWlnaGJvdXJOb2RlLmZsYWdzICYgTm9kZS5EVF9OT0RFX0NMT1NFRCkgIT0gMCkgY29udGludWU7IC8vIENvc3RcclxuXHJcbiAgICAgICAgICAgIGlmIChuZWlnaGJvdXJOb2RlLmZsYWdzID09IDApIHtcclxuICAgICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnBvcyA9IHRoaXMuZ2V0RWRnZU1pZFBvaW50NihiZXN0UmVmLCBiZXN0UG9seSwgYmVzdFRpbGUsIG5laWdoYm91clJlZiwgbmVpZ2hib3VyUG9seSwgbmVpZ2hib3VyVGlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRvdGFsID0gYmVzdE5vZGUudG90YWwgKyBEZXRvdXJDb21tb24udkRpc3QyKGJlc3ROb2RlLnBvcywgbmVpZ2hib3VyTm9kZS5wb3MpOyAvLyBUaGUgbm9kZSBpcyBhbHJlYWR5IGluIG9wZW4gbGlzdCBhbmQgdGhlIG5ldyByZXN1bHQgaXMgd29yc2UsIHNraXAuXHJcblxyXG4gICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCAmJiB0b3RhbCA+PSBuZWlnaGJvdXJOb2RlLnRvdGFsKSBjb250aW51ZTtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5pZCA9IG5laWdoYm91clJlZjtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyA9IG5laWdoYm91ck5vZGUuZmxhZ3MgJiB+Tm9kZS5EVF9OT0RFX0NMT1NFRDtcclxuICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5waWR4ID0gdGhpcy5tX25vZGVQb29sLmdldE5vZGVJZHgoYmVzdE5vZGUpO1xyXG4gICAgICAgICAgICBuZWlnaGJvdXJOb2RlLnRvdGFsID0gdG90YWw7XHJcblxyXG4gICAgICAgICAgICBpZiAoKG5laWdoYm91ck5vZGUuZmxhZ3MgJiBOb2RlLkRUX05PREVfT1BFTikgIT0gMCkge1xyXG4gICAgICAgICAgICAgIHRoaXMubV9vcGVuTGlzdC5tb2RpZnkobmVpZ2hib3VyTm9kZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgbmVpZ2hib3VyTm9kZS5mbGFncyB8PSBOb2RlLkRUX05PREVfT1BFTjtcclxuICAgICAgICAgICAgICB0aGlzLm1fb3Blbkxpc3QucHVzaChuZWlnaGJvdXJOb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gQ2FsYyBoaXQgbm9ybWFsLlxyXG5cclxuXHJcbiAgICAgICAgdmFyIGhpdE5vcm1hbCA9IG5ldyBBcnJheSgzKTtcclxuXHJcbiAgICAgICAgaWYgKGJlc3R2aSAhPSBudWxsICYmIGJlc3R2aiAhPSBudWxsKSB7XHJcbiAgICAgICAgICB2YXIgdGFuZ2VudCA9IERldG91ckNvbW1vbi52U3ViKGJlc3R2aSwgYmVzdHZqKTtcclxuICAgICAgICAgIGhpdE5vcm1hbFswXSA9IHRhbmdlbnRbMl07XHJcbiAgICAgICAgICBoaXROb3JtYWxbMV0gPSAwO1xyXG4gICAgICAgICAgaGl0Tm9ybWFsWzJdID0gLXRhbmdlbnRbMF07XHJcbiAgICAgICAgICB2Tm9ybWFsaXplKGhpdE5vcm1hbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IEZpbmREaXN0YW5jZVRvV2FsbFJlc3VsdChNYXRoLnNxcnQocmFkaXVzU3FyKSwgaGl0UG9zLCBoaXROb3JtYWwpO1xyXG4gICAgICB9IC8vLyBSZXR1cm5zIHRydWUgaWYgdGhlIHBvbHlnb24gcmVmZXJlbmNlIGlzIHZhbGlkIGFuZCBwYXNzZXMgdGhlIGZpbHRlciByZXN0cmljdGlvbnMuXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyZWZcdFx0XHRUaGUgcG9seWdvbiByZWZlcmVuY2UgdG8gY2hlY2suXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRmaWx0ZXJcdFx0VGhlIGZpbHRlciB0byBhcHBseS5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpc1ZhbGlkUG9seVJlZlwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNWYWxpZFBvbHlSZWYocmVmLCBmaWx0ZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdmFyIHRpbGVBbmRQb2x5ID0gdGhpcy5tX25hdi5nZXRUaWxlQW5kUG9seUJ5UmVmKHJlZik7IC8vIElmIGNhbm5vdCBwYXNzIGZpbHRlciwgYXNzdW1lIGZsYWdzIGhhcyBjaGFuZ2VkIGFuZCBib3VuZGFyeSBpcyBpbnZhbGlkLlxyXG5cclxuICAgICAgICAgIGlmIChmaWx0ZXIucGFzc0ZpbHRlcihyZWYsIHRpbGVBbmRQb2x5WzBdLCB0aWxlQW5kUG9seVsxXSkpIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsvLyBJZiBjYW5ub3QgZ2V0IHBvbHlnb24sIGFzc3VtZSBpdCBkb2VzIG5vdCBleGlzdHMgYW5kIGJvdW5kYXJ5IGlzIGludmFsaWQuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0gLy8vIEdldHMgdGhlIG5hdmlnYXRpb24gbWVzaCB0aGUgcXVlcnkgb2JqZWN0IGlzIHVzaW5nLlxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgbmF2aWdhdGlvbiBtZXNoIHRoZSBxdWVyeSBvYmplY3QgaXMgdXNpbmcuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0QXR0YWNoZWROYXZNZXNoXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBdHRhY2hlZE5hdk1lc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9uYXY7XHJcbiAgICAgIH1cclxuICAgICAgLypcclxuICAgICAgLy8vIEBwYXJcclxuICAgICAgLy8vXHJcbiAgICAgIC8vLyBUaGUgY2xvc2VkIGxpc3QgaXMgdGhlIGxpc3Qgb2YgcG9seWdvbnMgdGhhdCB3ZXJlIGZ1bGx5IGV2YWx1YXRlZCBkdXJpbmcgXHJcbiAgICAgIC8vLyB0aGUgbGFzdCBuYXZpZ2F0aW9uIGdyYXBoIHNlYXJjaC4gKEEqIG9yIERpamtzdHJhKVxyXG4gICAgICAvLy8gXHJcbiAgICAgIC8vLyBSZXR1cm5zIHRydWUgaWYgdGhlIHBvbHlnb24gcmVmZXJlbmNlIGlzIGluIHRoZSBjbG9zZWQgbGlzdC4gXHJcbiAgICAgIC8vLyAgQHBhcmFtW2luXVx0XHRyZWZcdFx0VGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgcG9seWdvbiB0byBjaGVjay5cclxuICAgICAgLy8vIEByZXR1cm5zIFRydWUgaWYgdGhlIHBvbHlnb24gaXMgaW4gY2xvc2VkIGxpc3QuXHJcbiAgICAgIGxldCBpc0luQ2xvc2VkTGlzdChsZXQgcmVmKVxyXG4gICAgICB7XHJcbiAgICAgIFx0aWYgKG1fbm9kZVBvb2wgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICBcdFxyXG4gICAgICBcdGxldCBub2Rlc1tEVF9NQVhfU1RBVEVTX1BFUl9OT0RFXTtcclxuICAgICAgXHRsZXQgbj0gbV9ub2RlUG9vbD0+ZmluZE5vZGVzKHJlZiwgbm9kZXMsIERUX01BWF9TVEFURVNfUEVSX05PREUpO1xyXG4gICAgICBcdFxyXG4gICAgICBcdGZvciAobGV0IGk9MDsgaTxuOyBpKyspXHJcbiAgICAgIFx0e1xyXG4gICAgICBcdFx0aWYgKG5vZGVzW2ldPT5mbGFncyAmIERUX05PREVfQ0xPU0VEKVxyXG4gICAgICBcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgXHR9XHRcdFxyXG4gICAgICBcdFxyXG4gICAgICBcdHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBcdFxyXG4gICAgICAqL1xyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgYSBwYXRoIGZyb20gdGhlIGV4cGxvcmVkIG5vZGVzIGluIHRoZSBwcmV2aW91cyBzZWFyY2guXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAcGFyYW0gZW5kUmVmXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIHJlZmVyZW5jZSBpZCBvZiB0aGUgZW5kIHBvbHlnb24uXHJcbiAgICAgICAqIEByZXR1cm5zIEFuIG9yZGVyZWQgbGlzdCBvZiBwb2x5Z29uIHJlZmVyZW5jZXMgcmVwcmVzZW50aW5nIHRoZSBwYXRoLiAoU3RhcnQgdG8gZW5kLilcclxuICAgICAgICogQHJlbWFya3MgVGhlIHJlc3VsdCBvZiB0aGlzIGZ1bmN0aW9uIGRlcGVuZHMgb24gdGhlIHN0YXRlIG9mIHRoZSBxdWVyeSBvYmplY3QuIEZvciB0aGF0IHJlYXNvbiBpdCBzaG91bGQgb25seSBiZVxyXG4gICAgICAgKiAgICAgICAgICB1c2VkIGltbWVkaWF0ZWx5IGFmdGVyIG9uZSBvZiB0aGUgdHdvIERpamtzdHJhIHNlYXJjaGVzLCBmaW5kUG9seXNBcm91bmRDaXJjbGUgb3IgZmluZFBvbHlzQXJvdW5kU2hhcGUuXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFBhdGhGcm9tRGlqa3N0cmFTZWFyY2hcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhdGhGcm9tRGlqa3N0cmFTZWFyY2goZW5kUmVmKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm1fbmF2LmlzVmFsaWRQb2x5UmVmKGVuZFJlZikpIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJJbnZhbGlkIGVuZCByZWZcIik7XHJcbiAgICAgICAgdmFyIG5vZGVzID0gdGhpcy5tX25vZGVQb29sLmZpbmROb2RlcyhlbmRSZWYpO1xyXG4gICAgICAgIGlmIChub2Rlcy5sZW5ndGggIT0gMSkgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkludmFsaWQgZW5kIHJlZlwiKTtcclxuICAgICAgICB2YXIgZW5kTm9kZSA9IG5vZGVzWzBdO1xyXG4gICAgICAgIGlmICgoZW5kTm9kZS5mbGFncyAmIERUX05PREVfQ0xPU0VEKSA9PSAwKSB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwiSW52YWxpZCBlbmQgcmVmXCIpO1xyXG4gICAgICAgIHJldHVybiBnZXRQYXRoVG9Ob2RlKGVuZE5vZGUpO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIHRoZSBwYXRoIGxlYWRpbmcgdG8gdGhlIHNwZWNpZmllZCBlbmQgbm9kZS5cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UGF0aFRvTm9kZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGF0aFRvTm9kZShlbmROb2RlKSB7XHJcbiAgICAgICAgdmFyIHBhdGggPSBbXTsgLy8gUmV2ZXJzZSB0aGUgcGF0aC5cclxuXHJcbiAgICAgICAgdmFyIGN1ck5vZGUgPSBlbmROb2RlO1xyXG5cclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICBwYXRoLmFkZCgwLCBjdXJOb2RlLmlkKTtcclxuICAgICAgICAgIGN1ck5vZGUgPSB0aGlzLm1fbm9kZVBvb2wuZ2V0Tm9kZUF0SWR4KGN1ck5vZGUucGlkeCk7XHJcbiAgICAgICAgfSB3aGlsZSAoY3VyTm9kZSAhPSBudWxsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gTmF2TWVzaFF1ZXJ5O1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2hRdWVyeSwgXCJEVF9GSU5EUEFUSF9BTllfQU5HTEVcIiwgMHgwMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksIFwiRFRfUkFZQ0FTVF9VU0VfQ09TVFNcIiwgMHgwMSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksIFwiRFRfU1RSQUlHSFRQQVRIX1NUQVJUXCIsIDB4MDEpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCBcIkRUX1NUUkFJR0hUUEFUSF9FTkRcIiwgMHgwMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksIFwiRFRfU1RSQUlHSFRQQVRIX09GRk1FU0hfQ09OTkVDVElPTlwiLCAweDA0KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE5hdk1lc2hRdWVyeSwgXCJEVF9TVFJBSUdIVFBBVEhfQVJFQV9DUk9TU0lOR1NcIiwgMHgwMSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksIFwiRFRfU1RSQUlHSFRQQVRIX0FMTF9DUk9TU0lOR1NcIiwgMHgwMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksIFwiSF9TQ0FMRVwiLCAwLjk5OSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShOYXZNZXNoUXVlcnksIFwiRlJhbmRcIiwgZnVuY3Rpb24gRlJhbmQoKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRlJhbmQpO1xyXG5cclxuICAgIHJldHVybiBNYXRoLnJhbmRvbSgpO1xyXG4gIH0pO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCBcInNcIiwgMS4wIC8gMjU1LjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTmF2TWVzaFF1ZXJ5LCBcIlNlZ0ludGVybnZhbFwiLCAoX3RlbXAkMyA9IGZ1bmN0aW9uIFNlZ0ludGVydmFsKHJlZiwgdG1pbiwgdG1heCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlZ0ludGVydmFsKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWZcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0bWluXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidG1heFwiLCB2b2lkIDApO1xyXG5cclxuICAgIHRoaXMucmVmID0gcmVmO1xyXG4gICAgdGhpcy50bWluID0gdG1pbjtcclxuICAgIHRoaXMudG1heCA9IHRtYXg7XHJcbiAgfSwgX3RlbXAkMykpO1xyXG5cclxuICB2YXIgT2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMgPSAvLy88IGdyaWRcclxuICAvLy88IGFkYXB0aXZlXHJcbiAgLy8vPCBhZGFwdGl2ZVxyXG4gIC8vLzwgYWRhcHRpdmVcclxuICBmdW5jdGlvbiBPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcygpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcyk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVsQmlhc1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ3ZWlnaHREZXNWZWxcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2VpZ2h0Q3VyVmVsXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndlaWdodFNpZGVcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid2VpZ2h0VG9pXCIsIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhvcml6VGltZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJncmlkU2l6ZVwiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhZGFwdGl2ZURpdnNcIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRhcHRpdmVSaW5nc1wiLCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhZGFwdGl2ZURlcHRoXCIsIDApO1xyXG5cclxuICAgIHRoaXMudmVsQmlhcyA9IDAuNDtcclxuICAgIHRoaXMud2VpZ2h0RGVzVmVsID0gMi4wO1xyXG4gICAgdGhpcy53ZWlnaHRDdXJWZWwgPSAwLjc1O1xyXG4gICAgdGhpcy53ZWlnaHRTaWRlID0gMC43NTtcclxuICAgIHRoaXMud2VpZ2h0VG9pID0gMi41O1xyXG4gICAgdGhpcy5ob3JpelRpbWUgPSAyLjU7XHJcbiAgICB0aGlzLmdyaWRTaXplID0gMzM7XHJcbiAgICB0aGlzLmFkYXB0aXZlRGl2cyA9IDc7XHJcbiAgICB0aGlzLmFkYXB0aXZlUmluZ3MgPSAyO1xyXG4gICAgdGhpcy5hZGFwdGl2ZURlcHRoID0gNTtcclxuICB9O1xyXG5cclxuICB2YXIgT2JzdGFjbGVDaXJjbGUgPSBmdW5jdGlvbiBPYnN0YWNsZUNpcmNsZSgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnN0YWNsZUNpcmNsZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlbFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImR2ZWxcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJyYWRcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkcFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5wXCIsIG5ldyBBcnJheSgzKSk7XHJcbiAgfTtcclxuXHJcbiAgdmFyIE9ic3RhY2xlU2VnbWVudCA9IGZ1bmN0aW9uIE9ic3RhY2xlU2VnbWVudCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnN0YWNsZVNlZ21lbnQpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJxXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidG91Y2hcIiwgZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIHZhciBTd2VlcENpcmNsZUNpcmNsZVJlc3VsdCA9IGZ1bmN0aW9uIFN3ZWVwQ2lyY2xlQ2lyY2xlUmVzdWx0KGludGVyc2VjdGlvbiwgaHRtaW4sIGh0bWF4KSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3dlZXBDaXJjbGVDaXJjbGVSZXN1bHQpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImludGVyc2VjdGlvblwiLCBmYWxzZSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaHRtaW5cIiwgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaHRtYXhcIiwgMCk7XHJcblxyXG4gICAgdGhpcy5pbnRlcnNlY3Rpb24gPSBpbnRlcnNlY3Rpb247XHJcbiAgICB0aGlzLmh0bWluID0gaHRtaW47XHJcbiAgICB0aGlzLmh0bWF4ID0gaHRtYXg7XHJcbiAgfTtcclxuXHJcbiAgdmFyIE9ic3RhY2xlQXZvaWRhbmNlUXVlcnkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgLy8vPCBNYXggbnVtdmVyIG9mIGFkYXB0aXZlIGRpdnMuXHJcbiAgICAvLy88IE1heCBudW1iZXIgb2YgYWRhcHRpdmUgcmluZ3MuXHJcbiAgICBmdW5jdGlvbiBPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5KG1heENpcmNsZXMsIG1heFNlZ21lbnRzKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5KTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fcGFyYW1zXCIsIG5ldyBPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcygpKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1faW52SG9yaXpUaW1lXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV92bWF4XCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9pbnZWbWF4XCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9tYXhDaXJjbGVzXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9jaXJjbGVzXCIsIFtdKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbmNpcmNsZXNcIiwgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX21heFNlZ21lbnRzXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9zZWdtZW50c1wiLCBbXSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX25zZWdtZW50c1wiLCAwKTtcclxuXHJcbiAgICAgIHRoaXMubV9tYXhDaXJjbGVzID0gbWF4Q2lyY2xlcztcclxuICAgICAgdGhpcy5tX25jaXJjbGVzID0gMDtcclxuICAgICAgdGhpcy5tX2NpcmNsZXMgPSBuZXcgQXJyYXkodGhpcy5tX21heENpcmNsZXMpO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbWF4Q2lyY2xlczsgaSsrKSB7XHJcbiAgICAgICAgdGhpcy5tX2NpcmNsZXNbaV0gPSBuZXcgT2JzdGFjbGVDaXJjbGUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5tX21heFNlZ21lbnRzID0gbWF4U2VnbWVudHM7XHJcbiAgICAgIHRoaXMubV9uc2VnbWVudHMgPSAwO1xyXG4gICAgICB0aGlzLm1fc2VnbWVudHMgPSBuZXcgQXJyYXkodGhpcy5tX21heFNlZ21lbnRzKTtcclxuXHJcbiAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB0aGlzLm1fbWF4U2VnbWVudHM7IF9pKyspIHtcclxuICAgICAgICB0aGlzLm1fc2VnbWVudHNbX2ldID0gbmV3IE9ic3RhY2xlU2VnbWVudCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKE9ic3RhY2xlQXZvaWRhbmNlUXVlcnksIFt7XHJcbiAgICAgIGtleTogXCJyZXNldFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5tX25jaXJjbGVzID0gMDtcclxuICAgICAgICB0aGlzLm1fbnNlZ21lbnRzID0gMDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkQ2lyY2xlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDaXJjbGUocG9zLCByYWQsIHZlbCwgZHZlbCkge1xyXG4gICAgICAgIGlmICh0aGlzLm1fbmNpcmNsZXMgPj0gdGhpcy5tX21heENpcmNsZXMpIHJldHVybjtcclxuICAgICAgICB2YXIgY2lyID0gdGhpcy5tX2NpcmNsZXNbdGhpcy5tX25jaXJjbGVzKytdO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShjaXIucCwgcG9zKTtcclxuICAgICAgICBjaXIucmFkID0gcmFkO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShjaXIudmVsLCB2ZWwpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShjaXIuZHZlbCwgZHZlbCk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZFNlZ21lbnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFNlZ21lbnQocCwgcSkge1xyXG4gICAgICAgIGlmICh0aGlzLm1fbnNlZ21lbnRzID49IHRoaXMubV9tYXhTZWdtZW50cykgcmV0dXJuO1xyXG4gICAgICAgIHZhciBzZWcgPSB0aGlzLm1fc2VnbWVudHNbdGhpcy5tX25zZWdtZW50cysrXTtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoc2VnLnAsIHApO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShzZWcucSwgcSk7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE9ic3RhY2xlQ2lyY2xlQ291bnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9ic3RhY2xlQ2lyY2xlQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9uY2lyY2xlcztcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0T2JzdGFjbGVDaXJjbGVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9ic3RhY2xlQ2lyY2xlKGkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2NpcmNsZXNbaV07XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE9ic3RhY2xlU2VnbWVudENvdW50XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPYnN0YWNsZVNlZ21lbnRDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpc1tcInRoaXNcIl0ubV9uc2VnbWVudHM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldE9ic3RhY2xlU2VnbWVudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T2JzdGFjbGVTZWdtZW50KGkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3NlZ21lbnRzW2ldO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJwcmVwYXJlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmVwYXJlKHBvcywgZHZlbCkge1xyXG4gICAgICAgIC8vIFByZXBhcmUgb2JzdGFjbGVzXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbmNpcmNsZXM7ICsraSkge1xyXG4gICAgICAgICAgdmFyIGNpciA9IHRoaXMubV9jaXJjbGVzW2ldOyAvLyBTaWRlXHJcblxyXG4gICAgICAgICAgdmFyIHBhID0gcG9zO1xyXG4gICAgICAgICAgdmFyIHBiID0gY2lyLnA7XHJcbiAgICAgICAgICB2YXIgb3JpZyA9IFswLCAwLCAwXTtcclxuICAgICAgICAgIHZhciBkdiA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShjaXIuZHAsIERldG91ckNvbW1vbi52U3ViKHBiLCBwYSkpO1xyXG4gICAgICAgICAgRGV0b3VyQ29tbW9uLnZOb3JtYWxpemUoY2lyLmRwKTtcclxuICAgICAgICAgIGR2ID0gRGV0b3VyQ29tbW9uLnZTdWIoY2lyLmR2ZWwsIGR2ZWwpO1xyXG4gICAgICAgICAgdmFyIGEgPSBEZXRvdXJDb21tb24udHJpQXJlYTJEMyhvcmlnLCBjaXIuZHAsIGR2KTtcclxuXHJcbiAgICAgICAgICBpZiAoYSA8IDAuMDEpIHtcclxuICAgICAgICAgICAgY2lyLm5wWzBdID0gLWNpci5kcFsyXTtcclxuICAgICAgICAgICAgY2lyLm5wWzJdID0gY2lyLmRwWzBdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2lyLm5wWzBdID0gY2lyLmRwWzJdO1xyXG4gICAgICAgICAgICBjaXIubnBbMl0gPSAtY2lyLmRwWzBdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgdGhpcy5tX25zZWdtZW50czsgKytfaTIpIHtcclxuICAgICAgICAgIHZhciBzZWcgPSB0aGlzLm1fc2VnbWVudHNbX2kyXTsgLy8gUHJlY2FsYyBpZiB0aGUgYWdlbnQgaXMgcmVhbGx5IGNsb3NlIHRvIHRoZSBzZWdtZW50LlxyXG5cclxuICAgICAgICAgIHZhciByID0gMC4wMTtcclxuICAgICAgICAgIHZhciBkdCA9IERldG91ckNvbW1vbi5kaXN0YW5jZVB0U2VnU3FyMkQzKHBvcywgc2VnLnAsIHNlZy5xKTtcclxuICAgICAgICAgIHNlZy50b3VjaCA9IGR0WzBdIDwgRGV0b3VyQ29tbW9uLnNxcihyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInN3ZWVwQ2lyY2xlQ2lyY2xlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzd2VlcENpcmNsZUNpcmNsZShjMCwgcjAsIHYsIGMxLCByMSkge1xyXG4gICAgICAgIHZhciBFUFMgPSAwLjAwMDE7XHJcbiAgICAgICAgdmFyIHMgPSBEZXRvdXJDb21tb24udlN1YihjMSwgYzApO1xyXG4gICAgICAgIHZhciByID0gcjAgKyByMTtcclxuICAgICAgICB2YXIgYyA9IERldG91ckNvbW1vbi52RG90MkQocywgcykgLSByICogcjtcclxuICAgICAgICB2YXIgYSA9IERldG91ckNvbW1vbi52RG90MkQodiwgdik7XHJcbiAgICAgICAgaWYgKGEgPCBFUFMpIHJldHVybiBuZXcgU3dlZXBDaXJjbGVDaXJjbGVSZXN1bHQoZmFsc2UsIDAsIDApOyAvLyBub3QgbW92aW5nXHJcbiAgICAgICAgLy8gT3ZlcmxhcCwgY2FsYyB0aW1lIHRvIGV4aXQuXHJcblxyXG4gICAgICAgIHZhciBiID0gRGV0b3VyQ29tbW9uLnZEb3QyRCh2LCBzKTtcclxuICAgICAgICB2YXIgZCA9IGIgKiBiIC0gYSAqIGM7XHJcbiAgICAgICAgaWYgKGQgPCAwLjApIHJldHVybiBuZXcgU3dlZXBDaXJjbGVDaXJjbGVSZXN1bHQoZmFsc2UsIDAsIDApOyAvLyBubyBpbnRlcnNlY3Rpb24uXHJcblxyXG4gICAgICAgIGEgPSAxLjAgLyBhO1xyXG4gICAgICAgIHZhciByZCA9IE1hdGguc3FydChkKTtcclxuICAgICAgICByZXR1cm4gbmV3IFN3ZWVwQ2lyY2xlQ2lyY2xlUmVzdWx0KHRydWUsIChiIC0gcmQpICogYSwgKGIgKyByZCkgKiBhKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiaXNlY3RSYXlTZWdcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzZWN0UmF5U2VnKGFwLCB1LCBicCwgYnEpIHtcclxuICAgICAgICB2YXIgdiA9IERldG91ckNvbW1vbi52U3ViKGJxLCBicCk7XHJcbiAgICAgICAgdmFyIHcgPSBEZXRvdXJDb21tb24udlN1YihhcCwgYnApO1xyXG4gICAgICAgIHZhciBkID0gRGV0b3VyQ29tbW9uLnZQZXJwMkQodSwgdik7XHJcbiAgICAgICAgaWYgKE1hdGguYWJzKGQpIDwgMWUtNikgcmV0dXJuIFtmYWxzZSwgMF07XHJcbiAgICAgICAgZCA9IDEuMCAvIGQ7XHJcbiAgICAgICAgdmFyIHQgPSBEZXRvdXJDb21tb24udlBlcnAyRCh2LCB3KSAqIGQ7XHJcbiAgICAgICAgaWYgKHQgPCAwIHx8IHQgPiAxKSByZXR1cm4gW2ZhbHNlLCAwXTtcclxuICAgICAgICB2YXIgcyA9IERldG91ckNvbW1vbi52UGVycDJEKHUsIHcpICogZDtcclxuICAgICAgICBpZiAocyA8IDAgfHwgcyA+IDEpIHJldHVybiBbZmFsc2UsIDBdO1xyXG4gICAgICAgIHJldHVybiBbdHJ1ZSwgdF07XHJcbiAgICAgIH1cclxuICAgICAgLyoqIENhbGN1bGF0ZSB0aGUgY29sbGlzaW9uIHBlbmFsdHkgZm9yIGEgZ2l2ZW4gdmVsb2NpdHkgdmVjdG9yXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAcGFyYW0gdmNhbmQgc2FtcGxlZCB2ZWxvY2l0eVxyXG4gICAgICAgKiBAcGFyYW0gZHZlbCBkZXNpcmVkIHZlbG9jaXR5XHJcbiAgICAgICAqIEBwYXJhbSBtaW5QZW5hbHR5IHRocmVzaG9sZCBwZW5hbHR5IGZvciBlYXJseSBvdXRcclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicHJvY2Vzc1NhbXBsZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHJvY2Vzc1NhbXBsZSh2Y2FuZCwgY3MsIHBvcywgcmFkLCB2ZWwsIGR2ZWwsIG1pblBlbmFsdHksIGRlYnVnKSB7XHJcbiAgICAgICAgLy8gcGVuYWx0eSBmb3Igc3RyYXlpbmcgYXdheSBmcm9tIHRoZSBkZXNpcmVkIGFuZCBjdXJyZW50IHZlbG9jaXRpZXNcclxuICAgICAgICB2YXIgdnBlbiA9IHRoaXMubV9wYXJhbXMud2VpZ2h0RGVzVmVsICogKERldG91ckNvbW1vbi52RGlzdDJEKHZjYW5kLCBkdmVsKSAqIHRoaXMubV9pbnZWbWF4KTtcclxuICAgICAgICB2YXIgdmNwZW4gPSB0aGlzLm1fcGFyYW1zLndlaWdodEN1clZlbCAqIChEZXRvdXJDb21tb24udkRpc3QyRCh2Y2FuZCwgdmVsKSAqIHRoaXMubV9pbnZWbWF4KTsgLy8gZmluZCB0aGUgdGhyZXNob2xkIGhpdCB0aW1lIHRvIGJhaWwgb3V0IGJhc2VkIG9uIHRoZSBlYXJseSBvdXQgcGVuYWx0eVxyXG4gICAgICAgIC8vIChzZWUgaG93IHRoZSBwZW5hbHR5IGlzIGNhbGN1bGF0ZWQgYmVsb3cgdG8gdW5kZXJzdG5hZClcclxuXHJcbiAgICAgICAgdmFyIG1pblBlbiA9IG1pblBlbmFsdHkgLSB2cGVuIC0gdmNwZW47XHJcbiAgICAgICAgdmFyIHRUaHJlc29sZCA9ICh0aGlzLm1fcGFyYW1zLndlaWdodFRvaSAvIG1pblBlbiAtIDAuMSkgKiB0aGlzLm1fcGFyYW1zLmhvcml6VGltZTtcclxuICAgICAgICBpZiAodFRocmVzb2xkIC0gdGhpcy5tX3BhcmFtcy5ob3JpelRpbWUgPiAtTnVtYmVyLk1JTl9WQUxVRSkgcmV0dXJuIG1pblBlbmFsdHk7IC8vIGFscmVhZHkgdG9vIG11Y2hcclxuICAgICAgICAvLyBGaW5kIG1pbiB0aW1lIG9mIGltcGFjdCBhbmQgZXhpdCBhbW9uZ3N0IGFsbCBvYnN0YWNsZXMuXHJcblxyXG4gICAgICAgIHZhciB0bWluID0gdGhpcy5tX3BhcmFtcy5ob3JpelRpbWU7XHJcbiAgICAgICAgdmFyIHNpZGUgPSAwO1xyXG4gICAgICAgIHZhciBuc2lkZSA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tX25jaXJjbGVzOyArK2kpIHtcclxuICAgICAgICAgIHZhciBjaXIgPSB0aGlzLm1fY2lyY2xlc1tpXTsgLy8gUlZPXHJcblxyXG4gICAgICAgICAgdmFyIHZhYiA9IERldG91ckNvbW1vbi52U2NhbGUodmNhbmQsIDIpO1xyXG4gICAgICAgICAgdmFiID0gRGV0b3VyQ29tbW9uLnZTdWIodmFiLCB2ZWwpO1xyXG4gICAgICAgICAgdmFiID0gRGV0b3VyQ29tbW9uLnZTdWIodmFiLCBjaXIudmVsKTsgLy8gU2lkZVxyXG5cclxuICAgICAgICAgIHNpZGUgKz0gRGV0b3VyQ29tbW9uLmNsYW1wKE1hdGgubWluKERldG91ckNvbW1vbi52RG90MkQoY2lyLmRwLCB2YWIpICogMC41ICsgMC41LCBEZXRvdXJDb21tb24udkRvdDJEKGNpci5ucCwgdmFiKSAqIDIpLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgICBuc2lkZSsrO1xyXG4gICAgICAgICAgdmFyIHNyZXMgPSB0aGlzLnN3ZWVwQ2lyY2xlQ2lyY2xlKHBvcywgcmFkLCB2YWIsIGNpci5wLCBjaXIucmFkKTtcclxuICAgICAgICAgIGlmICghc3Jlcy5pbnRlcnNlY3Rpb24pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgdmFyIGh0bWluID0gc3Jlcy5odG1pbixcclxuICAgICAgICAgICAgICBodG1heCA9IHNyZXMuaHRtYXg7IC8vIEhhbmRsZSBvdmVybGFwcGluZyBvYnN0YWNsZXMuXHJcblxyXG4gICAgICAgICAgaWYgKGh0bWluIDwgMC4wICYmIGh0bWF4ID4gMC4wKSB7XHJcbiAgICAgICAgICAgIC8vIEFtb3JlIHdoZW4gb3ZlcmxhcHBlZC5cclxuICAgICAgICAgICAgaHRtaW4gPSAtaHRtaW4gKiAwLjU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGh0bWluID49IDAuMCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgY2xvc2VzdCBvYnN0YWNsZSBpcyBzb21ld2hlcmUgYWhlYWQgb2YgdXMsIGtlZXAgdHJhY2sgb2YgbmVhcmVzdCBvYnN0YWNsZS5cclxuICAgICAgICAgICAgaWYgKGh0bWluIDwgdG1pbikge1xyXG4gICAgICAgICAgICAgIHRtaW4gPSBodG1pbjtcclxuICAgICAgICAgICAgICBpZiAodG1pbiA8IHRUaHJlc29sZCkgcmV0dXJuIG1pblBlbmFsdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IHRoaXMubV9uc2VnbWVudHM7ICsrX2kzKSB7XHJcbiAgICAgICAgICB2YXIgc2VnID0gdGhpcy5tX3NlZ21lbnRzW19pM107XHJcbiAgICAgICAgICB2YXIgX2h0bWluID0gMDtcclxuXHJcbiAgICAgICAgICBpZiAoc2VnLnRvdWNoKSB7XHJcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIHRoZSBhZ2VudCBpcyB2ZXJ5IGNsb3NlIHRvIHRoZSBzZWdtZW50LlxyXG4gICAgICAgICAgICB2YXIgc2RpciA9IERldG91ckNvbW1vbi52U3ViKHNlZy5xLCBzZWcucCk7XHJcbiAgICAgICAgICAgIHZhciBzbm9ybSA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICAgICAgc25vcm1bMF0gPSAtc2RpclsyXTtcclxuICAgICAgICAgICAgc25vcm1bMl0gPSBzZGlyWzBdOyAvLyBJZiB0aGUgdmVsb2NpdHkgaXMgcG9pbnRpbmcgdG93YXJkcyB0aGUgc2VnbWVudCwgbm8gY29sbGlzaW9uLlxyXG5cclxuICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi52RG90MkQoc25vcm0sIHZjYW5kKSA8IDAuMCkgY29udGludWU7IC8vIEVsc2UgaW1tZWRpYXRlIGNvbGxpc2lvbi5cclxuXHJcbiAgICAgICAgICAgIF9odG1pbiA9IDAuMDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBpcmVzID0gdGhpcy5pc2VjdFJheVNlZyhwb3MsIHZjYW5kLCBzZWcucCwgc2VnLnEpO1xyXG4gICAgICAgICAgICBpZiAoIWlyZXNbMF0pIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBfaHRtaW4gPSBpcmVzWzFdO1xyXG4gICAgICAgICAgfSAvLyBBbGVzcyB3aGVuIGZhY2luZyB3YWxscy5cclxuXHJcblxyXG4gICAgICAgICAgX2h0bWluICo9IDIuMDsgLy8gVGhlIGNsb3Nlc3Qgb2JzdGFjbGUgaXMgc29tZXdoZXJlIGFoZWFkIG9mIHVzLCBrZWVwIHRyYWNrIG9mIG5lYXJlc3Qgb2JzdGFjbGUuXHJcblxyXG4gICAgICAgICAgaWYgKF9odG1pbiA8IHRtaW4pIHtcclxuICAgICAgICAgICAgdG1pbiA9IF9odG1pbjtcclxuICAgICAgICAgICAgaWYgKHRtaW4gPCB0VGhyZXNvbGQpIHJldHVybiBtaW5QZW5hbHR5O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gTm9ybWFsaXplIHNpZGUgYmlhcywgdG8gcHJldmVudCBpdCBkb21pbmF0aW5nIHRvbyBtdWNoLlxyXG5cclxuXHJcbiAgICAgICAgaWYgKG5zaWRlICE9IDApIHNpZGUgLz0gbnNpZGU7XHJcbiAgICAgICAgdmFyIHNwZW4gPSB0aGlzLm1fcGFyYW1zLndlaWdodFNpZGUgKiBzaWRlO1xyXG4gICAgICAgIHZhciB0cGVuID0gdGhpcy5tX3BhcmFtcy53ZWlnaHRUb2kgKiAoMS4wIC8gKDAuMSArIHRtaW4gKiB0aGlzLm1faW52SG9yaXpUaW1lKSk7XHJcbiAgICAgICAgdmFyIHBlbmFsdHkgPSB2cGVuICsgdmNwZW4gKyBzcGVuICsgdHBlbjsgLy8gU3RvcmUgZGlmZmVyZW50IHBlbmFsdGllcyBmb3IgZGVidWcgdmlld2luZ1xyXG5cclxuICAgICAgICBpZiAoZGVidWcgIT0gbnVsbCkgZGVidWcuYWRkU2FtcGxlKHZjYW5kLCBjcywgcGVuYWx0eSwgdnBlbiwgdmNwZW4sIHNwZW4sIHRwZW4pO1xyXG4gICAgICAgIHJldHVybiBwZW5hbHR5O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJzYW1wbGVWZWxvY2l0eUdyaWRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNhbXBsZVZlbG9jaXR5R3JpZChwb3MsIHJhZCwgdm1heCwgdmVsLCBkdmVsLCBwYXJhbXMsIGRlYnVnKSB7XHJcbiAgICAgICAgdGhpcy5wcmVwYXJlKHBvcywgZHZlbCk7XHJcbiAgICAgICAgdGhpcy5tX3BhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLm1faW52SG9yaXpUaW1lID0gMS4wIC8gdGhpcy5tX3BhcmFtcy5ob3JpelRpbWU7XHJcbiAgICAgICAgdGhpcy5tX3ZtYXggPSB2bWF4O1xyXG4gICAgICAgIHRoaXMubV9pbnZWbWF4ID0gdm1heCA+IDAgPyAxLjAgLyB2bWF4IDogTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB2YXIgbnZlbCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udlNldChudmVsLCAwLCAwLCAwKTtcclxuICAgICAgICBpZiAoZGVidWcgIT0gbnVsbCkgZGVidWcucmVzZXQoKTtcclxuICAgICAgICBjdnggPSBkdmVsWzBdICogdGhpcy5tX3BhcmFtcy52ZWxCaWFzO1xyXG4gICAgICAgIGN2eiA9IGR2ZWxbMl0gKiB0aGlzLm1fcGFyYW1zLnZlbEJpYXM7XHJcbiAgICAgICAgY3MgPSB2bWF4ICogMiAqICgxIC0gdGhpcy5tX3BhcmFtcy52ZWxCaWFzKSAvICh0aGlzLm1fcGFyYW1zLmdyaWRTaXplIC0gMSk7XHJcbiAgICAgICAgaGFsZiA9ICh0aGlzLm1fcGFyYW1zLmdyaWRTaXplIC0gMSkgKiBjcyAqIDAuNTtcclxuICAgICAgICBtaW5QZW5hbHR5ID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICB2YXIgbnMgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHRoaXMubV9wYXJhbXMuZ3JpZFNpemU7ICsreSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB0aGlzLm1fcGFyYW1zLmdyaWRTaXplOyArK3gpIHtcclxuICAgICAgICAgICAgdmFyIHZjYW5kID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgICBEZXRvdXJDb21tb24udlNldCh2Y2FuZCwgY3Z4ICsgeCAqIGNzIC0gaGFsZiwgMCwgY3Z6ICsgeSAqIGNzIC0gaGFsZik7XHJcbiAgICAgICAgICAgIGlmIChEZXRvdXJDb21tb24uc3FyKHZjYW5kWzBdKSArIERldG91ckNvbW1vbi5zcXIodmNhbmRbMl0pID4gRGV0b3VyQ29tbW9uLnNxcih2bWF4ICsgY3MgLyAyKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIHBlbmFsdHkgPSB0aGlzLnByb2Nlc3NTYW1wbGUodmNhbmQsIGNzLCBwb3MsIHJhZCwgdmVsLCBkdmVsLCBtaW5QZW5hbHR5LCBkZWJ1Zyk7XHJcbiAgICAgICAgICAgIG5zKys7XHJcblxyXG4gICAgICAgICAgICBpZiAocGVuYWx0eSA8IG1pblBlbmFsdHkpIHtcclxuICAgICAgICAgICAgICBtaW5QZW5hbHR5ID0gcGVuYWx0eTtcclxuICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkobnZlbCwgdmNhbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW25zLCBudmVsXTtcclxuICAgICAgfSAvLyB2ZWN0b3Igbm9ybWFsaXphdGlvbiB0aGF0IGlnbm9yZXMgdGhlIHktY29tcG9uZW50LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImR0Tm9ybWFsaXplMkRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGR0Tm9ybWFsaXplMkQodikge1xyXG4gICAgICAgIHZhciBkID0gTWF0aC5zcXJ0KHZbMF0gKiB2WzBdICsgdlsyXSAqIHZbMl0pO1xyXG4gICAgICAgIGlmIChkID09IDApIHJldHVybjtcclxuICAgICAgICBkID0gMS4wIC8gZDtcclxuICAgICAgICB2WzBdICo9IGQ7XHJcbiAgICAgICAgdlsyXSAqPSBkO1xyXG4gICAgICB9IC8vIHZlY3RvciBub3JtYWxpemF0aW9uIHRoYXQgaWdub3JlcyB0aGUgeS1jb21wb25lbnQuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZHRSb3RhdGUyRFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZHRSb3RhdGUyRCh2LCBhbmcpIHtcclxuICAgICAgICB2YXIgZGVzdCA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICB2YXIgYyA9IE1hdGguY29zKGFuZyk7XHJcbiAgICAgICAgdmFyIHMgPSBNYXRoLnNpbihhbmcpO1xyXG4gICAgICAgIGRlc3RbMF0gPSB2WzBdICogYyAtIHZbMl0gKiBzO1xyXG4gICAgICAgIGRlc3RbMl0gPSB2WzBdICogcyArIHZbMl0gKiBjO1xyXG4gICAgICAgIGRlc3RbMV0gPSB2WzFdO1xyXG4gICAgICAgIHJldHVybiBkZXN0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJzYW1wbGVWZWxvY2l0eUFkYXB0aXZlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzYW1wbGVWZWxvY2l0eUFkYXB0aXZlKHBvcywgcmFkLCB2bWF4LCB2ZWwsIGR2ZWwsIHBhcmFtcywgZGVidWcpIHtcclxuICAgICAgICB0aGlzLnByZXBhcmUocG9zLCBkdmVsKTtcclxuICAgICAgICB0aGlzLm1fcGFyYW1zID0gcGFyYW1zO1xyXG4gICAgICAgIHRoaXMubV9pbnZIb3JpelRpbWUgPSAxLjAgLyB0aGlzLm1fcGFyYW1zLmhvcml6VGltZTtcclxuICAgICAgICB0aGlzLm1fdm1heCA9IHZtYXg7XHJcbiAgICAgICAgdGhpcy5tX2ludlZtYXggPSB2bWF4ID4gMCA/IDEuMCAvIHZtYXggOiBOdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgICAgIHZhciBudmVsID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52U2V0KG52ZWwsIDAsIDAsIDApO1xyXG4gICAgICAgIGlmIChkZWJ1ZyAhPSBudWxsKSBkZWJ1Zy5yZXNldCgpOyAvLyBCdWlsZCBzYW1wbGluZyBwYXR0ZXJuIGFsaWduZWQgdG8gZGVzaXJlZCB2ZWxvY2l0eS5cclxuXHJcbiAgICAgICAgdmFyIHBhdCA9IG5ldyBBcnJheSgoT2JzdGFjbGVBdm9pZGFuY2VRdWVyeS5EVF9NQVhfUEFUVEVSTl9ESVZTICogT2JzdGFjbGVBdm9pZGFuY2VRdWVyeS5EVF9NQVhfUEFUVEVSTl9SSU5HUyArIDEpICogMik7XHJcbiAgICAgICAgdmFyIG5wYXQgPSAwO1xyXG4gICAgICAgIHZhciBuZGl2cyA9IHRoaXMubV9wYXJhbXMuYWRhcHRpdmVEaXZzO1xyXG4gICAgICAgIHZhciBucmluZ3MgPSB0aGlzLm1fcGFyYW1zLmFkYXB0aXZlUmluZ3M7XHJcbiAgICAgICAgdmFyIGRlcHRoID0gdGhpcy5tX3BhcmFtcy5hZGFwdGl2ZURlcHRoO1xyXG4gICAgICAgIHZhciBuZCA9IERldG91ckNvbW1vbi5jbGFtcChuZGl2cywgMSwgT2JzdGFjbGVBdm9pZGFuY2VRdWVyeS5EVF9NQVhfUEFUVEVSTl9ESVZTKTtcclxuICAgICAgICB2YXIgbnIgPSBEZXRvdXJDb21tb24uY2xhbXAobnJpbmdzLCAxLCBPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5LkRUX01BWF9QQVRURVJOX1JJTkdTKTtcclxuICAgICAgICB2YXIgZGEgPSAxLjAgLyBuZCAqIE9ic3RhY2xlQXZvaWRhbmNlUXVlcnkuRFRfUEkgKiAyO1xyXG4gICAgICAgIHZhciBjYSA9IE1hdGguY29zKGRhKTtcclxuICAgICAgICB2YXIgc2EgPSBNYXRoLnNpbihkYSk7IC8vIGRlc2lyZWQgZGlyZWN0aW9uXHJcblxyXG4gICAgICAgIHZhciBkZGlyID0gbmV3IEFycmF5KDYpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShkZGlyLCBkdmVsKTtcclxuICAgICAgICB0aGlzLmR0Tm9ybWFsaXplMkQoZGRpcik7XHJcbiAgICAgICAgdmFyIHJvdGF0ZWQgPSB0aGlzLmR0Um90YXRlMkQoZGRpciwgZGEgKiAwLjUpOyAvLyByb3RhdGVkIGJ5IGRhLzJcclxuXHJcbiAgICAgICAgZGRpclszXSA9IHJvdGF0ZWRbMF07XHJcbiAgICAgICAgZGRpcls0XSA9IHJvdGF0ZWRbMV07XHJcbiAgICAgICAgZGRpcls1XSA9IHJvdGF0ZWRbMl07IC8vIEFsd2F5cyBhZGQgc2FtcGxlIGF0IHplcm9cclxuXHJcbiAgICAgICAgcGF0W25wYXQgKiAyICsgMF0gPSAwO1xyXG4gICAgICAgIHBhdFtucGF0ICogMiArIDFdID0gMDtcclxuICAgICAgICBucGF0Kys7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnI7ICsraikge1xyXG4gICAgICAgICAgdmFyIHIgPSAobnIgLSBqKSAvIG5yO1xyXG4gICAgICAgICAgcGF0W25wYXQgKiAyICsgMF0gPSBkZGlyW2ogJSAyICogM10gKiByO1xyXG4gICAgICAgICAgcGF0W25wYXQgKiAyICsgMV0gPSBkZGlyW2ogJSAyICogMyArIDJdICogcjtcclxuICAgICAgICAgIHZhciBsYXN0MSA9IG5wYXQgKiAyO1xyXG4gICAgICAgICAgdmFyIGxhc3QyID0gbGFzdDE7XHJcbiAgICAgICAgICBucGF0Kys7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBuZCAtIDE7IGkgKz0gMikge1xyXG4gICAgICAgICAgICAvLyBnZXQgbmV4dCBwb1BvbHkgb24gdGhlIFwicmlnaHRcIiAocm90YXRlIENXKVxyXG4gICAgICAgICAgICBwYXRbbnBhdCAqIDIgKyAwXSA9IHBhdFtsYXN0MV0gKiBjYSArIHBhdFtsYXN0MSArIDFdICogc2E7XHJcbiAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDFdID0gLXBhdFtsYXN0MV0gKiBzYSArIHBhdFtsYXN0MSArIDFdICogY2E7IC8vIGdldCBuZXh0IHBvUG9seSBvbiB0aGUgXCJsZWZ0XCIgKHJvdGF0ZSBDQ1cpXHJcblxyXG4gICAgICAgICAgICBwYXRbbnBhdCAqIDIgKyAyXSA9IHBhdFtsYXN0Ml0gKiBjYSAtIHBhdFtsYXN0MiArIDFdICogc2E7XHJcbiAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDNdID0gcGF0W2xhc3QyXSAqIHNhICsgcGF0W2xhc3QyICsgMV0gKiBjYTtcclxuICAgICAgICAgICAgbGFzdDEgPSBucGF0ICogMjtcclxuICAgICAgICAgICAgbGFzdDIgPSBsYXN0MSArIDI7XHJcbiAgICAgICAgICAgIG5wYXQgKz0gMjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoKG5kICYgMSkgPT0gMCkge1xyXG4gICAgICAgICAgICBwYXRbbnBhdCAqIDIgKyAyXSA9IHBhdFtsYXN0Ml0gKiBjYSAtIHBhdFtsYXN0MiArIDFdICogc2E7XHJcbiAgICAgICAgICAgIHBhdFtucGF0ICogMiArIDNdID0gcGF0W2xhc3QyXSAqIHNhICsgcGF0W2xhc3QyICsgMV0gKiBjYTtcclxuICAgICAgICAgICAgbnBhdCsrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gU3RhcnQgc2FtcGxpbmcuXHJcblxyXG5cclxuICAgICAgICB2YXIgY3IgPSB2bWF4ICogKDEuMCAtIHRoaXMubV9wYXJhbXMudmVsQmlhcyk7XHJcbiAgICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheSgzKTtcclxuICAgICAgICBEZXRvdXJDb21tb24udlNldChyZXMsIGR2ZWxbMF0gKiB0aGlzLm1fcGFyYW1zLnZlbEJpYXMsIDAsIGR2ZWxbMl0gKiB0aGlzLm1fcGFyYW1zLnZlbEJpYXMpO1xyXG4gICAgICAgIHZhciBucyA9IDA7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZGVwdGg7ICsraykge1xyXG4gICAgICAgICAgdmFyIF9taW5QZW5hbHR5ID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuICAgICAgICAgIHZhciBidmVsID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYnZlbCwgMCwgMCwgMCk7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgbnBhdDsgKytfaTQpIHtcclxuICAgICAgICAgICAgdmFyIHZjYW5kID0gbmV3IEFycmF5KDMpO1xyXG4gICAgICAgICAgICBEZXRvdXJDb21tb24udlNldCh2Y2FuZCwgcmVzWzBdICsgcGF0W19pNCAqIDIgKyAwXSAqIGNyLCAwLCByZXNbMl0gKyBwYXRbX2k0ICogMiArIDFdICogY3IpO1xyXG4gICAgICAgICAgICBpZiAoRGV0b3VyQ29tbW9uLnNxcih2Y2FuZFswXSkgKyBEZXRvdXJDb21tb24uc3FyKHZjYW5kWzJdKSA+IERldG91ckNvbW1vbi5zcXIodm1heCArIDAuMDAxKSkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3BlbmFsdHkgPSB0aGlzLnByb2Nlc3NTYW1wbGUodmNhbmQsIGNyIC8gMTAsIHBvcywgcmFkLCB2ZWwsIGR2ZWwsIF9taW5QZW5hbHR5LCBkZWJ1Zyk7XHJcblxyXG4gICAgICAgICAgICBucysrO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9wZW5hbHR5IDwgX21pblBlbmFsdHkpIHtcclxuICAgICAgICAgICAgICBfbWluUGVuYWx0eSA9IF9wZW5hbHR5O1xyXG4gICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShidmVsLCB2Y2FuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkocmVzLCBidmVsKTtcclxuICAgICAgICAgIGNyICo9IDAuNTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShudmVsLCByZXMpO1xyXG4gICAgICAgIHJldHVybiBbbnMsIG52ZWxdO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIE9ic3RhY2xlQXZvaWRhbmNlUXVlcnk7XHJcbiAgfSgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoT2JzdGFjbGVBdm9pZGFuY2VRdWVyeSwgXCJEVF9NQVhfUEFUVEVSTl9ESVZTXCIsIDMyKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KE9ic3RhY2xlQXZvaWRhbmNlUXVlcnksIFwiRFRfTUFYX1BBVFRFUk5fUklOR1NcIiwgNCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShPYnN0YWNsZUF2b2lkYW5jZVF1ZXJ5LCBcIkRUX1BJXCIsIDMuMTQxNTkyNjUpO1xyXG5cclxuICB2YXIgX3RlbXAkNDtcclxuXHJcbiAgLypcclxuICBDb3B5cmlnaHQgKGMpIDIwMDktMjAxMCBNaWtrbyBNb25vbmVuIG1lbW9uQGluc2lkZS5vcmdcclxuICBSZWNhc3Q0SiBDb3B5cmlnaHQgKGMpIDIwMTUgUGlvdHIgUGlhc3R1Y2tpIHBpb3RyQGp0aWxpYS5vcmdcclxuXHJcbiAgVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcclxuICB3YXJyYW50eS4gIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXHJcbiAgYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cclxuICBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcclxuICBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XHJcbiAgZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxyXG4gIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XHJcbiAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXHJcbiAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxyXG4gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxyXG4gIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXHJcbiAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cclxuICAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxyXG4gICovXHJcbiAgdmFyIFByb3hpbWl0eUdyaWQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUHJveGltaXR5R3JpZChtX2NlbGxTaXplLCBtX2ludkNlbGxTaXplKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm94aW1pdHlHcmlkKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fY2VsbFNpemVcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1faW52Q2VsbFNpemVcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIml0ZW1zXCIsIHt9KTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fYm91bmRzXCIsIG5ldyBBcnJheSg0KSk7XHJcblxyXG4gICAgICB0aGlzLm1fY2VsbFNpemUgPSBtX2NlbGxTaXplO1xyXG4gICAgICB0aGlzLm1faW52Q2VsbFNpemUgPSBtX2ludkNlbGxTaXplO1xyXG4gICAgICB0aGlzLml0ZW1zID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFByb3hpbWl0eUdyaWQsIFt7XHJcbiAgICAgIGtleTogXCJjbGVhclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IHt9O1xyXG4gICAgICAgIHRoaXMubV9ib3VuZHNbMF0gPSAweGZmZjtcclxuICAgICAgICB0aGlzLm1fYm91bmRzWzFdID0gMHhmZmY7XHJcbiAgICAgICAgdGhpcy5tX2JvdW5kc1syXSA9IC0weGZmZjtcclxuICAgICAgICB0aGlzLm1fYm91bmRzWzNdID0gLTB4ZmZmO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJhZGRJdGVtXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRJdGVtKGlkLCBtaW54LCBtaW55LCBtYXh4LCBtYXh5KSB7XHJcbiAgICAgICAgdmFyIGltaW54ID0gTWF0aC5mbG9vcihtaW54ICogdGhpcy5tX2ludkNlbGxTaXplKTtcclxuICAgICAgICB2YXIgaW1pbnkgPSBNYXRoLmZsb29yKG1pbnkgKiB0aGlzLm1faW52Q2VsbFNpemUpO1xyXG4gICAgICAgIHZhciBpbWF4eCA9IE1hdGguZmxvb3IobWF4eCAqIHRoaXMubV9pbnZDZWxsU2l6ZSk7XHJcbiAgICAgICAgdmFyIGltYXh5ID0gTWF0aC5mbG9vcihtYXh5ICogdGhpcy5tX2ludkNlbGxTaXplKTtcclxuICAgICAgICB0aGlzLm1fYm91bmRzWzBdID0gTWF0aC5taW4odGhpcy5tX2JvdW5kc1swXSwgaW1pbngpO1xyXG4gICAgICAgIHRoaXMubV9ib3VuZHNbMV0gPSBNYXRoLm1pbih0aGlzLm1fYm91bmRzWzFdLCBpbWlueSk7XHJcbiAgICAgICAgdGhpcy5tX2JvdW5kc1syXSA9IE1hdGgubWluKHRoaXMubV9ib3VuZHNbMl0sIGltYXh4KTtcclxuICAgICAgICB0aGlzLm1fYm91bmRzWzNdID0gTWF0aC5taW4odGhpcy5tX2JvdW5kc1szXSwgaW1heHkpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBfeSA9IGltaW55OyBfeSA8PSBpbWF4eTsgKytfeSkge1xyXG4gICAgICAgICAgZm9yICh2YXIgX3ggPSBpbWlueDsgX3ggPD0gaW1heHg7ICsrX3gpIHtcclxuICAgICAgICAgICAgdmFyIF9rZXkgPSBuZXcgUHJveGltaXR5R3JpZC5JdGVtS2V5KF94LCBfeSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgX2lkcyA9IHRoaXMuaXRlbXNbSlNPTi5zdHJpbmdpZnkoX2tleSldO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9pZHMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIF9pZHMgPSBbXTtcclxuICAgICAgICAgICAgICB0aGlzLml0ZW1zW0pTT04uc3RyaW5naWZ5KF9rZXkpXSA9IF9pZHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF9pZHMucHVzaChpZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJxdWVyeUl0ZW1zXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBxdWVyeUl0ZW1zKG1pbngsIG1pbnksIG1heHgsIG1heHkpIHtcclxuICAgICAgICB2YXIgaW1pbnggPSBNYXRoLmZsb29yKG1pbnggKiB0aGlzLm1faW52Q2VsbFNpemUpO1xyXG4gICAgICAgIHZhciBpbWlueSA9IE1hdGguZmxvb3IobWlueSAqIHRoaXMubV9pbnZDZWxsU2l6ZSk7XHJcbiAgICAgICAgdmFyIGltYXh4ID0gTWF0aC5mbG9vcihtYXh4ICogdGhpcy5tX2ludkNlbGxTaXplKTtcclxuICAgICAgICB2YXIgaW1heHkgPSBNYXRoLmZsb29yKG1heHkgKiB0aGlzLm1faW52Q2VsbFNpemUpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXcgU2V0KCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIF95MiA9IGltaW55OyBfeTIgPD0gaW1heHk7ICsrX3kyKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBfeDIgPSBpbWlueDsgX3gyIDw9IGltYXh4OyArK194Mikge1xyXG4gICAgICAgICAgICB2YXIgX2tleTIgPSBuZXcgUHJveGltaXR5R3JpZC5JdGVtS2V5KF94MiwgX3kyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBfaWRzMiA9IHRoaXMuaXRlbXNbSlNPTi5zdHJpbmdpZnkoX2tleTIpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfaWRzMiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgcmVzdWx0LmFkZC5hcHBseShyZXN1bHQsIF90b0NvbnN1bWFibGVBcnJheShfaWRzMikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRJdGVtQ291bnRBdFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SXRlbUNvdW50QXQoeCwgeSkge1xyXG4gICAgICAgIGtleSA9IG5ldyBJdGVtS2V5KHgsIHkpO1xyXG4gICAgICAgIGlkcyA9IHRoaXMuaXRlbXNba2V5XTtcclxuICAgICAgICByZXR1cm4gaWRzICE9IG51bGwgPyBpZHMubGVuZ3RoIDogMDtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBQcm94aW1pdHlHcmlkO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KFByb3hpbWl0eUdyaWQsIFwiSXRlbUtleVwiLCAoX3RlbXAkNCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBJdGVtS2V5KHgsIHkpIHtcclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEl0ZW1LZXkpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwieFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwieVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgdGhpcy54ID0geDtcclxuICAgICAgdGhpcy55ID0geTtcclxuICAgIH1cclxuXHJcbiAgICBfY3JlYXRlQ2xhc3MoSXRlbUtleSwgW3tcclxuICAgICAga2V5OiBcImhhc2hDb2RlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNoQ29kZSgpIHtcclxuICAgICAgICBwcmltZSA9IDMxO1xyXG4gICAgICAgIHJlc3VsdCA9IDE7XHJcbiAgICAgICAgcmVzdWx0ID0gcHJpbWUgKiByZXN1bHQgKyB4O1xyXG4gICAgICAgIHJlc3VsdCA9IHByaW1lICogcmVzdWx0ICsgeTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJlcXVhbHNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVxdWFscyhvYmopIHtcclxuICAgICAgICBpZiAodGhpcyA9PSBvYmopIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmIChnZXRDbGFzcygpICE9IG9iai5nZXRDbGFzcygpKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgb3RoZXIgPSBvYmo7XHJcbiAgICAgICAgaWYgKHggIT0gb3RoZXIueCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICh5ICE9IG90aGVyLnkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG5cclxuICAgIHJldHVybiBJdGVtS2V5O1xyXG4gIH0oKSwgX3RlbXAkNCkpO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuICB2YXIgUGF0aFF1ZXJ5ID0gZnVuY3Rpb24gUGF0aFF1ZXJ5KCkge1xyXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhdGhRdWVyeSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicmVmXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhcnRQb3NcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJlbmRQb3NcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdGFydFJlZlwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZFJlZlwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhdGhcIiwgW10pO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXR1c1wiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImtlZXBBbGl2ZVwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpbHRlclwiLCB2b2lkIDApO1xyXG4gIH0gLy8vIDwgVE9ETzogVGhpcyBpcyBwb3RlbnRpYWxseSBkYW5nZXJvdXMhXHJcbiAgO1xyXG5cclxuICB2YXIgUGF0aFF1ZXVlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIC8vIGluIHVwZGF0ZSB0aWNrcy5cclxuICAgIGZ1bmN0aW9uIFBhdGhRdWV1ZShtYXhTZWFyY2hOb2RlQ291bnQsIG5hdikge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGF0aFF1ZXVlKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fcXVldWVcIiwgbmV3IEFycmF5KFBhdGhRdWV1ZS5NQVhfUVVFVUUpKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbmV4dEhhbmRsZVwiLCAxKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fcXVldWVIZWFkXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX25hdnF1ZXJ5XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICB0aGlzLm1fbmF2cXVlcnkgPSBuZXcgTmF2TWVzaFF1ZXJ5KG5hdik7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBhdGhRdWV1ZS5NQVhfUVVFVUU7ICsraSkge1xyXG4gICAgICAgIHRoaXMubV9xdWV1ZVtpXSA9IG5ldyBQYXRoUXVlcnkoKTtcclxuICAgICAgICB0aGlzLm1fcXVldWVbaV0ucmVmID0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQ7XHJcbiAgICAgICAgdGhpcy5tX3F1ZXVlW2ldLnBhdGggPSBuZXcgQXJyYXkoMjU2KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5tX3F1ZXVlSGVhZCA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFBhdGhRdWV1ZSwgW3tcclxuICAgICAga2V5OiBcInVwZGF0ZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKG1heEl0ZXJzKSB7XHJcbiAgICAgICAgLy8gVXBkYXRlIHBhdGggcmVxdWVzdCB1bnRpbCB0aGVyZSBpcyBub3RoaW5nIHRvIHVwZGF0ZVxyXG4gICAgICAgIC8vIG9yIHVwdG8gbWF4SXRlcnMgcGF0aGZpbmRlciBpdGVyYXRpb25zIGhhcyBiZWVuIGNvbnN1bWVkLlxyXG4gICAgICAgIHZhciBpdGVyQ291bnQgPSBtYXhJdGVycztcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXRoUXVldWUuTUFYX1FVRVVFOyArK2kpIHtcclxuICAgICAgICAgIHZhciBxID0gdGhpcy5tX3F1ZXVlW3RoaXMubV9xdWV1ZUhlYWQgJSBQYXRoUXVldWUuTUFYX1FVRVVFXTsgLy8gU2tpcCBpbmFjdGl2ZSByZXF1ZXN0cy5cclxuXHJcbiAgICAgICAgICBpZiAocS5yZWYgPT0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQpIHtcclxuICAgICAgICAgICAgdGhpcy5tX3F1ZXVlSGVhZCsrO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH0gLy8gSGFuZGxlIGNvbXBQb2x5ZWQgcmVxdWVzdC5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKHEuc3RhdHVzICE9IG51bGwgJiYgKHEuc3RhdHVzID09IFN0YXR1cy5TVUNDU0VTUyB8fCBxLnN0YXR1cyA9PSBTdGF0dXMuUEFSVElBTF9SRVNVTFQgfHwgcS5zdGF0dXMgPT0gU3RhdHVzLkZBSUxVUkUpKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBwYXRoIHJlc3VsdCBoYXMgbm90IGJlZW4gcmVhZCBpbiBmZXcgZnJhbWVzLCBmcmVlIHRoZSBzbG90LlxyXG4gICAgICAgICAgICBxLmtlZXBBbGl2ZSsrO1xyXG5cclxuICAgICAgICAgICAgaWYgKHEua2VlcEFsaXZlID4gUGF0aFF1ZXVlLk1BWF9LRUVQX0FMSVZFKSB7XHJcbiAgICAgICAgICAgICAgcS5yZWYgPSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuICAgICAgICAgICAgICBxLnN0YXR1cyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubV9xdWV1ZUhlYWQrKztcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9IC8vIEhhbmRsZSBxdWVyeSBzdGFydC5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKHEuc3RhdHVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcS5zdGF0dXMgPSB0aGlzLm1fbmF2cXVlcnkuaW5pdFNsaWNlZEZpbmRQYXRoKHEuc3RhcnRSZWYsIHEuZW5kUmVmLCBxLnN0YXJ0UG9zLCBxLmVuZFBvcywgcS5maWx0ZXIsIDApO1xyXG4gICAgICAgICAgfSAvLyBIYW5kbGUgcXVlcnkgaW4gcHJvZ3Jlc3MuXHJcblxyXG5cclxuICAgICAgICAgIGlmIChxLnN0YXR1cyA9PSBTdGF0dXMuSU5fUFJPR1JFU1MpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZXJzID0gMDtcclxuICAgICAgICAgICAgdmFyIHJlcyA9IHRoaXMubV9uYXZxdWVyeS51cGRhdGVTbGljZWRGaW5kUGF0aChpdGVyQ291bnQpO1xyXG4gICAgICAgICAgICBpdGVycyA9IHJlcy5nZXRJdGVyYXRpb25zKCk7XHJcbiAgICAgICAgICAgIHEuc3RhdHVzID0gcmVzLmdldFN0YXR1cygpO1xyXG4gICAgICAgICAgICBpdGVyQ291bnQgLT0gaXRlcnM7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHEuc3RhdHVzID09IFN0YXR1cy5TVUNDU0VTUyB8fCBxLnN0YXR1cyA9PSBTdGF0dXMuUEFSVElBTF9SRVNVTFQpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSB0aGlzLm1fbmF2cXVlcnkuZmluYWxpemVTbGljZWRGaW5kUGF0aCgpO1xyXG4gICAgICAgICAgICBxLnN0YXR1cyA9IHBhdGguZ2V0U3RhdHVzKCk7XHJcbiAgICAgICAgICAgIHEucGF0aCA9IHBhdGguZ2V0UmVmcygpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChpdGVyQ291bnQgPD0gMCkgYnJlYWs7XHJcbiAgICAgICAgICB0aGlzLm1fcXVldWVIZWFkKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyZXF1ZXN0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0KHN0YXJ0UmVmLCBlbmRSZWYsIHN0YXJ0UG9zLCBlbmRQb3MsIGZpbHRlcikge1xyXG4gICAgICAgIC8vIEZpbmQgZW1wdHkgc2xvdFxyXG4gICAgICAgIHZhciBzbG90ID0gLTE7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgUGF0aFF1ZXVlLk1BWF9RVUVVRTsgKytpKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5tX3F1ZXVlW2ldLnJlZiA9PSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRCkge1xyXG4gICAgICAgICAgICBzbG90ID0gaTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvLyBDb3VsZCBub3QgZmluZCBzbG90LlxyXG5cclxuXHJcbiAgICAgICAgaWYgKHNsb3QgPT0gLTEpIHJldHVybiBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuICAgICAgICB2YXIgcmVmID0gdGhpcy5tX25leHRIYW5kbGUrKztcclxuICAgICAgICBpZiAodGhpcy5tX25leHRIYW5kbGUgPT0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQpIHRoaXMubV9uZXh0SGFuZGxlKys7XHJcbiAgICAgICAgdmFyIHEgPSB0aGlzLm1fcXVldWVbc2xvdF07XHJcbiAgICAgICAgcS5yZWYgPSByZWY7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHEuc3RhcnRQb3MsIHN0YXJ0UG9zKTtcclxuICAgICAgICBxLnN0YXJ0UmVmID0gc3RhcnRSZWY7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHEuZW5kUG9zLCBlbmRQb3MpO1xyXG4gICAgICAgIHEuZW5kUmVmID0gZW5kUmVmO1xyXG4gICAgICAgIHEuc3RhdHVzID0gbnVsbDtcclxuICAgICAgICBxLmZpbHRlciA9IGZpbHRlcjtcclxuICAgICAgICBxLmtlZXBBbGl2ZSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHJlZjtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UmVxdWVzdFN0YXR1c1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UmVxdWVzdFN0YXR1cyhyZWYpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBhdGhRdWV1ZS5NQVhfUVVFVUU7ICsraSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMubV9xdWV1ZVtpXS5yZWYgPT0gcmVmKSByZXR1cm4gdGhpcy5tX3F1ZXVlW2ldLnN0YXR1cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBTdGF0dXMuRkFJTFVSRTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0UGF0aFJlc3VsdFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGF0aFJlc3VsdChyZWYpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBhdGhRdWV1ZS5NQVhfUVVFVUU7ICsraSkge1xyXG4gICAgICAgICAgaWYgKHRoaXMubV9xdWV1ZVtpXS5yZWYgPT0gcmVmKSB7XHJcbiAgICAgICAgICAgIHZhciBxID0gdGhpcy5tX3F1ZXVlW2ldOyAvLyBGcmVlIHJlcXVlc3QgZm9yIHJldXNlLlxyXG5cclxuICAgICAgICAgICAgcS5yZWYgPSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuICAgICAgICAgICAgcS5zdGF0dXMgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbmRQYXRoUmVzdWx0KFN0YXR1cy5TVUNDU0VTUywgcS5wYXRoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgRmluZFBhdGhSZXN1bHQoU3RhdHVzLkZBSUxVUkUsIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFBhdGhRdWV1ZTtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShQYXRoUXVldWUsIFwiTUFYX1FVRVVFXCIsIDgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoUGF0aFF1ZXVlLCBcIkRUX1BBVEhRX0lOVkFMSURcIiwgMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShQYXRoUXVldWUsIFwiTUFYX0tFRVBfQUxJVkVcIiwgMik7XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlcHJlc2VudHMgYSBkeW5hbWljIHBvbHlnb24gY29ycmlkb3IgdXNlZCB0byBwbGFuIGFnZW50IG1vdmVtZW50LlxyXG4gICAqIFxyXG4gICAqIFRoZSBjb3JyaWRvciBpcyBsb2FkZWQgd2l0aCBhIHBhdGgsIHVzdWFsbHkgb2J0YWluZWQgZnJvbSBhXHJcbiAgICogI05hdk1lc2hRdWVyeTo6ZmluZFBhdGgoKSBxdWVyeS4gVGhlIGNvcnJpZG9yIGlzIHRoZW4gdXNlZCB0byBwbGFuIGxvY2FsXHJcbiAgICogbW92ZW1lbnQsIHdpdGggdGhlIGNvcnJpZG9yIGF1dG9tYXRpY2FsbHkgdXBkYXRpbmcgYXMgbmVlZGVkIHRvIGRlYWwgd2l0aFxyXG4gICAqIGluYWNjdXJhdGUgYWdlbnQgbG9jb21vdGlvbi5cclxuICAgKiBcclxuICAgKiBFeGFtcGxlIG9mIGEgY29tbW9uIHVzZSBjYXNlOlxyXG4gICAqIFxyXG4gICAqIC0jIENvbnN0cnVjdCB0aGUgY29ycmlkb3Igb2JqZWN0IGFuZCBjYWxsIFxyXG4gICAqIC0jIE9idGFpbiBhIHBhdGggZnJvbSBhICNkdE5hdk1lc2hRdWVyeSBvYmplY3QuIFxyXG4gICAqIC0jIFVzZSAjcmVzZXQoKSB0byBzZXQgdGhlIGFnZW50J3MgY3VycmVudCBwb3NpdGlvbi4gKEF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHBhdGguKSAtIyBVc2VcclxuICAgKiAjc2V0Q29ycmlkb3IoKSB0byBsb2FkIHRoZSBwYXRoIGFuZCB0YXJnZXQuIC0jIFVzZSAjZmluZENvcm5lcnMoKSB0byBwbGFuXHJcbiAgICogbW92ZW1lbnQuIChUaGlzIGhhbmRsZXMgZHluYW1pYyBwYXRoIHN0cmFpZ2h0ZW5pbmcuKSAtIyBVc2UgI21vdmVQb3NpdGlvbigpXHJcbiAgICogdG8gZmVlZCBhZ2VudCBtb3ZlbWVudCBiYWNrIGludG8gdGhlIGNvcnJpZG9yLiAoVGhlIGNvcnJpZG9yIHdpbGxcclxuICAgKiBhdXRvbWF0aWNhbGx5IGFkanVzdCBhcyBuZWVkZWQuKSAtIyBJZiB0aGUgdGFyZ2V0IGlzIG1vdmluZywgdXNlXHJcbiAgICogI21vdmVUYXJnZXRQb3NpdGlvbigpIHRvIHVwZGF0ZSB0aGUgZW5kIG9mIHRoZSBjb3JyaWRvci4gKFRoZSBjb3JyaWRvciB3aWxsXHJcbiAgICogYXV0b21hdGljYWxseSBhZGp1c3QgYXMgbmVlZGVkLikgLSMgUmVwZWF0IHRoZSBwcmV2aW91cyAzIHN0ZXBzIHRvIGNvbnRpbnVlXHJcbiAgICogdG8gbW92ZSB0aGUgYWdlbnQuXHJcbiAgICogXHJcbiAgICogVGhlIGNvcnJpZG9yIHBvc2l0aW9uIGFuZCB0YXJnZXQgYXJlIGFsd2F5cyBjb25zdHJhaW5lZCB0byB0aGUgbmF2aWdhdGlvblxyXG4gICAqIG1lc2guXHJcbiAgICogXHJcbiAgICogT25lIG9mIHRoZSBkaWZmaWN1bHRpZXMgaW4gbWFpbnRhaW5pbmcgYSBwYXRoIGlzIHRoYXQgaW5nIHBvUG9seSBlcnJvcnMsXHJcbiAgICogbG9jb21vdGlvbiBpbmFjY3VyYWNpZXMsIGFuZC9vciBsb2NhbCBzdGVlcmluZyBjYW4gcmVzdWx0IGluIHRoZSBhZ2VudFxyXG4gICAqIGNyb3NzaW5nIHRoZSBib3VuZGFyeSBvZiB0aGUgcGF0aCBjb3JyaWRvciwgdGVtcG9yYXJpbHkgaW52YWxpZGF0aW5nIHRoZVxyXG4gICAqIHBhdGguIFRoaXMgY2xhc3MgdXNlcyBsb2NhbCBtZXNoIHF1ZXJpZXMgdG8gZGV0ZWN0IGFuZCB1cGRhdGUgdGhlIGNvcnJpZG9yIGFzXHJcbiAgICogbmVlZGVkIHRvIGhhbmRsZSB0aGVzZSB0eXBlcyBvZiBpc3N1ZXMuXHJcbiAgICogXHJcbiAgICogVGhlIGZhY3QgdGhhdCBsb2NhbCBtZXNoIHF1ZXJpZXMgYXJlIHVzZWQgdG8gbW92ZSB0aGUgcG9zaXRpb24gYW5kIHRhcmdldFxyXG4gICAqIGxvY2F0aW9ucyByZXN1bHRzIGluIHR3byBiZWFodmlvcnMgdGhhdCBuZWVkIHRvIGJlIGNvbnNpZGVyZWQ6XHJcbiAgICogXHJcbiAgICogRXZlcnkgdGltZSBhIG1vdmUgZnVuY3Rpb24gaXMgdXNlZCB0aGVyZSBpcyBhIGNoYW5jZSB0aGF0IHRoZSBwYXRoIHdpbGxcclxuICAgKiBiZWNvbWUgbm9uLW9wdGltaWFsLiBCYXNpY2FsbHksIHRoZSBmdXJ0aGVyIHRoZSB0YXJnZXQgaXMgbW92ZWQgZnJvbSBpdHNcclxuICAgKiBvcmlnaW5hbCBsb2NhdGlvbiwgYW5kIHRoZSBmdXJ0aGVyIHRoZSBwb3NpdGlvbiBpcyBtb3ZlZCBvdXRzaWRlIHRoZSBvcmlnaW5hbFxyXG4gICAqIGNvcnJpZG9yLCB0aGUgbW9yZSBsaWtlbHkgdGhlIHBhdGggd2lsbCBiZWNvbWUgbm9uLW9wdGltYWwuIFRoaXMgaXNzdWUgY2FuIGJlXHJcbiAgICogYWRkcmVzc2VkIGJ5IHBlcmlvZGljYWxseSBydW5uaW5nIHRoZSAjb3B0aW1pemVQYXRoVG9wb2xvZ3koKSBhbmRcclxuICAgKiAjb3B0aW1pemVQYXRoVmlzaWJpbGl0eSgpIG1ldGhvZHMuXHJcbiAgICogXHJcbiAgICogQWxsIGxvY2FsIG1lc2ggcXVlcmllcyBoYXZlIGRpc3RhbmNlIGxpbWl0YXRpb25zLiAoUmV2aWV3IHRoZSAjZHROYXZNZXNoUXVlcnlcclxuICAgKiBtZXRob2RzIGZvciBkZXRhaWxzLikgU28gdGhlIG1vc3QgYWNjdXJhdGUgdXNlIGNhc2UgaXMgdG8gbW92ZSB0aGUgcG9zaXRpb25cclxuICAgKiBhbmQgdGFyZ2V0IGluIHNtYWxsIGluY3JlbWVudHMuIElmIGEgbGFyZ2UgaW5jcmVtZW50IGlzIHVzZWQsIHRoZW4gdGhlXHJcbiAgICogY29ycmlkb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFjY3VyYXRlbHkgZmluZCB0aGUgbmV3IGxvY2F0aW9uLiBCZWNhdXNlIG9mIHRoaXNcclxuICAgKiBsaW1pYXRpb24sIGlmIGEgcG9zaXRpb24gaXMgbW92ZWQgaW4gYSBsYXJnZSBpbmNyZW1lbnQsIHRoZW4gY29tcGFyZSB0aGVcclxuICAgKiBkZXNpcmVkIGFuZCByZXN1bHRpbmcgcG9seWdvbiByZWZlcmVuY2VzLiBJZiB0aGUgdHdvIGRvIG5vdCBtYXRjaCwgdGhlbiBwYXRoXHJcbiAgICogcmVwbGFubmluZyBtYXkgYmUgbmVlZGVkLiBFLmcuIElmIHlvdSBtb3ZlIHRoZSB0YXJnZXQsIGNoZWNrICNnZXRMYXN0UG9seSgpXHJcbiAgICogdG8gc2VlIGlmIGl0IGlzIHRoZSBleHBlY3RlZCBwb2x5Z29uLlxyXG4gICAqXHJcbiAgICovXHJcblxyXG4gIHZhciBQYXRoQ29ycmlkb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgX2NyZWF0ZUNsYXNzKFBhdGhDb3JyaWRvciwgW3tcclxuICAgICAga2V5OiBcIm1lcmdlQ29ycmlkb3JTdGFydE1vdmVkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJnZUNvcnJpZG9yU3RhcnRNb3ZlZChwYXRoLCB2aXNpdGVkKSB7XHJcbiAgICAgICAgdmFyIGZ1cnRoZXN0UGF0aCA9IC0xO1xyXG4gICAgICAgIHZhciBmdXJ0aGVzdFZpc2l0ZWQgPSAtMTsgLy8gRmluZCBmdXJ0aGVzdCBjb21tb24gcG9seWdvbi5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IHBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcclxuICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGogPSB2aXNpdGVkLmxlbmd0aCAtIDE7IGogPj0gMDsgLS1qKSB7XHJcbiAgICAgICAgICAgIGlmIChwYXRoW2ldID09IHZpc2l0ZWRbal0pIHtcclxuICAgICAgICAgICAgICBmdXJ0aGVzdFBhdGggPSBpO1xyXG4gICAgICAgICAgICAgIGZ1cnRoZXN0VmlzaXRlZCA9IGo7XHJcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGZvdW5kKSBicmVhaztcclxuICAgICAgICB9IC8vIElmIG5vIGludGVyc2VjdGlvbiBmb3VuZCBqdXN0IHJldHVybiBjdXJyZW50IHBhdGguXHJcblxyXG5cclxuICAgICAgICBpZiAoZnVydGhlc3RQYXRoID09IC0xIHx8IGZ1cnRoZXN0VmlzaXRlZCA9PSAtMSkgcmV0dXJuIHBhdGg7IC8vIENvbmNhdGVuYXRlIHBhdGhzLlxyXG4gICAgICAgIC8vIEFkanVzdCBiZWdpbm5pbmcgb2YgdGhlIGJ1ZmZlciB0byBpbmNsdWRlIHRoZSB2aXNpdGVkLlxyXG5cclxuICAgICAgICB2YXIgcmVzdWx0ID0gW107IC8vIFN0b3JlIHZpc2l0ZWRcclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSB2aXNpdGVkLmxlbmd0aCAtIDE7IF9pID4gZnVydGhlc3RWaXNpdGVkOyAtLV9pKSB7XHJcbiAgICAgICAgICByZXN1bHQucHVzaCh2aXNpdGVkW19pXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIF90b0NvbnN1bWFibGVBcnJheShwYXRoLnNsaWNlKGZ1cnRoZXN0UGF0aCwgcGF0aC5sZW5ndGgpKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWVyZ2VDb3JyaWRvckVuZE1vdmVkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtZXJnZUNvcnJpZG9yRW5kTW92ZWQocGF0aCwgdmlzaXRlZCkge1xyXG4gICAgICAgIHZhciBmdXJ0aGVzdFBhdGggPSAtMTtcclxuICAgICAgICB2YXIgZnVydGhlc3RWaXNpdGVkID0gLTE7IC8vIEZpbmQgZnVydGhlc3QgY29tbW9uIHBvbHlnb24uXHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IHZpc2l0ZWQubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcclxuICAgICAgICAgICAgaWYgKHBhdGhbaV0gPT0gdmlzaXRlZFtqXSkge1xyXG4gICAgICAgICAgICAgIGZ1cnRoZXN0UGF0aCA9IGk7XHJcbiAgICAgICAgICAgICAgZnVydGhlc3RWaXNpdGVkID0gajtcclxuICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoZm91bmQpIGJyZWFrO1xyXG4gICAgICAgIH0gLy8gSWYgbm8gaW50ZXJzZWN0aW9uIGZvdW5kIGp1c3QgcmV0dXJuIGN1cnJlbnQgcGF0aC5cclxuXHJcblxyXG4gICAgICAgIGlmIChmdXJ0aGVzdFBhdGggPT0gLTEgfHwgZnVydGhlc3RWaXNpdGVkID09IC0xKSByZXR1cm4gcGF0aDsgLy8gQ29uY2F0ZW5hdGUgcGF0aHMuXHJcblxyXG4gICAgICAgIHZhciByZXN1bHQgPSBwYXRoLnN1Ykxpc3QoMCwgZnVydGhlc3RQYXRoKTtcclxuICAgICAgICByZXN1bHQuYWRkQWxsKHZpc2l0ZWQuc3ViTGlzdChmdXJ0aGVzdFZpc2l0ZWQsIHZpc2l0ZWQubGVuZ3RoKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibWVyZ2VDb3JyaWRvclN0YXJ0U2hvcnRjdXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1lcmdlQ29ycmlkb3JTdGFydFNob3J0Y3V0KHBhdGgsIHZpc2l0ZWQpIHtcclxuICAgICAgICB2YXIgZnVydGhlc3RQYXRoID0gLTE7XHJcbiAgICAgICAgdmFyIGZ1cnRoZXN0VmlzaXRlZCA9IC0xOyAvLyBGaW5kIGZ1cnRoZXN0IGNvbW1vbiBwb2x5Z29uLlxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gcGF0aC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xyXG4gICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaiA9IHZpc2l0ZWQubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcclxuICAgICAgICAgICAgaWYgKHBhdGhbaV0gPT0gdmlzaXRlZFtqXSkge1xyXG4gICAgICAgICAgICAgIGZ1cnRoZXN0UGF0aCA9IGk7XHJcbiAgICAgICAgICAgICAgZnVydGhlc3RWaXNpdGVkID0gajtcclxuICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoZm91bmQpIGJyZWFrO1xyXG4gICAgICAgIH0gLy8gSWYgbm8gaW50ZXJzZWN0aW9uIGZvdW5kIGp1c3QgcmV0dXJuIGN1cnJlbnQgcGF0aC5cclxuXHJcblxyXG4gICAgICAgIGlmIChmdXJ0aGVzdFBhdGggPT0gLTEgfHwgZnVydGhlc3RWaXNpdGVkIDw9IDApIHJldHVybiBwYXRoOyAvLyBDb25jYXRlbmF0ZSBwYXRocy5cclxuICAgICAgICAvLyBBZGp1c3QgYmVnaW5uaW5nIG9mIHRoZSBidWZmZXIgdG8gaW5jbHVkZSB0aGUgdmlzaXRlZC5cclxuXHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHZpc2l0ZWQuc3ViTGlzdCgwLCBmdXJ0aGVzdFZpc2l0ZWQpO1xyXG4gICAgICAgIHJlc3VsdC5hZGRBbGwocGF0aC5zdWJMaXN0KGZ1cnRoZXN0UGF0aCwgcGF0aC5sZW5ndGgpKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBbGxvY2F0ZXMgdGhlIGNvcnJpZG9yJ3MgcGF0aCBidWZmZXIuXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH1dKTtcclxuXHJcbiAgICBmdW5jdGlvbiBQYXRoQ29ycmlkb3IoKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQYXRoQ29ycmlkb3IpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9wb3NcIiwgbmV3IEFycmF5KDMpKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fdGFyZ2V0XCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3BhdGhcIiwgW10pO1xyXG5cclxuICAgICAgdGhpcy5tX3BhdGggPSBbXTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXRzIHRoZSBwYXRoIGNvcnJpZG9yIHRvIHRoZSBzcGVjaWZpZWQgcG9zaXRpb24uXHJcbiAgICAgKiBAcGFyYW0gcmVmIFRoZSBwb2x5Z29uIHJlZmVyZW5jZSBjb250YWluaW5nIHRoZSBwb3NpdGlvbi5cclxuICAgICAqIEBwYXJhbSBwb3MgVGhlIG5ldyBwb3NpdGlvbiBpbiB0aGUgY29ycmlkb3IuIFsoeCwgeSwgeildXHJcbiAgICAgKi9cclxuXHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKFBhdGhDb3JyaWRvciwgW3tcclxuICAgICAga2V5OiBcInJlc2V0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldChyZWYsIHBvcykge1xyXG4gICAgICAgIHRoaXMubV9wYXRoID0gW107XHJcbiAgICAgICAgdGhpcy5tX3BhdGgucHVzaChyZWYpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcG9zLCBwb3MpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fdGFyZ2V0LCBwb3MpO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBGaW5kcyB0aGUgY29ybmVycyBpbiB0aGUgY29ycmlkb3IgZnJvbSB0aGUgcG9zaXRpb24gdG93YXJkIHRoZSB0YXJnZXQuXHJcbiAgICAgICAqIChUaGUgc3RyYWlnaHRlbmVkIHBhdGguKVxyXG4gICAgICAgKiBcclxuICAgICAgICogVGhpcyBpcyB0aGUgZnVuY3Rpb24gdXNlZCB0byBwbGFuIGxvY2FsIG1vdmVtZW50IHdpdGhpbiB0aGUgY29ycmlkb3IuIE9uZVxyXG4gICAgICAgKiBvciBtb3JlIGNvcm5lcnMgY2FuIGJlIGRldGVjdGVkIGluIG9yZGVyIHRvIHBsYW4gbW92ZW1lbnQuIEl0IHBlcmZvcm1zXHJcbiAgICAgICAqIGVzc2VudGlhbGx5IHRoZSBzYW1lIGZ1bmN0aW9uIGFzICNkdE5hdk1lc2hRdWVyeTo6ZmluZFN0cmFpZ2h0UGF0aC5cclxuICAgICAgICogXHJcbiAgICAgICAqIER1ZSB0byBpbnRlcm5hbCBvcHRpbWl6YXRpb25zLCB0aGUgbWF4aW11bSBudW1iZXIgb2YgY29ybmVycyByZXR1cm5lZFxyXG4gICAgICAgKiB3aWxsIGJlIChAcCBtYXhDb3JuZXJzIC0gMSkgRm9yIGV4YW1wbGU6IElmIHRoZSBidWZmZXJzIGFyZSBzaXplZCB0byBob2xkXHJcbiAgICAgICAqIDEwIGNvcm5lcnMsIHRoZSBmdW5jdGlvbiB3aWxsIG5ldmVyIHJldHVybiBtb3JlIHRoYW4gOSBjb3JuZXJzLiBTbyBpZiAxMFxyXG4gICAgICAgKiBjb3JuZXJzIGFyZSBuZWVkZWQsIHRoZSBidWZmZXJzIHNob3VsZCBiZSBzaXplZCBmb3IgMTEgY29ybmVycy5cclxuICAgICAgICogXHJcbiAgICAgICAqIElmIHRoZSB0YXJnZXQgaXMgd2l0aGluIHJhbmdlLCBpdCB3aWxsIGJlIHRoZSBsYXN0IGNvcm5lciBhbmQgaGF2ZSBhXHJcbiAgICAgICAqIHBvbHlnb24gcmVmZXJlbmNlIGlkIG9mIHplcm8uXHJcbiAgICAgICAqIEBwYXJhbSBmaWx0ZXIgXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAcGFyYW1baW5dIG5hdnF1ZXJ5IFRoZSBxdWVyeSBvYmplY3QgdXNlZCB0byBidWlsZCB0aGUgY29ycmlkb3IuXHJcbiAgICAgICAqIEByZXR1cm4gQ29ybmVyc1xyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJmaW5kQ29ybmVyc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZmluZENvcm5lcnMobWF4Q29ybmVycywgbmF2cXVlcnksIGZpbHRlcikge1xyXG4gICAgICAgIHZhciBNSU5fVEFSR0VUX0RJU1QgPSBEZXRvdXJDb21tb24uc3FyKDAuMDEpO1xyXG4gICAgICAgIHZhciBwYXRoID0gbmF2cXVlcnkuZmluZFN0cmFpZ2h0UGF0aCh0aGlzLm1fcG9zLCB0aGlzLm1fdGFyZ2V0LCB0aGlzLm1fcGF0aCwgbWF4Q29ybmVycywgMCk7IC8vIFBydW5lIHBvaW50cyBpbiB0aGUgYmVnaW5uaW5nIG9mIHRoZSBwYXRoIHdoaWNoIGFyZSB0b28gY2xvc2UuXHJcbiAgICAgICAgLy8gZm9yIChsZXQgaXRlciA9IHBhdGguaXRlcmF0b3IoKTsgaXRlci5oYXNOZXh0KCk7KSB7XHJcbiAgICAgICAgLy8gXHRsZXQgc3BpID0gaXRlci5uZXh0KCk7XHJcbiAgICAgICAgLy8gXHRpZiAoKHNwaS5nZXRGbGFncygpICYgTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9PRkZNRVNIX0NPTk5FQ1RJT04pICE9IDBcclxuICAgICAgICAvLyBcdFx0fHwgRGV0b3VyQ29tbW9uLnZEaXN0MkQoc3BpLmdldFBvcygpLCB0aGlzLm1fcG9zKSA+IE1JTl9UQVJHRVRfRElTVCkge1xyXG4gICAgICAgIC8vIFx0XHRicmVhaztcclxuICAgICAgICAvLyBcdH1cclxuICAgICAgICAvLyBcdGl0ZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIFRPRE9cclxuXHJcbiAgICAgICAgdmFyIG5ld1BhdGggPSBbXTtcclxuICAgICAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgdmFyIGwgPSBwYXRoLmxlbmd0aDtcclxuXHJcbiAgICAgICAgZm9yICg7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgc3BpID0gcGF0aFtpXTtcclxuXHJcbiAgICAgICAgICBpZiAoKHNwaS5nZXRGbGFncygpICYgTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9PRkZNRVNIX0NPTk5FQ1RJT04pICE9IDAgfHwgRGV0b3VyQ29tbW9uLnZEaXN0MkQoc3BpLmdldFBvcygpLCB0aGlzLm1fcG9zKSA+IE1JTl9UQVJHRVRfRElTVCkge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBqID0gaTsgLy8gZm9yKDsgaiA8IGw7IGorKyk7XHJcbiAgICAgICAgLy8ge1xyXG4gICAgICAgIC8vIFx0bmV3UGF0aC5wdXNoKHBhdGhbal0pXHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICB3aGlsZSAoaiA8IGwpIHtcclxuICAgICAgICAgIG5ld1BhdGgucHVzaChwYXRoW2pdKTtcclxuICAgICAgICAgIGorKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBhdGggPSBuZXdQYXRoO1xyXG4gICAgICAgIHJldHVybiBwYXRoO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBdHRlbXB0cyB0byBvcHRpbWl6ZSB0aGUgcGF0aCBpZiB0aGUgc3BlY2lmaWVkIHBvUG9seSBpcyB2aXNpYmxlIGZyb20gdGhlXHJcbiAgICAgICAqIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBJbmFjY3VyYXRlIGxvY29tb3Rpb24gb3IgZHluYW1pYyBvYnN0YWNsZSBhdm9pZGFuY2UgY2FuIGZvcmNlIHRoZSBhZ2VudFxyXG4gICAgICAgKiBwb3NpdGlvbiBzaWduaWZpY2FudGx5IG91dHNpZGUgdGhlIG9yaWdpbmFsIGNvcnJpZG9yLiBPdmVyIHRpbWUgdGhpcyBjYW5cclxuICAgICAgICogcmVzdWx0IGluIHRoZSBmb3JtYXRpb24gb2YgYSBub24tb3B0aW1hbCBjb3JyaWRvci4gTm9uLW9wdGltYWwgcGF0aHMgY2FuXHJcbiAgICAgICAqIGFsc28gZm9ybSBuZWFyIHRoZSBjb3JuZXJzIG9mIHRpbGVzLlxyXG4gICAgICAgKiBcclxuICAgICAgICogVGhpcyBmdW5jdGlvbiB1c2VzIGFuIGVmZmljaWVudCBsb2NhbCB2aXNpYmlsaXR5IHNlYXJjaCB0byB0cnkgdG9cclxuICAgICAgICogb3B0aW1pemUgdGhlIGNvcnJpZG9yIGJldHdlZW4gdGhlIGN1cnJlbnQgcG9zaXRpb24gYW5kIEBwIG5leHQuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBUaGUgY29ycmlkb3Igd2lsbCBjaGFuZ2Ugb25seSBpZiBAcCBuZXh0IGlzIHZpc2libGUgZnJvbSB0aGUgY3VycmVudFxyXG4gICAgICAgKiBwb3NpdGlvbiBhbmQgbW92aW5nIGRpcmVjdGx5IHRvd2FyZCB0aGUgcG9Qb2x5IGlzIGJldHRlciB0aGFuIGZvbGxvd2luZ1xyXG4gICAgICAgKiB0aGUgZXhpc3RpbmcgcGF0aC5cclxuICAgICAgICogXHJcbiAgICAgICAqIFRoZSBtb3JlIGluYWNjdXJhdGUgdGhlIGFnZW50IG1vdmVtZW50LCB0aGUgbW9yZSBiZW5lZmljaWFsIHRoaXMgZnVuY3Rpb25cclxuICAgICAgICogYmVjb21lcy4gU2ltcGx5IGFkanVzdCB0aGUgZnJlcXVlbmN5IG9mIHRoZSBjYWxsIHRvIG1hdGNoIHRoZSBuZWVkcyB0b1xyXG4gICAgICAgKiB0aGUgYWdlbnQuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBzdWl0YWJsZSBmb3IgbGV0IGRpc3RhbmNlIHNlYXJjaGVzLlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIG5leHRcclxuICAgICAgICogICAgICAgICAgICBUaGUgcG9Qb2x5IHRvIHNlYXJjaCB0b3dhcmQuIFsoeCwgeSwgel0pXHJcbiAgICAgICAqIEBwYXJhbSBwYXRoT3B0aW1pemF0aW9uUmFuZ2VcclxuICAgICAgICogICAgICAgICAgICBUaGUgbWF4aW11bSByYW5nZSB0byBzZWFyY2guIFtMaW1pdDogPiAwXVxyXG4gICAgICAgKiBAcGFyYW0gbmF2cXVlcnlcclxuICAgICAgICogICAgICAgICAgICBUaGUgcXVlcnkgb2JqZWN0IHVzZWQgdG8gYnVpbGQgdGhlIGNvcnJpZG9yLlxyXG4gICAgICAgKiBAcGFyYW0gZmlsdGVyXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIGZpbHRlciB0byBhcHBseSB0byB0aGUgb3BlcmF0aW9uLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvcHRpbWl6ZVBhdGhWaXNpYmlsaXR5XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcHRpbWl6ZVBhdGhWaXNpYmlsaXR5KG5leHQsIHBhdGhPcHRpbWl6YXRpb25SYW5nZSwgbmF2cXVlcnksIGZpbHRlcikge1xyXG4gICAgICAgIC8vIENsYW1wIHRoZSByYXkgdG8gbWF4IGRpc3RhbmNlLlxyXG4gICAgICAgIHZhciBkaXN0ID0gRGV0b3VyQ29tbW9uLnZEaXN0MkQodGhpcy5tX3BvcywgbmV4dCk7IC8vIElmIHRvbyBjbG9zZSB0byB0aGUgZ29hbCwgZG8gbm90IHRyeSB0byBvcHRpbWl6ZS5cclxuXHJcbiAgICAgICAgaWYgKGRpc3QgPCAwLjAxKSByZXR1cm47IC8vIE92ZXJzaG9vdCBhIGxpdHRsZS4gVGhpcyBoZWxwcyB0byBvcHRpbWl6ZSBvcGVuIGZpZWxkcyBpbiB0aWxlZFxyXG4gICAgICAgIC8vIG1lc2hlcy5cclxuXHJcbiAgICAgICAgZGlzdCA9IE1hdGgubWluKGRpc3QgKyAwLjAxLCBwYXRoT3B0aW1pemF0aW9uUmFuZ2UpOyAvLyBBZGp1c3QgcmF5IGxlbmd0aC5cclxuXHJcbiAgICAgICAgdmFyIGRlbHRhID0gRGV0b3VyQ29tbW9uLnZTdWIobmV4dCwgdGhpcy5tX3Bvcyk7XHJcbiAgICAgICAgdmFyIGdvYWwgPSBEZXRvdXJDb21tb24udk1hZCh0aGlzLm1fcG9zLCBkZWx0YSwgcGF0aE9wdGltaXphdGlvblJhbmdlIC8gZGlzdCk7XHJcbiAgICAgICAgdmFyIHJjID0gbmF2cXVlcnkucmF5Y2FzdCh0aGlzLm1fcGF0aFswXSwgdGhpcy5tX3BvcywgZ29hbCwgZmlsdGVyLCAwLCAwKTtcclxuXHJcbiAgICAgICAgaWYgKHJjLnBhdGgubGVuZ3RoID4gMSAmJiByYy50ID4gMC45OSkge1xyXG4gICAgICAgICAgdGhpcy5tX3BhdGggPSB0aGlzLm1lcmdlQ29ycmlkb3JTdGFydFNob3J0Y3V0KHRoaXMubV9wYXRoLCByYy5wYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEF0dGVtcHRzIHRvIG9wdGltaXplIHRoZSBwYXRoIHVzaW5nIGEgbG9jYWwgYXJlYSBzZWFyY2guIChQYXJ0aWFsXHJcbiAgICAgICAqIHJlcGxhbm5pbmcuKVxyXG4gICAgICAgKiBcclxuICAgICAgICogSW5hY2N1cmF0ZSBsb2NvbW90aW9uIG9yIGR5bmFtaWMgb2JzdGFjbGUgYXZvaWRhbmNlIGNhbiBmb3JjZSB0aGUgYWdlbnRcclxuICAgICAgICogcG9zaXRpb24gc2lnbmlmaWNhbnRseSBvdXRzaWRlIHRoZSBvcmlnaW5hbCBjb3JyaWRvci4gT3ZlciB0aW1lIHRoaXMgY2FuXHJcbiAgICAgICAqIHJlc3VsdCBpbiB0aGUgZm9ybWF0aW9uIG9mIGEgbm9uLW9wdGltYWwgY29ycmlkb3IuIFRoaXMgZnVuY3Rpb24gd2lsbCB1c2VcclxuICAgICAgICogYSBsb2NhbCBhcmVhIHBhdGggc2VhcmNoIHRvIHRyeSB0byByZS1vcHRpbWl6ZSB0aGUgY29ycmlkb3IuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBUaGUgbW9yZSBpbmFjY3VyYXRlIHRoZSBhZ2VudCBtb3ZlbWVudCwgdGhlIG1vcmUgYmVuZWZpY2lhbCB0aGlzIGZ1bmN0aW9uXHJcbiAgICAgICAqIGJlY29tZXMuIFNpbXBseSBhZGp1c3QgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgY2FsbCB0byBtYXRjaCB0aGUgbmVlZHMgdG9cclxuICAgICAgICogdGhlIGFnZW50LlxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIG5hdnF1ZXJ5IFRoZSBxdWVyeSBvYmplY3QgdXNlZCB0byBidWlsZCB0aGUgY29ycmlkb3IuXHJcbiAgICAgICAqIEBwYXJhbSBmaWx0ZXIgVGhlIGZpbHRlciB0byBhcHBseSB0byB0aGUgb3BlcmF0aW9uLlxyXG4gICAgICAgKiBcclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwib3B0aW1pemVQYXRoVG9wb2xvZ3lcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wdGltaXplUGF0aFRvcG9sb2d5KG5hdnF1ZXJ5LCBmaWx0ZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5tX3BhdGgubGVuZ3RoIDwgMykgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHZhciBNQVhfSVRFUiA9IDMyO1xyXG4gICAgICAgIG5hdnF1ZXJ5LmluaXRTbGljZWRGaW5kUGF0aCh0aGlzLm1fcGF0aFswXSwgdGhpcy5tX3BhdGhbdGhpcy5tX3BhdGgubGVuZ3RoIC0gMV0sIHRoaXMubV9wb3MsIHRoaXMubV90YXJnZXQsIGZpbHRlciwgMCk7XHJcbiAgICAgICAgbmF2cXVlcnkudXBkYXRlU2xpY2VkRmluZFBhdGgoTUFYX0lURVIpO1xyXG4gICAgICAgIHZhciBmcHIgPSBuYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoUGFydGlhbCh0aGlzLm1fcGF0aCk7XHJcblxyXG4gICAgICAgIGlmIChmcHIuZ2V0U3RhdHVzKCkuaXNTdWNjZXNzKCkgJiYgZnByLmdldFJlZnMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICB0aGlzLm1fcGF0aCA9IG1lcmdlQ29ycmlkb3JTdGFydFNob3J0Y3V0KHRoaXMubV9wYXRoLCBmcHIuZ2V0UmVmcygpKTtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJtb3ZlT3Zlck9mZm1lc2hDb25uZWN0aW9uXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlT3Zlck9mZm1lc2hDb25uZWN0aW9uKG9mZk1lc2hDb25SZWYsIHJlZnMsIHN0YXJ0LCBlbmQsIG5hdnF1ZXJ5KSB7XHJcbiAgICAgICAgLy8gQWR2YW5jZSB0aGUgcGF0aCB1cCB0byBhbmQgb3ZlciB0aGUgb2ZmLW1lc2ggY29ubmVjdGlvbi5cclxuICAgICAgICB2YXIgcHJldlJlZiA9IDA7XHJcbiAgICAgICAgdmFyIHBvbHlSZWYgPSB0aGlzLm1fcGF0aFswXTtcclxuICAgICAgICB2YXIgbnBvcyA9IDA7XHJcblxyXG4gICAgICAgIHdoaWxlIChucG9zIDwgdGhpcy5tX3BhdGgubGVuZ3RoICYmIHBvbHlSZWYgIT0gb2ZmTWVzaENvblJlZikge1xyXG4gICAgICAgICAgcHJldlJlZiA9IHBvbHlSZWY7XHJcbiAgICAgICAgICBwb2x5UmVmID0gdGhpcy5tX3BhdGhbbnBvc107XHJcbiAgICAgICAgICBucG9zKys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobnBvcyA9PSB0aGlzLm1fcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgIC8vIENvdWxkIG5vdCBmaW5kIG9mZk1lc2hDb25SZWZcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IC8vIFBydW5lIHBhdGhcclxuXHJcblxyXG4gICAgICAgIHRoaXMubV9wYXRoID0gdGhpcy5tX3BhdGguc3ViTGlzdChucG9zLCB0aGlzLm1fcGF0aC5sZW5ndGgpO1xyXG4gICAgICAgIHJlZnNbMF0gPSBwcmV2UmVmO1xyXG4gICAgICAgIHJlZnNbMV0gPSBwb2x5UmVmO1xyXG4gICAgICAgIHZhciBuYXYgPSBuYXZxdWVyeS5nZXRBdHRhY2hlZE5hdk1lc2goKTtcclxuICAgICAgICB2YXIgc3RhcnRFbmQgPSBuYXYuZ2V0T2ZmTWVzaENvbm5lY3Rpb25Qb2x5RW5kUG9pbnRzKHJlZnNbMF0sIHJlZnNbMV0pO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcG9zLCBzdGFydEVuZC5zZWNvbmQpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShzdGFydCwgc3RhcnRFbmQuZmlyc3QpO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShlbmQsIHN0YXJ0RW5kLnNlY29uZCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1vdmVzIHRoZSBwb3NpdGlvbiBmcm9tIHRoZSBjdXJyZW50IGxvY2F0aW9uIHRvIHRoZSBkZXNpcmVkIGxvY2F0aW9uLFxyXG4gICAgICAgKiBhZGp1c3RpbmcgdGhlIGNvcnJpZG9yIGFzIG5lZWRlZCB0byByZWZsZWN0IHRoZSBjaGFuZ2UuXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBCZWhhdmlvcjpcclxuICAgICAgICogXHJcbiAgICAgICAqIC0gVGhlIG1vdmVtZW50IGlzIGNvbnN0cmFpbmVkIHRvIHRoZSBzdXJmYWNlIG9mIHRoZSBuYXZpZ2F0aW9uIG1lc2guIC1cclxuICAgICAgICogVGhlIGNvcnJpZG9yIGlzIGF1dG9tYXRpY2FsbHkgYWRqdXN0ZWQgKHNob3J0ZWQgb3IgbGVuZ3RoZW5lZCkgaW4gb3JkZXJcclxuICAgICAgICogdG8gcmVtYWluIHZhbGlkLiAtIFRoZSBuZXcgcG9zaXRpb24gd2lsbCBiZSBsb2NhdGVkIGluIHRoZSBhZGp1c3RlZFxyXG4gICAgICAgKiBjb3JyaWRvcidzIGZpcnN0IHBvbHlnb24uXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBUaGUgZXhwZWN0ZWQgdXNlIGNhc2UgaXMgdGhhdCB0aGUgZGVzaXJlZCBwb3NpdGlvbiB3aWxsIGJlICduZWFyJyB0aGVcclxuICAgICAgICogY3VycmVudCBjb3JyaWRvci4gV2hhdCBpcyBjb25zaWRlcmVkICduZWFyJyBkZXBlbmRzIG9uIGxvY2FsIHBvbHlnb25cclxuICAgICAgICogZGVuc2l0eSwgcXVlcnkgc2VhcmNoIGV4dGVudHMsIGV0Yy5cclxuICAgICAgICogXHJcbiAgICAgICAqIFRoZSByZXN1bHRpbmcgcG9zaXRpb24gd2lsbCBkaWZmZXIgZnJvbSB0aGUgZGVzaXJlZCBwb3NpdGlvbiBpZiB0aGVcclxuICAgICAgICogZGVzaXJlZCBwb3NpdGlvbiBpcyBub3Qgb24gdGhlIG5hdmlnYXRpb24gbWVzaCwgb3IgaXQgY2FuJ3QgYmUgcmVhY2hlZFxyXG4gICAgICAgKiB1c2luZyBhIGxvY2FsIHNlYXJjaC5cclxuICAgICAgICogXHJcbiAgICAgICAqIEBwYXJhbSBucG9zXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIGRlc2lyZWQgbmV3IHBvc2l0aW9uLiBbKHgsIHksIHopXVxyXG4gICAgICAgKiBAcGFyYW0gbmF2cXVlcnlcclxuICAgICAgICogICAgICAgICAgICBUaGUgcXVlcnkgb2JqZWN0IHVzZWQgdG8gYnVpbGQgdGhlIGNvcnJpZG9yLlxyXG4gICAgICAgKiBAcGFyYW0gZmlsdGVyXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIGZpbHRlciB0byBhcHBseSB0byB0aGUgb3BlcmF0aW9uLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJtb3ZlUG9zaXRpb25cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVQb3NpdGlvbihucG9zLCBuYXZxdWVyeSwgZmlsdGVyKSB7XHJcbiAgICAgICAgLy8gTW92ZSBhUG9seSBuYXZtZXNoIGFuZCB1cGRhdGUgbmV3IHBvc2l0aW9uLlxyXG4gICAgICAgIHZhciBtYXNSZXN1bHQgPSBuYXZxdWVyeS5tb3ZlQWxvbmdTdXJmYWNlKHRoaXMubV9wYXRoWzBdLCB0aGlzLm1fcG9zLCBucG9zLCBmaWx0ZXIpO1xyXG4gICAgICAgIHRoaXMubV9wYXRoID0gdGhpcy5tZXJnZUNvcnJpZG9yU3RhcnRNb3ZlZCh0aGlzLm1fcGF0aCwgbWFzUmVzdWx0LmdldFZpc2l0ZWQoKSk7IC8vIEFkanVzdCB0aGUgcG9zaXRpb24gdG8gc3RheSBvbiB0b3Agb2YgdGhlIG5hdm1lc2guXHJcblxyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcG9zLCBtYXNSZXN1bHQuZ2V0UmVzdWx0UG9zKCkpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGhpcy5tX3Bvc1sxXSA9IG5hdnF1ZXJ5LmdldFBvbHlIZWlnaHQodGhpcy5tX3BhdGhbMF0sIG1hc1Jlc3VsdC5nZXRSZXN1bHRQb3MoKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgey8vIFNpbGVudGx5IGRpc3JlZ2FyZCB0aGUgcmV0dXJuZWQgc3RhdHVzIG9mIERUX0ZBSUxVUkUgfCBEVF9JTlZBTElEX1BBUkFNIHRvIHN0YXlcclxuICAgICAgICAgIC8vIGNvbnNpc3RlbnQgd2l0aCB3aGF0IHRoZSBsaWJyYXJ5IGluIEMrKyBkb2VzLCBzZWUgRGV0b3VyUGF0aENvcnJpZG9yLmNwcC5cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1vdmVzIHRoZSB0YXJnZXQgZnJvbSB0aGUgY3VyZW50IGxvY2F0aW9uIHRvIHRoZSBkZXNpcmVkIGxvY2F0aW9uLFxyXG4gICAgICAgKiBhZGp1c3RpbmcgdGhlIGNvcnJpZG9yIGFzIG5lZWRlZCB0byByZWZsZWN0IHRoZSBjaGFuZ2UuIEJlaGF2aW9yOiAtIFRoZVxyXG4gICAgICAgKiBtb3ZlbWVudCBpcyBjb25zdHJhaW5lZCB0byB0aGUgc3VyZmFjZSBvZiB0aGUgbmF2aWdhdGlvbiBtZXNoLiAtIFRoZVxyXG4gICAgICAgKiBjb3JyaWRvciBpcyBhdXRvbWF0aWNhbGx5IGFkanVzdGVkIChzaG9ydGVkIG9yIGxlbmd0aGVuZWQpIGluIG9yZGVyIHRvXHJcbiAgICAgICAqIHJlbWFpbiB2YWxpZC4gLSBUaGUgbmV3IHRhcmdldCB3aWxsIGJlIGxvY2F0ZWQgaW4gdGhlIGFkanVzdGVkIGNvcnJpZG9yJ3NcclxuICAgICAgICogbGFzdCBwb2x5Z29uLlxyXG4gICAgICAgKiBcclxuICAgICAgICogVGhlIGV4cGVjdGVkIHVzZSBjYXNlIGlzIHRoYXQgdGhlIGRlc2lyZWQgdGFyZ2V0IHdpbGwgYmUgJ25lYXInIHRoZVxyXG4gICAgICAgKiBjdXJyZW50IGNvcnJpZG9yLiBXaGF0IGlzIGNvbnNpZGVyZWQgJ25lYXInIGRlcGVuZHMgb24gbG9jYWwgcG9seWdvblxyXG4gICAgICAgKiBkZW5zaXR5LCBxdWVyeSBzZWFyY2ggZXh0ZW50cywgZXRjLiBUaGUgcmVzdWx0aW5nIHRhcmdldCB3aWxsIGRpZmZlciBmcm9tXHJcbiAgICAgICAqIHRoZSBkZXNpcmVkIHRhcmdldCBpZiB0aGUgZGVzaXJlZCB0YXJnZXQgaXMgbm90IG9uIHRoZSBuYXZpZ2F0aW9uIG1lc2gsXHJcbiAgICAgICAqIG9yIGl0IGNhbid0IGJlIHJlYWNoZWQgdXNpbmcgYSBsb2NhbCBzZWFyY2guXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSBucG9zXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIGRlc2lyZWQgbmV3IHRhcmdldCBwb3NpdGlvbi4gWyh4LCB5LCB6KV1cclxuICAgICAgICogQHBhcmFtIG5hdnF1ZXJ5XHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIHF1ZXJ5IG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBjb3JyaWRvci5cclxuICAgICAgICogQHBhcmFtIGZpbHRlclxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIG9wZXJhdGlvbi5cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwibW92ZVRhcmdldFBvc2l0aW9uXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBtb3ZlVGFyZ2V0UG9zaXRpb24obnBvcywgbmF2cXVlcnksIGZpbHRlcikge1xyXG4gICAgICAgIC8vIE1vdmUgYVBvbHkgbmF2bWVzaCBhbmQgdXBkYXRlIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICB2YXIgbWFzUmVzdWx0ID0gbmF2cXVlcnkubW92ZUFsb25nU3VyZmFjZSh0aGlzLm1fcGF0aFt0aGlzLm1fcGF0aC5sZW5ndGggLSAxXSwgdGhpcy5tX3RhcmdldCwgbnBvcywgZmlsdGVyKTtcclxuICAgICAgICB0aGlzLm1fcGF0aCA9IG1lcmdlQ29ycmlkb3JFbmRNb3ZlZCh0aGlzLm1fcGF0aCwgbWFzUmVzdWx0LmdldFZpc2l0ZWQoKSk7IC8vIFRPRE86IHNob3VsZCB3ZSBkbyB0aGF0P1xyXG4gICAgICAgIC8vIEFkanVzdCB0aGUgcG9zaXRpb24gdG8gc3RheSBvbiB0b3Agb2YgdGhlIG5hdm1lc2guXHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogIGggPSBtX3RhcmdldFsxXTsgbmF2cXVlcnk9PmdldFBvbHlIZWlnaHQodGhpcy5tX3BhdGhbbV9ucGF0aC0xXSxcclxuICAgICAgICAgKiByZXN1bHQsICZoKTsgcmVzdWx0WzFdID0gaDtcclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMubV90YXJnZXQsIG1hc1Jlc3VsdC5nZXRSZXN1bHRQb3MoKSk7XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIExvYWRzIGEgbmV3IHBhdGggYW5kIHRhcmdldCBpbnRvIHRoZSBjb3JyaWRvci4gVGhlIGN1cnJlbnQgY29ycmlkb3JcclxuICAgICAgICogcG9zaXRpb24gaXMgZXhwZWN0ZWQgdG8gYmUgd2l0aGluIHRoZSBmaXJzdCBwb2x5Z29uIGluIHRoZSBwYXRoLiBUaGVcclxuICAgICAgICogdGFyZ2V0IGlzIGV4cGVjdGVkIHRvIGJlIGluIHRoZSBsYXN0IHBvbHlnb24uXHJcbiAgICAgICAqIFxyXG4gICAgICAgKiBAd2FybmluZyBUaGUgc2l6ZSBvZiB0aGUgcGF0aCBtdXN0IG5vdCBleGNlZWQgdGhlIHNpemUgb2YgY29ycmlkb3IncyBwYXRoXHJcbiAgICAgICAqICAgICAgICAgIGJ1ZmZlciBzZXQgZHVyaW5nICNpbml0KCkuXHJcbiAgICAgICAqIEBwYXJhbSB0YXJnZXRcclxuICAgICAgICogICAgICAgICAgICBUaGUgdGFyZ2V0IGxvY2F0aW9uIHdpdGhpbiB0aGUgbGFzdCBwb2x5Z29uIG9mIHRoZSBwYXRoLiBbKHgsXHJcbiAgICAgICAqICAgICAgICAgICAgeSwgeildXHJcbiAgICAgICAqIEBwYXJhbSBwYXRoXHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIHBhdGggY29ycmlkb3IuXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInNldENvcnJpZG9yXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDb3JyaWRvcih0YXJnZXQsIHBhdGgpIHtcclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3RhcmdldCwgdGFyZ2V0KTtcclxuICAgICAgICB0aGlzLm1fcGF0aCA9IF90b0NvbnN1bWFibGVBcnJheShwYXRoKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZml4UGF0aFN0YXJ0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBmaXhQYXRoU3RhcnQoc2FmZVJlZiwgc2FmZVBvcykge1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weSh0aGlzLm1fcG9zLCBzYWZlUG9zKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubV9wYXRoLmxlbmd0aCA8IDMgJiYgdGhpcy5tX3BhdGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgdmFyIHAgPSB0aGlzLm1fcGF0aFt0aGlzLm1fcGF0aC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgIHRoaXMubV9wYXRoID0gW107XHJcbiAgICAgICAgICB0aGlzLm1fcGF0aC5wdXNoKHNhZmVSZWYpO1xyXG4gICAgICAgICAgdGhpcy5tX3BhdGgucHVzaCgwKTtcclxuICAgICAgICAgIHRoaXMubV9wYXRoLnB1c2gocCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubV9wYXRoID0gW107XHJcbiAgICAgICAgICB0aGlzLm1fcGF0aC5wdXNoKHNhZmVSZWYpO1xyXG4gICAgICAgICAgdGhpcy5tX3BhdGgucHVzaCgwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInRyaW1JbnZhbGlkUGF0aFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdHJpbUludmFsaWRQYXRoKHNhZmVSZWYsIHNhZmVQb3MsIG5hdnF1ZXJ5LCBmaWx0ZXIpIHtcclxuICAgICAgICAvLyBLZWVwIHZhbGlkIHBhdGggYXMgZmFyIGFzIHBvc3NpYmxlLlxyXG4gICAgICAgIHZhciBuID0gMDtcclxuXHJcbiAgICAgICAgd2hpbGUgKG4gPCB0aGlzLm1fcGF0aC5sZW5ndGggJiYgbmF2cXVlcnkuaXNWYWxpZFBvbHlSZWYodGhpcy5tX3BhdGhbbl0sIGZpbHRlcikpIHtcclxuICAgICAgICAgIG4rKztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChuID09IDApIHtcclxuICAgICAgICAgIC8vIFRoZSBmaXJzdCBwb2x5cmVmIGlzIGJhZCwgdXNlIGN1cnJlbnQgc2FmZSB2YWx1ZXMuXHJcbiAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3Bvcywgc2FmZVBvcyk7XHJcbiAgICAgICAgICB0aGlzLm1fcGF0aCA9IFtdO1xyXG4gICAgICAgICAgdGhpcy5tX3BhdGgucHVzaChzYWZlUmVmKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG4gPCB0aGlzLm1fcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgIHRoaXMubV9wYXRoID0gdGhpcy5tX3BhdGguc3ViTGlzdCgwLCBuKTsgLy8gVGhlIHBhdGggaXMgcGFydGlhbGx5IHVzYWJsZS5cclxuICAgICAgICB9IC8vIENsYW1wIHRhcmdldCBwb3MgdG8gbGFzdCBwb2x5XHJcblxyXG5cclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX3RhcmdldCwgbmF2cXVlcnkuY2xvc2VzdFBvaW50T25Qb2x5Qm91bmRhcnkodGhpcy5tX3BhdGhbdGhpcy5tX3BhdGgubGVuZ3RoIC0gMV0sIHRoaXMubV90YXJnZXQpKTtcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogQ2hlY2tzIHRoZSBjdXJyZW50IGNvcnJpZG9yIHBhdGggdG8gc2VlIGlmIGl0cyBwb2x5Z29uIHJlZmVyZW5jZXMgcmVtYWluXHJcbiAgICAgICAqIHZhbGlkLiBUaGUgcGF0aCBjYW4gYmUgaW52YWxpZGF0ZWQgaWYgdGhlcmUgYXJlIHN0cnVjdHVyYWwgY2hhbmdlcyB0byB0aGVcclxuICAgICAgICogdW5kZXJseWluZyBuYXZpZ2F0aW9uIG1lc2gsIG9yIHRoZSBzdGF0ZSBvZiBhIHBvbHlnb24gd2l0aGluIHRoZSBwYXRoXHJcbiAgICAgICAqIGNoYW5nZXMgcmVzdWx0aW5nIGluIGl0IGJlaW5nIGZpbHRlcmVkIG91dC4gKEUuZy4gQW4gZXhjbHVzaW9uIG9yXHJcbiAgICAgICAqIGluY2x1c2lvbiBmbGFnIGNoYW5nZXMuKVxyXG4gICAgICAgKiBcclxuICAgICAgICogQHBhcmFtIG1heExvb2tBaGVhZFxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBudW1iZXIgb2YgcG9seWdvbnMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb3JyaWRvciB0b1xyXG4gICAgICAgKiAgICAgICAgICAgIHNlYXJjaC5cclxuICAgICAgICogQHBhcmFtIG5hdnF1ZXJ5XHJcbiAgICAgICAqICAgICAgICAgICAgVGhlIHF1ZXJ5IG9iamVjdCB1c2VkIHRvIGJ1aWxkIHRoZSBjb3JyaWRvci5cclxuICAgICAgICogQHBhcmFtIGZpbHRlclxyXG4gICAgICAgKiAgICAgICAgICAgIFRoZSBmaWx0ZXIgdG8gYXBwbHkgdG8gdGhlIG9wZXJhdGlvbi5cclxuICAgICAgICogQHJldHVyblxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJpc1ZhbGlkXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1ZhbGlkKG1heExvb2tBaGVhZCwgbmF2cXVlcnksIGZpbHRlcikge1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgYWxsIHBvbHlnb25zIHN0aWxsIHBhc3MgcXVlcnkgZmlsdGVyLlxyXG4gICAgICAgIHZhciBuID0gTWF0aC5taW4odGhpcy5tX3BhdGgubGVuZ3RoLCBtYXhMb29rQWhlYWQpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkge1xyXG4gICAgICAgICAgaWYgKCFuYXZxdWVyeS5pc1ZhbGlkUG9seVJlZih0aGlzLm1fcGF0aFtpXSwgZmlsdGVyKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgdGhlIGN1cnJlbnQgcG9zaXRpb24gd2l0aGluIHRoZSBjb3JyaWRvci4gKEluIHRoZSBmaXJzdCBwb2x5Z29uLilcclxuICAgICAgICogQHJldHVybiBUaGUgY3VycmVudCBwb3NpdGlvbiB3aXRoaW4gdGhlIGNvcnJpZG9yLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRQb3NcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBvcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3BvcztcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB0aGUgY3VycmVudCB0YXJnZXQgd2l0aGluIHRoZSBjb3JyaWRvci4gKEluIHRoZSBsYXN0IHBvbHlnb24uKVxyXG4gICAgICAgKiBAcmV0dXJuIFRoZSBjdXJyZW50IHRhcmdldCB3aXRoaW4gdGhlIGNvcnJpZG9yLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRUYXJnZXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3RhcmdldDtcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogVGhlIHBvbHlnb24gcmVmZXJlbmNlIGlkIG9mIHRoZSBmaXJzdCBwb2x5Z29uIGluIHRoZSBjb3JyaWRvciwgdGhlIHBvbHlnb24gY29udGFpbmluZyB0aGUgcG9zaXRpb24uXHJcbiAgICAgICAqIEByZXR1cm4gVGhlIHBvbHlnb24gcmVmZXJlbmNlIGlkIG9mIHRoZSBmaXJzdCBwb2x5Z29uIGluIHRoZSBjb3JyaWRvci4gKE9yIHplcm8gaWYgdGhlcmUgaXMgbm8gcGF0aC4pXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldEZpcnN0UG9seVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rmlyc3RQb2x5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGF0aC5sZW5ndGggPT0gMCA/IDAgOiB0aGlzLm1fcGF0aFswXTtcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogVGhlIHBvbHlnb24gcmVmZXJlbmNlIGlkIG9mIHRoZSBsYXN0IHBvbHlnb24gaW4gdGhlIGNvcnJpZG9yLCB0aGUgcG9seWdvbiBjb250YWluaW5nIHRoZSB0YXJnZXQuXHJcbiAgICAgICAqIEByZXR1cm4gVGhlIHBvbHlnb24gcmVmZXJlbmNlIGlkIG9mIHRoZSBsYXN0IHBvbHlnb24gaW4gdGhlIGNvcnJpZG9yLiAoT3IgemVybyBpZiB0aGVyZSBpcyBubyBwYXRoLilcclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0TGFzdFBvbHlcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhc3RQb2x5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fcGF0aC5sZW5ndGggPT0gMCA/IDAgOiB0aGlzLm1fcGF0aFt0aGlzLm1fcGF0aC5sZW5ndGggLSAxXTtcclxuICAgICAgfVxyXG4gICAgICAvKipcclxuICAgICAgICogVGhlIGNvcnJpZG9yJ3MgcGF0aC4gXHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFBhdGhcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9wYXRoO1xyXG4gICAgICB9XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUaGUgbnVtYmVyIG9mIHBvbHlnb25zIGluIHRoZSBjdXJyZW50IGNvcnJpZG9yIHBhdGguXHJcbiAgICAgICAqIEByZXR1cm4gVGhlIG51bWJlciBvZiBwb2x5Z29ucyBpbiB0aGUgY3VycmVudCBjb3JyaWRvciBwYXRoLlxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRQYXRoQ291bnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhdGhDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX3BhdGgubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIFBhdGhDb3JyaWRvcjtcclxuICB9KCk7XHJcblxyXG4gIHZhciBfdGVtcCQ1O1xyXG5cclxuICBmdW5jdGlvbiBhcnJheWNvcHkkNShvbmUsIG9uZVN0YXJ0LCB0d28sIHR3b1N0YXJ0LCBsZW4pIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgdHdvW3R3b1N0YXJ0ICsgaV0gPSBvbmVbb25lU3RhcnQgKyBpXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBMb2NhbEJvdW5kYXJ5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIExvY2FsQm91bmRhcnkoKSB7XHJcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2NhbEJvdW5kYXJ5KTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fY2VudGVyXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX3NlZ3NcIiwgW10pO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9wb2x5c1wiLCBbXSk7XHJcblxyXG4gICAgICB0aGlzLm1fY2VudGVyWzBdID0gdGhpcy5tX2NlbnRlclsxXSA9IHRoaXMubV9jZW50ZXJbMl0gPSBOdW1iZXIuTUFYX1ZBTFVFO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhMb2NhbEJvdW5kYXJ5LCBbe1xyXG4gICAgICBrZXk6IFwicmVzZXRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMubV9jZW50ZXJbMF0gPSB0aGlzLm1fY2VudGVyWzFdID0gdGhpcy5tX2NlbnRlclsyXSA9IE51bWJlci5NQVhfVkFMVUU7XHJcbiAgICAgICAgdGhpcy5tX3BvbHlzID0gW107XHJcbiAgICAgICAgdGhpcy5tX3NlZ3MgPSBbXTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkU2VnbWVudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU2VnbWVudChkaXN0LCBzKSB7XHJcbiAgICAgICAgLy8gSW5zZXJ0IG5laWdoYm91ciBiYXNlZCBvbiB0aGUgZGlzdGFuY2UuXHJcbiAgICAgICAgdmFyIHNlZyA9IG5ldyBMb2NhbEJvdW5kYXJ5LlNlZ21lbnQoKTtcclxuICAgICAgICBhcnJheWNvcHkkNShzLCAwLCBzZWcucywgMCwgNik7XHJcbiAgICAgICAgc2VnLmQgPSBkaXN0O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5tX3NlZ3MubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIHRoaXMubV9zZWdzLnB1c2goc2VnKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGRpc3QgPj0gdGhpcy5tX3NlZ3NbdGhpcy5tX3NlZ3MubGVuZ3RoIC0gMV0uZCkge1xyXG4gICAgICAgICAgaWYgKHRoaXMubV9zZWdzLmxlbmd0aCA+PSBMb2NhbEJvdW5kYXJ5Lk1BWF9MT0NBTF9TRUdTKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0aGlzLm1fc2Vncy5wdXNoKHNlZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIEluc2VydCBpbmJldHdlZW4uXHJcbiAgICAgICAgICB2YXIgaTtcclxuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5tX3NlZ3MubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgaWYgKGRpc3QgPD0gdGhpcy5tX3NlZ3NbaV0uZCkgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5tX3NlZ3Muc3BsaWNlKGksIDAsIHNlZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAodGhpcy5tX3NlZ3MubGVuZ3RoID4gTG9jYWxCb3VuZGFyeS5NQVhfTE9DQUxfU0VHUykge1xyXG4gICAgICAgICAgdGhpcy5tX3NlZ3Muc3BsaWNlKHRoaXMubV9zZWdzLmxlbmd0aCAtIDEsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidXBkYXRlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUocmVmLCBwb3MsIGNvbGxpc2lvblF1ZXJ5UmFuZ2UsIG5hdnF1ZXJ5LCBmaWx0ZXIpIHtcclxuICAgICAgICBpZiAocmVmID09IDApIHtcclxuICAgICAgICAgIHJlc2V0KCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBEZXRvdXJDb21tb24udkNvcHkodGhpcy5tX2NlbnRlciwgcG9zKTsgLy8gRmlyc3QgcXVlcnkgbm9uLW92ZXJsYXBwaW5nIHBvbHlnb25zLlxyXG5cclxuICAgICAgICB2YXIgcmVzID0gbmF2cXVlcnkuZmluZExvY2FsTmVpZ2hib3VyaG9vZChyZWYsIHBvcywgY29sbGlzaW9uUXVlcnlSYW5nZSwgZmlsdGVyKTtcclxuICAgICAgICB0aGlzLm1fcG9seXMgPSByZXMuZ2V0UmVmcygpO1xyXG4gICAgICAgIHRoaXMubV9zZWdzID0gW107IC8vIFNlY29uZGx5LCBzdG9yZSBhbGwgcG9seWdvbiBlZGdlcy5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLm1fcG9seXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgIHZhciBncHdzID0gbmF2cXVlcnkuZ2V0UG9seVdhbGxTZWdtZW50cyh0aGlzLm1fcG9seXNbal0sIGZhbHNlLCBmaWx0ZXIpO1xyXG5cclxuICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZ3B3cy5nZXRTZWdtZW50UmVmcygpLmxlbmd0aDsgKytrKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gZ3B3cy5nZXRTZWdtZW50VmVydHMoKVtrXTsgLy8gU2tpcCB0b28gZGlzdGFudCBzZWdtZW50cy5cclxuXHJcbiAgICAgICAgICAgIHZhciBkaXN0c2VnID0gRGV0b3VyQ29tbW9uLmRpc3RhbmNlUHRTZWdTcXIyRDQocG9zLCBzLCAwLCAzKTtcclxuICAgICAgICAgICAgaWYgKGRpc3RzZWdbMF0gPiBEZXRvdXJDb21tb24uc3FyKGNvbGxpc2lvblF1ZXJ5UmFuZ2UpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgdGhpcy5hZGRTZWdtZW50KGRpc3RzZWdbMF0sIHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiaXNWYWxpZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaXNWYWxpZChuYXZxdWVyeSwgZmlsdGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubV9wb2x5cy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlOyAvLyBDaGVjayB0aGF0IGFsbCBwb2x5Z29ucyBzdGlsbCBwYXNzIHF1ZXJ5IGZpbHRlci5cclxuXHJcbiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubV9wb2x5cyksXHJcbiAgICAgICAgICAgIF9zdGVwO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgICAgdmFyIHJlZiA9IF9zdGVwLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIW5hdnF1ZXJ5LmlzVmFsaWRQb2x5UmVmKHJlZiwgZmlsdGVyKSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yLmYoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRDZW50ZXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENlbnRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tX2NlbnRlcjtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0U2VnbWVudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VnbWVudChqKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9zZWdzW2pdLnM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFNlZ21lbnRDb3VudFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2VnbWVudENvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fc2Vncy5sZW5ndGg7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gTG9jYWxCb3VuZGFyeTtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShMb2NhbEJvdW5kYXJ5LCBcIk1BWF9MT0NBTF9TRUdTXCIsIDgpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoTG9jYWxCb3VuZGFyeSwgXCJTZWdtZW50XCIsIChfdGVtcCQ1ID0gZnVuY3Rpb24gU2VnbWVudCgpIHtcclxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWdtZW50KTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJzXCIsIG5ldyBBcnJheSg2KS5maWxsKDApKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkXCIsIHZvaWQgMCk7XHJcbiAgfSwgX3RlbXAkNSkpO1xyXG5cclxuICAvKlxyXG4gIENvcHlyaWdodCAoYykgMjAwOS0yMDEwIE1pa2tvIE1vbm9uZW4gbWVtb25AaW5zaWRlLm9yZ1xyXG4gIFJlY2FzdDRKIENvcHlyaWdodCAoYykgMjAxNSBQaW90ciBQaWFzdHVja2kgcGlvdHJAanRpbGlhLm9yZ1xyXG5cclxuICBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxyXG4gIHdhcnJhbnR5LiAgSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcclxuICBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxyXG4gIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxyXG4gIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcclxuICBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XHJcbiAgMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3RcclxuICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcclxuICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXHJcbiAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXHJcbiAgMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcclxuICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxyXG4gIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXHJcbiAgKi9cclxuICB2YXIgQ3Jvd2RBZ2VudEFuaW1hdGlvbiA9IGZ1bmN0aW9uIENyb3dkQWdlbnRBbmltYXRpb24oKSB7XHJcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ3Jvd2RBZ2VudEFuaW1hdGlvbik7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiYWN0aXZlXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5pdFBvc1wiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0YXJ0UG9zXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZW5kUG9zXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwicG9seVJlZlwiLCB2b2lkIDApO1xyXG5cclxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRcIiwgdm9pZCAwKTtcclxuXHJcbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0bWF4XCIsIHZvaWQgMCk7XHJcbiAgfTtcclxuXHJcbiAgLy8vIEBpbmdyb3VwIGNyb3dkXHJcblxyXG4gIHZhciBDcm93ZEFnZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcclxuICAgIC8vLyBUaGUgdHlwZSBvZiBuYXZpZ2F0aW9uIG1lc2ggcG9seWdvbiB0aGUgYWdlbnQgaXMgY3VycmVudGx5IHRyYXZlcnNpbmcuXHJcbiAgICAvLy8gQGluZ3JvdXAgY3Jvd2RcclxuICAgIC8vLyBUcnVlIGlmIHRoZSBhZ2VudCBpcyBhY3RpdmUsIGZhbHNlIGlmIHRoZSBhZ2VudCBpcyBpbiBhbiB1bnVzZWQgc2xvdCBpbiB0aGUgYWdlbnQgcG9vbC5cclxuICAgIC8vLyBUaGUgdHlwZSBvZiBtZXNoIHBvbHlnb24gdGhlIGFnZW50IGlzIHRyYXZlcnNpbmcuIChTZWU6ICNDcm93ZEFnZW50KVxyXG4gICAgLy8vIFRydWUgaWYgdGhlIGFnZW50IGhhcyB2YWxpZCBwYXRoICh0YXJnZXRTdGF0ZSA9PSBEVF9DUk9XREFHRU5UX1RBUkdFVF9WQUxJRCkgYW5kIHRoZSBwYXRoIGRvZXMgbm90IGxlYWQgdG8gdGhlIHJlcXVlc3RlZCBwb3NpdGlvbiwgZWxzZSBmYWxzZS5cclxuICAgIC8vLyBUaGUgcGF0aCBjb3JyaWRvciB0aGUgYWdlbnQgaXMgdXNpbmcuXHJcbiAgICAvLy8gVGhlIGxvY2FsIGJvdW5kYXJ5IGRhdGEgZm9yIHRoZSBhZ2VudC5cclxuICAgIC8vLyBUaW1lIHNpbmNlIHRoZSBhZ2VudCdzIHBhdGggY29ycmlkb3Igd2FzIG9wdGltaXplZC5cclxuICAgIC8vLyBUaGUga25vd24gbmVpZ2hib3JzIG9mIHRoZSBhZ2VudC5cclxuICAgIC8vLyBUaGUgZGVzaXJlZCBzcGVlZC5cclxuICAgIC8vLzwgVGhlIGN1cnJlbnQgYWdlbnQgcG9zaXRpb24uIFsoeCwgeSwgeildXHJcbiAgICAvLy88IEEgdGVtcG9yYXJ5IHZhbHVlIHVzZWQgdG8gYWNjdW11bGF0ZSBhZ2VudCBkaXNwbGFjZW1lbnQgZHVyaW5nIGl0ZXJhdGl2ZSBjb2xsaXNpb24gcmVzb2x1dGlvbi4gWyh4LCB5LCB6KV1cclxuICAgIC8vLzwgVGhlIGRlc2lyZWQgdmVsb2NpdHkgb2YgdGhlIGFnZW50LiBCYXNlZCBvbiB0aGUgY3VycmVudCBwYXRoLCBjYWxjdWxhdGVkIGZyb20gc2NyYXRjaCBlYWNoIGZyYW1lLiBbKHgsIHksIHopXVxyXG4gICAgLy8vPCBUaGUgZGVzaXJlZCB2ZWxvY2l0eSBhZGp1c3RlZCBieSBvYnN0YWNsZSBhdm9pZGFuY2UsIGNhbGN1bGF0ZWQgZnJvbSBzY3JhdGNoIGVhY2ggZnJhbWUuIFsoeCwgeSwgeildXHJcbiAgICAvLy88IFRoZSBhY3R1YWwgdmVsb2NpdHkgb2YgdGhlIGFnZW50LiBUaGUgY2hhbmdlIGZyb20gbnZlbCA9PiB2ZWwgaXMgY29uc3RyYWluZWQgYnkgbWF4IGFjY2VsZXJhdGlvbi4gWyh4LCB5LCB6KV1cclxuICAgIC8vLyBUaGUgYWdlbnQncyBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMuXHJcbiAgICAvLy8gVGhlIGxvY2FsIHBhdGggY29ycmlkb3IgY29ybmVycyBmb3IgdGhlIGFnZW50LlxyXG4gICAgLy8vPCBTdGF0ZSBvZiB0aGUgbW92ZW1lbnQgcmVxdWVzdC5cclxuICAgIC8vLzwgVGFyZ2V0IHBvbHlyZWYgb2YgdGhlIG1vdmVtZW50IHJlcXVlc3QuXHJcbiAgICAvLy88IFRhcmdldCBwb3NpdGlvbiBvZiB0aGUgbW92ZW1lbnQgcmVxdWVzdCAob3IgdmVsb2NpdHkgaW4gY2FzZSBvZiBEVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkuXHJcbiAgICAvLy88IFBhdGggZmluZGVyIHJlZi5cclxuICAgIC8vLzwgRmxhZyBpbmRpY2F0aW5nIHRoYXQgdGhlIGN1cnJlbnQgcGF0aCBpcyBiZWluZyByZXBsYW5uZWQuXHJcbiAgICAvLy8gPFRpbWUgc2luY2UgdGhlIGFnZW50J3MgdGFyZ2V0IHdhcyByZXBsYW5uZWQuXHJcbiAgICBmdW5jdGlvbiBDcm93ZEFnZW50KGlkeCkge1xyXG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ3Jvd2RBZ2VudCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZHhcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFjdGl2ZVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdGVcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBhcnRpYWxcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvcnJpZG9yXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJib3VuZGFyeVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wb2xvZ3lPcHRUaW1lXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJuZWlzXCIsIFtdKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRlc2lyZWRTcGVlZFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibnBvc1wiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZGlzcFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZHZlbFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibnZlbFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmVsXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXJhbXNcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvcm5lcnNcIiwgW10pO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGFyZ2V0U3RhdGVcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhcmdldFJlZlwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGFyZ2V0UG9zXCIsIG5ldyBBcnJheSgzKSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YXJnZXRQYXRocVJlcVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidGFyZ2V0UmVwbGFuXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0YXJnZXRSZXBsYW5UaW1lXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJhbmltYXRpb25cIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIHRoaXMuaWR4ID0gaWR4O1xyXG4gICAgICB0aGlzLmNvcnJpZG9yID0gbmV3IFBhdGhDb3JyaWRvcigpO1xyXG4gICAgICB0aGlzLmJvdW5kYXJ5ID0gbmV3IExvY2FsQm91bmRhcnkoKTtcclxuICAgICAgdGhpcy5hbmltYXRpb24gPSBuZXcgQ3Jvd2RBZ2VudEFuaW1hdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jcmVhdGVDbGFzcyhDcm93ZEFnZW50LCBbe1xyXG4gICAgICBrZXk6IFwiaW50ZWdyYXRlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlZ3JhdGUoZHQpIHtcclxuICAgICAgICAvLyBGYWtlIGR5bmFtaWMgY29uc3RyYWludC5cclxuICAgICAgICB2YXIgbWF4RGVsdGEgPSB0aGlzLnBhcmFtcy5tYXhBY2NlbGVyYXRpb24gKiBkdDtcclxuICAgICAgICB2YXIgZHYgPSBEZXRvdXJDb21tb24udlN1Yih0aGlzLm52ZWwsIHRoaXMudmVsKTtcclxuICAgICAgICB2YXIgZHMgPSBEZXRvdXJDb21tb24udkxlbihkdik7XHJcbiAgICAgICAgaWYgKGRzID4gbWF4RGVsdGEpIGR2ID0gRGV0b3VyQ29tbW9uLnZTY2FsZShkdiwgbWF4RGVsdGEgLyBkcyk7XHJcbiAgICAgICAgdGhpcy52ZWwgPSBEZXRvdXJDb21tb24udkFkZCh0aGlzLnZlbCwgZHYpOyAvLyBJbnRlZ3JhdGVcclxuXHJcbiAgICAgICAgaWYgKERldG91ckNvbW1vbi52TGVuKHRoaXMudmVsKSA+IDAuMDAwMSkgdGhpcy5ucG9zID0gRGV0b3VyQ29tbW9uLnZNYWQodGhpcy5ucG9zLCB0aGlzLnZlbCwgZHQpO2Vsc2UgRGV0b3VyQ29tbW9uLnZTZXQodGhpcy52ZWwsIDAsIDAsIDApO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJvdmVyT2ZmbWVzaENvbm5lY3Rpb25cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG92ZXJPZmZtZXNoQ29ubmVjdGlvbihyYWRpdXMpIHtcclxuICAgICAgICBpZiAodGhpcy5jb3JuZXJzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIG9mZk1lc2hDb25uZWN0aW9uID0gKHRoaXMuY29ybmVyc1t0aGlzLmNvcm5lcnMubGVuZ3RoIC0gMV0uZ2V0RmxhZ3MoKSAmIE5hdk1lc2hRdWVyeS5EVF9TVFJBSUdIVFBBVEhfT0ZGTUVTSF9DT05ORUNUSU9OKSAhPSAwID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAob2ZmTWVzaENvbm5lY3Rpb24pIHtcclxuICAgICAgICAgIGRpc3RTcSA9IERldG91ckNvbW1vbi52RGlzdDJEKHRoaXMubnBvcywgdGhpcy5jb3JuZXJzW3RoaXMuY29ybmVycy5sZW5ndGggLSAxXS5nZXRQb3MoKSk7XHJcbiAgICAgICAgICBpZiAoZGlzdFNxIDwgcmFkaXVzICogcmFkaXVzKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0RGlzdGFuY2VUb0dvYWxcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpc3RhbmNlVG9Hb2FsKHJhbmdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29ybmVycy5sZW5ndGggPT0gMCkgcmV0dXJuIHJhbmdlO1xyXG4gICAgICAgIHZhciBlbmRPZlBhdGggPSAodGhpcy5jb3JuZXJzW3RoaXMuY29ybmVycy5sZW5ndGggLSAxXS5nZXRGbGFncygpICYgTmF2TWVzaFF1ZXJ5LkRUX1NUUkFJR0hUUEFUSF9FTkQpICE9IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKGVuZE9mUGF0aCkgcmV0dXJuIE1hdGgubWluKERldG91ckNvbW1vbi52RGlzdDJEKHRoaXMubnBvcywgdGhpcy5jb3JuZXJzW3RoaXMuY29ybmVycy5sZW5ndGggLSAxXS5nZXRQb3MoKSksIHJhbmdlKTtcclxuICAgICAgICByZXR1cm4gcmFuZ2U7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNhbGNTbW9vdGhTdGVlckRpcmVjdGlvblwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FsY1Ntb290aFN0ZWVyRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaXIgPSBuZXcgQXJyYXkoMyk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jb3JuZXJzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICB2YXIgaXAwID0gMDtcclxuICAgICAgICAgIHZhciBpcDEgPSBNYXRoLm1pbigxLCB0aGlzLmNvcm5lcnMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICB2YXIgcDAgPSB0aGlzLmNvcm5lcnNbaXAwXS5nZXRQb3MoKTtcclxuICAgICAgICAgIHZhciBwMSA9IHRoaXMuY29ybmVyc1tpcDFdLmdldFBvcygpO1xyXG4gICAgICAgICAgdmFyIGRpcjAgPSBEZXRvdXJDb21tb24udlN1YihwMCwgdGhpcy5ucG9zKTtcclxuICAgICAgICAgIHZhciBkaXIxID0gRGV0b3VyQ29tbW9uLnZTdWIocDEsIHRoaXMubnBvcyk7XHJcbiAgICAgICAgICBkaXIwWzFdID0gMDtcclxuICAgICAgICAgIGRpcjFbMV0gPSAwO1xyXG4gICAgICAgICAgdmFyIGxlbjAgPSBEZXRvdXJDb21tb24udkxlbihkaXIwKTtcclxuICAgICAgICAgIHZhciBsZW4xID0gRGV0b3VyQ29tbW9uLnZMZW4oZGlyMSk7XHJcbiAgICAgICAgICBpZiAobGVuMSA+IDAuMDAxKSBkaXIxID0gRGV0b3VyQ29tbW9uLnZTY2FsZShkaXIxLCAxLjAgLyBsZW4xKTtcclxuICAgICAgICAgIGRpclswXSA9IGRpcjBbMF0gLSBkaXIxWzBdICogbGVuMCAqIDAuNTtcclxuICAgICAgICAgIGRpclsxXSA9IDA7XHJcbiAgICAgICAgICBkaXJbMl0gPSBkaXIwWzJdIC0gZGlyMVsyXSAqIGxlbjAgKiAwLjU7XHJcbiAgICAgICAgICBEZXRvdXJDb21tb24udk5vcm1hbGl6ZShkaXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRpcjtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiY2FsY1N0cmFpZ2h0U3RlZXJEaXJlY3Rpb25cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbGNTdHJhaWdodFN0ZWVyRGlyZWN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkaXIgPSBuZXcgQXJyYXkoMyk7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jb3JuZXJzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICBkaXIgPSBEZXRvdXJDb21tb24udlN1Yih0aGlzLmNvcm5lcnNbMF0uZ2V0UG9zKCksIHRoaXMubnBvcyk7XHJcbiAgICAgICAgICBkaXJbMV0gPSAwO1xyXG4gICAgICAgICAgRGV0b3VyQ29tbW9uLnZOb3JtYWxpemUoZGlyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkaXI7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInNldFRhcmdldFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGFyZ2V0KHJlZiwgcG9zKSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRSZWYgPSByZWY7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHRoaXMudGFyZ2V0UG9zLCBwb3MpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0UGF0aHFSZWYgPSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuICAgICAgICBpZiAodGhpcy50YXJnZXRSZWYgIT0gMCkgdGhpcy50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfUkVRVUVTVElORztlbHNlIHRoaXMudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0QWdlbnRJbmRleFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWdlbnRJbmRleCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pZHg7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImlzQWN0aXZlXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuXHJcbiAgICByZXR1cm4gQ3Jvd2RBZ2VudDtcclxuICB9KCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCBcIkRUX0NST1dEQUdFTlRfU1RBVEVfSU5WQUxJRFwiLCAwKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnQsIFwiRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HXCIsIDEpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgXCJEVF9DUk9XREFHRU5UX1NUQVRFX09GRk1FU0hcIiwgMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCBcIkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkVcIiwgMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCBcIkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRFwiLCAxKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KENyb3dkQWdlbnQsIFwiRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkFMSURcIiwgMik7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCBcIkRUX0NST1dEQUdFTlRfVEFSR0VUX1JFUVVFU1RJTkdcIiwgMyk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZEFnZW50LCBcIkRUX0NST1dEQUdFTlRfVEFSR0VUX1dBSVRJTkdfRk9SX1FVRVVFXCIsIDQpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgXCJEVF9DUk9XREFHRU5UX1RBUkdFVF9XQUlUSU5HX0ZPUl9QQVRIXCIsIDUpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2RBZ2VudCwgXCJEVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWVwiLCA2KTtcclxuXHJcbiAgdmFyIERlZmF1bHRRdWVyeUZpbHRlclxyXG4gIC8qZXh0ZW5kcyBRdWVyeUZpbHRlciovXHJcbiAgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gRGVmYXVsdFF1ZXJ5RmlsdGVyKCkge1xyXG4gICAgLy8gXHRcdHRoaXMubV9pbmNsdWRlRmxhZ3MgPSAweGZmZjtcclxuICAgIC8vIFx0XHR0aGlzLm1fZXhjbHVkZUZsYWdzID0gMDtcclxuICAgIC8vIFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IE5hdk1lc2guRFRfTUFYX0FSRUFTOyArK2kpIHtcclxuICAgIC8vIFx0XHRcdG1fYXJlYUNvc3RbaV0gPSAxLjA7XHJcbiAgICAvLyBcdFx0fVxyXG4gICAgLy8gXHR9XHJcbiAgICBmdW5jdGlvbiBEZWZhdWx0UXVlcnlGaWx0ZXIoKSB7XHJcbiAgICAgIHZhciBpbmNsdWRlRmxhZ3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDB4ZmZmZjtcclxuICAgICAgdmFyIGV4Y2x1ZGVGbGFncyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDtcclxuICAgICAgdmFyIGFyZWFDb3N0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBuZXcgQXJyYXkoTmF2TWVzaC5EVF9NQVhfQVJFQVMpLmZpbGwoMSwgMCwgTmF2TWVzaC5EVF9NQVhfQVJFQVMpO1xyXG5cclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERlZmF1bHRRdWVyeUZpbHRlcik7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX2V4Y2x1ZGVGbGFnc1wiLCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1faW5jbHVkZUZsYWdzXCIsIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9hcmVhQ29zdFwiLCBuZXcgQXJyYXkoTmF2TWVzaC5EVF9NQVhfQVJFQVMpKTtcclxuXHJcbiAgICAgIHRoaXMubV9pbmNsdWRlRmxhZ3MgPSBpbmNsdWRlRmxhZ3M7XHJcbiAgICAgIHRoaXMubV9leGNsdWRlRmxhZ3MgPSBleGNsdWRlRmxhZ3M7XHJcblxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IE1hdGgubWluKE5hdk1lc2guRFRfTUFYX0FSRUFTLCBhcmVhQ29zdC5sZW5ndGgpOyArK2kpIHtcclxuICAgICAgICB0aGlzLm1fYXJlYUNvc3RbaV0gPSBhcmVhQ29zdFtpXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yICh2YXIgX2kgPSBhcmVhQ29zdC5sZW5ndGg7IF9pIDwgTmF2TWVzaC5EVF9NQVhfQVJFQVM7ICsrX2kpIHtcclxuICAgICAgICB0aGlzLm1fYXJlYUNvc3RbX2ldID0gMS4wO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKERlZmF1bHRRdWVyeUZpbHRlciwgW3tcclxuICAgICAga2V5OiBcImFuZFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYW5kKHYxLCB2Mikge1xyXG4gICAgICAgIHZhciBoaSA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgdmFyIGxvdyA9IDB4N2ZmZmZmZmY7XHJcbiAgICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpO1xyXG4gICAgICAgIHZhciBoaTIgPSB+fih2MiAvIGhpKTtcclxuICAgICAgICB2YXIgbG93MSA9IHYxICYgbG93O1xyXG4gICAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7XHJcbiAgICAgICAgdmFyIGggPSBoaTEgJiBoaTI7XHJcbiAgICAgICAgdmFyIGwgPSBsb3cxICYgbG93MjtcclxuICAgICAgICByZXR1cm4gaCAqIGhpICsgbDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwib3JcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9yKHYxLCB2Mikge1xyXG4gICAgICAgIHZhciBoaSA9IDB4ODAwMDAwMDA7XHJcbiAgICAgICAgdmFyIGxvdyA9IDB4N2ZmZmZmZmY7XHJcbiAgICAgICAgdmFyIGhpMSA9IH5+KHYxIC8gaGkpO1xyXG4gICAgICAgIHZhciBoaTIgPSB+fih2MiAvIGhpKTtcclxuICAgICAgICB2YXIgbG93MSA9IHYxICYgbG93O1xyXG4gICAgICAgIHZhciBsb3cyID0gdjIgJiBsb3c7XHJcbiAgICAgICAgdmFyIGggPSBoaTEgfCBoaTI7XHJcbiAgICAgICAgdmFyIGwgPSBsb3cxIHwgbG93MjtcclxuICAgICAgICByZXR1cm4gaCAqIGhpICsgbDtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicGFzc0ZpbHRlclwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGFzc0ZpbHRlcihyZWYsIHRpbGUsIHBvbHkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbmQocG9seS5mbGFncywgdGhpcy5tX2luY2x1ZGVGbGFncykgIT0gMCAmJiB0aGlzLmFuZChwb2x5LmZsYWdzLCB0aGlzLm1fZXhjbHVkZUZsYWdzKSA9PSAwO1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRDb3N0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb3N0KHBhLCBwYiwgcHJldlJlZiwgcHJldlRpbGUsIHByZXZQb2x5LCBjdXJSZWYsIGN1clRpbGUsIGN1clBvbHksIG5leHRSZWYsIG5leHRUaWxlLCBuZXh0UG9seSkge1xyXG4gICAgICAgIHJldHVybiBEZXRvdXJDb21tb24udkRpc3QyKHBhLCBwYikgKiB0aGlzLm1fYXJlYUNvc3RbY3VyUG9seS5nZXRBcmVhKCldO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIERlZmF1bHRRdWVyeUZpbHRlcjtcclxuICB9KCk7XHJcblxyXG4gIHZhciBDcm93ZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XHJcbiAgICBfY3JlYXRlQ2xhc3MoQ3Jvd2QsIFt7XHJcbiAgICAgIGtleTogXCJ0d2VlblwiLFxyXG4gICAgICAvLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIG5laWdoYm9ycyB0aGF0IGEgY3Jvd2QgYWdlbnQgY2FuIHRha2UgaW50byBhY2NvdW50XHJcbiAgICAgIC8vLyBmb3Igc3RlZXJpbmcgZGVjaXNpb25zLlxyXG4gICAgICAvLy8gQGluZ3JvdXAgY3Jvd2RcclxuICAgICAgLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBjb3JuZXJzIGEgY3Jvd2QgYWdlbnQgd2lsbCBsb29rIGFoZWFkIGluIHRoZSBwYXRoLlxyXG4gICAgICAvLy8gVGhpcyB2YWx1ZSBpcyB1c2VkIGZvciBzaXppbmcgdGhlIGNyb3dkIGFnZW50IGNvcm5lciBidWZmZXJzLlxyXG4gICAgICAvLy8gRHVlIHRvIHRoZSBiZWhhdmlvciBvZiB0aGUgY3Jvd2QgbWFuYWdlciwgdGhlIGFjdHVhbCBudW1iZXIgb2YgdXNlZnVsXHJcbiAgICAgIC8vLyBjb3JuZXJzIHdpbGwgYmUgb25lIGxlc3MgdGhhbiB0aGlzIG51bWJlci5cclxuICAgICAgLy8vIEBpbmdyb3VwIGNyb3dkXHJcbiAgICAgIC8vLyBUaGUgbWF4aW11bSBudW1iZXIgb2YgY3Jvd2QgYXZvaWRhbmNlIGNvbmZpZ3VyYXRpb25zIHN1cHBvcnRlZCBieSB0aGVcclxuICAgICAgLy8vIGNyb3dkIG1hbmFnZXIuXHJcbiAgICAgIC8vLyBAaW5ncm91cCBjcm93ZFxyXG4gICAgICAvLy8gQHNlZSBkdE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zLCBkdENyb3dkOjpzZXRPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcygpLCBkdENyb3dkOjpnZXRPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcygpLFxyXG4gICAgICAvLy8gZHRDcm93ZEFnZW50UGFyYW1zOjpvYnN0YWNsZUF2b2lkYW5jZVR5cGVcclxuICAgICAgLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBxdWVyeSBmaWx0ZXIgdHlwZXMgc3VwcG9ydGVkIGJ5IHRoZSBjcm93ZCBtYW5hZ2VyLlxyXG4gICAgICAvLy8gQGluZ3JvdXAgY3Jvd2RcclxuICAgICAgLy8vIEBzZWUgZHRRdWVyeUZpbHRlciwgZHRDcm93ZDo6Z2V0RmlsdGVyKCkgZHRDcm93ZDo6Z2V0RWRpdGFibGVGaWx0ZXIoKSxcclxuICAgICAgLy8vIGR0Q3Jvd2RBZ2VudFBhcmFtczo6cXVlcnlGaWx0ZXJUeXBlXHJcbiAgICAgIC8vLyBQcm92aWRlcyBuZWlnaGJvciBkYXRhIGZvciBhZ2VudHMgbWFuYWdlZCBieSB0aGUgY3Jvd2QuXHJcbiAgICAgIC8vLyBAaW5ncm91cCBjcm93ZFxyXG4gICAgICAvLy8gQHNlZSBkdENyb3dkQWdlbnQ6Om5laXMsIGR0Q3Jvd2RcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHR3ZWVuKHQsIHQwLCB0MSkge1xyXG4gICAgICAgIHJldHVybiBEZXRvdXJDb21tb24uY2xhbXAoKHQgLSB0MCkgLyAodDEgLSB0MCksIDAuMCwgMS4wKTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0TmVpZ2hib3Vyc1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmVpZ2hib3Vycyhwb3MsIGhlaWdodCwgcmFuZ2UsIHNraXAsIGFnZW50cywgZ3JpZCkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB2YXIgaWRzID0gZ3JpZC5xdWVyeUl0ZW1zKHBvc1swXSAtIHJhbmdlLCBwb3NbMl0gLSByYW5nZSwgcG9zWzBdICsgcmFuZ2UsIHBvc1syXSArIHJhbmdlKTtcclxuXHJcbiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGlkcyksXHJcbiAgICAgICAgICAgIF9zdGVwO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gX3N0ZXAudmFsdWU7XHJcbiAgICAgICAgICAgIHZhciBfYWcgPSBhZ2VudHNbaWRdO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9hZyA9PSBza2lwIHx8ICFfYWcuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJUZXN0aW5nXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IC8vIENoZWNrIGZvciBvdmVybGFwLlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBkaWZmID0gRGV0b3VyQ29tbW9uLnZTdWIocG9zLCBfYWcubnBvcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZlsxXSkgPj0gKGhlaWdodCArIF9hZy5wYXJhbXMuaGVpZ2h0KSAvIDIuMCkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkaWZmWzFdID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBfZGlzdFNxciA9IERldG91ckNvbW1vbi52TGVuU3FyKGRpZmYpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9kaXN0U3FyID4gRGV0b3VyQ29tbW9uLnNxcihyYW5nZSkpIHtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hZGROZWlnaGJvdXIoaWQsIF9kaXN0U3FyLCByZXN1bHQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yLmYoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImFkZE5laWdoYm91clwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTmVpZ2hib3VyKGlkeCwgZGlzdCwgbmVpcykge1xyXG4gICAgICAgIC8vIEluc2VydCBuZWlnaGJvdXIgYmFzZWQgb24gdGhlIGRpc3RhbmNlLlxyXG4gICAgICAgIHZhciBuZWkgPSBuZXcgdGhpcy5Dcm93ZE5laWdoYm9yKGlkeCwgZGlzdCk7XHJcbiAgICAgICAgbmVpcy5wdXNoKG5laSk7XHJcbiAgICAgICAgbmVpcy5zb3J0KGZ1bmN0aW9uIChvMSwgbzIpIHtcclxuICAgICAgICAgIHJldHVybiBvMS5kaXN0IC0gbzIuZGlzdDtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkVG9PcHRRdWV1ZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9PcHRRdWV1ZShuZXdhZywgYWdlbnRzKSB7XHJcbiAgICAgICAgLy8gSW5zZXJ0IG5laWdoYm91ciBiYXNlZCBvbiBncmVhdGVzdCB0aW1lLlxyXG4gICAgICAgIGFnZW50cy5wdXNoKG5ld2FnKTtcclxuICAgICAgfSAvLyBJbnNlcnQgbmVpZ2hib3VyIGJhc2VkIG9uIGdyZWF0ZXN0IHRpbWUuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkVG9QYXRoUXVldWVcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFRvUGF0aFF1ZXVlKG5ld2FnLCBhZ2VudHMpIHtcclxuICAgICAgICBhZ2VudHMucHVzaChuZXdhZyk7XHJcbiAgICAgIH0gLy8vXHJcbiAgICAgIC8vLyBJbml0aWFsaXplcyB0aGUgY3Jvd2QuXHJcbiAgICAgIC8vLyBNYXkgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHRvIHB1cmdlIGFuZCByZS1pbml0aWFsaXplIHRoZSBjcm93ZC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gbWF4QWdlbnRzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhZ2VudHMgdGhlIGNyb3dkIGNhbiBtYW5hZ2UuIFtMaW1pdDogPj0gMV1cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gbWF4QWdlbnRSYWRpdXMgVGhlIG1heGltdW0gcmFkaXVzIG9mIGFueSBhZ2VudCB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGNyb3dkLiBbTGltaXQ6ID4gMF1cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gbmF2IFRoZSBuYXZpZ2F0aW9uIG1lc2ggdG8gdXNlIGZvciBwbGFubmluZy5cclxuICAgICAgLy8vIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW5pdGlhbGl6YXRpb24gc3VjY2VlZGVkLlxyXG5cclxuICAgIH1dKTtcclxuXHJcbiAgICBmdW5jdGlvbiBDcm93ZChtYXhBZ2VudHMsIG1heEFnZW50UmFkaXVzLCBuYXYpIHtcclxuICAgICAgdmFyIF90ZW1wO1xyXG5cclxuICAgICAgdmFyIHF1ZXJ5RmlsdGVyRmFjdG9yeSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERlZmF1bHRRdWVyeUZpbHRlcigpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENyb3dkKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIkNyb3dkTmVpZ2hib3JcIiwgKF90ZW1wID0gLy8vIDwgVGhlIGluZGV4IG9mIHRoZSBuZWlnaGJvciBpbiB0aGUgY3Jvd2QuXHJcbiAgICAgIC8vLyA8IFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBjdXJyZW50IGFnZW50IGFuZCB0aGUgbmVpZ2hib3IuXHJcbiAgICAgIGZ1bmN0aW9uIENyb3dkTmVpZ2hib3VyKGlkeCwgZGlzdCkge1xyXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDcm93ZE5laWdoYm91cik7XHJcblxyXG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlkeFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaXN0XCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuaWR4ID0gaWR4O1xyXG4gICAgICAgIHRoaXMuZGlzdCA9IGRpc3Q7XHJcbiAgICAgIH0sIF90ZW1wKSk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX21heEFnZW50c1wiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9hZ2VudHNcIiwgW10pO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9hY3RpdmVBZ2VudHNcIiwgW10pO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9wYXRocVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9vYnN0YWNsZVF1ZXJ5UGFyYW1zXCIsIG5ldyBBcnJheShDcm93ZC5EVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVMpKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fb2JzdGFjbGVRdWVyeVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9ncmlkXCIsIHZvaWQgMCk7XHJcblxyXG4gICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJtX2V4dFwiLCBuZXcgQXJyYXkoMykpO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9maWx0ZXJzXCIsIG5ldyBBcnJheShDcm93ZC5EVF9DUk9XRF9NQVhfUVVFUllfRklMVEVSX1RZUEUpKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fbWF4QWdlbnRSYWRpdXNcIiwgdm9pZCAwKTtcclxuXHJcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1fdmVsb2NpdHlTYW1wbGVDb3VudFwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwibV9uYXZxdWVyeVwiLCB2b2lkIDApO1xyXG5cclxuICAgICAgdGhpcy5tX21heEFnZW50cyA9IG1heEFnZW50cztcclxuICAgICAgdGhpcy5tX21heEFnZW50UmFkaXVzID0gbWF4QWdlbnRSYWRpdXM7XHJcbiAgICAgIERldG91ckNvbW1vbi52U2V0KHRoaXMubV9leHQsIHRoaXMubV9tYXhBZ2VudFJhZGl1cyAqIDIuMCwgdGhpcy5tX21heEFnZW50UmFkaXVzICogMS41LCB0aGlzLm1fbWF4QWdlbnRSYWRpdXMgKiAyLjApO1xyXG4gICAgICB0aGlzLm1fZ3JpZCA9IG5ldyBQcm94aW1pdHlHcmlkKHRoaXMubV9tYXhBZ2VudHMgKiA0LCB0aGlzLm1fbWF4QWdlbnRSYWRpdXMgKiAzKTtcclxuICAgICAgdGhpcy5tX29ic3RhY2xlUXVlcnkgPSBuZXcgT2JzdGFjbGVBdm9pZGFuY2VRdWVyeSg2LCA4KTtcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgQ3Jvd2QuRFRfQ1JPV0RfTUFYX1FVRVJZX0ZJTFRFUl9UWVBFOyBpKyspIHtcclxuICAgICAgICB0aGlzLm1fZmlsdGVyc1tpXSA9IHF1ZXJ5RmlsdGVyRmFjdG9yeS5hcHBseShpKTtcclxuICAgICAgfSAvLyBJbml0IG9ic3RhY2xlIHF1ZXJ5IHBhcmFtcy5cclxuXHJcblxyXG4gICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgQ3Jvd2QuRFRfQ1JPV0RfTUFYX09CU1RBVk9JREFOQ0VfUEFSQU1TOyArK19pKSB7XHJcbiAgICAgICAgdGhpcy5tX29ic3RhY2xlUXVlcnlQYXJhbXNbX2ldID0gbmV3IE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKCk7XHJcbiAgICAgIH0gLy8gQWxsb2NhdGUgdGVtcCBidWZmZXIgZm9yIG1lcmdpbmcgcGF0aHMuXHJcblxyXG5cclxuICAgICAgdGhpcy5tX3BhdGhxID0gbmV3IFBhdGhRdWV1ZShDcm93ZC5NQVhfUEFUSFFVRVVFX05PREVTLCBuYXYpO1xyXG4gICAgICB0aGlzLm1fYWdlbnRzID0gbmV3IEFycmF5KHRoaXMubV9tYXhBZ2VudHMpO1xyXG4gICAgICB0aGlzLm1fYWN0aXZlQWdlbnRzID0gW107XHJcblxyXG4gICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCB0aGlzLm1fbWF4QWdlbnRzOyArK19pMikge1xyXG4gICAgICAgIHRoaXMubV9hZ2VudHNbX2kyXSA9IG5ldyBDcm93ZEFnZW50KF9pMik7XHJcbiAgICAgICAgdGhpcy5tX2FnZW50c1tfaTJdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICB9IC8vIFRoZSBuYXZxdWVyeSBpcyBtb3N0bHkgdXNlZCBmb3IgbG9jYWwgc2VhcmNoZXMsIG5vIG5lZWQgZm9yIGxhcmdlXHJcbiAgICAgIC8vIG5vZGUgcG9vbC5cclxuXHJcblxyXG4gICAgICB0aGlzLm1fbmF2cXVlcnkgPSBuZXcgTmF2TWVzaFF1ZXJ5KG5hdik7XHJcbiAgICB9IC8vLyBTZXRzIHRoZSBzaGFyZWQgYXZvaWRhbmNlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBzcGVjaWZpZWQgaW5kZXguXHJcbiAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGluZGV4LiBbTGltaXRzOiAwIDw9IHZhbHVlIDxcclxuICAgIC8vLyAjRFRfQ1JPV0RfTUFYX09CU1RBVk9JREFOQ0VfUEFSQU1TXVxyXG4gICAgLy8vIEBwYXJhbVtpbl0gcGFyYW1zIFRoZSBuZXcgY29uZmlndXJhdGlvbi5cclxuXHJcblxyXG4gICAgX2NyZWF0ZUNsYXNzKENyb3dkLCBbe1xyXG4gICAgICBrZXk6IFwic2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKGlkeCwgcGFyYW1zKSB7XHJcbiAgICAgICAgaWYgKGlkeCA+PSAwICYmIGlkeCA8IENyb3dkLkRUX0NST1dEX01BWF9PQlNUQVZPSURBTkNFX1BBUkFNUykge1xyXG4gICAgICAgICAgdGhpcy5tX29ic3RhY2xlUXVlcnlQYXJhbXNbaWR4XSA9IHBhcmFtcztcclxuICAgICAgICB9XHJcbiAgICAgIH0gLy8vIEdldHMgdGhlIHNoYXJlZCBhdm9pZGFuY2UgY29uZmlndXJhdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBpbmRleC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBpbmRleCBvZiB0aGUgY29uZmlndXJhdGlvbiB0byByZXRyZWl2ZS5cclxuICAgICAgLy8vIFtMaW1pdHM6IDAgPD0gdmFsdWUgPCAjRFRfQ1JPV0RfTUFYX09CU1RBVk9JREFOQ0VfUEFSQU1TXVxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgcmVxdWVzdGVkIGNvbmZpZ3VyYXRpb24uXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXNcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zKGlkeCkge1xyXG4gICAgICAgIGlmIChpZHggPj0gMCAmJiBpZHggPCBDcm93ZC5EVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVMpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLm1fb2JzdGFjbGVRdWVyeVBhcmFtc1tpZHhdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH0gLy8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBhZ2VudHMgdGhhdCBjYW4gYmUgbWFuYWdlZCBieSB0aGUgb2JqZWN0LlxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgbWF4aW11bSBudW1iZXIgb2YgYWdlbnRzLlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldEFnZW50Q291bnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFnZW50Q291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubV9tYXhBZ2VudHM7XHJcbiAgICAgIH0gLy8vIEdldHMgdGhlIHNwZWNpZmllZCBhZ2VudCBmcm9tIHRoZSBwb29sLlxyXG4gICAgICAvLy8gQHBhcmFtW2luXSBpZHggVGhlIGFnZW50IGluZGV4LiBbTGltaXRzOiAwIDw9IHZhbHVlIDwgI2dldEFnZW50Q291bnQoKV1cclxuICAgICAgLy8vIEByZXR1cm4gVGhlIHJlcXVlc3RlZCBhZ2VudC5cclxuICAgICAgLy8vIEFnZW50cyBpbiB0aGUgcG9vbCBtYXkgbm90IGJlIGluIHVzZS4gQ2hlY2sgI2R0Q3Jvd2RBZ2VudC5hY3RpdmUgYmVmb3JlIHVzaW5nIHRoZSByZXR1cm5lZCBvYmplY3QuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0QWdlbnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFnZW50KGlkeCkge1xyXG4gICAgICAgIHJldHVybiBpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fYWdlbnRzLmxlbmd0aCA/IG51bGwgOiB0aGlzLm1fYWdlbnRzW2lkeF07XHJcbiAgICAgIH0gLy8vXHJcbiAgICAgIC8vLyBHZXRzIHRoZSBzcGVjaWZpZWQgYWdlbnQgZnJvbSB0aGUgcG9vbC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRoZSByZXF1ZXN0ZWQgYWdlbnQuXHJcbiAgICAgIC8vLyBBZ2VudHMgaW4gdGhlIHBvb2wgbWF5IG5vdCBiZSBpbiB1c2UuIENoZWNrICNkdENyb3dkQWdlbnQuYWN0aXZlIGJlZm9yZSB1c2luZyB0aGUgcmV0dXJuZWQgb2JqZWN0LlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldEVkaXRhYmxlQWdlbnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVkaXRhYmxlQWdlbnQoaWR4KSB7XHJcbiAgICAgICAgcmV0dXJuIGlkeCA8IDAgfHwgaWR4ID49IHRoaXMubV9hZ2VudHMubGVuZ3RoID8gbnVsbCA6IHRoaXMubV9hZ2VudHNbaWR4XTtcclxuICAgICAgfSAvLy8gVXBkYXRlcyB0aGUgc3BlY2lmaWVkIGFnZW50J3MgY29uZmlndXJhdGlvbi5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIHBhcmFtcyBUaGUgbmV3IGFnZW50IGNvbmZpZ3VyYXRpb24uXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidXBkYXRlQWdlbnRQYXJhbWV0ZXJzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVBZ2VudFBhcmFtZXRlcnMoaWR4LCBwYXJhbXMpIHtcclxuICAgICAgICBpZiAoaWR4IDwgMCB8fCBpZHggPj0gdGhpcy5tX21heEFnZW50cykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tX2FnZW50c1tpZHhdLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgfSAvLy8gQWRkcyBhIG5ldyBhZ2VudCB0byB0aGUgY3Jvd2QuXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIHBvcyBUaGUgcmVxdWVzdGVkIHBvc2l0aW9uIG9mIHRoZSBhZ2VudC4gWyh4LCB5LCB6KV1cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gcGFyYW1zIFRoZSBjb25maWd1dGF0aW9uIG9mIHRoZSBhZ2VudC5cclxuICAgICAgLy8vIEByZXR1cm4gVGhlIGluZGV4IG9mIHRoZSBhZ2VudCBpbiB0aGUgYWdlbnQgcG9vbC4gT3IgLTEgaWYgdGhlIGFnZW50XHJcbiAgICAgIC8vLyBjb3VsZCBub3QgYmUgYWRkZWQuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiYWRkQWdlbnRcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEFnZW50KHBvcywgcGFyYW1zKSB7XHJcbiAgICAgICAgLy8gRmluZCBlbXB0eSBzbG90LlxyXG4gICAgICAgIHZhciBpZHggPSAtMTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbWF4QWdlbnRzOyArK2kpIHtcclxuICAgICAgICAgIGlmICghdGhpcy5tX2FnZW50c1tpXS5hY3RpdmUpIHtcclxuICAgICAgICAgICAgaWR4ID0gaTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaWR4ID09IC0xKSB7XHJcbiAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYWcgPSB0aGlzLm1fYWdlbnRzW2lkeF07XHJcbiAgICAgICAgdGhpcy51cGRhdGVBZ2VudFBhcmFtZXRlcnMoaWR4LCBwYXJhbXMpOyAvLyBGaW5kIG5lYXJlc3QgcG9zaXRpb24gb24gbmF2bWVzaCBhbmQgcGxhY2UgdGhlIGFnZW50IHRoZXJlLlxyXG5cclxuICAgICAgICB2YXIgbmVhcmVzdCA9IHRoaXMubV9uYXZxdWVyeS5maW5kTmVhcmVzdFBvbHkocG9zLCB0aGlzLm1fZXh0LCB0aGlzLm1fZmlsdGVyc1thZy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7XHJcbiAgICAgICAgYWcuY29ycmlkb3IucmVzZXQobmVhcmVzdC5nZXROZWFyZXN0UmVmKCksIG5lYXJlc3QuZ2V0TmVhcmVzdFBvcygpKTtcclxuICAgICAgICBhZy5ib3VuZGFyeS5yZXNldCgpO1xyXG4gICAgICAgIGFnLnBhcnRpYWwgPSBmYWxzZTtcclxuICAgICAgICBhZy50b3BvbG9neU9wdFRpbWUgPSAwO1xyXG4gICAgICAgIGFnLnRhcmdldFJlcGxhblRpbWUgPSAwO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52U2V0KGFnLmR2ZWwsIDAsIDAsIDApO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52U2V0KGFnLm52ZWwsIDAsIDAsIDApO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52U2V0KGFnLnZlbCwgMCwgMCwgMCk7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGFnLm5wb3MsIG5lYXJlc3QuZ2V0TmVhcmVzdFBvcygpKTtcclxuICAgICAgICBhZy5kZXNpcmVkU3BlZWQgPSAwO1xyXG5cclxuICAgICAgICBpZiAobmVhcmVzdC5nZXROZWFyZXN0UmVmKCkgIT0gMCkge1xyXG4gICAgICAgICAgYWcuc3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfV0FMS0lORztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYWcuc3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfSU5WQUxJRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFnLnRhcmdldFN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FO1xyXG4gICAgICAgIGFnLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIGlkeDtcclxuICAgICAgfSAvLy8gUmVtb3ZlcyB0aGUgYWdlbnQgZnJvbSB0aGUgY3Jvd2QuXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIGlkeCBUaGUgYWdlbnQgaW5kZXguIFtMaW1pdHM6IDAgPD0gdmFsdWUgPCAjZ2V0QWdlbnRDb3VudCgpXVxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBhZ2VudCBpcyBkZWFjdGl2YXRlZCBhbmQgd2lsbCBubyBsb25nZXIgYmUgcHJvY2Vzc2VkLiBJdHNcclxuICAgICAgLy8vICNkdCBvYmplY3RcclxuICAgICAgLy8vIGlzIG5vdCByZW1vdmVkIGZyb20gdGhlIHBvb2wuIEl0IGlzIG1hcmtlZCBhcyBpbmFjdGl2ZSBzbyB0aGF0IGl0IGlzXHJcbiAgICAgIC8vLyBhdmFpbGFibGUgZm9yIHJldXNlLlxyXG4gICAgICAvLy8gUmVtb3ZlcyB0aGUgYWdlbnQgZnJvbSB0aGUgY3Jvd2QuXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIGlkeCBUaGUgYWdlbnQgaW5kZXguIFtMaW1pdHM6IDAgPD0gdmFsdWUgPCAjZ2V0QWdlbnRDb3VudCgpXVxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJlbW92ZUFnZW50XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBZ2VudChpZHgpIHtcclxuICAgICAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgdGhpcy5tX21heEFnZW50cykge1xyXG4gICAgICAgICAgdGhpcy5tX2FnZW50c1tpZHhdLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVxdWVzdE1vdmVUYXJnZXRSZXBsYW5cIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3RNb3ZlVGFyZ2V0UmVwbGFuKGFnLCByZWYsIHBvcykge1xyXG4gICAgICAgIGFnLnNldFRhcmdldChyZWYsIHBvcyk7XHJcbiAgICAgICAgYWcudGFyZ2V0UmVwbGFuID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSAvLy8gU3VibWl0cyBhIG5ldyBtb3ZlIHJlcXVlc3QgZm9yIHRoZSBzcGVjaWZpZWQgYWdlbnQuXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIGlkeCBUaGUgYWdlbnQgaW5kZXguIFtMaW1pdHM6IDAgPD0gdmFsdWUgPCAjZ2V0QWdlbnRDb3VudCgpXVxyXG4gICAgICAvLy8gQHBhcmFtW2luXSByZWYgVGhlIHBvc2l0aW9uJ3MgcG9seWdvbiByZWZlcmVuY2UuXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIHBvcyBUaGUgcG9zaXRpb24gd2l0aGluIHRoZSBwb2x5Z29uLiBbKHgsIHksIHopXVxyXG4gICAgICAvLy8gQHJldHVybiBUcnVlIGlmIHRoZSByZXF1ZXN0IHdhcyBzdWNjZXNzZnVsbHkgc3VibWl0dGVkLlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoaXMgbWV0aG9kIGlzIHVzZWQgd2hlbiBhIG5ldyB0YXJnZXQgaXMgc2V0LlxyXG4gICAgICAvLy9cclxuICAgICAgLy8vIFRoZSBwb3NpdGlvbiB3aWxsIGJlIGNvbnN0cmFpbmVkIHRvIHRoZSBzdXJmYWNlIG9mIHRoZSBuYXZpZ2F0aW9uIG1lc2guXHJcbiAgICAgIC8vL1xyXG4gICAgICAvLy8gVGhlIHJlcXVlc3Qgd2lsbCBiZSBwcm9jZXNzZWQgZHVyaW5nIHRoZSBuZXh0ICN1cGRhdGUoKS5cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJyZXF1ZXN0TW92ZVRhcmdldFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdE1vdmVUYXJnZXQoaWR4LCByZWYsIHBvcykge1xyXG4gICAgICAgIGlmIChpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fbWF4QWdlbnRzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVmID09IDApIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBhZyA9IHRoaXMubV9hZ2VudHNbaWR4XTsgLy8gSW5pdGlhbGl6ZSByZXF1ZXN0LlxyXG5cclxuICAgICAgICBhZy5zZXRUYXJnZXQocmVmLCBwb3MpO1xyXG4gICAgICAgIGFnLnRhcmdldFJlcGxhbiA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9IC8vLyBTdWJtaXRzIGEgbmV3IG1vdmUgcmVxdWVzdCBmb3IgdGhlIHNwZWNpZmllZCBhZ2VudC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldXHJcbiAgICAgIC8vLyBAcGFyYW1baW5dIHZlbCBUaGUgbW92ZW1lbnQgdmVsb2NpdHkuIFsoeCwgeSwgeildXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxseSBzdWJtaXR0ZWQuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwicmVxdWVzdE1vdmVWZWxvY2l0eVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdE1vdmVWZWxvY2l0eShpZHgsIHZlbCkge1xyXG4gICAgICAgIGlmIChpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fbWF4QWdlbnRzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZyA9IHRoaXMubV9hZ2VudHNbaWR4XTsgLy8gSW5pdGlhbGl6ZSByZXF1ZXN0LlxyXG5cclxuICAgICAgICBhZy50YXJnZXRSZWYgPSAwO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52Q29weShhZy50YXJnZXRQb3MsIHZlbCk7XHJcbiAgICAgICAgYWcudGFyZ2V0UGF0aHFSZWYgPSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuICAgICAgICBhZy50YXJnZXRSZXBsYW4gPSBmYWxzZTtcclxuICAgICAgICBhZy50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkVMT0NJVFk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gLy8vIFJlc2V0cyBhbnkgcmVxdWVzdCBmb3IgdGhlIHNwZWNpZmllZCBhZ2VudC5cclxuICAgICAgLy8vIEBwYXJhbVtpbl0gaWR4IFRoZSBhZ2VudCBpbmRleC4gW0xpbWl0czogMCA8PSB2YWx1ZSA8ICNnZXRBZ2VudENvdW50KCldXHJcbiAgICAgIC8vLyBAcmV0dXJuIFRydWUgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxseSByZXNldGVkLlxyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInJlc2V0TW92ZVRhcmdldFwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRNb3ZlVGFyZ2V0KGlkeCkge1xyXG4gICAgICAgIGlmIChpZHggPCAwIHx8IGlkeCA+PSB0aGlzLm1fbWF4QWdlbnRzKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZyA9IHRoaXMubV9hZ2VudHNbaWR4XTsgLy8gSW5pdGlhbGl6ZSByZXF1ZXN0LlxyXG5cclxuICAgICAgICBhZy50YXJnZXRSZWYgPSAwO1xyXG4gICAgICAgIERldG91ckNvbW1vbi52U2V0KGFnLnRhcmdldFBvcywgMCwgMCwgMCk7XHJcbiAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoYWcuZHZlbCwgMCwgMCwgMCk7XHJcbiAgICAgICAgYWcudGFyZ2V0UGF0aHFSZWYgPSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuICAgICAgICBhZy50YXJnZXRSZXBsYW4gPSBmYWxzZTtcclxuICAgICAgICBhZy50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSAvLy8gR2V0cyB0aGUgYWN0aXZlIGFnZW50cyBsZXQgdGhlIGFnZW50IHBvb2wuXHJcbiAgICAgIC8vLyBAcGFyYW1bb3V0XSBhZ2VudHMgQW4gYXJyYXkgb2YgYWdlbnQgcG9pbnRlcnMuIFsoI2R0ICopICogbWF4QWdlbnRzXVxyXG4gICAgICAvLy8gQHBhcmFtW2luXSBtYXhBZ2VudHMgVGhlIHNpemUgb2YgdGhlIGNyb3dkIGFnZW50IGFycmF5LlxyXG4gICAgICAvLy8gQHJldHVybiBUaGUgbnVtYmVyIG9mIGFnZW50cyByZXR1cm5lZCBpbiBAcCBhZ2VudHMuXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwiZ2V0QWN0aXZlQWdlbnRzXCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY3RpdmVBZ2VudHMoKSB7XHJcbiAgICAgICAgdmFyIGFnZW50cyA9IFtdOyAvL25ldyBBcnJheSh0aGlzLm1fbWF4QWdlbnRzKTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbWF4QWdlbnRzOyArK2kpIHtcclxuICAgICAgICAgIGlmICh0aGlzLm1fYWdlbnRzW2ldLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICBhZ2VudHMucHVzaCh0aGlzLm1fYWdlbnRzW2ldKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhZ2VudHM7XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInVwZGF0ZU1vdmVSZXF1ZXN0XCIsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNb3ZlUmVxdWVzdCgpIHtcclxuICAgICAgICB2YXIgcXVldWUgPSBuZXcgUHJpb3JpdHlRdWV1ZShmdW5jdGlvbiAoYTEsIGEyKSB7XHJcbiAgICAgICAgICByZXR1cm4gYTIudGFyZ2V0UmVwbGFuVGltZSAtIGExLnRhcmdldFJlcGxhblRpbWU7XHJcbiAgICAgICAgfSk7IC8vIEZpcmUgb2ZmIG5ldyByZXF1ZXN0cy5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1fbWF4QWdlbnRzOyArK2kpIHtcclxuICAgICAgICAgIC8vIGlmKGk9PTEyKVxyXG4gICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiQmFkIGFnZW50LlwiKVxyXG4gICAgICAgICAgdmFyIF9hZzIgPSB0aGlzLm1fYWdlbnRzW2ldO1xyXG5cclxuICAgICAgICAgIGlmICghX2FnMi5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzIuc3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX0lOVkFMSUQpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoX2FnMi50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1JFUVVFU1RJTkcpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSBfYWcyLmNvcnJpZG9yLmdldFBhdGgoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXRoLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkVtcHR5IHBhdGhcIik7XHJcbiAgICAgICAgICAgIH0gLy8gUXVpY2sgc2VhcmNoIHRvd2FyZHMgdGhlIGdvYWwuXHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5tX25hdnF1ZXJ5LmluaXRTbGljZWRGaW5kUGF0aChwYXRoWzBdLCBfYWcyLnRhcmdldFJlZiwgX2FnMi5ucG9zLCBfYWcyLnRhcmdldFBvcywgdGhpcy5tX2ZpbHRlcnNbX2FnMi5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMubV9uYXZxdWVyeS51cGRhdGVTbGljZWRGaW5kUGF0aChDcm93ZC5NQVhfSVRFUik7XHJcbiAgICAgICAgICAgIHZhciBwYXRoRm91bmQgPSB2b2lkIDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoX2FnMi50YXJnZXRSZXBsYW4pIC8vICYmIG5wYXRoID4gMTApXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHVzZSBleGlzdGluZyBzdGVhZHkgcGF0aCBkdXJpbmcgcmVwbGFuIGlmXHJcbiAgICAgICAgICAgICAgICAvLyBwb3NzaWJsZS5cclxuICAgICAgICAgICAgICAgIHBhdGhGb3VuZCA9IHRoaXMubV9uYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoUGFydGlhbChwYXRoKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIFRyeSB0byBtb3ZlIHRvd2FyZHMgdGFyZ2V0IHdoZW4gZ29hbCBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgIHBhdGhGb3VuZCA9IHRoaXMubV9uYXZxdWVyeS5maW5hbGl6ZVNsaWNlZEZpbmRQYXRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciByZXFQYXRoID0gcGF0aEZvdW5kLmdldFJlZnMoKTtcclxuICAgICAgICAgICAgdmFyIHJlcVBvcyA9IG5ldyBBcnJheSgzKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcGF0aEZvdW5kLmdldFN0YXR1cygpID09IFN0YXR1cy5GQUlMVVJFICYmIHJlcVBhdGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIC8vIEluIHByb2dyZXNzIG9yIHN1Y2NlZWQuXHJcbiAgICAgICAgICAgICAgaWYgKHJlcVBhdGhbcmVxUGF0aC5sZW5ndGggLSAxXSAhPSBfYWcyLnRhcmdldFJlZikge1xyXG4gICAgICAgICAgICAgICAgLy8gUGFydGlhbCBwYXRoLCBjb25zdHJhaW4gdGFyZ2V0IHBvc2l0aW9uIGluc2lkZSB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGxhc3QgcG9seWdvbi5cclxuICAgICAgICAgICAgICAgIHZhciBjciA9IHRoaXMubV9uYXZxdWVyeS5jbG9zZXN0UG9pbnRPblBvbHkocmVxUGF0aFtyZXFQYXRoLmxlbmd0aCAtIDFdLCBfYWcyLnRhcmdldFBvcyk7XHJcbiAgICAgICAgICAgICAgICByZXFQb3MgPSBjci5nZXRDbG9zZXN0KCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShyZXFQb3MsIF9hZzIudGFyZ2V0UG9zKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gQ291bGQgbm90IGZpbmQgcGF0aCwgc3RhcnQgdGhlIHJlcXVlc3QgZnJvbSBjdXJyZW50XHJcbiAgICAgICAgICAgICAgLy8gbG9jYXRpb24uXHJcbiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KHJlcVBvcywgX2FnMi5ucG9zKTtcclxuICAgICAgICAgICAgICByZXFQYXRoID0gW107XHJcbiAgICAgICAgICAgICAgcmVxUGF0aC5wdXNoKHBhdGhbMF0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfYWcyLmNvcnJpZG9yLnNldENvcnJpZG9yKHJlcVBvcywgcmVxUGF0aCk7XHJcblxyXG4gICAgICAgICAgICBfYWcyLmJvdW5kYXJ5LnJlc2V0KCk7XHJcblxyXG4gICAgICAgICAgICBfYWcyLnBhcnRpYWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXFQYXRoW3JlcVBhdGgubGVuZ3RoIC0gMV0gPT0gX2FnMi50YXJnZXRSZWYpIHtcclxuICAgICAgICAgICAgICBfYWcyLnRhcmdldFN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WQUxJRDtcclxuICAgICAgICAgICAgICBfYWcyLnRhcmdldFJlcGxhblRpbWUgPSAwLjA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gVGhlIHBhdGggaXMgbG9uZ2VyIG9yIHBvdGVudGlhbGx5IHVucmVhY2hhYmxlLCBmdWxsIHBsYW4uXHJcbiAgICAgICAgICAgICAgX2FnMi50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfV0FJVElOR19GT1JfUVVFVUU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoX2FnMi50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1dBSVRJTkdfRk9SX1FVRVVFKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkVG9QYXRoUXVldWUoX2FnMiwgcXVldWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2hpbGUgKCFxdWV1ZS5pc0VtcHR5KCkpIHtcclxuICAgICAgICAgIHZhciBfYWczID0gcXVldWUucG9sbCgpO1xyXG5cclxuICAgICAgICAgIF9hZzMudGFyZ2V0UGF0aHFSZWYgPSB0aGlzLm1fcGF0aHEucmVxdWVzdChfYWczLmNvcnJpZG9yLmdldExhc3RQb2x5KCksIF9hZzMudGFyZ2V0UmVmLCBfYWczLmNvcnJpZG9yLmdldFRhcmdldCgpLCBfYWczLnRhcmdldFBvcywgdGhpcy5tX2ZpbHRlcnNbX2FnMy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzMudGFyZ2V0UGF0aHFSZWYgIT0gUGF0aFF1ZXVlLkRUX1BBVEhRX0lOVkFMSUQpIHtcclxuICAgICAgICAgICAgX2FnMy50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfV0FJVElOR19GT1JfUEFUSDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIFVwZGF0ZSByZXF1ZXN0cy5cclxuXHJcblxyXG4gICAgICAgIHRoaXMubV9wYXRocS51cGRhdGUoQ3Jvd2QuTUFYX0lURVJTX1BFUl9VUERBVEUpOyAvLyBQcm9jZXNzIHBhdGggcmVzdWx0cy5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kzID0gMDsgX2kzIDwgdGhpcy5tX21heEFnZW50czsgKytfaTMpIHtcclxuICAgICAgICAgIHZhciBfYWc0ID0gdGhpcy5tX2FnZW50c1tfaTNdO1xyXG5cclxuICAgICAgICAgIGlmICghX2FnNC5hY3RpdmUpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoX2FnNC50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1dBSVRJTkdfRk9SX1BBVEgpIHtcclxuICAgICAgICAgICAgLy8gUG9sbCBwYXRoIHF1ZXVlLlxyXG4gICAgICAgICAgICB2YXIgc3RhdHVzID0gdGhpcy5tX3BhdGhxLmdldFJlcXVlc3RTdGF0dXMoX2FnNC50YXJnZXRQYXRocVJlZik7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RhdHVzICE9IG51bGwgJiYgc3RhdHVzID09IFN0YXR1cy5GQUlMVVJFKSB7XHJcbiAgICAgICAgICAgICAgLy8gUGF0aCBmaW5kIGZhaWxlZCwgcmV0cnkgaWYgdGhlIHRhcmdldCBsb2NhdGlvbiBpcyBzdGlsbFxyXG4gICAgICAgICAgICAgIC8vIHZhbGlkLlxyXG4gICAgICAgICAgICAgIF9hZzQudGFyZ2V0UGF0aHFSZWYgPSBQYXRoUXVldWUuRFRfUEFUSFFfSU5WQUxJRDtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9hZzQudGFyZ2V0UmVmICE9IDApIHtcclxuICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1JFUVVFU1RJTkc7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIF9hZzQudGFyZ2V0UmVwbGFuVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgIT0gbnVsbCAmJiAoc3RhdHVzID09IFN0YXR1cy5TVUNDU0VTUyB8fCBzdGF0dXMgPT0gU3RhdHVzLlBBUlRJQUxfUkVTVUxUKSkge1xyXG4gICAgICAgICAgICAgIHZhciBfcGF0aCA9IF9hZzQuY29ycmlkb3IuZ2V0UGF0aCgpO1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX3BhdGgubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCJFbXB0eSBwYXRoXCIpO1xyXG4gICAgICAgICAgICAgIH0gLy8gQXBwbHkgcmVzdWx0cy5cclxuXHJcblxyXG4gICAgICAgICAgICAgIHZhciB0YXJnZXRQb3MgPSBfYWc0LnRhcmdldFBvcztcclxuICAgICAgICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgX3BhdGhGb3VuZCA9IHRoaXMubV9wYXRocS5nZXRQYXRoUmVzdWx0KF9hZzQudGFyZ2V0UGF0aHFSZWYpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgcmVzID0gX3BhdGhGb3VuZC5nZXRSZWZzKCk7XHJcblxyXG4gICAgICAgICAgICAgIHN0YXR1cyA9IF9wYXRoRm91bmQuZ2V0U3RhdHVzKCk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gU3RhdHVzLkZBSUxVUkUgfHwgcmVzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHN0YXR1cyAhPSBudWxsICYgc3RhdHVzID09IFN0YXR1cy5QQVJUSUFMX1JFU1VMVCkge1xyXG4gICAgICAgICAgICAgICAgX2FnNC5wYXJ0aWFsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2FnNC5wYXJ0aWFsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgfSAvLyBNZXJnZSByZXN1bHQgYW5kIGV4aXN0aW5nIHBhdGguXHJcbiAgICAgICAgICAgICAgLy8gVGhlIGFnZW50IG1pZ2h0IGhhdmUgbW92ZWQgd2hpbHN0IHRoZSByZXF1ZXN0IGlzXHJcbiAgICAgICAgICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyB0aGUgcGF0aCBtYXkgaGF2ZSBjaGFuZ2VkLlxyXG4gICAgICAgICAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IHRoZSBlbmQgb2YgdGhlIHBhdGggaXMgYXQgdGhlIHNhbWVcclxuICAgICAgICAgICAgICAvLyBsb2NhdGlvblxyXG4gICAgICAgICAgICAgIC8vIHdoZXJlIHRoZSByZXF1ZXN0IHdhcyBpc3N1ZWQuXHJcbiAgICAgICAgICAgICAgLy8gVGhlIGxhc3QgcmVmIGluIHRoZSBvbGQgcGF0aCBzaG91bGQgYmUgdGhlIHNhbWUgYXNcclxuICAgICAgICAgICAgICAvLyB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIHJlcXVlc3Qgd2FzIGlzc3VlZC4uXHJcblxyXG5cclxuICAgICAgICAgICAgICBpZiAodmFsaWQgJiYgX3BhdGhbX3BhdGgubGVuZ3RoIC0gMV0gIT0gcmVzWzBdKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAodmFsaWQgJiYgcGF0aFtwYXRoLmxlbmd0aCAtIDFdLmxvbmdWYWx1ZSgpICE9IHJlc1swXS5sb25nVmFsdWUoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmICh2YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUHV0IHRoZSBvbGQgcGF0aCBpbmZyb250IG9mIHRoZSBvbGQgcGF0aC5cclxuICAgICAgICAgICAgICAgIGlmIChfcGF0aC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIHBhdGgucmVtb3ZlKHBhdGgubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICAgIF9wYXRoLnNwbGljZShfcGF0aC5sZW5ndGggLSAxLCAxKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIF9wYXRoLnB1c2guYXBwbHkoX3BhdGgsIF90b0NvbnN1bWFibGVBcnJheShyZXMpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHJlcyA9IF9wYXRoOyAvLyBSZW1vdmUgdHJhY2tiYWNrc1xyXG5cclxuICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCByZXMubGVuZ3RoIC0gMTsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGogLSAxID49IDAgJiYgaiArIDEgPCByZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzW2ogLSAxXSA9PSByZXNbaiArIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zcGxpY2UoaiArIDEsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3BsaWNlKGosIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqIC09IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IC8vIENoZWNrIGZvciBwYXJ0aWFsIHBhdGguXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXNbcmVzLmxlbmd0aCAtIDFdICE9IF9hZzQudGFyZ2V0UmVmKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIFBhcnRpYWwgcGF0aCwgY29uc3RyYWluIHRhcmdldCBwb3NpdGlvbiBpbnNpZGVcclxuICAgICAgICAgICAgICAgICAgLy8gdGhlIGxhc3QgcG9seWdvbi5cclxuICAgICAgICAgICAgICAgICAgdmFyIF9jciA9IHRoaXMubV9uYXZxdWVyeS5jbG9zZXN0UG9pbnRPblBvbHkocmVzW3Jlcy5sZW5ndGggLSAxXSwgdGFyZ2V0UG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldFBvcyA9IF9jci5nZXRDbG9zZXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICBpZiAodmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNldCBjdXJyZW50IGNvcnJpZG9yLlxyXG4gICAgICAgICAgICAgICAgX2FnNC5jb3JyaWRvci5zZXRDb3JyaWRvcih0YXJnZXRQb3MsIHJlcyk7IC8vIEZvcmNlIHRvIHVwZGF0ZSBib3VuZGFyeS5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgX2FnNC5ib3VuZGFyeS5yZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZBTElEO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21ldGhpbmcgd2VudCB3cm9uZy5cclxuICAgICAgICAgICAgICAgIF9hZzQudGFyZ2V0U3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRDtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIF9hZzQudGFyZ2V0UmVwbGFuVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6IFwidXBkYXRlVG9wb2xvZ3lPcHRpbWl6YXRpb25cIixcclxuICAgICAgLy8gc2Vjb25kc1xyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVG9wb2xvZ3lPcHRpbWl6YXRpb24oYWdlbnRzLCBkdCkge1xyXG4gICAgICAgIGlmICghYWdlbnRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcXVldWUgPSBuZXcgUHJpb3JpdHlRdWV1ZShmdW5jdGlvbiAoYTEsIGEyKSB7XHJcbiAgICAgICAgICByZXR1cm4gRmxvYXQuY29tcGFyZShhMi50b3BvbG9neU9wdFRpbWUsIGExLnRvcG9sb2d5T3B0VGltZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWdlbnRzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICBhZyA9IGFnZW50c1tpXTtcclxuXHJcbiAgICAgICAgICBpZiAoYWcuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGFnLnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORSB8fCBhZy50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZFTE9DSVRZKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICgoYWcucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9PUFRJTUlaRV9UT1BPKSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGFnLnRvcG9sb2d5T3B0VGltZSArPSBkdDtcclxuXHJcbiAgICAgICAgICBpZiAoYWcudG9wb2xvZ3lPcHRUaW1lID49IE9QVF9USU1FX1RIUikge1xyXG4gICAgICAgICAgICBhZGRUb09wdFF1ZXVlKGFnLCBxdWV1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aGlsZSAoIXF1ZXVlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICBhZyA9IHF1ZXVlLnBvbGwoKTtcclxuICAgICAgICAgIGFnLmNvcnJpZG9yLm9wdGltaXplUGF0aFRvcG9sb2d5KHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbYWcucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pO1xyXG4gICAgICAgICAgYWcudG9wb2xvZ3lPcHRUaW1lID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImNoZWNrUGF0aFZhbGlkaXR5XCIsXHJcbiAgICAgIC8vIHNlY29uZHNcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrUGF0aFZhbGlkaXR5KGFnZW50cywgZHQpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFnZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgdmFyIF9hZzUgPSBhZ2VudHNbaV07XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzUuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgX2FnNS50YXJnZXRSZXBsYW5UaW1lICs9IGR0O1xyXG4gICAgICAgICAgdmFyIHJlcGxhbiA9IGZhbHNlOyAvLyBGaXJzdCBjaGVjayB0aGF0IHRoZSBjdXJyZW50IGxvY2F0aW9uIGlzIHZhbGlkLlxyXG5cclxuICAgICAgICAgIHZhciBhZ2VudFBvcyA9IG5ldyBBcnJheSgzKTtcclxuXHJcbiAgICAgICAgICB2YXIgYWdlbnRSZWYgPSBfYWc1LmNvcnJpZG9yLmdldEZpcnN0UG9seSgpO1xyXG5cclxuICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShhZ2VudFBvcywgX2FnNS5ucG9zKTtcclxuXHJcbiAgICAgICAgICBpZiAoIXRoaXMubV9uYXZxdWVyeS5pc1ZhbGlkUG9seVJlZihhZ2VudFJlZiwgdGhpcy5tX2ZpbHRlcnNbX2FnNS5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSkpIHtcclxuICAgICAgICAgICAgLy8gQ3VycmVudCBsb2NhdGlvbiBpcyBub3QgdmFsaWQsIHRyeSB0byByZXBvc2l0aW9uLlxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIGNhbiBzbmFwIGFnZW50cywgaG93IHRvIGhhbmRsZSB0aGF0P1xyXG4gICAgICAgICAgICB2YXIgZm5wID0gdGhpcy5tX25hdnF1ZXJ5LmZpbmROZWFyZXN0UG9seShfYWc1Lm5wb3MsIHRoaXMubV9leHQsIHRoaXMubV9maWx0ZXJzW19hZzUucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pO1xyXG4gICAgICAgICAgICBhZ2VudFJlZiA9IGZucC5nZXROZWFyZXN0UmVmKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZm5wLmdldE5lYXJlc3RQb3MoKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGFnZW50UG9zLCBmbnAuZ2V0TmVhcmVzdFBvcygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFnZW50UmVmID09IDApIHtcclxuICAgICAgICAgICAgICAvLyBDb3VsZCBub3QgZmluZCBsb2NhdGlvbiBpbiBuYXZtZXNoLCBzZXQgc3RhdGUgdG8gaW52YWxpZC5cclxuICAgICAgICAgICAgICBfYWc1LmNvcnJpZG9yLnJlc2V0KDAsIGFnZW50UG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgX2FnNS5wYXJ0aWFsID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgIF9hZzUuYm91bmRhcnkucmVzZXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgX2FnNS5zdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9JTlZBTElEO1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IC8vIE1ha2Ugc3VyZSB0aGUgZmlyc3QgcG9seWdvbiBpcyB2YWxpZCwgYnV0IGxlYXZlIG90aGVyIHZhbGlkXHJcbiAgICAgICAgICAgIC8vIHBvbHlnb25zIGluIHRoZSBwYXRoIHNvIHRoYXQgcmVwbGFubmVyIGNhbiBhZGp1c3QgdGhlIHBhdGhcclxuICAgICAgICAgICAgLy8gYmV0dGVyLlxyXG5cclxuXHJcbiAgICAgICAgICAgIF9hZzUuY29ycmlkb3IuZml4UGF0aFN0YXJ0KGFnZW50UmVmLCBhZ2VudFBvcyk7IC8vIGFnLmNvcnJpZG9yLnRyaW1JbnZhbGlkUGF0aChhZ2VudFJlZiwgYWdlbnRQb3MsIG1fbmF2cXVlcnksXHJcbiAgICAgICAgICAgIC8vICZtX2ZpbHRlcik7XHJcblxyXG5cclxuICAgICAgICAgICAgX2FnNS5ib3VuZGFyeS5yZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KF9hZzUubnBvcywgYWdlbnRQb3MpO1xyXG4gICAgICAgICAgICByZXBsYW4gPSB0cnVlO1xyXG4gICAgICAgICAgfSAvLyBJZiB0aGUgYWdlbnQgZG9lcyBub3QgaGF2ZSBtb3ZlIHRhcmdldCBvciBpcyBjb250cm9sbGVkIGJ5XHJcbiAgICAgICAgICAvLyB2ZWxvY2l0eSwgbm8gbmVlZCB0byByZWNvdmVyIHRoZSB0YXJnZXQgbm9yIHJlcGxhbi5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKF9hZzUudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzUudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH0gLy8gVHJ5IHRvIHJlY292ZXIgbW92ZSByZXF1ZXN0IHBvc2l0aW9uLlxyXG5cclxuXHJcbiAgICAgICAgICBpZiAoX2FnNS50YXJnZXRTdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUgJiYgX2FnNS50YXJnZXRTdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX0ZBSUxFRCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubV9uYXZxdWVyeS5pc1ZhbGlkUG9seVJlZihfYWc1LnRhcmdldFJlZiwgdGhpcy5tX2ZpbHRlcnNbX2FnNS5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSkpIHtcclxuICAgICAgICAgICAgICAvLyBDdXJyZW50IHRhcmdldCBpcyBub3QgdmFsaWQsIHRyeSB0byByZXBvc2l0aW9uLlxyXG4gICAgICAgICAgICAgIHZhciBfZm5wID0gdGhpcy5tX25hdnF1ZXJ5LmZpbmROZWFyZXN0UG9seShfYWc1LnRhcmdldFBvcywgdGhpcy5tX2V4dCwgdGhpcy5tX2ZpbHRlcnNbX2FnNS5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7XHJcblxyXG4gICAgICAgICAgICAgIF9hZzUudGFyZ2V0UmVmID0gX2ZucC5nZXROZWFyZXN0UmVmKCk7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChfZm5wLmdldE5lYXJlc3RQb3MoKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoX2FnNS50YXJnZXRQb3MsIF9mbnAuZ2V0TmVhcmVzdFBvcygpKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHJlcGxhbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfYWc1LnRhcmdldFJlZiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgLy8gRmFpbGVkIHRvIHJlcG9zaXRpb24gdGFyZ2V0LCBmYWlsIG1vdmVyZXF1ZXN0LlxyXG4gICAgICAgICAgICAgIF9hZzUuY29ycmlkb3IucmVzZXQoYWdlbnRSZWYsIGFnZW50UG9zKTtcclxuXHJcbiAgICAgICAgICAgICAgX2FnNS5wYXJ0aWFsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgX2FnNS50YXJnZXRTdGF0ZSA9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBJZiBuZWFyYnkgY29ycmlkb3IgaXMgbm90IHZhbGlkLCByZXBsYW4uXHJcblxyXG5cclxuICAgICAgICAgIGlmICghX2FnNS5jb3JyaWRvci5pc1ZhbGlkKENyb3dkLkNIRUNLX0xPT0tBSEVBRCwgdGhpcy5tX25hdnF1ZXJ5LCB0aGlzLm1fZmlsdGVyc1tfYWc1LnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdKSkge1xyXG4gICAgICAgICAgICAvLyBGaXggY3VycmVudCBwYXRoLlxyXG4gICAgICAgICAgICAvLyBhZy5jb3JyaWRvci50cmltSW52YWxpZFBhdGgoYWdlbnRSZWYsIGFnZW50UG9zLCBtX25hdnF1ZXJ5LFxyXG4gICAgICAgICAgICAvLyAmbV9maWx0ZXIpO1xyXG4gICAgICAgICAgICAvLyBhZy5ib3VuZGFyeS5yZXNldCgpO1xyXG4gICAgICAgICAgICByZXBsYW4gPSB0cnVlO1xyXG4gICAgICAgICAgfSAvLyBJZiB0aGUgZW5kIG9mIHRoZSBwYXRoIGlzIG5lYXIgYW5kIGl0IGlzIG5vdCB0aGUgcmVxdWVzdGVkXHJcbiAgICAgICAgICAvLyBsb2NhdGlvbiwgcmVwbGFuLlxyXG5cclxuXHJcbiAgICAgICAgICBpZiAoX2FnNS50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZBTElEKSB7XHJcbiAgICAgICAgICAgIGlmIChfYWc1LnRhcmdldFJlcGxhblRpbWUgPiBDcm93ZC5UQVJHRVRfUkVQTEFOX0RFTEFZICYmIF9hZzUuY29ycmlkb3IuZ2V0UGF0aENvdW50KCkgPCBDcm93ZC5DSEVDS19MT09LQUhFQUQgJiYgX2FnNS5jb3JyaWRvci5nZXRMYXN0UG9seSgpICE9IF9hZzUudGFyZ2V0UmVmKSB7XHJcbiAgICAgICAgICAgICAgcmVwbGFuID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBUcnkgdG8gcmVwbGFuIHBhdGggdG8gZ29hbC5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKHJlcGxhbikge1xyXG4gICAgICAgICAgICBpZiAoX2FnNS50YXJnZXRTdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUpIHtcclxuICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RNb3ZlVGFyZ2V0UmVwbGFuKF9hZzUsIF9hZzUudGFyZ2V0UmVmLCBfYWc1LnRhcmdldFBvcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcInVwZGF0ZVwiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGR0LCBkZWJ1ZywgZnJhbWUpIHtcclxuICAgICAgICAvLyBpZiAoZnJhbWUgPT0gMTE0KVxyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkJ1Z1wiKTtcclxuICAgICAgICB0aGlzLm1fdmVsb2NpdHlTYW1wbGVDb3VudCA9IDA7XHJcbiAgICAgICAgdmFyIGRlYnVnSWR4ID0gZGVidWcgIT0gbnVsbCA/IGRlYnVnLmlkeCA6IC0xO1xyXG4gICAgICAgIHZhciBhZ2VudHMgPSB0aGlzLmdldEFjdGl2ZUFnZW50cygpOyAvLyBDaGVjayB0aGF0IGFsbCBhZ2VudHMgc3RpbGwgaGF2ZSB2YWxpZCBwYXRocy5cclxuXHJcbiAgICAgICAgdGhpcy5jaGVja1BhdGhWYWxpZGl0eShhZ2VudHMsIGR0KTsgLy8gVXBkYXRlIGFzeW5jIG1vdmUgcmVxdWVzdCBhbmQgcGF0aCBmaW5kZXIuXHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlTW92ZVJlcXVlc3QoKTsgLy8gT3B0aW1pemUgcGF0aCB0b3BvbG9neS5cclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVUb3BvbG9neU9wdGltaXphdGlvbihhZ2VudHMsIGR0KTsgLy8gUmVnaXN0ZXIgYWdlbnRzIHRvIHByb3hpbWl0eSBncmlkLlxyXG5cclxuICAgICAgICB0aGlzLm1fZ3JpZC5jbGVhcigpO1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFnZW50cy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgdmFyIF9hZzYgPSBhZ2VudHNbaV07XHJcbiAgICAgICAgICB2YXIgcCA9IF9hZzYubnBvcztcclxuICAgICAgICAgIHZhciByID0gX2FnNi5wYXJhbXMucmFkaXVzO1xyXG4gICAgICAgICAgdGhpcy5tX2dyaWQuYWRkSXRlbShpLCBwWzBdIC0gciwgcFsyXSAtIHIsIHBbMF0gKyByLCBwWzJdICsgcik7XHJcbiAgICAgICAgfSAvLyBHZXQgbmVhcmJ5IG5hdm1lc2ggc2VnbWVudHMgYW5kIGFnZW50cyB0byBjb2xsaWRlIHdpdGguXHJcblxyXG5cclxuICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGFnZW50cyksXHJcbiAgICAgICAgICAgIF9zdGVwMjtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7XHJcbiAgICAgICAgICAgIHZhciBfYWcxMyA9IF9zdGVwMi52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfYWcxMy5zdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfV0FMS0lORykge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IC8vIFVwZGF0ZSB0aGUgY29sbGlzaW9uIGJvdW5kYXJ5IGFmdGVyIGNlcnRhaW4gZGlzdGFuY2UgaGFzIGJlZW4gcGFzc2VkIG9yXHJcbiAgICAgICAgICAgIC8vIGlmIGl0IGhhcyBiZWNvbWUgaW52YWxpZC5cclxuXHJcblxyXG4gICAgICAgICAgICB2YXIgdXBkYXRlVGhyID0gX2FnMTMucGFyYW1zLmNvbGxpc2lvblF1ZXJ5UmFuZ2UgKiAwLjI1O1xyXG5cclxuICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi52RGlzdDJEU3FyKF9hZzEzLm5wb3MsIF9hZzEzLmJvdW5kYXJ5LmdldENlbnRlcigpKSA+IERldG91ckNvbW1vbi5zcXIodXBkYXRlVGhyKSB8fCAhX2FnMTMuYm91bmRhcnkuaXNWYWxpZCh0aGlzLm1fbmF2cXVlcnksIHRoaXMubV9maWx0ZXJzW19hZzEzLnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdKSkge1xyXG4gICAgICAgICAgICAgIF9hZzEzLmJvdW5kYXJ5LnVwZGF0ZShfYWcxMy5jb3JyaWRvci5nZXRGaXJzdFBvbHkoKSwgX2FnMTMubnBvcywgX2FnMTMucGFyYW1zLmNvbGxpc2lvblF1ZXJ5UmFuZ2UsIHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbX2FnMTMucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pO1xyXG4gICAgICAgICAgICB9IC8vIFF1ZXJ5IG5laWdoYm91ciBhZ2VudHNcclxuXHJcblxyXG4gICAgICAgICAgICBfYWcxMy5uZWlzID0gdGhpcy5nZXROZWlnaGJvdXJzKF9hZzEzLm5wb3MsIF9hZzEzLnBhcmFtcy5oZWlnaHQsIF9hZzEzLnBhcmFtcy5jb2xsaXNpb25RdWVyeVJhbmdlLCBfYWcxMywgYWdlbnRzLCB0aGlzLm1fZ3JpZCk7XHJcbiAgICAgICAgICB9IC8vIEZpbmQgbmV4dCBjb3JuZXIgdG8gc3RlZXIgdG8uXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIF9pdGVyYXRvcjIuZigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgYWdlbnRzLmxlbmd0aDsgKytfaTQpIHtcclxuICAgICAgICAgIHZhciBfYWc3ID0gYWdlbnRzW19pNF07XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzcuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzcudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzcudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH0gLy8gRmluZCBjb3JuZXJzIGZvciBzdGVlcmluZ1xyXG5cclxuXHJcbiAgICAgICAgICBfYWc3LmNvcm5lcnMgPSBfYWc3LmNvcnJpZG9yLmZpbmRDb3JuZXJzKENyb3dkLkRUX0NST1dEQUdFTlRfTUFYX0NPUk5FUlMsIHRoaXMubV9uYXZxdWVyeSwgdGhpcy5tX2ZpbHRlcnNbX2FnNy5wYXJhbXMucXVlcnlGaWx0ZXJUeXBlXSk7IC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgY29ybmVyIGFmdGVyIHRoZSBuZXh0IGNvcm5lciBpcyBkaXJlY3RseSB2aXNpYmxlLFxyXG4gICAgICAgICAgLy8gYW5kIHNob3J0IGN1dCB0byB0aGVyZS5cclxuXHJcbiAgICAgICAgICBpZiAoKF9hZzcucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9PUFRJTUlaRV9WSVMpICE9IDAgJiYgX2FnNy5jb3JuZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IF9hZzcuY29ybmVyc1tNYXRoLm1pbigxLCBfYWc3LmNvcm5lcnMubGVuZ3RoIC0gMSldLmdldFBvcygpO1xyXG5cclxuICAgICAgICAgICAgX2FnNy5jb3JyaWRvci5vcHRpbWl6ZVBhdGhWaXNpYmlsaXR5KHRhcmdldCwgX2FnNy5wYXJhbXMucGF0aE9wdGltaXphdGlvblJhbmdlLCB0aGlzLm1fbmF2cXVlcnksIHRoaXMubV9maWx0ZXJzW19hZzcucGFyYW1zLnF1ZXJ5RmlsdGVyVHlwZV0pOyAvLyBDb3B5IGRhdGEgZm9yIGRlYnVnIHB1cnBvc2VzLlxyXG5cclxuXHJcbiAgICAgICAgICAgIGlmIChkZWJ1Z0lkeCA9PSBfaTQpIHtcclxuICAgICAgICAgICAgICBEZXRvdXJDb21tb24udkNvcHkoZGVidWcub3B0U3RhcnQsIF9hZzcuY29ycmlkb3IuZ2V0UG9zKCkpO1xyXG4gICAgICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShkZWJ1Zy5vcHRFbmQsIHRhcmdldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENvcHkgZGF0YSBmb3IgZGVidWcgcHVycG9zZXMuXHJcbiAgICAgICAgICAgIGlmIChkZWJ1Z0lkeCA9PSBfaTQpIHtcclxuICAgICAgICAgICAgICBEZXRvdXJDb21tb24udlNldChkZWJ1Zy5vcHRTdGFydCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoZGVidWcub3B0RW5kLCAwLCAwLCAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gVHJpZ2dlciBvZmYtbWVzaCBjb25uZWN0aW9ucyAoZGVwZW5kcyBvbiBjb3JuZXJzKS5cclxuXHJcblxyXG4gICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYWdlbnRzKSxcclxuICAgICAgICAgICAgX3N0ZXAzO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHtcclxuICAgICAgICAgICAgdmFyIF9hZzE0ID0gX3N0ZXAzLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKF9hZzE0LnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfYWcxNC50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX05PTkUgfHwgX2FnMTQudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9WRUxPQ0lUWSkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9IC8vIENoZWNrXHJcblxyXG5cclxuICAgICAgICAgICAgdmFyIHRyaWdnZXJSYWRpdXMgPSBfYWcxNC5wYXJhbXMucmFkaXVzICogMi4yNTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfYWcxNC5vdmVyT2ZmbWVzaENvbm5lY3Rpb24odHJpZ2dlclJhZGl1cykpIHtcclxuICAgICAgICAgICAgICAvLyBQcmVwYXJlIHRvIG9mZi1tZXNoIGNvbm5lY3Rpb24uXHJcbiAgICAgICAgICAgICAgYW5pbSA9IF9hZzE0LmFuaW1hdGlvbjsgLy8gQWRqdXN0IHRoZSBwYXRoIG92ZXIgdGhlIG9mZi1tZXNoIGNvbm5lY3Rpb24uXHJcblxyXG4gICAgICAgICAgICAgIHZhciByZWZzID0gbmV3IGxvbmdbMl0oKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9hZzE0LmNvcnJpZG9yLm1vdmVPdmVyT2ZmbWVzaENvbm5lY3Rpb24oX2FnMTQuY29ybmVyc1tfYWcxNC5jb3JuZXJzLmxlbmd0aCAtIDFdLmdldFJlZigpLCByZWZzLCBhbmltLnN0YXJ0UG9zLCBhbmltLmVuZFBvcywgdGhpcy5tX25hdnF1ZXJ5KSkge1xyXG4gICAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGFuaW0uaW5pdFBvcywgX2FnMTQubnBvcyk7XHJcbiAgICAgICAgICAgICAgICBhbmltLnBvbHlSZWYgPSByZWZzWzFdO1xyXG4gICAgICAgICAgICAgICAgYW5pbS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYW5pbS50ID0gMC4wO1xyXG4gICAgICAgICAgICAgICAgYW5pbS50bWF4ID0gRGV0b3VyQ29tbW9uLnZEaXN0MkQoYW5pbS5zdGFydFBvcywgYW5pbS5lbmRQb3MpIC8gX2FnMTQucGFyYW1zLm1heFNwZWVkICogMC41O1xyXG4gICAgICAgICAgICAgICAgX2FnMTQuc3RhdGUgPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfT0ZGTUVTSDtcclxuICAgICAgICAgICAgICAgIF9hZzE0LmNvcm5lcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIF9hZzE0Lm5laXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7Ly8gUGF0aCB2YWxpZGl0eSBjaGVjayB3aWxsIGVuc3VyZSB0aGF0IGJhZC9ibG9ja2VkIGNvbm5lY3Rpb25zIHdpbGwgYmUgcmVwbGFubmVkLlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSAvLyBDYWxjdWxhdGUgc3RlZXJpbmcuXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIF9pdGVyYXRvcjMuZigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIF9pdGVyYXRvcjQgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihhZ2VudHMpLFxyXG4gICAgICAgICAgICBfc3RlcDQ7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykge1xyXG4gICAgICAgICAgICB2YXIgX2FnMTUgPSBfc3RlcDQudmFsdWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoX2FnMTUuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF9hZzE1LnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfTk9ORSkge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZHZlbCA9IG5ldyBBcnJheSgzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfYWcxNS50YXJnZXRTdGF0ZSA9PSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfVEFSR0VUX1ZFTE9DSVRZKSB7XHJcbiAgICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KGR2ZWwsIF9hZzE1LnRhcmdldFBvcyk7XHJcbiAgICAgICAgICAgICAgX2FnMTUuZGVzaXJlZFNwZWVkID0gRGV0b3VyQ29tbW9uLnZMZW4oX2FnMTUudGFyZ2V0UG9zKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgc3RlZXJpbmcgZGlyZWN0aW9uLlxyXG4gICAgICAgICAgICAgIGlmICgoX2FnMTUucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9BTlRJQ0lQQVRFX1RVUk5TKSAhPSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkdmVsID0gX2FnMTUuY2FsY1Ntb290aFN0ZWVyRGlyZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGR2ZWwgPSBfYWcxNS5jYWxjU3RyYWlnaHRTdGVlckRpcmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgIH0gLy8gQ2FsY3VsYXRlIHNwZWVkIHNjYWxlLCB3aGljaCB0ZWxscyB0aGUgYWdlbnQgdG8gc2xvd2Rvd24gYXQgdGhlIGVuZCBvZiB0aGUgcGF0aC5cclxuXHJcblxyXG4gICAgICAgICAgICAgIHZhciBzbG93RG93blJhZGl1cyA9IF9hZzE1LnBhcmFtcy5yYWRpdXMgKiAyOyAvLyBUT0RPOiBtYWtlIGxlc3MgaGFja3kuXHJcblxyXG4gICAgICAgICAgICAgIHZhciBzcGVlZFNjYWxlID0gX2FnMTUuZ2V0RGlzdGFuY2VUb0dvYWwoc2xvd0Rvd25SYWRpdXMpIC8gc2xvd0Rvd25SYWRpdXM7XHJcbiAgICAgICAgICAgICAgX2FnMTUuZGVzaXJlZFNwZWVkID0gX2FnMTUucGFyYW1zLm1heFNwZWVkO1xyXG4gICAgICAgICAgICAgIGR2ZWwgPSBEZXRvdXJDb21tb24udlNjYWxlKGR2ZWwsIF9hZzE1LmRlc2lyZWRTcGVlZCAqIHNwZWVkU2NhbGUpO1xyXG4gICAgICAgICAgICB9IC8vIFNlcGFyYXRpb25cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoKF9hZzE1LnBhcmFtcy51cGRhdGVGbGFncyAmIENyb3dkQWdlbnRQYXJhbXMuRFRfQ1JPV0RfU0VQQVJBVElPTikgIT0gMCkge1xyXG4gICAgICAgICAgICAgIHNlcGFyYXRpb25EaXN0ID0gX2FnMTUucGFyYW1zLmNvbGxpc2lvblF1ZXJ5UmFuZ2U7XHJcbiAgICAgICAgICAgICAgaW52U2VwYXJhdGlvbkRpc3QgPSAxLjAgLyBzZXBhcmF0aW9uRGlzdDtcclxuICAgICAgICAgICAgICBzZXBhcmF0aW9uV2VpZ2h0ID0gX2FnMTUucGFyYW1zLnNlcGFyYXRpb25XZWlnaHQ7XHJcbiAgICAgICAgICAgICAgdyA9IDA7XHJcbiAgICAgICAgICAgICAgdmFyIGRpc3AgPSBuZXcgQXJyYXkoMyk7XHJcblxyXG4gICAgICAgICAgICAgIGZvciAodmFyIF9qMyA9IDA7IF9qMyA8IF9hZzE1Lm5laXMubGVuZ3RoOyArK19qMykge1xyXG4gICAgICAgICAgICAgICAgbmVpID0gYWdlbnRzLmdldChfYWcxNS5uZWlzW19qM10uaWR4KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX2RpZmYgPSBEZXRvdXJDb21tb24udlN1YihfYWcxNS5ucG9zLCBuZWkubnBvcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2RpZmZbMV0gPSAwO1xyXG4gICAgICAgICAgICAgICAgZGlzdFNxciA9IERldG91ckNvbW1vbi52TGVuU3FyKF9kaWZmKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlzdFNxciA8IDAuMDAwMDEpIHtcclxuICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RTcXIgPiBEZXRvdXJDb21tb24uc3FyKHNlcGFyYXRpb25EaXN0KSkge1xyXG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkaXN0ID0gTWF0aC5zcXJ0KGRpc3RTcXIpO1xyXG4gICAgICAgICAgICAgICAgd2VpZ2h0ID0gc2VwYXJhdGlvbldlaWdodCAqICgxLjAgLSBEZXRvdXJDb21tb24uc3FyKGRpc3QgKiBpbnZTZXBhcmF0aW9uRGlzdCkpO1xyXG4gICAgICAgICAgICAgICAgZGlzcCA9IERldG91ckNvbW1vbi52TWFkKGRpc3AsIF9kaWZmLCB3ZWlnaHQgLyBkaXN0KTtcclxuICAgICAgICAgICAgICAgIHcgKz0gMS4wO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKHcgPiAwLjAwMDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkanVzdCBkZXNpcmVkIHZlbG9jaXR5LlxyXG4gICAgICAgICAgICAgICAgZHZlbCA9IERldG91ckNvbW1vbi52TWFkKGR2ZWwsIGRpc3AsIDEuMCAvIHcpOyAvLyBDbGFtcCBkZXNpcmVkIHZlbG9jaXR5IHRvIGRlc2lyZWQgc3BlZWQuXHJcblxyXG4gICAgICAgICAgICAgICAgc3BlZWRTcXIgPSBEZXRvdXJDb21tb24udkxlblNxcihkdmVsKTtcclxuICAgICAgICAgICAgICAgIGRlc2lyZWRTcXIgPSBEZXRvdXJDb21tb24uc3FyKF9hZzE1LmRlc2lyZWRTcGVlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNwZWVkU3FyID4gZGVzaXJlZFNxcikge1xyXG4gICAgICAgICAgICAgICAgICBkdmVsID0gRGV0b3VyQ29tbW9uLnZTY2FsZShkdmVsLCBkZXNpcmVkU3FyIC8gc3BlZWRTcXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSAvLyBTZXQgdGhlIGRlc2lyZWQgdmVsb2NpdHkuXHJcblxyXG5cclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KF9hZzE1LmR2ZWwsIGR2ZWwpO1xyXG4gICAgICAgICAgfSAvLyBWZWxvY2l0eSBwbGFubmluZy5cclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICBfaXRlcmF0b3I0LmUoZXJyKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgX2l0ZXJhdG9yNC5mKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTUgPSAwOyBfaTUgPCBhZ2VudHMubGVuZ3RoOyArK19pNSkge1xyXG4gICAgICAgICAgdmFyIF9hZzggPSBhZ2VudHNbX2k1XTtcclxuXHJcbiAgICAgICAgICBpZiAoX2FnOC5zdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfV0FMS0lORykge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAoKF9hZzgucGFyYW1zLnVwZGF0ZUZsYWdzICYgQ3Jvd2RBZ2VudFBhcmFtcy5EVF9DUk9XRF9PQlNUQUNMRV9BVk9JREFOQ0UpICE9IDApIHtcclxuICAgICAgICAgICAgdGhpcy5tX29ic3RhY2xlUXVlcnkucmVzZXQoKTsgLy8gQWRkIG5laWdoYm91cnMgYXMgb2JzdGFjbGVzLlxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfYWc4Lm5laXMubGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgICAgICB2YXIgX25laSA9IGFnZW50c1tfYWc4Lm5laXNbal0uaWR4XTtcclxuICAgICAgICAgICAgICB0aGlzLm1fb2JzdGFjbGVRdWVyeS5hZGRDaXJjbGUoX25laS5ucG9zLCBfbmVpLnBhcmFtcy5yYWRpdXMsIF9uZWkudmVsLCBfbmVpLmR2ZWwpO1xyXG4gICAgICAgICAgICB9IC8vIGlmIChhZy5uZWlzLmxlbmd0aCA+IDAgJiYgaSA9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkZyYW1lIFwiICsgZnJhbWUpXHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gQXBwZW5kIG5laWdoYm91ciBzZWdtZW50cyBhcyBvYnN0YWNsZXMuXHJcblxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgX2ogPSAwOyBfaiA8IF9hZzguYm91bmRhcnkuZ2V0U2VnbWVudENvdW50KCk7ICsrX2opIHtcclxuICAgICAgICAgICAgICB2YXIgcyA9IF9hZzguYm91bmRhcnkuZ2V0U2VnbWVudChfaik7IC8vbGV0IHMzID0gQXJyYXlzLmNvcHlPZlJhbmdlKHMsIDMsIDYpO1xyXG4gICAgICAgICAgICAgIC8vbGV0IHMzID0gQXJyYXlzLmNvcHlPZlJhbmdlKHMsIDMsIDYpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgdmFyIHMzID0gcy5zbGljZSgzLCA2KTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKERldG91ckNvbW1vbi50cmlBcmVhMkQzKF9hZzgubnBvcywgcywgczMpIDwgMC4wKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHRoaXMubV9vYnN0YWNsZVF1ZXJ5LmFkZFNlZ21lbnQocywgczMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgdm9kID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWJ1Z0lkeCA9PSBfaTUpIHtcclxuICAgICAgICAgICAgICB2b2QgPSBkZWJ1Zy52b2Q7XHJcbiAgICAgICAgICAgIH0gLy8gU2FtcGxlIG5ldyBzYWZlIHZlbG9jaXR5LlxyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciBhZGFwdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciBucyA9IDA7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm1fb2JzdGFjbGVRdWVyeVBhcmFtc1tfYWc4LnBhcmFtcy5vYnN0YWNsZUF2b2lkYW5jZVR5cGVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFkYXB0aXZlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG5zbnZlbCA9IHRoaXMubV9vYnN0YWNsZVF1ZXJ5LnNhbXBsZVZlbG9jaXR5QWRhcHRpdmUoX2FnOC5ucG9zLCBfYWc4LnBhcmFtcy5yYWRpdXMsIF9hZzguZGVzaXJlZFNwZWVkLCBfYWc4LnZlbCwgX2FnOC5kdmVsLCBwYXJhbXMsIHZvZCk7XHJcbiAgICAgICAgICAgICAgbnMgPSBuc252ZWxbMF07XHJcbiAgICAgICAgICAgICAgX2FnOC5udmVsID0gbnNudmVsWzFdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHZhciBfbnNudmVsID0gdGhpcy5tX29ic3RhY2xlUXVlcnkuc2FtcGxlVmVsb2NpdHlHcmlkKF9hZzgubnBvcywgX2FnOC5wYXJhbXMucmFkaXVzLCBfYWc4LmRlc2lyZWRTcGVlZCwgX2FnOC52ZWwsIF9hZzguZHZlbCwgcGFyYW1zLCB2b2QpO1xyXG5cclxuICAgICAgICAgICAgICBucyA9IF9uc252ZWxbMF07XHJcbiAgICAgICAgICAgICAgX2FnOC5udmVsID0gX25zbnZlbFsxXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tX3ZlbG9jaXR5U2FtcGxlQ291bnQgKz0gbnM7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiBub3QgdXNpbmcgdmVsb2NpdHkgcGxhbm5pbmcsIG5ldyB2ZWxvY2l0eSBpcyBkaXJlY3RseSB0aGUgZGVzaXJlZCB2ZWxvY2l0eS5cclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZDb3B5KF9hZzgubnZlbCwgX2FnOC5kdmVsKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8vIEludGVncmF0ZS5cclxuXHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pNiA9IDA7IF9pNiA8IGFnZW50cy5sZW5ndGg7ICsrX2k2KSB7XHJcbiAgICAgICAgICB2YXIgX2FnOSA9IGFnZW50c1tfaTZdO1xyXG5cclxuICAgICAgICAgIGlmIChfYWc5LnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIF9hZzkuaW50ZWdyYXRlKGR0KTtcclxuICAgICAgICB9IC8vIEhhbmRsZSBjb2xsaXNpb25zLlxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaXRlciA9IDA7IGl0ZXIgPCA0OyArK2l0ZXIpIHtcclxuICAgICAgICAgIGZvciAodmFyIF9pNyA9IDA7IF9pNyA8IGFnZW50cy5sZW5ndGg7ICsrX2k3KSB7XHJcbiAgICAgICAgICAgIHZhciBfYWcxMCA9IGFnZW50c1tfaTddO1xyXG5cclxuICAgICAgICAgICAgdmFyIGlkeDAgPSBfYWcxMC5nZXRBZ2VudEluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoX2FnMTAuc3RhdGUgIT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkcpIHtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgRGV0b3VyQ29tbW9uLnZTZXQoX2FnMTAuZGlzcCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgIHZhciBfdyA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBfajIgPSAwOyBfajIgPCBfYWcxMC5uZWlzLmxlbmd0aDsgKytfajIpIHtcclxuICAgICAgICAgICAgICB2YXIgX25laTIgPSBhZ2VudHNbX2FnMTAubmVpc1tfajJdLmlkeF07XHJcblxyXG4gICAgICAgICAgICAgIHZhciBpZHgxID0gX25laTIuZ2V0QWdlbnRJbmRleCgpO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgZGlmZiA9IERldG91ckNvbW1vbi52U3ViKF9hZzEwLm5wb3MsIF9uZWkyLm5wb3MpO1xyXG4gICAgICAgICAgICAgIGRpZmZbMV0gPSAwO1xyXG5cclxuICAgICAgICAgICAgICB2YXIgX2Rpc3QgPSBEZXRvdXJDb21tb24udkxlblNxcihkaWZmKTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKF9kaXN0ID4gRGV0b3VyQ29tbW9uLnNxcihfYWcxMC5wYXJhbXMucmFkaXVzICsgX25laTIucGFyYW1zLnJhZGl1cykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgX2Rpc3QgPSBNYXRoLnNxcnQoX2Rpc3QpO1xyXG4gICAgICAgICAgICAgIHZhciBwZW4gPSBfYWcxMC5wYXJhbXMucmFkaXVzICsgX25laTIucGFyYW1zLnJhZGl1cyAtIF9kaXN0O1xyXG5cclxuICAgICAgICAgICAgICBpZiAoX2Rpc3QgPCAwLjAwMDEpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFnZW50cyBvbiB0b3Agb2YgZWFjaCBvdGhlciwgdHJ5IHRvIGNob29zZSBkaXZlcmdpbmcgc2VwYXJhdGlvbiBkaXJlY3Rpb25zLlxyXG4gICAgICAgICAgICAgICAgaWYgKGlkeDAgPiBpZHgxKSB7XHJcbiAgICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGRpZmYsIC1fYWcxMC5kdmVsWzJdLCAwLCBfYWcxMC5kdmVsWzBdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGRpZmYsIF9hZzEwLmR2ZWxbMl0sIDAsIC1fYWcxMC5kdmVsWzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwZW4gPSAwLjAxO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwZW4gPSAxLjAgLyBfZGlzdCAqIChwZW4gKiAwLjUpICogQ3Jvd2QuQ09MTElTSU9OX1JFU09MVkVfRkFDVE9SO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgX2FnMTAuZGlzcCA9IERldG91ckNvbW1vbi52TWFkKF9hZzEwLmRpc3AsIGRpZmYsIHBlbik7XHJcbiAgICAgICAgICAgICAgX3cgKz0gMS4wO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoX3cgPiAwLjAwMDEpIHtcclxuICAgICAgICAgICAgICB2YXIgaXcgPSAxLjAgLyBfdztcclxuICAgICAgICAgICAgICBfYWcxMC5kaXNwID0gRGV0b3VyQ29tbW9uLnZTY2FsZShfYWcxMC5kaXNwLCBpdyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmb3IgKHZhciBfaTggPSAwOyBfaTggPCBhZ2VudHMubGVuZ3RoOyArK19pOCkge1xyXG4gICAgICAgICAgICB2YXIgX2FnMTEgPSBhZ2VudHNbX2k4XTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfYWcxMS5zdGF0ZSAhPSBDcm93ZEFnZW50LkRUX0NST1dEQUdFTlRfU1RBVEVfV0FMS0lORykge1xyXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfYWcxMS5ucG9zID0gRGV0b3VyQ29tbW9uLnZBZGQoX2FnMTEubnBvcywgX2FnMTEuZGlzcCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTkgPSAwOyBfaTkgPCBhZ2VudHMubGVuZ3RoOyArK19pOSkge1xyXG4gICAgICAgICAgLy8gaWYgKGZyYW1lID09IDQ5MilcclxuICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkJhZCBhZ2VudFwiKVxyXG4gICAgICAgICAgdmFyIF9hZzEyID0gYWdlbnRzW19pOV07XHJcblxyXG4gICAgICAgICAgaWYgKF9hZzEyLnN0YXRlICE9IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9TVEFURV9XQUxLSU5HKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfSAvLyBNb3ZlIGFsb25nIG5hdm1lc2guXHJcblxyXG5cclxuICAgICAgICAgIF9hZzEyLmNvcnJpZG9yLm1vdmVQb3NpdGlvbihfYWcxMi5ucG9zLCB0aGlzLm1fbmF2cXVlcnksIHRoaXMubV9maWx0ZXJzW19hZzEyLnBhcmFtcy5xdWVyeUZpbHRlclR5cGVdKTsgLy8gR2V0IHZhbGlkIGNvbnN0cmFpbmVkIHBvc2l0aW9uIGJhY2suXHJcblxyXG5cclxuICAgICAgICAgIERldG91ckNvbW1vbi52Q29weShfYWcxMi5ucG9zLCBfYWcxMi5jb3JyaWRvci5nZXRQb3MoKSk7IC8vIElmIG5vdCB1c2luZyBwYXRoLCB0cnVuY2F0ZSB0aGUgY29ycmlkb3IgdG8ganVzdCBvbmUgcG9seS5cclxuXHJcbiAgICAgICAgICBpZiAoX2FnMTIudGFyZ2V0U3RhdGUgPT0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1RBUkdFVF9OT05FIHx8IF9hZzEyLnRhcmdldFN0YXRlID09IENyb3dkQWdlbnQuRFRfQ1JPV0RBR0VOVF9UQVJHRVRfVkVMT0NJVFkpIHtcclxuICAgICAgICAgICAgX2FnMTIuY29ycmlkb3IucmVzZXQoX2FnMTIuY29ycmlkb3IuZ2V0Rmlyc3RQb2x5KCksIF9hZzEyLm5wb3MpO1xyXG5cclxuICAgICAgICAgICAgX2FnMTIucGFydGlhbCA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLy8gVXBkYXRlIGFnZW50cyB1c2luZyBvZmYtbWVzaCBjb25uZWN0aW9uLlxyXG5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgX2kxMCA9IDA7IF9pMTAgPCB0aGlzLm1fbWF4QWdlbnRzOyArK19pMTApIHtcclxuICAgICAgICAgIHZhciBfYW5pbSA9IHRoaXMubV9hZ2VudHNbX2kxMF0uYW5pbWF0aW9uO1xyXG5cclxuICAgICAgICAgIGlmICghX2FuaW0uYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGFnID0gdGhpcy5tX2FnZW50c1tfaTEwXTtcclxuICAgICAgICAgIF9hbmltLnQgKz0gZHQ7XHJcblxyXG4gICAgICAgICAgaWYgKF9hbmltLnQgPiBfYW5pbS50bWF4KSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IGFuaW1hdGlvblxyXG4gICAgICAgICAgICBfYW5pbS5hY3RpdmUgPSBmYWxzZTsgLy8gUHJlcGFyZSBhZ2VudCBmb3Igd2Fsa2luZy5cclxuXHJcbiAgICAgICAgICAgIGFnLnN0YXRlID0gQ3Jvd2RBZ2VudC5EVF9DUk9XREFHRU5UX1NUQVRFX1dBTEtJTkc7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfSAvLyBVcGRhdGUgcG9zaXRpb25cclxuXHJcblxyXG4gICAgICAgICAgdGEgPSBfYW5pbS50bWF4ICogMC4xNTtcclxuICAgICAgICAgIHRiID0gX2FuaW0udG1heDtcclxuXHJcbiAgICAgICAgICBpZiAoX2FuaW0udCA8IHRhKSB7XHJcbiAgICAgICAgICAgIHUgPSB0d2VlbihfYW5pbS50LCAwLjAsIHRhKTtcclxuICAgICAgICAgICAgYWcubnBvcyA9IERldG91ckNvbW1vbi52TGVycDMoX2FuaW0uaW5pdFBvcywgX2FuaW0uc3RhcnRQb3MsIHUpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdSA9IHR3ZWVuKF9hbmltLnQsIHRhLCB0Yik7XHJcbiAgICAgICAgICAgIGFnLm5wb3MgPSBEZXRvdXJDb21tb24udkxlcnAzKF9hbmltLnN0YXJ0UG9zLCBfYW5pbS5lbmRQb3MsIHUpO1xyXG4gICAgICAgICAgfSAvLyBVcGRhdGUgdmVsb2NpdHkuXHJcblxyXG5cclxuICAgICAgICAgIERldG91ckNvbW1vbi52U2V0KGFnLnZlbCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICBEZXRvdXJDb21tb24udlNldChhZy5kdmVsLCAwLCAwLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0sIHtcclxuICAgICAga2V5OiBcImdldFF1ZXJ5RXh0ZW50c1wiLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UXVlcnlFeHRlbnRzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1fZXh0O1xyXG4gICAgICB9XHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogXCJnZXRGaWx0ZXJcIixcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpbHRlcihpKSB7XHJcbiAgICAgICAgcmV0dXJuIGkgPj0gMCAmJiBpIDwgQ3Jvd2QuRFRfQ1JPV0RfTUFYX1FVRVJZX0ZJTFRFUl9UWVBFID8gdGhpcy5tX2ZpbHRlcnNbaV0gOiBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4gICAgcmV0dXJuIENyb3dkO1xyXG4gIH0oKTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KENyb3dkLCBcIk1BWF9JVEVSU19QRVJfVVBEQVRFXCIsIDEwMCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgXCJNQVhfUEFUSFFVRVVFX05PREVTXCIsIDQwOTYpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsIFwiTUFYX0NPTU1PTl9OT0RFU1wiLCA1MTIpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsIFwiRFRfQ1JPV0RBR0VOVF9NQVhfTkVJR0hCT1VSU1wiLCA2KTtcclxuXHJcbiAgX2RlZmluZVByb3BlcnR5KENyb3dkLCBcIkRUX0NST1dEQUdFTlRfTUFYX0NPUk5FUlNcIiwgNCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgXCJEVF9DUk9XRF9NQVhfT0JTVEFWT0lEQU5DRV9QQVJBTVNcIiwgOCk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgXCJEVF9DUk9XRF9NQVhfUVVFUllfRklMVEVSX1RZUEVcIiwgMTYpO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsIFwiTUFYX0lURVJcIiwgMjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsIFwiT1BUX1RJTUVfVEhSXCIsIDAuNSk7XHJcblxyXG4gIF9kZWZpbmVQcm9wZXJ0eShDcm93ZCwgXCJDSEVDS19MT09LQUhFQURcIiwgMTApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsIFwiVEFSR0VUX1JFUExBTl9ERUxBWVwiLCAxLjApO1xyXG5cclxuICBfZGVmaW5lUHJvcGVydHkoQ3Jvd2QsIFwiQ09MTElTSU9OX1JFU09MVkVfRkFDVE9SXCIsIDAuNyk7XHJcblxyXG4gIGV4cG9ydHMuQ3Jvd2QgPSBDcm93ZDtcclxuICBleHBvcnRzLkNyb3dkQWdlbnRQYXJhbXMgPSBDcm93ZEFnZW50UGFyYW1zO1xyXG4gIGV4cG9ydHMuTmF2TWVzaCA9IE5hdk1lc2g7XHJcbiAgZXhwb3J0cy5OYXZNZXNoUXVlcnkgPSBOYXZNZXNoUXVlcnk7XHJcbiAgZXhwb3J0cy5PYnN0YWNsZUF2b2lkYW5jZVBhcmFtcyA9IE9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zO1xyXG4gIGV4cG9ydHMuUmVjYXN0VGVzdE1lc2hCdWlsZGVyID0gUmVjYXN0VGVzdE1lc2hCdWlsZGVyO1xyXG5cclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5cclxufSkpKTtcclxuIiwiLy9pbXBvcnRTY3JpcHRzKFwiLi9jcm93ZGVkLmpzXCIpXHJcbmltcG9ydCBcIi4vY3Jvd2RlZC5qc1wiXHJcblxyXG5sZXQgQ3Jvd2RBZ2VudFBhcmFtcyA9IGNyb3dkZWQuQ3Jvd2RBZ2VudFBhcmFtcztcclxubGV0IFJlY2FzdFRlc3RNZXNoQnVpbGRlciA9IGNyb3dkZWQuUmVjYXN0VGVzdE1lc2hCdWlsZGVyO1xyXG5sZXQgTmF2TWVzaCA9IGNyb3dkZWQuTmF2TWVzaDtcclxubGV0IE5hdk1lc2hRdWVyeSA9IGNyb3dkZWQuTmF2TWVzaFF1ZXJ5O1xyXG5sZXQgQ3Jvd2QgPSBjcm93ZGVkLkNyb3dkO1xyXG5sZXQgT2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMgPSBjcm93ZGVkLk9ic3RhY2xlQXZvaWRhbmNlUGFyYW1zO1xyXG5cclxuY2xhc3MgQ3Jvd2RTaW1BcHAge1xyXG5cclxuICBzdGF0aWMgdXBkYXRlRmxhZ3MgPSBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX0FOVElDSVBBVEVfVFVSTlMgfCBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09QVElNSVpFX1ZJU1xyXG4gICAgfCBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09QVElNSVpFX1RPUE8gfCBDcm93ZEFnZW50UGFyYW1zLkRUX0NST1dEX09CU1RBQ0xFX0FWT0lEQU5DRTtcclxuICBzdGF0aWMgcXVlcnk7XHJcbiAgY3Jvd2Q7XHJcbiAgc3RhdGljIGFnZW50cyA9IFtdO1xyXG4gIHN0YXRpYyBleHQ7XHJcbiAgc3RhdGljIGZpbHRlcjtcclxuICBhcDtcclxuICBtZDtcclxuICBuYXZtZXNoO1xyXG5cclxuICBib290TWVzaChvYmpGaWxlQ29udGVudHMpIHtcclxuICAgIHRoaXMubm1kID0gUmVjYXN0VGVzdE1lc2hCdWlsZGVyLmZyb21GaWxlKG9iakZpbGVDb250ZW50cykuZ2V0TWVzaERhdGEoKTtcclxuICAgIHRoaXMubmF2bWVzaCA9IG5ldyBOYXZNZXNoKHRoaXMubm1kLCA2LCAwKTtcclxuICAgIHRoaXMucXVlcnkgPSBuZXcgTmF2TWVzaFF1ZXJ5KHRoaXMubmF2bWVzaCk7XHJcbiAgICB0aGlzLmNyb3dkID0gbmV3IENyb3dkKDUwMCwgMC42LCB0aGlzLm5hdm1lc2gpO1xyXG4gICAgbGV0IHBhcmFtcyA9IG5ldyBPYnN0YWNsZUF2b2lkYW5jZVBhcmFtcygpO1xyXG4gICAgcGFyYW1zLnZlbEJpYXMgPSAwLjU7XHJcbiAgICBwYXJhbXMuYWRhcHRpdmVEaXZzID0gNTtcclxuICAgIHBhcmFtcy5hZGFwdGl2ZVJpbmdzID0gMjtcclxuICAgIHBhcmFtcy5hZGFwdGl2ZURlcHRoID0gMTtcclxuICAgIHRoaXMuY3Jvd2Quc2V0T2JzdGFjbGVBdm9pZGFuY2VQYXJhbXMoMCwgcGFyYW1zKTtcclxuXHJcbiAgICB0aGlzLmFwID0gdGhpcy5nZXRBZ2VudFBhcmFtcyh0aGlzLnVwZGF0ZUZsYWdzKTtcclxuICAgIHRoaXMuZXh0ID0gdGhpcy5jcm93ZC5nZXRRdWVyeUV4dGVudHMoKTtcclxuICAgIHRoaXMuZmlsdGVyID0gdGhpcy5jcm93ZC5nZXRGaWx0ZXIoMCk7XHJcbiAgfVxyXG5cclxuICBnZXRBZ2VudFBhcmFtcyh1cGRhdGVGbGFncykge1xyXG4gICAgbGV0IGFwID0gbmV3IENyb3dkQWdlbnRQYXJhbXMoKTtcclxuICAgIGFwLnJhZGl1cyA9IDAuNjtcclxuICAgIGFwLmhlaWdodCA9IDI7XHJcbiAgICBhcC5tYXhBY2NlbGVyYXRpb24gPSA4LjA7XHJcbiAgICBhcC5tYXhTcGVlZCA9IDIuNTsgLy9PcmlnaW5hbGx5IDMuNWZcclxuICAgIGFwLmNvbGxpc2lvblF1ZXJ5UmFuZ2UgPSBhcC5yYWRpdXMgKiAxMjtcclxuICAgIGFwLnBhdGhPcHRpbWl6YXRpb25SYW5nZSA9IGFwLnJhZGl1cyAqIDMwO1xyXG4gICAgYXAudXBkYXRlRmxhZ3MgPSB1cGRhdGVGbGFncztcclxuICAgIGFwLm9ic3RhY2xlQXZvaWRhbmNlVHlwZSA9IDA7XHJcbiAgICBhcC5zZXBhcmF0aW9uV2VpZ2h0ID0gMTsgLy9PcmlnaW5hbGx5IDJmXHJcbiAgICByZXR1cm4gYXA7XHJcbiAgfVxyXG59XHJcblxyXG5sZXQgY2FjaGUgPSBbXTtcclxuXHJcbmNsYXNzIEFwcCBleHRlbmRzIENyb3dkU2ltQXBwIHtcclxuICBjdXJyZW50TWlsbGlzZWNvbmQgPSAwO1xyXG4gIG1pbGxpc2Vjb25kc0JldHdlZW5GcmFtZXMgPSA0MDsgLy80MG1zIGJldHdlZW4gZnJhbWVzLCBvciAyNWZwc1xyXG4gIGN1cnJlbnRUaWNrID0gMDtcclxuXHJcbiAgY29uc3RydWN0b3Iob2JqRmlsZUNvbnRlbnRzLCBzZWNvbmRzT2ZTaW11bGF0aW9uLCBsb2NhdGlvbkZpbGVDb250ZW50cykge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMub2JqRmlsZUNvbnRlbnRzID0gb2JqRmlsZUNvbnRlbnRzO1xyXG4gICAgdGhpcy5zZWNvbmRzT2ZTaW11bGF0aW9uID0gc2Vjb25kc09mU2ltdWxhdGlvbjtcclxuICAgIHRoaXMubG9jYXRpb25zID0gbG9jYXRpb25GaWxlQ29udGVudHM7XHJcbiAgfVxyXG4gIGJvb3Qobm9uY2UpIHtcclxuICAgIHRoaXMuYm9vdE1lc2godGhpcy5vYmpGaWxlQ29udGVudHMpO1xyXG4gICAgcG9zdE1lc3NhZ2UoeyB0eXBlOiBcImRvbmVCb290XCIrbm9uY2UgfSk7XHJcbiAgICAvL3RoaXMudGljayhbXSwgW10sIFtdKTtcclxuICB9XHJcbiAgZ2V0QWdlbnREZWZpbml0aW9ucygpIHtcclxuICAgIHJldHVybiB7IHR5cGU6IFwiYWdlbnREZWZpbml0aW9uc1wiLCBhZ2VudHM6IEpTT04uc3RyaW5naWZ5KENyb3dkU2ltQXBwLmFnZW50cykgfTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHRpY2sobmV3QWdlbnRzLCBuZXdEZXN0aW5hdGlvbnMsIGxlYXZpbmdBZ2VudHMpIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgIGlmICghdGhpcy5jcm93ZCkgcmV0dXJuO1xyXG4gICAgbGV0IGkgPSB0aGlzLmN1cnJlbnRUaWNrKys7XHJcbiAgICBpZiAoaSA8IDEpIHtcclxuICAgICAgLy8gaW5pdGlhbGl6ZSBhbGwgYWdlbnQncyBpZFxyXG5cclxuICAgIH1cclxuICAgIGZvciAobGV0IGFnZW50IG9mIG5ld0FnZW50cykge1xyXG4gICAgICBDcm93ZFNpbUFwcC5hZ2VudHMucHVzaChhZ2VudCk7XHJcbiAgICAgIGxldCBzdGFydCA9IHRoaXMuZ2V0U3RhcnQoYWdlbnQpO1xyXG4gICAgICBsZXQgaWR4ID0gdGhpcy5jcm93ZC5hZGRBZ2VudChzdGFydCwgdGhpcy5nZXRBZ2VudFBhcmFtcyhDcm93ZFNpbUFwcC51cGRhdGVGbGFncykpO1xyXG4gICAgICBhZ2VudC5pZHggPSBpZHg7XHJcbiAgICAgIGxldCBuZWFyZXN0ID0gdGhpcy5xdWVyeS5maW5kTmVhcmVzdFBvbHkodGhpcy5nZXRFbmQoYWdlbnQpLCB0aGlzLmV4dCwgdGhpcy5maWx0ZXIpO1xyXG4gICAgICB0aGlzLmNyb3dkLnJlcXVlc3RNb3ZlVGFyZ2V0KGFnZW50LmlkeCwgbmVhcmVzdC5nZXROZWFyZXN0UmVmKCksIG5lYXJlc3QuZ2V0TmVhcmVzdFBvcygpKTtcclxuICAgICAgYWdlbnQuaGFzRW50ZXJlZCA9IHRydWU7XHJcbiAgICAgIGFnZW50LmluU2ltdWxhdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBhZ2VudCBvZiBuZXdEZXN0aW5hdGlvbnMpIHtcclxuICAgICAgbGV0IG5lYXJlc3QgPSB0aGlzLnF1ZXJ5LmZpbmROZWFyZXN0UG9seSh0aGlzLmdldEVuZChhZ2VudCksIHRoaXMuZXh0LCB0aGlzLmZpbHRlcik7XHJcbiAgICAgIHRoaXMuY3Jvd2QucmVxdWVzdE1vdmVUYXJnZXQoYWdlbnQuaWR4LCBuZWFyZXN0LmdldE5lYXJlc3RSZWYoKSwgbmVhcmVzdC5nZXROZWFyZXN0UG9zKCkpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgYWdlbnQgb2YgbGVhdmluZ0FnZW50cykge1xyXG4gICAgICBhZ2VudC5pblNpbXVsYXRpb24gPSBmYWxzZTtcclxuICAgICAgQ3Jvd2RTaW1BcHAuYWdlbnRzLmZpbmQoYT0+YS5pZHg9PWFnZW50LmlkeCkuaW5TaW11bGF0aW9uID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuY3Jvd2QucmVtb3ZlQWdlbnQoYWdlbnQuaWR4KTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHRoaXMuY3Jvd2QudXBkYXRlKDEgLyAyNS4wLCBudWxsLCBpKTtcclxuXHJcbiAgICBsZXQgdG9Qb3N0ID0gW107XHJcbiAgICBmb3IgKGxldCBhID0gMDsgYSA8IENyb3dkU2ltQXBwLmFnZW50cy5sZW5ndGg7IGErKykge1xyXG4gICAgICBsZXQgYWdlbnQgPSBDcm93ZFNpbUFwcC5hZ2VudHNbYV07XHJcbiAgICAgIGxldCB0b0FkZCA9IHtcclxuICAgICAgICBoYXNFbnRlcmVkOiBhZ2VudC5oYXNFbnRlcmVkLFxyXG4gICAgICAgIGluU2ltdWxhdGlvbjogYWdlbnQuaW5TaW11bGF0aW9uLFxyXG4gICAgICB9O1xyXG4gICAgICBpZiAoYWdlbnQuaGFzRW50ZXJlZCAmJiBhZ2VudC5pblNpbXVsYXRpb24pIHtcclxuICAgICAgICBsZXQgaW50ZXJuYWxBZ2VudCA9IHRoaXMuY3Jvd2QuZ2V0QWdlbnQoYWdlbnQuaWR4KTtcclxuICAgICAgICBsZXQgcG9zID0gaW50ZXJuYWxBZ2VudC5ucG9zO1xyXG4gICAgICAgIHRvQWRkLnggPSBwb3NbMF07XHJcbiAgICAgICAgdG9BZGQueSA9IHBvc1sxXTtcclxuICAgICAgICB0b0FkZC56ID0gcG9zWzJdO1xyXG4gICAgICAgIHRvQWRkLmlkeCA9IGFnZW50LmlkeDtcclxuICAgICAgICB0b0FkZC5pZCA9IGFnZW50LmlkO1xyXG4gICAgICAgIHRvUG9zdC5wdXNoKHRvQWRkKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcG9zdE1lc3NhZ2UoeyB0eXBlOiBcImFnZW50VXBkYXRlXCIgKyBub25jZSwgYWdlbnRzOiBKU09OLnN0cmluZ2lmeSh0b1Bvc3QpLCBmcmFtZTogaSB9KTtcclxuICB9XHJcbiAgZ2V0U3RhcnQoYWdlbnQpIHtcclxuICAgIHJldHVybiBbYWdlbnQuc3RhcnRYLCBhZ2VudC5zdGFydFksIGFnZW50LnN0YXJ0Wl1cclxuICB9XHJcbiAgZ2V0RW5kKGFnZW50KSB7XHJcbiAgICByZXR1cm4gW2FnZW50LmRlc3RYLCBhZ2VudC5kZXN0WSwgYWdlbnQuZGVzdFpdXHJcbiAgfVxyXG59XHJcblxyXG5sZXQgYXBwO1xyXG5sZXQgbm9uY2UgPSBcIlwiO1xyXG5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7XHJcbiAgaWYgKCFtc2cuZGF0YSkgcmV0dXJuO1xyXG4gIGlmIChtc2cuZGF0YVswXSA9PSBcImJvb3RcIikge1xyXG4gICAgYXBwID0gbmV3IEFwcChtc2cuZGF0YVsxXSwgbXNnLmRhdGFbMl0sIG1zZy5kYXRhWzNdKTtcclxuICAgIG5vbmNlID0gbXNnLmRhdGFbNF07XHJcbiAgICBhcHAuYm9vdChub25jZSk7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKG1zZy5kYXRhWzBdID09IFwidGlja1wiICsgbm9uY2UpIHtcclxuICAgIGFwcC50aWNrKEpTT04ucGFyc2UobXNnLmRhdGFbMV0pLCBKU09OLnBhcnNlKG1zZy5kYXRhWzJdKSwgSlNPTi5wYXJzZShtc2cuZGF0YVszXSkpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHA7Il0sIm5hbWVzIjpbInRoaXMiXSwibWFwcGluZ3MiOiI7OztFQUFBLENBQUMsVUFBVSxNQUFNLEVBQUUsT0FBTyxFQUFFO0VBQzVCLEVBQUUsT0FBTyxPQUFPLEtBQUssUUFBUSxJQUFJLE9BQU8sTUFBTSxLQUFLLFdBQVcsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO0VBQ2pGLEVBQUUsT0FBTyxNQUFNLEtBQUssVUFBVSxJQUFJLE1BQU0sQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLEVBQUUsT0FBTyxDQUFDO0VBQzNFLEdBQUcsTUFBTSxHQUFHLE9BQU8sVUFBVSxLQUFLLFdBQVcsR0FBRyxVQUFVLEdBQUcsTUFBTSxJQUFJLElBQUksRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzNHLENBQUMsQ0FBQ0EsU0FBSSxHQUFHLFVBQVUsT0FBTyxFQUFFLENBQzVCO0VBQ0EsRUFBRSxTQUFTLGVBQWUsQ0FBQyxR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SUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3RDLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDcEMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDcEMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDcEMsUUFBUSxPQUFPLElBQUksQ0FBQztFQUNwQixPQUFPO0VBQ1A7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsUUFBUTtFQUNuQixNQUFNLEtBQUssRUFBRSxTQUFTLE1BQU0sQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDL0MsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoQyxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUN0RSxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMs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Q0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUMsT0FBTztFQUNQO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsUUFBUTtFQUNuQixNQUFNLEtBQUssRUFBRSxTQUFTLE1BQU0sQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFO0VBQ3JDLFFBQVEsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMvQixRQUFRLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0IsUUFBUSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQy9CLFFBQVEsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7RUFDdEQsT0FBTztFQUNQO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsVUFBVTtFQUNyQixNQUFNLEtBQUssRUFBRSxTQUFTLFFBQVEsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFO0VBQ3ZDLFFBQVEsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMvQixRQUFRLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0IsUUFBUSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQy9CLFFBQVEsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztFQUMzQyxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsS0FBSztFQUNoQixNQUFNLEtBQUssRUFBRSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDN0IsUUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDckIsT0FBTztFQUNQO0VBQ0E7QUFDQTtFQUNBLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLFNBQVM7RUFDcEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxPQUFPLENBQUMsQ0FBQyxFQUFFO0VBQ2pDLFFBQVEsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN2RCxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsTUFBTTtFQUNqQixNQUFNLEtBQUssRUFBRSxTQUFTLElBQUksQ0FBQyxDQUFDLEVBQUU7RUFDOUIsUUFBUSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsRSxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsUUFBUTtFQUNuQixNQUFNLEtBQUssRUFBRSxTQUFTLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRTtFQUMzQyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDbEMsUUFBUSxJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN0QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3RDLFFBQVEsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7RUFDdEQsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLE9BQU87RUFDbEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7RUFDekMsUUFBUSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDL0MsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLE9BQU87RUFDbEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7RUFDekMsUUFBUSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDL0MsT0FBTztFQUNQO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsS0FBSyxFQUFFO0VBQ1As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QUMvQyxPQUFPO0VBQ1A7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQSxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxTQUFTO0VBQ3BCLE1BQU0sS0FBSyxFQUFFLFNBQVMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDcEMsUUFBUSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN6QyxPQUFPO0VBQ1A7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsWUFBWTtFQUN2QixNQUFNLEtBQUssRUFBRSxTQUFTLFVBQVUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDakQsUUFBUSxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsQyxRQUFRLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDMUMsUUFBUSxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsQyxRQUFRLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDMUMsUUFBUSxPQUFPLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztFQUNyQyxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsWUFBWTtFQUN2QixNQUFNLEtBQUssRUFBRSxTQUFTLFVBQVUsQ0FBQyxDQUFD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LElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRTtFQUNsRSxVQUFVLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDMUIsVUFBVSxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQzFCLFVBQVUsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1TCxTQUFTO0FBQ1Q7RUFDQSxRQUFRLE9BQU8sQ0FBQyxDQUFDO0VBQ2pCLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSx3QkFBd0I7RUFDbkMsTUFBTSxLQUFLLEVBQUUsU0FBUyxzQkFBc0IsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0VBQ3hFLFFBQVEsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDO0FBQ3RCO0VBQ0EsUUFBUSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsTUFBTSxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsTUFBTSxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsRUFBRTtFQUN2RSxVQUFVLElBQUksRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDM0IsVUFBVSxJQUFJLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQzNCLFVBQVUsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1TCxVQUFVLElBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztFQUN6RSxVQUFVLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDNUIsVUFBVSxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzVCLFNBQVM7QUFDVDtFQUNBLFFBQVEsT0FBTyxDQUFDLENBQUM7RUFDakIsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGFB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QUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDM0QsUUFBUSxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDOUMsUUFBUSxJQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDOUMsUUFBUSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN0QyxRQUFRLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3RDLFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0VBQ3RDLFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDO0VBQ3BDLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDMUIsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9DLFFBQVEsRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDNUMsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM1QyxR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QUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztFQUM1QyxVQUFVLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztFQUM1QyxVQUFVLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztBQUNwRDtFQUNBLFVBQVUsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkM7RUFDQSxVQUFVLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25DO0FBQ0E7RUFDQSxVQUFVLElBQUksS0FBSyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakY7RUFDQSxVQUFVLElBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEYsVUFBVSxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hGO0VBQ0EsVUFBVSxJQUFJLEtBQUssR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FB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LENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUMsRUFBRTtFQUNuRSxVQUFVLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzdDLFVBQVUsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQy9DLFVBQVUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdkU7RUFDQSxVQUFVLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUMzRSxVQUFVLElBQUksR0FBRyxHQUFHLFdBQVcsQ0FBQyxhQUFhLEVBQUUsQ0FBQztFQUNoRCxVQUFVLElBQUksR0FBRyxJQUFJLENBQUMsRUFBRSxTQUFTO0VBQ2pDLFVBQVUsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQztBQUMxQjtFQUNBLFVBQVUsSUFBSSxTQUFTLEdBQUcsV0FBVyxDQUFDLGFBQWEsRUFBRSxDQUFDO0VBQ3REO0FBQ0E7RUFDQSxVQUFVLElBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsU0FBUztBQUNsSTtFQUNBLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDNUQsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEUsVUFBVSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEU7RUFDQSxVQUFVLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDekMsVUFBVSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3JDLFVBQVUsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7RUFDekIsVUFBVSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUN4QixVQUFVLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0VBQzNCLFVBQVUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztBQUNwQztFQUNBLFVBQVUsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO0VBQ3JDLFVBQVUsSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7QUFDL0I7RUFDQSxVQUFVLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDMUMsVUFBVSxJQUFJLFdBQVcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDMUQsVUFBVSxJQUFJLFFB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S0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwQyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFdBQVc7RUFDWCxTQUFTLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7RUFDM0MsVUFBVSxJQUFJLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRTtFQUM3QyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFlBQVksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwQyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFdBQVcsTUFBTTtFQUNqQixZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFlBQVksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwQyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFdBQVc7RUFDWCxTQUFTO0VBQ1QsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGlCQUFpQjtFQUM1QixNQUFNLEtBQUssRUFBRSxTQUFTLGVBQWUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRTtFQUNsRCxRQUFRLElBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQztBQUM1QjtFQUNBLFFBQVEsSUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDO0FBQzVCO0VBQ0EsUUFBUSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDaEMsUUFBUSxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUM7RUFDeEIsT0FBTztFQUNQLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDUjtFQUNBLElBQUksT0FBTyxPQUFPLENBQUM7RUFDbkIsR0FBRyxFQUFFLENBQUM7QUFDTjtFQUNBLEVBQUUsZUFBZSxDQUFDLE9BQU8sRUFBRSxjQUFjLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDL0M7RUFDQSxFQUFFLGVBQWUsQ0FBQyxPQUFPLEVBQUUsY0FBYyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQy9DO0VBQ0EsRUFBRSxlQUFlLENBQUMsT0FBTyxFQUFFLGNBQWMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUMvQztFQUNBLEVBQUUsZUFBZSxDQUFDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbEQ7RUFDQSxFQUFFLGVBQWUsQ0FBQyxPQUFPLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0M7RUFDQSxFQUFFLGVBQWUsQ0FBQyxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEQ7RUFDQSxFQUFFLGVBQWUsQ0FBQyxPQUFPLEVBQUUsY0FBYyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQy9DO0VBQ0EsRUFBRSxlQUFlLENBQUMsT0FBTyxFQUFFLCtCQUErQixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ2xFO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsRUFBRSxJQUFJLGVBQWUsZ0JBQWdCLFlBQVk7RUFDakQsSUFBSSxTQUFTLGFBQWEsR0FBRztFQUM3QixNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7RUFDM0MsS0FBSztBQUNMO0VBQ0EsSUFBSSxZQUFZLENBQUMsYUFBYSxFQUFFLElBQUksRUFBRSxDQUFDO0VBQ3ZDLE1BQU0sR0FBRyxFQUFFLEtBQUs7RUFDaEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDbkMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3hDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN4QyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDeEMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLEtBQUs7RUFDaEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDbkMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3hDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN4QyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDeEMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLE9BQU87RUFDbEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7RUFDekMsUUFBUSxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzVDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxPQUFPO0VBQ2xCLE1BQU0sS0FBSyxFQUFFLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUU7RUFDdEMsUUFBUSxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzVDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxPQUFPO0VBQ2xCLE1BQU0sS0FBSyxFQUFFLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtFQUM1QyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDeEIsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDaEMsUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDaEMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLEtBQUs7RUFDaEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO0VBQzNDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLE1BQU07RUFDakIsTUFBTSxLQUFLLEVBQUUsU0FBUyxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0VBQzVDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDcEMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzVDLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1QyxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsTUFBTTtFQUNqQixNQUFNLEtBQUssRUFBRSxTQUFTLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUU7RUFDNUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwQyxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsT0FBTztFQUNsQixNQUFNLEtBQUssRUFBRSxTQUFTLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtFQUMxQyxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEQsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2hELFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoRCxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsV0FBVztFQUN0QixNQUFNLEtBQUssRUFBRSxTQUFTLFNBQVMsQ0FBQyxDQUFDLEVBQUU7RUFDbkMsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3pFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNsQixRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDbEIsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ2xCLE9BQU87RUFDUCxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ1I7RUFDQSxJQUFJLE9BQU8sYUFBYSxDQUFDO0VBQ3pCLEdBQUcsRUFBRSxDQUFDO0FBQ047RUFDQSxFQUFFLElBQUksS0FBSyxFQUFFLE1BQU0sQ0FBQztBQUNwQjtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLEVBQUUsSUFBSSxhQUFhLGdCQUFnQixZQUFZO0VBQy9DLElBQUksWUFBWSxDQUFDLGFBQWEsRUFBRSxDQUFDO0VBQ2pDLE1BQU0sR0FBRyxFQUFFLGFBQWE7RUFDeEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxXQUFXLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtFQUNqRSxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3RDLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDdEMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN0QyxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RDO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRTtFQUM5QyxVQUFVLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1QjtFQUNBLFVBQVUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUNwQyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2pDLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUNwQyxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2pDLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUNwQyxZQUFZLElBQUksQ0FBQyxDQUFD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LENBQUM7RUFDekQsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDekQ7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDcEMsVUFBVSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsQztFQUNBLFVBQVUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUNyQyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2xDLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7RUFDekMsWUFBWSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDdEMsV0FBVztBQUNYO0VBQ0EsVUFBVSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO0VBQ3JDLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDbEMsV0FBVztBQUNYO0VBQ0EsVUFBVSxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtFQUN6QyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN0QyxXQUFXO0VBQ1gsU0FBUztFQUNULE9BQU87QUFDUDtFQUNBLE1BQU0sSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN0RTtFQUNBLE1BQU0sSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7QUFDL0I7RUFDQSxNQUFNLElBQUksU0FBUyxHQUFHLDBCQUEwQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7RUFDNUQsVUFBVSxLQUFLLENBQUM7QUFDaEI7RUFDQSxNQUFNLElBQUk7RUFDVixRQUFRLEtBQUssU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksR0FBRztFQUM1RCxVQUFVLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7RUFDbEMsVUFBVSxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNwQztFQUNBLFVBQVUsSUFBSSxDQUFDLE1BQU0sRUFBRTtFQUN2QixZQUFZLFNBQVM7RUFDckIsV0FBVztBQUNYO0VBQ0EsVUFBVSxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFO0VBQzVELFlBQVksSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFDekQsV0FBVztFQUNYLFNBQVM7RUFDVCxPQUFPLENBQUMsT0FBTyxHQUFHLEVBQUU7RUFDcEIsUUFBUSxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3pCLE9BQU8sU0FBUztFQUNoQixRQUFRLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztFQUN0QixPQUFPO0VBQ1AsS0FBSztBQUNMO0VBQ0EsSUFBSSxZQUFZLENBQUMsYUFBYSxFQUFFLENBQUM7RUFDakMsTUFBTSxHQUFHLEVBQUUsa0JBQWtCO0VBQzdCLE1BQU0sS0FBSyxFQUFFLFNBQVMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0VBQy9ELFFBQVEsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDO0VBQzNCLFFBQVEsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsT0FBTyxDQUFDO0VBQzNFLFFBQVEsT0FBTyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsT0FBTyxDQUFDO0VBQzNFLFFBQVEsT0FBTyxPQUFPLENBQUM7RUFDdkIsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLDBCQUEwQjtFQUNyQyxNQUFNLEtBQUssRUFBRSxTQUFTLHdCQUF3QixDQUFDLElBQUksRUFBRSxJQUFJLEVBQUU7RUFDM0Q7RUFDQSxRQUFRLEdBQUcsR0FBRyxFQUFFLENBQUM7RUFDakIsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbEI7RUFDQSxRQUFRLE9BQU8sQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUU7RUFDakMsVUFBVSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzFCLFVBQVUsSUFBSSxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUMzRSxVQUFVLElBQUksVUFBVSxHQUFHLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsVUFBVSxJQUFJLFVBQVUsSUFBSSxPQUFPLEVBQUU7RUFDckMsWUFBWSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQzNCLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxPQUFPLElBQUksVUFBVSxFQUFFO0VBQ3JDLFlBQVksQ0FBQyxFQUFFLENBQUM7RUFDaEIsV0FBVyxNQUFNO0VBQ2pCLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUN4QixXQUFXO0VBQ1gsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLEdBQUcsQ0FBQztFQUNuQixPQUFPO0VBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNSO0VBQ0EsSUFBSSxPQUFPLGFBQWEsQ0FBQztFQUN6QixHQUFHLEVBQUUsQ0FBQztBQUNOO0VBQ0EsRUFBRSxlQUFlLENBQUMsYUFBYSxFQUFFLFlBQVksR0FBRyxLQUFLLEdBQUcsU0FBUyxVQUFVLEdBQUc7RUFDOUUsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3RDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0VBQ3ZDLEdBQUcsRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUNiO0VBQ0EsRUFBRSxlQUFlLENBQUMsYUFBYSxFQUFFLG1CQUFtQixHQUFHLE1BQU0sR0FBRyxTQUFTLGlCQUFpQixHQUFHO0VBQzdGLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQzdDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztFQUN0QyxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUM7QUFDZDtFQUNBLEVBQUUsSUFBSSxPQUFPLGdCQUFnQixZQUFZO0VBQ3pDLElBQUksU0FBUyxPQUFPLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRTtFQUN0QyxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDckM7RUFDQSxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDaEQ7RUFDQSxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDN0M7RUFDQSxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsZUFBZSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckQ7RUFDQSxNQUFNLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0VBQy9CLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7RUFDekIsTUFBTSxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDckYsS0FBSztBQUNMO0VBQ0EsSUFBSSxZQUFZLENBQUMsT0FBTyxFQUFFLENBQUM7RUFDM0IsTUFBTSxHQUFHLEVBQUUsU0FBUztFQUNwQixNQUFNLEtBQUssRUFBRSxTQUFTLE9BQU8sR0FBRztFQUNoQyxRQUFRLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztFQUMxQixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsVUFBVTtFQUNyQixNQUFNLEtBQUssRUFBRSxTQUFTLFFBQVEsR0FBRztFQUNqQyxRQUFRLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztFQUM3QixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsMEJBQTBCO0VBQ3JDLE1BQU0sS0FBSyxFQUFFLFNBQVMsd0JBQXdCLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRTtFQUMzRCxRQUFRLE9BQU8sYUFBYSxDQUFDLHdCQUF3QixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztFQUNsRSxPQUFPO0VBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNSO0VBQ0EsSUFBSSxPQUFPLE9BQU8sQ0FBQztFQUNuQixHQUFHLEVBQUUsQ0FBQztBQUNOO0VBQ0EsRUFBRSxJQUFJLHVCQUF1QjtFQUM3QjtFQUNBLGlCQUFpQixZQUFZO0VBQzdCLElBQUksWUFBWSxDQUFDLHVCQUF1QixFQUFFLElBQUksRUFBRSxDQUFDO0VBQ2pELE1BQU0sR0FBRyxFQUFFLFVBQVU7RUFDckIsTUFBTSxLQUFLLEVBQUUsU0FBUyxRQUFRLENBQUMsU0FBUyxFQUFFO0VBQzFDLFFBQVEsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUMvQyxVQUFVLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDbEMsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLEtBQUssQ0FBQztFQUNyQixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsYUFBYTtFQUN4QixNQUFNLEtBQUssRUFBRSxTQUFTLFdBQVcsQ0FBQyxlQUFlLEVBQUU7RUFDbkQsUUFBUSxJQUFJLFFBQVEsR0FBRyxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDekQ7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0VBQ2xELFVBQVUsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMzQyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLE9BQU8sUUFBUSxDQUFDO0VBQ3hCLE9BQU87RUFDUCxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ1I7RUFDQSxJQUFJLFNBQVMsdUJBQXVCLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRTtFQUN0RCxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztBQUNyRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM3QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM1QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM1QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDM0M7RUFDQSxNQUFNLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0VBQy9CLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7RUFDekIsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQy9CLE1BQU0sSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMvQixNQUFNLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDcEQsTUFBTSxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3BEO0VBQ0EsTUFBTSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7RUFDcEQsUUFBUSxlQUFlLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN4RCxRQUFRLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3hELE9BQU87RUFDUCxLQUFLO0FBQ0w7RUFDQSxJQUFJLFlBQVksQ0FBQyx1QkFBdUIsRUFBRSxDQUFDO0VBQzNDLE1BQU0sR0FBRyxFQUFFLGtCQUFrQjtFQUM3QixNQUFNLEtBQUssRUFBRSxTQUFTLGdCQUFnQixHQUFHO0VBQ3pDLFFBQVEsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ3pCLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxrQkFBa0I7RUFDN0IsTUFBTSxLQUFLLEVBQUUsU0FBUyxnQkFBZ0IsR0FBRztFQUN6QyxRQUFRLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztFQUN6QixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsa0JBQWtCO0VBQzdCLE1BQU0sS0FBSyxFQUFFLFNBQVMsZ0JBQWdCLEdBQUc7RUFDekMsUUFBUSxPQUFPLEVBQUUsQ0FBQztFQUNsQixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsaUJBQWlCO0VBQzVCLE1BQU0sS0FBSyxFQUFFLFNBQVMsZUFBZSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRTtFQUNsRSxRQUFRLElBQUksR0FBRyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7RUFDckMsUUFBUSxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztFQUN4QixRQUFRLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0VBQ3hCLFFBQVEsR0FBRyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7RUFDMUIsUUFBUSxHQUFHLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztFQUM5QixRQUFRLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9CLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxRQUFRO0VBQ25CLE1BQU0sS0FBSyxFQUFFLFNBQVMsTUFBTSxHQUFHO0VBQy9CO0VBQ0EsUUFBUSxPQUFPLENBQUMsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztFQUN4RCxPQUFPO0VBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNSO0VBQ0EsSUFBSSxPQUFPLHVCQUF1QixDQUFDO0VBQ25DLEdBQUcsRUFBRSxDQUFDO0FBQ047RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSxhQUFhLEVBQUUsVUFBVSxlQUFlLEVBQUUsU0FBUyxFQUFFO0VBQ2hHLElBQUksT0FBTyxJQUFJLHVCQUF1QixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0VBQ3BHLEdBQUcsQ0FBQyxDQUFDO0FBQ0w7RUFDQSxFQUFFLElBQUksa0JBQWtCLEdBQUcsU0FBUyxrQkFBa0IsR0FBRztFQUN6RCxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztBQUM5QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxpQkFBaUIsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNqRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDM0MsR0FBRyxDQUFDO0FBQ0o7RUFDQSxFQUFFLElBQUksV0FBVyxnQkFBZ0IsWUFBWTtFQUM3QyxJQUFJLFNBQVMsV0FBVyxHQUFHO0VBQzNCLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztFQUN6QyxLQUFLO0FBQ0w7RUFDQSxJQUFJLFlBQVksQ0FBQyxXQUFXLEVBQUUsQ0FBQztFQUMvQixNQUFNLEdBQUcsRUFBRSxNQUFNO0VBQ2pCO0VBQ0EsTUFBTSxLQUFLLEVBQUUsU0FBUyxJQUFJLENBQUMsRUFBRSxFQUFFO0VBQy9CLFFBQVEsSUFBSSxPQUFPLEdBQUcsSUFBSSxrQkFBa0IsRUFBRSxDQUFDO0FBQy9DO0VBQ0EsUUFBUSxJQUFJO0VBQ1osVUFBVSxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7RUFDekIsVUFBVSxJQUFJLEtBQUssR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzNDO0VBQ0EsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUNqRCxZQUFZLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoQyxZQUFZLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0VBQ3pDLFdBQVc7RUFDWDtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQSxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUU7RUFDcEIsVUFBVSxNQUFNLENBQUMsQ0FBQztFQUNsQixTQUFTLFNBQVM7RUFDbEIsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLHVCQUF1QixDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztFQUMvRixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsVUFBVTtFQUNyQixNQUFNLEtBQUssRUFBRSxTQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0VBQzlDLFFBQVEsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0VBQ2xDLFVBQVUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7RUFDekMsU0FBUyxNQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtFQUN6QyxVQUFVLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0VBQ3ZDLFNBQVM7RUFDVCxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsWUFBWTtFQUN2QixNQUFNLEtBQUssRUFBRSxTQUFTLFVBQVUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0VBQ2hELFFBQVEsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFO0VBQ25DLFVBQVUsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM3QztFQUNBLFVBQVUsSUFBSSxTQUFTLEdBQUcsMEJBQTBCLENBQUMsSUFBSSxDQUFDO0VBQzFELGNBQWMsS0FBSyxDQUFDO0FBQ3BCO0VBQ0EsVUFBVSxJQUFJO0VBQ2QsWUFBWSxLQUFLLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxJQUFJLEdBQUc7RUFDaEUsY0FBYyxJQUFJLEVBQUUsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0VBQ25DLGNBQWMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDL0MsYUFBYTtFQUNiLFdBQVcsQ0FBQyxPQUFPLEdBQUcsRUFBRTtFQUN4QixZQUFZLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDN0IsV0FBVyxTQUFTO0VBQ3BCLFlBQVksU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDO0VBQzFCLFdBQVc7RUFDWCxTQUFTO0VBQ1QsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGNBQWM7RUFDekIsTUFBTSxLQUFLLEVBQUUsU0FBUyxZQUFZLENBQUMsSUFBSSxFQUFFO0VBQ3pDLFFBQVEsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsQztFQUNBLFFBQVEsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtFQUMxQixVQUFVLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyxnREFBZ0QsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDeEcsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN0RSxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsVUFBVTtFQUNyQixNQUFNLEtBQUssRUFBRSxTQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0VBQzlDLFFBQVEsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNsQztFQUNBLFFBQVEsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtFQUMxQixVQUFVLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyxpRUFBaUUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7RUFDbkgsU0FBUztBQUNUO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7RUFDL0MsVUFBVSxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3JFO0VBQ0EsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0VBQ3RDLFlBQVksT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0VBQy9FLFdBQVc7RUFDWCxTQUFTO0VBQ1QsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGdCQUFnQjtFQUMzQixNQUFNLEtBQUssRUFBRSxTQUFTLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFO0VBQ3BELFFBQVEsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNqQyxRQUFRLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUM3RSxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsVUFBVTtFQUNyQixNQUFNLEtBQUssRUFBRSxTQUFTLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFO0VBQzNDLFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFO0VBQ3RCLFVBQVUsSUFBSSxFQUFFLENBQUM7RUFDakIsU0FBUyxNQUFNLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTtFQUM3QixVQUFVLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO0VBQzdCLFNBQVMsTUFBTTtFQUNmLFVBQVUsTUFBTSxJQUFJLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLENBQUM7RUFDdkQsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLElBQUksQ0FBQztFQUNwQixPQUFPO0VBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNSO0VBQ0EsSUFBSSxPQUFPLFdBQVcsQ0FBQztFQUN2QixHQUFHLEVBQUUsQ0FBQztBQUNOO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsRUFBRSxJQUFJLGVBQWUsR0FBRyxTQUFTLGVBQWUsR0FBRztFQUNuRCxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsZUFBZSxDQUFDLENBQUM7RUFDM0MsR0FBRyxDQUFDO0FBQ0o7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3REO0VBQ0EsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzdEO0VBQ0EsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQzNEO0VBQ0EsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUFFLHFCQUFxQixFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQzlEO0VBQ0EsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUFFLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN6RztFQUNBLEVBQUUsZUFBZSxDQUFDLGVBQWUsRUFBRSxlQUFlLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDNUQ7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDMUQ7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDaEU7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDOUQ7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbEU7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0Q7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsNEJBQTRCLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDdkU7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsNEJBQTRCLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDdkU7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3BEO0VBQ0EsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUFFLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNuRDtFQUNBLEVBQUUsZUFBZSxDQUFDLGVBQWUsRUFBRSxRQUFRLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDakQ7RUFDQSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDeEQ7RUFDQTtFQUNBO0VBQ0E7QUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxFQUFFLElBQUksWUFBWTtFQUNsQjtBQUNBO0VBQ0E7QUFDQTtFQUNBO0FBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7QUFDQTtFQUNBO0FBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7QUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7QUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxFQUFFLFNBQVMsWUFBWSxDQUFDLGFBQWEsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsZUFBZSxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsWUFBWSxFQUFFLGdCQUFnQixFQUFFLG9CQUFvQixFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUU7RUFDaFEsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ3hDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNqRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM5QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN4QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN4QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxvQkFBb0IsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ3hEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGdCQUFnQixFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDcEQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsZUFBZSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDbkQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNwRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSx3QkFBd0IsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzVEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ25EO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDaEQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN0RDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxzQkFBc0IsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQzFEO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGlCQUFpQixFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckQ7RUFDQSxJQUFJLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO0VBQ3ZDLElBQUksSUFBSSxDQUFDLEVBQUUsR0FBRyxRQUFRLENBQUM7RUFDdkIsSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFHLFVBQVUsQ0FBQztFQUN6QixJQUFJLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxhQUFhLENBQUM7RUFDNUMsSUFBSSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUMzRCxJQUFJLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQzdELElBQUksSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDM0QsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxDQUFDO0VBQ3hELElBQUksSUFBSSxDQUFDLHNCQUFzQixHQUFHLFlBQVksQ0FBQztFQUMvQyxJQUFJLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxHQUFHLGFBQWEsQ0FBQztBQUN2RDtFQUNBLElBQUksSUFBSSxDQUFDLGVBQWUsR0FBRyxlQUFlLEdBQUcsZUFBZSxDQUFDO0FBQzdEO0VBQ0EsSUFBSSxJQUFJLENBQUMsZUFBZSxHQUFHLFlBQVksQ0FBQztFQUN4QyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQztFQUNyRixJQUFJLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxVQUFVLEdBQUcsb0JBQW9CLENBQUM7RUFDbEUsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztFQUM3QixJQUFJLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO0VBQzNDLEdBQUcsQ0FBQztBQUNKO0VBQ0EsRUFBRSxJQUFJLGdCQUFnQixnQkFBZ0IsWUFBWTtFQUNsRDtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQSxJQUFJLFNBQVMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFO0VBQ3JDLE1BQU0sSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsa0JBQWtCLENBQUM7QUFDekg7RUFDQSxNQUFNLGVBQWUsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztBQUM5QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM3QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM1QztFQUNBLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7RUFDekIsTUFBTSxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztFQUN2QixLQUFLO0FBQ0w7RUFDQSxJQUFJLFlBQVksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0VBQ3BDLE1BQU0sR0FBRyxFQUFFLGdCQUFnQjtFQUMzQixNQUFNLEtBQUssRUFBRSxTQUFTLGNBQWMsR0FBRztFQUN2QyxRQUFRLE9BQU8sSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ3RDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxPQUFPO0VBQ2xCLE1BQU0sS0FBSyxFQUFFLFNBQVMsS0FBSyxDQUFDLElBQUksRUFBRTtFQUNsQyxRQUFRLE9BQU8sSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDMUQsT0FBTztFQUNQLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDUjtFQUNBLElBQUksT0FBTyxnQkFBZ0IsQ0FBQztFQUM1QixHQUFHLEVBQUUsQ0FBQztBQUNOO0VBQ0EsRUFBRSxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsb0JBQW9CLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEU7RUFDQSxFQUFFLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsVUFBVSxLQUFLLEVBQUU7RUFDOUQsSUFBSSxPQUFPLElBQUksZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDekQ7RUFDQSxHQUFHLENBQUMsQ0FBQztBQUNMO0VBQ0EsRUFBRSxJQUFJLHVCQUF1QixHQUFHLFNBQVMsdUJBQXVCLEdBQUc7RUFDbkUsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLHVCQUF1QixDQUFDLENBQUM7RUFDbkQsR0FBRyxDQUFDO0FBQ0o7RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSwyQkFBMkIsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5RTtFQUNBLEVBQUUsZUFBZSxDQUFDLHVCQUF1QixFQUFFLDZCQUE2QixFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQy9FO0VBQ0EsRUFBRSxlQUFlLENBQUMsdUJBQXVCLEVBQUUsNEJBQTRCLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDOUU7RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSwyQkFBMkIsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM3RTtFQUNBLEVBQUUsZUFBZSxDQUFDLHVCQUF1QixFQUFFLDJCQUEyQixFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzdFO0VBQ0EsRUFBRSxlQUFlLENBQUMsdUJBQXVCLEVBQUUsNEJBQTRCLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDOUU7RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSwyQkFBMkIsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM3RTtFQUNBLEVBQUUsZUFBZSxDQUFDLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLElBQUksZ0JBQWdCLENBQUMsdUJBQXVCLENBQUMsMkJBQTJCLEVBQUUsdUJBQXVCLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDO0FBQ2xNO0VBQ0EsRUFBRSxlQUFlLENBQUMsdUJBQXVCLEVBQUUsc0JBQXNCLEVBQUUsSUFBSSxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FBQywwQkFBMEIsRUFBRSx1QkFBdUIsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUM7QUFDaE07RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSxxQkFBcUIsRUFBRSxJQUFJLGdCQUFnQixDQUFDLHVCQUF1QixDQUFDLHlCQUF5QixFQUFFLHVCQUF1QixDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQztBQUM5TDtFQUNBLEVBQUUsZUFBZSxDQUFDLHVCQUF1QixFQUFFLHNCQUFzQixFQUFFLElBQUksZ0JBQWdCLENBQUMsdUJBQXVCLENBQUMsMEJBQTBCLEVBQUUsdUJBQXVCLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDO0FBQ2hNO0VBQ0EsRUFBRSxlQUFlLENBQUMsdUJBQXVCLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxnQkFBZ0IsQ0FBQyx1QkFBdUIsQ0FBQyx5QkFBeUIsRUFBRSx1QkFBdUIsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLENBQUM7QUFDOUw7RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSxxQkFBcUIsRUFBRSxJQUFJLGdCQUFnQixDQUFDLHVCQUF1QixDQUFDLHlCQUF5QixFQUFFLHVCQUF1QixDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQztBQUM5TDtFQUNBLEVBQUUsZUFBZSxDQUFDLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFFO0VBQ0EsRUFBRSxlQUFlLENBQUMsdUJBQXVCLEVBQUUsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDMUU7RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSx1QkFBdUIsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxRTtFQUNBLEVBQUUsZUFBZSxDQUFDLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFFO0VBQ0EsRUFBRSxlQUFlLENBQUMsdUJBQXVCLEVBQUUsMkJBQTJCLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDOUU7RUFDQSxFQUFFLGVBQWUsQ0FBQyx1QkFBdUIsRUFBRSxzQkFBc0IsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMxRTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQSxFQUFFLElBQUksa0JBQWtCLEdBQUcsU0FBUyxrQkFBa0IsR0FBRztFQUN6RCxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLENBQUMsQ0FBQztBQUM5QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMxQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMvQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDOUM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM1QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbkM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ25DO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN2QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDdkM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3RDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztFQUN2QyxHQUFHLENBQUM7QUFDSjtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQSxFQUFFLElBQUksV0FBVyxHQUFHLFNBQVMsV0FBVyxHQUFHO0VBQzNDLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN2QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3RDLEdBQUcsQ0FBQztBQUNKO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQTtFQUNBLEVBQUUsSUFBSSxXQUFXLEdBQUcsU0FBUyxXQUFXLEdBQUc7RUFDM0MsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNsQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDcEM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3BDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUNsQyxHQUFHLENBQUM7QUFDSjtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLEVBQUUsSUFBSSxZQUFZLEdBQUcsU0FBUyxZQUFZLEdBQUc7RUFDN0MsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDO0VBQ3hDLEdBQUcsQ0FBQztBQUNKO0VBQ0EsRUFBRSxlQUFlLENBQUMsWUFBWSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUU7RUFDNUQsSUFBSSxJQUFJLEtBQUssR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ3hCLElBQUksT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7RUFDakMsR0FBRyxDQUFDLENBQUM7QUFDTDtFQUNBLEVBQUUsZUFBZSxDQUFDLFlBQVksRUFBRSxlQUFlLEVBQUUsVUFBVSxHQUFHLEVBQUU7RUFDaEUsSUFBSSxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDL0IsSUFBSSxPQUFPLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7RUFDOUIsR0FBRyxDQUFDLENBQUM7QUFDTDtFQUNBLEVBQUUsZUFBZSxDQUFDLFlBQVksRUFBRSxlQUFlLEVBQUUsVUFBVSxHQUFHLEVBQUU7RUFDaEUsSUFBSSxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0IsSUFBSSxPQUFPLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUM7RUFDOUIsR0FBRyxDQUFDLENBQUM7QUFDTDtFQUNBLEVBQUUsZUFBZSxDQUFDLFlBQVksRUFBRSxtQkFBbUIsRUFBRSxVQUFVLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDckUsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ2hDLElBQUksT0FBTyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNsQyxHQUFHLENBQUMsQ0FBQztBQUNMO0VBQ0EsRUFBRSxlQUFlLENBQUMsWUFBWSxFQUFFLFFBQVEsRUFBRSxVQUFVLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFO0VBQy9ELElBQUksSUFBSSxLQUFLLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUN4QixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUM7RUFDcEIsSUFBSSxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLElBQUksSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEtBQUssS0FBSyxDQUFDO0VBQ3pELEdBQUcsQ0FBQyxDQUFDO0FBQ0w7RUFDQSxFQUFFLGVBQWUsQ0FBQyxZQUFZLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7RUFDaEUsSUFBSSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDM0MsR0FBRyxDQUFDLENBQUM7QUFDTDtFQUNBLEVBQUUsSUFBSSxNQUFNLGdCQUFnQixZQUFZO0VBQ3hDLElBQUksU0FBUyxNQUFNLEdBQUc7RUFDdEIsTUFBTSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQ3BDLEtBQUs7QUFDTDtFQUNBLElBQUksWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDO0VBQzFCLE1BQU0sR0FBRyxFQUFFLFlBQVk7RUFDdkIsTUFBTSxLQUFLLEVBQUUsU0FBUyxVQUFVLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0VBQ3hELFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUNwQyxVQUFVLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDN0IsVUFBVSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzdCLFNBQVM7QUFDVDtFQUNBLFFBQVEsS0FBSyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtFQUN4QyxVQUFVLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7RUFDdEMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMzRCxZQUFZLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElB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QUFDO0VBQzNCLFFBQVEsZUFBZSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNqRCxRQUFRLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDakQsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLGNBQWMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO0VBQzlDLFFBQVEsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO0VBQ3ZCLFFBQVEsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDO0FBQ3ZCO0VBQ0EsUUFBUSxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzdELFFBQVEsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztFQUN6QyxRQUFRLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7RUFDekMsUUFBUSxJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUM7QUFDaEM7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUNuRCxVQUFVLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxXQUFXLEVBQUUsQ0FBQztFQUMzQyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsRUFBRTtFQUN6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LElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7RUFDdkMsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ3ZDO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQSxNQUFNLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7QUFDL0M7RUFDQSxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDO0VBQy9DLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUM7RUFDL0MsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQztFQUMvQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDO0VBQy9DLE1BQU0sSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0VBQ3RELE1BQU0sSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0VBQ3ZELEtBQUssTUFBTTtFQUNYLE1BQU0sSUFBSSxFQUFFLEdBQUcs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LElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFO0VBQ3JFLFFBQVEsSUFBSSxDQUFDLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDOUI7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDdEMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztFQUM3QyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUM7RUFDakIsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2xCO0VBQ0EsUUFBUSxLQUFLLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsR0FBRyxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUU7RUFDOUQsVUFBVSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQzlCLFVBQVUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQjtFQUNBLFVBQVUsSUFBSSxHQUFHLElBQUksR0FBRyxFQUFFO0VBQzFCLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUMxQyxZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUM5RyxZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUM5RyxZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUM5RyxZQUFZLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3hFLFlBQVksQ0FBQyxFQUFFLENBQUM7RUFDaEIsWUFBWSxDQUFDLEVBQUUsQ0FBQztFQUNoQjtBQUNBO0VBQ0EsWUFBWSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUU7RUFDM0IsY0FBYyxlQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxH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SSxDQUFDLEVBQUUsT0FBTztBQUMvRTtFQUNBLFFBQVEsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUM7RUFDdkQsUUFBUSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUN2RCxRQUFRLEVBQUUsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzlDLFFBQVEsRUFBRSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDOUM7RUFDQSxRQUFRLElBQUksR0FBRyxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQy9DLFFBQVEsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ3BCLFFBQVEsSUFBSSxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMxQixRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9CLFFBQVEsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDNUIsUUFBUSxlQUFlLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNyRCxRQUFRLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VB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LElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDaEUsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hFLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNoRSxRQUFRLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxPQUFPO0VBQzdCLFFBQVEsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxPQUFPO0VBQ3RDLFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLE9BQU87RUFDN0IsUUFBUSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU87RUFDdkMsUUFBUSxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUMvQixRQUFRLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0VBQ3BELFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUM7RUFDL0IsUUFBUSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN0RDtFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRTtFQUMzQyxVQUFVLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDN0MsWUFBWSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2pEO0VBQ0EsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3ZFLGNBQWMsSUFBSSxFQUFFLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQztFQUNBLGNBQWMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRTtFQUNoRCxnQkFBZ0IsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3RyxlQUFlO0VBQ2YsYUFBYTtFQUNiLFdBQVc7RUFDWCxTQUFTO0FBQ1Q7RUFDQSxRQUFRLEdBQUcsQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUM7RUFDdkMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLFlBQVk7RUFDdkIsTUFBTSxLQUFLLEVBQUUsU0FBUyxVQUFVLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRTtFQUMvRSxRQUFRLFdBQVcsR0FBRyxJQUFJLENBQUM7RUFDM0IsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbEI7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7RUFDekMsVUFBVSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLEdBQUcsQ0FBQyxJQUFJLE1BQU0sQ0FBQztFQUM1QyxVQUFVLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUNwQixVQUFVLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUM7RUFDbkMsVUFBVSxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3pCLFVBQVUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUN6QixVQUFVLElBQUksRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDekIsVUFBVSxHQUFHLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUN0QyxVQUFVLEdBQUcsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDOUMsVUFBVSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQ3JDO0VBQ0EsVUFBVSxJQUFJLEVBQUUsR0FBRyxJQUFJLEVBQUU7RUFDekIsWUFBWSxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDckMsWUFBWSxHQUFHLElBQUksRUFBRSxDQUFDO0VBQ3RCLFlBQVksR0FBRyxJQUFJLEVBQUUsQ0FBQztFQUN0QixXQUFXO0FBQ1g7RUFDQSxVQUFVLEdBQUcsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ3RDLFVBQVUsR0FBRyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxVQUFVLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDckM7RUFDQSxVQUFVLElBQUksRUFBRSxHQUFHLElBQUksRUFBRTtFQUN6QixZQUFZLEVBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNyQyxZQUFZLEdBQUcsSUFBSSxFQUFFLENBQUM7RUFDdEIsWUFBWSxHQUFHLElBQUksRUFBRSxDQUFDO0VBQ3RCLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDO0VBQ3RCLFVBQVUsSUFBSSxHQUFHLEdBQUcsQ0FBQztFQUNyQixVQUFVLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQztFQUN0QixVQUFVLElBQUksR0FBRyxHQUFHLENBQUM7RUFDckIsVUFBVSxLQUFLLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0VBQ3hDLFVBQVUsR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxHQUFHLENBQUM7RUFDcEMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLEdBQUcsQ0FBQztFQUNwQyxVQUFVLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7RUFDdkMsVUFBVSxJQUFJLEtBQUssR0FBRyxJQUFJLEdBQUcsV0FBVyxHQUFHLFdBQVcsR0FBRyxHQUFHLENBQUM7QUFDN0Q7RUFDQSxVQUFVLElBQUksSUFBSSxHQUFHLElBQUksRUFBRTtFQUMzQixZQUFZLEtBQUssR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO0VBQy9CLFlBQVksR0FBRyxJQUFJLEtBQUssQ0FBQztFQUN6QixZ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QzVCLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDN0IsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3pCLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDN0IsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUM3QixRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQzdCLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDN0IsUUFBUSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUNuQixRQUFRLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDaEUsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hFLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNoRSxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDaEUsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hFLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNoRSxRQUFRLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxPQUFPO0VBQzdCLFFBQVEsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxPQUFPO0VBQ3RDLFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLE9BQU87RUFDN0IsUUFBUSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU87RUFDdkMsUUFBUSxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUMvQixRQUFRLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0VBQ3BELFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUM7RUFDL0IsUUFBUSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN0RDtFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRTtFQUMzQyxVQUFVLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDN0MsWUFBWSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2pEO0VBQ0EsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3ZFLGNBQWMsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNyQyxjQUFjLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxlQUFlLENBQUMsWUFBWSxFQUFFLFNBQVM7QUFDekU7RUFDQSxjQUFjLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUU7RUFDbEQsZ0JBQWdCLEVBQUUsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDO0VBQ3RELGdCQUFnQixFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQztFQUN0RCxnQkFBZ0IsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDakMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pDO0VBQ0EsZ0JBQWdCLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtFQUM1QyxrQkFBa0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3RCxpQkFBaUI7RUFDakIsZUFBZTtFQUNmLGFBQWE7RUFDYixXQUFXO0VBQ1gsU0FBUztBQUNUO0VBQ0EsUUFBUSxHQUFHLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDLENBQUM7RUFDNUMsT0FBTztFQUNQLEtBQUssQ0FBQyxFQUFFLENBQUM7RUFDVCxNQUFNLEdBQUcsRUFBRSxtQkFBbUI7RUFDOUI7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLE1BQU0sS0FBSyxFQUFFLFNBQVMsaUJBQWlCLENBQUMsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUU7RUFDMUQsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO0VBQzFCLFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztFQUMzQixRQUFRLEdBQUcsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7RUFDckMsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3REO0FBQ0E7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDcEMsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3RDLFlBQVksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3pDO0VBQ0EsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3ZFLGNBQWMsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxZQUFZLEVBQUU7RUFDaEUsZ0JBQWdCLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDNUIsZUFBZSxNQUFNO0VBQ3JCLGdCQUFnQixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3ZDLGdCQUFnQixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDM0I7RUFDQSxnQkFBZ0IsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRTtFQUNsRCxrQkFBa0IsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxlQUFlLENBQUMsZ0JBQWdCLEVBQUU7RUFDekYsb0JBQW9CLElBQUksRUFBRSxHQUFHLENBQUMsR0FBRyxZQUFZLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ2pFLG9CQUFvQixJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUNqRSxvQkFBb0IsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM1RjtFQUNBLG9CQUFvQixJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksZUFBZSxDQUFDLFlBQVksRUFBRTtFQUN6RSxzQkFBc0IsRUFBRSxFQUFFLENBQUM7RUFDM0IscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQixpQkFBaUI7QUFDakI7QUFDQTtFQUNBLGdCQUFnQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUN6QyxlQUFlO0VBQ2YsYUFBYTtFQUNiLFdBQVc7RUFDWCxTQUFTO0FBQ1Q7RUFDQSxRQUFRLElBQUksRUFBRSxDQUFDO0VBQ2Y7QUFDQTtFQUNBLFFBQVEsS0FBSyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRTtFQUN2QyxVQUFVLEtBQUssSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUU7RUFDekMsWUFBWSxJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUM7RUFDQSxZQUFZLEtBQUssSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBRSxHQUFHLEdBQUcsRUFBRSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUU7RUFDL0UsY0FBYyxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ3RDO0VBQ0EsY0FBYyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRTtFQUNuRjtFQUNBLGdCQUFnQixJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RDtFQUNBLGdCQUFnQixJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1RDtFQUNBLGdCQUFnQixJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3BGLGdCQUFnQixJQUFJLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ3ZDLGdCQUFnQixFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQ2pELGdCQUFnQixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNqRDtFQUNBLGdCQUFnQixJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRTtFQUNwRixrQkFBa0IsSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0Qsa0JBQWtCLElBQUksR0FBRyxHQUFHLEVBQUUsR0FBRyxZQUFZLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQy9ELGtCQUFrQixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3hGLGtCQUFrQixFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQ3BELGtCQUFrQixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUNuRCxpQkFBaUI7RUFDakIsZUFBZTtBQUNmO0VBQ0EsY0FBYyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRTtFQUNuRjtFQUNBLGdCQUFnQixJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RDtFQUNBLGdCQUFnQixJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RDtFQUNBLGdCQUFnQixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3ZGO0VBQ0EsZ0JBQWdCLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDekMsZ0JBQWdCLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDbEQsZ0JBQWdCLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ2pEO0VBQ0EsZ0JBQWdCLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLElBQUksZUFBZSxDQUFDLGdCQUFnQixFQUFFO0VBQ3JGLGtCQUFrQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqRTtFQUNBLGtCQUFrQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqRTtFQUNBLGtCQUFrQixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzVGO0VBQ0Esa0JBQWtCLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDckQsa0JBQWtCLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ25ELGlCQUFpQjtFQUNqQixlQUFlO0VBQ2YsYUFBYTtFQUNiLFdBQVc7RUFDWCxTQUFTO0FBQ1Q7QUFDQTtFQUNBLFFBQVEsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUU7RUFDL0MsVUFBVSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRTtFQUNqRDtFQUNBO0VBQ0EsWUFBWSxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDL0M7RUFDQSxZQUFZLEtBQUssSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxJQUFJLEdBQUcsR0FBRyxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxFQUFFLEdBQUcsR0FBRyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUU7RUFDdkYsY0FBYyxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsY0FBYyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRTtFQUNuRjtFQUNBLGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRDtFQUNBLGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRDtFQUNBLGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzFGO0VBQ0EsZ0JBQWdCLElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0VBQ3hELGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQzNDLGdCQUFnQixFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQ25ELGdCQUFnQixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNuRDtFQUNBLGdCQUFnQixJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRTtFQUN0RixrQkFBa0IsSUFBSSxLQUFLLEdBQUcsSUFBSSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkU7RUFDQSxrQkFBa0IsSUFBSSxLQUFLLEdBQUcsSUFBSSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkU7RUFDQSxrQkFBa0IsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNoRztFQUNBLGtCQUFrQixFQUFFLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQ3RELGtCQUFrQixJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUNyRCxpQkFBaUI7RUFDakIsZUFBZTtBQUNmO0VBQ0EsY0FBYyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxJQUFJLGVBQWUsQ0FBQyxnQkFBZ0IsRUFBRTtFQUNuRjtFQUNBLGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRDtFQUNBLGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvRDtFQUNBLGdCQUFnQixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzFGO0VBQ0EsZ0JBQWdCLElBQUksSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDM0MsZ0JBQWdCLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDbkQsZ0JBQWdCLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ25EO0VBQ0EsZ0JBQWdCLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksZUFBZSxDQUFDLGdCQUFnQixFQUFFO0VBQ3RGLGtCQUFrQixJQUFJLEtBQUssR0FBRyxJQUFJLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuRTtFQUNBLGtCQUFrQixJQUFJLEtBQUssR0FBRyxJQUFJLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuRTtFQUNBLGtCQUFrQixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ2hHO0VBQ0Esa0JBQWtCLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDdEQsa0JBQWtCLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ3JELGlCQUFpQjtFQUNqQixlQUFlO0VBQ2YsYUFBYTtFQUNiLFdBQVc7RUFDWCxTQUFTO0FBQ1Q7RUFDQSxRQUFRLElBQUksR0FBRyxHQUFHLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDN0I7RUFDQSxRQUFRLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsU0FBUyxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQ3RELFVBQVUsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsZUFBZSxDQUFDLFlBQVksQ0FBQztFQUM3RSxTQUFTO0FBQ1Q7RUFDQSxRQUFRLEdBQUcsQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUM7RUFDcEMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGFBQWE7RUFDeEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxXQUFXLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRTtFQUM1QyxRQUFRLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUN0QjtFQUNBLFFBQVEsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsRUFBRTtFQUNqRixVQUFVLElBQUksRUFBRSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDM0IsVUFBVSxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQzFCLFVBQVUsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1SyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLE9BQU8sQ0FBQyxDQUFDO0VBQ2pCLE9BQU87RUFDUDtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsb0JBQW9CO0VBQy9CLE1BQU0sS0FBSyxFQUFFLFNBQVMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUU7RUFDL0UsUUFBUSxHQUFHLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLENBQUM7RUFDL0MsUUFBUSxJQUFJLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDNUIsUUFBUSxHQUFHLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDM0IsUUFBUSxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDM0MsUUFBUSxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDM0M7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQy9DLFVBQVUsYUFBYSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNoRCxVQUFVLGFBQWEsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDaEQsU0FBUztBQUNUO0VBQ0EsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO0VBQ3ZCLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztFQUN2QixRQUFRLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDaEUsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hFLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNoRSxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDaEUsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hFLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNoRSxRQUFRLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxPQUFPO0VBQzdCLFFBQVEsSUFBSSxJQUFJLElBQUksR0FBRyxDQUFDLEtBQUssRUFBRSxPQUFPO0VBQ3RDLFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLE9BQU87RUFDN0IsUUFBUSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU87RUFDdkMsUUFBUSxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUMvQixRQUFRLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0VBQ3BELFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUM7RUFDL0IsUUFBUSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLElBQUksR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN0RDtFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRTtFQUMzQyxVQUFVLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDN0MsWUFBWSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2pEO0VBQ0EsWUFBWSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxHQUFHLEdBQUcsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQzdFLGNBQWMsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUN2QyxjQUFjLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxH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SUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztFQUMzQixRQUFRLElBQUksSUFBSSxHQUFHLFdBQVcsR0FBRyxDQUFDLENBQUM7RUFDbkMsUUFBUSxJQUFJLE9BQU8sR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN0QztFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRTtFQUN2QyxVQUFVLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNyQyxTQUFTO0FBQ1Q7QUFDQTtFQUNBLFFBQVEsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbEM7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDcEMsVUFBVSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQzVDLFlBQVksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzNDLFlBQVksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUN2QjtFQUNBLFlBQVksS0FBSyxJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRTtFQUNoRixjQUFjLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDdEMsY0FBYyxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDcEM7RUFDQSxjQUFjLElB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QUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN0QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdkM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN6QyxHQUFHLENBQUM7QUFDSjtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQSxFQUFFLElBQUksUUFBUSxHQUFHLFNBQVMsUUFBUSxHQUFHO0VBQ3JDLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztBQUNwQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDdkM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN0QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDdkM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN2QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDcEM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FB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LENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtFQUNqQyxRQUFRLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQzFDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxNQUFNO0VBQ2pCLE1BQU0sS0FBSyxFQUFFLFNBQVMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDakMsUUFBUSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3JDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxPQUFPO0VBQ2xCLE1BQU0sS0FBSyxFQUFFLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtFQUM1QyxRQUFRLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDN0ksT0FBTztFQUNQO0FBQ0E7RUFDQSxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxNQUFNO0VBQ2pCLE1BQU0sS0FBSyxFQUFFLFNBQVMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtFQUMzQyxRQUFRLE9BQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDcEQsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLFFBQVE7RUFDbkIsTUFBTSxLQUFLLEVBQUUsU0FBUyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0VBQzdDLFFBQVEsT0FBTyxVQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUNyRCxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsV0FBVztFQUN0QixNQUFNLEtBQUssRUFBRSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDaEQsUUFBUSxPQUFPLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3JELE9BQU87RUFDUDtFQUNBO0FBQ0E7RUFDQSxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxlQUFlO0VBQzFCLE1BQU0sS0FBSyxFQUFFLFNBQVMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDdkQ7RUFDQSxRQUFRLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQztFQUN2TCxRQUFRLE9BQU8sVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN0SixPQUFPO0VBQ1A7QUFDQTtFQUNBLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLFNBQVM7RUFDcEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0VBQzlDLFFBQVEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsT0FBTyxLQUFLLENBQUM7QUFDaEU7RUFDQSxRQUFRLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDdlQsT0FBTztBQUNQO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsV0FBVztFQUN0QixNQUFNLEtBQUssRUFBRSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFO0VBQ25ELFFBQVEsSUFBSSxVQUFVLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLElBQUksQ0FBQyxLQUFLLE9BQU8sS0FBSyxDQUFDO0VBQ2xRLE9BQU87RUFDUCxL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Q0FBQyxDQUFDO0VBQzVCLFFBQVEsRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0VBQ3ZDLFFBQVEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztFQUNsRixRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7RUFDNUMsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUM1QixRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztFQUN2QyxRQUFRLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDbEYsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUM1QixRQUFRLEVBQUUsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztFQUN2QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3ZELFFBQVEsSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDdkQsUUFBUSxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztFQUMzQyxPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsZ0JBQWdCO0VBQzNCLE1BQU0sS0FBSyxFQUFFLFNBQVMsY0FBYyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTtFQUN0RSxRQUFRLElBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUMzRCxRQUFRLElBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMzRDtFQUNBLFFBQVEsS0FBSyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUNyRSxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsQjtFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDekMsVUFBVSxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztFQUN6RCxVQUFVLENBQUMsRUFBRSxDQUFDO0VBQ2QsU0FBUztB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LEVBQUUsZUFBZSxFQUFFLENBQUM7RUFDNUQsV0FBVztFQUNYLFNBQVM7QUFDVDtFQUNBLFFBQVEsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0VBQ3ZCLFFBQVEsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsZUFBZSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN6RCxRQUFRLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztFQUN0QixRQUFRLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLGVBQWUsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUNwRCxRQUFRLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztFQUN0QixRQUFRLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLGVBQWUsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUNwRCxRQUFRLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztFQUN2QixRQUFRLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLGVBQWUsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUNyRDtFQUNBLFFBQVEsS0FBSyxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxJQUFJLEVBQUU7RUFDdkQsVUFBVSxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztBQUNuQztFQUNBLFVBQVUsSUFBSSxJQUFJLEdBQUcsVUFBVSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNyRTtFQUNBLFVBQVUsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDO0FBQzdCO0VBQ0EsVUFBVSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQy9DLFlBQVksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLEVBQUUs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S0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BFLFNBQVM7QUFDVDtFQUNBLFFBQVEsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3RCO0VBQ0EsUUFBUSxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRTtFQUN2RCxVQUFVLElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ25DO0VBQ0EsVUFBVSxJQUFJLElBQUksR0FBRyxVQUFVLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3JFO0VBQ0EsVUFBVSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQy9DLFlBQVksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQztFQUNyRSxXQUFXO0VBQ1gsU0FBUztBQUNUO0VBQ0EsUUFBUSxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFO0VBQ2xELFVBQVUsSUFBSSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQztFQUMvRCxVQUFVLElBQUksS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxF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QUFDMUI7RUFDQSxVQUFVLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDdEcsWUFBWSxLQUFLLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3hELFlBQVksS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN4RCxZQUFZLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDeEQ7QUFDQTtFQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxlQUFlLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FB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QyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsTUFBTSxHQUFHLENBQUMsQ0FBQztFQUNyYSxhQUFhO0VBQ2IsV0FBVztFQUNYLFNBQVM7QUFDVDtBQUNBO0VBQ0EsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUM1QyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNCO0VBQ0EsUUFBUSxJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxFQUFFO0VBQ2xDLFVBQVUsTUFBTSxJQUFJLGdCQUFnQixDQUFDLDREQUE0RCxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxHQUFHLE1BQU0sR0FBRywyQkFBMkIsQ0FBQyxDQUFDO0VBQ25LLFNBQVM7QUFDVDtFQUNBLFFBQVEsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sRUFBRTtFQUNsQyxVQUFVLE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyw0REFBNEQsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsR0FBRyxNQUFNLEdBQUcsMkJBQTJCLENBQUMsQ0FBQztFQUNuSyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLEdBQUcsQ0FBQyxTQUFTLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztFQUN4QyxRQUFRLE9BQU8sSUFBSSxDQUFDO0VBQ3BCLE9BQU87QUFDUDtFQUNBLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGlCQUFpQjtFQUM1QixNQUFNLEtBQUssRUFBRSxTQUFTLGVBQWUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRTtFQUM1RCxRQUFRLElBQUksT0FBTyxJQUFJLENBQUMsSUFBSSxNQUFNLElBQUksSUFBSSxFQUFFLE9BQU8sSUFBSSxDQUFDO0VBQ3hELFFBQVEsR0FBRyxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0VBQ3pDLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztFQUNsQyxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztFQUNqQyxRQUFRLElBQUksQ0FBQyxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztFQUMvQixRQUFRLElBQUksQ0FBQyxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztFQUMvQixRQUFRLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzNELFFBQVEsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDM0QsUUFBUSxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7RUFDekIsUUFBUSxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUM7RUFDekIsUUFBUSxJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUM7QUFDaEM7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDMUMsVUFBVSxlQUFlLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztFQUM1RCxVQUFVLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzVELFVBQVUsZUFBZSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUN4RSxVQUFVLFFBQVEsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0VBQ3ZDLFVBQVUsUUFBUSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7RUFDdkMsU0FBUztBQUNUO0VBQ0EsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztFQUN4QixRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzdDLFFBQVEsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFDeEIsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3hELFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0VBQ2hGLFFBQVEsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztFQUN4QyxRQUFRLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7RUFDekMsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0VBQ3pDLFFBQVEsSUFBSSxRQUFRLEdBQUcsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7RUFDM0MsUUFBUSxJQUFJLFNBQVMsR0FBRyxJQUFJLEtBQUssQ0FBQyxVQUFVLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNsRTtFQUNBLFFBQVEsS0FBSyxJQUFJLElBQUksR0FBRyxDQUFDLEVBQUUsSUFBSSxHQUFHLFVBQVUsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLElBQUksRUFBRTtFQUMxRSxVQUFVLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMvQixTQUFTO0FBQ1Q7RUFDQSxRQUFRLElBQUksTUFBTSxHQUFHLElBQUksS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsUUFBUSxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFO0VBQ25ELFVBQVUsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ25DLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQzlFLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQzlFLFVBQVUsSUFBSSxNQUFNLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztFQUMvQixVQUFVLElBQUksTUFBTSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7RUFDL0IsVUFBVSxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3ZGLFVBQVUsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUN2RixVQUFVLElBQUksVUFBVSxHQUFHLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQztBQUNoRTtFQUNBLFVBQVUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDakQsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQzFCLFlBQVksSUFBSSxHQUFHLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUNwSixZQUFZLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0IsWUFBWSxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNqQyxXQUFXO0FBQ1g7RUFDQSxVQUFVLEtBQUssSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFO0VBQzFELFlBQVksSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUNqRCxZQUFZLElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUMxQyxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDdEQsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3hELFlBQVksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFD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RUFDeEMsUUFBUSxHQUFHLENBQUMsWUFBWSxHQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUM7RUFDNUMsUUFBUSxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDOUMsUUFBUSxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUNsRSxRQUFRLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3hELFFBQVEsV0FBVyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7RUFDbEUsUUFBUSxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUN6QyxRQUFRLFdBQVcsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0VBQy9ELFFBQVEsR0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7RUFDMUMsUUFBUSxXQUFXLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUNsRSxRQUFRLEdBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLE1BQU0s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LEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQ3RGLFVBQVUsSUFBSSxFQUFFLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUNqQyxVQUFVLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDbEMsVUFBVSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDNUQ7RUFDQSxVQUFVLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksZUFBZSxDQUFDLGdCQUFnQixFQUFFO0VBQ2pGLFlBQVksSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDNUQsWUFBWSxJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUM1RCxZQUFZLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0VBQzdGLFlBQVksSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUNyQyxZQUFZLEVBQUUsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckMsWUFBWSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUM7RUFDaEUsV0FBVztFQUNYLFNBQVM7QUFDVDtFQUNBLFFBQVEsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxlQUFlLENBQUMsZ0JBQWdCLEVBQUU7RUFDOUUsVUFBVSxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6RDtFQUNBLFVBQVUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekQ7RUFDQSxVQUFVLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFGO0VBQ0EsVUFBVSxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ25DLFVBQVUsRUFBRSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNuQyxVQUFVLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM5RDtFQUNBLFVBQVUsSUFBSSxZQUFZLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsSUFBSSxlQUFlLENBQUMsZ0JBQWdCLEVBQUU7RUFDakYsWUFBWSxJQUFJ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QUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxlQUFlLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDOUk7RUFDQSxZQUFZLElBQUksYUFBYSxJQUFJLFdBQVcsRUFBRTtFQUM5QyxjQUFjLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNuRCxjQUFjLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNuRCxjQUFjLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNuRCxjQUFjLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDbkMsYUFBYTtFQUNiLFdBQVc7RUFDWCxTQUFTO0FBQ1Q7RUFDQSxRQUFRLElBQUksVUFBVSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7RUFDcEM7RUFDQTtFQUNBO0VBQ0EsVUFBVSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUIsVUFBVSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUIsVUFBVSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUIsVUFBVSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDdEIsVUFBVSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUIsVUFBVSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUIsVUFBVSxJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUIsVUFBVSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7QUFDdEI7RUFDQSxVQUFVLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUU7RUFDM0QsWUFBWSxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFlBQVksSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNwQyxZQUFZLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDcEM7RUFDQSxZQUFZLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUU7RUFDaEQsY0FBYyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ3RCLGNBQWMsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUN0QixjQUFjLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDdEIsY0FBYyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUM1QixhQUFhO0FBQ2I7RUFDQSxZQUFZLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUU7RUFDaEQsY0FBYyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ3RCLGNBQWMsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUN0QixjQUFjLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDdEIsY0FBYyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUM1QixhQUFhO0VBQ2IsV0FBVztBQUNYO0VBQ0EsVUFBVSxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9CLFVBQVUsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMvQixVQUFVLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDL0IsVUFBVSxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9CLFVBQVUsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMvQixVQUFVLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDL0IsVUFBVSxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9CLFVBQVUsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMvQixTQUFTO0VBQ1Q7QUFDQTtBQUNBO0VBQ0EsUUFBUSxJQUFJLEVBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUNuQztFQUNBLFFBQVEsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHO0VBQ3hEO0VBQ0EsVUFBVSxJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN4RDtFQUNBLFVBQVUsSUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDM0MsVUFBVSxJQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzQyxVQUFVLElBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzNDLFVBQVUsSUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDM0MsVUFBVSxJQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzQyxVQUFVLElBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQzNDO0VBQ0EsVUFBVSxJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7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Q0FBQyxDQUFDLENBQUM7RUFDMUUsWUFBWSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztFQUMxRCxXQUFXLE1BQU07RUFDakIsWUFBWSxFQUFFLEdBQUcsQ0FBQztFQUNsQixXQUFXO0VBQ1gsU0FBUztBQUNUO0FBQ0E7RUFDQSxRQUFRLElBQUksVUFBVSxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxlQUFlLENBQUMsMEJBQTBCLEdBQUcsZUFBZSxDQUFDLDBCQUEwQixDQUFDLEtBQUssQ0FBQyxFQUFFO0VBQzdJLFVBQVUsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHO0VBQzFELFlBQVksSUFBSSxJQUFJLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDM0Q7RUFDQSxZQUFZLElBQUksSUFBSSxHQUFHLFVBQVUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQy9DLFlBQVksSUFBSSxHQUFHLEdBQUcsVUFBVSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDOUMsWUFBWSxJQUFJLElBQUksR0FBRyxVQUFVLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMvQyxZQUFZLElBQUksR0FBRyxHQUFHLFVBQVUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQy9DLFlBQVksSUFBSSxHQUFHLEdBQUcsVUFBVSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDL0MsWUFBWSxJQUFJLEdBQUcsR0FBRyxVQUFVLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUMv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QUMsTUFBTSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLEVBQUUsT0FBTyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDM0k7QUFDQTtFQUNBLFFBQVEsT0FBTyxFQUFFLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLElBQUksVUFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0VBQ3BHLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSwwQkFBMEI7RUFDckMsTUFBTSxLQUFLLEVBQUUsU0FBUyx3QkFBd0IsQ0FBQyxVQUFVLEVBQUU7RUFDM0Q7RUFDQTtFQUNBLFFBQVEsSUFBSSxJQUFJLEdBQUcsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDekM7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDdkMsVUFBVSxJQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM1QztFQUNBLFVBQVUsSUFBSSxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDMUc7RUFDQSxZQUFZLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN4QyxZQUFZLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN4QyxZQUFZLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN4QyxZQUFZLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN4QyxZQUFZLElBQUksRUFBRSxDQUFDO0VBQ25CLFdBQVc7RUFDWCxTQUFTO0VBQ1QsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGVBQWU7RUFDMUIsTUFBTSxLQUFLLEVBQUUsU0FBUyxhQUFhLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO0VBQ3BELFFBQVEsSUFBSSxRQUFRLEdBQUcsRUFBRSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztFQUNqRCxRQUFRLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1QyxRQUFRLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNuQjtFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDN0MsVUFBVSxJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQzNCLFVBQVUsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0VBQzdDLFVBQVUsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDN0MsVUFBVSxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzdDLFVBQVUsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLEVBQUUsRUFBRSxDQUFDO0VBQ2YsU0FBUztBQUNUO0FBQ0E7RUFDQSxRQUFRLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQ25ELFVBQVUsSUFBSSxJQUFJLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM1QjtFQUNBLFVBQVUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ2hEO0VBQ0EsVUFBVSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQy9DLFVBQVUsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMvQyxVQUFVLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDL0MsVUFBVSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQy9DLFVBQVUsRUFBRSxF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LENBQUMsSUFBSSxHQUFHLENBQUM7RUFDOUIsU0FBUztBQUNUO0VBQ0EsUUFBUSxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUM7RUFDekIsUUFBUSxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUM7RUFDekIsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7RUFDcEQsUUFBUSxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7RUFDdEQsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUM7RUFDekMsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztFQUNqQyxRQUFRLElBQUksS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckQsUUFBUSxHQUFHLENBQUMsVUFBVSxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDL0M7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDcEMsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3RDLFlBQVksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3pDO0VBQ0EsWUFBWSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUs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Q0FBQyxHQUFHLENBQUMsQ0FBQztFQUM1QixZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEUsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN0RCxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDbkUsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN0RCxZQUFZLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztFQUMzQixXQUFXO0FBQ1g7RUFDQSxVQUFVLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQzlDLFlBQVksZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQy9FLFlBQVksSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0VBQzFCLFdBQVc7QUFDWDtFQUNBLFVBQVUsS0FBSyxJQUFJLEVBQUUsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUU7RUFDaEQsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUks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QUFRLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDOUMsUUFBUSxlQUFlLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzlDLFFBQVEsSUFBSSxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztFQUNuRCxRQUFRLElBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDbkQsUUFBUSxJQUFJLEtBQUssR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0VBQ25ELFFBQVEsSUFBSSxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztFQUNuRCxRQUFRLElBQUksS0FBSyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDbkQ7RUFDQSxRQUFRLElBQUksUUFBUSxHQUFHLEdBQUcsSUFBSSxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLENBQUMsQ0FBQztFQUM3RCxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUcsS0FBSyxJQUFJLFFBQVEsQ0FBQztFQUMzRCxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLEtBQUssR0FBRyxLQUFLLEdBQUcsS0FBSyxJQUFJLFFBQVEsQ0FBQztBQUMzRDtFQUNBLFFBQVEsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCO0VBQ0EsUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFO0VBQ3hELFVBQVUsSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDdkQsVUFBVSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLFNBQVM7QUFDVDtFQUNBLFFBQVEsT0FBTyxNQUFNLENBQUMsU0FBUyxDQUFDO0VBQ2hDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxlQUFlO0VBQzFCLE1BQU0sS0FBSyxFQUFFLFNBQVMsYUFBYSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtFQUNyRCxRQUFRLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM5QyxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0VBQ2xELFFBQVEsSUFBSSxDQUFDLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7RUFDL0MsUUFBUSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztFQUMxQixRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDL0MsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEQsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEQsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEQsUUFBUSxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO0VBQzNDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxpQkFBaUI7RUFDNUIsTUFBTSxLQUFLLEVBQUUsU0FBUyxlQUFlLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRTtFQUM3RCxRQUFRLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1QyxRQUFRLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM3QyxRQUFRLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM3QyxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztFQUN0QyxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQztFQUNwQyxRQUFRLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQzFCLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMvQyxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNuRCxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNuRCxRQUFRLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO0VBQ2pDLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxlQUFlO0VBQzFCLE1BQU0sS0FBSyxFQUFFLFNBQVMsYUFBYSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUU7RUFDbkUsUUFBUSxJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQ3BDO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3hDLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3ZDLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3ZDLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDO0VBQ0EsVUFBVSxJQUFJLEVBQUUsR0FBRyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3BFO0VBQ0EsVUFBVSxJQUFJLEVBQUUsR0FBRyxJQUFJLEVBQUUsSUFBSSxHQUFHLEVBQUUsQ0FBQztFQUNuQyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLElBQUksSUFBSSxJQUFJLE1BQU0sQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztFQUNoRCxRQUFRLE9BQU8sSUFBSSxDQUFDO0VBQ3BCLE9BQU87RUFDUCxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxZQUFZO0VBQ3ZCLE1BQU0sS0FBSyxFQUFFLFNBQVMsVUFBVSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO0VBQ2xELFFBQVEsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztFQUNwQyxRQUFRLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUN0QjtFQUNBLFFBQVEsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEtBQUssR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEtBQUssRUFBRSxFQUFFLEdBQUcsR0FBRyxFQUFFLEVBQUU7RUFDbkUsVUFBVSxJQUFJLEVBQUUsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQzNCLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUMxQixVQUFVLElBQUksS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDeEwsVUFBVSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCLENB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WUFBWSxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQztFQUNBLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFO0VBQ25DLGNBQWMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM1QyxjQUFjLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDNUMsYUFBYSxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3RKLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRTtFQUNqQztFQUNBLFlBQVksSUFBSSxFQUFFLEdBQUcsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdEM7RUFDQSxZQUFZLElBQUksSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtFQUNwQyxjQUFjLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDN0MsY0FBYyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzdDLGFBQWEsTUFBTSxJQUFJLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMxSixXQUFXO0VBQ1gsU0FBUztBQUNUO0VBQ0EsUUFBUSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUU7RUFDeEQsVUFBVSxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQzVCO0VBQ0EsVUFBVSxJQUFJLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFO0VBQ2pGLFlBQVksTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RHO0VBQ0EsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNyRCxZQUFZLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3JELFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckQsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNyRCxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN6QyxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN6QyxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN6QyxZQUFZLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN6QyxZQUFZLEVBQUUsR0FBRyxDQUFDO0VBQ2xCLFdBQVc7RUFDWCxTQUFTO0VBQ1QsT0FBTztBQUNQO0VBQ0EsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsZUFBZTtFQUMxQixNQUFNLEtBQUssRUFBRSxTQUFTLGFBQWEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFO0VBQ25ELFFBQVEsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUN2QztFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUN6QyxVQUFVLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUM7RUFDcEMsVUFBVSxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3pCLFVBQVUsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUMxQixVQUFVLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztBQUM5QjtFQUNBLFVBQVUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUMzQyxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxFQUFFLFNBQVM7QUFDNUM7RUFDQSxZQUFZLElBQUksR0FBRyxHQUFHLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBQ3BGO0VBQ0EsWUFBWSxXQUFXLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDckQsV0FBVztBQUNYO0VBQ0EsVUFBVSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7RUFDbkQsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7RUFDbEMsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGlCQUFpQjtFQUM1QixNQUFNLEtBQUssRUFBRSxTQUFTLGVBQWUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0VBQ3hFLFFBQVEsSUFBSSxLQUFLLEdBQUcsQ0FBQztFQUNyQixZQUFZLElBQUksR0FBRyxDQUFDO0VBQ3BCLFlBQVksS0FBSyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7RUFDOUI7QUFDQTtFQUNBLFFBQVEsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO0VBQ3hDLFVBQVUsSUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7RUFDN0MsVUFBVSxJQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDaEMsVUFBVSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQy9CLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNoQztFQUNBLFVBQVUsSUFBSSxHQUFHLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDN0k7RUFDQSxVQUFVLElBQUksR0FBRyxHQUFHLElBQUksRUFBRTtFQUMxQixZQUFZLEtBQUssR0FBRyxDQUFDLENBQUM7RUFDdEIsWUFBWSxJQUFJLEdB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QUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRTtFQUM5QyxZQUFZLGVBQWUsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEQsWUFBWSxlQUFlLENBQUMsR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3BELFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7RUFDcEQsVUFBVSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQztFQUNuRCxVQUFVLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDO0VBQ3BELFVBQVUsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7RUFDbkQsVUFBVSxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ3ZCO0VBQ0EsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3hDLFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRTtFQUMxQyxjQUFjLElBQUksRUFBRSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3BDLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUM7RUFDckMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFD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QUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzRSxZQUFZLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN2RCxZQUFZLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzRSxZQUFZLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDLEtBQUssSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVM7RUFDaEgsWUFBWSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMvRDtFQUNBLFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ25GLGNBQWMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQztFQUNBLGNBQWMsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNDO0VBQ0EsY0FBYyxJQUFJLEdBQUcsR0FB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Q0FBQyxLQUFLLFNBQVMsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDaEs7RUFDQSxVQUFVLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM1QixVQUFVLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7RUFDcEMsVUFBVSxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsR0FBRyxDQUFDO0VBQ2hDLFVBQVUsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNsQztFQUNBLFVBQVUsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRTtFQUM1QyxZQUFZLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUNoQyxZQUFZLElBQUksWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLElBQUksZUFBZSxDQUFDLGdCQUFnQixFQUFFLFNBQVM7RUFDNUYsWUFBWSxJQUFJLElBQUksR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUM1RCxZQUFZLElBQUksSUFBSSxHQUFHLEVBQUUsR0FBRyxZQUFZLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQzVELFlBQVksSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUM7RUFDckMsWUFBWSxJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQztFQUNyQyxZQUFZLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxFQUFF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QUUsSUFBSSxDQUFDLElBQUksZUFBZSxDQUFDLGdCQUFnQixFQUFFLFNBQVM7QUFDNUY7RUFDQSxZQUFZLElBQUksR0FBRyxHQUFHLEVBQUUsR0FBRyxZQUFZLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzVEO0VBQ0EsWUFBWSxJQUFJLEdBQUcsR0FBRyxFQUFFLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM1RDtFQUNBLFlBQVksSUFBSSxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO0FBQ3pDO0VBQ0EsWUFBWSxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7QUFDekM7RUFDQSxZQUFZLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksRUFBRSxDQUFDLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxFQUFFLENBQUMsTUFBTSxFQUFFLFNBQVM7RUFDcEYsWUFBWSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksZ0JBQWdCLENBQUMsZUFBZSxFQUFFLFNBQVM7QUFDNUY7RUFDQSxZQUFZLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzdGO0VBQ0EsWUFBWSxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3JDLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ2xELFlBQVksZ0JB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QUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDaEMsVUFBVSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDO0VBQ3pDLFVBQVUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDO0VBQ0EsVUFBVSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3hDLFlBQVksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxlQUFlLENBQUMsZ0JBQWdCLEVBQUU7RUFDdkU7RUFDQSxjQUFjLE1BQU07RUFDcEIsYUFBYTtBQUNiO0VBQ0EsWUFBWSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDMUMsWUFBWSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0UsWUFBWSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0UsWUFBWSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0UsWUFBWSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDL0UsWUFBWSxVQUFVLEVBQUUsQ0FBQztFQUN6QixXQUFXO0FBQ1g7RUFDQSxVQUFVLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ2pFLFVBQVUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3pFLFVBQVUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDakUsVUFBVSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDMUUsVUFBVSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFNBQVM7RUFDekcsVUFBVSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN6RSxVQUFVLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3pFLFNBQVM7QUFDVDtFQUNBLFFBQVEsRUFBRSxDQUFDLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLENBQUM7RUFDM0MsUUFBUSxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN4QixRQUFRLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztFQUNwQyxRQUFRLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0VBQ3pCLFFBQVEsS0FBSyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7RUFDeEIsUUFBUSxLQUFLLENBQUMsTUFBTSxHQUFHLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDcEQsUUFBUSxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QixRQUFRLElBQUksSUFBSSxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzRCxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUM7RUFDNUIsUUFBUSxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztFQUN6QixRQUFRLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsRCxRQUFRLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0VBQ3hCLFFBQVEsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pEO0VBQ0EsUUFBUSxLQUFLLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLElBQUksRUFBRTtFQUN2RCxVQUFVLElBQUksRUFBRSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQ2xDO0FBQ0E7RUFDQSxVQUFVLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztBQUN4QjtFQUNBLFVBQVUsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRTtFQUM5QyxZQUFZLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLElBQUksZUFBZSxDQUFDLGdCQUFnQixFQUFFLE1BQU07QUFDaEY7RUFDQSxZQUFZLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM5QztFQUNBLFlBQVksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ3hELFlBQVksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ3hELFlBQVksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ3hELFlBQVksS0FBSyxFQUFFLENBQUM7RUFDcEIsV0FBVztBQUNYO0FBQ0E7RUFDQSxVQUFVLEVBQUUsQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDekMsVUFBVSxFQUFFLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3pDLFVBQVUsRUFBRSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNqRSxVQUFVLEVBQUUsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDbEUsVUFBVSxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUN2SDtFQUNBLFVBQVUsSUFB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QUFFLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7RUFDdkYsWUFBWSxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztFQUM5QixXQUFXO0FBQ1g7RUFDQSxVQUFVLEtBQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUU7RUFDaEQsWUFBWSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQzVCLFlBQVksS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzFELFlBQVksS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzFELFlBQVksS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzFELFlBQVksS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztFQUNsSixZQUFZLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztFQUMxQixXQUFXO0VBQ1gsU0FBUztBQUNUO0VBQ0EsUUFBUSxHQUFHLENBQUMs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QUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ25DO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQztBQUNuQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxhQUFhLEVBQUUsS0FBSyxDQUFDLENBQUM7RUFDaEQsR0FBRztFQUNILEdBQUc7QUFDSDtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQSxFQUFFLElBQUksVUFBVSxHQUFHLFNBQVMsVUFBVSxHQUFHO0VBQ3pDLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN0QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMzQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM3QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN2QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUN2QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMzQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM1QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMvQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMvQztFQUNB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QyxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2hDLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDdEMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN0QyxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3RDLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDdEMsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN0QyxRQUFRLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RDO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxFQUFFLENBQUMsRUFBRTtFQUM5QyxVQUFVLElBQUksRUFBRSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM1QixVQUFVLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDekQsVUFBVSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3pELFVBQVUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN6RCxVQUFVLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDekQsVUFBVSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ3pELFVBQVUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN6RCxTQUFTO0FBQ1Q7RUFDQSxRQUFRLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7RUFDNUIsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLGFBQWE7RUFDeEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxXQUFXLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7RUFDM0MsUUFBUSxJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7RUFDckIsUUFBUSxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDdkI7RUFDQSxRQUFRLElBQUksQ0FBQyxHQUFHLE1BQU0sRUFBRTtFQUN4QixVQUFVLElBQUksR0FBRyxDQUFDLENBQUM7RUFDbkIsVUFBVSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0VBQ3JCLFNBQVM7QUFDVDtFQUNBLFFBQVEsSUFBSSxDQUFDLEdBQUcsTUFBTSxFQUFFO0VBQ3hCLFVBQVUsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUNuQixVQUFVLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFDckIsU0FBUztBQUNUO0VBQ0EsUUFBUSxPQUFPLElBQUksQ0FBQztFQUNwQixPQUFPO0VBQ1AsS0FBSyxFQUFFO0VBQ1AsTUFBTSxHQUFHLEVBQUUsV0FBVztFQUN0QixNQUFNLEtBQUssRUFBRSxTQUFTLFNBQVMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRTtFQUMzRSxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7RUFDL0IsUUFBUSxJQUFJLElBQUksR0FBRyxPQUFPLENBQUM7RUFDM0IsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO0VBQ2hDLFFBQVEsS0FBSyxDQUFDLE9BQU8sRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQ2hDO0VBQ0EsUUFBUSxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7RUFDdkI7RUFDQSxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3QyxVQUFVLElBQUksQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNqQyxTQUFTLE1BQU07RUFDZjtFQUNBLFVBQVUsSUFBSSxNQUFNLEdBQUcsY0FBYyxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztFQUM3RSxVQUFVLElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2hDLFVBQVUsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEMsVUFBVSxJQUFJLElBQUksR0FBRyxjQUFjLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkk7RUFDQSxVQUFVLElBQUksSUFBSSxJQUFJLENBQUMsRUFBRTtFQUN6QjtFQUNBO0VBQ0E7RUFDQSxZQUFZLElB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LENBQUM7QUFDN0Q7RUFDQSxZQUFZLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7RUFDMUMsY0FBYyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsV0FBVyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDdEUsY0FBYyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsV0FBVyxFQUFFLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDdEUsYUFBYTtBQUNiO0FBQ0E7RUFDQSxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQzdHLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7RUFDN0csWUFBWSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztFQUM3RyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQzdHLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7RUFDN0csWUFBWSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLFdBQVcsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztFQUM3RyxXQUFXLE1BQU07RUFDakIsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDdkMsWUFBWSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUM1RSxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzVFLFlBQVksRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUU7RUFDQSxZQUFZLEtBQUssSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFO0VBQ3BELGNBQWMsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxjQUFjLENBQUMsYUFBYSxFQUFFLE1BQU07RUFDOUUsY0FBYyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUNqRSxjQUFjLElBQUksQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ2pFLGNBQWMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDakUsY0FBYyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ2pELGNBQWMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFB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QUcscUJBQXFCLENBQUM7RUFDdkQsUUFBUSxNQUFNLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztFQUN4QyxRQUFRLElBQUksZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztFQUNoRCxRQUFRLElBQUksZUFBZSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUM7RUFDL0M7QUFDQTtFQUNBLFFBQVEsS0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLEVBQUUsRUFBRSxHQUFHLEVBQUU7RUFDekQsVUFBVSxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0FBQzVCO0VBQ0EsVUFBVSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQzFCLFVBQVUsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsRUFBRSxDQUFDO0VBQ3ZFLFVBQVUsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxFQUFFLENBQUM7RUFDL0UsVUFBVSxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztFQUMvRSxTQUFTO0FBQ1Q7QUFDQTtFQUNBLFFBQVEsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ2xCO0VBQ0EsUUFBUSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsTUFBTSxDQUFDLGVBQWUsRUFBRSxFQUFFLEdB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QUFFLEdBQUcsVUFBVSxDQUFDO0VBQzdCLE1BQU0sTUFBTSxDQUFDLEVBQUUsR0FBRyxZQUFZLENBQUM7RUFDL0IsTUFBTSxNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztFQUNoQyxNQUFNLE1BQU0sQ0FBQyxlQUFlLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDNUMsTUFBTSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztFQUN0QyxNQUFNLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0VBQ3RDLE1BQU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7RUFDdEMsTUFBTSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztFQUN0QyxNQUFNLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO0VBQ3RDLE1BQU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7RUFDdEMsTUFBTSxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzFDLE1BQU0sTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7RUFDcEMsTUFBTSxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzFDLE1BQU0sTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDbEMsTUFBTSxNQUFNLENBQUMsZUFBZSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQzVDLE1BQU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDcEMsTUFBTSxNQUFNLENBQUMsZUFBZSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMs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QUFTLENBQUM7RUFDckIsR0FBRyxFQUFFLENBQUM7QUFDTjtFQUNBO0VBQ0E7RUFDQTtBQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLEVBQUUsSUFBSSxTQUFTLEdBQUcsU0FBUyxTQUFTLEdBQUc7RUFDdkMsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3JDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUMxQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDaEQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDakQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3pDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ3JDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN2QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRDtFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDMUM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3hDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxF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QUM7RUFDdEIsSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO0VBQ3hCLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUN0QixHQUFHO0FBQ0g7RUFDQSxFQUFFLElBQUksWUFBWSxHQUFHLFNBQVMsWUFBWSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTtFQUMxRSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDeEM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDMUM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDM0M7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDOUM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDNUM7RUFDQSxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0VBQ3JCLElBQUksSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7RUFDdkIsSUFBSSxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztFQUM3QixJQUFJLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0VBQ3pCLEdBQUcsQ0FBQztBQUNKO0VBQ0EsRUFBRSxTQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFO0VBQzFELElBQUksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtFQUNsQyxNQUFNLEdBQUcsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLFFB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RTtFQUNQLE1BQU0sR0FBRyxFQUFFLEtBQUs7RUFDaEIsTUFBTSxLQUFLLEVBQUUsU0FBUyxHQUFHLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRTtFQUNsQyxRQUFRLElBQUksRUFBRSxHQUFHLFVBQVUsQ0FBQztFQUM1QixRQUFRLElBQUksR0FBRyxHQUFHLFVBQVUsQ0FBQztFQUM3QixRQUFRLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7RUFDOUIsUUFBUSxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0VBQzlCLFFBQVEsSUFBSSxJQUFJLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQztFQUM1QixRQUFRLElBQUksSUFBSSxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUM7RUFDNUIsUUFBUSxJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsR0FBRyxDQUFDO0VBQzFCLFFBQVEsSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztFQUM1QixRQUFRLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDMUIsT0FBTztFQUNQLEtBQUssRUFBRTtFQUNQLE1BQU0sR0FBRyxFQUFFLElBQUk7RUFDZixNQUFNLEtBQUssRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFO0VBQ2pDLFFBQVEsSUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDO0VBQzVCLFFBQVEsSUFBSSxHQUFHLEdBQUcsVUFBVSxDQUFDO0VBQzdCLFFBQVEsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUM5QixRQUFRLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7RUFDOUIsUUFBUSxJQUFJLElBQUksR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDO0VBQzVCLFFBQVEsSUFBSSxJQUFJLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQztFQUM1QixRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7RUFDMUIsUUFBUSxJQUFJLENBQUMsR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO0VBQzVCLFFBQVEsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUMxQixPQUFPO0FBQ1A7RUFDQSxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxxQkFBcUI7RUFDaEMsTUFBTSxLQUFLLEVBQUUsU0FBUyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUU7RUFDcEUsUUFBUSxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDdkI7RUFDQSxRQUFRLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxFQUFFO0VBQ3RDLFVBQVUsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0VBQzVCLFVBQVUsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0VBQzVDLFVBQVUsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0VBQzVDLFVBQVUsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQ3BEO0VBQ0EsVUFBVSxJQUFJLElBQUksR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNsQyxVQUFVLElBQUksSUFBSSxHQUFHLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDO0VBQ0EsVUFBVSxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2hGLFVBQVUsSUFBSSxJQUFJLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoRixVQUFVLElBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEYsVUFBVSxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQ2hGLFVBQVUsSUFBSSxJQUFJLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNoRixVQUFVLElBQUksSUFBSSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEY7RUFDQSxVQUFVLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0VBQzlELFVBQVUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxH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QVc7QUFDWDtBQUNBO0VBQ0EsVUFBVSxJQUFJLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQyxvQkFBb0IsS0FBSyxDQUFDLEVBQUU7RUFDbEU7RUFDQTtFQUNBLFlBQVksWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7RUFDaEQsWUFBWSxNQUFNLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUM3RCxZQUFZLElBQUksRUFBRSxHQUFHLElBQUksU0FBUyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQzlELFlBQVksSUFBSSxFQUFFLEdBQUcsSUFBSSxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3pFLFlBQVksSUFBSSxJQUFJLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDakQsWUFBWSxJQUFJLElBQUksR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksU0FBUyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0VBQ3BFLFlBQVksQ0FBQyxHQUFHLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDOUcsWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDNUMsWUFBWSxHQUFHLENBQUMsUUFBUSxJQUFJLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0VBQzFJLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxPQUFPLElBQUksQ0FBQyxFQUFFO0VBQzVCO0VBQ0E7RUFDQSxZQUFZLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7RUFDbkMsWUFBWSxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ3JFLFlBQVksSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMzQixZQUFZLElBQUksRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDM0IsWUFBWSxFQUFFLEdBQUcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztFQUN2QyxZQUFZLEVBQUUsR0FBRyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDL0MsWUFBWSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUNsQyxZQUFZLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQ2pDLFlBQVksR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztFQUNuQyxZQUFZLFVBQVUsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7RUFDdEMsWUFBWSxPQUFPLEdBQUcsQ0FBQztFQUN2QixXQUFXO0FBQ1g7QUFDQTtFQUNBLFVBQVUsT0FBTyxHQUFHLE1BQU0sQ0FBQztFQUMzQixVQUFVLE1BQU0sR0FBRyxPQUFPLENBQUM7RUFDM0IsVUFBVSxRQUFRLEdBQUcsSUFBSSxDQUFDO0VBQzFCLFVBQVUsSUFBSSxHQUFHLFFBQVEsQ0FBQztFQUMxQixVQUFVLFFBQVEsR0FBRyxJQUFJLENBQUM7RUFDMUIsVUFBVSxJQUFJLEdBQUcsUUFBUSxDQUFDO0VBQzFCLFNBQVM7QUFDVDtFQUNBLFFBQVEsT0FBTyxHQUFHLENBQUM7RUFDbkIsT0FBTztFQUNQO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQSxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSx1QkFBdUI7RUFDbEMsTUFBTSxLQUFLLEVBQUUsU0FBUyxxQkFBcUIsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUU7RUFDakY7RUFDQSxRQUFRLElBQUksUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxFQUFFLE1BQU0sSUFBSSx3QkFBd0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0VBQzNILFFBQVEsSUFBSSxTQUFTLEdBQUcsRUFBRSxDQUFDO0VBQzNCLFFBQVEsSUFBSSxZQUFZLEdBQUcsRUFBRSxDQUFDO0VBQzlCLFFBQVEsSUFBSSxVQUFVLEdBQUcsRUFBRSxDQUFDO0VBQzVCLFFBQVEsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7RUFDN0IsUUFBUSxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztF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QUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzQyxVQUFVLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUMzQyxTQUFTO0FBQ1Q7RUFDQSxRQUFRLEtBQUssR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDO0VBQzdCLFFBQVEsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQztFQUM5QixRQUFRLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUM7RUFDOUIsUUFBUSxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDO0VBQzlCLFFBQVEsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7RUFDMUQsUUFBUSxZQUFZLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7RUFDckQsUUFBUSxTQUFTLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUMzQixRQUFRLFNBQVMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO0VBQzNCLFFBQVEsU0FBUyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7RUFDNUIsUUFBUSxTQUFTLENBQUMsRUFBRSxHQUFHLFFBQVEsQ0FBQztFQUNoQyxRQUFRLFNBQVMsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQztFQUM1QyxRQUFRLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hDO0VBQ0EsUUFBUSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFO0VBQzdDLFVBQVUsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUMvQyxVQUFVLFFBQVEsQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxD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QUksQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLFNBQVM7RUFDekMsWUFBWSxJQUFJLEVBQUUsQ0FBQyxJQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUUsQ0FBQyxJQUFJLEdBQUcsR0FBRyxFQUFFLFNBQVM7RUFDekQsWUFBWSxJQUFJLGFBQWEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztFQUN0RSxZQUFZLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLEtBQUssQ0FBQyxFQUFFLFNBQVM7QUFDM0U7RUFDQSxZQUFZLElBQUksYUFBYSxDQUFDLEtBQUssSUFBSSxDQUFDLEVBQUUsYUFBYSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDL0YsWUFBWSxJQUFJLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxHQUFHLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLGFBQWEsRUFBRSxhQUFhLENBQUMsQ0FBQztFQUMvSyxZQUFZLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztBQUMxQztFQUNBLFlBQVksSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksS0FBSyxDQUFDLElBQUksS0FBSyxJQUFJLGFBQWEsQ0FBQyxLQUFLLEVBQUUsU0FBUztFQUN6RyxZQUFZLGFBQWEsQ0FBQyxFQUFFLEdBQUcsWUFBWSxDQUFDO0VBQzVDLFlBQVksYUFBYSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztFQUN0RSxZQUFZLGFBQWEsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ3hDO0VBQ0EsWUFBWSxJ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UUFBUSxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsU0FBUztFQUN2RixhQUFhO0FBQ2I7QUFDQTtFQUNBLFlBQVksSUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDM0MsWUFBWSxJQUFJLEVBQUUsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUMzQyxZQUFZLElBQUksT0FBTyxHQUFHLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0VBQ25HLFlBQVksT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUNqQyxZQUFZLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUI7RUFDQSxZQUFZLElBQUksT0FBTyxHQUFHLFNBQVMsRUFBRSxTQUFTO0FBQzlDO0VBQ0EsWUFBWSxTQUFTLEdBQUcsT0FBTyxDQUFDO0FBQ2hDO0VBQ0EsWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLENBQUM7RUFDN0csWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7RUFDekgsWUFBWSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7RUFDekgsWUFBWSxNQUFNLEdBQUcsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDNUQsWUFBWSxNQUFNLEdBQUcsSUFBSSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDNUQsV0FBVztBQUNYO0VBQ0EsVUFBVSxLQUFLLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQyxTQUFTLEVBQUUsR0FBRyxJQUFJLE9BQU8sQ0FBQyxZQUFZLEVBQUUsR0FBRyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFO0VBQzFHLFlBQVksSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUM1QyxZQUFZLElBQUksWUFBWSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUM7QUFDekM7RUFDQSxZQUFZLElBQUksWUFBWSxJQUFJLENBQUMsSUFBSSxZQUFZLElBQUksU0FBUyxFQUFFLFNBQVM7QUFDekU7RUFDQSxZQUFZLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLHlCQUF5QixDQUFDLFlBQVksQ0FBQyxDQUFDO0VBQzdFLFlBQVksSUFBSSxhQUFhLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0VBQy9DLFlBQVksSUFBSSxhQUFhLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FB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LEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzdDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGNBQWMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM3QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDM0M7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzFDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMxQztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDekM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzdDO0VBQ0EsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLGVBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM5QztFQUNBLElBQUksZUFBZSxDQUFDLElBQUksRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDOUM7RUFDQSxJQUFJLElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDO0VBQ3ZCLElBQUksSUFBSSxDQUFDLFlBQVksR0FBRyxHQUFHLENBQUM7RUFDNUIsSUFBSSxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztFQUM3QixJQUFJLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0VBQzNCLElBQUksSUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUM7RUFDekIsSUFBSSxJQUFJLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztFQUN6QixJQUFJLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0VBQ3ZCLElBQUksSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7RUFDMUIsSUFBSSxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQztFQUMzQixJ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QUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUU7RUFDdkY7RUFDQSxRQUFRLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztFQUNyRyxRQUFRLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxJQUFJLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztFQUNyRztBQUNBO0VBQ0EsUUFBUSxJQUFJLE1BQU0sR0FBRyxVQUFVLEdBQUcsSUFBSSxHQUFHLEtBQUssQ0FBQztFQUMvQyxRQUFRLElBQUksU0FBUyxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsTUFBTSxHQUFHLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQztFQUMzRixRQUFRLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxPQUFPLFVBQVUsQ0FBQztFQUN2RjtBQUNBO0VBQ0EsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQztFQUMzQyxRQUFRLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztFQUNyQixRQUFRLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztBQUN0QjtFQUNBLFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDbEQsVUFBVSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RDO0VBQ0EsVUFBVSxJQUFJLEdBQUcsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztFQUNsRCxVQUFVLEdBQUcsR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUM1QyxVQUFVLEdBQUcsR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDaEQ7RUFDQSxVQUFVLElBQUksSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsWUFBWSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztFQUM3SSxVQUFVLEtBQUssRUFBRSxDQUFDO0VBQ2xCLFVBQVUsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBQzNFLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsU0FBUztFQUMzQyxVQUFVLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLO0VBQ2hDLGNBQWMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDakM7RUFDQSxVQUFVLElBQUksS0FBSyxHQUFHLEdBQUcsSUFBSSxLQUFLLEdBQUcsR0FBRyxFQUFFO0VBQzFDO0VBQ0EsWUFBWSxLQUFLLEdBQUcsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO0VBQ2pDLFdBQVc7QUFDWDtFQUNBLFVBQVUsSUFBSSxLQUFLLElBQUksR0FBRyxFQUFFO0VBQzVCO0VBQ0EsWUFBWSxJQUFJLEtB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R0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtFQUM5QztFQUNBLFlBQVksR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUN0RSxZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUN2RTtFQUNBLFlBQVksR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUN0RSxZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7RUFDdEUsWUFBWSxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUM3QixZQUFZLEtBQUssR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0VBQzlCLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQztFQUN0QixXQUFXO0FBQ1g7RUFDQSxVQUFVLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtFQUM3QixZQUFZLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7RUFDdEUsWUFBWSxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0VBQ3RFLFlBQVksSUFBSSxFQUFFLENBQUM7RUFDbkIsV0FBVztFQUNYLFNBQVM7QUFDVDtBQUNBO0VBQ0EsUUFBUSxJQUFJLEVBQUUsR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7RUFDdEQsUUFBUSxJQUFJLEdBQUcsR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUMvQixRQUFRLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7RUFDcEcsUUFBUSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDbkI7RUFDQSxRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsRUFBRSxDQUFDLEVBQUU7RUFDeEMsVUFBVSxJQUFJLFdBQVcsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO0VBQzdDLFVBQVUsSUFBSSxJQUFJLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDbEMsVUFBVSxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzNDO0VBQ0EsVUFBVSxLQUFLLElBQUksR0FBRyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFO0VBQy9DLFlBQVksSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDckMsWUFBWSxZQUFZLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7RUFDeEcsWUFBWSxJQUFJLFlBQVksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsWUFBWSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsRUFBRSxTQUFTO0FBQ25IO0VBQ0EsWUFBWSxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdkc7RUFDQSxZQUFZLEVBQUUsRUFBRSxDQUFDO0FBQ2pCO0VBQ0EsWUFBWSxJQUFJLFFBQVEsR0FBRyxXQUFXLEVBQUU7RUFDeEMsY0FBYyxXQUFXLEdBQUcsUUFBUSxDQUFDO0VBQ3JDLGNBQWMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7RUFDOUMsYUFBYTtFQUNiLFdBQVc7QUFDWDtFQUNBLFVBQVUsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7RUFDeEMsVUFBVSxFQUFFLElBQUksR0FBRyxDQUFDO0VBQ3BCLFNBQVM7QUFDVDtFQUNBLFFBQVEsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFD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Q0FBQyxFQUFFO0VBQ3BCO0VBQ0EsVUFBVSxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7RUFDbEQsVUFBVSxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztFQUMzQixVQUFVLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0VBQ3BDLFNBQVMsTUFBTSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRTtFQUMzQyxVQUFVLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ2xELFNBQVM7QUFDVDtBQUNBO0VBQ0EsUUFBUSxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLDBCQUEwQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7RUFDbkksT0FBTztFQUNQO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0FBQ0E7RUFDQSxLQUFLLEVBQUU7RUFDUCxNQUFNLEdBQUcsRUFBRSxTQUFTO0VBQ3BCLE1BQU0sS0FBSyxFQUFFLFNBQVMsT0FBTyxDQUFDLFlBQVksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO0VBQzlEO0VBQ0EsUUFBUSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQzNEO0VBQ0EsUUFBUSxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFO0VBQ3BDLFVB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O0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsRUFBRSxJQUFJLG1CQUFtQixHQUFHLFNBQVMsbUJBQW1CLEdBQUc7RUFDM0QsSUFBSSxlQUFlLENBQUMsSUFBSSxFQUFFLG1CQUFtQixDQUFDLENBQUM7QUFDL0M7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDNUM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDcEQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEQ7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDN0M7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDdkM7RUFDQSxJQUFJLGVBQWUsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7RUFDMUMsR0FBRyxDQUFDO0FBQ0o7RUFDQTtBQUNBO0VBQ0EsRUFBRSxJQUFJLFVBQVUsZ0JBQWdCLFlBQVk7RUFDNUM7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBLElBQUksU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0VBQzdCLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQztBQUN4QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMzQztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM5QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUM3QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUMvQztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNoRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxpQkFBaUIsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ3ZEO0VBQ0EsTUFBTSxlQUFlLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztBQUN4QztFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNwRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsRDtFQUNBLE1BQU0sZUFBZSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMs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QUUsSUFBSSxFQUFFLGFBQWEsR0FBRyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7RUFDM0YsR0FBRztFQUNILEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRTtFQUNsQixJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQztFQUNyRCxHQUFHO0VBQ0gsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFO0VBQ2hCLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDO0VBQ2xELEdBQUc7RUFDSCxDQUFDO0FBQ0Q7RUFDQSxJQUFJLEdBQUcsQ0FBQztFQUNSLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztFQUNmLFNBQVMsR0FBRyxVQUFVLEdBQUcsRUFBRTtFQUMzQixFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLE9BQU87RUFDeEIsRUFBRSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxFQUFFO0VBQzdCLElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDekQsSUFBSSxLQUFLLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztFQUN4QixJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7RUFDcEIsR0FBRztFQUNILE9BQU8sSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sR0FBRyxLQUFLLEVBQUU7RUFDMUMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDO0VBQ3ZGLEdBQUc7RUFDSDs7Ozs7Ozs7In0=', false);
  /* eslint-enable */

  //let app = new Worker('../src/worker.js')





  function bootWorker(objValue, secondsOfSimulation, millisecondsBetweenFrames, locationValue, bootCallback, tickCallback, nonce){
    let worker = WorkerFactory();
    function nextTick(arr){
      worker.postMessage(["tick" + nonce, ...arr]);
    }
    
    worker.onmessage = async function (event) {
      if (event.data.type == "doneBoot" + nonce) {
        worker.postMessage(["tick" + nonce, JSON.stringify([]), JSON.stringify([]), JSON.stringify([])]);
        bootCallback();
      }
      else if (event.data.type == "agentUpdate" + nonce) {
        tickCallback(event, nextTick);
      }
    };
    worker.postMessage(["boot", objValue, secondsOfSimulation, locationValue, nonce]);

  }

  return bootWorker;

}());
